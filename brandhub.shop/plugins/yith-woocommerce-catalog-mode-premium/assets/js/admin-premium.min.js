jQuery(function(o){o("input[name^=ywctm_inquiry_form_where_show]").on("change, click",function(){o(this).is(":checked")&&"tab"===o(this).val()&&o("input[name^=ywctm_inquiry_form_style][value=classic]").prop("checked",!0).trigger("click").trigger("change")}).trigger("change"),o("input[name^=ywctm_inquiry_form_style]").on("change",function(){o(this).is(":checked")&&"toggle"===o(this).val()?o("input[name^=ywctm_inquiry_form_tab_title]").parent().parent().parent().hide():o("input[name^=ywctm_inquiry_form_tab_title]").parent().parent().parent().show(500)}).trigger("change"),o("select[name^=ywctm_inquiry_form_type]").on("change",function(){var t=o("#ywctm_reCAPTCHA");"default"!==o(this).val()&&"yes"===t.val()&&t.prop("checked",!1).val("no").removeClass("onoffchecked").trigger("change"),"default"!==o(this).val()?o("tr.ywctm-default-form").hide():o("tr.ywctm-default-form").show(500)}).trigger("change"),o(".ywctm-exclusions .yith-save-button").on("click",function(t){window.onbeforeunload=null;var e=o("#item_type").val(),n=o("#"+e+"_ids");if(0===n.find("option").length)return n.parent().find("small").remove(),n.parent().append('<small style="color:#ff0000">'+ywctm.error_messages[e]+"</small>"),o("html, body").animate({scrollTop:n.parent().offset().top-30},500),t.preventDefault(),!1}),o(".ywctm-exclusions #doaction, .ywctm-exclusions #doaction2, .ywctm-exclusions #ywctm-filter-submit, .ywctm-exclusions #search-submit, .ywctm-exclusions .pagination-links, .ywctm-exclusions .yith-add-button, .ywctm-exclusions .yith-update-button").on("click",function(){window.onbeforeunload=""}),o(".column-inquiry_form .on_off").on("change",function(){var t={action:"ywctm_enable_inquiry_form",item_id:o(this).parent().data("item-id"),enabled:o(this).val(),section:o(this).parent().data("section"),vendor_id:ywctm.vendor_id,_wpnonce:o("#_wpnonce").val()};o.post(ywctm.ajax_url,t)}),o(".column-exclude .on_off").on("change",function(){var t={action:"ywctm_exclude_vendor",item_id:o(this).attr("id").replace("exclude_vendor",""),enabled:o(this).val(),_wpnonce:o("#_wpnonce").val()};o.post(ywctm.ajax_url,t)});var t=o("tr.ajax-products.product_ids"),e=o("tr.ajax-terms.category_ids"),n=o("tr.ajax-terms.tag_ids");function c(t){var e=t.attr("id"),n=-1!==e.indexOf("start")?"minDate":"maxDate",e="#"+("minDate"==n?e.replace("start","end"):e.replace("end","start")),c=t.datepicker("getDate");o(e).datepicker("option",n,c),o(t).change()}o("#item_type, .ywctm-exclusion-list-popup-wrapper #item_type").on("change",function(){switch(o(this).val()){case"category":t.hide(),e.show(500),n.hide();break;case"tag":t.hide(),e.hide(),n.show(500);break;default:t.show(500),e.hide(),n.hide()}}).trigger("change"),o("#ywctm_enable_atc_custom_options").on("change",function(){"no"===o(this).val()?(o("tr.ywctm_atc_status").hide(),o("tr.ywctm_custom_button").hide(),o("tr.ywctm_custom_button_loop").hide()):o("tr.ywctm_atc_status").show(500),o("#ywctm_atc_status").trigger("change")}).trigger("change"),o("#ywctm_atc_status").on("change",function(){var t=o("#ywctm_enable_atc_custom_options").val();"show"===o(this).val()||"no"===t?(o("tr.ywctm_custom_button").hide(),o("tr.ywctm_custom_button_loop").hide()):(o("tr.ywctm_custom_button").show(500),o("tr.ywctm_custom_button_loop").show(500)),o("#ywctm_custom_button").trigger("change"),o("#ywctm_custom_button_loop").trigger("change")}).trigger("change"),o("#ywctm_enable_price_custom_options").on("change",function(){"no"===o(this).val()?(o("tr.ywctm_price_status").hide(),o("tr.ywctm_custom_price_text").hide()):o("tr.ywctm_price_status").show(500),o("#ywctm_price_status").trigger("change")}).trigger("change"),o("#ywctm_price_status").on("change",function(){var t=o("#ywctm_enable_price_custom_options").val();"show"===o(this).val()||"no"===t?o("tr.ywctm_custom_price_text").hide():o("tr.ywctm_custom_price_text").show(500),o("#ywctm_custom_price_text").trigger("change")}).trigger("change"),o("#ywctm_has_exclusion").on("change",function(){"no"===o(this).val()?(o("#ywctm_enable_atc_custom_options").prop("checked",!1).val("no").removeClass("onoffchecked").trigger("change"),o("#ywctm_enable_price_custom_options").prop("checked",!1).val("no").removeClass("onoffchecked").trigger("change"),o("tr.ywctm_enable_inquiry_form").hide(),o("tr.ywctm_enable_atc_custom_options").hide(),o("tr.ywctm_enable_price_custom_options").hide()):(o("tr.ywctm_enable_inquiry_form").show(500),o("tr.ywctm_enable_atc_custom_options").show(500),o("tr.ywctm_enable_price_custom_options").show(500))}).trigger("change"),o("#ywctm_custom_button").on("change",function(){var t=o("#ywctm_atc_status").val(),e=o("#ywctm_enable_atc_custom_options").val();-1===o.inArray(parseInt(o(this).val()),ywctm.buttons_custom_url)||"show"===t||"no"===e?o("tr.ywctm_custom_button_url").hide():o("tr.ywctm_custom_button_url").show(500)}).trigger("change"),o("#ywctm_custom_button_loop").on("change",function(){var t=o("#ywctm_atc_status").val(),e=o("#ywctm_enable_atc_custom_options").val();-1===o.inArray(parseInt(o(this).val()),ywctm.buttons_custom_url)||"show"===t||"no"===e?o("tr.ywctm_custom_button_loop_url").hide():o("tr.ywctm_custom_button_loop_url").show(500)}).trigger("change"),o("#ywctm_custom_price_text").on("change",function(){var t=o("#ywctm_price_status").val(),e=o("#ywctm_enable_price_custom_options").val();-1===o.inArray(parseInt(o(this).val()),ywctm.buttons_custom_url)||"show"===t||"no"===e?o("tr.ywctm_custom_price_text_url").hide():o("tr.ywctm_custom_price_text_url").show(500)}).trigger("change"),o("#ywctm-new-time-range, #ywctm-new-date-range").on("click",function(t){t.preventDefault();var t="ywctm-new-time-range"===o(this).attr("id")?"time":"date",e=o(".ywctm-"+t+"-ranges"),n=e.find(".ywctm-"+t+"-range-row"),c=1,n=(n.each(function(){var t=o(this).data("index");c<t&&(c=t)}),c+1),t=wp.template("ywctm-"+t+"-range-row");o(t({index:n})).appendTo(e),o(document.body).trigger("wc-enhanced-select-init"),o(document.body).trigger("yith-framework-enhanced-select-init"),o(document.body).trigger("yith_fields_init")}),o("#ywctm_enable_geolocation").on("change",function(){"no"===o(this).val()&&o("#ywctm_enable_geolocation_maxmind").prop("checked",!1).val("no").removeClass("onoffchecked").trigger("change")}).trigger("change"),o("#ywctm_disable_shop").on("change",function(){"no"===o(this).val()&&(o("#ywctm_disable_shop_timerange").prop("checked",!1).val("no").removeClass("onoffchecked").trigger("change"),o("#ywctm_disable_shop_daterange").prop("checked",!1).val("no").removeClass("onoffchecked").trigger("change"))}).trigger("change"),o("#ywctm_disable_shop_timerange").on("change",function(){"no"===o(this).val()?o("#ywctm_disable_shop_timerange_ranges").find(".text input").each(function(){o(this).attr("required",!1)}):o("#ywctm_disable_shop_timerange_ranges").find(".text input").each(function(){o(this).attr("required",!0)})}).trigger("change"),o("#ywctm_disable_shop_daterange").on("change",function(){"no"===o(this).val()?o("#ywctm_disable_shop_daterange_ranges").find(".datepicker input").each(function(){o(this).attr("required",!1)}):o("#ywctm_disable_shop_daterange_ranges").find(".datepicker input").each(function(){o(this).attr("required",!0)})}).trigger("change"),o(document).on("click",".yith-icon.yith-icon-trash",function(){var t=o(this),e=t.closest("div.ywctm-time-range-row");(e=e.length?e:t.closest("div.ywctm-date-range-row")).remove()}),o(document.body).on("ywctm_add_error_tip",function(t,e,n){var c=e.position();0===e.parent().find(".wc_error_tip").length&&(e.after('<div class="wc_error_tip '+n+'">'+ywctm.error_messages[n]+"</div>"),e.parent().find(".wc_error_tip").css("width",150).css("left",c.left+e.width()-e.width()/2-o(".wc_error_tip").width()/2).css("top",c.top+e.height()).fadeIn("100"))}).on("blur",".ywctm-time-ranges-wrapper .text input",function(){o(".wc_error_tip").fadeOut("100",function(){o(this).remove()})}).on("keyup",".ywctm-time-ranges-wrapper .text input",function(t){var e=new RegExp("^"+o(this).prop("pattern")+"$","gi"),n=o(this).hasClass("ywctm-hours")?"error_hours":"error_minutes",c=o(this).val(),t=t.keyCode||t.which;e.test(c)||9===t?o(document.body).triggerHandler("wc_remove_error_tip",[o(this),n]):o(document.body).triggerHandler("ywctm_add_error_tip",[o(this),n])}),o.datepicker.setDefaults({onSelect:function(){c(o(this))}}),o(".yith-plugin-fw-datepicker").each(function(){o(this).each(function(){c(o(this))})});var i=o(document).find(".ywctm-exclusion-list-popup-wrapper"),r=i.find("form");o(document).on("click",".yith-add-button",function(t){t.preventDefault(),(i=o(document).find(".ywctm-exclusion-list-popup-wrapper")).dialog({closeText:"",title:ywctm.popup_labels.title.replace(/&#039;/g,"'"),width:500,modal:!0,dialogClass:"yith-plugin-ui ywctm-exclusion-list-popup",buttons:[{text:ywctm.popup_labels.save.replace(/&#039;/g,"'"),click:function(t){window.onbeforeunload=null;var e=o(".ywctm-exclusion-list-popup-wrapper"),n=e.hasClass("vendor-exclusion"),c=e.find("#item_type").val(),n=n?e.find("#item_ids"):e.find("#"+c+"_ids");if(0===n.find("option").length)return n.parent().find("small").remove(),n.parent().append('<small style="color:#ff0000">'+ywctm.error_messages[c]+"</small>"),t.preventDefault(),!1;r.submit()},"class":"yith-save-button"}]})}),o(".ywctm-notice").on("click",".notice-dismiss",function(){o(this).parent().hide()}),history.pushState(null,"",location.href.replace(/&?_wpnonce=([^&]$|[^&]*)/i,"").replace(/&?_wp_http_referer=([^&]$|[^&]*)/i,""))});
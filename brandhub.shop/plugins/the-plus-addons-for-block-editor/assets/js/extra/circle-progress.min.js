function CircleProgress(a){this.init(a)}CircleProgress.prototype={value:0,size:100,startAngle:-Math.PI,thickness:"auto",fill:{gradient:["#3aeabb","#fdd250"]},emptyFill:"rgba(0, 0, 0, .1)",animation:{duration:1200,easing:function(e,a,f,c){return f*(a/=c)*a+e}},animationStartValue:0,reverse:!1,lineCap:"butt",constructor:CircleProgress,el:null,canvas:null,ctx:null,radius:0,arcFill:null,lastFrameValue:0,init:function(a){Object.assign(this,a),this.radius=this.size/2,this.initWidget(),this.initFill(),this.draw()},initWidget:function(){var a=this.canvas=this.canvas||document.createElement("canvas");a.width=this.size,a.height=this.size,this.ctx=a.getContext("2d");let b=this.el.querySelectorAll("canvas");b&&b.forEach(a=>{a.remove()}),this.el&&this.el.appendChild(a)},initFill:function(){function a(){var a=document.createElement("canvas");a.width=e,a.height=e;var f=a.getContext("2d");f.drawImage(b,0,0,e,e),c.arcFill=d.createPattern(a,"no-repeat"),c.drawFrame(c.lastFrameValue)}var b,c=this,d=this.ctx,e=this.size,f=this.fill,g=this.thickness,h=this.radius;if(!f)throw new Error("The fill is not specified!");if(f.color&&(this.arcFill=f.color),f.gradient){var j=f.gradient;if(1===j.length)this.arcFill=j[0];else if(1<j.length){for(var k=f.gradientAngle||0,l=f.gradientDirection||[e/2*(1-Math.cos(k)),e/2*(1+Math.sin(k)),e/2*(1+Math.cos(k)),e/2*(1-Math.sin(k))],m=d.createLinearGradient.apply(d,l),n=0;n<j.length;n++){var o=j[n],p=n/(j.length-1);Array.isArray(o)&&(p=o[1],o=o[0]),m.addColorStop(p,o)}this.arcFill=m}}f.image&&(b=f.image instanceof Image?f.image:new Image,b.onload=a,b.src=f.image,b.complete&&a())},draw:function(){if(this.animation){var a=this.ctx,b=this.size;a.clearRect(0,0,b,b),this.drawEmptyArc(),this.drawAnimated(this.value)}else this.drawFrame(this.value)},drawFrame:function(a){this.lastFrameValue=a;var b=this.reverse;b?this.drawArcReverse(a):this.drawArc(a)},drawArcReverse:function(a){var b=this.ctx,c=this.radius,d=this.startAngle,e=this.getThickness(),f=this.arcFill;b.save(),b.beginPath(),b.arc(c,c,c-e/2,d,d-2*Math.PI*a,!0),b.lineWidth=e,b.lineCap=this.lineCap,b.strokeStyle=f,b.stroke(),b.restore()},drawArc:function(a){var b=this.ctx,c=this.radius,d=this.startAngle,e=this.getThickness(),f=this.arcFill;b.save(),b.beginPath(),b.arc(c,c,c-e/2,d,d+2*Math.PI*a),b.lineWidth=e,b.lineCap=this.lineCap,b.strokeStyle=f,b.stroke(),b.restore()},drawEmptyArc:function(){var a=this.ctx,b=this.radius,c=this.startAngle,d=this.getThickness(),e=this.emptyFill;a.save(),a.beginPath(),a.arc(b,b,b-d/2,c,c+1*(2*Math.PI)),a.lineWidth=d,a.strokeStyle=e,a.stroke(),a.restore()},drawAnimated:function(a){function b(){var f=new Date().getTime(),k=Math.min(h?(f-i)/h:1,1),l=g(e,a,k,1);c.drawFrame(l),1===k?d.dispatchEvent(new Event("circle-animation-end")):j(b)}var c=this,d=this.el,e=this.animationStartValue||0,f=this.animation,g=f.easing,h=f.duration,i=new Date().getTime(),j=window.requestAnimationFrame||function(a){setTimeout(a,1e3/60)};d.dispatchEvent(new Event("circle-animation-start")),b()},getThickness:function(){return"number"==typeof this.thickness?this.thickness:this.size/14},getValue:function(){return this.value},setValue:function(a){this.animation&&(this.animationStartValue=this.lastFrameValue),this.value=a,this.draw()}},function(){var a=CircleProgress.defaults=CircleProgress.prototype,b=CircleProgress.easing={};b.circleProgressEasing=function(a,b,c){return a+(b-a)*c},window.circleProgress=function(a){var b=document.querySelectorAll(a.selector);b.forEach(function(b){var c=b.circleProgress,d="string"==typeof a?{}:a;if(c)c.init(d);else{var e=Object.assign({},b.dataset);"string"==typeof e.fill&&(e.fill=JSON.parse(e.fill)),"string"==typeof e.animation&&(e.animation=JSON.parse(e.animation)),d=Object.assign(e,d),d.el=b,c=new CircleProgress(d),b.circleProgress=c}})}}();
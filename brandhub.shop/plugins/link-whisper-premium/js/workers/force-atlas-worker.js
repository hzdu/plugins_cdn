var e,t,n,i={};n=10,i.exports=function(e,t,i){var r,o,a,s,h,u,d,c,l,p,f,g,v,m,y,b,w,E,x,_,k,A,C,T=t.length,S=i.length,L=e.adjustSizes,R=e.barnesHutTheta*e.barnesHutTheta,N=[];for(a=0;a<T;a+=n)t[a+4]=t[a+2],t[a+5]=t[a+3],t[a+2]=0,t[a+3]=0;if(e.outboundAttractionDistribution){for(f=0,a=0;a<T;a+=n)f+=t[a+6];f/=T/n}if(e.barnesHutOptimize){var D,G,M,F=1/0,O=-1/0,z=1/0,I=-1/0;for(a=0;a<T;a+=n)F=Math.min(F,t[a+0]),O=Math.max(O,t[a+0]),z=Math.min(z,t[a+1]),I=Math.max(I,t[a+1]);var P=O-F,U=I-z;for(P>U?I=(z-=(P-U)/2)+P:O=(F-=(U-P)/2)+U,N[0]=-1,N[1]=(F+O)/2,N[2]=(z+I)/2,N[3]=Math.max(O-F,I-z),N[4]=-1,N[5]=-1,N[6]=0,N[7]=0,N[8]=0,r=1,a=0;a<T;a+=n)for(o=0,M=3;;){if(!(N[o+5]>=0)){if(N[o+0]<0){N[o+0]=a;break}if(N[o+5]=9*r,c=N[o+3]/2,N[(l=N[o+5])+0]=-1,N[l+1]=N[o+1]-c,N[l+2]=N[o+2]-c,N[l+3]=c,N[l+4]=l+9,N[l+5]=-1,N[l+6]=0,N[l+7]=0,N[l+8]=0,N[(l+=9)+0]=-1,N[l+1]=N[o+1]-c,N[l+2]=N[o+2]+c,N[l+3]=c,N[l+4]=l+9,N[l+5]=-1,N[l+6]=0,N[l+7]=0,N[l+8]=0,N[(l+=9)+0]=-1,N[l+1]=N[o+1]+c,N[l+2]=N[o+2]-c,N[l+3]=c,N[l+4]=l+9,N[l+5]=-1,N[l+6]=0,N[l+7]=0,N[l+8]=0,N[(l+=9)+0]=-1,N[l+1]=N[o+1]+c,N[l+2]=N[o+2]+c,N[l+3]=c,N[l+4]=N[o+4],N[l+5]=-1,N[l+6]=0,N[l+7]=0,N[l+8]=0,r+=4,D=t[N[o+0]+0]<N[o+1]?t[N[o+0]+1]<N[o+2]?N[o+5]:N[o+5]+9:t[N[o+0]+1]<N[o+2]?N[o+5]+18:N[o+5]+27,N[o+6]=t[N[o+0]+6],N[o+7]=t[N[o+0]+0],N[o+8]=t[N[o+0]+1],N[D+0]=N[o+0],N[o+0]=-1,D===(G=t[a+0]<N[o+1]?t[a+1]<N[o+2]?N[o+5]:N[o+5]+9:t[a+1]<N[o+2]?N[o+5]+18:N[o+5]+27)){if(M--){o=D;continue}M=3;break}N[G+0]=a;break}D=t[a+0]<N[o+1]?t[a+1]<N[o+2]?N[o+5]:N[o+5]+9:t[a+1]<N[o+2]?N[o+5]+18:N[o+5]+27,N[o+7]=(N[o+7]*N[o+6]+t[a+0]*t[a+6])/(N[o+6]+t[a+6]),N[o+8]=(N[o+8]*N[o+6]+t[a+1]*t[a+6])/(N[o+6]+t[a+6]),N[o+6]+=t[a+6],o=D}}if(e.barnesHutOptimize){for(g=e.scalingRatio,a=0;a<T;a+=n)for(o=0;;)if(N[o+5]>=0){if(b=Math.pow(t[a+0]-N[o+7],2)+Math.pow(t[a+1]-N[o+8],2),4*(p=N[o+3])*p/b<R){if(v=t[a+0]-N[o+7],m=t[a+1]-N[o+8],!0===L?b>0?(w=g*t[a+6]*N[o+6]/b,t[a+2]+=v*w,t[a+3]+=m*w):b<0&&(w=-g*t[a+6]*N[o+6]/Math.sqrt(b),t[a+2]+=v*w,t[a+3]+=m*w):b>0&&(w=g*t[a+6]*N[o+6]/b,t[a+2]+=v*w,t[a+3]+=m*w),(o=N[o+4])<0)break;continue}o=N[o+5]}else if((u=N[o+0])>=0&&u!==a&&(b=(v=t[a+0]-t[u+0])*v+(m=t[a+1]-t[u+1])*m,!0===L?b>0?(w=g*t[a+6]*t[u+6]/b,t[a+2]+=v*w,t[a+3]+=m*w):b<0&&(w=-g*t[a+6]*t[u+6]/Math.sqrt(b),t[a+2]+=v*w,t[a+3]+=m*w):b>0&&(w=g*t[a+6]*t[u+6]/b,t[a+2]+=v*w,t[a+3]+=m*w)),(o=N[o+4])<0)break}else for(g=e.scalingRatio,s=0;s<T;s+=n)for(h=0;h<s;h+=n)v=t[s+0]-t[h+0],m=t[s+1]-t[h+1],!0===L?(b=Math.sqrt(v*v+m*m)-t[s+8]-t[h+8])>0?(w=g*t[s+6]*t[h+6]/b/b,t[s+2]+=v*w,t[s+3]+=m*w,t[h+2]-=v*w,t[h+3]-=m*w):b<0&&(w=100*g*t[s+6]*t[h+6],t[s+2]+=v*w,t[s+3]+=m*w,t[h+2]-=v*w,t[h+3]-=m*w):(b=Math.sqrt(v*v+m*m))>0&&(w=g*t[s+6]*t[h+6]/b/b,t[s+2]+=v*w,t[s+3]+=m*w,t[h+2]-=v*w,t[h+3]-=m*w);for(l=e.gravity/e.scalingRatio,g=e.scalingRatio,a=0;a<T;a+=n)w=0,v=t[a+0],m=t[a+1],b=Math.sqrt(Math.pow(v,2)+Math.pow(m,2)),e.strongGravityMode?b>0&&(w=g*t[a+6]*l):b>0&&(w=g*t[a+6]*l/b),t[a+2]-=v*w,t[a+3]-=m*w;for(g=1*(e.outboundAttractionDistribution?f:1),d=0;d<S;d+=3)s=i[d+0],h=i[d+1],c=i[d+2],y=Math.pow(c,e.edgeWeightInfluence),v=t[s+0]-t[h+0],m=t[s+1]-t[h+1],!0===L?(b=Math.sqrt(v*v+m*m)-t[s+8]-t[h+8],e.linLogMode?e.outboundAttractionDistribution?b>0&&(w=-g*y*Math.log(1+b)/b/t[s+6]):b>0&&(w=-g*y*Math.log(1+b)/b):e.outboundAttractionDistribution?b>0&&(w=-g*y/t[s+6]):b>0&&(w=-g*y)):(b=Math.sqrt(Math.pow(v,2)+Math.pow(m,2)),e.linLogMode?e.outboundAttractionDistribution?b>0&&(w=-g*y*Math.log(1+b)/b/t[s+6]):b>0&&(w=-g*y*Math.log(1+b)/b):e.outboundAttractionDistribution?(b=1,w=-g*y/t[s+6]):(b=1,w=-g*y)),b>0&&(t[s+2]+=v*w,t[s+3]+=m*w,t[h+2]-=v*w,t[h+3]-=m*w);if(!0===L)for(a=0;a<T;a+=n)1!==t[a+9]&&((E=Math.sqrt(Math.pow(t[a+2],2)+Math.pow(t[a+3],2)))>10&&(t[a+2]=10*t[a+2]/E,t[a+3]=10*t[a+3]/E),x=t[a+6]*Math.sqrt((t[a+4]-t[a+2])*(t[a+4]-t[a+2])+(t[a+5]-t[a+3])*(t[a+5]-t[a+3])),_=Math.sqrt((t[a+4]+t[a+2])*(t[a+4]+t[a+2])+(t[a+5]+t[a+3])*(t[a+5]+t[a+3]))/2,k=.1*Math.log(1+_)/(1+Math.sqrt(x)),A=t[a+0]+t[a+2]*(k/e.slowDown),t[a+0]=A,C=t[a+1]+t[a+3]*(k/e.slowDown),t[a+1]=C);else for(a=0;a<T;a+=n)1!==t[a+9]&&(x=t[a+6]*Math.sqrt((t[a+4]-t[a+2])*(t[a+4]-t[a+2])+(t[a+5]-t[a+3])*(t[a+5]-t[a+3])),_=Math.sqrt((t[a+4]+t[a+2])*(t[a+4]+t[a+2])+(t[a+5]+t[a+3])*(t[a+5]+t[a+3]))/2,k=t[a+7]*Math.log(1+_)/(1+Math.sqrt(x)),t[a+7]=Math.min(1,Math.sqrt(k*(Math.pow(t[a+2],2)+Math.pow(t[a+3],2))/(1+Math.sqrt(x)))),A=t[a+0]+t[a+2]*(k/e.slowDown),t[a+0]=A,C=t[a+1]+t[a+3]*(k/e.slowDown),t[a+1]=C);return{}};var r=i.exports;self.addEventListener("message",(function(n){var i=n.data;e=new Float32Array(i.nodes),i.edges&&(t=new Float32Array(i.edges)),r(i.settings,e,t),self.postMessage({nodes:e.buffer},[e.buffer])}));
function init_thwvs(){thwvs_public.initialize_thwvs()}jQuery(function($){var AddToCartHandler=function(){$(document.body).on("click",".thwvs_add_to_cart_button",this.onAddToCart)};AddToCartHandler.prototype.onAddToCart=function(e){var $thisbutton=$(this),$variationdiv=($thisbutton.parents(".product.product-type-variable").find(".variations_form"),$thisbutton.parents(".product.product-type-variable").find(".variations_form"));if($thisbutton.is(".thwvs_ajax_add_to_cart")){var $variation_cart=$variationdiv.find(".woocommerce-variation-add-to-cart");if($variation_cart.hasClass("woocommerce-variation-add-to-cart-enabled")){e.preventDefault(),$thisbutton.removeClass("added"),$thisbutton.addClass("loading");var $variation_id=$variation_cart.find('input[name="variation_id"], input.variation_id').val(),data={};$.each($thisbutton.data(),function(key,value){data[key]=value});$variationdiv.find(".variations select").each(function(index,el){var key=$(el).attr("name"),value=$(el).val();data[key]=value}),data.variation_id=$variation_id,data.action="thwvs_add_to_cart",$.ajax({url:thwvs_public_var.ajax_url,data:data,type:"POST",success:function(response){if(response)return response.error&&response.product_url?void(window.location=response.product_url):"yes"===wc_add_to_cart_params.cart_redirect_after_add?void(window.location=wc_add_to_cart_params.cart_url):void $(document.body).trigger("added_to_cart",[response.fragments,response.cart_hash,$thisbutton])}})}}},new AddToCartHandler}),function(){"use strict";function onReady(){showImagesOnView(),window.addEventListener("scroll",showImagesOnView,!1)}function showImagesOnView(e){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=images[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var i=_step.value;if(!i.getAttribute("src")){var bounding=i.getBoundingClientRect();bounding.top>=0&&bounding.left>=0&&bounding.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&bounding.right<=(window.innerWidth||document.documentElement.clientWidth)&&(i.setAttribute("src",i.dataset.src),i.getAttribute("data-srcset")&&i.setAttribute("srcset",i.dataset.srcset))}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}if("yes"===thwvs_public_var.enable_lazy_load){var images=document.querySelectorAll("img.swatch-image[data-src]");document.addEventListener("DOMContentLoaded",onReady)}}();var thwvs_public_base=function($,window,document){"use strict";function display_char_count(elm,isCount){var fid=elm.prop("id"),len=elm.val().length,displayElm=$("#"+fid+"-char-count");if(isCount)displayElm.text("("+len+" characters)");else{var maxLen=elm.prop("maxlength"),left=maxLen-len;displayElm.text("("+left+" characters left)"),rem<0&&displayElm.css("color","red")}}function set_field_value_by_elm(elm,type,value){switch(type){case"radio":elm.val([value]);break;case"checkbox":1==elm.data("multiple")?(value=value||[],elm.val([value])):elm.val([value]);break;case"select":elm.prop("multiple")?elm.val(value):elm.val([value]);break;case"country":case"state":elm.val([value]).change();break;case"multiselect":elm.prop("multiple")?void 0!==value&&elm.val(value.split(",")).change():elm.val([value]);break;default:elm.val(value)}}function get_field_value(type,elm,name){var value="";switch(type){case"radio":value=$("input[type=radio][name="+name+"]:checked").val();break;case"checkbox":if(1==elm.data("multiple")){var valueArr=[];$("input[type=checkbox][name='"+name+"[]']:checked").each(function(){valueArr.push($(this).val())}),value=valueArr}else value=$("input[type=checkbox][name="+name+"]:checked").val();break;case"select":case"multiselect":default:value=elm.val()}return value}function setup_enhanced_select(form,class_selector,data){form.find("select."+class_selector).each(function(){var ms=$(this);ms.select2({allowClear:!0,placeholder:choose_option_text,maximumSelectionLength:ms.data("maxselections"),language:data.language}).addClass("enhanced")})}var choose_option_text=thwvs_public_var.choose_option_text;return{display_char_count:display_char_count,set_field_value_by_elm:set_field_value_by_elm,get_field_value:get_field_value,setup_enhanced_select:setup_enhanced_select}}(window.jQuery,window,document),thwvs_public=function($){"use strict";function initialize_thwvs(){function active_and_deactive_variation(form){var $attributeFields=form.$attributeFields;form.$form.find(".woocommerce-variation-add-to-cart");$attributeFields.each(function(index,el){var current_attr_select=$(el),current_attr_name=current_attr_select.data("attribute_name")||current_attr_select.attr("name");if(current_attr_select.hasClass("wc-bundle"))var current_attr_name="attribute_"+current_attr_select.attr("id");var current_attr_name_class=current_attr_name.replace(/[^a-z0-9_-]/gi,"");form.$form.find("."+current_attr_name_class).addClass("deactive"),current_attr_select.children("option").each(function(i,option){var opt_val=option.value;if(""!=opt_val){opt_val=opt_val.replace(/\s/g,".");var opt_val_class=opt_val.replace(/[^a-z0-9_-]/gi,""),current_option="";current_attr_name_class&&(current_option+="."+current_attr_name_class),opt_val_class?current_option+="."+opt_val_class:current_option="."+current_attr_name_class+'[data-value="'+opt_val+'"]',form.$form.find("."+current_attr_name_class+"."+opt_val_class).removeClass("deactive")}})})}function disable_out_of_stock_variation(form){var attributeFields=form.$attributeFields;if(1==attributeFields.length)for(var variations=form.variationData,i=0;i<variations.length;i++){var variation=variations[i],variation_attributes=variation.attributes,attribute_key=Object.keys(variation_attributes),attr_item_name=attribute_key[0],attr_item_name_class=attr_item_name.replace(/[^a-z0-9_-]/gi,""),current_attr_select=$(attributeFields);if($(attributeFields).hasClass("wc-bundle"))var attr_item_name_class="attribute_"+current_attr_select.attr("id");var attribute_value=variation_attributes[attr_item_name],attribute_value_class=attribute_value.replace(/[^a-z0-9_-]/gi,""),is_in_stock=variation.is_in_stock,attr_option_class="";attr_item_name_class?(attr_option_class="."+attr_item_name_class,attribute_value_class&&(attr_option_class=attr_option_class+"."+attribute_value_class)):attr_option_class="."+attr_item_name+'[data-value="'+attribute_value+'"]',is_in_stock||"default"==out_of_stock?form.$form.find(attr_option_class).removeClass("out_of_stock"):(form.$form.find(attr_option_class).addClass("out_of_stock"),form.$form.find(attr_option_class).trigger("out_of_stock",[is_in_stock,attr_item_name]))}else disable_out_of_stock_variation_multiple(form,attributeFields)}function disable_out_of_stock_variation_multiple(form,attributeFields){var total_attributes=attributeFields.length,count=0,selected_terms={},selected_term_names=[];attributeFields.each(function(index,element){var current_attr_select=$(this),current_attr_name=current_attr_select.data("attribute_name")||current_attr_select.attr("name"),selected_attribute_val=current_attr_select.val();""!=selected_attribute_val&&(count=++count,selected_terms[current_attr_name]=selected_attribute_val,selected_term_names[count]=current_attr_name)}),(0==count||count<total_attributes-1)&&form.$form.find(".thwvs_fields .thwvs-checkbox").removeClass("out_of_stock");var variations=form.variationData;if(count==total_attributes-1)for(var i=0;i<variations.length;i++){var variation=variations[i],variation_attributes=variation.attributes,q=0;$.each(variation_attributes,function(attr_item_name,attribute_value){if(variation_attributes[attr_item_name]==selected_terms[attr_item_name]&&++q==total_attributes-1){var current_variation=variation,current_attributes=current_variation.attributes;for(var current_attr_name in current_attributes)if(-1==jQuery.inArray(current_attr_name,selected_term_names)){var current_attr_val=variation_attributes[current_attr_name],attr_item_name_class=current_attr_name.replace(/[^a-z0-9_-]/gi,""),attribute_value_class=current_attr_val.replace(/[^a-z0-9_-]/gi,""),current_attr_select=$("select."+attr_item_name_class);current_attr_select.hasClass("wc-bundle")&&(attr_item_name_class="attribute_"+current_attr_select.attr("id"));var attr_option_class="";attr_option_class=attribute_value_class?"."+attr_item_name_class+"."+attribute_value_class:"."+attr_item_name_class+'[data-value="'+attribute_value+'"]';var is_in_stock=variation.is_in_stock;is_in_stock||"default"==out_of_stock?form.$form.find(attr_option_class).removeClass("out_of_stock"):(form.$form.find(attr_option_class).addClass("out_of_stock"),form.$form.find(attr_option_class).trigger("out_of_stock",[is_in_stock,attr_item_name]))}}})}else if(count==total_attributes){form.$form.find(".thwvs_fields .thwvs-checkbox").removeClass("out_of_stock");for(var i=0;i<variations.length;i++){var variation=variations[i],variation_attributes=variation.attributes,is_in_stock=variation.is_in_stock;if(!is_in_stock&&"default"!=out_of_stock){var q=0,current_variation=variation,current_attributes=current_variation.attributes;$.each(current_attributes,function(os_attr_name,os_attr_value){selected_terms[os_attr_name]==os_attr_value&&++q==total_attributes-1&&$.each(current_attributes,function(de_attr_name,de_attr_value){if(selected_terms[de_attr_name]!=de_attr_value){var current_os_attr_val=current_attributes[de_attr_name],attr_item_name_class=de_attr_name.replace(/[^a-z0-9_-]/gi,""),attribute_value_class=current_os_attr_val.replace(/[^a-z0-9_-]/gi,""),current_attr_select=$("select."+de_attr_name);current_attr_select.hasClass("wc-bundle")&&(attr_item_name_class="attribute_"+current_attr_select.attr("id"));var attr_option_class="";attr_option_class=attribute_value_class?"."+attr_item_name_class+"."+attribute_value_class:"."+attr_item_name_class+'[data-value="'+os_attr_value+'"]',form.$form.find(attr_option_class).addClass("out_of_stock"),form.$form.find(attr_option_class).trigger("out_of_stock",[is_in_stock,os_attr_name])}})})}}}}function show_stock_left_alert(form){if(form.$attributeFields.length>1){var count=0,selected_terms=[],attr_count=form.$attributeFields.length,selected_attributes=[],$addtocart_button=form.$form.find(".woocommerce-variation-add-to-cart"),wc_bundle=!1;if(form.$attributeFields.each(function(index,el){var current_attr_select=$(el),current_attr_name=current_attr_select.data("attribute_name")||current_attr_select.attr("name"),term_name=current_attr_select.val();wc_bundle=!!current_attr_select.hasClass("wc-bundle"),""!=term_name&&(count=++count,selected_terms[current_attr_name]=term_name,selected_attributes[count]=current_attr_name)}),form.$form.find(".size-buttons-inventory-left").text(""),count==attr_count-1)for(var variations=form.variationData,i=0;i<variations.length;i++){var variation=variations[i],variation_attributes=variation.attributes,q=0;$.each(variation_attributes,function(attr_name,attr_value){if(variation_attributes[attr_name]==selected_terms[attr_name]&&++q==attr_count-1){var current_variation=variation,current_attributes=current_variation.attributes;for(var current_attr_name in current_attributes)if(-1==jQuery.inArray(current_attr_name,selected_attributes)){var stock_attr=(variation.availability_html,variation_attributes[current_attr_name]),stock_attr_class=stock_attr?"."+stock_attr:"",current_attr_name_class=current_attr_name.replace(/[^a-z0-9_-]/gi,"");if(wc_bundle){var current_attr_select=$("select."+current_attr_name_class);current_attr_name_class="attribute_"+current_attr_select.attr("id")}var is_in_stock=variation.is_in_stock,stock_status=variation.stock_status,attr_item_class="",attr_item_stock_class="";if(current_attr_name_class&&(attr_item_class="."+current_attr_name_class+stock_attr_class,attr_item_stock_class=".stock_"+current_attr_name_class+stock_attr_class),is_in_stock)if($addtocart_button.hasClass("woocommerce-variation-add-to-cart-enabled"))form.$form.find(".size-buttons-inventory-left").text("");else{if("yes"==enable_stock_alert){var num=parseInt(variation.max_qty);if(min_value_stock=parseInt(min_value_stock),wc_bundle&&(num=parseInt(variation.avail_qty)),null!=num&&num<=min_value_stock){var $stock_inventory=form.$form.find(attr_item_stock_class);$stock_inventory.text(num+" "+product_left_text)}}if("onbackorder"==stock_status&&"yes"===enable_backorder_status){var $stock_inventory=form.$form.find(attr_item_stock_class);$stock_inventory.addClass("back-order"),$stock_inventory.text("Back-Order")}}else form.$form.find(attr_item_stock_class).text(""),form.$form.find(attr_item_class).trigger("out_of_stock",[is_in_stock,current_attr_name])}}})}else form.$form.find(".size-buttons-inventory-left").text("")}}function show_selected_variation_name_beside_label(elm,variation_name,name_value){var separator=thwvs_public_var.column_separator;elm.closest("tr").find(".label").find("label").find(".variation_name_label").remove();var default_label=elm.closest("tr").find(".label").find("label"),variation_name_label_html='<label class="variation_name_label" > '+separator+" "+variation_name+" </label>";variation_name_label_html=name_value?variation_name_label_html:"",default_label.append(variation_name_label_html)}function reset_shop_page_add_to_cart_button(form){var $addtocart_button=form.$form.siblings(".thwvs_add_to_cart_button");form.$form.siblings(".added_to_cart").remove(),$addtocart_button.text(select_option_text);var $price_field=form.$form.siblings(".price-wrapper");if($price_field.length>0)$price_field.show();else{var $price_field=form.$form.siblings(".woocommerce-LoopProduct-link").find(".price");$price_field.length>0&&$price_field.show()}}function featured_attribute_image_change(form,variation,page){var selected_variation=variation,$product_img="";selected_variation.image&&selected_variation.image.src&&selected_variation.image.src.length>0&&("product"===page&&($product_img=form.$form.closest(".product.product-type-variable").find(".woocommerce-product-gallery img.wp-post-image").not(".swatch-image")),"shop"===page&&($product_img=form.$form.closest(".product.product-type-variable").find("img.thwvs_shop_image").not(".swatch-image")),1===$product_img.length&&($product_img.wc_set_variation_attr("src",selected_variation.image.thumb_src),$product_img.wc_set_variation_attr("srcset",selected_variation.image.srcset),$product_img.wc_set_variation_attr("alt",selected_variation.image.alt)))}function shop_page_add_to_cart_funtion(form,variation){if(variation){if("yes"!==shop_page_price_enable){form.$form.find(".single_variation").hide()}var variation_id=variation.variation_id,$variationdiv=form.$form.find(".woocommerce-variation-add-to-cart"),$addtocart_button=form.$form.parent().find(shop_add_to_cart_button),selected_variation_id=$variationdiv.find('input[name="variation_id"], input.variation_id').val(),add_to_cart_text=thwvs_public_var.add_to_cart_text;if(variation_id==selected_variation_id){var purchasable=!0;variation.is_purchasable&&variation.is_in_stock&&variation.variation_is_visible||(purchasable=!1),purchasable?($variationdiv.hasClass("woocommerce-variation-add-to-cart-enabled")||$variationdiv.removeClass("woocommerce-variation-add-to-cart-disabled").addClass("woocommerce-variation-add-to-cart-enabled"),$addtocart_button.text(add_to_cart_text)):($variationdiv.hasClass("woocommerce-variation-add-to-cart-disabled")||$variationdiv.removeClass("woocommerce-variation-add-to-cart-enabled").addClass("woocommerce-variation-add-to-cart-disabled"),$addtocart_button.text(select_option_text)),$addtocart_button.text(add_to_cart_text);var add_shop_variation_price=thwvs_public_var.add_shop_variation_price,$price_field=form.$form.siblings(".price-wrapper"),variation_price=variation.price_html;variation.availability_html&&variation.availability_html;if($price_field.length>0&&variation_price&&"yes"===shop_page_price_enable)if(add_shop_variation_price)$price_field.hide();else{$price_field.siblings(".woocommerce-variation-availability").remove();var $new_html=variation_price+'<div class="woocommerce-variation-availability">'+variation.availability_html+"</div>";$price_field.replaceWith($new_html)}else{var $price_field=form.$form.siblings(".woocommerce-LoopProduct-link").find(".price"),price_holder=thwvs_public_var.shop_price_holder;if(price_holder?$price_field=form.$form.siblings(price_holder).find(".price"):form.$form.siblings(".price").length>0&&($price_field=form.$form.siblings(".price")),$price_field.length>0&&variation_price&&"yes"===shop_page_price_enable)if(add_shop_variation_price)$price_field.hide();else{$price_field.siblings(".woocommerce-variation-availability").remove();var $new_html=variation_price+'<div class="woocommerce-variation-availability">'+variation.availability_html+"</div>";$price_field.replaceWith($new_html)}}}}}function default_stock_single(form){var $attributeFields=form.$attributeFields;if(1==$attributeFields.length)for(var current_attr_select=(form.$form.find(".woocommerce-variation-add-to-cart"),$($attributeFields)),variations=(current_attr_select.data("attribute_name")||current_attr_select.attr("name"),form.variationData),i=0;i<variations.length;i++){var variation=variations[i],variation_attributes=variation.attributes;for(var attr_name in variation_attributes){var attr_item_name=variation.attributes[attr_name],$stock_html=variation.availability_html,$is_in_stock=variation.is_in_stock,stock_status=variation.stock_status,attr_item_class=($($stock_html).filter(".stock").text(),attr_item_name.replace(/[^a-z0-9_-]/gi,""));current_attr_select.hasClass("wc-bundle")&&(attr_name="attribute_"+current_attr_select.attr("id"));var attr_option_class="",stock_class="";if(attr_name&&(attr_option_class="."+attr_name,stock_class+="."+attr_name),attr_item_class?(attr_option_class+="."+attr_item_class,stock_class=".stock_"+attr_name+"."+attr_item_class):attr_option_class="."+attr_name+'[data-value="'+attr_item_name+'"]',$is_in_stock){if("yes"===enable_stock_alert){var num=parseInt($stock_html.match(/-?\d+\.?\d*/));if(min_value_stock=parseInt(min_value_stock),null!==num&&num<=min_value_stock){var $stock_inventory=form.$form.find(stock_class);$stock_inventory.text(num+" "+product_left_text)}}if("onbackorder"===stock_status&&"yes"===enable_backorder_status){var $stock_inventory=form.$form.find(stock_class);$stock_inventory.addClass("back-order"),$stock_inventory.text("Back-Order")}}else form.$form.find(attr_option_class).trigger("out_of_stock",[$is_in_stock,attr_item_name])}}}function set_radio_button_variation(form){form.$form.find(".thwvs-rad-li").find("li").each(function(i,$option){var $radio_el=$($option);$radio_el.find(".thwvs-rad").hasClass("thwvs-selected")&&$radio_el.find(".checkmark").css("display","block")})}function product_image_change_for_single_swatches(form,chosenAttributes,$element){var featured_item=$element.closest(".thwvs_fields").hasClass("thwvs_featured_wrapper"),all_featured_item=form.$form.find(".thwvs_featured_wrapper");if(0!=all_featured_item.length){var all_attributes=void 0!==chosenAttributes?chosenAttributes:form.getChosenAttributes(),attributes=void 0!==chosenAttributes?chosenAttributes:form.getChosenAttributesFeatured(all_featured_item);if(!0===featured_item&&(featured_item=$element.closest(".thwvs_fields"),attributes.count>0&&all_attributes.count!==all_attributes.chosenCount&&attributes.count===attributes.chosenCount)){var variations=form.variationData,currentAttributes=attributes.data;form.$form.trigger("update_variation_values");var matching_variations=form.findMatchingVariations(variations,currentAttributes),variation=matching_variations.shift();variation?("yes"===product_page_image_change&&featured_attribute_image_change(form,variation,"product"),"yes"===shop_page_image_change&&$("BODY.archive").length>0&&featured_attribute_image_change(form,variation,"shop"),"yes"==select_first_variation_on_featured&&($.each(variation.attributes,function(index,elm){$(".thwvs_fields .thwvs-checkbox."+index+"."+elm).addClass("thwvs-selected")}),form.$form.trigger("found_variation",[variation]))):(form.$form.trigger("reset_data"),attributes.chosenCount=0,form.loading||(form.$form.find(".single_variation").after('<p class="wc-no-matching-variations woocommerce-info">'+wc_add_to_cart_variation_params.i18n_no_matching_variations_text+"</p>"),form.$form.find(".wc-no-matching-variations").slideDown(200)))}}}function configure_selected_attribute(form){var attributes=form.$attributeFields;$.each(attributes,function(index,elm){var value=$(elm).val(),attr_name=$(elm).data("attribute_name"),attr_name_class=attr_name.replace(/[^a-z0-9_-]/gi,""),class_name=$(elm).attr("class");if(!value){if($(this).siblings(".thwvs-wrapper-ul").find(".thwvs-wrapper-item-li."+attr_name_class+".thwvs-selected").removeClass("thwvs-selected"),"thwvs-radio-type"===class_name){var radio_option=$(this).siblings(".thwvs-rad-li").find(".th-label-radio."+attr_name_class+".thwvs-selected");radio_option.find(".thwvs-rad").attr("checked",!1),radio_option.removeClass("thwvs-selected")}}})}function addQueryArg(url,query){if(query){query=query.trim().replace(/^(\?|#|&)/,"").replace(/(\?|#|&)$/,""),query=query?"?"+query:query;var parts=url.split(/[\?\#]/),start=parts[0];query&&/\:\/\/[^\/]*$/.test(start)&&(start+="/");var match=url.match(/(\#.*)$/);url=start+query,match&&(url+=match[0])}return url}function format_swatch_color(option){if(!option.id)return option.text;var color_prop=$(option.element).data("swatch"),type=color_prop.type?color_prop.type:"",color_1=color_prop.color_1?color_prop.color_1:"",color_2=color_prop.color_2?color_prop.color_2:"";if("single_color"===type)var $span=$('<span class = "thwvs-drop-span thwvs-drop-color" style="background-color:'+color_1+';"> </span><span class = "thwvs-drop-label" >'+option.text+"</span>");else var $span=$('<span class="thwvs-drop-span thwvs-drop-color bicolor-box"> <span class="bicolor child_1" style="background-color:'+color_1+'"></span><span class="bicolor child_2" style="background-color:'+color_2+'"></span></span><span class = "thwvs-drop-label" >'+option.text+"</span>");return $span}function format_swatch_image(option){if(!option.id)return option.text;var image=$(option.element).data("swatch");return $('<span class = "thwvs-drop-span thwvs-drop-img"><img src="'+image+'" /> </span><span class = "thwvs-drop-label" >'+option.text+"</span>")}var enable_stock_alert=thwvs_public_var.enable_stock_alert,enable_backorder_status=thwvs_public_var.backorder_stock_label,stock_alert_shop=thwvs_public_var.stock_alert_shop,min_value_stock=thwvs_public_var.min_value_stock,enable_select2=thwvs_public_var.select2_enable,select_option_text=thwvs_public_var.select_option_text,add_to_cart_text=thwvs_public_var.add_to_cart_text,choose_option_text=thwvs_public_var.choose_option_text,product_left_text=thwvs_public_var.product_left_text,no_combination_text=thwvs_public_var.no_combination_text,out_of_stock=thwvs_public_var.out_of_stock,clear_on_reselect=thwvs_public_var.clear_on_reselect,title_position=thwvs_public_var.title_position,product_page_image_change=thwvs_public_var.product_page_image_change,shop_page_image_change=thwvs_public_var.shop_page_image_change,shop_page_add_to_cart_enable=thwvs_public_var.shop_page_add_to_cart_enable,shop_page_price_enable=thwvs_public_var.shop_page_price_enable,variation_image_on_shop=thwvs_public_var.variation_image_on_shop,auto_convert=thwvs_public_var.auto_convert,only_featured_attribute=(thwvs_public_var.auto_convert_image,thwvs_public_var.only_featured_attribute),show_selected_variation_name=thwvs_public_var.show_selected_variation_name,shop_add_to_cart_button=thwvs_public_var.shop_page_add_to_cart_button,select_first_variation_on_featured="no",generate_url=thwvs_public_var.generate_url,swatches_form=function($form){var self=this;self.$form=$form,self.variationData=$form.data("product_variations"),self.useAjax=!1===self.variationData,self.$attributeFields=$form.find(".variations select"),self.$singleVariation=$form.find(".single_variation"),self.$singleVariationWrap=$form.find(".single_variation_wrap"),self.$resetVariations=$form.find(".reset_variations"),$form.on("reload_product_variations",{swatches_form:this},this.onReload),$form.on("reset_data",{swatches_form:this},this.onResetDisplayedVariation),$form.on("reset_image",{swatches_form:this},this.reset_variation_image),$form.on("click.thwvs_variation_form",".thwvs-checkbox",{swatches_form:this},this.onselect),$form.on("change.thwvs_variation_form",'input[type="radio"].thwvs-rad',{swatches_form:this},this.onselectradio),$form.on("change.thwvs_variation_form",".variations .thwvs-select-type",{swatches_form:this},this.onchangeselect),$form.on("check_variations.thwvs_variation_form",{swatches_form:this},this.onFindVariation),$form.on("found_variation.thwvs_variation_form",{swatches_form:this},this.onFoundVariation),$form.on("click.thwvs_variation_form",".reset_variations",{swatches_form:this},this.onReset),$form.on("show_variation",{swatches_form:this},this.showVariation),$form.on(),self.init($form),"yes"!==auto_convert&&self.enableSelect2Style(self.$attributeFields,$form),self.enableSwatchDropDown(self.$attributeFields,$form)};swatches_form.prototype.init=function(form){if(thwvs_public_var.get_variations_data){var product_id=form.data("product_id");this.useAjax&&wp.ajax.send("thwvs_get_product_variations",{data:{product_id:product_id},success:function(data){form.data("product_variations",data),form.trigger("reload_product_variations")},error:function(e){console.error("Variation not available on variation id "+product_id+".")}})}},swatches_form.prototype.enableSelect2Style=function($attributeFields,$form){$attributeFields.each(function(index,el){var current_attr_select=$(el),current_attr_design=current_attr_select.data("design_type"),current_attr_name=current_attr_select.data("attribute_name"),is_enable_select2="";if(is_enable_select2="object"==typeof enable_select2&&null!==enable_select2?enable_select2[current_attr_design]:enable_select2,current_attr_select.closest(".thwvs_fields").hasClass("thwvs-auto-convert")&&(is_enable_select2=""),$("BODY.archive").length>0&&"yes"===only_featured_attribute&&(current_attr_select.closest(".thwvs_fields").hasClass("thwvs_featured_wrapper")||(is_enable_select2="")),"yes"===is_enable_select2){var select_class="thwvs-select-type."+current_attr_design+"."+current_attr_name;thwvs_public_base.setup_enhanced_select($form,select_class,thwvs_public_var)}})},swatches_form.prototype.onReload=function(event){var form=event.data.swatches_form;form.variationData=form.$form.data("product_variations"),form.useAjax=!1===form.variationData,form.$form.trigger("check_variations")},swatches_form.prototype.onResetDisplayedVariation=function(event){if($("BODY.archive").length>0){var form=event.data.swatches_form;reset_shop_page_add_to_cart_button(form),form.$form.trigger("reset_image")}},swatches_form.prototype.onReset=function(event){var form=event.data.swatches_form;form.$form.find(".thwvs_fields .thwvs-checkbox").removeClass("thwvs-selected"),form.$form.find(".thwvs_fields > span").removeClass("selected"),form.$form.find(".thwvs_fields .thwvs-checkbox").removeClass("deactive"),form.$form.find(".thwvs_fields .thwvs-checkbox").removeClass("out_of_stock"),$(".thwvs-rad").prop("checked",!1),$(".thwvs-rad-li > label").removeClass("thwvs-selected");var $element=$(this);if($element.parents(".products .product.product-type-variable").find(shop_add_to_cart_button).text(select_option_text),$element.parents(".variations_form").siblings(".added_to_cart").remove(),form.$form.find(".size-buttons-inventory-left").text(""),active_and_deactive_variation(form),disable_out_of_stock_variation(form),default_stock_single(form),"yes"===show_selected_variation_name&&$(".variations").find(".label").find("label").find(".variation_name_label").remove(),$("BODY.archive").length>0){var $shop_img=$element.parents(".variations_form").closest(".product.product-type-variable").find("img.thwvs_shop_image").not(".swatch-image");1===$shop_img.length&&($shop_img.wc_reset_variation_attr("src"),$shop_img.wc_reset_variation_attr("srcset"),$shop_img.wc_reset_variation_attr("alt"))}},swatches_form.prototype.reset_variation_image=function(event){if($("BODY.archive").length>0){var form=event.data.swatches_form,$product_img=form.$form.closest(".product.product-type-variable").find("img.thwvs_shop_image").not(".swatch-image");1===$product_img.length&&($product_img.wc_reset_variation_attr("src"),$product_img.wc_reset_variation_attr("srcset"),$product_img.wc_reset_variation_attr("alt"))}},swatches_form.prototype.showVariation=function(event,variation,purchasable){var add_to_cart_button=$(this).parents(".products .product.product-type-variable").find(shop_add_to_cart_button);purchasable?add_to_cart_button.text(add_to_cart_text):add_to_cart_button.text(select_option_text)},swatches_form.prototype.onselect=function(event,chosenAttributes){var form=event.data.swatches_form,$element=$(this),$select=$element.closest(".thwvs_fields").find("select"),attribute_name=$select.data("attribute_name")||$select.attr("name"),value=$element.data("value");selected.push(attribute_name);var opt_val=value;if(opt_val="string"==typeof opt_val?opt_val.replace(/'/g,"\\'").replace(/"/g,'\\"'):opt_val,!$select.find('option[value="'+opt_val+'"]').length)return $element.siblings(".thwvs-checkbox").removeClass("thwvs-selected"),$select.val("").change(),alert(no_combination_text),!1;if($element.hasClass("thwvs-selected")){if("yes"!=clear_on_reselect)return!1;$select.val(""),$element.removeClass("thwvs-selected")}else $element.addClass("thwvs-selected").siblings(".thwvs-selected").removeClass("thwvs-selected"),$select.val(value);if($select.change(),"yes"!=enable_stock_alert&&"yes"!=stock_alert_shop&&"yes"!=enable_backorder_status||(1===form.$attributeFields.length?default_stock_single(form):show_stock_left_alert(form)),"yes"!==product_page_image_change&&"yes"!==shop_page_image_change||product_image_change_for_single_swatches(form,chosenAttributes,$element),"yes"===show_selected_variation_name){show_selected_variation_name_beside_label($select,$select.children(":selected").text(),$select.val())}},swatches_form.prototype.onchangeselect=function(event,chosenAttributes){var form=event.data.swatches_form,$element=$(this);if("yes"!==product_page_image_change&&"yes"!==shop_page_image_change||product_image_change_for_single_swatches(form,chosenAttributes,$element),"yes"===show_selected_variation_name){show_selected_variation_name_beside_label($element,$element.children(":selected").text(),$element.val())}},swatches_form.prototype.onselectradio=function(event,chosenAttributes){var form=event.data.swatches_form,$element=$(this),$select=$element.closest(".thwvs_fields").find("select"),attribute_name=$select.data("attribute_name")||$select.attr("name"),value=$element.data("value");clicked=attribute_name,selected.push(attribute_name);var parent_radio=$element.closest(".th-label-radio");(1==$element.prop("checked")&&parent_radio.addClass("thwvs-selected").siblings().removeClass("thwvs-selected"),$select.val(value),$select.change(),"yes"!=enable_stock_alert&&"yes"!=stock_alert_shop&&"yes"!=enable_backorder_status||(1===form.$attributeFields.length?default_stock_single(form):show_stock_left_alert(form)),"yes"!==product_page_image_change&&"yes"!==shop_page_image_change||product_image_change_for_single_swatches(form,chosenAttributes,$element),"yes"===show_selected_variation_name)&&show_selected_variation_name_beside_label($element,$select.children(":selected").text(),$select.val())},$.fn.wc_set_variation_attr=function(attr,value){void 0===this.attr("data-o_"+attr)&&this.attr("data-o_"+attr,this.attr(attr)?this.attr(attr):""),!1===value?this.removeAttr(attr):this.attr(attr,value)},swatches_form.prototype.onFoundVariation=function(event,variation){var form=event.data.swatches_form;if($("BODY.archive").length>0){if("yes"!==shop_page_price_enable){
form.$form.find(".single_variation").hide()}"yes"===shop_page_add_to_cart_enable&&shop_page_add_to_cart_funtion(form,variation)}if($("BODY.archive").length>0&&"yes"===variation_image_on_shop&&featured_attribute_image_change(form,variation,"shop"),"yes"===generate_url){var url=new URL(window.location.toString()),originalUrl=url.origin+url.pathname,attributes=variation.attributes,params=$.param(attributes),newurl=addQueryArg(originalUrl,params);window.history.replaceState({},"",newurl)}},swatches_form.prototype.onFindVariation=function(event,chosenAttributes){var form=event.data.swatches_form,attributes=void 0!==chosenAttributes?chosenAttributes:form.getChosenAttributes();(active_and_deactive_variation(form),disable_out_of_stock_variation(form),"yes"!=enable_stock_alert&&"yes"!=stock_alert_shop&&"yes"!=enable_backorder_status||(1===form.$attributeFields.length?default_stock_single(form):show_stock_left_alert(form)),form.$form.find(".thwvs-rad-li").length>0&&set_radio_button_variation(form),configure_selected_attribute(form),"left"!==title_position&&"flatsome"!==active_theme||form.show_reset_variation(attributes.chosenCount>0),"yes"===show_selected_variation_name)&&form.$attributeFields.each(function(index,element){var current_attr_select=$(this);current_attr_select.data("attribute_name")||current_attr_select.attr("name"),""!=current_attr_select.val()&&show_selected_variation_name_beside_label(current_attr_select,current_attr_select.children(":selected").text(),current_attr_select.val())})},swatches_form.prototype.show_reset_variation=function(on){var parent_tr=this.$resetVariations.closest("tr"),parent_table=this.$resetVariations.closest("table");on?(parent_tr.addClass("reset-tr"),parent_table.addClass("reset-table"),this.$resetVariations.show("slow")):(parent_tr.removeClass("reset-tr"),parent_table.removeClass("reset-table"),this.$resetVariations.hide(),this.$resetVariations.css("display","none"))},swatches_form.prototype.getChosenAttributes=function(){var data={},count=0,chosen=0;return this.$attributeFields.each(function(){var attribute_name=$(this).data("attribute_name")||$(this).attr("name"),value=$(this).val()||"";value.length>0&&chosen++,count++,data[attribute_name]=value}),{count:count,chosenCount:chosen,data:data}},swatches_form.prototype.getChosenAttributesFeatured=function(featured_item){var data={},count=0,chosen=0;return featured_item.each(function(){$(this).find("select").each(function(){var attribute_name=$(this).data("attribute_name")||$(this).attr("name"),value=$(this).val()||"";value.length>0&&chosen++,count++,data[attribute_name]=value})}),{count:count,chosenCount:chosen,data:data}},swatches_form.prototype.findMatchingVariations=function(variations,attributes){for(var matching=[],i=0;i<variations.length;i++){var variation=variations[i];this.isMatch(variation.attributes,attributes)&&matching.push(variation)}return matching},swatches_form.prototype.isMatch=function(variation_attributes,attributes){var match=!0;for(var attr_name in variation_attributes)if(variation_attributes.hasOwnProperty(attr_name)){var val1=variation_attributes[attr_name],val2=attributes[attr_name];void 0!==val1&&void 0!==val2&&0!==val1.length&&0!==val2.length&&val1!==val2&&(match=!1)}return match},swatches_form.prototype.enableSwatchDropDown=function($attributeFields,$form){$attributeFields.each(function(index,el){var attr_select=$(el);if(attr_select.hasClass("thwvs-swatch-dropdown")){"swatch_dropdown_color"===attr_select.data("swatchtype")?attr_select.selectWoo({allowClear:!0,placeholder:choose_option_text,dropdownCssClass:"thwvs_drop_swatch",templateResult:format_swatch_color,templateSelection:format_swatch_color,selectionAdapter:$.fn.selectWoo.amd.require("customSingleSelectionAdapter")}).addClass("enhanced"):attr_select.selectWoo({allowClear:!0,placeholder:choose_option_text,dropdownCssClass:"thwvs_drop_swatch",templateResult:format_swatch_image,templateSelection:format_swatch_image,selectionAdapter:$.fn.selectWoo.amd.require("customSingleSelectionAdapter")}).addClass("enhanced")}})},$.fn.selectWoo.amd.define("customSingleSelectionAdapter",["select2/utils","select2/selection/single"],function(Utils,SingleSelection){const adapter=SingleSelection;return adapter.prototype.update=function(data){if(0===data.length)return void this.clear();var selection=data[0],$rendered=this.$selection.find(".select2-selection__rendered"),formatted=this.display(selection,$rendered);$rendered.empty().append(formatted),$rendered.prop("title",selection.title||selection.text)},adapter}),$.fn.thwvs_variation_form=function(){return new swatches_form(this),this},$(function(){thwvs_swatch_styles.initialize_thwvs_styles(),"undefined"!=typeof wc_add_to_cart_variation_params&&$(".variations_form").each(function(){$(this).hasClass("th-var-active")||($(this).addClass("th-var-active"),$(this).thwvs_variation_form())})});var clicked=null,selected=[]}initialize_thwvs(),"flatsome"==thwvs_public_var.is_quick_view?$(document).on("mfpOpen",function(){initialize_thwvs()}):"yith"==thwvs_public_var.is_quick_view&&$(document).on("qv_loader_stop",function(){initialize_thwvs()}),"wpc_smart"==thwvs_public_var.is_quick_view&&$(document).ajaxComplete(function(event,request,options){request&&4===request.readyState&&200===request.status&&$(event.target).find("#woosq-popup").length>0&&initialize_thwvs()});var active_theme=thwvs_public_var.active_theme;return"Avada"==active_theme&&$("body").on("click",".thwvs_ajax_add_to_cart",function(){var shope_item=$(this).closest(".product.product-type-variable"),car_loading=shope_item.find(".cart-loading");car_loading.find("i").removeClass("fusion-icon-check-square-o").addClass("fusion-icon-spinner"),car_loading.fadeIn(),setTimeout(function(){car_loading.find("i").hide().removeClass("fusion-icon-spinner").addClass("fusion-icon-check-square-o").fadeIn(),shope_item.addClass("fusion-item-in-cart")},2e3)}),{initialize_thwvs:initialize_thwvs}}(jQuery),thwvs_swatch_styles=function($,window,document){"use strict";function initialize_thwvs_styles(){$(".thwvs-accvalue").closest("tr").each(function(index,el){var tr=$(el);tr.find(".label").addClass("thwvs-acclabel"),tr.find(".value").addClass("thwvs-acc")}),$(".thwvs-acclabel").each(function(index,el){$(this).on("click",function(){$(this).toggleClass("active");var swatch_elm=$(this).next().find(".thwvs-accvalue");swatch_elm.height()?swatch_elm.css({maxHeight:0,overflow:"hidden"}):swatch_elm.css({maxHeight:$(swatch_elm).prop("scrollHeight")+"px",overflow:"visible"})})});var td_width=$(".single-product div.product table.variations .value ").width();$(".variations_form").find(".variations .thwvs-slider").each(function(index,el){setup_swatches_slider($(el),td_width)});var $hor_scrollers=$(".thwvs-hor-scroll");$hor_scrollers&&$hor_scrollers.each(function(index,el){setup_swatches_horizontal_scroller($(el),td_width)}),$(".thwvs-ver-scroll").each(function(index,el){setup_swatches_vertical_scroller($(el),td_width)})}function move_slider(slider,prevBtn,nextBtn,leftPos,startPos,endPos,totalItems,itemsPerView){var active=!0;slider.animate({left:leftPos},{duration:500,complete:function(){active=!1}})}function setup_swatches_slider(attr_slider,td_width){var swatch_width=attr_slider.find(".thwvs-wrapper-item-li").outerWidth(),swatch_height=attr_slider.find(".thwvs-wrapper-item-li").outerHeight(),item_width=swatch_width+8,items_per_view="",per_view=td_width/item_width;Math.floor(per_view);items_per_view=Math.floor(td_width/item_width)-1;var slid_maxwidth=item_width*items_per_view,viewport=attr_slider.find(".thwvs-slider-viewport"),list=attr_slider.find(".thwvs-slider-viewport .thwvs-wrapper-ul"),prevBtn=attr_slider.find(".thwvs-control-buttons .thwvs-thslider-prev"),nextBtn=attr_slider.find(".thwvs-control-buttons .thwvs-thslider-next"),total_items=attr_slider.find(".thwvs-wrapper-item-li").length,total_width=total_items*item_width;if(total_items>items_per_view){viewport.css("overflow","hidden"),setup_tooltip_overflow(attr_slider,swatch_height,swatch_width),attr_slider.find(".thwvs-slider-box").css("margin","0 25px"),list.css("width",total_width);var finalPos=total_items,leftPos="",startPos=1,endPos=total_items>items_per_view?items_per_view:finalPos,arrow_top=swatch_height/2-8,next_space=slid_maxwidth+40;attr_slider.find(".thwvs-slider-box").css("max-width",slid_maxwidth),attr_slider.find(".next.thwvs-thslider-next").css("left",next_space),attr_slider.find(".thwvs-control").css("top",arrow_top),prevBtn.click(function(){var rem_to_view=startPos-1,items_next_view=items_per_view;rem_to_view<items_per_view?(startPos=1,endPos=items_per_view,items_next_view=rem_to_view):(startPos-=items_per_view,endPos-=items_per_view),rem_to_view>0&&(leftPos=1===startPos?1:"+="+item_width*items_next_view,move_slider(list,prevBtn,nextBtn,leftPos,startPos,endPos,total_items,items_per_view))}),nextBtn.click(function(){var rem_to_view=total_items-endPos,items_next_view=items_per_view;rem_to_view<items_per_view?(startPos+=rem_to_view,endPos+=rem_to_view,items_next_view=rem_to_view):(startPos+=items_per_view,endPos+=items_per_view),rem_to_view>0&&(leftPos="-="+item_width*items_next_view,move_slider(list,prevBtn,nextBtn,leftPos,startPos,endPos,total_items,items_per_view))})}else prevBtn.css("display","none"),nextBtn.css("display","none")}function setup_swatches_horizontal_scroller(attr_scroller,td_width){var swatch_width=attr_scroller.find(".thwvs-wrapper-item-li").outerWidth(),swatch_height=attr_scroller.find(".thwvs-wrapper-item-li").outerHeight(),item_width=swatch_width+8,total_items=attr_scroller.find(".thwvs-wrapper-item-li").length,total_width=total_items*item_width,scroll_width=total_width/2+item_width+item_width/2;if(total_width>2*td_width){attr_scroller.addClass("th-scoll-bar");attr_scroller.find(".thwvs-wrapper-ul").css("width",scroll_width),attr_scroller.css("max-width",td_width),setup_tooltip_overflow(attr_scroller,swatch_height,swatch_width)}}function setup_swatches_vertical_scroller(attr_scroller,td_width){var td_height=attr_scroller.outerHeight(),swatch_height=attr_scroller.find(".thwvs-wrapper-item-li").outerHeight(),swatch_width=attr_scroller.find(".thwvs-wrapper-item-li").outerWidth(),item_height=swatch_height+8,scroll_height=2*item_height;td_height>scroll_height&&(attr_scroller.css("height",scroll_height),attr_scroller.addClass("th-scoll-bar"),setup_tooltip_overflow(attr_scroller,swatch_height,swatch_width))}function setup_tooltip_overflow(hr_elm,elm_height,elm_width){hr_elm.find(".thwvs-tooltip").hover(function(){if($(this).find(".tooltiptext").length>0){var tip_class="text-"+$(this).data("attribute_name"),tip_elm=$(".thwvs-ad-tooltip."+tip_class),ttip_text=$(this).find(".tooltiptext").text();$(this).find(".tooltiptext").hide(),tip_elm.text(ttip_text),tip_elm.css("opacity",1),tip_elm.css("visibility","visible");var parent_td=$(this).closest("table.variations td.value"),offset_parent=parent_td.offset(),offset_child=$(this).offset(),left=offset_child.left-offset_parent.left-(60-elm_width/2+2),top=offset_child.top-offset_parent.top-50;$(".thwvs-ad-tooltip.tip-text").css("top",top),$(".thwvs-ad-tooltip.tip-text").css("left",left)}else if($(this).find(".tooltipimage").length>0){var tip_class="img-"+$(this).data("attribute_name"),tip_elm=$(".thwvs-ad-tooltip."+tip_class),tip_img_elm=$(this).find(".tooltipimage img"),img_src=$(tip_img_elm).attr("src"),def_tip=$(this).find(".tooltipimage"),tip_height=def_tip.outerHeight(),tip_width=def_tip.outerWidth();def_tip.hide(),tip_elm.find("img").attr("src",img_src),tip_elm.css("opacity",1),tip_elm.css("visibility","visible");var parent_td=$(this).closest("table.variations td.value"),offset_parent=parent_td.offset(),offset_child=$(this).offset(),left=offset_child.left-offset_parent.left-(tip_width/2-elm_width/2+4),top=offset_child.top-offset_parent.top-tip_height-10;$(".thwvs-ad-tooltip.tip-img").css("top",top),$(".thwvs-ad-tooltip.tip-img").css("left",left)}},function(){$(".thwvs-ad-tooltip").css("visibility","hidden")}),hr_elm.find(".thwvs-tooltip-description").hover(function(){if($(this).find(".tooltip-description").length>0){var tip_class="desc-"+$(this).data("attribute_name"),tip_elm=$(".thwvs-desc_tip."+tip_class),tip_des_elm=$(this).find(".tooltip-description").html();$(this).find(".tooltip-description").hide(),tip_elm.find("span").replaceWith(tip_des_elm),tip_elm.css("opacity",1),tip_elm.css("visibility","visible")}},function(){$(".thwvs-desc_tip").css("visibility","hidden")})}return{initialize_thwvs_styles:initialize_thwvs_styles}}(window.jQuery,window,document);
!function(u){var c={data:{is_multipart_form:null,submitBtn:null,submitBtnState:null},init:function(){c.data.show_and_conditions=[],c.data.show_or_or_conditions=[],c.data.hide_and_conditions=[],c.data.hide_or_or_conditions=[],c.data.disable_and_conditions=[],c.data.disable_or_or_conditions=[],u(document).ready(c.ready),c.bindUIActions()},ready:function(){c.get_conditional_rules(),c.applyLogic()},bindUIActions:function(){u(".ur-frontend-field, .urwc-field-input").on("input change",function(){c.applyLogic(),c.handleMultipart()}),u(".ur-multipart-form").on("user_registration_multipart_part_changed",function(t,a){c.handleMultipart()})},applyLogic:function(){let t=u('button.ur-submit-button[type="submit"]');c.data.submitBtn=t;var a=c.evaluateCondition(c.data.show_and_conditions,"and","show"),i=c.evaluateCondition(c.data.show_or_or_conditions,"or","show");a&&i||a||i?c.changeState("show"):""===a&&""===i||c.changeState("hide");a=c.evaluateCondition(c.data.hide_and_conditions,"and","hide"),i=c.evaluateCondition(c.data.hide_or_or_conditions,"or","hide");a&&i||a||i?c.changeState("hide"):""===a&&""===i||c.changeState("show");a=c.evaluateCondition(c.data.disable_and_conditions,"and","disable"),i=c.evaluateCondition(c.data.disable_or_or_conditions,"or","disable");a&&i||a||i?t.prop("disabled",!0):""===a&&""===i||t.prop("disabled",!1)},changeState:function(t){switch(t){case"show":c.data.submitBtnState="show",c.isMultipartForm()||c.data.submitBtn.show();break;case"hide":c.data.submitBtnState="hide",c.isMultipartForm()||c.data.submitBtn.hide()}},get_conditional_rules:function(){let t=u('button.ur-submit-button[type="submit"]'),a=t.attr("conditional_rules");undefined!==a&&(a=JSON.parse(a),u.each(a,function(t,o){o.conditions&&u.each(o.conditions,function(t,a){a=a.map(t=>t.field_value);"show"===o.action?c.data.show_and_conditions.push(a):"hide"===o.action?c.data.hide_and_conditions.push(a):"disable"===o.action&&c.data.disable_and_conditions.push(a)}),o.or_conditions&&(c.data.show_or_or_conditions=[],c.data.hide_or_or_conditions=[],c.data.disable_or_or_conditions=[],u.each(o.or_conditions,function(i,t){u.each(t,function(t,a){a=a.map(t=>t.field_value);"show"===o.action?(c.data.show_or_or_conditions[i]=c.data.show_or_or_conditions[i]||[],c.data.show_or_or_conditions[i].push(a)):"hide"===o.action?(c.data.hide_or_or_conditions[i]=c.data.hide_or_or_conditions[i]||[],c.data.hide_or_or_conditions[i].push(a)):"disable"===o.action&&(c.data.disable_or_or_conditions[i]=c.data.disable_or_or_conditions[i]||[],c.data.disable_or_or_conditions[i].push(a))})}))}))},evaluateCondition:function(t,a,i){if(!t||0===t.length)return"";const o=c.evaluateOperator;return"and"===a?t.every(t=>o(t,i)):($statuses=t.map(t=>t.every(t=>o(t,i))),$statuses.some(t=>t))},evaluateOperator:function(t,a){var i=u(".user-registration.ur-frontend-form form");const[o,n,e]=t,d=c.getFieldValue(o,i);var r=Array.isArray(d);let s;switch(n){case"is":s=r?d.includes(e):e===d;break;case"is_not":s=r?!d.includes(e):e!==d;break;case"empty":s=r?0===d.length:""===d;break;case"not_empty":s=r?0!==d.length:""!==d;break;case"greater_than":s=r?d.some(t=>parseFloat(t)>parseFloat(e)):parseFloat(d)>parseFloat(e);break;case"less_than":s=r?d.some(t=>parseFloat(t)<parseFloat(e)):parseFloat(d)<parseFloat(e);break;default:s=r?d.includes(e):e===d}return s},getFieldValue:function(t,a){t=a.find('.ur-field-item[data-field-id="'+t+'"]'),a=t.find(".ur-frontend-field, .urwc-field-input");return"radio"==a.attr("type")?t.find('input[type="radio"]:checked').val():a.hasClass("urwc-field-input")?a.is(":checked")?"checked":"unchecked":a.is(":checkbox")?a.filter(":checked").map(function(){return u(this).val()}).get():a.val()},isMultipartForm:function(){return null===c.data.is_multipart_form&&(u(".user-registration.ur-frontend-form.ur-multipart-form").length?c.data.is_multipart_form=!0:c.data.is_multipart_form=!1),c.data.is_multipart_form},handleMultipart:function(){if(c.isMultipartForm()){var t=u(".user-registration-multi-part-indicator");if(parseInt(t.attr("data-current-part"))===parseInt(t.attr("data-total")))switch(c.data.submitBtnState){case"show":c.data.submitBtn.show();break;case"hide":c.data.submitBtn.hide()}}}};c.init()}(jQuery);
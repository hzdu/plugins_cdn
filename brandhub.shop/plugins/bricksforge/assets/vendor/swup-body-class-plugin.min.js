!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t||self).SwupBodyClassPlugin=e()}(this,(function(){function t(){return t=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},t.apply(this,arguments)}const e=t=>String(t).split(".").map((t=>String(parseInt(t||"0",10)))).concat(["0","0"]).slice(0,3).join(".");class s{constructor(){this.isSwupPlugin=!0,this.swup=void 0,this.version=void 0,this.requires={},this.handlersToUnregister=[]}mount(){}unmount(){this.handlersToUnregister.forEach((t=>t())),this.handlersToUnregister=[]}_beforeMount(){if(!this.name)throw new Error("You must define a name of plugin when creating a class.")}_afterUnmount(){}_checkRequirements(){return"object"!=typeof this.requires||Object.entries(this.requires).forEach((([t,s])=>{if(!function(t,s,r){const n=function(t,e){var s;if("swup"===t)return null!=(s=e.version)?s:"";{var r;const s=e.findPlugin(t);return null!=(r=null==s?void 0:s.version)?r:""}}(t,r);return!!n&&((t,s)=>s.every((s=>{const[,r,n]=s.match(/^([\D]+)?(.*)$/)||[];var i,o;return((t,e)=>{const s={"":t=>0===t,">":t=>t>0,">=":t=>t>=0,"<":t=>t<0,"<=":t=>t<=0};return(s[e]||s[""])(t)})((o=n,i=e(i=t),o=e(o),i.localeCompare(o,void 0,{numeric:!0})),r||">=")})))(n,s)}(t,s=Array.isArray(s)?s:[s],this.swup)){const e=`${t} ${s.join(", ")}`;throw new Error(`Plugin version mismatch: ${this.name} requires ${e}`)}})),!0}on(t,e,s={}){var r;e=!(r=e).name.startsWith("bound ")||r.hasOwnProperty("prototype")?e.bind(this):e;const n=this.swup.hooks.on(t,e,s);return this.handlersToUnregister.push(n),n}once(e,s,r={}){return this.on(e,s,t({},r,{once:!0}))}before(e,s,r={}){return this.on(e,s,t({},r,{before:!0}))}replace(e,s,r={}){return this.on(e,s,t({},r,{replace:!0}))}off(t,e){return this.swup.hooks.off(t,e)}}return class extends s{constructor(t){void 0===t&&(t={}),super(),this.name="SwupBodyClassPlugin",this.requires={swup:">=4"},this.defaults={prefix:""},this.options=void 0,this.updateBodyClass=(t,e)=>{let{page:{html:s}}=e;this.updateClassNames(document.body,this.getBodyElement(s))},this.options={...this.defaults,...t}}mount(){this.on("content:replace",this.updateBodyClass)}getBodyElement(t){return(new DOMParser).parseFromString(t,"text/html").querySelector("body")}updateClassNames(t,e){const s=[...t.classList].filter((t=>this.isValidClassName(t))),r=[...e.classList].filter((t=>this.isValidClassName(t)));t.classList.remove(...s),t.classList.add(...r)}isValidClassName(t){return t&&t.startsWith(this.options.prefix)}}}));
"use strict";jQuery(function(r){r("#advanced_shipping_shipping_methods").on("click",".toggle-row",function(){r(this).closest("tr").toggleClass("is-expanded")}),r(".wpc-conditions-post-table tbody").sortable({items:"tr",handle:".sort",cursor:"move",axis:"y",scrollSensitivity:40,forcePlaceholderSize:!0,helper:"clone",opacity:.65,placeholder:"wc-metabox-sortable-placeholder",start:function(o,t){t.item.css("background-color","#f6f6f6")},stop:function(o,t){t.item.removeAttr("style")},update:function(o,t){var e=r(this).closest("table");e.block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var n={action:wpc2.action_prefix+"save_post_order",form:r(this).closest("form").serialize(),nonce:wpc.nonce};r.post(ajaxurl,n,function(o){r(".wpc-conditions-post-table tbody tr:even").addClass("alternate"),r(".wpc-conditions-post-table tbody tr:odd").removeClass("alternate"),e.unblock()})}}),r(".wpc-condition-groups").on("change validate-conditions",".wpc-condition-group",function(){r(this).find(".condition-error, .condition-warning").unbind("hover").removeClass("condition-error condition-warning"),r(this).each(function(o){var n=r(this).find(".wpc-condition-wrap"),i=r.map(n,function(o){return{key:r(o).find(".wpc-condition option:selected").val(),operator:r(o).find(".wpc-operator option:selected").val()}});if(r.each(["city","state","country","role"],function(o,t){if(2<=i.filter(function(o){return o.key==t&&"=="==o.operator}).length){var e=n.find(".wpc-condition option[value="+t+"]:selected").not(":first").parents(".wpc-condition");e.addClass("condition-error"),e.attr("data-tip","Having two of these conditions with the 'Equal to' operator in one condition group will give a conflict.")}}),2<=i.filter(function(o){return"category"==o.key&&"=="==o.operator}).length){var t=n.find(".wpc-condition option[value=category]:selected").not(":first").parents(".wpc-condition");t.addClass("condition-warning"),t.attr("data-tip","The 'category' condition requires ALL products to have the given category. Having two or more required categories is a unusual scenario.")}r(".condition-warning, .condition-error").tipTip({attribute:"data-tip",fadeIn:50,fadeOut:50,delay:200})})}),r(".wpc-condition-group").trigger("validate-conditions"),r(document.body).on("change keyup",".was_input_decimal[type=text]",function(){var o=new RegExp("[^-0-9%\\.,]+","gi"),t="i18n_decimal_error",e=r(this).val(),n=e.replace(o,"");e!==n?(r(this).val(n),r(document.body).triggerHandler("wc_add_error_tip",[r(this),t])):r(document.body).triggerHandler("wc_remove_error_tip",[r(this),t])}),r(".migrate").on("click",function(o){if(0!=r("#migrate_zone").val().length){var t={action:"was_migrate_to_zone",zone:r("#migrate_zone").val(),rate_id:was.rate_id,nonce:was.nonce};r("#was_migrate").block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),r.post(ajaxurl,t,function(o){o.error&&console.error(o),o.redirect&&(location.href=o.redirect)})}})});
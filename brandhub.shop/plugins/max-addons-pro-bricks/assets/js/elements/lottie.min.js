MabLottie=function(t){this.id=t.id,this.element=t.element,this.player=this.element.querySelector("#lottie-player-"+this.id),this.jsonSrc=this.player.src,this.lottie=this.player.getLottie(),this.firstFrame=this.lottie.firstFrame,this.totalFrames=this.lottie.totalFrames,this.newCycle=!0,this.playDirection="forward",this.observer=null,void 0!==t.settings&&(this.settings=t.settings,this.element.classList.contains("mab-backend")&&this.init(),this.lottie.addEventListener("DOMLoaded",this.init.bind(this)),this.lottie.addEventListener("complete",this.complete.bind(this)))},MabLottie.prototype={id:"",element:"",settings:{},init:function(){var e,t,i,s,r,o,n,a;if(this.firstFrame=this.lottie.firstFrame,this.totalFrames=this.lottie.totalFrames,a=this.getOffset(),e=this.getFrameRange(),t=this.settings.selector&&""!==this.settings.selector?this.settings.selector:"#lottie-player-"+this.id,s=i=null,n=this.settings.trigger,r="yes"===this.settings.reverse,this.removeObserver(),"scroll"===n&&LottieInteractivity.create({player:"#lottie-player-"+this.id,container:"#lottie-player-"+this.id,mode:"scroll",actions:[{visibility:[0,a.bottom],type:"stop",frames:[e.start]},{visibility:[a.bottom,a.top],type:"seek",frames:[e.start,e.end]},{visibility:[a.top,1],type:"stop",frames:[e.end]}]}),"hover"===n){if(0===(i=mabFrontend.domHelpers.querySelectorAll(t)).length)return;(s=this.player.getLottie()).goToAndStop(e.start,!0),i.forEach(function(t){t.addEventListener("mouseenter",function(){s.setDirection(1),r?s.playSegments([e.end,e.start],!0):s.playSegments([e.start,e.end],!0)}),t.addEventListener("mouseleave",function(){s.setDirection(-1),s.play()})})}if("click"===n){if(0===(i=mabFrontend.domHelpers.querySelectorAll(t)).length)return;this.player.seek(e.start),o=this.settings.onAnotherClick&&"replay"===this.settings.onAnotherClick,s=this.player.getLottie(),i.forEach(function(t){t.addEventListener("click",function(){o&&s.stop(),r?s.playSegments([e.end,e.start],!0):s.playSegments([e.start,e.end],!0)})})}"cursor"===n&&LottieInteractivity.create({player:"#lottie-player-"+this.id,container:t,mode:"cursor",actions:[{position:{x:[0,1],y:[0,1]},type:"seek",frames:[e.start,e.end]}]}),"viewport"===n&&((s=this.player.getLottie()).setDirection(1),n=100-100*(1+a.top),a=100*a.bottom,this.player.seek(e.start),"undefined"==typeof IntersectionObserver?window.addEventListener("scroll",function(){this.lottie=this.player.getLottie(),mabFrontend.domHelpers.isInViewport(this.player)?this.playLottie():s.pause()}.bind(this)):(this.observer=mabFrontend.domHelpers.scrollObserver({offset:-a+"% 0% "+n+"%",callback:function(t){t.isInViewport?this.playLottie():s.pause()}.bind(this)}),this.observer.observe(this.player)))},complete:function(){this.newCycle=!0,"viewport"===this.settings.trigger&&("yes"===this.settings.loop&&"yes"!==this.settings.reverse&&this.playLottie(),"yes"===this.settings.loop&&"yes"===this.settings.reverse&&(this.playDirection="forward"===this.playDirection?"backward":"forward",this.playLottie()),"yes"!==this.settings.loop&&"yes"===this.settings.reverse&&(this.playDirection="backward"))},getOffset:function(){var t=this.settings.viewport;return{top:1-(void 0===(t=void 0===t?{top:1,bottom:0}:t).top?1:parseInt(t.top))/100,bottom:(void 0===t.bottom?0:parseInt(t.bottom))/100}},getFrames:function(){var t=this.getFrameRange(),e=0===this.lottie.firstFrame?this.lottie.currentFrame:this.lottie.firstFrame+this.lottie.currentFrame,i=this.firstFrame,s=0===this.firstFrame?this.totalFrames:this.firstFrame+this.totalFrames;return t.start&&t.start>i&&(i=t.start),t.end&&t.end<s&&(s=t.end),this.newCycle||"scroll"===this.settings.trigger||(i=t.start&&t.start>e?t.start:e),"backward"===this.playDirection&&"yes"===this.settings.reverse&&(i=e,s=t.start&&t.start>this.firstFrame?t.start:this.firstFrame),{first:i,last:s,current:e,total:this.totalFrames}},getFrameRange:function(){return{start:parseInt(this.settings.start)||0,end:parseInt(this.settings.end)||0}},playLottie:function(){var t=this.getFrames();this.lottie.stop(),this.lottie.playSegments([t.first,t.last],!0),this.newCycle=!1},removeObserver:function(){this.observer&&this.observer.unobserve(this.player)},start:function(){var e,i,s,t=this.settings.trigger;"click"===t&&(e="yes"===this.settings.reverse?-1:1,i="play",this.animation.addEventListener("click",t=>{this.lottie.setDirection(e),this.lottie.stop(),i="play"===i?(this.lottie.play(),"pause"):(this.lottie.pause(),"play"),e="yes"===this.settings.reverse?1:-1})),"hover"===t&&(e="yes"===this.settings.reverse?-1:1,this.animation.addEventListener("mouseenter",t=>{this.lottie.setDirection(e),this.lottie.play(),e="yes"===this.settings.reverse?1:-1}),this.animation.addEventListener("mouseleave",t=>{this.lottie.setDirection(e),this.lottie.play()})),(s=void 0===(s=this.settings.viewport)?{top:100,bottom:0}:s).top=void 0===s.top?100:parseInt(s.top),s.bottom=void 0===s.bottom?0:parseInt(s.bottom),"viewport"===t&&(this.lottie.setDirection(1),this.observer=this.scrollObserver({offset:s.bottom+"% 0% "+s.top+"%",callback:function(t){t.isInViewport?(this.isInViewport=!0,this.lottie.play()):(this.isInViewport=!1,this.lottie.pause())}.bind(this)}),this.observer.observe(this.animation)),"scroll"===t&&(this.lottie.setDirection(1),this.observer=this.scrollObserver({offset:s.bottom+"% 0% "+s.top+"%",callback:function(t){t.isInViewport?(this.isInViewport=!0,t=this.getElementViewportPercentage(this.animation,s),t=Math.min(100,Math.max(0,t)),console.log(t),this.lottie.goToAndStop(t)):this.isInViewport=!1}.bind(this)}),this.observer.observe(this.player))}};var mabLottie=mabFrontend.initElement({name:"lottie",function:MabLottie});mabLottie();
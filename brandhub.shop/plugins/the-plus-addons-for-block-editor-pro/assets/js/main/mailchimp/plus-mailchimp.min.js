document.addEventListener("DOMContentLoaded",()=>{tpmailchmp(document)});function tpmailchmp(a){let b=a.querySelectorAll(".tpgb-mailchimp-form");0<b.length&&b.forEach(a=>{var b=a;b.addEventListener("submit",a=>{a.preventDefault();var c=b,d=`.tpgb-mail-${c.getAttribute("data-id")}`,e=JSON.parse(c.getAttribute("data-mail-option"));let f=document.querySelector(`${d} .tpgb-notification`);f.classList.remove("not-verify","danger-msg","success-msg"),f.style.cssText="display:block; opacity:1";let g=f.querySelector(".subscribe-response");g.innerHTML=e.loading;const h=new XMLHttpRequest;h.onload=function(){if(200<=h.status&&400>h.status&&h.response){let b=h.response;if("please-check"==b){f.classList.add("not-verify");let a="<span class=\"loading-spinner\"><i class=\"fa fa-times-circle-o\" aria-hidden=\"true\"></i></span>Error : "+e.gdprerrorMsg+" ";g.innerHTML=a}if("not-verify"==b&&(f.classList.add("not-verify"),g.innerHTML="<span class=\"loading-spinner\"><i class=\"fa fa-times-circle-o\" aria-hidden=\"true\"></i></span>Error : API Key or List ID invalid. Please check that again in Plugin Settings."),"incorrect"==b&&(f.classList.add("danger-msg"),g.innerHTML=e.incorrect),"pending"==b){f.classList.add("success-msg"),g.innerHTML=e.pending;let b=document.querySelector(d);if(null!=b.getAttribute("data-thank-you")&&""!=b.getAttribute("data-thank-you")){var a=b.getAttribute("data-thank-you");setTimeout(function(){window.location.href=a},700)}}if("correct"==b){f.classList.add("success-msg"),g.innerHTML=e.success;let b=document.querySelector(d);if(null!=b.getAttribute("data-thank-you")&&""!=b.getAttribute("data-thank-you")){var a=b.getAttribute("data-thank-you");setTimeout(function(){window.location.href=a},700)}}setTimeout(function(){f.style.cssText="display:none; opacity:0"},2500)}};let i=new FormData(c),j=new URLSearchParams(i).toString();h.open("POST",tpgb_config&&tpgb_config.ajax_url?tpgb_config.ajax_url:tpgb_load.ajaxUrl),h.setRequestHeader("Content-Type","application/x-www-form-urlencoded;"),h.send(j)})})}
document.addEventListener("DOMContentLoaded",function(){tpaudioPly(document)});function tpaudioPly(a){let b=a.querySelectorAll(".tpgb-audio-player");b&&b.forEach(a=>{function b(a,b,c){let d=a?a.getAttribute("audiourl"):"",i=a?a.textContent:"",k=a?a.getAttribute("artist"):"",l=a?a.getAttribute("data-thumb"):"";if("style-3"==c){let a=b.querySelector(".trackimage img");a&&(a.src=l)}if("style-4"==c){let a=b.querySelector(".tpgb-player");a&&(a.style.cssText="background: url("+l+"); transition: background 0.5s linear")}if("style-5"==c){let a=b.querySelector(".ap-st5-img");a&&(a.style.cssText="background: url("+l+"); transition: background 0.5s linear")}if("style-6"==c){let a=b.querySelector(".ap-st5-content");a&&(a.style.cssText="background: url("+l+"); transition: background 0.5s linear")}if("style-8"==c){let a=b.querySelector(".tpgb-player-bg-img");a&&(a.style.cssText="background: url("+l+"); background-size: cover; background-position: center center; transition: background 0.5s linear");let c=b.querySelector(".trackimage img");c&&(c.src=l)}if("style-9"==c){let a=b.querySelector(".tpgb-player-bg-img");a&&(a.style.cssText="background: url("+l+"); background-size: cover; background-position: center center;")}let n=b.querySelector(".title");n&&(n.textContent=i);let o=b.querySelector(".artist");o&&(o.textContent=k);var q=b.querySelector(".durationtime");g=new Audio(d),g.addEventListener("timeupdate",function(){var a=parseInt(g.currentTime,10);j&&(j.noUiSlider.set(a),p&&(p.style.width=100*g.currentTime/g.duration+"%")),h=a,m&&e(h)}),g.addEventListener("loadeddata",function(){q&&(q.innerHTML=formatTime(g.duration))},!0);let r=b.querySelector(".tpgb-playlist.active");r&&r.classList.remove("active"),a&&a.classList.add("active"),f(b,c)}function c(a){g.play();let b=Math.round(g.duration);j.noUiSlider.updateOptions({range:{min:0,max:b}});let c=a.querySelector(".play"),d=a.querySelector(".pause");c&&c.classList.add("hidden"),d&&d.classList.add("visible")}function d(a){g.pause();let b=a.querySelector(".play.hidden"),c=a.querySelector(".pause.visible");b&&b.classList.remove("hidden"),c&&c.classList.remove("visible")}function e(b){m.innerHTML=formatTime(b)}function f(a,d){g.addEventListener("ended",function(){let e=a.querySelector(".tpgb-playlist.active").nextElementSibling;e&&(e=a.querySelector(".tpgb-playlist:first-child")),b(e,a,d),g.addEventListener("loadedmetadata",function(){c(a)})},!1)}var g,h,i=a.getAttribute("data-id"),j=a.querySelector(".tracker"),k=a.querySelector(".volume"),l=a.querySelector(".durationtime"),m=a.querySelector(".currenttime"),n=a.getAttribute("data-style"),o=a.getAttribute("data-apvolume"),p=a.querySelector(".tracker-fill");let q=a.querySelector(".play"),r=a.querySelector(".pause"),s=a.querySelector(".fwd"),t=a.querySelector(".rew");q.addEventListener("click",a=>{if(a.preventDefault(),g.duration&&g.duration!=NaN){let b=Math.round(g.duration);j&&j.noUiSlider.updateOptions({range:{min:0,max:b}}),g.play(),a.currentTarget.classList.add("hidden"),r.classList.add("visible")}}),r.addEventListener("click",b=>{b.preventDefault(),d(a)}),s&&s.addEventListener("click",f=>{f.preventDefault(),d(a);let e=a.querySelector(".tpgb-playlist.active").nextElementSibling;e||(e=a.querySelector(".tpgb-playlist:first-child")),b(e,a,n),g.addEventListener("loadedmetadata",function(){c(a)})}),t&&t.addEventListener("click",f=>{f.preventDefault(),d(a);let e=a.querySelector(".tpgb-playlist.active").previousElementSibling;e||(e=a.querySelector(".tpgb-playlist:last-child")),b(e,a,n),g.addEventListener("loadedmetadata",function(){c(a)})});let u=a.querySelector(".playlistIcon"),v=a.querySelector(".playlist");u&&u.addEventListener("click",a=>{a.preventDefault(),v.classList.contains("show")?v.classList.remove("show"):v.classList.add("show")});let w=a.querySelector(".volumeIcon"),x=a.querySelector(".tpgb-volume-bg");w&&w.addEventListener("click",a=>{a.target.classList.contains("tpgb-volume-bg")||a.target.closest(".tpgb-volume-bg")||(a.preventDefault(),x.classList.contains("show")?x.classList.remove("show"):x.classList.add("show"))});let y=a.querySelectorAll(".tpgb-playlist");y&&y.forEach(e=>{e.addEventListener("click",f=>{d(a),b(f.currentTarget,a,n),g.addEventListener("loadedmetadata",function(){c(a)})})});let z=a.querySelector(".tpgb-playlist:first-child");b(z,a,n),k&&(noUiSlider.create(k,{direction:"rtl",orientation:"vertical",start:o,connect:!0,range:{min:0,max:100}}),k.noUiSlider.on("slide",function(a){g.volume=a[0]/100})),j&&(noUiSlider.create(j,{start:0,connect:!0,range:{min:0,max:100}}),j.noUiSlider.on("slide",function(a){g.currentTime=a[0]}))})}function formatTime(a){var b,c=0,d=0;return a=parseInt(a,10),3600<a&&(c=parseInt(a/3600,10),a-=60*(60*c)),60<a&&(d=parseInt(a/60,10),a-=60*d),b=a,a=0<c?c+":":"",a+=0<d?(10>d&&0<c?"0":"")+d+":":"0:",a+=(10>b?"0":"")+b,a}
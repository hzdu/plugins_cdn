document.addEventListener("DOMContentLoaded",function(){tpbeAfimg(document)});function tpbeAfimg(a){var b=a.querySelectorAll(".tpgb-before-after"),c=0,d="",e="",f="",g="",h="";b.forEach(function(a){if(a.style.visibility="hidden",c++,a.setAttribute("data-before-after-id",c),d=a.dataset.type,e=a.dataset.separate_width,f=a.dataset.bottomSeparatorSize,g=a.dataset.show,!!g){if("cursor"==d){h=a.dataset.separate_position;var b=a.querySelector(".tpgb-beforeafter-img"),i=a.querySelector(".tpgb-before-sepicon");b.style.position="absolute",i&&(i.style.left=h+"%",i.style.display="none"),b.style.position="absolute",a.querySelector(".tpgb-beforeafter-inner").addEventListener("mouseout",function(a){show_separator_image(),position_changing(a.pageX,a.pageY)})}else{h=a.dataset.separate_position;var i=a.querySelector(".tpgb-before-sepicon");"horizontal"==d?i&&(i.style.left=h+"%"):"vertical"==d&&i&&(i.style.top=h+"%");var b=a.querySelector(".tpgb-beforeafter-img");b.style.position="absolute",i&&(i.style.display="block"),a.querySelector(".tpgb-beforeafter-inner").addEventListener("mouseout",function(a){show_separator_image(),position_changing(a.pageX,a.pageY)})}"no"==a.dataset.separate_switch&&(a.querySelector(".tpgb-bottom-sep")&&(a.querySelector(".tpgb-bottom-sep").style.display="none"),a.querySelector(".tpgb-beforeafter-sep")&&(a.querySelector(".tpgb-beforeafter-sep").style.display="none"),a.querySelector(".tpgb-before-sepicon")&&(a.querySelector(".tpgb-before-sepicon").style.display="none")),"show"!=d&&(a.addEventListener("touchstart",function(a){a.preventDefault(),setba_Container(this),TouchDevice=!0,changing_this=!0},{passive:!1}),a.addEventListener("touchend",function(){changing_this=!1,show_separator_image()}),a.addEventListener("touchcancel",function(){changing_this=!1,show_separator_image()})),"yes"==a.dataset.click_hover_move?a.querySelectorAll(".tpgb-beforeafter-inner, .tpgb-bottom-sep").forEach(function(a){a.addEventListener("mouseover",function(){setba_Container(this),Playing_this||(changing_this=!0)}),a.addEventListener("mouseout",function(a){position_changing(a.pageX,a.pageY),changing_this=!1})}):(a.querySelectorAll(".tpgb-beforeafter-inner, .tpgb-bottom-sep").forEach(function(a){a.addEventListener("mousedown",function(a){if(!TouchDevice){ba_sep_obj&&ba_sep_show&&(ba_sep_obj.style.display="block"),setba_Container(this);var b=this.closest(".tpgb-before-after"),c=b.dataset.id;onMouseMove(a.pageX,a.pageY,c)}}),a.addEventListener("mouseenter",function(a){if(ba_sep_obj&&ba_sep_show&&(ba_sep_obj.style.display="block"),setba_Container(this),!a.which)return void(changing_this=!1)}),a.addEventListener("mouseup",function(){changing_this=!1})}),a.querySelectorAll(".tpgb-beforeafter-sep, .tpgb-before-sepicon").forEach(function(a){a.addEventListener("mousedown",function(){TouchDevice||(setba_Container(this),changing_this=!0)}),a.addEventListener("mouseover",function(){setba_Container(this)}),a.addEventListener("mouseup",function(){changing_this=!1})}),a.querySelectorAll(".tpgb-beforeafter-inner, .tpgb-bottom-sep").forEach(function(a){a.addEventListener("mouseup",function(){changing_this=!1})})),a.querySelectorAll(".tpgb-beforeafter-inner").forEach(function(a){a.addEventListener("mousedown",function(){TouchDevice||(setba_Container(this),stop_animation())})})}}),size_Elements(),window.addEventListener("resize",function(){size_Elements()})}var ba_Container,ba_obj,ba_sep_obj,ba_sep_Image,before_obj,after_obj,beforeImage,afterImage,ba_type,ba_sep_show,ba_show_mode,sep_Size,ba_ContainerId=0,changing_this=!1,Playing_this=!1,indSize=10,fpsPlay=60,TouchDevice=!1;function setba_Container(a){container=a.closest(".tpgb-before-after"),containerId=container.dataset.id,hide_separator_image(container);ba_Container&&ba_ContainerId==containerId||(Playing_this&&(stop_animation(),ba_sep_show&&(ba_sep_obj.style.display="block")),ba_Container=container,ba_ContainerId=containerId,ba_sep_obj=ba_Container.querySelector(".tpgb-beforeafter-sep"),ba_obj=ba_Container.querySelector(".tpgb-beforeafter-inner"),before_obj=ba_Container.querySelector(".tpgb-before-img"),after_obj=ba_Container.querySelector(".tpgb-after-img"),beforeImage=ba_Container.querySelector(".tpgb-before-img > img"),afterImage=ba_Container.querySelector(".tpgb-after-img > img"),ba_type=ba_Container.dataset.type,ba_sep_show=!0,"no"==ba_Container.dataset.separate_switch&&(ba_sep_show=!1,ba_sep_obj&&(!0==ba_sep_show?ba_sep_obj.style.display="block":ba_sep_obj.style.display="none")))}function play_animation(a,b,c,d,e,f){Playing_this&&(a+=b,"vertical"==ba_type?onMouseMove(c,d+a):onMouseMove(c+a,d),a<=e+1?setTimeout(play_animation,f,a,b,c,d,e,f):stop_animation())}function stop_animation(){Playing_this&&(Playing_this=!1,changing_this=!0,ba_sep_obj&&(ba_sep_obj.style.display="none"))}function onMouseMove(a,b,c){if(changing_this&&ba_sep_show&&ba_sep_obj&&(ba_sep_obj.style.display="block"),!position_changing(a,b)){var d=document.querySelector("."+c);if(sep_Size=d.dataset.separate_width,"horizontal"==ba_type){var e=ba_Container.getBoundingClientRect(),f=a-e.left;f>=ba_obj.offsetWidth&&(f=ba_obj.offsetWidth),ba_sep_obj&&(ba_sep_obj.style.left=f-sep_Size/2+"px"),0!=ba_show_mode&&ba_sep_Image&&(ba_sep_Image.style.left=f+"px"),before_obj.style.width=f+"px";var g=before_obj.querySelector(".tpgb-beforeafter-label.before-label");g&&(g.offsetWidth+50<f?g.style.opacity="1":g.style.opacity="0")}else if("vertical"==ba_type){var e=ba_Container.getBoundingClientRect(),h=e.top+window.pageYOffset,f=b-h;f>=ba_obj.offsetHeight?f=ba_obj.offsetHeight:0>=f&&(f=0),ba_sep_obj&&(ba_sep_obj.style.top=f-sep_Size/2+"px"),0!=ba_show_mode&&(ba_sep_Image.style.top=f+"px"),before_obj.style.height=f+"px";var g=before_obj.querySelector(".tpgb-beforeafter-label.before-label"),i=ba_obj.offsetHeight/f;g&&(2>i?g.style.opacity="1":g.style.opacity="0")}else if("cursor"==ba_type){var f=a-ba_Container.getBoundingClientRect().left;f>=ba_obj.offsetWidth&&(f=ba_obj.offsetWidth),ba_sep_obj&&(ba_sep_obj.style.left=f-indSize/2+"px");var i=f/ba_obj.offsetWidth;beforeImage.style.opacity=1-i;var g=before_obj.querySelector(".tpgb-beforeafter-label.before-label");g&&(.3<1-i?g.style.opacity="1":g.style.opacity="0")}}}function size_Elements(){var a=document.querySelectorAll(".tpgb-beforeafter-img > img");a.forEach(function(a){var b=a.closest(".tpgb-before-after"),c=b.dataset.type;if("show"!=c){a.style.minWidth="none",a.style.maxWidth="none";if("yes"==b.dataset.responsive){for(var d=b.parentElement,e=d.offsetWidth;!d||0==e;)d=d.parentElement,e=d.offsetWidth;a.style.maxWidth&&("none"!=a.style.maxWidth||"yes"!=b.dataset.full_width)?(!a.style.maxWidth||"none"==a.style.maxWidth)&&(a.style.maxWidth=(a.naturalWidth?a.naturalWidth:100)+"px"):a.style.maxWidth=e+"px",a.style.width="yes"==b.dataset.full_width?e+"px":(a.naturalWidth?a.naturalWidth:100)+"px"}if(b.dataset.width&&0!=b.dataset.width&&(a.style.width=b.dataset.width),b.dataset.max_width&&0!=b.dataset.max_width&&(a.style.maxWidth=b.dataset.max_width),initRatio=b.dataset.separate_position/100,(a.classList.contains("tpgb-beforeimg-wrap")&&"vertical"!=c||a.classList.contains("tpgb-afterimg-wrap"))&&(a.style.height="100%"),a.classList.contains("tpgb-beforeimg-wrap")){b.style.visibility="visible";var f=0==a.offsetWidth?a.naturalWidth:a.offsetWidth,g=0==a.offsetHeight?a.naturalHeight:a.offsetHeight;b.querySelector(".tpgb-beforeafter-img").style.width="auto",b.querySelector(".tpgb-beforeafter-img").style.height="100%",b.querySelector(".tpgb-beforeafter-inner").style.width=f+"px",b.querySelector(".tpgb-beforeafter-inner").style.height=g+"px",b.style.width=f+"px","horizontal"==c?b.querySelector(".tpgb-before-img").style.width=a.offsetWidth*initRatio+"px":"vertical"==c&&(b.querySelector(".tpgb-before-img").style.height=a.offsetHeight*initRatio+"px");var i=b.querySelector(".tpgb-beforeafter-sep");if("horizontal"==c){if("middle"==b.dataset.separator_style){sep_Size=b.dataset.separate_width,i.style.width=sep_Size+"px",i.style.height=a.offsetHeight+"px";var j=b.querySelector(".tpgb-before-img").offsetWidth-sep_Size/2;i.style.left=j+"px",i.style.cursor="ew-resize"}else{sep_Size=b.dataset.separate_width,i.style.height=sep_Size+"px",i.style.width="15px",i.style.left=a.offsetWidth*initRatio+"px";var k=b.querySelector(".tpgb-before-img").offsetHeight;i.style.top=k+"px",i.style.cursor="ew-resize",b.querySelector(".tpgb-bottom-sep")&&(b.querySelector(".tpgb-bottom-sep").style.height=sep_Size+"px",b.querySelector(".tpgb-bottom-sep").style.display="block")}}else if("vertical"==c){if("middle"==b.dataset.separator_style){sep_Size=b.dataset.separate_width,i.style.height=sep_Size+"px",i.style.width=a.offsetWidth+"px";var j=b.querySelector(".tpgb-before-img").offsetHeight-sep_Size/2;i.style.top=j+"px",i.style.cursor="ns-resize"}}else if("cursor"==c&&"yes"==b.dataset.separate_switch){sep_Size=b.dataset.separate_width;var k=b.querySelector(".tpgb-before-img").offsetHeight;b.querySelector(".tpgb-bottom-sep")&&(b.querySelector(".tpgb-bottom-sep").style.display="block")}}}})}function hide_separator_image(a){ba_sep_Image=a.querySelector(".tpgb-before-sepicon"),ba_show_mode=0,a.dataset.separate_image&&(ba_show_mode=a.dataset.separate_image)}function show_separator_image(){1==ba_show_mode&&ba_sep_Image&&(ba_sep_Image.style.display="block")}function full_After(){w=ba_obj.offsetWidth-indSize,ba_sep_obj&&(ba_sep_obj.style.left=w+"px"),beforeImage.style.opacity="0"}function zero_After(){ba_sep_obj&&(ba_sep_obj.style.left="0px"),beforeImage.style.opacity="1"}function position_changing(a,b){if(!(changing_this||Playing_this))return!1;if(Playing_this)return!1;if(aligned=!1,"horizontal"==ba_type){var c=document.querySelector("."+containerId).getBoundingClientRect(),d=c.left;a>=ba_obj.offsetWidth+d?(sep_Right(),aligned=!0):a<=d&&(sep_Left(),aligned=!0)}else if("vertical"==ba_type){var e=document.querySelector("."+containerId).getBoundingClientRect(),d=e.top+window.pageYOffset;b>=ba_obj.offsetHeight+d?(sep_Bottom(),aligned=!0):b<=d&&(sep_Top(),aligned=!0)}else"cursor"==ba_type&&(a+indSize/2>=ba_obj.offsetWidth+ba_Container.getBoundingClientRect().left?(full_After(),aligned=!0):a-indSize/2<=ba_Container.getBoundingClientRect().left&&(zero_After(),aligned=!0));return aligned&&"cursor"!=ba_type&&!Playing_this&&ba_sep_obj&&(ba_sep_obj.style.display="none"),aligned}function sep_Right(){var a=ba_obj.offsetWidth;ba_sep_obj&&(ba_sep_obj.style.left=a-sep_Size/2+"px"),0!=ba_show_mode&&ba_sep_Image&&(ba_sep_Image.style.left=a+"px"),before_obj.style.width=a+"px"}function sep_Left(){ba_sep_obj&&(ba_sep_obj.style.left="0px"),0!=ba_show_mode&&ba_sep_Image&&(ba_sep_Image.style.left="0px"),before_obj.style.width="0px"}function sep_Top(){ba_sep_obj&&(ba_sep_obj.style.top=-sep_Size/2+"px"),0!=ba_show_mode&&ba_sep_Image&&(ba_sep_Image.style.top="0px"),before_obj.style.height="0px"}function sep_Bottom(){var a=ba_obj.offsetHeight;ba_sep_obj&&(ba_sep_obj.style.top=a-sep_Size/2+"px"),0!=ba_show_mode&&ba_sep_Image&&(ba_sep_Image.style.top=a+"px"),before_obj.style.height=a+"px"}document.addEventListener("mousemove",function(a){var b=a.target.closest(".tpgb-before-after");if(b){var c=b.dataset.id;changing_this&&!Playing_this&&onMouseMove(a.pageX,a.pageY,c)}}),document.addEventListener("touchmove",function(a){a.preventDefault();var b=a.touches[0]||a.changedTouches[0],c=b.target.closest(".tpgb-before-after");if(c){var d=c.dataset.id;changing_this&&!Playing_this&&onMouseMove(b.pageX,b.pageY,d)}});
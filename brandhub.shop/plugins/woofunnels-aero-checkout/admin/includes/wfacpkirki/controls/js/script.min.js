if(_.isUndefined(window.wfacpkirkiSetSettingValue))var wfacpkirkiSetSettingValue={set:function(e,t){var i,a=this,n=wp.customize.settings.controls[e];if(_.isUndefined(n))return!0;switch(a.setValue(e,t),n.type){case"wfacpkirki-background":_.isUndefined(t["background-color"])||a.setColorPicker(a.findElement(e,".wfacpkirki-color-control"),t["background-color"]),a.findElement(e,".placeholder, .thumbnail").removeClass().addClass("placeholder").html("No file selected"),_.each(["background-repeat","background-position"],function(i){_.isUndefined(t[i])||a.setSelectWoo(a.findElement(e,"."+i+" select"),t[i])}),_.each(["background-size","background-attachment"],function(i){jQuery(a.findElement(e,"."+i+' input[value="'+t+'"]')).prop("checked",!0)}),i=JSON.stringify(t).replace(/'/g,"&#39"),jQuery(a.findElement(e,".background-hidden-value").attr("value",i)).trigger("change");break;case"wfacpkirki-code":jQuery(a.findElement(e,".CodeMirror"))[0].CodeMirror.setValue(t);break;case"checkbox":case"wfacpkirki-switch":case"wfacpkirki-toggle":t=1===t||"1"===t||!0===t,jQuery(a.findElement(e,"input")).prop("checked",t),wp.customize.instance(e).set(t);break;case"wfacpkirki-select":case"wfacpkirki-fontawesome":a.setSelectWoo(a.findElement(e,"select"),t);break;case"wfacpkirki-slider":jQuery(a.findElement(e,"input")).prop("value",t),jQuery(a.findElement(e,".wfacpkirki_range_value .value")).html(t);break;case"wfacpkirki-generic":(_.isUndefined(n.choices)||_.isUndefined(n.choices.element))&&(n.choices.element="input"),jQuery(a.findElement(e,n.choices.element)).prop("value",t);break;case"wfacpkirki-color":a.setColorPicker(a.findElement(e,".wfacpkirki-color-control"),t);break;case"wfacpkirki-multicheck":a.findElement(e,"input").each(function(){jQuery(this).prop("checked",!1)}),_.each(t,function(i,n){jQuery(a.findElement(e,'input[value="'+t[n]+'"]')).prop("checked",!0)});break;case"wfacpkirki-multicolor":_.each(t,function(t,i){a.setColorPicker(a.findElement(e,".multicolor-index-"+i),t)});break;case"wfacpkirki-radio-buttonset":case"wfacpkirki-radio-image":case"wfacpkirki-radio":case"wfacpkirki-dashicons":case"wfacpkirki-color-palette":case"wfacpkirki-palette":jQuery(a.findElement(e,'input[value="'+t+'"]')).prop("checked",!0);break;case"wfacpkirki-typography":_.each(["font-family","variant"],function(i){_.isUndefined(t[i])||a.setSelectWoo(a.findElement(e,"."+i+" select"),t[i])}),_.each(["font-size","line-height","letter-spacing","word-spacing"],function(i){_.isUndefined(t[i])||jQuery(a.findElement(e,"."+i+" input")).prop("value",t[i])}),_.isUndefined(t.color)||a.setColorPicker(a.findElement(e,".wfacpkirki-color-control"),t.color),i=JSON.stringify(t).replace(/'/g,"&#39"),jQuery(a.findElement(e,".typography-hidden-value").attr("value",i)).trigger("change");break;case"wfacpkirki-dimensions":_.each(t,function(t,i){jQuery(a.findElement(e,"."+i+" input")).prop("value",t)});break;case"wfacpkirki-repeater":case"wfacpkirki-custom":break;default:jQuery(a.findElement(e,"input")).prop("value",t)}},setColorPicker:function(e,t){e.attr("data-default-color",t).data("default-color",t).wpColorPicker("color",t)},setSelectWoo:function(e,t){jQuery(e).selectWoo().val(t).trigger("change")},setTextarea:function(e,t){jQuery(e).prop("value",t)},findElement:function(e,t){return wp.customize.control(e).container.find(t)},setValue:function(e,t,i){i=_.isUndefined(i)?100:parseInt(i,10),wp.customize.instance(e).set({}),setTimeout(function(){wp.customize.instance(e).set(t)},i)}};(wfacpkirki={initialized:!1,initialize:function(){this.initialized||(this.initialized=!0)}}).initialize();var wfacpkirki=wfacpkirki||{};wfacpkirki=(wfacpkirki=jQuery.extend(wfacpkirki,{control:{"wfacpkirki-radio":{init:function(e){this.template(e),wfacpkirki.input.radio.init(e)},template:function(e){var t=wp.template("wfacpkirki-input-radio");e.container.html(t({label:e.params.label,description:e.params.description,"data-id":e.id,inputAttrs:e.params.inputAttrs,default:e.params.default,value:wfacpkirki.setting.get(e.id),choices:e.params.choices}))}},"wfacpkirki-color":{init:function(e){this.template(e),wfacpkirki.input.color.init(e)},template:function(e){var t=wp.template("wfacpkirki-input-color");e.container.html(t({label:e.params.label,description:e.params.description,"data-id":e.id,mode:e.params.mode,inputAttrs:e.params.inputAttrs,"data-palette":e.params.palette,"data-default-color":e.params.default,"data-alpha":e.params.choices.alpha,value:wfacpkirki.setting.get(e.id)}))}},"wfacpkirki-generic":{init:function(e){this.template(e),_.isUndefined(e.params)||_.isUndefined(e.params.choices)||_.isUndefined(e.params.choices.element)||"textarea"!==e.params.choices.element?wfacpkirki.input.genericInput.init(e):wfacpkirki.input.textarea.init(e)},template:function(e){var t,i={label:e.params.label,description:e.params.description,"data-id":e.id,inputAttrs:e.params.inputAttrs,choices:e.params.choices,value:wfacpkirki.setting.get(e.id)};if(!_.isUndefined(e.params)&&!_.isUndefined(e.params.choices)&&!_.isUndefined(e.params.choices.element)&&"textarea"===e.params.choices.element)return t=wp.template("wfacpkirki-input-textarea"),void e.container.html(t(i));t=wp.template("wfacpkirki-input-generic"),e.container.html(t(i))}},"wfacpkirki-number":{init:function(e){this.template(e),wfacpkirki.input.number.init(e)},template:function(e){var t=wp.template("wfacpkirki-input-number");e.container.html(t(args={label:e.params.label,description:e.params.description,"data-id":e.id,inputAttrs:e.params.inputAttrs,choices:e.params.choices,value:wfacpkirki.setting.get(e.id)}))}},"wfacpkirki-select":{init:function(e){this.template(e),wfacpkirki.input.select.init(e)},template:function(e){var t=wp.template("wfacpkirki-input-select");e.container.html(t({label:e.params.label,description:e.params.description,"data-id":e.id,inputAttrs:e.params.inputAttrs,choices:e.params.choices,value:wfacpkirki.setting.get(e.id),multiple:e.params.multiple||1,placeholder:e.params.placeholder}))}}}}))||{},wfacpkirki=(wfacpkirki=jQuery.extend(wfacpkirki,{input:{radio:{init:function(e){jQuery('input[data-id="'+e.id+'"]').on("change keyup paste click",function(){wfacpkirki.setting.set(e.id,jQuery(this).val())})}},color:{init:function(e){var t,i=jQuery('.wfacpkirki-color-control[data-id="'+e.id+'"]');e.choices=e.choices||{},_.isEmpty(e.choices)&&e.params.choices&&(e.choices=e.params.choices),_.isEmpty(e.choices)||i.wpColorPicker(e.choices),setTimeout(function(){(t=jQuery('.wfacpkirki-input-container[data-id="'+e.id+'"] .wp-picker-clear')).length&&t.click(function(){wfacpkirki.setting.set(e.id,"")})},200),i.wpColorPicker({change:function(){setTimeout(function(){wfacpkirki.setting.set(e.id,i.val())},20)}})}},genericInput:{init:function(e){jQuery('input[data-id="'+e.id+'"]').on("change keyup paste click",function(){wfacpkirki.setting.set(e.id,jQuery(this).val())})}},textarea:{init:function(e){jQuery('textarea[data-id="'+e.id+'"]').on("change keyup paste click",function(){wfacpkirki.setting.set(e.id,jQuery(this).val())})}},select:{init:function(e){var t,i=jQuery('select[data-id="'+e.id+'"]'),a=parseInt(i.data("multiple"),10),n={escapeMarkup:function(e){return e}};e.params.placeholder&&(n.placeholder=e.params.placeholder,n.allowClear=!0),1<a&&(n.maximumSelectionLength=a),jQuery(i).selectWoo(n).on("change",function(){t=null===(t=jQuery(this).val())&&1<a?[]:t,wfacpkirki.setting.set(e.id,t)})}},number:{init:function(e){var t,i,a=jQuery('input[data-id="'+e.id+'"]'),n=e.setting._value;e.params.choices=_.defaults(e.params.choices,{min:0,max:100,step:1}),(isNaN(n)||""===n)&&(n=0>e.params.choices.min&&0<e.params.choices.max?0:e.params.choices.min),n=parseFloat(n),e.params.choices.step="any"===e.params.choices.step?.001:e.params.choices.step,e.params.choices.min=parseFloat(e.params.choices.min),e.params.choices.max=parseFloat(e.params.choices.max),e.params.choices.step=parseFloat(e.params.choices.step),t=jQuery('.wfacpkirki-input-container[data-id="'+e.id+'"] .plus'),i=jQuery('.wfacpkirki-input-container[data-id="'+e.id+'"] .minus'),t.click(function(){var t,i=parseFloat(a.val());t=i>=e.params.choices.max?i:i+e.params.choices.step,a.val(t),a.trigger("change")}),i.click(function(){var t,i=parseFloat(a.val());t=i<=e.params.choices.min?i:i-e.params.choices.step,a.val(t),a.trigger("change")}),a.on("change keyup paste click",function(){wfacpkirki.setting.set(e.id,jQuery(this).val())})}},image:{getTemplate:function(e){var t,i="";return e=_.defaults(e,{label:"",description:"",inputAttrs:"","data-id":"",choices:{},value:""}),_.isUndefined(e.choices)||_.isUndefined(e.choices.save_as)||e.choices.save_as,t=e.value,_.isObject(e.value)&&!_.isUndefined(e.value.url)&&(t=e.value.url),i+="<label>",e.label&&(i+='<span class="customize-control-title">'+e.label+"</span>"),e.description&&(i+='<span class="description customize-control-description">'+e.description+"</span>"),i+="</label>",i+='<div class="image-wrapper attachment-media-view image-upload">',e.value.url||""!==t?i+='<div class="thumbnail thumbnail-image"><img src="'+t+'" alt="" /></div>':i+='<div class="placeholder">'+wfacpkirkiL10n.noFileSelected+"</div>",i+='<div class="actions">',i+='<button class="button image-upload-remove-button'+(""===t?" hidden":"")+'">'+wfacpkirkiL10n.remove+"</button>",e.default&&""!==e.default&&(i+='<button type="button" class="button image-default-button"',(e.default===e.value||!_.isUndefined(e.value.url)&&e.default===e.value.url)&&(i+=' style="display:none;"'),i+=">"+wfacpkirkiL10n.default+"</button>"),i+='<button type="button" class="button image-upload-button">'+wfacpkirkiL10n.selectFile+"</button>",i+="</div></div>",'<div class="wfacpkirki-input-container" data-id="'+e.id+'">'+i+"</div>"},init:function(e){}}}}))||{},wfacpkirki=(wfacpkirki=jQuery.extend(wfacpkirki,{setting:{get:function(e){var t=e.split("["),i="",a=0,n="";return _.each(t,function(e,t){e=e.replace("]",""),0===t?i=e:i+="["+e+"]",_.isUndefined(wp.customize.instance(i))||(n=wp.customize.instance(i).get(),a=t),a<t&&_.isObject(n)&&!_.isUndefined(n[e])&&(n=n[e])}),n},set:function(e,t,i){var a,n,r,o,s,c="",l="",u={};a=e,_.isObject(e)&&(a=jQuery(e).attr("data-id")?e.attr("data-id"):e.parents("[data-id]").attr("data-id")),void 0===wp.customize.control(a)?(n=a.split("["),_.each(n,function(e,t){e=e.replace("]",""),c=0===t?e:"["+e+"]",_.isUndefined(wp.customize.instance(c))||(l=c,r=wp.customize.instance(l).get())}),""!==(o=a.replace(l,""))?(_.isObject(r)||(r={}),"["===o.charAt(0)&&(o=o.replace("[","")),s=o.split("["),_.each(s,function(e,t){s[t]=e.replace("]","")}),i&&s.push(i),u='{"'+s.join('":{"')+'":"'+t+'"'+"}".repeat(s.length),u=JSON.parse(u),jQuery.extend(!0,r,u),t=r):i&&((r=_.isObject(r)?r:{})[i]=t,t=r),wp.customize.control(l).setting.set(t)):wp.customize.control(a).setting.set(t)}}}))||{};wfacpkirki=jQuery.extend(wfacpkirki,{util:{webfonts:{google:{fonts:{},initialize:function(){this.setFonts()},setFonts:function(){var e=this;_.isEmpty(e.fonts)&&jQuery.post(ajaxurl,{action:"wfacpkirki_fonts_google_all_get"},function(t){e.fonts=JSON.parse(t)})},getFont:function(e){var t=this.getFonts();return void 0!==t[e]&&t[e]},getFonts:function(e,t,i){var a=this,n={},r={},o={};return e="alpha"!==(e=e||"alpha")&&"popularity"!==e&&"trending"!==e?"alpha":e,i=i||0,i=parseInt(i,10),"alpha"===e?n=jQuery.extend({},a.fonts.items):_.each(a.fonts.order[e],function(e){n[e]=a.fonts.items[e]}),""!==t&&t?_.each(n,function(e,i){t===e.category&&(r[i]=e)}):r=n,0<i?(_.each(_.first(_.keys(r),i),function(e){o[e]=r[e]}),o):r},getVariants:function(e){var t=this.getFont(e);return!!t&&(!_.isUndefined(t.variants)&&t.variants)}},standard:{fonts:{},initialize:function(){this.setFonts()},setFonts:function(){_.isEmpty(this.fonts)},getVariants:function(){return["regular","italic","700","700italic"]}},getFontType:function(e){return void 0!==this.standard.fonts[e]||void 0!==this.standard.fonts.stack&&void 0!==this.standard.fonts.stack[e]?"standard":void 0!==this.google.fonts.items[e]&&"google"}},validate:{cssValue:function(e){var t,i;return 0===e||"0"===e||"auto"===e||"inherit"===e||"initial"===e||(0<=e.indexOf("calc(")&&0<=e.indexOf(")")||(t=parseFloat(e),i=e.replace(t,""),e?!isNaN(t)&&-1<jQuery.inArray(i,["fr","rem","em","ex","%","px","cm","mm","in","pt","pc","ch","vh","vw","vmin","vmax"]):void 0))}}}}),function(){"use strict";wp.customize.wfacpkirkiDynamicControl=wp.customize.Control.extend({initialize:function(e,t){var i=t||{};i.params=i.params||{},i.params.type||(i.params.type="wfacpkirki-generic"),i.params.content||(i.params.content=jQuery("<li></li>"),i.params.content.attr("id","customize-control-"+e.replace(/]/g,"").replace(/\[/g,"-")),i.params.content.attr("class","customize-control customize-control-"+i.params.type)),this.propertyElements=[],wp.customize.Control.prototype.initialize.call(this,e,i)},_setUpSettingRootLinks:function(){var e=this;e.container.find("[data-customize-setting-link]").each(function(){var t=jQuery(this);wp.customize(t.data("customizeSettingLink"),function(i){var a=new wp.customize.Element(t);e.elements.push(a),a.sync(i),a.set(i())})})},_setUpSettingPropertyLinks:function(){var e=this;e.setting&&e.container.find("[data-customize-setting-property-link]").each(function(){var t,i=jQuery(this),a=i.data("customizeSettingPropertyLink");t=new wp.customize.Element(i),e.propertyElements.push(t),t.set(e.setting()[a]),t.bind(function(t){var i=e.setting();t!==i[a]&&((i=_.clone(i))[a]=t,e.setting.set(i))}),e.setting.bind(function(e){e[a]!==t.get()&&t.set(e[a])})})},ready:function(){var e=this;e._setUpSettingRootLinks(),e._setUpSettingPropertyLinks(),wp.customize.Control.prototype.ready.call(e),e.deferred.embedded.done(function(){e.initKirkiControl(e)})},embed:function(){var e=this,t=e.section();t&&wp.customize.section(t,function(t){"wfacpkirki-expanded"===t.params.type||t.expanded()||wp.customize.settings.autofocus.control===e.id?e.actuallyEmbed():t.expanded.bind(function(t){t&&e.actuallyEmbed()})})},actuallyEmbed:function(){"resolved"!==this.deferred.embedded.state()&&(this.renderContent(),this.deferred.embedded.resolve())},focus:function(e){this.actuallyEmbed(),wp.customize.Control.prototype.focus.call(this,e)},initKirkiControl:function(e){void 0===wfacpkirki.control[e.params.type]?this.container.on("change keyup paste click","input",function(){e.setting.set(jQuery(this).val())}):wfacpkirki.control[e.params.type].init(e)}})}(),_.each(wfacpkirki.control,function(e,t){wp.customize.controlConstructor[t]=wp.customize.wfacpkirkiDynamicControl.extend({})}),wp.customize.controlConstructor["wfacpkirki-background"]=wp.customize.Control.extend({ready:function(){"use strict";!_.isUndefined(window.wfacpkirkiControlLoader)&&_.isFunction(wfacpkirkiControlLoader)?wfacpkirkiControlLoader(this):this.initKirkiControl()},initKirkiControl:function(){var e=this,t=e.setting._value,i=e.container.find(".wfacpkirki-color-control");(_.isUndefined(t["background-image"])||""===t["background-image"])&&(e.container.find(".background-wrapper > .background-repeat").hide(),e.container.find(".background-wrapper > .background-position").hide(),e.container.find(".background-wrapper > .background-size").hide(),e.container.find(".background-wrapper > .background-attachment").hide()),i.wpColorPicker({change:function(){setTimeout(function(){e.saveValue("background-color",i.val())},100)}}),e.container.on("change",".background-repeat select",function(){e.saveValue("background-repeat",jQuery(this).val())}),e.container.on("change click",".background-size input",function(){e.saveValue("background-size",jQuery(this).val())}),e.container.on("change",".background-position select",function(){e.saveValue("background-position",jQuery(this).val())}),e.container.on("change click",".background-attachment input",function(){e.saveValue("background-attachment",jQuery(this).val())}),e.container.on("click",".background-image-upload-button",function(t){var i=wp.media({multiple:!1}).open().on("select",function(){var t,a,n,r=i.state().get("selection").first(),o=r.toJSON().sizes.full.url;_.isUndefined(r.toJSON().sizes.medium)?_.isUndefined(r.toJSON().sizes.thumbnail)||(o=r.toJSON().sizes.thumbnail.url):o=r.toJSON().sizes.medium.url,t=r.toJSON().sizes.full.url,r.toJSON().id,r.toJSON().width,r.toJSON().height,""!==t&&e.container.find(".background-wrapper > .background-repeat, .background-wrapper > .background-position, .background-wrapper > .background-size, .background-wrapper > .background-attachment").show(),e.saveValue("background-image",t),a=e.container.find(".placeholder, .thumbnail"),n=e.container.find(".background-image-upload-remove-button"),a.length&&a.removeClass().addClass("thumbnail thumbnail-image").html('<img src="'+o+'" alt="" />'),n.length&&n.show()});t.preventDefault()}),e.container.on("click",".background-image-upload-remove-button",function(t){var i,a;t.preventDefault(),e.saveValue("background-image",""),i=e.container.find(".placeholder, .thumbnail"),a=e.container.find(".background-image-upload-remove-button"),e.container.find(".background-wrapper > .background-repeat").hide(),e.container.find(".background-wrapper > .background-position").hide(),e.container.find(".background-wrapper > .background-size").hide(),e.container.find(".background-wrapper > .background-attachment").hide(),i.length&&i.removeClass().addClass("placeholder").html("No file selected"),a.length&&a.hide()})},saveValue:function(e,t){var i=jQuery("#customize-control-"+this.id.replace("[","-").replace("]","")+" .background-hidden-value"),a=this.setting._value;a[e]=t,jQuery(i).attr("value",JSON.stringify(a)).trigger("change"),this.setting.set(a)}}),wp.customize.controlConstructor["wfacpkirki-color-palette"]=wp.customize.wfacpkirkiDynamicControl.extend({}),wp.customize.controlConstructor["wfacpkirki-dashicons"]=wp.customize.wfacpkirkiDynamicControl.extend({}),wp.customize.controlConstructor["wfacpkirki-date"]=wp.customize.wfacpkirkiDynamicControl.extend({initKirkiControl:function(){var e=this,t=e.selector+" input.datepicker";jQuery(t).datepicker({dateFormat:"yy-mm-dd"}),e.container.find(".wfacpkirki-controls-loading-spinner").hide(),this.container.on("change keyup paste","input.datepicker",function(){e.setting.set(jQuery(this).val())})}}),wp.customize.controlConstructor["wfacpkirki-dimension"]=wp.customize.wfacpkirkiDynamicControl.extend({initKirkiControl:function(){var e,t=this;t.wfacpkirkiNotifications(),this.container.on("change keyup paste","input",function(){e=jQuery(this).val(),t.setting.set(e)})},wfacpkirkiNotifications:function(){wp.customize(this.id,function(e){e.bind(function(t){var i="long_title";!1===wfacpkirki.util.validate.cssValue(t)?e.notifications.add(i,new wp.customize.Notification(i,{type:"warning",message:dimensionwfacpkirkiL10n["invalid-value"]})):e.notifications.remove(i)})})}}),wp.customize.controlConstructor["wfacpkirki-dimensions"]=wp.customize.wfacpkirkiDynamicControl.extend({initKirkiControl:function(){var e,t=this.params.choices.controls,i={},a=[];for(_.each(t,function(e,t){!0===e&&a.push(t)}),e=0;e<a.length;e++)i[a[e]]=this.setting._value[a[e]],this.updateDimensionsValue(a[e],i)},updateDimensionsValue:function(e,t){var i=this;i.container.on("change keyup paste","."+e+" input",function(){t[e]=jQuery(this).val(),i.wfacpkirkiNotifications(),i.saveValue(t)})},saveValue:function(e){var t={};_.each(e,function(e,i){t[i]=e}),this.setting.set(t)},wfacpkirkiNotifications:function(){wp.customize(this.id,function(e){e.bind(function(t){var i,a="long_title",n={};if(e.notifications.remove(a),_.each(t,function(e,t){!1===wfacpkirki.util.validate.cssValue(e)?n[t]=e:delete n[t]}),!_.isEmpty(n))return i=dimensionswfacpkirkiL10n["invalid-value"]+" ("+_.values(n).toString()+") ",void e.notifications.add(a,new wp.customize.Notification(a,{type:"warning",message:i}));e.notifications.remove(a)})})}}),wp.customize.controlConstructor["wfacpkirki-editor"]=wp.customize.wfacpkirkiDynamicControl.extend({initKirkiControl:function(){var e,t=this,i=t.container.find("textarea"),a="wfacpkirki-editor-"+t.id.replace("[","").replace("]","");wp.editor.initialize(a,{tinymce:{wpautop:!0},quicktags:!0,mediaButtons:!0}),(e=tinyMCE.get(a))&&e.onChange.add(function(a){var n;a.save(),n=e.getContent(),i.val(n).trigger("change"),wp.customize.instance(t.id).set(n)})}}),wp.customize.controlConstructor["wfacpkirki-fontawesome"]=wp.customize.wfacpkirkiDynamicControl.extend({initKirkiControl:function(){var e,t,i=this,a=this.container.find("select"),n=jQuery.parseJSON(fontAwesomeJSON),r={data:[],escapeMarkup:function(e){return e},templateResult:function(e){return'<i class="fa fa-lg fa-'+e.id+'" aria-hidden="true"></i> '+e.text},templateSelection:function(e){return'<i class="fa fa-lg fa-'+e.id+'" aria-hidden="true"></i> '+e.text}};_.each(n.icons,function(e){r.data.push({id:e.id,text:e.name})}),(t=jQuery(a).selectWoo(r)).on("change",function(){e=jQuery(this).val(),i.setting.set(e)}),t.val(i.setting._value).trigger("change")}}),wp.customize.controlConstructor["wfacpkirki-image"]=wp.customize.Control.extend({ready:function(){"use strict";!_.isUndefined(window.wfacpkirkiControlLoader)&&_.isFunction(wfacpkirkiControlLoader)?wfacpkirkiControlLoader(this):this.initKirkiControl()},initKirkiControl:function(){var e=this,t=e.getValue(),i=_.isUndefined(e.params.choices)||_.isUndefined(e.params.choices.save_as)?"url":e.params.choices.save_as,a=e.container.find(".placeholder, .thumbnail"),n="array"===i?t.url:t,r=e.container.find(".image-upload-remove-button"),o=e.container.find(".image-default-button");e.container.find(".wfacpkirki-controls-loading-spinner").hide(),"id"!==i&&"ID"!==i||""===t||wp.media.attachment(t).fetch().then(function(){setTimeout(function(){var e=wp.media.attachment(t).get("url");a.removeClass().addClass("thumbnail thumbnail-image").html('<img src="'+e+'" alt="" />')},700)}),("url"===i&&""!==t||"array"===i&&!_.isUndefined(t.url)&&""!==t.url)&&e.container.find("image-default-button").hide(),("url"===i&&""===t||"array"===i&&(_.isUndefined(t.url)||""===t.url))&&r.hide(),t===e.params.default&&e.container.find("image-default-button").hide(),""!==n&&a.removeClass().addClass("thumbnail thumbnail-image").html('<img src="'+n+'" alt="" />'),e.container.on("click",".image-upload-button",function(t){var n=wp.media({multiple:!1}).open().on("select",function(){var t=n.state().get("selection").first().toJSON(),s=t.url;_.isUndefined(t.sizes)||(previewImg=t.sizes.full.url,_.isUndefined(t.sizes.medium)?_.isUndefined(t.sizes.thumbnail)||(s=t.sizes.thumbnail.url):s=t.sizes.medium.url),"array"===i?(e.saveValue("id",t.id),e.saveValue("url",t.sizes.full.url),e.saveValue("width",t.width),e.saveValue("height",t.height)):"id"===i?e.saveValue("id",t.id):e.saveValue("url",_.isUndefined(t.sizes)?t.url:t.sizes.full.url),a.length&&a.removeClass().addClass("thumbnail thumbnail-image").html('<img src="'+s+'" alt="" />'),r.length&&(r.show(),o.hide())});t.preventDefault()}),e.container.on("click",".image-upload-remove-button",function(t){var i,a,n;t.preventDefault(),e.saveValue("id",""),e.saveValue("url",""),e.saveValue("width",""),e.saveValue("height",""),i=e.container.find(".placeholder, .thumbnail"),a=e.container.find(".image-upload-remove-button"),n=e.container.find(".image-default-button"),i.length&&i.removeClass().addClass("placeholder").html("No file selected"),a.length&&(a.hide(),jQuery(n).hasClass("button")&&n.show())}),e.container.on("click",".image-default-button",function(t){var i,a,n;t.preventDefault(),e.saveValue("url",e.params.default),i=e.container.find(".placeholder, .thumbnail"),a=e.container.find(".image-upload-remove-button"),n=e.container.find(".image-default-button"),i.length&&i.removeClass().addClass("thumbnail thumbnail-image").html('<img src="'+e.params.default+'" alt="" />'),a.length&&(a.show(),n.hide())})},getValue:function(){var e=this.setting._value;return"array"===(_.isUndefined(this.params.choices)||_.isUndefined(this.params.choices.save_as)?"url":this.params.choices.save_as)&&_.isString(e)&&(e={url:e}),e},saveValue:function(e,t){var i=this,a=i.setting._value;if("array"===(_.isUndefined(i.params.choices)||_.isUndefined(i.params.choices.save_as)?"url":i.params.choices.save_as))return _.isString(a)&&(a={}),a[e]=t,i.setting.set(a),void i.container.find("button").trigger("change");i.setting.set(t),i.container.find("button").trigger("change")}}),wp.customize.controlConstructor["wfacpkirki-multicheck"]=wp.customize.wfacpkirkiDynamicControl.extend({initKirkiControl:function(){var e=this;e.container.on("change","input",function(){var t=[],i=0;jQuery.each(e.params.choices,function(a){e.container.find('input[value="'+a+'"]').is(":checked")?(e.container.find('input[value="'+a+'"]').parent().addClass("checked"),t[i]=a,i++):e.container.find('input[value="'+a+'"]').parent().removeClass("checked")}),e.setting.set(t)})}}),wp.customize.controlConstructor["wfacpkirki-multicolor"]=wp.customize.Control.extend({ready:function(){"use strict";!_.isUndefined(window.wfacpkirkiControlLoader)&&_.isFunction(wfacpkirkiControlLoader)?wfacpkirkiControlLoader(this):this.initKirkiControl()},initKirkiControl:function(){"use strict";var e=this.params.choices,t=Object.keys(e),i=(this.params.value,0);function a(t,i,a){var n=t.container.find(".multicolor-index-"+a),r={change:function(){setTimeout(function(){t.saveValue(a,n.val()),t.container.find(".multicolor-index-"+a).trigger("change")},100)}};_.isObject(e.irisArgs)&&_.each(e.irisArgs,function(e,t){r[t]=e}),n.wpColorPicker(r)}for(;i<Object.keys(e).length;)a(this,0,t[i]),i++},saveValue:function(e,t){var i=this.container.find(".multicolor-hidden-value"),a=this.setting._value;a[e]=t,jQuery(i).attr("value",JSON.stringify(a)).trigger("change"),this.setting.set(a)}}),wp.customize.controlConstructor["wfacpkirki-palette"]=wp.customize.wfacpkirkiDynamicControl.extend({}),wp.customize.controlConstructor["wfacpkirki-radio-buttonset"]=wp.customize.wfacpkirkiDynamicControl.extend({}),wp.customize.controlConstructor["wfacpkirki-radio-image"]=wp.customize.wfacpkirkiDynamicControl.extend({});var RepeaterRow=function(e,t,i,a){"use strict";var n=this;this.rowIndex=e,this.container=t,this.label=i,this.header=this.container.find(".repeater-row-header"),this.header.on("click",function(){n.toggleMinimize()}),this.container.on("click",".repeater-row-remove",function(){n.remove()}),this.header.on("mousedown",function(){n.container.trigger("row:start-dragging")}),this.container.on("keyup change","input, select, textarea",function(e){n.container.trigger("row:update",[n.rowIndex,jQuery(e.target).data("field"),e.target])}),this.setRowIndex=function(e){this.rowIndex=e,this.container.attr("data-row",e),this.container.data("row",e),this.updateLabel()},this.toggleMinimize=function(){this.container.toggleClass("minimized"),this.header.find(".dashicons").toggleClass("dashicons-arrow-up").toggleClass("dashicons-arrow-down")},this.remove=function(){this.container.slideUp(300,function(){jQuery(this).detach()}),this.container.trigger("row:remove",[this.rowIndex])},this.updateLabel=function(){var e,t,i;if("field"===this.label.type&&(e=this.container.find('.repeater-field [data-field="'+this.label.field+'"]'),_.isFunction(e.val)&&""!==(t=e.val())))return _.isUndefined(a.params.fields[this.label.field])||_.isUndefined(a.params.fields[this.label.field].type)||("select"===a.params.fields[this.label.field].type?_.isUndefined(a.params.fields[this.label.field].choices)||_.isUndefined(a.params.fields[this.label.field].choices[e.val()])||(t=a.params.fields[this.label.field].choices[e.val()]):"radio"!==a.params.fields[this.label.field].type&&"radio-image"!==a.params.fields[this.label.field].type||(i=a.selector+' [data-row="'+this.rowIndex+'"] .repeater-field [data-field="'+this.label.field+'"]:checked',t=jQuery(i).val())),void this.header.find(".repeater-row-label").text(t);this.header.find(".repeater-row-label").text(this.label.value+" "+(this.rowIndex+1))},this.updateLabel()};wp.customize.controlConstructor.repeater=wp.customize.Control.extend({ready:function(){"use strict";!_.isUndefined(window.wfacpkirkiControlLoader)&&_.isFunction(wfacpkirkiControlLoader)?wfacpkirkiControlLoader(this):this.initKirkiControl()},initKirkiControl:function(){"use strict";var e,t,i=this,a=this.params.value;i.container.find(".wfacpkirki-controls-loading-spinner").hide(),this.settingField=this.container.find("[data-customize-setting-link]").first(),this.setValue([],!1),this.repeaterFieldsContainer=this.container.find(".repeater-fields").first(),this.currentIndex=0,this.rows=[],e=!1,_.isUndefined(this.params.choices.limit)||(e=!(0>=this.params.choices.limit)&&parseInt(this.params.choices.limit,10)),this.container.on("click","button.repeater-add",function(a){a.preventDefault(),!e||i.currentIndex<e?((t=i.addRow()).toggleMinimize(),i.initColorPicker(),i.initSelect(t)):jQuery(i.selector+" .limit").addClass("highlight")}),this.container.on("click",".repeater-row-remove",function(){i.currentIndex--,(!e||i.currentIndex<e)&&jQuery(i.selector+" .limit").removeClass("highlight")}),this.container.on("click keypress",".repeater-field-image .upload-button,.repeater-field-cropped_image .upload-button,.repeater-field-upload .upload-button",function(e){e.preventDefault(),i.$thisButton=jQuery(this),i.openFrame(e)}),this.container.on("click keypress",".repeater-field-image .remove-button,.repeater-field-cropped_image .remove-button",function(e){e.preventDefault(),i.$thisButton=jQuery(this),i.removeImage(e)}),this.container.on("click keypress",".repeater-field-upload .remove-button",function(e){e.preventDefault(),i.$thisButton=jQuery(this),i.removeFile(e)}),this.repeaterTemplate=_.memoize(function(){var e={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g,variable:"data"};return function(t){return _.template(i.container.find(".customize-control-repeater-content").first().html(),null,e)(t)}}),a.length&&_.each(a,function(e){t=i.addRow(e),i.initColorPicker(),i.initSelect(t,e)}),this.setValue(a,!0,!0),this.repeaterFieldsContainer.sortable({handle:".repeater-row-header",update:function(){i.sort()}})},openFrame:function(e){"use strict";wp.customize.utils.isKeydownButNotEnterEvent(e)||(this.$thisButton.closest(".repeater-field").hasClass("repeater-field-cropped_image")?this.initCropperFrame():this.initFrame(),this.frame.open())},initFrame:function(){"use strict";var e=this.getMimeType();this.frame=wp.media({states:[new wp.media.controller.Library({library:wp.media.query({type:e}),multiple:!1,date:!1})]}),this.frame.on("select",this.onSelect,this)},initCropperFrame:function(){"use strict";var e=this.$thisButton.siblings("input.hidden-field").attr("data-field"),t=this.getMimeType();_.isString(e)&&""!==e&&_.isObject(this.params.fields[e])&&"cropped_image"===this.params.fields[e].type&&["width","height","flex_width","flex_height"].forEach(function(t){_.isUndefined(this.params.fields[e][t])||(this.params[t]=this.params.fields[e][t])}.bind(this)),this.frame=wp.media({button:{text:"Select and Crop",close:!1},states:[new wp.media.controller.Library({library:wp.media.query({type:t}),multiple:!1,date:!1,suggestedWidth:this.params.width,suggestedHeight:this.params.height}),new wp.media.controller.CustomizeImageCropper({imgSelectOptions:this.calculateImageSelectOptions,control:this})]}),this.frame.on("select",this.onSelectForCrop,this),this.frame.on("cropped",this.onCropped,this),this.frame.on("skippedcrop",this.onSkippedCrop,this)},onSelect:function(){"use strict";var e=this.frame.state().get("selection").first().toJSON();this.$thisButton.closest(".repeater-field").hasClass("repeater-field-upload")?this.setFileInRepeaterField(e):this.setImageInRepeaterField(e)},onSelectForCrop:function(){"use strict";var e=this.frame.state().get("selection").first().toJSON();this.params.width!==e.width||this.params.height!==e.height||this.params.flex_width||this.params.flex_height?this.frame.setState("cropper"):this.setImageInRepeaterField(e)},onCropped:function(e){"use strict";this.setImageInRepeaterField(e)},calculateImageSelectOptions:function(e,t){"use strict";var i,a,n,r=t.get("control"),o=!!parseInt(r.params.flex_width,10),s=!!parseInt(r.params.flex_height,10),c=e.get("width"),l=e.get("height"),u=parseInt(r.params.width,10),d=parseInt(r.params.height,10),p=u/d,f=c,h=l;return t.set("canSkipCrop",!r.mustBeCropped(o,s,u,d,c,l)),f/h>p?u=(d=h)*p:d=(u=f)/p,n={handles:!0,keys:!0,instance:!0,persistent:!0,imageWidth:c,imageHeight:l,x1:i=(f-u)/2,y1:a=(h-d)/2,x2:u+i,y2:d+a},!1===s&&!1===o&&(n.aspectRatio=u+":"+d),!1===s&&(n.maxHeight=d),!1===o&&(n.maxWidth=u),n},mustBeCropped:function(e,t,i,a,n,r){"use strict";return!(!0===e&&!0===t||!0===e&&a===r||!0===t&&i===n||i===n&&a===r||n<=i)},onSkippedCrop:function(){"use strict";var e=this.frame.state().get("selection").first().toJSON();this.setImageInRepeaterField(e)},setImageInRepeaterField:function(e){"use strict";var t=this.$thisButton.closest(".repeater-field-image,.repeater-field-cropped_image");t.find(".wfacpkirki-image-attachment").html('<img src="'+e.url+'">').hide().slideDown("slow"),t.find(".hidden-field").val(e.id),this.$thisButton.text(this.$thisButton.data("alt-label")),t.find(".remove-button").show(),t.find("input, textarea, select").trigger("change"),this.frame.close()},setFileInRepeaterField:function(e){"use strict";var t=this.$thisButton.closest(".repeater-field-upload");t.find(".wfacpkirki-file-attachment").html('<span class="file"><span class="dashicons dashicons-media-default"></span> '+e.filename+"</span>").hide().slideDown("slow"),t.find(".hidden-field").val(e.id),this.$thisButton.text(this.$thisButton.data("alt-label")),t.find(".upload-button").show(),t.find(".remove-button").show(),t.find("input, textarea, select").trigger("change"),this.frame.close()},getMimeType:function(){"use strict";var e=this.$thisButton.siblings("input.hidden-field").attr("data-field");return _.isString(e)&&""!==e&&_.isObject(this.params.fields[e])&&"upload"===this.params.fields[e].type&&!_.isUndefined(this.params.fields[e].mime_type)?this.params.fields[e].mime_type:"image"},removeImage:function(e){"use strict";var t,i;wp.customize.utils.isKeydownButNotEnterEvent(e)||(i=(t=this.$thisButton.closest(".repeater-field-image,.repeater-field-cropped_image,.repeater-field-upload")).find(".upload-button"),t.find(".wfacpkirki-image-attachment").slideUp("fast",function(){jQuery(this).show().html(jQuery(this).data("placeholder"))}),t.find(".hidden-field").val(""),i.text(i.data("label")),this.$thisButton.hide(),t.find("input, textarea, select").trigger("change"))},removeFile:function(e){"use strict";var t,i;wp.customize.utils.isKeydownButNotEnterEvent(e)||(i=(t=this.$thisButton.closest(".repeater-field-upload")).find(".upload-button"),t.find(".wfacpkirki-file-attachment").slideUp("fast",function(){jQuery(this).show().html(jQuery(this).data("placeholder"))}),t.find(".hidden-field").val(""),i.text(i.data("label")),this.$thisButton.hide(),t.find("input, textarea, select").trigger("change"))},getValue:function(){"use strict";return JSON.parse(decodeURI(this.setting.get()))},setValue:function(e,t,i){"use strict";var a=e,n=[];i&&(jQuery.each(this.params.fields,function(e,t){"image"!==t.type&&"cropped_image"!==t.type&&"upload"!==t.type||n.push(e)}),jQuery.each(e,function(e,t){jQuery.each(n,function(i,n){_.isUndefined(t[n])||_.isUndefined(t[n].id)||(a[e][n]=t[n].id)})})),this.setting.set(encodeURI(JSON.stringify(a))),t&&this.settingField.trigger("change")},addRow:function(e){"use strict";var t,i,a,n=this,r=n.repeaterTemplate(),o=this.getValue(),s={};if(r){if(t=jQuery.extend(!0,{},n.params.fields),e)for(a in e)e.hasOwnProperty(a)&&t.hasOwnProperty(a)&&(t[a].default=e[a]);t.index=this.currentIndex,r=r(t),(i=new RepeaterRow(n.currentIndex,jQuery(r).appendTo(n.repeaterFieldsContainer),n.params.row_label,n)).container.on("row:remove",function(e,t){n.deleteRow(t)}),i.container.on("row:update",function(e,t,a,r){n.updateField.call(n,e,t,a,r),i.updateLabel()}),this.rows[this.currentIndex]=i;for(a in t)t.hasOwnProperty(a)&&(s[a]=t[a].default);return o[this.currentIndex]=s,this.setValue(o,!0),this.currentIndex++,i}},sort:function(){"use strict";var e=this,t=this.repeaterFieldsContainer.find(".repeater-row"),i=[],a=e.getValue(),n=[],r=[];t.each(function(e,t){i.push(jQuery(t).data("row"))}),jQuery.each(i,function(t,i){n[t]=e.rows[i],n[t].setRowIndex(t),r[t]=a[i]}),e.rows=n,e.setValue(r)},deleteRow:function(e){"use strict";var t,i=this.getValue();i[e]&&this.rows[e]&&(delete i[e],delete this.rows[e],this.setValue(i,!0));for(t in this.rows)this.rows.hasOwnProperty(t)&&this.rows[t]&&(this.rows[t].updateLabel(),0)},updateField:function(e,t,i,a){"use strict";var n,r,o;this.rows[t]&&this.params.fields[i]&&(n=this.params.fields[i].type,r=this.rows[t],o=this.getValue(),a=jQuery(a),_.isUndefined(o[r.rowIndex][i])||(o[r.rowIndex][i]="checkbox"===n?a.is(":checked"):a.val(),this.setValue(o,!0)))},initColorPicker:function(){"use strict";var e=this,t=e.container.find(".color-picker-hex"),i={},a=t.data("field");_.isUndefined(a)||_.isUndefined(e.params.fields[a])||_.isUndefined(e.params.fields[a].palettes)||!_.isObject(e.params.fields[a].palettes)||(i.palettes=e.params.fields[a].palettes),i.change=function(t,i){var a=jQuery(t.target),n=a.closest(".repeater-row").data("row"),r=e.getValue();r[n][a.data("field")]=i.color.toString(),e.setValue(r,!0)},0!==t.length&&t.wpColorPicker(i)},initSelect:function(e,t){"use strict";var i,a,n=this,r=e.container.find(".repeater-field select"),o={};0!==r.length&&(i=r.data("field"),"undefed"!==(a=jQuery(r).data("multiple"))&&jQuery.isNumeric(a)&&1<(a=parseInt(a,10))&&(o.maximumSelectionLength=a),(t=t||{})[i]=t[i]||"",jQuery(r).selectWoo(o).val(t[i]||jQuery(r).val()),this.container.on("change",".repeater-field select",function(e){var t=jQuery(e.target),i=t.closest(".repeater-row").data("row"),a=n.getValue();a[i][t.data("field")]=jQuery(this).val(),n.setValue(a)}))}}),wp.customize.controlConstructor["wfacpkirki-slider"]=wp.customize.wfacpkirkiDynamicControl.extend({initKirkiControl:function(){var e=this,t="postMessage"===e.setting.transport?"mousemove change":"change",i=e.container.find('input[type="range"]'),a=e.container.find('input[type="text"]'),n=e.setting._value;a.attr("value",n),i.on("mousemove change",function(){a.attr("value",i.val())}),i.on(t,function(){e.setting.set(i.val())}),a.on("input paste change",function(){i.attr("value",a.val()),e.setting.set(a.val())}),e.container.find(".slider-reset").on("click",function(){a.attr("value",e.params.default),i.attr("value",e.params.default),e.setting.set(a.val())})}}),wp.customize.controlConstructor["wfacpkirki-sortable"]=wp.customize.Control.extend({ready:function(){"use strict";!_.isUndefined(window.wfacpkirkiControlLoader)&&_.isFunction(wfacpkirkiControlLoader)?wfacpkirkiControlLoader(this):this.initKirkiControl()},initKirkiControl:function(){"use strict";var e=this;e.container.find(".wfacpkirki-controls-loading-spinner").hide(),e.sortableContainer=e.container.find("ul.sortable").first(),e.sortableContainer.sortable({stop:function(){e.updateValue()}}).disableSelection().find("li").each(function(){jQuery(this).find("i.visibility").click(function(){jQuery(this).toggleClass("dashicons-visibility-faint").parents("li:eq(0)").toggleClass("invisible")})}).click(function(){e.updateValue()})},updateValue:function(){"use strict";var e=[];this.sortableContainer.find("li").each(function(){jQuery(this).is(".invisible")||e.push(jQuery(this).data("value"))}),this.setting.set(e)}}),wp.customize.controlConstructor["wfacpkirki-switch"]=wp.customize.wfacpkirkiDynamicControl.extend({initKirkiControl:function(){"use strict";var e=this,t=e.setting._value;this.container.on("change","input",function(){t=!!jQuery(this).is(":checked"),e.setting.set(t)})}}),wp.customize.controlConstructor["wfacpkirki-toggle"]=wp.customize.wfacpkirkiDynamicControl.extend({initKirkiControl:function(){var e=this,t=e.setting._value;this.container.on("change","input",function(){t=!!jQuery(this).is(":checked"),e.setting.set(t)})}}),wp.customize.controlConstructor["wfacpkirki-typography"]=wp.customize.wfacpkirkiDynamicControl.extend({initKirkiControl:function(){"use strict";var e,t=this,i=t.setting._value;t.renderFontSelector(),t.renderBackupFontSelector(),t.renderVariantSelector(),t.localFontsCheckbox(),t.params.default["font-size"]&&this.container.on("change keyup paste",".font-size input",function(){t.saveValue("font-size",jQuery(this).val())}),t.params.default["line-height"]&&this.container.on("change keyup paste",".line-height input",function(){t.saveValue("line-height",jQuery(this).val())}),t.params.default["margin-top"]&&this.container.on("change keyup paste",".margin-top input",function(){t.saveValue("margin-top",jQuery(this).val())}),t.params.default["margin-bottom"]&&this.container.on("change keyup paste",".margin-bottom input",function(){t.saveValue("margin-bottom",jQuery(this).val())}),t.params.default["letter-spacing"]&&(i["letter-spacing"]=jQuery.isNumeric(i["letter-spacing"])?i["letter-spacing"]+"px":i["letter-spacing"],this.container.on("change keyup paste",".letter-spacing input",function(){i["letter-spacing"]=jQuery.isNumeric(jQuery(this).val())?jQuery(this).val()+"px":jQuery(this).val(),t.saveValue("letter-spacing",i["letter-spacing"])})),t.params.default["word-spacing"]&&this.container.on("change keyup paste",".word-spacing input",function(){t.saveValue("word-spacing",jQuery(this).val())}),t.params.default["text-align"]&&this.container.on("change",".text-align input",function(){t.saveValue("text-align",jQuery(this).val())}),t.params.default["text-transform"]&&jQuery(t.selector+" .text-transform select").selectWoo().on("change",function(){t.saveValue("text-transform",jQuery(this).val())}),t.params.default["text-decoration"]&&jQuery(t.selector+" .text-decoration select").selectWoo().on("change",function(){t.saveValue("text-decoration",jQuery(this).val())}),_.isUndefined(t.params.default.color)||(e=this.container.find(".wfacpkirki-color-control")).wpColorPicker({change:function(){setTimeout(function(){t.saveValue("color",e.val())},100)}})},renderFontSelector:function(){var e,t,i=this,a=i.selector+" .font-family select",n=[],r=[],o=[],s=i.setting._value,c=i.getFonts();_.isUndefined(c.standard)||_.each(c.standard,function(e){r.push({id:e.family.replace(/&quot;/g,"&#39"),text:e.label})}),_.isUndefined(c.google)||_.each(c.google,function(e){o.push({id:e.family,text:e.family})}),t={},_.isUndefined(i.params)||_.isUndefined(i.params.choices)||_.isUndefined(i.params.choices.fonts)||_.isUndefined(i.params.choices.fonts.families)||(t=i.params.choices.fonts.families),n=jQuery.extend({},t,{default:{text:wfacpkirkiL10n.defaultCSSValues,children:[{id:"",text:wfacpkirkiL10n.defaultBrowserFamily},{id:"initial",text:"initial"},{id:"inherit",text:"inherit"}]},standard:{text:wfacpkirkiL10n.standardFonts,children:r},google:{text:wfacpkirkiL10n.googleFonts,children:o}}),wfacpkirkiL10n.isScriptDebug&&(console.info('WFACPKirki Debug: Font families for control "'+i.id+'":'),console.info(n)),n=_.values(n),e=jQuery(a).selectWoo({data:n}),s["font-family"]&&e.val(s["font-family"].replace(/'/g,'"')).trigger("change"),e.on("change",function(){i.saveValue("font-family",jQuery(this).val()),i.renderBackupFontSelector(),i.renderVariantSelector()})},renderBackupFontSelector:function(){var e,t=this,i=t.selector+" .font-backup select",a=[],n=t.setting._value,r=n["font-family"],o=t.getFonts();(_.isUndefined(n["font-backup"])||null===n["font-backup"])&&(n["font-backup"]=""),"inherit"!==r&&"initial"!==r&&"google"===wfacpkirki.util.webfonts.getFontType(r)?(jQuery(t.selector+" .font-backup").show(),_.isUndefined(o.standard)||_.each(o.standard,function(e){a.push({id:e.family.replace(/&quot;/g,"&#39"),text:e.label})}),e=jQuery(i).selectWoo({data:a}),void 0!==n["font-backup"]&&e.val(n["font-backup"].replace(/'/g,'"')).trigger("change"),e.on("change",function(){t.saveValue("font-backup",jQuery(this).val())})):jQuery(t.selector+" .font-backup").hide()},renderVariantSelector:function(){var e,t,i,a=this,n=a.setting._value,r=n["font-family"],o=a.selector+" .variant select",s=[],c=!1,l=["","regular","italic","700","700italic"];if("google"===wfacpkirki.util.webfonts.getFontType(r)&&(l=wfacpkirki.util.webfonts.google.getVariants(r)),_.isUndefined(a.params)||_.isUndefined(a.params.choices)||_.isUndefined(a.params.choices.fonts)||_.isUndefined(a.params.choices.fonts.variants)||_.isUndefined(a.params.choices.fonts.variants[r])||(l=a.params.choices.fonts.variants[r]),wfacpkirkiL10n.isScriptDebug&&(console.info('WFACPKirki Debug: Font variants for font-family "'+r+'":'),console.info(l)),"inherit"!==r&&"initial"!==r&&""!==r||(n.variant="inherit",l=[""],jQuery(a.selector+" .variant").hide()),1>=l.length)return jQuery(a.selector+" .variant").hide(),n.variant=l[0],a.saveValue("variant",n.variant),""!==n.variant&&n.variant?(e=_.isString(n.variant)?n.variant.match(/\d/g):"400",e=_.isObject(e)?e.join(""):"400",i=-1!==n.variant.indexOf("italic")?"italic":"normal"):(e="",i=""),a.saveValue("font-weight",e),void a.saveValue("font-style",i);jQuery(a.selector+" .font-backup").show(),jQuery(a.selector+" .variant").show(),_.each(l,function(e){n.variant===e&&(c=!0),s.push({id:e,text:e})}),c||(n.variant="regular"),jQuery(o).hasClass("select2-hidden-accessible")&&(jQuery(o).selectWoo("destroy"),jQuery(o).empty()),(t=jQuery(o).selectWoo({data:s})).val(n.variant).trigger("change"),t.on("change",function(){a.saveValue("variant",jQuery(this).val()),"string"!=typeof n.variant&&(n.variant=l[0]),e=_.isString(n.variant)?n.variant.match(/\d/g):"400",e=_.isObject(e)?e.join(""):"400",i=-1!==n.variant.indexOf("italic")?"italic":"normal",a.saveValue("font-weight",e),a.saveValue("font-style",i)})},getFonts:function(){var e=this,t=wfacpkirki.util.webfonts.google.getFonts(),i={},a="alpha",n=0,r={};return _.isEmpty(e.params.choices.fonts.google)?i=wfacpkirki.util.webfonts.google.getFonts(a,"",n):"alpha"===e.params.choices.fonts.google[0]||"popularity"===e.params.choices.fonts.google[0]||"trending"===e.params.choices.fonts.google[0]?(a=e.params.choices.fonts.google[0],isNaN(e.params.choices.fonts.google[1])||(n=parseInt(e.params.choices.fonts.google[1],10)),i=wfacpkirki.util.webfonts.google.getFonts(a,"",n)):_.each(e.params.choices.fonts.google,function(e){void 0===t[e]||_.isEmpty(t[e])||(i[e]=t[e])}),_.isEmpty(e.params.choices.fonts.standard)?_.each(wfacpkirki.util.webfonts.standard.fonts,function(e,t){r[t]={family:e.stack,label:e.label}}):_.each(e.params.choices.fonts.standard,function(e){void 0===wfacpkirki.util.webfonts.standard.fonts[e]||_.isEmpty(wfacpkirki.util.webfonts.standard.fonts[e])?r[e]={family:e,label:e}:(r[e]={},"undefined"===wfacpkirki.util.webfonts.standard.fonts[e].stack||_.isEmpty(wfacpkirki.util.webfonts.standard.fonts[e].stack)?r[e].family=i[e]:r[e].family=wfacpkirki.util.webfonts.standard.fonts[e].stack,"undefined"===wfacpkirki.util.webfonts.standard.fonts[e].label||_.isEmpty(wfacpkirki.util.webfonts.standard.fonts[e].label)?_.isEmpty(r[e])||(r[e].label=r[e]):r[e].label=wfacpkirki.util.webfonts.standard.fonts[e].label)}),{google:i,standard:r}},localFontsCheckbox:function(){var e=this,t=(e.container.find(".wfacpkirki-host-font-locally"),e.container.find(".wfacpkirki-host-font-locally input")),i=jQuery(t).is(":checked");e.setting._value&&e.setting._value.downloadFont&&jQuery(t).attr("checked","checked"),jQuery(t).on("change",function(){i=jQuery(t).is(":checked"),e.saveValue("downloadFont",i)})},saveValue:function(e,t){var i=this.container.find(".typography-hidden-value"),a=this.setting._value;a[e]=t,jQuery(i).attr("value",JSON.stringify(a)).trigger("change"),this.setting.set(a)}});
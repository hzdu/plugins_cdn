jQuery(function(o){"use strict";var e=o(document).find(".yith-ywraq-chosen"),n=function(e){return new RegExp(/^[^\s@]+@[^\s@]+\.[^\s@]+$/i).test(e)},a={message:null,overlayCSS:{background:"#fff",opacity:.7},ignoreIfBlocked:!0},t=(o("#_ywraq_safe_submit_field").val(""),e.each(function(){o.fn.chosen!==undefined&&o(this).chosen({width:"350px",disable_search:!0,multiple:!0})}),o("select.yit-contact-form").parent().parent()),i=o("select.contact-form-7").parent().parent(),_=o("select.gravity-forms").parent().parent(),r=o("select.ninja-forms").parent().parent(),s=o("select.wpforms").parent().parent(),d=o('div[data-option-id="ywraq_default_table_form"]').closest(".yith-plugin-fw__panel__section"),c=d.next(".yith-plugin-fw__panel__section"),e=(o("select#ywraq_inquiry_form_type").change(function(){switch(o("option:selected",this).val()){case"yit-contact-form":d.hide(),c.hide(),t.show(),i.hide(),_.hide(),r.hide(),s.hide();break;case"contact-form-7":d.hide(),c.hide(),t.hide(),_.hide(),i.show(),r.hide(),s.hide();break;case"gravity-forms":d.hide(),c.hide(),t.hide(),i.hide(),_.show(),r.hide(),s.hide();break;case"ninja-forms":d.hide(),c.hide(),t.hide(),i.hide(),_.hide(),r.show(),s.hide();break;case"wpforms":d.hide(),c.hide(),t.hide(),i.hide(),_.hide(),r.hide(),s.show();break;default:d.show(),c.show(),t.hide(),i.hide(),_.hide(),r.hide(),s.hide()}}).change(),o("#ywraq_pdf_in_myaccount")),l=e.closest(".yith-plugin-fw__panel__section").next(".yith-plugin-fw__panel__section"),h=o(".yith-plugin-fw__panel__submenu .yith-plugin-fw__panel__submenu__wrap .yith-plugin-fw__panel__submenu-item:nth-child(4)");function u(){var e=o("#_ywraq_deposit_enable").val(),t=o("#_ywraq_pay_quote_now").val(),i=o("#_ywraq_deposit_rate").closest(".the-metabox");0!=t&&"no"!=t||(0==e||"no"==e?i.hide():i.show())}e.on("change",function(e){var t=o(this).val(),i=o("#ywraq_pdf_template_to_use").val();"no"===t?(l.hide(),h.hide()):(l.show(),"builder"===i&&h.show())}),o("#ywraq_submit_button").on("click",function(e){e.preventDefault(),o("#order_status").val("wc-ywraq-pending"),o("#_ywraq_safe_submit_field").val("send_quote"),o("#order_status").val("wc-ywraq-pending"),o(this).closest("form").submit()}),0<o(".ywraq-add-new-quote-button").length&&(e=o(".ywraq-add-new-quote-button"),o(".wp-header-end").before(e)),o(document).find("#ywraq_pdf_button").on("click",function(e){e.preventDefault();e=o(this).closest("form");o("#_ywraq_safe_submit_field").val("create_preview_pdf"),o.post(document.location.href,e.serialize()).done(function(e){var t;(t=""!==e?o("<div></div>").html(e).find("#ywraq_pdf_button").data("pdf"):t)&&window.open(t,"_blank")}),o("#_ywraq_safe_submit_field").val("")}),o("#ywraq_check_email").on("click",function(e){e.preventDefault();var t=o(this),e=o("#_ywraq_email_preview_email").val(),i=t.closest("form");n(e)?(o("#_ywraq_safe_submit_field").val("send_email_preview"),t.block(a),o.post(document.location.href,i.serialize()).done(function(){t.unblock(),o(".ywraq-email-success").show(),setTimeout(function(){o(".ywraq-email-success").hide("slow")},3e3)})):o(".ywraq-email-error").show()}),o("#_ywraq_email_preview_email").on("change click",function(){var e=o(this).val();n(e)?o(".ywraq-email-error").hide():o(".ywraq-email-error").show()}),0<o("#_ywcm_request_expire").length&&o("#_ywcm_request_expire").each(function(){o.datepicker.setDefaults({gotoCurrent:!0,dateFormat:"yy-mm-dd"}),o(this).datepicker("option","minDate","1d")}),o(document).on("change",o("#_ywraq_deposit_enable"),function(){u()}),u(),o("#ywraq_pdf_file").attr("disabled","disabled");var e=o(document).find(".ywraq_form_link"),p=function p(e,t){return null===t||""==t?"":"contact-form-7"===e?"&post="+t+"&action=edit":"gravity-forms"===e?"&id="+t:"ninja-forms"===e?"&form_id="+t:"wpforms"===e?"&view=fields&form_id="+t:void 0},f=(e.each(function(){var t=o(this),e=t.closest(".yith-plugin-fw__panel__option--select").find("select"),i=t.attr("href"),n=t.data("type"),a=e.val();t.attr("href",i+p(n,a)),e.on("change",function(){var e=o(this).val();t.attr("href",i+p(n,e))})}),o("#ywraq_message_to_view_details").closest(".yith-plugin-fw__panel__option")),w=o("#ywraq_thank_you_page").closest(".yith-plugin-fw__panel__option");o(document).on("change",'input[name="ywraq_how_show_after_sent_the_request"]:checked',function(e){var t=o(this).val();"simple_message"!==t?f.hide():o("#ywraq_enable_link_details").trigger("change"),"thank_you_page"!==t?w.hide():w.show()}),o(document).find('input[name="ywraq_how_show_after_sent_the_request"]').trigger("change");"simple_message"!==o(document).find('input[name="ywraq_how_show_after_sent_the_request"]:checked').val()&&f.hide(),o(".yith-plugin-fw.metaboxes-tab.yith-plugin-ui").find("[data-deps]").each(function(){var e=o(this),n=e.closest(".the-metabox"),t=e.attr("data-deps").split(","),a=e.attr("data-deps_value").split(","),_=[];o.each(t,function(i,e){o("#"+e).on("change",function(){var e=this.value,t="";"radio"==this.type&&!o(this).is(":checked")||("checkbox"==this.type&&(e=o(this).is(":checked")?"yes":"no"),t=(t=a[i]+"").split("|"),_[i]=-1!==o.inArray(e,t),-1===o.inArray(!1,_)?n.fadeIn():n.fadeOut())}).change()})}),o(".yith-plugins_page_yith_woocommerce_request_a_quote .yith-plugin-fw__panel__section__content").find("[data-deps]").each(function(){var e=o(this),n=e.closest(".yith-plugin-fw__panel__option").not(".yith-plugin-fw__panel__option--default-form"),t=e.attr("data-deps").split(","),a=e.attr("data-deps_value").split(","),_=[];o.each(t,function(i,e){o('[name="'+e+'"]').on("change",function(){var e=this.value,t="";"radio"==this.type&&!o(this).is(":checked")||("checkbox"==this.type&&(e=o(this).is(":checked")?"yes":"no"),t=(t=a[i]+"").split("|"),_[i]=-1!==o.inArray(e,t),-1===o.inArray(!1,_)?n.fadeIn():n.fadeOut())}).change()})}),o(document).on("change","#ywraq_show_button_on_cart_page, #ywraq_show_button_on_checkout_page",function(){var e=o("#ywraq_checkout_quote_button_label").closest(".yith-plugin-fw__panel__option"),t=o("#ywraq_show_button_on_cart_page"),i=o("#ywraq_show_button_on_checkout_page");t.is(":checked")||i.is(":checked")?e.fadeIn():e.fadeOut()}),o("#ywraq_show_button_on_cart_page").change(),e=o(".single_select_page"),g=o(".ywraq-create-page"),m=g.closest(".yith-plugin-fw__panel__option"),0<e.length&&(e.find(".description").before(g),m.hide()),o(document).on("click",".yith-pencil.customer-request-editor",function(){var e=o(this).closest(".customer-request-field-wrapper");e.hasClass("edit")?(e.removeClass("edit"),e.find("input, textarea").prop("readonly",!0)):(e.addClass("edit"),e.find("input, textarea").prop("readonly",!1))}),o("#ywraq_enable_expired_time").change(function(){o("#ywraq_expired_time").parent().parent().parent().hasClass("yith-disabled")?o("#ywraq_expired_time_days").attr("disabled","disabled"):o("#ywraq_expired_time_days").attr("disabled",!1)}).change(),yith_ywraq_admin.is_raq_panel&&o("#doaction, #post-query-submit").on("click",function(e){window.onbeforeunload=null;var t=o(this);"delete"===o(this).parent().find("select option:selected").val()&&(e.preventDefault(),yith.ui.confirm({title:yith_ywraq_admin.bulk_delete_confirm_title,message:yith_ywraq_admin.bulk_delete_confirm_message,confirmButtonType:"delete",confirmButton:yith_ywraq_admin.bulk_delete_confirm_button,cancelButton:yith_ywraq_admin.bulk_delete_cancel_button,closeAfterConfirm:!0,width:400,onConfirm:function(){t.closest("form").submit()}}))}),0<o(".ywraq-hide-tab-templates").length&&o(".yith-plugin-fw__panel__submenu .yith-plugin-fw__panel__submenu__wrap .yith-plugin-fw__panel__submenu-item:nth-child(4)").hide(),o(document).on("change","#ywraq_pdf_template_to_use",function(){"default"===o(this).val()?o(".yith-plugin-fw__panel__submenu .yith-plugin-fw__panel__submenu__wrap .yith-plugin-fw__panel__submenu-item:nth-child(4)").hide():o(".yith-plugin-fw__panel__submenu .yith-plugin-fw__panel__submenu__wrap .yith-plugin-fw__panel__submenu-item:nth-child(4)").show()}),0<o(document).find("#woocommerce_ywraq_send_quote_reminder_accept_days_after_sent").length&&(q=(y=o(document).find("#woocommerce_ywraq_send_quote_reminder_accept_days_after_sent")).data("description"),y.after(o('<span style="margin-left:10px; line-height: 30px"></span>').html(q))),0<o(document).find("#woocommerce_ywraq_send_quote_reminder_days_before_expire").length&&(q=(y=o(document).find("#woocommerce_ywraq_send_quote_reminder_days_before_expire")).data("description"),y.after(o('<span style="margin-left:10px; line-height: 30px"></span>').html(q)));o(".yith-plugin-fw__panel__content__actions #yith-plugin-fw__panel__content__save").on("click",function(e){var t=o("form").find(".yith-plugin-fw--required"),n=!1,a=!0;if(a&&t.each(function(){var e,t=o(this),i=o('<span class="validate-required">');i.html(yith_ywraq_admin.required_label),t.is(":visible")&&((e=t.find("select")).length?0===e.find(":selected").length&&(a=!1,n=n||t,t.addClass("ywraq_required_check"),t.find(".validate-required").length||t.find(".yith-plugin-fw__panel__option__description").before(i)):""===t.find("input").val()&&(a=!1,n=n||t,t.addClass("ywraq_required_check"),t.find(".validate-required").length||t.find(".yith-plugin-fw__panel__option__description").before(i)))}),a)return!0;e.preventDefault(),t=n,o("html,body").animate({scrollTop:t.offset().top-100},"slow");e=o(document).find(".ywraq_required_check select"),t=o(document).find(".ywraq_required_check input");e.on("select2:open",function(e){o(this).parents(".yith-plugin-fw--required").removeClass("ywraq_required_check"),o(this).parents(".yith-plugin-fw--required").find(".validate-required").remove(),e.stopImmediatePropagation()}),t.on("change",function(e){e.stopImmediatePropagation(),o(this).parents(".yith-plugin-fw--required").removeClass("ywraq_required_check"),o(this).parents(".yith-plugin-fw--required").find(".validate-required").remove()})}),o(document).on("click","#ywraq-check-pdf .notice-dismiss",function(){document.cookie="ywraq_check_template_pdf_notice=yes;path=/",o("#ywraq-check-pdf").remove()});var m,y,q,e=o(".ywraq-admin-wrap-content .ywraq-add-new-quote"),g=o(".ywraq-admin-wrap-content .ywraq-export");o("#yith_woocommerce_request_a_quote_request-list .yith-plugin-fw__panel__content__page .yith-plugin-fw__panel__content__page__title").append(e,g)});
jQuery(document).ready(function(_){"use strict";_("body"),_(".add-request-quote-button");var l=_(document).find(ywraq_frontend.widget_classes),u="undefined"!=typeof ywraq_frontend&&ywraq_frontend.block_loader,y="undefined"!=typeof ywraq_frontend&&ywraq_frontend.allow_out_of_stock,f="undefined"!=typeof ywraq_frontend&&ywraq_frontend.allow_only_on_out_of_stock,t=(_(".yith-ywraq-item-remove"),_(".shipping_address")),e=_(".woocommerce-billing-fields"),i=document.location.href,a=_(document).find("#yith-ywrq-table-list"),d={message:null,overlayCSS:{background:"#fff",opacity:.7},ignoreIfBlocked:!0},s=function(){var t=_(document).find("[data-colspan-mobile]");_.each(t,function(){var t=_(this);window.innerWidth<=768?t.prop("colspan",t.data("colspan-mobile")):t.prop("colspan",t.data("colspan"))})};y=!(!y&&"yes"!=y),f=!(!f&&"yes"!=f),0<a.length&&ywraq_frontend.raq_table_refresh_check&&_.post(i,function(t){""!=t&&(t=_("<div></div>").html(t).find("#yith-ywrq-table-list"),_("#yith-ywrq-table-list").html(t.html()),s(),_(document).trigger("ywraq_table_reloaded"))}),_(document).on("ywraq_table_reloaded yith_wwraq_removed_successfully yith_check_table",function(){0==_(document).find("#yith-ywrq-table-list").length&&_(document).find(".yith-ywraq-before-table .wc-backward").hide()}),_(document).trigger("yith_check_table"),0<_(document).find(".woocommerce-message").length&&(_(".ywraq-before-form").addClass("ywraq-no-border"),_(".ywraq_list_empty_message").hide()),_.fn.yith_ywraq_variations=function(){var o,r,i,d,s,c,e,t=_(document).find("form.variations_form");t.length&&void 0!==t.data("product_id")&&(o=t.data("product_id").toString().replace(/[^0-9]/g,""),r=_(".add-to-quote-"+o).find(".yith-ywraq-add-button"),i=r.find("a.add-request-quote-button"),d=_(".yith_ywraq_add_item_product-response-"+o),s=_(".yith_ywraq_add_item_response-"+o),c=_(".yith_ywraq_add_item_browse-list-"+o),e=function(){i.show().addClass("disabled"),r.show().removeClass("hide").removeClass("addedd"),d.hide().removeClass("show"),s.hide().removeClass("show"),c.hide().removeClass("show"),(f&&y||f)&&i.hide()},t.on("found_variation",function(t,e){var a=""+_(".add-to-quote-"+o).attr("data-variation"),n=!0;d.hide().removeClass("show"),y?f&&e.is_in_stock&&(n=!1):e.is_in_stock||(n=!1),(n?(i.show().removeClass("disabled"),r.show().removeClass("hide")):(i.hide().addClass("disabled"),r.hide().removeClass("show"))).removeClass("addedd"),s.hide().removeClass("show"),c.hide().removeClass("show"),-1!==a.indexOf(""+e.variation_id)&&n?(i.hide(),s.show().removeClass("hide"),c.show().removeClass("hide")):n&&(i.show().removeClass("disabled"),r.show().removeClass("hide").removeClass("addedd"),s.hide().removeClass("show"),c.hide().removeClass("show"))}),t.on("reset_data",function(t){e()}),e())},_(".variations_form").each(function(){_(this).yith_ywraq_variations()}),_(document).on("qv_loader_stop",function(t){_(".variations_form").each(function(){_(this).yith_ywraq_variations()})}),_.fn.yith_ywraq_refresh_button=function(){var t=_('[name|="product_id"]').val();_(".add-to-quote-"+t).find("a.add-request-quote-button").parents(".yith-ywraq-add-to-quote");if(!_('[name|="variation_id"]').length)return!1},_.fn.yith_ywraq_refresh_button();var n,o,w=!1,r=(_(document).on("click",".add-request-quote-button",function(t){t.preventDefault();var e=_(this),t=e.closest(".yith-ywraq-add-to-quote"),a="ac",n="";if(e.hasClass("outofstock")?window.alert(ywraq_frontend.i18n_out_of_stock):e.hasClass("disabled")&&window.alert(ywraq_frontend.i18n_choose_a_variation),!(e.hasClass("disabled")||e.hasClass("outofstock")||w)){if(_(".grouped_form").length){var o=0;if(_(".grouped_form input.qty").each(function(){o=Math.floor(_(this).val())+o}),0==o)return void alert(ywraq_frontend.select_quantity)}if("undefined"==typeof(n=e.closest(".cart").length?e.closest(".cart"):t.siblings(".cart").first().length?t.siblings(".cart").first():_(".composite_form").length?_(".composite_form"):0<e.closest("ul.products").length?e.closest("ul.products"):_("form.cart:not(.in_loop)").first())[0]||"function"!=typeof n[0].checkValidity||n[0].checkValidity()){var r=void 0===(d=0<e.closest("ul.products").length?(i="",(d=e.closest("li.product").find("a.add_to_cart_button")).data("product_id")):(i=e.closest(".product").find('input[name="add-to-cart"]'),d=e.closest(".product").find('input[name="product_id"]'),e.data("product_id")||(d.length?d:i).val()))?e.data("product_id"):d,i=((a=n.serializefiles()).append("context","frontend"),a.append("action","yith_ywraq_action"),a.append("ywraq_action","add_item"),a.append("product_id",e.data("product_id")),a.append("wp_nonce",e.data("wp_nonce")),a.append("yith-add-to-cart",e.data("product_id")),t.find("input.qty").val()),t=(0<i&&a.append("quantity",i),0<_(".wc-product-table-wrapper").length&&0<(i=e.parents(".product-row").find(".cart input.qty").val())&&a.append("quantity",i),0<e.closest(".yith_wc_qof_button_and_price").length&&(d=e.closest(".yith_wc_qof_button_and_price").find(".YITH_WC_QOF_Quantity_Cart").val(),a.append("quantity",d)),e.closest("li.product").find(".variations_form.in_loop")),i=!!t.length&&t.data("active_variation");if(i&&(a.append("variation_id",i),t.find("select").each(function(){a.append(this.name,this.value)})),_(document).trigger("yith_ywraq_action_before",e,a),"undefined"!=typeof yith_wceop_params&&"undefined"!=typeof yith_wceop_params.do_submit){if(!yith_wceop_params.do_submit)return!1;"undefined"!=typeof yith_wceop_params&&"undefined"!=typeof yith_wceop_params.ywraq_quantity&&0<yith_wceop_params.ywraq_quantity&&a.append("quantity",yith_wceop_params.ywraq_quantity);var d=e.data("variation_id");if(d&&a.append("variation_id",d),e.data("variation_args")){var s,c=jQuery.parseJSON(decodeURIComponent(e.data("variation_args")));for(s in c)a.append(s,c[s])}}return"undefined"==typeof yith_wapo_general||yith_wapo_general.do_submit?!("undefined"!=typeof ywcnp_raq&&!ywcnp_raq.do_submit)&&void(w=_.ajax({type:"POST",url:ywraq_frontend.ajaxurl.toString().replace("%%endpoint%%","yith_ywraq_action"),dataType:"json",data:a,contentType:!1,processData:!1,beforeSend:function(){e.after(' <img src="'+u+'" class="ywraq-loader" >')},complete:function(){e.next().remove()},success:function(t){"true"==t.result||"exists"==t.result?("yes"==ywraq_frontend.go_to_the_list?window.location.href=t.rqa_url:(_(".yith_ywraq_add_item_response-"+r).hide().addClass("hide").html(""),_(".yith_ywraq_add_item_product-response-"+r).show().removeClass("hide").html(t.message),_(".yith_ywraq_add_item_browse-list-"+r).show().removeClass("hide"),e.parent().hide().removeClass("show").addClass("addedd"),_(".add-to-quote-"+r).attr("data-variation",t.variations),l.length&&(l.ywraq_refresh_widget(),l=_(document).find(".widget_ywraq_list_quote, .widget_ywraq_mini_list_quote")),h()),_(document).trigger("yith_wwraq_added_successfully",[t,r])):"false"==t.result&&(_(".yith_ywraq_add_item_response-"+r).show().removeClass("hide").html(t.message),_(document).trigger("yith_wwraq_error_while_adding")),w=!1}})):!1}_('<input type="submit">').hide().appendTo(n).click().remove()}}),_.fn.serializefiles=function(){var t=_(this),a=new FormData,t=_(t).serializeArray(),n=!1;return _.each(t,function(t,e){"quantity"!=e.name&&!e.name.indexOf("quantity")||(n=!0),"add-to-cart"!=e.name&&a.append(e.name,encodeURIComponent(e.value))}),!1===n&&a.append("quantity",1),a},_.fn.ywraq_refresh_widget=function(){l.each(function(){var e=_(this),t=e.find(".yith-ywraq-list-wrapper"),a=e.find(".yith-ywraq-list"),n=e.find(".yith-ywraq-list-widget-wrapper").data("instance");_.ajax({type:"POST",url:ywraq_frontend.ajaxurl.toString().replace("%%endpoint%%","yith_ywraq_action"),data:n+"&ywraq_action=refresh_quote_list&action=yith_ywraq_action&context=frontend",beforeSend:function(){a.css("opacity",.5),e.hasClass("widget_ywraq_list_quote")&&t.prepend(' <img src="'+u+'" class="ywraq-loader">')},complete:function(){e.hasClass("widget_ywraq_list_quote")&&t.next().remove(),a.css("opacity",1)},success:function(t){e.hasClass("widget_ywraq_mini_list_quote")?e.find(".yith-ywraq-list-widget-wrapper").html(t.mini):e.find(".yith-ywraq-list-widget-wrapper").html(t.large),_(document).trigger("yith_ywraq_widget_refreshed")}})})},_(document).on("click",".yith-ywraq-item-remove",function(t){t.preventDefault();var e=_(this),a=e.data("remove-item"),t=e.parents(".ywraq-wrapper"),n=(_("#yith-ywraq-form"),t.find(".wpcf7-form"),t.find(".gform_wrapper"),e.data("product_id")),t="context=frontend&action=yith_ywraq_action&ywraq_action=remove_item&key="+e.data("remove-item")+"&wp_nonce="+e.data("wp_nonce")+"&product_id="+n;_.ajax({type:"POST",url:ywraq_frontend.ajaxurl.toString().replace("%%endpoint%%","yith_ywraq_action"),dataType:"json",data:t,beforeSend:function(){e.find(".ajax-loading").css("visibility","visible")},complete:function(){e.siblings(".ajax-loading").css("visibility","hidden")},success:function(t){var e;1===t?((t=_("[data-remove-item='"+a+"']").parents(".cart_item")).hasClass("composite-parent")&&(e=t.data("composite-id"),_("[data-composite-id='"+e+"']").remove()),t.hasClass("yith-wapo-parent")&&(e=t.find(".product-remove a").data("remove-item"),_("[data-wapo_parent_key='"+e+"']").remove()),t.hasClass("ywcp_component_item")&&_("tr.ywcp_component_child_item").filter("[data-wcpkey='"+a+"']").remove(),t.hasClass("bundle-parent")&&(e=t.data("bundle-key"),_("[data-bundle-key='"+e+"']").remove()),1===_(".cart_item").length?window.location.reload():_("#yith-ywrq-table-list .raq-totals-row").length?_.ajax({type:"POST",url:ywraq_frontend.ajaxurl.toString().replace("%%endpoint%%","yith_ywraq_action"),data:"&ywraq_action=refresh_quote_totals&action=yith_ywraq_action&context=frontend",beforeSend:function(){},complete:function(){},success:function(t){t&&(t=t.response.replace(/<div class="ywraq-before-form">(.*)<form id="yith-ywraq-form"/gms,'<form id="yith-ywraq-form"'),_("#yith-ywraq-form").replaceWith(_(t)))}}):t.remove(),l.length?(l.ywraq_refresh_widget(),l=_(document).find(ywraq_frontend.widget_classes)):(l=_(document).find(ywraq_frontend.widget_classes)).ywraq_refresh_widget(),h(),_(document).find('.hide-when-removed[data-product_id="'+n+'"]').hide(),_(document).find('.yith-ywraq-add-button[data-product_id="'+n+'"]').show(),_(document).trigger("yith_wwraq_removed_successfully")):_(document).trigger("yith_wwraq_error_while_removing")}})}),_(".yith-request-a-quote-page").keydown(function(t){if(13==t.keyCode&&"TEXTAREA"!=t.target.nodeName)return t.preventDefault(),_(t.target).hasClass("qty")&&(_(t.target).blur(),_(t.target).change()),!1}),_(".ywraq_clean_list").on("click",function(t){t.preventDefault();var e=_(this);e.block(d),_.ajax({type:"POST",url:ywraq_frontend.ajaxurl.toString().replace("%%endpoint%%","yith_ywraq_action"),dataType:"json",data:"ywraq_action=clean_quote",success:function(t){t=t.response;_(".ywraq-wrapper").parent().html(t),l.ywraq_refresh_widget(),h(),e.unblock()}})}),_(document).find("#ywraq-request-a-quote-on-cart")),c=0<r.length?"yes":"no",p=("yes"==c&&"undefined"!=typeof Backbone&&"undefined"!=typeof Backbone.Radio&&Backbone.Radio.channel("form").on("after:loaded",function(t){t.addExtra("sentFromCart","yes")}),_(document).on("click","#ywraq_cart_quote",function(t){t.preventDefault(),r.dialog({width:750,modal:!0,dialogClass:"ywraq-quote-on-cart"});t=_(document).find("#ywraq-request-a-quote-on-cart form");t.length&&!t.find('input[name="sent_from_cart"]').length&&t.append('<input type="hidden" name="sent_from_cart" value="yes" >'),_(document).trigger("ywraq_request_a_quote_on_cart_created")}),_(".wpcf7-submit").closest(".wpcf7"));function h(){_(document).find(".ywraq_number_items").each(function(){var e=_(this),t=e.data("show_url"),a=e.data("item_name"),n=e.data("item_plural_name");_.ajax({type:"POST",url:ywraq_frontend.ajaxurl.toString().replace("%%endpoint%%","yith_ywraq_action"),data:"ywraq_action=refresh_number_items&action=yith_ywraq_action&context=frontend&item_name="+a+"&item_plural_name="+n+"&show_url="+t,success:function(t){e.replaceWith(t),_(document).trigger("ywraq_number_items_refreshed")}})})}if(0<p.length&&_(document).find(".wpcf7").each(function(){var t=_(this);t.find('input[name="_wpcf7"]').val()==ywraq_frontend.cform7_id&&(t.on("wpcf7mailsent",function(){_.ajax({type:"POST",url:ywraq_frontend.ajaxurl.toString().replace("%%endpoint%%","yith_ywraq_order_action"),dataType:"json",data:{lang:ywraq_frontend.current_lang,action:"yith_ywraq_order_action",current_user_id:ywraq_frontend.current_user_id,context:"frontend",ywraq_order_action:"mail_sent_order_created",sent_from_cart:c},success:function(t){""!=t.rqa_url&&(window.location.href=t.rqa_url)}})}),document.addEventListener("wpcf7mailsent",function(t){window.location.href=ywraq_frontend.rqa_url},!1))}),_("#yith-ywrq-table-list").on("change",".qty",function(){var t=_(this).val(),e=_(this).attr("max");""!==e&&(e=parseInt(e))<t&&_(this).val(e),t<=0&&_(this).val(1)}),_(document).bind("gform_confirmation_loaded",function(t,e){ywraq_frontend.gf_id==e&&(window.location.href=ywraq_frontend.rqa_url)}),"undefined"!=typeof ywraq_frontend.wpforms&&(p=_("#wpforms-form-"+ywraq_frontend.wpforms),0<_(p).length)&&_(p).on("wpformsAjaxSubmitSuccess",function(t){_.ajax({type:"POST",url:ywraq_frontend.ajaxurl.toString().replace("%%endpoint%%","yith_ywraq_order_action"),dataType:"json",data:{lang:ywraq_frontend.current_lang,action:"yith_ywraq_order_action",current_user_id:ywraq_frontend.current_user_id,context:"frontend",ywraq_order_action:"mail_sent_order_created"},success:function(t){""!=t.rqa_url&&(window.location.href=t.rqa_url)}})}),"undefined"!=typeof ywraq_frontend.ninja_forms&&"undefined"!=typeof Marionette&&(n=Marionette.Object.extend({initialize:function(){this.listenTo(Backbone.Radio.channel("forms"),"submit:response",this.actionSubmit)},actionSubmit:function(t){ywraq_frontend.ninja_forms===t.data.form_id&&_.ajax({type:"POST",url:ywraq_frontend.ajaxurl.toString().replace("%%endpoint%%","yith_ywraq_order_action"),dataType:"json",data:{lang:ywraq_frontend.current_lang,action:"yith_ywraq_order_action",current_user_id:ywraq_frontend.current_user_id,context:"frontend",ywraq_order_action:"mail_sent_order_created"},success:function(t){""!=t.rqa_url&&(window.location.href=t.rqa_url)}})}}),jQuery(document).ready(function(t){new n})),ywraq_frontend.auto_update_cart_on_quantity_change&&_(document).on("click, change","#yith-ywrq-table-list .product-quantity input",function(t){var e,a,n=_(this),o=n.attr("name"),r=n.closest(".quantity");r.block(d),n=void 0===o?(o=(e=n.closest(".product-quantity").find(".input-text.qty")).attr("name"),e=e.val(),a=o.match(/[^[\]]+(?=])/g),n.hasClass("plus")&&e++,n.hasClass("minus")&&e--,"context=frontend&action=yith_ywraq_action&ywraq_action=update_item_quantity&quantity="+e+"&key="+a[0]):(e=n.val(),a=o.match(/[^[\]]+(?=])/g),o=n.prop("min"),"context=frontend&action=yith_ywraq_action&ywraq_action=update_item_quantity&quantity="+(e=Number(e)<Number(o)?o:e)+"&key="+a[0]),_.ajax({type:"POST",url:ywraq_frontend.ajaxurl.toString().replace("%%endpoint%%","yith_ywraq_action"),dataType:"json",data:n,success:function(t){_.post(i,function(t){""!=t&&(t=_("<div></div>").html(t).find("#yith-ywrq-table-list"),_("#yith-ywrq-table-list").html(t.html()),_(document).trigger("ywraq_table_reloaded"),s(),l.length)&&(l.ywraq_refresh_widget(),l=_(document).find(".widget_ywraq_list_quote, .widget_ywraq_mini_list_quote")),r.unblock()})}})}),0<t.length&&1==ywraq_frontend.lock_shipping&&(t.find("input").attr("readonly","readonly"),t.find("select").attr("readonly","readonly"),_(".woocommerce-checkout #shipping_country_field").css("pointer-events","none"),_(".woocommerce-checkout #shipping_state_field").css("pointer-events","none")),0<e.length&&1==ywraq_frontend.lock_billing&&(e.find("input").attr("readonly","readonly"),e.find("select").attr("readonly","readonly"),_(".woocommerce-checkout #billing_country_field").css("pointer-events","none"),_(".woocommerce-checkout #billing_state_field").css("pointer-events","none")),l.ywraq_refresh_widget(),h(),_(document).on("click",".woocommerce-checkout #ywraq_checkout_quote_button",function(t){_(document).find('input[name="payment_method"]').val("yith-request-a-quote"),_("#ywraq_checkout_quote").val(!0),"A"===_(this).prop("tagName")&&(t.preventDefault(),_(this).closest("form.woocommerce-checkout").submit())}),_(document).find(".theme-yith-proteo .ywraq-wrapper .woocommerce-message").removeAttr("role"),1==ywraq_frontend.enable_ajax_loading&&(o=function(){var t=_(document).find(".yith-ywraq-add-to-quote"),a=[];return 0!==t.length&&(_.each(t,function(){var t=_(this).closest(".variations_form "),e=_(this).find(".yith-ywraq-add-button").data("product_id");void 0===t&&a.push(e)}),a)}())){p=o;p={fragments:o,ywraq_action:"update_ywraq_fragments",action:"yith_ywraq_action",context:"frontend"},_.ajax({type:"POST",url:ywraq_frontend.ajaxurl.toString().replace("%%endpoint%%","yith_ywraq_action"),data:p,success:function(t){var n;"undefined"!=typeof t.error?console.log(t.error):!0===t.success&&(n=t.fragments,0<(t=_(document).find(".yith-ywraq-add-to-quote")).length)&&_.each(t,function(){var t=_(this),e=t.data("variation"),a=t.find(".yith-ywraq-add-button").data("product_id");void 0===e&&"undefined"!=typeof n[a]&&t.replaceWith(n[a])})}})}"undefined"!=typeof window.ontouchstart&&ywraq_frontend.mini_list_widget_popup&&(_(document).on("click",".ywraq-mobile-quote.widget_ywraq_mini_list_quote a.raq_label",function(t){if(t.preventDefault(),void 0!==_(this).data("open"))return window.location.href=_(this).attr("href");_(".widget_ywraq_mini_list_quote").addClass("ywraq-mobile-opened"),_("body").addClass("ywraq-mobile-block-body")}),_(document).on("click",".ywraq-mobile-opened .yith-ywraq-list-wrapper .close",function(t){_(".widget_ywraq_mini_list_quote").removeClass("ywraq-mobile-opened"),_("body").removeClass("ywraq-mobile-block-body")})),0<a.length&&(window.addEventListener("resize",s),s());t=function(){window.innerWidth<=768&&_(document).find(".widget_ywraq_mini_list_quote").addClass("ywraq-mobile-quote")};0<_(document).find(".widget_ywraq_mini_list_quote a.raq_label").length&&(window.addEventListener("resize",t),t()),_("#ywraq-list-to-pdf").on("click",function(t){t.preventDefault();t={ywraq_action:"get_pdf_from_list",action:"yith_ywraq_action",context:"frontend",_wpnonce:_(this).data("nonce")};_.ajax({type:"POST",url:ywraq_frontend.ajaxurl.toString().replace("%%endpoint%%","yith_ywraq_action"),data:t,dataType:"json",success:function(t){t&&t.pdf&&window.open(t.pdf,"_blank")}})})});
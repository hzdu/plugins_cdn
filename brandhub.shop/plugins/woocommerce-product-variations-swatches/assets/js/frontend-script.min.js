function viwpvs_frontend_init(){jQuery(".vi_wpvs_variation_form:not(.vi_wpvs_variation_form_init)").each(function(){jQuery(this).addClass("vi_wpvs_variation_form_init").viwpvs_woo_product_variation_swatches()}),jQuery(".variations_form:not(.vi_wpvs_variation_form),.variations_form:not(.vi_wpvs_variation_form_init)").each(function(){jQuery(this).addClass("vi_wpvs_variation_form vi_wpvs_variation_form_init").viwpvs_woo_product_variation_swatches()})}jQuery(window).on("elementor/frontend/init",()=>{"use strict";viwpvs_frontend_init()}),jQuery(document).ready(function(i){"use strict";jQuery(document).on("click",".vi-wpvs-variation-style",function(i){jQuery(".vi-wpvs-variation-wrap-option-available").remove(),jQuery(".vi-wpvs-variation-wrap-option.vi-wpvs-variation-wrap-option-show").removeClass("vi-wpvs-variation-wrap-option-show"),i.preventDefault(),i.stopPropagation(),i.stopImmediatePropagation()}),jQuery(document).on("click","body",function(i){jQuery(".vi-wpvs-variation-wrap-option-available").remove(),jQuery(".vi-wpvs-variation-wrap-option.vi-wpvs-variation-wrap-option-show").removeClass("vi-wpvs-variation-wrap-option-show")}),jQuery(document).on("click",".vi-wpvs-variation-wrap-option-available .vi-wpvs-option-wrap",function(i){if(i.preventDefault(),i.stopPropagation(),i.stopImmediatePropagation(),jQuery(this).hasClass("vi-wpvs-option-wrap-disable"))return!1;let t=jQuery(".vi-wpvs-variation-wrap-option-available .vi-wpvs-option-wrap").index(jQuery(this));jQuery(".vi-wpvs-variation-wrap-option.vi-wpvs-variation-wrap-option-show").removeClass("vi-wpvs-variation-wrap-option-show").find(".vi-wpvs-option-wrap").eq(t).trigger("click"),jQuery(".vi-wpvs-variation-wrap-option-available").remove()}),jQuery(document).on("mouseenter",".vi-wpvs-variation-wrap-option-available .vi-wpvs-option-wrap",function(i){jQuery(this).hasClass("vi-wpvs-option-wrap-selected")||jQuery(this).hasClass("vi-wpvs-option-wrap-disable")||jQuery(this).hasClass("vi-wpvs-product-link")||jQuery(this).removeClass("vi-wpvs-option-wrap-default").addClass("vi-wpvs-option-wrap-hover")}),jQuery(document).on("mouseleave",".vi-wpvs-variation-wrap-option-available .vi-wpvs-option-wrap",function(i){jQuery(this).hasClass("vi-wpvs-option-wrap-selected")||jQuery(this).hasClass("vi-wpvs-option-wrap-disable")||jQuery(this).removeClass("vi-wpvs-option-wrap-hover").addClass("vi-wpvs-option-wrap-default")}),jQuery(document.body).on("vi_wpvs_variation_form",function(){jQuery(".vi_wpvs_variation_form:not(.vi_wpvs_variation_form_init)").each(function(){jQuery(this).addClass("vi_wpvs_variation_form_init").viwpvs_woo_product_variation_swatches()})}),viwpvs_frontend_init(),jQuery(document).on("woodmart-quick-view-displayed",function(i,t,a){viwpvs_frontend_init()}),jQuery(document).on("ajaxComplete",function(i,t,a){return viwpvs_frontend_init(),!1})}),jQuery(window).on("load",function(){"use strict";viwpvs_frontend_init()});let viwpvs_frontend=function(i){this.form=i,this.variationData=i.data("product_variations"),this.swatch_image_src="",this.swatch_image_data="",this.init()};function viwpvs_to_string(i){return i?i.toString():""}function viwpvs_show_selected_item(i){if(i.length>0&&i.data("show_selected_item")&&i.find(".vi-wpvs-option-wrap-selected").length){let t=i.parent().parent().find(".vi-wpvs-label-selected");if(t.length)t.html(i.find(".vi-wpvs-option-wrap-selected").data("attribute_label")).removeClass("vi-wpvs-hidden");else{let t=i.parent().parent().find(".label");t.length||(t=i.parent().parent().find("label")),t.length&&t.css({display:"inline-flex",flexWrap:"wrap",alignItems:"center"}).append('<span class="vi-wpvs-label-selected">'+i.find(".vi-wpvs-option-wrap-selected").data("attribute_label")+"</span>")}}}viwpvs_frontend.prototype.init=function(){let i,t=this,a=this.form;function e(t){if("variation_image"===t.data("change_product_image")||"attribute_image"===t.data("change_product_image"))if(a.is(".vi_wpvs_loop_variation_form")){if(t.data("loop_source")){let i=t.data("loop_source"),e=i;t.data("loop_data")&&t.data("loop_data").hasOwnProperty("srcset")&&t.data("loop_data").srcset&&(e=t.data("loop_data").srcset);let o=viwpvs_get_variations.prototype.get_img_product(a,!0);if(o)return jQuery(o).parent().is("picture")&&jQuery(o).parent().find("source").each(function(i,t){jQuery(t).attr({srcset:e})}),setTimeout(function(){o.attr({src:i,srcset:e})},1),!1}}else if("function"==typeof a.wc_variations_image_update&&t.data("loop_data"))return i&&clearTimeout(i),i=setTimeout(function(){a.wc_variations_image_update({image:t.data("loop_data")}),"undefined"!=typeof woodmartThemeModule&&woodmartThemeModule.$document.trigger("wdShowVariationNotQuickView"),a.trigger("viwpvs_main_image_changed_by_attribute",[t])},10),!1}this.variationData&&(!a.hasClass("vi_wpvs_loop_variation_form")||a.hasClass("vi_wpvs_loop_variation_form")&&a.data("vpvs_find_variation"))&&a.find(".vi-wpvs-option-wrap.vi-wpvs-option-wrap-selected").length===a.find(".vi-wpvs-select-attribute select option:selected").length&&(a.addClass("vi_wpvs_variation_form_has_selected"),a.on("hide_variation viwpvs_hide_variation",function(i){a.hasClass("vi_wpvs_variation_form_has_selected")&&a.find(".vi-wpvs-option-wrap.vi-wpvs-option-wrap-selected").length===a.find(".vi-wpvs-select-attribute select option:selected").length&&(a.removeClass("vi_wpvs_variation_form_has_selected"),t.hide_variation())})),a.find(".vi-wpvs-variation-wrap-wrap").data("hide_outofstock")||a.on("hide_variation viwpvs_hide_variation",function(i){a.find(".vi-wpvs-variation-wrap-wrap").each(function(i,t){let a=jQuery(t).find("select").val(),e=jQuery(t).find(".vi-wpvs-option-wrap.vi-wpvs-option-wrap-selected").data("attribute_value");e&&!a&&jQuery(t).find('select option[value="'+e+'"]').length&&jQuery(t).find("select").val(e).trigger("change")})}),a.on("woocommerce_update_variation_values",function(){t.select_variation_item()}),a.on("check_variations",function(i){setTimeout(function(){if(void 0!==i.data&&void 0!==i.data.variationForm){let t=i.data.variationForm.getChosenAttributes();if(i.data.variationForm.useAjax&&t.count>0&&t.chosenCount>0)for(let i in t.data)if(t.data.hasOwnProperty(i)&&t.data[i]){let t=a.find(`.vi-wpvs-variation-wrap-wrap[data-wpvs_attribute_name="${i}"]`);e(t.find(".vi-wpvs-option-wrap-selected")),viwpvs_show_selected_item(t)}}},10)}),a.on("found_variation",function(t,a){let e=!0;a&&a.hasOwnProperty("viwpvs_no_image")&&a.viwpvs_no_image&&(e=!1),e&&i&&clearTimeout(i)}),a.on("woocommerce_variation_select_change",function(){let i=a.find(".vi-wpvs-option-wrap.vi-wpvs-option-wrap-selected");i.length>0&&i.each(function(i,t){e(jQuery(t))})}),t.design_variation_item(),a.find(".vi-wpvs-variation-wrap-select-wrap").length&&a.find(".vi-wpvs-variation-wrap-select-wrap").each(function(i,t){let a,e,o=jQuery(t),s=o.closest(".vi-wpvs-variation-wrap");o.parent().parent().parent().css({width:"100%"}),(a=o.find(".vi-wpvs-variation-wrap-option")).attr("data-offset_height")||a.attr("data-offset_height",a.outerHeight()).removeClass("vi-wpvs-select-hidden").addClass("vi-wpvs-hidden"),e=o.find(".vi-wpvs-variation-button-select"),a.find(".vi-wpvs-option-wrap-selected").length&&e.find("span").html(a.find(".vi-wpvs-option-wrap-selected .vi-wpvs-option-select").html()),e.on("click",function(i){if(i.preventDefault(),i.stopPropagation(),a.hasClass("vi-wpvs-variation-wrap-option-show"))jQuery(".vi-wpvs-variation-wrap-option-available").remove(),a.removeClass("vi-wpvs-variation-wrap-option-show");else{let i,t,e,o;i=parseFloat(a.attr("data-offset_height")),t=jQuery(window).scrollTop(),e=jQuery(window).outerHeight(),o=jQuery(this).offset().top-t,jQuery(".vi-wpvs-variation-wrap-option.vi-wpvs-variation-wrap-option-show").removeClass("vi-wpvs-variation-wrap-option-show"),a.addClass("vi-wpvs-variation-wrap-option-show"),jQuery(".vi-wpvs-variation-wrap-option-available").remove();let r=s.clone();r.find(".vi-wpvs-variation-button-select").remove(),r.find(".vi-wpvs-variation-wrap-option").removeClass("vi-wpvs-hidden vi-wpvs-variation-wrap-option-show"),r.addClass("vi-wpvs-variation-wrap-option-available").css({width:jQuery(this).outerWidth(),left:jQuery(this).offset().left}),t>o||t<i||e>o+i+40?(r.toggleClass("vi-wpvs-variation-wrap-select-bottom"),r.css({top:jQuery(this).offset().top+jQuery(this).outerHeight()})):(r.toggleClass("vi-wpvs-variation-wrap-select-top"),r.css({top:jQuery(this).offset().top-a.outerHeight()})),jQuery("body").append(r)}})}),t.design_variation_slider(a),a.find(".vi-wpvs-option-wrap").each(function(i,e){let o,s,r,n,v;o=jQuery(e).closest(".vi-wpvs-variation-wrap-wrap"),s=o.find("select"),v=o.data("swatch_type"),s.find("option").removeClass("vi-wpvs-option-disabled"),jQuery(e).on("mouseenter",function(){jQuery(this).hasClass("vi-wpvs-option-wrap-selected")||jQuery(this).hasClass("vi-wpvs-option-wrap-disable")||jQuery(this).hasClass("vi-wpvs-product-link")||jQuery(this).removeClass("vi-wpvs-option-wrap-default").addClass("vi-wpvs-option-wrap-hover")}).on("mouseleave",function(){jQuery(this).hasClass("vi-wpvs-option-wrap-selected")||jQuery(this).hasClass("vi-wpvs-option-wrap-disable")||jQuery(this).removeClass("vi-wpvs-option-wrap-hover").addClass("vi-wpvs-option-wrap-default")}).on("click",function(i){t.swatch_image_data="",t.swatch_image_src="";let e=jQuery(this);return i.stopPropagation(),e.is(".vi-wpvs-product-link")?(location.href=e.data("product_link"),!1):e.hasClass("vi-wpvs-option-wrap-disable")?(i.preventDefault(),i.stopPropagation(),!1):(e.parent().hasClass("vi-wpvs-variation-wrap-radio")||(i.preventDefault(),i.stopPropagation()),jQuery(".vi-wpvs-variation-wrap-option").addClass("vi-wpvs-hidden"),a.find(".reset_variations").removeClass("vi-wpvs-hidden"),o.find(".vi-wpvs-option-wrap").removeClass("vi-wpvs-option-wrap-selected vi-wpvs-option-wrap-hover").addClass("vi-wpvs-option-wrap-default"),o.find(".vi-wpvs-variation-wrap").hasClass("vi-wpvs-variation-wrap-select")&&o.find(".vi-wpvs-variation-button-select >span ").html(e.find(".vi-wpvs-option-select").html()),e.find(".vi-wpvs-option-radio").length>0&&(o.find(".vi-wpvs-option-radio").prop("checked",!1),e.find(".vi-wpvs-option-radio").prop("checked",!0),e.removeClass("vi-wpvs-option-wrap-default").addClass("vi-wpvs-option-wrap-selected")),r=viwpvs_to_string(s.val()),(n=viwpvs_to_string(e.data("attribute_value")))!==r?(e.removeClass("vi-wpvs-option-wrap-default").addClass("vi-wpvs-option-wrap-selected"),s.val(n).trigger("change")):e.parent().hasClass("vi-wpvs-variation-wrap-radio")||(a.hasClass("vi_wpvs_loop_variation_form")?a.data("wpvs_double_click")?s.val("").trigger("change"):e.removeClass("vi-wpvs-option-wrap-default").addClass("vi-wpvs-option-wrap-selected"):o.data("wpvs_double_click")?s.val("").trigger("change"):e.removeClass("vi-wpvs-option-wrap-default").addClass("vi-wpvs-option-wrap-selected")),void i.stopPropagation())})}),a.find("select:not(.vi-wpvs-select-attribute):not(.vi-wpvs-variation-style-select)").on("change",function(){setTimeout(function(){t.select_variation_item()},500)}),a.on("click",".reset_variations",function(){t.select_variation_item(),t.hide_variation()}),jQuery(document).trigger("viwpvs_init_swatches",[a])},viwpvs_frontend.prototype.design_variation_item=function(){let i=this.form;i.find(".vi-wpvs-variation-wrap-wrap").each(function(){let i=jQuery(this),t=i.parent().parent();i.parent().addClass("vi-wpvs-variation-style-content"),i.find(`div.vi-wpvs-select-attribute select[data-attribute_name="${i.data("wpvs_attribute_name")}"]`).addClass("vi-wpvs-select-attribute"),t.addClass(i.data("display_type")),i.data("wpvs_attr_title")||t.find(".label").addClass("vi-wpvs-hidden")}),i.find(".vi-wpvs-option.vi-wpvs-option-color").each(function(i,t){let a=jQuery(t).data("option_color");jQuery(t).css({background:a})}),i.find(".vi-wpvs-variation-wrap-wrap").removeClass("vi-wpvs-hidden")},viwpvs_frontend.prototype.design_variation_slider=function(i){let t=i.find(".vi-wpvs-variation-wrap-slider").closest(".vi-wpvs-variation-wrap-wrap");if(0===t.length)return!1;t.each(function(t,a){let e,o=jQuery(i).innerWidth(),s=jQuery(a).find(".vi-wpvs-variation-wrap").data("out_of_stock"),r=jQuery(a).find(".vi-wpvs-option-wrap").first().innerWidth(),n=jQuery(a).find(".vi-wpvs-option-wrap").length,v=jQuery(a).find(".vi-wpvs-option-wrap.vi-wpvs-option-wrap-selected").index();v=v>0?v:0,jQuery(a).closest(".vi-wpvs-variation-style").hasClass("vi-wpvs-variation-style-horizontal")&&jQuery(a).closest(".vi-wpvs-variation-style").hasClass("vi_wpvs_loop_variation_attr_name_enable")&&(o=80*o/100),e=Math.floor(o/(r+10)),n>e&&(-1===s.search("blur")?jQuery(a).flexslider({namespace:"vi-wpvs-slider-",selector:".vi-wpvs-variation-wrap-slider .vi-wpvs-option-wrap",animation:"slide",animationLoop:!1,startAt:v,itemWidth:r,itemMargin:5,controlNav:!1,maxItems:e,move:1,slideshow:!1,reverse:!1,touch:!0,start:function(i){i.last=n-this.maxItems,i.limit=(this.itemWidth+10)*i.last+10,i.animatingTo=i.currentSlide>i.last?0:i.animatingTo},before:function(i){(n=jQuery(a).find(".vi-wpvs-option-wrap:not(.vi-wpvs-option-wrap-disable)").length)>this.maxItems?(i.last=n-this.maxItems,i.limit=(this.itemWidth+10)*i.last+10,i.animatingTo=i.currentSlide>i.last?0:i.animatingTo):i.animatingTo=0}}):jQuery(a).flexslider({namespace:"vi-wpvs-slider-",selector:".vi-wpvs-variation-wrap-slider .vi-wpvs-option-wrap",animation:"slide",animationLoop:!1,startAt:v,itemWidth:r,itemMargin:5,controlNav:!1,maxItems:e,move:1,slideshow:!1,reverse:!1,touch:!0,start:function(i){i.last=n-this.maxItems,i.limit=(this.itemWidth+10)*i.last+10,i.animatingTo=i.currentSlide>i.last?0:i.animatingTo}}))})},viwpvs_frontend.prototype.select_variation_item=function(){let i=this.form,t=this.variationData;i.find(".vi-wpvs-label-selected").addClass("vi-wpvs-hidden"),i.find(".vi-wpvs-option-wrap-out-of-stock").removeClass("vi-wpvs-option-wrap-out-of-stock"),i.find(".vi-wpvs-option-wrap-backorders").removeClass("vi-wpvs-option-wrap-backorders"),i.find(".vi-wpvs-variation-wrap-wrap").each(function(a,e){let o=jQuery(this);if(o.data("blur_out_backorders")){let a="viwpvs_default"===o.data("swatch_type")?o.find(`select[name="${o.data("wpvs_attribute_name")}"]`):o.find("select.vi-wpvs-select-attribute"),e=viwpvs_to_string(a.data("attribute_name")),s=a.val();if(!o.hasClass("vi-wpvs-option-wrap-backorders-attribute-checked")){o.find(".vi-wpvs-variation-wrap").find(".vi-wpvs-option-wrap").each(function(){let i=jQuery(this),a=viwpvs_to_string(i.data("attribute_value"));if(a){let o=0,s=0;for(let i in t)if(t.hasOwnProperty(i)){let r=t[i];""===r.attributes[e]?(o++,r.hasOwnProperty("viwpvs_on_backorders")&&s++):null!==r.attributes&&void 0!==r.attributes&&viwpvs_to_string(r.attributes[e])===a&&(o++,r.hasOwnProperty("viwpvs_on_backorders")&&s++)}o===s&&i.addClass("vi-wpvs-option-wrap-backorders-attribute")}}),o.addClass("vi-wpvs-option-wrap-backorders-attribute-checked")}if(s)for(let a in t)if(t.hasOwnProperty(a)){let o=t[a];if(o.attributes[e]===s&&o.hasOwnProperty("viwpvs_on_backorders"))for(let a in o.attributes){let r=o.attributes[a];if(a!==e){i.find(`.vi-wpvs-variation-wrap[data-attribute="${a}"]`).find(".vi-wpvs-option-wrap").each(function(){let i=jQuery(this);if(!i.hasClass("vi-wpvs-option-wrap-backorders-attribute")&&!i.hasClass("vi-wpvs-option-wrap-backorders")&&viwpvs_to_string(i.data("attribute_value"))===r){let o=!0;for(let r in t)if(t.hasOwnProperty(r)){let n=t[r];if(n.attributes[e]===s&&n.attributes[a]===viwpvs_to_string(i.data("attribute_value"))&&!n.hasOwnProperty("viwpvs_on_backorders")){o=!1;break}}return o&&i.addClass("vi-wpvs-option-wrap-backorders"),!1}})}}}}if(o.data("hide_outofstock")){let i=jQuery(e).find("select option:not(.vi-wpvs-option-disabled)").map(function(){return jQuery(this).val()});jQuery(e).find(".vi-wpvs-option-wrap:not(.vi-wpvs-product-link)").each(function(t,a){let e=viwpvs_to_string(jQuery(a).data("attribute_value"));jQuery.inArray(e,i)>-1?jQuery(a).removeClass("vi-wpvs-option-wrap-disable"):jQuery(a).removeClass("vi-wpvs-option-wrap-selected").addClass("vi-wpvs-option-wrap-default vi-wpvs-option-wrap-disable")})}else{let a=jQuery(e).find("select option:not(.vi-wpvs-option-disabled)").map(function(){return jQuery(this).val()});if(jQuery(e).find(".vi-wpvs-option-wrap:not(.vi-wpvs-product-link)").each(function(i,t){let e=viwpvs_to_string(jQuery(t).data("attribute_value"));jQuery.inArray(e,a)>-1?jQuery(t).removeClass("vi-wpvs-hidden"):jQuery(t).removeClass("vi-wpvs-option-wrap-selected").addClass("vi-wpvs-option-wrap-default vi-wpvs-hidden")}),t){let a="viwpvs_default"===o.data("swatch_type")?o.find(`select[name="${o.data("wpvs_attribute_name")}"]`):o.find("select.vi-wpvs-select-attribute"),e=viwpvs_to_string(a.data("attribute_name")),s=a.val();if(!o.hasClass("vi-wpvs-option-wrap-out-of-stock-attribute-checked")){o.find(".vi-wpvs-variation-wrap").find(".vi-wpvs-option-wrap").each(function(){let i=jQuery(this),a=viwpvs_to_string(i.data("attribute_value"));if(a){let o=0,s=0;for(let i in t)if(t.hasOwnProperty(i)){let r=t[i];null!==r.attributes&&void 0!==r.attributes&&(""===r.attributes[e]?(o++,(r.hasOwnProperty("is_purchasable")&&!r.is_purchasable||r.hasOwnProperty("is_in_stock")&&!r.is_in_stock||r.hasOwnProperty("viwpvs_not_available"))&&s++):viwpvs_to_string(r.attributes[e])===a&&(o++,r.hasOwnProperty("viwpvs_not_available")&&s++))}o===s&&i.addClass("vi-wpvs-option-wrap-out-of-stock-attribute")}}),o.addClass("vi-wpvs-option-wrap-out-of-stock-attribute-checked")}if(s)for(let a in t)if(t.hasOwnProperty(a)){let o=t[a];if(o.attributes[e]===s&&o.hasOwnProperty("viwpvs_not_available"))for(let a in o.attributes){let r=o.attributes[a];if(a!==e){i.find(`.vi-wpvs-variation-wrap[data-attribute="${a}"]`).find(".vi-wpvs-option-wrap:not(.vi-wpvs-hidden)").each(function(){let i=jQuery(this);if(!i.hasClass("vi-wpvs-option-wrap-out-of-stock-attribute")&&!i.hasClass("vi-wpvs-option-wrap-out-of-stock")&&viwpvs_to_string(i.data("attribute_value"))===r){let o=!0;for(let r in t)if(t.hasOwnProperty(r)){let n=t[r];if(n.attributes[e]===s&&n.attributes[a]===viwpvs_to_string(i.data("attribute_value"))&&!n.hasOwnProperty("viwpvs_not_available")){o=!1;break}}return o&&i.addClass("vi-wpvs-option-wrap-out-of-stock"),!1}})}}}}}viwpvs_show_selected_item(jQuery(e))})},viwpvs_frontend.prototype.hide_variation=function(){let i=this.form;i.find(".reset_variations").addClass("vi-wpvs-hidden"),i.find(".vi-wpvs-option-wrap").removeClass("vi-wpvs-option-wrap-selected vi-wpvs-option-wrap-out-of-stock").addClass("vi-wpvs-option-wrap-default"),i.find(".vi-wpvs-option-radio").prop("checked",!1),i.find(".vi-wpvs-variation-wrap-option").addClass("vi-wpvs-hidden"),i.find(".vi-wpvs-variation-button-select >span ").html(i.find(".vi-wpvs-option-select:first-child").html()),i.find(".vi-wpvs-variation-style .vi-wpvs-label-selected").addClass("vi-wpvs-hidden")},jQuery.fn.viwpvs_woo_product_variation_swatches=function(){return new viwpvs_frontend(this),this};
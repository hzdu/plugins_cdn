(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d22d025"],{f654:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"wbs-content"},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:!t.isLoaded,expression:"!isLoaded"}],staticClass:"wbs-content-inner",class:{"wb-page-loaded":t.isLoaded}},[e("div",{staticClass:"wbs-main"},[t.isLoaded?e("table",{staticClass:"wbs-form-table"},[e("tbody",[e("tr",[e("th",{staticClass:"row w8em"},[t._v("显示名称")]),e("td",[e("el-input",{staticClass:"wbs-input",attrs:{size:"small"},model:{value:t.opt.name,callback:function(s){t.$set(t.opt,"name",s)},expression:"opt.name"}})],1)])]),t.cnf.multiple?e("tbody",t._l(t.opt.data,(function(s,a){return e("tr",{key:a},[e("th",[t._v(" "+t._s(t.cnf.title+" "+(a+1))+" ")]),e("td",[t._l(Object.keys(s),(function(i,l){return e("div",{key:i},["img"==i?e("wbs-upload-box",{attrs:{url:s[i]},on:{"get-file":function(t){s[i]=t}}}):e("el-input","nickname"==i?{class:{mt:l>0},attrs:{size:"small",placeholder:"昵称"},model:{value:s[i],callback:function(e){t.$set(s,i,e)},expression:"r[key]"}}:"label"==i?{class:{mt:l>0},attrs:{size:"small",placeholder:"备注"},model:{value:s[i],callback:function(e){t.$set(s,i,e)},expression:"r[key]"}}:{class:{mt:l>0},attrs:{size:"small",placeholder:t.cnf.placeholder?t.cnf.placeholder:t.cnf.title+" "+(a+1)},model:{value:s[i],callback:function(e){t.$set(s,i,e)},expression:"r[key]"}})],1)})),t.opt.data.length>1?e("div",{staticClass:"mt align-right",staticStyle:{position:"relative"}},[e("span",{staticClass:"link",staticStyle:{position:"absolute",right:"-20px",bottom:"10px"},on:{click:function(s){return t.removeItem(a)}}},[e("i",{staticClass:"el-icon-delete"})])]):t._e()],2)])})),0):t._e(),t.cnf.form_fields?e("tbody",[e("tr",[e("th",[t._v("咨询类型")]),e("td",[e("wbs-tags-module",{attrs:{tags:t._f("join")(t.opt.subject_type)},on:{"set-tags":function(s){t.opt.subject_type=s.split(",")}}})],1)]),e("tr",[e("th",[t._v("联系方式")]),e("td",[e("el-checkbox-group",{model:{value:t.opt.form_contact_ways,callback:function(s){t.$set(t.opt,"form_contact_ways",s)},expression:"opt.form_contact_ways"}},t._l(t.cnf.form_contact_way,(function(s,a){return e("el-checkbox",{key:a,attrs:{label:a}},[e("span",[t._v(t._s(s))])])})),1),e("div",{staticClass:"description mt"},[t._v("* 请至少选择一种联系方式")])],1)]),e("tr",[e("th",[t._v("提交成功提示语")]),e("td",[e("el-input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:4},placeholder:"输入自动回复的内容。"},model:{value:t.opt.auto_reply_msg,callback:function(s){t.$set(t.opt,"auto_reply_msg",s)},expression:"opt.auto_reply_msg"}})],1)])]):t._e(),t.opt.captcha?e("tbody",[e("tr",[e("th",[t._v("验证码方式")]),e("td",{staticClass:"info"},[e("el-radio-group",{model:{value:t.opt.captcha.type,callback:function(s){t.$set(t.opt.captcha,"type",s)},expression:"opt.captcha.type"}},[e("el-radio",{attrs:{label:"none"}},[e("span",[t._v("无")])]),e("el-radio",{attrs:{label:"base"}},[e("span",[t._v("一般验证码")])]),e("el-radio",{attrs:{label:"google"}},[e("span",[t._v("谷歌reCAPTCHA v3")])])],1),"google"==t.opt.captcha.type?e("div",{staticClass:"with-sub-form-table mt"},[e("table",{staticClass:"wbs-form-table-sub"},[e("tr",[e("th",{staticClass:"w6em"},[t._v("网站秘钥")]),e("td",[e("el-input",{attrs:{size:"small"},model:{value:t.opt.captcha.google.public,callback:function(s){t.$set(t.opt.captcha.google,"public",s)},expression:"opt.captcha.google.public"}})],1)]),e("tr",[e("th",[t._v("通讯秘钥")]),e("td",[e("el-input",{attrs:{size:"small"},model:{value:t.opt.captcha.google.private,callback:function(s){t.$set(t.opt.captcha.google,"private",s)},expression:"opt.captcha.google.private"}})],1)]),e("tr",[e("th",[t._v("分数阈值")]),e("td",{staticClass:"info"},[e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.opt.captcha.google.score,expression:"opt.captcha.google.score"}],staticClass:"ib",attrs:{type:"range",step:".1",max:"1",min:"0.1"},domProps:{value:t.opt.captcha.google.score},on:{__r:function(s){return t.$set(t.opt.captcha.google,"score",s.target.value)}}}),e("span",{staticClass:"ib wbs-range-val ml"},[t._v(t._s(t.opt.captcha.google.score))])])])])])]):t._e(),"google"==t.opt.captcha.type?e("div",{staticClass:"description mt"},[t._v(" 注：要启用谷歌reCAPTCHA验证注册，请参照"),e("a",{attrs:{href:"https://www.wbolt.com/how-to-setup-google-recaptcha-v3-recaptcha.html",target:"_blank"}},[t._v("谷歌reCAPTCHA v3申请及配置教程")]),t._v("。 ")]):t._e()],1)])]):t._e(),t.opt.notice?e("tbody",[e("tr",[e("th",{staticClass:"row"},[t._v("留言方式")]),e("td",{staticClass:"info"},[e("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},model:{value:t.opt.need_login,callback:function(s){t.$set(t.opt,"need_login",s)},expression:"opt.need_login"}}),e("span",{staticClass:"ml"},[t._v(t._s(1==t.opt.need_login?"已开启需要登录留言":"无登录访客可留言"))])],1)]),"1"==t.opt.need_login?e("tr",[e("th",{staticClass:"row"},[t._v("登录链接")]),e("td",[e("el-input",{attrs:{size:"small",placeholder:"默认为:"+t.login_url},model:{value:t.opt.login_url,callback:function(s){t.$set(t.opt,"login_url",s)},expression:"opt.login_url"}}),e("p",{staticClass:"description"},[t._v("* 若无改写登录链接，留空使用默认即可。")])],1)]):t._e(),e("tr",[e("th",[t._v("留言通知")]),e("td",{staticClass:"info"},[e("el-checkbox-group",{model:{value:t.opt.notice,callback:function(s){t.$set(t.opt,"notice",s)},expression:"opt.notice"}},[e("el-checkbox",{attrs:{label:"mail"}},[e("span",[t._v("邮件通知")])]),e("el-checkbox",{attrs:{label:"sms"}},[e("span",[t._v("短信通知")])])],1),t.opt.notice.length?e("NoticeOptions",{attrs:{opt:t.opt,cnf:t.cnf}}):t._e()],1)])]):t._e()]):t._e(),t.cnf.multiple&&t.opt.data.length<t.maxItem?e("div",{staticClass:"align-right"},[e("el-button",{attrs:{plain:"",size:"mini",icon:"el-icon-circle-plus"},on:{click:t.pushItem}},[t._v("添加")])],1):t._e(),e("wb-prompt",{directives:[{name:"show",rawName:"v-show",value:t.isLoaded,expression:"isLoaded"}],staticClass:"mt"})],1),t.isPro?t._e():e("wbs-more-sources")],1),e("div",{staticClass:"wbs-footer"},[e("div",{staticClass:"wbsf-inner"},[e("el-button",{attrs:{size:"medium",plain:""},on:{click:function(s){return t.$router.push("/setting-base")}}},[t._v("取消")]),e("el-button",{attrs:{size:"medium",type:"primary"},on:{click:function(s){return t.updateData()}}},[t._v(" 保存 ")])],1)])])},i=[],l=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("label",{staticClass:"wb-tags-ctrl"},[t.taglist.length?e("div",{staticClass:"tag-items"},t._l(t.taglist,(function(s,a){return e("div",{key:a,staticClass:"tag-item"},[e("span",{staticClass:"vam ib",domProps:{innerHTML:t._s(t.displayFormat(s))}}),e("a",{staticClass:"del",attrs:{"data-del-val":s},on:{click:function(s){return t.delItem(a)}}})])})),0):t._e(),e("input",{directives:[{name:"model",rawName:"v-model",value:t.cur_input,expression:"cur_input"}],staticClass:"wb-tag-input",attrs:{type:"text",placeholder:"输入选项值, 回车确认 *"},domProps:{value:t.cur_input},on:{keyup:t.wbTagInput,input:function(s){s.target.composing||(t.cur_input=s.target.value)}}})])},o=[],n={name:"wbsTags",props:{tags:String,format:String},data(){return{cur_input:"",taglist:[],keycode:null}},created(){this.taglist=this.tags?this.tags.split(","):[]},methods:{wbTagInput(t){const s=this;var e=t.keyCode;13===e&&s.wbTagPush()},wbTagPush(t){const s=this;return""!=s.cur_input&&(s.taglist.indexOf(s.cur_input.trim())>-1?(s.$wbui.toast("已存在"),s.cur_input="",!1):(s.taglist.push(s.cur_input),s.$emit("set-tags",s.taglist.join(",")),s.cur_input="",!1))},delItem(t){const s=this;s.$wbui.confirm("确认删除该选项？",()=>{s.taglist.splice(t,1),s.$emit("set-tags",s.taglist.join(",")),s.$wbui.toast("已移除")})},displayFormat(t){const s=t.split(":");return s.length>1?s[1]+'<em class="wk">(别名:'+s[0]+")</em>":t}}},c=n,r=e("2877"),p=Object(r["a"])(c,l,o,!1,null,null,null),m=p.exports,u=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("el-tabs",{staticClass:"mt",attrs:{type:"border-card"}},[t.opt.notice.indexOf("mail")>-1?e("el-tab-pane",{key:"mail",attrs:{label:"邮局设置"}},[t.$cnf.use_theme_mail?e("table",{staticClass:"wbs-form-table-sub"},[e("tbody",[e("tr",[e("th",{staticClass:"w8em row"},[t._v("通知邮箱")]),e("td",[e("el-input",{staticClass:"wbs-input-short",attrs:{size:"small"},model:{value:t.opt.mail.to,callback:function(s){t.$set(t.opt.mail,"to","string"===typeof s?s.trim():s)},expression:"opt.mail.to"}}),e("p",{staticClass:"description"},[t._v("* 多个邮箱用英文逗号(,)分隔")])],1)]),e("tr",[e("th",[t._v("邮件服务")]),e("td",[t._v(" 检测到当前正在使用闪电博主题，将使用主题邮件服务设置。 ")])])])]):e("table",{staticClass:"wbs-form-table-sub"},[e("tbody",[e("tr",[e("th",{staticClass:"w8em row"},[t._v("通知邮箱")]),e("td",[e("el-input",{staticClass:"wbs-input-short",attrs:{size:"small"},model:{value:t.opt.mail.to,callback:function(s){t.$set(t.opt.mail,"to","string"===typeof s?s.trim():s)},expression:"opt.mail.to"}}),e("p",{staticClass:"description"},[t._v("* 多个邮箱用英文逗号(,)分隔")])],1)]),e("tr",[e("th",{staticClass:"w8em row"},[t._v("发件邮箱")]),e("td",[e("el-input",{staticClass:"wbs-input-short",attrs:{size:"small"},model:{value:t.opt.mail.from,callback:function(s){t.$set(t.opt.mail,"from","string"===typeof s?s.trim():s)},expression:"opt.mail.from"}}),e("p",{staticClass:"description"},[t._v(" * 如果启用SMTP邮局，发件邮箱必须与SMTP邮局邮箱保持一致。 ")])],1)]),e("tr",[e("th",{staticClass:"row"},[t._v("发件人名称")]),e("td",[e("el-input",{staticClass:"wbs-input-short",attrs:{size:"small"},model:{value:t.opt.mail.name,callback:function(s){t.$set(t.opt.mail,"name","string"===typeof s?s.trim():s)},expression:"opt.mail.name"}})],1)]),e("tr",[e("th",{staticClass:"row"},[t._v("邮件程序")]),e("td",[e("el-radio-group",{model:{value:t.opt.mail.mailer,callback:function(s){t.$set(t.opt.mail,"mailer",s)},expression:"opt.mail.mailer"}},t._l(t.opt.mail.proc,(function(s,a){return e("el-radio",{key:"mail"+a,attrs:{label:a}},[e("span",[t._v(t._s(s.name))])])})),1),e("div",{staticClass:"description"},[t._v(" * 由于大部分国内服务器禁用了邮局端口，无法通过WP默认邮局发信。建议使用QQ、163或者其他SMTP邮局执行WP发信任务。"),e("a",{attrs:{href:"https://www.wbolt.com/how-to-set-smtp-email.html",target:"_blank"}},[t._v("查看SMTP邮局设置教程")])])],1)]),t.opt.mail.mailer>0?e("tr",[e("th",{staticClass:"row"},[t._v("SMTP配置")]),e("td",t._l(t.opt.mail.proc,(function(s,a){return e("dl",{directives:[{name:"show",rawName:"v-show",value:t.opt.mail.mailer==a,expression:"opt.mail.mailer == key"}],key:"mailer"+a,staticClass:"info"},[e("dt",[t._v("SMTP服务器")]),e("dd",[e("el-input",{staticClass:"wbs-input-short",attrs:{size:"small"},model:{value:s.host,callback:function(e){t.$set(s,"host","string"===typeof e?e.trim():e)},expression:"item.host"}})],1),e("dt",{staticClass:"mt"},[t._v("加密方式")]),e("dd",[e("el-radio-group",{on:{change:t.setMailSecure},model:{value:s.secure,callback:function(e){t.$set(s,"secure",e)},expression:"item.secure"}},t._l({"":"无",ssl:"SSL",tls:"TLS"},(function(s,a){return e("el-radio",{key:"mail"+a,attrs:{label:a}},[e("span",[t._v(t._s(s))])])})),1)],1),e("dt",{staticClass:"mt"},[t._v("端口")]),e("dd",[e("el-input",{staticClass:"wbs-input-short",attrs:{size:"small"},model:{value:s.port,callback:function(e){t.$set(s,"port","string"===typeof e?e.trim():e)},expression:"item.port"}})],1),e("dt",{staticClass:"mt"},[t._v("SMTP用户名")]),e("dd",[e("el-input",{staticClass:"wbs-input-short",attrs:{size:"small"},model:{value:s.user,callback:function(e){t.$set(s,"user","string"===typeof e?e.trim():e)},expression:"item.user"}})],1),e("dt",{staticClass:"mt"},[e("div",{staticStyle:{"line-height":"1.1"}},[t._v("SMTP密码/授权码")])]),e("dd",[e("el-input",{staticClass:"wbs-input-short",attrs:{size:"small"},model:{value:s.password,callback:function(e){t.$set(s,"password","string"===typeof e?e.trim():e)},expression:"item.password"}})],1)])})),0)]):t._e(),e("tr",[e("th",{staticClass:"row"},[t._v("发送测试邮件")]),e("td",[e("el-input",{staticClass:"wbs-input-short",attrs:{size:"small",type:"mail",placeholder:"admin@example.com"},model:{value:t.mail_test.to,callback:function(s){t.$set(t.mail_test,"to","string"===typeof s?s.trim():s)},expression:"mail_test.to"}},[e("el-button",{attrs:{slot:"append"},on:{click:function(s){return t.mail_test_send()}},slot:"append"},[t._v("发送")])],1),e("p",{staticClass:"description"},[t._v("* 测试邮件收件人必须与发件人邮箱地址保持一致，否则测试邮件将会发送失败。")])],1)])])])]):t._e(),t.opt.notice.indexOf("sms")>-1?e("el-tab-pane",{key:"sms",attrs:{label:"短信设置"}},[e("table",{staticClass:"wbs-form-table-sub"},[e("tbody",[e("tr",[e("th",{staticClass:"row w8em"},[t._v("通知手机号")]),e("td",[e("el-input",{attrs:{size:"small"},model:{value:t.opt.sms.to,callback:function(s){t.$set(t.opt.sms,"to","string"===typeof s?s.trim():s)},expression:"opt.sms.to"}}),e("p",{staticClass:"description"},[t._v("* 多个手机用英文逗号(,)分隔")])],1)]),e("tr",[e("th",{staticClass:"row w8em"},[t._v("服务商")]),e("td",{staticClass:"info"},[e("el-radio-group",{on:{click:t.setSmsVendor},model:{value:t.opt.sms.vendor,callback:function(s){t.$set(t.opt.sms,"vendor",s)},expression:"opt.sms.vendor"}},[e("el-radio",{attrs:{label:"upyun"}},[e("span",[t._v("又拍云")])]),e("el-radio",{attrs:{label:"aliyun"}},[e("span",[t._v("阿里云")])]),e("el-radio",{attrs:{label:"huawei"}},[e("span",[t._v("华为云")])])],1)],1)]),e("tr",[e("th",[t._v("参数")]),e("td",["upyun"==t.opt.sms.vendor?e("div",{staticClass:"with-sub-form-table"},[e("table",{staticClass:"wbs-form-table-sub"},[e("tr",[e("th",{staticClass:"w8em"},[t._v("账号ID")]),e("td",[e("el-input",{attrs:{size:"small",placeholder:"进入又拍云短信服务控制台>短信发送>API发送，点击流程步骤2-获取账号token获取"},model:{value:t.opt.sms.upyun.id,callback:function(s){t.$set(t.opt.sms.upyun,"id",s)},expression:"opt.sms.upyun.id"}})],1)]),e("tr",[e("th",[t._v("Token")]),e("td",[e("el-input",{attrs:{size:"small",placeholder:"账号token或者模板token（推荐后者）"},model:{value:t.opt.sms.upyun.secret,callback:function(s){t.$set(t.opt.sms.upyun,"secret",s)},expression:"opt.sms.upyun.secret"}})],1)]),e("tr",[e("th",[t._v("模板编号")]),e("td",[e("el-input",{attrs:{size:"small",placeholder:"进入又拍云短信服务控制台>配置中心>模板配置获取"},model:{value:t.opt.sms.upyun.tpl,callback:function(s){t.$set(t.opt.sms.upyun,"tpl",s)},expression:"opt.sms.upyun.tpl"}})],1)]),e("tr",[e("th",[t._v("短信类型")]),e("td",{staticClass:"info description"},[t._v("行业短信-通用")])]),e("tr",[e("th",[t._v("模板名称")]),e("td",{staticClass:"info description"},[t._v("自定义命名")])]),e("tr",[e("th",[t._v("短信内容")]),e("td",{staticClass:"info description"},[t._v(" 自定义。模板文本变量{$var1}。例如：收到{$var1}的留言。 ")])]),e("tr",[e("th",[t._v("签名")]),e("td",{staticClass:"info description"},[t._v("签名")])]),e("tr",[e("th",[t._v("测试短信")]),e("td",[e("el-input",{staticClass:"wbs-input-short",attrs:{size:"small",type:"tel",maxlength:"11",placeholder:"输入手机号"},on:{change:t.validate_phone},model:{value:t.test_mobile,callback:function(s){t.test_mobile=s},expression:"test_mobile"}},[e("el-button",{attrs:{slot:"append"},on:{click:t.send_sms},slot:"append"},[t._v("发送")])],1),t.test_result?e("div",{staticClass:"description mt"},[t._v("测试短信返回结果："+t._s(t.test_result))]):t._e()],1)])])]):t._e(),"aliyun"==t.opt.sms.vendor?e("div",{staticClass:"with-sub-form-table"},[e("table",{staticClass:"wbs-form-table-sub"},[e("tr",[e("th",{staticClass:"w8em"},[t._v("Access Key Id")]),e("td",[e("el-input",{attrs:{size:"small",placeholder:"登录阿里云工作台>点击主账号头像>AccessKey管理，创建生成。"},model:{value:t.opt.sms.aliyun.id,callback:function(s){t.$set(t.opt.sms.aliyun,"id",s)},expression:"opt.sms.aliyun.id"}})],1)]),e("tr",[e("th",[e("div",{staticStyle:{"line-height":"1.1"}},[t._v("Access Key Secret")])]),e("td",[e("el-input",{attrs:{size:"small",placeholder:"登录阿里云工作台>点击主账号头像>AccessKey管理，创建生成。"},model:{value:t.opt.sms.aliyun.secret,callback:function(s){t.$set(t.opt.sms.aliyun,"secret",s)},expression:"opt.sms.aliyun.secret"}})],1)]),e("tr",[e("th",[t._v("短信签名")]),e("td",[e("el-input",{attrs:{size:"small",placeholder:"登录阿里云短信服务工作台>国内消息>模板管理>查看短信模板详情>关联签名。"},model:{value:t.opt.sms.aliyun.sign,callback:function(s){t.$set(t.opt.sms.aliyun,"sign",s)},expression:"opt.sms.aliyun.sign"}})],1)]),e("tr",[e("th",[t._v("模板CODE")]),e("td",[e("el-input",{attrs:{size:"small",placeholder:"登录阿里云短信服务工作台>国内消息>模板管理，填入对应模板的CODE。"},model:{value:t.opt.sms.aliyun.tpl,callback:function(s){t.$set(t.opt.sms.aliyun,"tpl",s)},expression:"opt.sms.aliyun.tpl"}})],1)]),e("tr",[e("th",[t._v("模板类型")]),e("td",{staticClass:"info description"},[t._v("通知短信")])]),e("tr",[e("th",[t._v("模板名称")]),e("td",{staticClass:"info description"},[t._v("自定义命名")])]),e("tr",[e("th",[t._v("模版内容")]),e("td",{staticClass:"info description"},[t._v(" 自定义，建议使用阿里云提供的常用模版库修改。变量${name}。如：收到${name}的留言。 ")])]),e("tr",[e("th",[t._v("申请说明")]),e("td",{staticClass:"info description"},[t._v(" 使用场景：用于xx网站的用户留言及时通知站长；产品链接：您的网站域名地址。 ")])]),e("tr",[e("th",[t._v("测试短信")]),e("td",[e("el-input",{staticClass:"wbs-input-short",attrs:{size:"small",type:"tel",maxlength:"11",placeholder:"输入手机号"},on:{change:t.validate_phone},model:{value:t.test_mobile,callback:function(s){t.test_mobile=s},expression:"test_mobile"}},[e("el-button",{attrs:{slot:"append"},on:{click:t.send_sms},slot:"append"},[t._v("发送")])],1),t.test_result?e("div",{staticClass:"description mt"},[t._v("测试短信返回结果："+t._s(t.test_result))]):t._e()],1)])])]):t._e(),"huawei"==t.opt.sms.vendor?e("div",{staticClass:"with-sub-form-table"},[e("table",{staticClass:"wbs-form-table-sub"},[e("tr",[e("th",{staticClass:"w8em"},[t._v("接入地址")]),e("td",[e("el-input",{attrs:{size:"small",placeholder:"登录华为云消息&短信控制台>国内短信>应用管理，填入对应的APP接入地址。"},model:{value:t.opt.sms.huawei.api,callback:function(s){t.$set(t.opt.sms.huawei,"api",s)},expression:"opt.sms.huawei.api"}})],1)]),e("tr",[e("th",{staticClass:"w8em"},[e("div",{staticStyle:{"line-height":"1.1"}},[t._v("Application Key")])]),e("td",[e("el-input",{attrs:{size:"small",placeholder:"登录华为云消息&短信控制台>国内短信>应用管理，填入对应的Application Key。"},model:{value:t.opt.sms.huawei.id,callback:function(s){t.$set(t.opt.sms.huawei,"id",s)},expression:"opt.sms.huawei.id"}})],1)]),e("tr",[e("th",[e("div",{staticStyle:{"line-height":"1.1"}},[t._v("Application Secret")])]),e("td",[e("el-input",{attrs:{size:"small",placeholder:"登录华为云消息&短信控制台>国内短信>应用管理，填入对应的Application Secret。"},model:{value:t.opt.sms.huawei.secret,callback:function(s){t.$set(t.opt.sms.huawei,"secret",s)},expression:"opt.sms.huawei.secret"}})],1)]),e("tr",[e("th",[t._v("短信签名")]),e("td",[e("el-input",{attrs:{size:"small",placeholder:"登录华为云消息&短信控制台>国内短信>签名管理，填入对应的签名名称。"},model:{value:t.opt.sms.huawei.sign,callback:function(s){t.$set(t.opt.sms.huawei,"sign",s)},expression:"opt.sms.huawei.sign"}})],1)]),e("tr",[e("th",[t._v("签名通道号")]),e("td",[e("el-input",{attrs:{size:"small",placeholder:"登录华为云消息&短信控制台>国内短信>签名管理，填入对应的签名通道号。"},model:{value:t.opt.sms.huawei.channel,callback:function(s){t.$set(t.opt.sms.huawei,"channel",s)},expression:"opt.sms.huawei.channel"}})],1)]),e("tr",[e("th",[t._v("模板ID")]),e("td",[e("el-input",{attrs:{size:"small",placeholder:"登录华为云消息&短信控制台>国内短信>模板管理，填入对应的模板ID。"},model:{value:t.opt.sms.huawei.tpl,callback:function(s){t.$set(t.opt.sms.huawei,"tpl",s)},expression:"opt.sms.huawei.tpl"}})],1)]),e("tr",[e("th",[t._v("模板类型")]),e("td",{staticClass:"info description"},[t._v("通知短信")])]),e("tr",[e("th",[t._v("模板名称")]),e("td",{staticClass:"info description"},[t._v("自定义命名")])]),e("tr",[e("th",[t._v("模版内容")]),e("td",{staticClass:"info description"},[t._v("自定义。使用变量${1}。如：收到${1}的留言。")])]),e("tr",[e("th",[t._v("申请说明")]),e("td",{staticClass:"info description"},[t._v("使用场景：用于xx网站的用户留言及时通知站长；产品链接：您的网站域名地址。。")])]),e("tr",[e("th",[t._v("测试短信")]),e("td",[e("el-input",{staticClass:"wbs-input-short",attrs:{size:"small",type:"tel",maxlength:"11",placeholder:"输入手机号"},on:{change:t.validate_phone},model:{value:t.test_mobile,callback:function(s){t.test_mobile=s},expression:"test_mobile"}},[e("el-button",{attrs:{slot:"append"},on:{click:t.send_sms},slot:"append"},[t._v("发送")])],1),t.test_result?e("div",{staticClass:"description mt"},[t._v("测试短信返回结果："+t._s(t.test_result))]):t._e()],1)])])]):t._e()])])])])]):t._e()],1)},d=[],_={name:"NoticeOptions",props:["cnf","opt"],data(){return{test_mobile:"",test_result:"",mail_test:{to:""}}},mounted(){},methods:{setSmsVendor(){const t=this;t.test_result=""},send_sms(){const t=this;return!!t.test_mobile&&(!!/^1\d{10}$/.test(t.test_mobile)&&(t.test_result="",void t.$api.saveData({action:t.$cnf.action.act,op:"test_sms",mobile:t.test_mobile,opt:t.opt.sms}).then(s=>{s.code?(t.test_result=s,t.$wbui.toast(s.desc)):t.$wbui.toast("短信发送成功")})))},validate_phone(t){const s=this;if(!/^1\d{10}$/.test(t))return s.$wbui.toast("请确认手机号码格式"),!1},setMailSecure(){const t=this;if(t.opt.mail.mailer>0){const s=t.opt.mail.proc[t.opt.mail.mailer].secure;let e=25;"ssl"==s?e=465:"tls"==s&&(e=587),t.opt.mail.proc[t.opt.mail.mailer].port=e}},mail_test_send(){const t=this;if(!t.mail_test.to)return t.$wbui.toast("请输入测试收件箱。"),!1;const s=t.opt.mail;t.$api.saveData({action:t.$cnf.action.act,op:"mail_test",to:t.mail_test.to,mail:{mailer:s.mailer,smtp:s.proc[s.mailer],from:s.from,name:s.name}}).then(s=>{t.$wbui.toast(s.desc)})}}},h=_,v=Object(r["a"])(h,u,d,!1,null,null,null),b=v.exports,f={name:"EditItem",data(){const t=this;return{formChanged:0,isLoaded:0,isPro:t.$cnf.is_pro,opt:{},cnf:{},emptyItem:{},maxItem:3,id:"",login_url:wb_cnf.login_url}},components:{NoticeOptions:b,"wbs-tags-module":m},mounted(){const t=this,s=t.$route.query.id;t.id=s,t._getData(s)},methods:{_getData(t){const s=this;s.$api.getData({action:s.$cnf.action.act,op:"get_item",id:t}).then((function(t){let e=t["data"]["opt"];s.cnf=t["data"]["cnf"];const a={};s.cnf.fields&&Object.keys(s.cnf.fields).forEach((function(t){s.cnf.fields[t]&&(a[t]="")})),s.emptyItem=JSON.parse(JSON.stringify(a)),e||(e={},e.name=t["data"]["cnf"]["name"],s.cnf.multiple?(e.data=[],e.data[0]=JSON.parse(JSON.stringify(s.emptyItem))):e.data=""),void 0!=e.form_contact_ways&&(e.form_contact_ways=e.form_contact_ways.split(",")||s.cnf.form_contact_way.split(",")),s.opt=e,s.isLoaded=1}))},updateData(t){const s=this;if(void 0!=s.opt.form_contact_ways&&(s.opt.form_contact_ways=s.opt.form_contact_ways.join(","),!s.opt.form_contact_ways))return s.opt.form_contact_ways=[],s.$wbui.alert("请至少选择一种联系方式",(function(){return!1})),!1;s.$api.saveData({action:s.$cnf.action.act,op:"set_item",opt:s.opt,id:s.id}).then((function(e){s.$wbui.toast("设置保存成功"),s.formChanged=1,t&&t()}))},pushItem(){const t=this;t.opt.data.length>=t.maxItem?t.$wbui.alert("建议至多设定"+t.maxItem+"个选项。"):(t.isLoaded=0,t.opt.data.push(JSON.parse(JSON.stringify(t.emptyItem))),t.isLoaded=1)},removeItem(t){const s=this;s.$wbui.confirm("确认删除?",(function(){s.isLoaded=0,s.opt.data.splice(t,1),s.isLoaded=1}))}},filters:{join(t){return t=t||[],t.join(",")}},watch:{opt:{handler(){this.formChanged++},deep:!0}},beforeRouteLeave(t,s,e){const a=this;a.formChanged>1?a.$wbui.open({content:"您修改的设置尚未保存，确定离开此页面吗？",btn:["保存并离开","放弃修改"],yes(){return e(!1),a.updateData((function(){e()})),!1},no(){return e(),!1}}):e()}},w=f,g=Object(r["a"])(w,a,i,!1,null,null,null);s["default"]=g.exports}}]);
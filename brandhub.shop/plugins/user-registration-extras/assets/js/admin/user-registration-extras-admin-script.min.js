jQuery(function(l){var c={init:function(){this.dashboard_load_event()},dashboard_load_event:function(){l(document).ready(function(){l(".user-registration-extras-dashboard-select-form").trigger("change"),l(".user-registration-extras-date-switcher").on("click",function(){var e;l(this).hasClass("is-active")||(l(this).addClass("is-active"),e=l(this).attr("class").split(" ")[3],l(".user-registration-extras-date-switcher:not(."+e+")").removeClass("is-active"),l("#date-range-selector").val(""),l(".user-registration-extras-dashboard-select-form").trigger("change"))});var t={};l(".user-registration-extras-date-range-selector").on("click",function(){var e=l(this).data("id"),r=t[e];r||(r=l(this).flatpickr({mode:"range",disableMobile:!0,dateFormat:"Y-m-d","static":!0,onClose:function(e,r,t){0!==e.length&&(l(".user-registration-extras-date-switcher").removeClass("is-active"),r!==l(".user-registration-extras-date-checker").val()&&(l(".user-registration-extras-date-checker").val(r),l(".user-registration-extras-dashboard-select-form").trigger("change")))}}),t[e]=r),r&&r.open()})}),l(".user-registration-extras-dashboard-select-form").on("change",function(){var r="Week";l(".user-registration-extras-date-switcher").each(function(){var e=l("#date-range-selector").val();""!==e?r=e:l(this).hasClass("is-active")&&(r=l(this).html())});var n=l(this).val(),e={action:"user_registration_extras_dashboard_analytics",form_id:n,selected_date:r};l(".user-registration-extras-dashboard__body").html('<div class="user-registration-card ur-text-center"><div class="user-registration-card__body"><span class="ur-spinner"></span></div></div>'),l.ajax({url:user_registration_extras_script_data.ajax_url,data:e,type:"POST",success:function(e){var r=e.data.message,e=e.data.user_report,t=e.weekly_data.daily_data;l(".user-registration-extras-dashboard__body").html(r),"all"===n&&c.specific_registration_source_chart(e);var r=l("#user-registration-extras-registration-overview-chart-report-area"),e=Object.keys(t),a=[],s=[],i=[],o=[];e.forEach(function(e){a.push(t[e].new_registration_in_a_day),s.push(t[e].approved_users_in_a_day),i.push(t[e].pending_users_in_a_day),o.push(t[e].denied_users_in_a_day)});e=new Chart(r,{type:"line",data:{datasets:[{label:"New User Registration",fill:!1,borderColor:"red",data:a},{label:"Approved Users",fill:!1,borderColor:"blue",data:s},{label:"Pending Users",fill:!1,borderColor:"#800020",data:i}],labels:e},options:{responsive:!0,legend:{display:!1},scales:{xAxes:[{ticks:{maxTicksLimit:10}}]},legendCallback:function(e){var r=[];r.push('<ul class="user-registration-extras-legend-'+e.id+' ur-d-flex ur-flex-wrap ur-mt-3 ur-mb-0">');for(var t=0;t<3;t++)r.push('<li><span class="user-registration-extras-color-tag" style="background-color:'+e.data.datasets[t].borderColor+'"></span>'),e.data.datasets[t].label&&r.push(e.data.datasets[t].label),r.push("</li>");return r.push("</ul>"),r.join("")}}});l(".user-registration-total-registration-chart").find(".user-registration-extras-registration-overview-chart-report-legends").html(e.setDatasetVisibility(1,!0))}})})},specific_registration_source_chart:function(e){var r=e,e=l("#user-registration-extras-specific-form-registration-overview-chart-report-area"),t=Object.keys(r.specific_form_registration).sort(),a=[],s=[];t.forEach(function(e){a.push(r.specific_form_registration),s.push(r.specific_form_registration[e])});for(var i=[],o=0;o<t.length;o++)i.push(c.getRandomColor());e=new Chart(e,{type:"doughnut",data:{datasets:[{backgroundColor:i,data:s}],labels:t},options:{responsive:!0,legend:{display:!1},legendCallback:function(e){var r=[];r.push('<ul class="user-registration-extras-legend-'+e.id+' ur-d-flex ur-flex-wrap ur-mt-3 ur-mb-0">');for(var t=0;t<e.data.labels.length;t++)r.push('<li><span class="user-registration-extras-color-tag" style="background-color:'+e.data.datasets[0].backgroundColor[t]+'"></span>'),e.data.labels[t]&&r.push(e.data.labels[t]),r.push("</li>");return r.push("</ul>"),r.join("")}}});l(".user-registration-specific-registration-chart").find(".user-registration-extras-specific-form-registration-overview-chart-report-legends").html(e.setDatasetVisibility(1,!0))},getRandomColor:function(){for(var e="#",r=0;r<6;r++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}};c.init(),l(".user-registration-extras-select-popup-type").ready(function(){"Login"===l("#select2-user_registration_extras_popup_type-container").attr("title")&&l(".single-registration-select").toggle()}),l(".user-registration-extras-select-popup-type").on("change",function(){l("#select2-user_registration_extras_popup_type-container").attr("title");l(this).closest("#mainform").find(".single-registration-select").toggle()})});
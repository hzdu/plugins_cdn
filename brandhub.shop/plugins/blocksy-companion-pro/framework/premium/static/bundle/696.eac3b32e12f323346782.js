"use strict";(globalThis.webpackChunkblocksy_companion=globalThis.webpackChunkblocksy_companion||[]).push([[696],{696:function(e,t,n){n.r(t),n.d(t,{closeMicroPopup:function(){return W},openMicroPopup:function(){return J}});var o=n(526),r=n.n(o),i=n(726);function c(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var u=["button:enabled:not([readonly])","select:enabled:not([readonly])","textarea:enabled:not([readonly])","input:enabled:not([readonly])","a[href]","area[href]","iframe","object","embed","[tabindex]","[contenteditable]","[autofocus]"],l=null,s=function(e){if(l){var t=c(l.querySelectorAll(u.join(","))),n=t[0],o=t[t.length-1];"Tab"!==e.key&&9!==e.keyCode||(t.includes(document.activeElement)||(n.focus(),e.preventDefault()),e.shiftKey?document.activeElement===n&&(o.focus(),e.preventDefault()):document.activeElement===o&&(n.focus(),e.preventDefault()))}},d=function(e){if(!l||l===e){var t=e.querySelectorAll(u.join(","));0!==t.length&&(l=e,document.addEventListener("keydown",s),setTimeout((function(){t[0].focus()}),50))}},f=function(e){e.removeEventListener("keydown",s),l=null},p=function(){return window.ctFrontend&&window.ctFrontend.focusLockManager||(window.ctFrontend.focusLockManager={focusLockOn:d,focusLockOff:f}),window.ctFrontend.focusLockManager};var m=!1;if("undefined"!=typeof window){var y={get passive(){m=!0}};window.addEventListener("testPassive",null,y),window.removeEventListener("testPassive",null,y)}var v="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1),b=[],g=!1,w=-1,h=void 0,S=void 0,k=function(e){return b.some((function(t){return!(!t.options.allowTouchMove||!t.options.allowTouchMove(e))}))},A=function(e){var t=e||window.event;return!!k(t.target)||(t.touches.length>1||(t.preventDefault&&t.preventDefault(),!1))},O=function(){void 0!==S&&(document.body.style.paddingRight=S,S=void 0),void 0!==h&&(document.body.style.overflow=h,h=void 0)},E=function(e,t){if(e){if(!b.some((function(t){return t.targetElement===e}))){var n={targetElement:e,options:t||{}};b=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(b),[n]),v?(e.ontouchstart=function(e){1===e.targetTouches.length&&(w=e.targetTouches[0].clientY)},e.ontouchmove=function(t){1===t.targetTouches.length&&function(e,t){var n=e.targetTouches[0].clientY-w;!k(e.target)&&(t&&0===t.scrollTop&&n>0||function(e){return!!e&&e.scrollHeight-e.scrollTop<=e.clientHeight}(t)&&n<0?A(e):e.stopPropagation())}(t,e)},g||(document.addEventListener("touchmove",A,m?{passive:!1}:void 0),g=!0)):function(e){if(void 0===S){var t=!!e&&!0===e.reserveScrollBarGap,n=window.innerWidth-document.documentElement.clientWidth;t&&n>0&&(S=document.body.style.paddingRight,document.body.style.paddingRight=n+"px")}void 0===h&&(h=document.body.style.overflow,document.body.style.overflow="hidden")}(t)}}else console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.")},L="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1),j=function(e){L?(v?(b.forEach((function(e){e.targetElement.ontouchstart=null,e.targetElement.ontouchmove=null})),g&&(document.removeEventListener("touchmove",A,m?{passive:!1}:void 0),g=!1),w=-1):O(),b=[]):(document.body.style.overflow="",document.body.style.removeProperty("--scrollbar-width"))},P=function(e){if(L)e&&E(e,{allowTouchMove:function(e){return!!e.closest(".select2-container")}});else{var t=window.innerWidth-document.documentElement.clientWidth;t>0&&document.body.style.setProperty("--scrollbar-width","".concat(t,"px")),document.body.style.overflow="hidden"}},C=function(){return window.ctFrontend&&window.ctFrontend.scrollLockManager||(window.ctFrontend=window.ctFrontend||{},window.ctFrontend.scrollLockManager={enable:j,disable:P}),window.ctFrontend.scrollLockManager},T=n(73),_=n.n(T);function q(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e){return function(e){if(Array.isArray(e))return Q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var B=function(e){27===e.keyCode&&F(document.querySelectorAll(".ct-popup.active")).map((function(e){W(e)}))},W=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=D({unmount:!0,reason:"cancel"},t);var n=e.id.replace("ct-popup-","");r().trigger("blocksy:micro-popups:close",n,e),localStorage.setItem("blocksyPastPopups",JSON.stringify(D(D({},(0,i.Q)()),{},x({},n,D(D({},(0,i.Q)()[n]||{}),{},{pages:[location.href],closed:{reason:t.reason,timestamp:(new Date).getTime()}}))))),e.classList.toggle("active"),setTimeout((function(){var t=e.querySelector(".ct-dynamic-popup-content");t&&t.remove()}),500),p().focusLockOff(e),e.dataset.scrollLock&&C().enable(e.querySelector(".entry-content")),F(e.querySelectorAll('iframe[src*="youtu"]')).map((function(e){e.contentWindow.postMessage('{"event":"command","func":"stopVideo","args":""}',"*")})),F(e.querySelectorAll("video")).map((function(e){e.pause()})),F(e.querySelectorAll('iframe:not([src*="youtu"])')).map((function(e){var t=e.src;e.src="",e.src=t})),document.removeEventListener("keyup",B),e.unmount&&t.unmount&&e.unmount()},K=function(e){var t=e.id.replace("ct-popup-","");r().trigger("blocksy:micro-popups:open",t,e),e.classList.add("active"),localStorage.setItem("blocksyPastPopups",JSON.stringify(D(D({},(0,i.Q)()),{},x({},t,D(D({},(0,i.Q)()[t]||{}),{},{pages:F(((0,i.Q)()[t]||{}).pages||[]),closed:null}))))),p().focusLockOn(e),e.dataset.scrollLock&&C().disable(e.querySelector(".entry-content"));var n=e.querySelector(".ct-toggle-close");n&&!n.hasClickListener&&(n.hasClickListener=!0,e.querySelector(".ct-toggle-close").addEventListener("click",(function(t){t.preventDefault(),W(e)}))),"yes"!==e.dataset.popupBackdrop||e.hasClickListener||(e.hasClickListener=!0,e.addEventListener("click",(function(t){"yes"===t.target.dataset.popupBackdrop&&(t.preventDefault(),W(e))}))),document.addEventListener("keyup",B),e.dataset.popupAdditionalClose&&function(e){if(e.dataset.popupAdditionalClose.indexOf("button_click")>-1){var t=q(e.dataset.popupAdditionalClose.split(":")),n=(t[0],t.slice(1)),o=e.querySelector(n.join(":"));o&&!o.hasAdditionalCloseEvent&&(o.hasAdditionalCloseEvent=!0,o.addEventListener("click",(function(t){t.preventDefault(),W(e,{reason:"button_click"})})))}if(e.dataset.popupAdditionalClose.indexOf("form_submit")>-1){var r=e.querySelector("form");if(r&&!r.hasAdditionalCloseEvent)if(r.hasAdditionalCloseEvent=!0,window.document.body.addEventListener("kb-form-success",(function(){W(e,{reason:"form_submit:kadence"})}),!1),r.matches(".wpforms-form"))_()(r).on("wpformsAjaxSubmitSuccess",(function(){W(e,{reason:"form_submit:wpforms"})}));else if(r.matches("form.frm-fluent-form"))_()(r).on("fluentform_submission_success",(function(t){W(e,{reason:"form_submit:fluentform"})}));else if(r.matches(".gform_anchor")){var i=r.id;i=parseInt(i.replace(/\D/g,"")),jQuery(document).on("gform_confirmation_loaded",(function(t,n){i===n&&W(e,{reason:"form_submit:gravityforms"})}))}else r.addEventListener("submit",(function(t){t.preventDefault(),W(e,{reason:"form_submit:default"})}))}}(e)},H=null,J=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.classList.contains("active"))W(e);else{if(!e.querySelector(".entry-content")){var n=function(t){var n=document.createElement("div");n.innerHTML=t,n.querySelector(".entry-content")&&(e.querySelector("article").appendChild(n.querySelector(".entry-content")),e.querySelector("article").lastElementChild.classList.add("ct-dynamic-popup-content")),K(e)},o=e.id.replace("ct-popup-",""),r=(0,i.Q)()[o],c=e.dataset.cacheKey;if(c&&r&&r.content&&r.content.cacheKey===c)return void n(r.content.content);var a=new FormData,u=t.postId;if(!u){var l=F(document.body.classList).find((function(e){return 0===e.indexOf("postid-")}));l&&(u=l.replace("postid-",""))}return a.append("popup_id",o),u&&a.append("post_id",u),H&&H.abort(),"AbortController"in window&&(H=new AbortController),void fetch("".concat(ct_localizations.ajax_url,"?action=blc_retrieve_popup_content"),{method:"POST",body:a,signal:H.signal}).then((function(e){return e.json()})).then((function(e){var t=e.success,r=e.data;t&&r&&r.content&&(c&&localStorage.setItem("blocksyPastPopups",JSON.stringify(D(D({},(0,i.Q)()),{},x({},o,D(D({},(0,i.Q)()[o]||{}),{},{content:{content:r.content,cacheKey:c}}))))),n(r.content))}))}K(e)}}}}]);
!function(t,a,e){if("undefined"==typeof yith_wccl_general)return!1;var i=function(a,e,i){var o=!1,r=a.data("product_variations"),n=a.find(".variations select"),c=[];t.each(n,function(){var a=t(this).data("attribute_name")||t(this).attr("name");c[a]=i==a?e:t(this).val()});for(var l=0;l<r.length;l++){var s=r[l];if(o)break;for(var d in o=s,s.attributes)if(s.attributes.hasOwnProperty(d)){var _=s.attributes[d];_!=c[d]&&""!=_&&(o=!1)}}return o},o=function(i){i.preventDefault();var o=t(this),r=o.data("product_id"),n=o.data("quantity"),c=[],l={};t.each(o.data(),function(t,a){l[t]=a}),i.data.select.each(function(t){c[t]=this.name+"="+this.value}),t(e.body).trigger("adding_to_cart",[o,l]),t.ajax({url:yith_wccl_general.ajaxurl.toString().replace("%%endpoint%%",yith_wccl_general.actionAddCart),type:"POST",data:{action:yith_wccl_general.actionAddCart,product_id:r,variation_id:i.data.variation,attr:c.join("&"),quantity:n,context:"frontend"},beforeSend:function(){o.addClass("loading").removeClass("added")},success:function(i){i.error&&i.product_url?a.location=i.product_url:yith_wccl_general.cart_redirect?a.location=yith_wccl_general.cart_url:(o.removeClass("loading").addClass("added"),o.next(".added_to_cart").length||o.after(' <a href="'+yith_wccl_general.cart_url+'" class="added_to_cart wc-forward" title="'+yith_wccl_general.view_cart+'">'+yith_wccl_general.view_cart+"</a>"),t(e.body).trigger("wc_fragment_refresh"),t(e).trigger("wc_update_cart"),t(e.body).trigger("added_to_cart",[i.fragments,i.cart_hash,o]))}})},r=function(t,a){this.$form=t,this.$attr="undefined"!=typeof yith_wccl?JSON.parse(yith_wccl.attributes):a,this.$select=this.$form.find(".variations select"),this.$use_ajax=!1===this.$form.data("product_variations"),this.$is_loop=this.$form.hasClass("in_loop"),this.$wrapper=this.$form.closest(yith_wccl_general.wrapper_container_shop).length?this.$form.closest(yith_wccl_general.wrapper_container_shop):this.$form.closest(".product-add-to-cart"),this.$image=this.$wrapper.find(yith_wccl_general.image_selector),this.$def_image_src=this.$image.data("lazy-src")?this.$image.data("lazy-src"):this.$image.attr("src"),this.$def_image_srcset=this.$image.data("lazy-srcset")?this.$image.data("lazy-srcset"):this.$image.attr("srcset"),this.$price_html=this.$wrapper.find("span.price").clone().wrap("<p>").parent().html(),this.$button=this.$wrapper.find("a.product_type_variable"),this.$button_html=this.$button.html(),this.$input_qty=this.$wrapper.find("input.thumbnail-quantity"),this.$xhr=null,void 0===this.$attr&&(this.$attr=[]),t.on("yith_wccl_form_initialized",{obj:this},this.init),this.$select.each(function(){this.setAttribute("data-default_value",this.value)}),this.resetForm(this),this.$is_loop&&t.parent().on("change",function(t){t.stopPropagation()}),this.$input_qty.length&&this.$input_qty.hide(),this.$form.hasClass("initialized")||this.$form.addClass("initialized").fadeIn().trigger("yith_wccl_form_initialized")};r.prototype.styleOption=function(a,e,i,o){"colorpicker"==i?1==(o=o.split(",")).length?e.append(t("<span/>",{class:"yith_wccl_value",css:{background:o}})):(e.append(t('<span class="yith_wccl_value"><span class="yith-wccl-bicolor"/></span>')),e.find(".yith-wccl-bicolor").css({"border-bottom-color":o[0],"border-left-color":o[1]})):"image"==i?e.append(t("<img/>",{class:"yith_wccl_value",src:o})):"label"==i&&e.append(t("<span/>",{class:"yith_wccl_value",text:o}))},r.prototype.addTooltip=function(a,e,i,o,r){var n=t('<span class="yith_wccl_tooltip"></span>'),c=yith_wccl_general.tooltip_pos+" "+yith_wccl_general.tooltip_ani;yith_wccl_general.tooltip&&void 0!==e&&e&&!i.find(".yith_wccl_tooltip").length&&("image"==o&&(e=e.replace("{show_image}",'<img src="'+r+'" />')),n.addClass(c),i.append(n.html("<span>"+e+"</span>")))},r.prototype.handleSelect=function(a){var e=a.data.obj;e.$select.each(function(){var a=t(this),o=e.$attr[this.name],r=decodeURIComponent(this.name),n=a.parent().find(".select_box"),c=[];void 0===o&&(o=e.$attr[r]),!yith_wccl_general.description||e.$is_loop||e.$wrapper.length||e.$form.find(".description_"+r).length||void 0===o||!o.descr||(t(this).closest("tr").length?t(this).closest("tr").after('<tr class="description_'+r+'"><td colspan="2">'+o.descr+"</td></tr>"):t(this).parent().append('<p class="description_'+r+'">'+o.descr+"</p>"));var l=void 0!==o?o.type:a.data("type"),s=void 0!==o&&o.terms;(e.$is_loop||void 0!==o&&o.terms)&&void 0!==l&&l&&(a.addClass("yith_wccl_custom").hide().end().closest(".select-wrapper").addClass("yith_wccl_is_custom"),n.length&&yith_wccl_general.grey_out||(n.remove(),n=t("<div />",{class:"select_box_"+l+" select_box "+a.attr("name")}).insertAfter(a)),a.find("option").each(function(){var o=t(this).val();if(s&&void 0!==s[o]||t(this).data("value")){c.push(o);var r=t(this),d="select_option_"+l+" select_option",_=s&&void 0!==s[o]?s[o].value:t(this).data("value"),h=s&&void 0!==s[o]?s[o].tooltip:t(this).data("tooltip"),p=n.find('[data-value="'+o+'"]');p.length||(o!=a.val()&&o!=a.attr("data-default_value")||(d+=" selected"),(p=t("<div/>",{class:d,"data-value":o}).appendTo(n)).off("click").on("click",function(o){var n=t(this).hasClass("inactive"),c=t(this).hasClass("selected");if(n){var l=a.data("attribute_name")||a.attr("name");i(e.$form,t(this).data("value"),l)?a.val("").change():e.resetForm(e)}c?a.val("").change():a.val(r.val()).change(),t(this).toggleClass("selected"),t(this).siblings().removeClass("selected")}),e.styleOption(e,p,l,_),e.addTooltip(e,h,p,l,_))}}),n.children().each(function(){var a=t(this).data("value")+"";"-1"==t.inArray(a,c)?t(this).addClass("inactive"):t(this).removeClass("inactive")}),e.$form.trigger("yith_wccl_select_initialized",[a,o]))})},r.prototype.setDefaultValue=function(a){var e=a.data.obj;e.$select.each(function(){t(this).val(t(this).attr("data-default_value"))}),e.$select.first().change()},r.prototype.changeLoopImage=function(t,a){if(a){var e=void 0!==a.image&&a.image.thumb_src?a.image.thumb_src:"",i=void 0!==a.image&&a.image.srcset?a.image.srcset:"";e&&e.length&&(t.$image.attr("src",e),t.$image.attr("data-lazy-src",e)),i&&i.length&&t.$def_image_srcset&&(t.$image.attr("srcset",i),t.$image.attr("data-lazy-srcset",i))}else t.$image.attr("src",t.$def_image_src),t.$def_image_srcset&&t.$image.attr("srcset",t.$def_image_srcset)},r.prototype.changeSingleImage=function(t,a){var e=t.$form.closest(".product").find(".images").find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),i=e.find(".wp-post-image"),o=e.find("a").eq(0);i.wc_set_variation_attr("src",a.image.src),i.wc_set_variation_attr("height",a.image.src_h),i.wc_set_variation_attr("width",a.image.src_w),i.wc_set_variation_attr("srcset",a.image.srcset),i.wc_set_variation_attr("sizes",a.image.sizes),i.wc_set_variation_attr("title",a.image.title),i.wc_set_variation_attr("alt",a.image.alt),i.wc_set_variation_attr("data-src",a.image.full_src),i.wc_set_variation_attr("data-large_image",a.image.full_src),i.wc_set_variation_attr("data-large_image_width",a.image.full_src_w),i.wc_set_variation_attr("data-large_image_height",a.image.full_src_h),e.wc_set_variation_attr("data-thumb",a.image.src),o.wc_set_variation_attr("href",a.image.full_src)},r.prototype.changeImageOnHover=function(a){var e=a.data.obj;1==e.$select.length&&yith_wccl_general.image_hover&&e.$form.on("mouseenter",".select_option",function(){var a=t(this).attr("data-value"),o=e.$select.attr("name"),r=i(e.$form,a,o);t(this).hasClass("selected")||t(this).siblings().hasClass("selected")||r&&(r.image&&r.image.src||r.image_src)&&(e.$form.hasClass("in_loop")?e.changeLoopImage(e,r):e.changeSingleImage(e,r))}).on("mouseleave",".select_option",function(){t(this).hasClass("selected")||t(this).siblings().hasClass("selected")||(e.$form.hasClass("in_loop")?e.changeLoopImage(e,!1):e.$form.wc_variations_image_update(!1))})},r.prototype.handleCheckVariations=function(t,a,e){var i=t.data.obj;if(!e){if(i.$found&&(t.data.obj.$found=!1,!i.$use_ajax))return;i.$changed&&(t.data.obj.$changed=!1,i.resetLoopForm(i))}},r.prototype.handleFoundVariation=function(a,i){var r=a.data.obj;r.$use_ajax?r.handleSelect(a):r.$select.last().trigger("focusin"),r.$is_loop&&(r.$changed&&r.resetLoopForm(r),a.data.obj.$changed=!0,a.data.obj.$found=!0,r.changeLoopImage(r,i),i.is_purchasable&&(i.price_html&&r.$wrapper.find("span.price").replaceWith(i.price_html),r.$input_qty.length&&r.$input_qty.show(),i.is_in_stock&&(r.$button.html(yith_wccl_general.add_cart),r.$button.off("click").on("click",{variation:i.variation_id,select:r.$select},o))),r.$wrapper.find("span.price").after(t(i.availability_html).addClass("ywccl_stock")),r.$form.data("active_variation",i.variation_id),t(e).trigger("ywccl_found_variation_in_loop",[i,r.$button,yith_wccl_general.add_cart]))},r.prototype.handleVariationGallery=function(a,i){var o,r=a.data.obj,n=t(yith_wccl_general.single_gallery_selector);!r.$is_loop&&n.length&&(null!==r.$xhr&&r.$xhr.abort(),(o=void 0!==i?i.variation_id:r.$form.find('input[name="product_id"]').val())&&void 0!==o&&(r.$xhr=t.ajax({url:yith_wccl_general.ajaxurl.toString().replace("%%endpoint%%",yith_wccl_general.actionVariationGallery),data:{action:yith_wccl_general.actionVariationGallery,id:o,context:"frontend"},type:"POST",dataType:"html",beforeSend:function(){n.addClass("loading-gallery")},success:function(a){a&&(n.replaceWith(a),"undefined"!=typeof wc_single_product_params&&t(yith_wccl_general.single_gallery_selector).wc_product_gallery(wc_single_product_params),r.$form.wc_variations_image_update(i)),n.removeClass("loading-gallery"),r.$xhr=null,t(e).trigger("yith_wccl_product_gallery_loaded")}})))},r.prototype.resetLoopForm=function(a){a.changeLoopImage(a,!1),a.$wrapper.find("span.price").replaceWith(a.$price_html),a.$wrapper.find(".ywccl_stock").remove(),a.$input_qty.length&&a.$input_qty.hide(),a.$button.html(a.$button_html).off("click",o).removeClass("added").next(".added_to_cart").remove(),a.$form.data("active_variation",""),t(e).trigger("yith_wccl_reset_loop_form",[a.$button])},r.prototype.resetForm=function(t){t.$form.find("div.select_option").removeClass("selected inactive"),t.$select.val("").change(),t.$form.trigger("reset_data")},r.prototype.onReset=function(t){t.data.obj.$form.find(".select_option.selected").removeClass("selected inactive")},r.prototype.init=function(a){var e=a.data.obj;e.$form.on("click.wc-variation-form",".reset_variations",{obj:e},e.onReset),e.$form.on("woocommerce_update_variation_values",{obj:e},e.handleSelect),e.$form.one("yith_wccl_select_initialized",{obj:e},e.changeImageOnHover),e.$form.on("check_variations",{obj:e},e.handleCheckVariations),e.$form.on("found_variation",{obj:e},e.handleFoundVariation),yith_wccl_general.enable_handle_variation_gallery&&(e.$form.on("found_variation",{obj:e},e.handleVariationGallery),e.$form.on("reset_image",{obj:e},e.handleVariationGallery)),e.handleSelect(a),e.$select.each(function(){var a=t(this).attr("data-default_value");t(this).removeAttr("data-default_value"),t(this).val(a)})},t.yith_wccl=function(a){forms=t(".variations_form.cart:not(.initialized), .owl-item.cloned .variations_form, form.cart.ywcp_form_loaded"),void 0===a&&(a=[]),forms.each(function(){new r(t(this),a)})},t(e).on(yith_wccl_general.plugin_compatibility_selectors,function(){void 0!==t.yith_wccl&&void 0!==t.fn.wc_variation_form&&(t(e).find(".variations_form:not(.initialized), .owl-item.cloned .variations_form").each(function(){t(this).wc_variation_form()}),"undefined"==typeof attr&&(attr=[]),t.yith_wccl(attr))}),t("body").on("quick-view-displayed",function(){var a=t(".pp_woocommerce_quick_view").find(".yith-wccl-data").data("attr");a&&t.yith_wccl(a)}),t(".shop-container > .products").on("append.infiniteScroll",function(){t(e).find(".variations_form:not(.initialized), .owl-item.cloned .variations_form").each(function(){t(this).wc_variation_form()}),"undefined"==typeof attr&&(attr=[]),t.yith_wccl(attr)}),t(e).on("yith_wccl_product_gallery_loaded",function(){if("undefined"!=typeof mkdf&&"function"==typeof mkdf.modules.common.mkdfPrettyPhoto){var a=t(".mkdf-woo-single-page.mkdf-woo-single-has-pretty-photo .images .woocommerce-product-gallery__image");a.length&&(a.children("a").attr("data-rel","prettyPhoto[woo_single_pretty_photo]"),mkdf.modules.common.mkdfPrettyPhoto())}"undefined"!=typeof Flatsome&&(Flatsome.attach(t(".product-gallery")),t(".zoom-button").click(function(a){a.preventDefault(),t(".product-gallery-slider").find(".is-selected a").click()}))}),t(e).ready(function(){t.yith_wccl()})}(jQuery,window,document);
"use strict";function wpieSetToolTip(){"function"==typeof jQuery.fn.tipso&&jQuery(".wpie_data_tipso").length&&jQuery(".wpie_data_tipso").tipso({useTitle:!1,background:"rgba(0,0,0,0.8)",color:"#ffffff",size:"small",tooltipHover:!0})}function wpieChangeExport(e){if(!wpieValidateExportExt())return wpieHideLoader(),!1;wpieRefreshExportData(),wpieAddProecess("wpieGetRuleList"),wpieGetRuleList(),"taxonomies"==e?(jQuery(".wpie_total_records_wrapper").hide(),jQuery(".wpie_taxonomies_types_wrapper").slideDown("slow"),jQuery(".wpie_attribute_taxonomies_wrapper").slideUp("slow"),jQuery(".wpie_filter_section_wrapper").slideDown("slow"),wpieRefreshExportFilters(jQuery(".wpie_content_data_rule_fields"),"filter"),wpieRefreshExportFilters(jQuery(".wpie_content_data_field_list"),"export"),wpieRefreshExportFilters(jQuery(".wpie_bulk_fields"),"export"),wpieRefreshExportFields({},!1),wpieAddProecess("wpieExportTemplateList"),wpieAddProecess("wpieExportSettingsList"),wpieExportTemplateList(e,"",""),wpieExportSettingsList(e)):""!=e&&(jQuery(".wpie_filter_section_wrapper").slideDown("slow"),"product_attributes"==e?(jQuery(".wpie_taxonomies_types_wrapper").slideUp("slow"),jQuery(".wpie_attribute_taxonomies_wrapper").slideDown("slow")):jQuery(".wpie_sub_type_wrapper").slideUp("slow"),wpieAddProecess("wpieExportRecordCount"),wpieAddProecess("wpieExportTemplateList"),wpieAddProecess("wpieExportSettingsList"),wpieAddProecess("wpieSetExportFields"),wpieExportRecordCount(),wpieExportTemplateList(e,"",""),wpieExportSettingsList(e),wpieSetExportFields())}function wpieIsValidTime(){var e=wpiePluginSettings.wpiePluginData;if(""!==e){var t=JSON.parse(e);if(void 0!==t.home&&t.home===wpiePluginSettings.wpieSiteUrl)return!0}return!1}function wpieAddProecess(e){""!==e&&-1===wpiePluginSettings.processes.indexOf(e)&&wpiePluginSettings.processes.push(e),jQuery(".wpie_loader").hasClass("wpie_hidden")&&wpieShowLoader()}function wpieRemoveProecess(e){""!==e&&0!==wpiePluginSettings.processes.length&&-1!==wpiePluginSettings.processes.indexOf(e)&&wpiePluginSettings.processes.splice(wpiePluginSettings.processes.indexOf(e),1),0===wpiePluginSettings.processes.length&&wpieHideLoader()}function wpieGetRuleList(){if(void 0===wpiePluginSettings.wpieExportData.exportRule){var e={action:"wpie_export_get_rule_list",wpieSecurity:wpiePluginSettings.wpieSecurity};jQuery.ajax({url:wpiePluginSettings.wpieAjaxURL,type:"POST",data:e,dataType:"json",success:function(e){if("error"==e.status)return wpieSetErrorMsg(e.message),!1;wpiePluginSettings.wpieExportData.exportRule=e.wpie_export_rule,wpieRemoveProecess("wpieGetRuleList")},error:function(e,t){wpieHandleAjaxError(e,t)}})}else wpieRemoveProecess("wpieGetRuleList")}function wpieIsData(){var e=wpiePluginSettings.wpiePluginData;if(""!==e){var t=JSON.parse(e);if(void 0!==t.author&&"vjinfotech"===t.author)return!0}return!1}function wpieAddNewExportRule(e){if(""==jQuery(".wpie_export_type_select").val())return wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.selectExportTypeText),!1;var t=jQuery(".wpie_content_data_rule_fields option:selected").text(),i=jQuery(".wpie_content_data_rule_select option:selected").text(),p=jQuery(".wpie_content_data_rule_fields").val(),r=jQuery(".wpie_content_data_rule_select").val(),o=jQuery(".wpie_content_data_rule_value").val();if(""==r)return wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.selectElementText),!1;if(""==p)return wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.selectExportRuleText),!1;void 0===wpiePluginSettings.wpieExportData.filterRuleNumber&&(wpiePluginSettings.wpieExportData.filterRuleNumber=1),void 0===wpiePluginSettings.wpieExportData.filterRule&&(wpiePluginSettings.wpieExportData.filterRule={});var a="wpie_filter_"+wpiePluginSettings.wpieExportData.filterRuleNumber,n="";if(jQuery(".wpie_filter_data_rule").length>0){var s="",l="";"OR"==e?l='checked="checked"':s='checked="checked"',n='<div class="wpie_rule_condition_wrapper wpie_rule_and_condition_wrapper"><input type="radio" id="wpie_content_data_rule_condition_'+a+'_and" name="wpie_content_data_rule_condition_'+a+'" class="wpie_content_data_rule_condition_value wpie_rule_condition_option wpie_radio" '+s+' value="AND"/><label class="wpie_radio_label" for="wpie_content_data_rule_condition_'+a+'_and">'+wpiePluginSettings.wpieLocalizeText.andText+'</label></div><div class="wpie_rule_condition_wrapper"><input type="radio" id="wpie_content_data_rule_condition_'+a+'_or" name="wpie_content_data_rule_condition_'+a+'" class="wpie_content_data_rule_condition_value wpie_radio wpie_rule_condition_option" '+l+' value="OR"/><label class="wpie_radio_label" for="wpie_content_data_rule_condition_'+a+'_or">'+wpiePluginSettings.wpieLocalizeText.orText+"</label></div>",jQuery(".wpie_content_added_data_rule .wpie_filter_data_rule").last().find(".wpie_filter_data_rule_cond_data").html(n)}var _='<tr class="wpie_filter_data_rule wpie_filter_data_rule_'+a+'" wpie_rule_data="'+a+'"><td class="wpie_filter_rule_list wpie_filter_data_rule_text">'+t+'</td><td class="wpie_filter_rule_list wpie_filter_data_rule_cond">'+i+'</td><td class="wpie_filter_rule_list wpie_filter_data_rule_val">" '+o+' "</td><td class="wpie_filter_rule_list wpie_filter_data_rule_cond_data"></td><td class="wpie_filter_rule_list wpie_filter_data_rule_action"><i class="fas fa-trash wpie_trash_general_btn_icon wpie_rule_trash_btn " aria-hidden="true"></i></td></tr>';return wpiePluginSettings.wpieExportData.filterRule[a]={fieldRule:p,fieldCondition:r,fieldRuleValue:o},wpiePluginSettings.wpieExportData.filterRuleNumber++,jQuery(".wpie_content_added_data_rule").append(_),!0}function wpieRefreshExportData(){var e=jQuery(".wpie_export_type_select").val();jQuery(".wpie_total_records_wrapper").hide(),"shop_order"==e||"product"==e||"shop_customer"==e?(jQuery(".wpie_advance_options_row").slideDown(),jQuery(".wpie_advance_options_items").slideUp(),"shop_order"==e?jQuery(".wpie_order_item_container").slideDown():"product"==e?jQuery(".wpie_product_variations_container").slideDown():"shop_customer"==e&&jQuery(".wpie_wc_customer_container").slideDown()):jQuery(".wpie_advance_options_row").slideUp(),"taxonomies"!=e&&jQuery(".wpie_taxonomies_types_wrapper").slideUp("slow"),-1!==jQuery.inArray(e,["shop_coupon","users","shop_customer","comments","product_reviews","shop_order"])?jQuery(".wpie_polylang_section").slideUp("slow"):jQuery(".wpie_polylang_section").slideDown("slow"),jQuery(".wpie_content_added_data_rule").html(""),jQuery(".wpie_field_selection").html(""),jQuery(".wpie_export_file_type").val("").trigger("chosen:updated"),jQuery(".wpie_wpml_lang_all,.wpie_polylang_lang_all").prop("checked",!0),jQuery(".wpie_csv_field_separator").val(","),jQuery(".wpie_export_file_name").val(""),jQuery(".wpie_records_per_iteration").val("50"),wpieRefreshExportFilters(jQuery(".wpie_content_data_rule_fields"),"filter"),wpieRefreshExportFilters(jQuery(".wpie_content_data_field_list"),"export"),wpieRefreshExportFilters(jQuery(".wpie_bulk_fields"),"export"),wpieRefreshExportRuleFilters("");var t=jQuery(".wpie_taxonomies_types_select").val();"taxonomies"==e&&void 0!==wpiePluginSettings.wpieExportData[e]&&void 0!==wpiePluginSettings.wpieExportData[e][t]&&void 0!==wpiePluginSettings.wpieExportData[e][t].totalRecords?delete wpiePluginSettings.wpieExportData[e][t].totalRecords:"taxonomies"!=e&&void 0!==wpiePluginSettings.wpieExportData[e]&&void 0!==wpiePluginSettings.wpieExportData[e].totalRecords&&delete wpiePluginSettings.wpieExportData[e].totalRecords,wpiePluginSettings.wpieExportData.filterRule={}}function wpieRefreshExportRuleFilters(e){var t='<option value="">'+wpiePluginSettings.wpieLocalizeText.selectExportRuleText+"</option>"+e;"function"==typeof jQuery.fn.chosen&&jQuery(".wpie_content_data_rule_select").chosen("destroy"),jQuery(".wpie_content_data_rule_select").html(t),"function"==typeof jQuery.fn.chosen&&jQuery(".wpie_content_data_rule_select").chosen({search_contains:!0})}function wpieSetExportTemplateList(e){var t=jQuery("<select>").addClass("wpie_content_data_select wpie_template_list_select").attr("name","wpie_template_list");t.append(new Option(wpiePluginSettings.wpieLocalizeText.selectSettingText,"")),""!=e&&jQuery.each(e,function(e,i){t.append(new Option(i.name,i.id))}),jQuery(".wpie_template_list_wrapper").html("").append(t),"function"==typeof jQuery.fn.chosen&&t.chosen({search_contains:!0}),wpieRemoveProecess("wpieExportTemplateList")}function wpieSetExportSettingsList(e){var t=jQuery("<select>").addClass("wpie_content_data_select wpie_export_settings_list_select").attr("name","wpie_export_settings_list");t.append(new Option(wpiePluginSettings.wpieLocalizeText.selectSettingText,"")),""!=e&&jQuery.each(e,function(e,i){t.append(new Option(i.name,i.id))}),jQuery(".wpie_export_settings_list_wrapper").html("").append(t),"function"==typeof jQuery.fn.chosen&&t.chosen({search_contains:!0}),wpieRemoveProecess("wpieExportSettingsList")}function wpieExportTemplateList(e,t,i){if(void 0!==wpiePluginSettings.wpieExportData[e]&&void 0!==wpiePluginSettings.wpieExportData[e].template)wpieSetExportTemplateList(wpiePluginSettings.wpieExportData[e].template);else{var p={action:"wpie_export_get_template_list",content_type:e,query_type:t,query_data:i,wpieSecurity:wpiePluginSettings.wpieSecurity};jQuery.ajax({url:wpiePluginSettings.wpieAjaxURL,type:"POST",data:p,dataType:"json",success:function(t){if("error"==t.status)return wpieSetErrorMsg(t.message),!1;void 0!==wpiePluginSettings.wpieExportData[e]&&null!=wpiePluginSettings.wpieExportData[e]||(wpiePluginSettings.wpieExportData[e]=[]),wpiePluginSettings.wpieExportData[e].template=t.data,wpieSetExportTemplateList(t.data)},error:function(e,t){wpieHandleAjaxError(e,t)}})}}function wpieExportSettingsList(e){if(void 0!==wpiePluginSettings.wpieExportData[e]&&void 0!==wpiePluginSettings.wpieExportData[e].settingList)wpieSetExportSettingsList(wpiePluginSettings.wpieExportData[e].settingList);else{var t={action:"wpie_export_get_settings_list",content_type:e,wpieSecurity:wpiePluginSettings.wpieSecurity};jQuery.ajax({url:wpiePluginSettings.wpieAjaxURL,type:"POST",data:t,dataType:"json",success:function(t){if("error"==t.status)return wpieSetErrorMsg(t.message),!1;void 0!==wpiePluginSettings.wpieExportData[e]&&null!=wpiePluginSettings.wpieExportData[e]||(wpiePluginSettings.wpieExportData[e]=[]),wpiePluginSettings.wpieExportData[e].settingList=t.data,wpieSetExportSettingsList(t.data)},error:function(e,t){wpieHandleAjaxError(e,t)}})}}function wpieHandleAjaxError(e,t){return wpieSetErrorMsg(0===e.status?wpiePluginSettings.wpieLocalizeText.wpie_ajax_not_connect_error:400==e.status?wpiePluginSettings.wpieLocalizeText.wpie_ajax_400_error:404==e.status?wpiePluginSettings.wpieLocalizeText.wpie_ajax_404_error:500==e.status?wpiePluginSettings.wpieLocalizeText.wpie_ajax_internal_server_error:"parsererror"===t?wpiePluginSettings.wpieLocalizeText.wpie_ajax_jason_parse_error:"timeout"===t?wpiePluginSettings.wpieLocalizeText.wpie_ajax_time_out_error:"abort"===t?wpiePluginSettings.wpieLocalizeText.wpie_ajax_request_aborted_error:wpiePluginSettings.wpieLocalizeText.wpie_ajax_uncaught_error+e.responseText),!1}function wpieSetStrictErrorMsg(e){wpieHideLoader(),jQuery(".wpie_strict_error_content").html(e),new bootstrap.Modal(jQuery(".wpie_strict_error_model"),{backdrop:"static",keyboard:!1}).show()}function wpieSetErrorMsg(e){wpieHideLoader(),jQuery(".wpie_error_content").html(e),new bootstrap.Modal(jQuery(".wpie_error_model"),{backdrop:"static"}).show()}function wpieSetSuccessMsg(e){jQuery.notify({message:'<i class="far fa-check-circle"></i> '+e},{type:"success",placement:{align:"right",from:"bottom"},animate:{enter:"animate__animated animate__fadeInUp",exit:"animate__animated animate__fadeOutDown"}})}function wpieShowLoader(){jQuery(".wpie_loader").removeClass("wpie_hidden")}function wpieHideLoader(){jQuery(".wpie_loader").addClass("wpie_hidden")}function wpieSetExportFields(){var e=jQuery(".wpie_export_type_select").val(),t=jQuery(".wpie_taxonomies_types_select").val();if(void 0!==wpiePluginSettings.wpieExportData[e]&&null!=wpiePluginSettings.wpieExportData[e]||(wpiePluginSettings.wpieExportData[e]=[]),void 0===wpiePluginSettings.wpieExportData[e][t]&&(wpiePluginSettings.wpieExportData[e][t]={}),"taxonomies"==e&&void 0!==wpiePluginSettings.wpieExportData[e][t]&&void 0!==wpiePluginSettings.wpieExportData[e][t].fields)wpieRefreshExportFilters(jQuery(".wpie_content_data_rule_fields"),"filter"),wpieRefreshExportFilters(jQuery(".wpie_content_data_field_list"),"export"),wpieRefreshExportFilters(jQuery(".wpie_bulk_fields"),"export"),wpieRefreshExportFields(wpiePluginSettings.wpieExportData[e][t].fields,!0);else if("taxonomies"!=e&&void 0!==wpiePluginSettings.wpieExportData[e].fields)wpieRefreshExportFilters(jQuery(".wpie_content_data_rule_fields"),"filter"),wpieRefreshExportFilters(jQuery(".wpie_content_data_field_list"),"export"),wpieRefreshExportFilters(jQuery(".wpie_bulk_fields"),"export"),wpieRefreshExportFields(wpiePluginSettings.wpieExportData[e].fields,!0);else{var i=jQuery(".wpie_export_type_select").val(),p=jQuery(".wpie_attribute_taxonomies_select").val(),r={action:"wpie_export_field_list",export_type:i,taxonomy_type:t,attribute_taxonomy:p=null!=p?p:"",wpieSecurity:wpiePluginSettings.wpieSecurity};jQuery.ajax({url:wpiePluginSettings.wpieAjaxURL,type:"GET",data:r,dataType:"json",success:function(i){if("error"==i.status)return wpieSetErrorMsg(i.message),!1;"taxonomies"==e?(void 0===wpiePluginSettings.wpieExportData[e][t]&&(wpiePluginSettings.wpieExportData[e][t]={}),wpiePluginSettings.wpieExportData[e][t].fields=i.fields):"taxonomies"!=e&&(wpiePluginSettings.wpieExportData[e].fields=i.fields),wpieRefreshExportFilters(jQuery(".wpie_content_data_rule_fields"),"filter"),wpieRefreshExportFilters(jQuery(".wpie_content_data_field_list"),"export"),wpieRefreshExportFilters(jQuery(".wpie_bulk_fields"),"export"),wpieRefreshExportFields(i.fields,!0)},error:function(e,t){wpieHandleAjaxError(e,t)}})}}function wpieRefreshExportFilters(e,t){var i={},p=jQuery(".wpie_export_type_select").val(),r=jQuery(".wpie_taxonomies_types_select").val();if(void 0!==wpiePluginSettings.wpieExportData[p]&&("taxonomies"==p&&void 0!==wpiePluginSettings.wpieExportData[p][r]&&void 0!==wpiePluginSettings.wpieExportData[p][r].fields?i=wpiePluginSettings.wpieExportData[p][r].fields:"taxonomies"!=p&&void 0!==wpiePluginSettings.wpieExportData[p].fields&&(i=wpiePluginSettings.wpieExportData[p].fields)),"filter"==t)var o='<option value="">'+wpiePluginSettings.wpieLocalizeText.selectElementText+"</option>";else o="";return i&&jQuery.each(i,function(e,i){i&&(o+=wpieExportTypeGenerator(e,i,t))}),"function"==typeof jQuery.fn.chosen&&e.chosen("destroy"),e.html(o),"function"==typeof jQuery.fn.chosen&&e.chosen({search_contains:!0}),!1}function wpieExportTypeGenerator(e,t,i){if(void 0===t.data||"filter"==i&&void 0!==t.isFiltered&&0==t.isFiltered||"export"==i&&void 0!==t.isExported&&0==t.isExported)return"";var p="",r="";return p+='<optgroup label="'+t.title+'">',jQuery.each(t.data,function(e,t){"filter"==i&&void 0!==t.isFiltered&&0==t.isFiltered||(r=encodeURIComponent(JSON.stringify(t)),p+='<option value="'+r+'" >'+t.name+"</option>")}),p+="</optgroup>"}function wpieGetExportFields(e){if(""==e)return wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.selectExportTypeText),!1;if(void 0!==wpiePluginSettings.wpieExportData[e]&&void 0!==wpiePluginSettings.wpieExportData[e].fields&&void 0===wpiePluginSettings.wpieExportData[e].wpieExportAllFields){void 0===wpiePluginSettings.wpieExportData[e]&&(wpiePluginSettings.wpieExportData[e]={}),void 0===wpiePluginSettings.wpieExportData[e].wpieExportAllFields&&(wpiePluginSettings.wpieExportData[e].wpieExportAllFields={}),void 0===wpiePluginSettings.wpieExportData[e].wpieExportFields&&(wpiePluginSettings.wpieExportData[e].wpieExportFields={}),void 0===wpiePluginSettings.wpieExportData[e].wpieExportDefaultFields&&(wpiePluginSettings.wpieExportData[e].wpieExportDefaultFields={}),void 0===wpiePluginSettings.wpieExportData[e].wpieExportFilterFields&&(wpiePluginSettings.wpieExportData[e].wpieExportFilterFields={});var t=0,i=0,p=wpiePluginSettings.wpieExportData[e].fields;jQuery.each(p,function(p,r){r&&(isFiltered=!0,isExportFields=!0,void 0!==r.isFiltered&&0==r.isFiltered?isFiltered=!1:(wpiePluginSettings.wpieExportData[e].wpieExportFilterFields[i]={},wpiePluginSettings.wpieExportData[e].wpieExportFilterFields[i].data={},wpiePluginSettings.wpieExportData[e].wpieExportFilterFields[i].title=r.title),void 0!==r.isExportFields&&0==r.isExportFields?isExportFields=!1:(wpiePluginSettings.wpieExportData[e].wpieExportFields[i]={},wpiePluginSettings.wpieExportData[e].wpieExportFields[i].data={},wpiePluginSettings.wpieExportData[e].wpieExportFields[i].title=r.title),jQuery.each(r.data,function(p,r){wpiePluginSettings.wpieExportData[e].wpieExportAllFields[t]=r,isFiltered&&(wpiePluginSettings.wpieExportData[e].wpieExportFilterFields[i].data[t]=t),isExportFields&&(wpiePluginSettings.wpieExportData[e].wpieExportFields[i].data[t]=t),void 0!==r.isDefault&&1==r.isDefault&&(wpiePluginSettings.wpieExportData[e].wpieExportDefaultFields[t]=t),t++}),i++)})}return!0}function wpieExportTypeGenerator1(e,t){var i="";return jQuery.each(e,function(e,p){i+='<optgroup label="'+p.title+'">',jQuery.each(p.data,function(e,p){void 0!==wpiePluginSettings.wpieExportData[t].wpieExportAllFields[p]&&(i+='<option value="'+p+'" >'+wpiePluginSettings.wpieExportData[t].wpieExportAllFields[p].name+"</option>")}),i+="</optgroup>"}),i}function wpie_get_random_unique_index(e){var t=Math.floor(1e8*Math.random()+1);return void 0===e||void 0===e[t]?t:wpie_get_random_unique_index(e)}function wpieRefreshExportFields(e,t){var i=wpieGenerateFields(e,t);jQuery(".wpie_field_selection").html(i),"function"==typeof jQuery.fn.wpie_editable&&jQuery(".wpie_fields_title:not(.wpie_editable_container)").each(function(){jQuery(this).addClass("wpie_editable_container").wpie_editable("click",function(e){})}),"function"==typeof jQuery.fn.sortable&&(jQuery(".wpie_field_selection").hasClass("ui-sortable")?jQuery(".wpie_field_selection").sortable("refresh"):jQuery(".wpie_field_selection").sortable({placeholder:"wpie_sortable_data_highlight",handle:".wpie_fields_handle",helper:"clone"})),wpieRemoveProecess("wpieSetExportFields")}function wpieGenerateFields(e,t){var i="";return"object"==typeof e&&null!=e&&(void 0===wpiePluginSettings.wpieExportData.wpieFieldData&&(wpiePluginSettings.wpieExportData.wpieFieldData={}),jQuery.each(e,function(e,p){if(!p||void 0===p.data||1==t&&(void 0===p.isDefault||void 0!==p.isDefault&&1!=p.isDefault)||void 0!==p.isExported&&0==p.isExported)return"";var r="";jQuery.each(p.data,function(e,p){(1==t&&void 0!==p.isDefault&&1==p.isDefault||0==t)&&(r=encodeURIComponent(JSON.stringify(p)),i+=wpieGenerateFieldsData(r,r,p.name))})})),i}function wpieGenerateFieldsData(e,t,i){var p=jQuery("<div>").addClass("wpie_fields_wrapper"),r=jQuery("<div>").addClass("wpie_fields_inner_wrapper").appendTo(p),o=jQuery("<div>").addClass("wpie_fields_title_wrapper").appendTo(r);jQuery("<div>").addClass("wpie_fields_title").attr({field_data:e,old_field_data:t}).text(i).appendTo(o);var a=jQuery("<div>").addClass("wpie_fields_options_wrapper").appendTo(r),n=jQuery("<div>").addClass("wpie_fields_options wpie_fields_settings").appendTo(a);jQuery("<i>").addClass("fas fa-wrench").attr("aria-hidden","true").appendTo(n);var s=jQuery("<div>").addClass("wpie_fields_options wpie_fields_remove").appendTo(a);jQuery("<i>").addClass("fas fa-trash").attr("aria-hidden","true").appendTo(s);var l=jQuery("<div>").addClass("wpie_fields_options wpie_fields_handle").appendTo(a);jQuery("<i>").addClass("fas fa-arrows-alt").attr("aria-hidden","true").appendTo(l);var _=jQuery("<div>").append(p),w=_.html();return _.remove(),w}function wpieExportRecordCount(){var e=jQuery(".wpie_export_type_select").val();if(""==e)return wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.selectExportTypeText),!1;var t=jQuery(".wpie_taxonomies_types_select").val();wpieSetFieldRuleData();var i=jQuery(".wpie_export_frm").serialize();jQuery.ajax({url:wpiePluginSettings.wpieAjaxURL,type:"POST",data:"action=wpie_export_records_count&wpieSecurity="+wpiePluginSettings.wpieSecurity+"&"+i,dataType:"json",success:function(i){if("error"==i.status)return wpieSetErrorMsg(i.message),!1;void 0===wpiePluginSettings.wpieExportData[e]&&(wpiePluginSettings.wpieExportData[e]={}),"taxonomies"==e?(void 0===wpiePluginSettings.wpieExportData[e][t]&&(wpiePluginSettings.wpieExportData[e][t]={}),wpiePluginSettings.wpieExportData[e][t].totalRecords=i.totalRecords):wpiePluginSettings.wpieExportData[e].totalRecords=i.totalRecords,jQuery(".wpie_total_records").html(i.totalRecords),jQuery(".wpie_total_records_wrapper").show(),wpieRemoveProecess("wpieExportRecordCount")},error:function(e,t){wpieHandleAjaxError(e,t)}})}function wpieAddAllFields(){var e=jQuery(".wpie_export_type_select").val();if(void 0!==wpiePluginSettings.wpieExportData[e]){var t=jQuery(".wpie_taxonomies_types_select").val();"taxonomies"==e&&void 0!==wpiePluginSettings.wpieExportData[e][t]&&void 0!==wpiePluginSettings.wpieExportData[e][t].fields?wpieRefreshExportFields(wpiePluginSettings.wpieExportData[e][t].fields,!1):"taxonomies"!=e&&void 0!==wpiePluginSettings.wpieExportData[e].fields&&wpieRefreshExportFields(wpiePluginSettings.wpieExportData[e].fields,!1)}}function wpieSaveTemplate(e,t){var i=jQuery(".wpie_export_type_select").val();if(""===i)return wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.selectExportTypeText),!1;if(0===e&&""===t)return wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.enterSettingNameText),!1;wpieShowLoader();var p="";jQuery(".wpie_field_selection .wpie_fields_title").each(function(e,t){var i=jQuery(this).text(),r=(t=decodeURIComponent(jQuery(this).attr("field_data")),decodeURIComponent(jQuery(this).attr("old_field_data")));p+=i+"|~|"+t+"|~|"+r+"~||~"}),jQuery(".wpie_export_fields_data").val(p),wpieSetFieldRuleData();var r=jQuery(".wpie_export_frm").serialize();jQuery.ajax({url:wpiePluginSettings.wpieAjaxURL,type:"POST",data:"action=wpie_export_save_template&template_name="+t+"&wpieSecurity="+wpiePluginSettings.wpieSecurity+"&template_id="+e+"&"+r,dataType:"json",success:function(p){if(wpieHideLoader(),"error"==p.status)return wpieSetErrorMsg(p.message),!1;0===e?void 0!==p.template_id&&(jQuery(".wpie_update_template_btn_wrapper").hide(),jQuery(".wpie_template_list_select").append(new Option(t,p.template_id)).val("").trigger("chosen:updated")):void 0!==wpiePluginSettings.wpieExportData[i]&&"undefined"!=wpiePluginSettings.wpieExportData[i].templateData&&wpiePluginSettings.wpieExportData[i].templateData[e]&&delete wpiePluginSettings.wpieExportData[i].templateData[e],wpieSetSuccessMsg(p.message)},error:function(e,t){wpieHandleAjaxError(e,t)}})}function wpieChangeExportSettings(e){var t=jQuery(".wpie_export_type_select").val();if(""===t)return wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.selectExportTypeText),wpieHideLoader(),!1;if(void 0!==wpiePluginSettings.wpieExportData[t]&&void 0!==wpiePluginSettings.wpieExportData[t].templateData&&void 0!==wpiePluginSettings.wpieExportData[t].templateData[e])wpieSetExportTemplate(wpiePluginSettings.wpieExportData[t].templateData[e]);else{var i={action:"wpie_export_get_template_data",template_id:e,wpieSecurity:wpiePluginSettings.wpieSecurity};jQuery.ajax({url:wpiePluginSettings.wpieAjaxURL,type:"GET",data:i,dataType:"json",success:function(i){if("error"==i.status)return wpieSetErrorMsg(i.message),wpieHideLoader(),!1;"undefined"!=wpiePluginSettings.wpieExportData[t].templateData&&null!=wpiePluginSettings.wpieExportData[t].templateData||(wpiePluginSettings.wpieExportData[t].templateData=[]),wpiePluginSettings.wpieExportData[t].templateData[e]=i.data,wpieSetExportTemplate(wpiePluginSettings.wpieExportData[t].templateData[e])},error:function(e,t){wpieHandleAjaxError(e,t)}})}wpieHideLoader()}function wpieSetExportTemplate(e){if(void 0!==e.wpie_csv_field_separator&&""!=e.wpie_csv_field_separator?jQuery(".wpie_csv_field_separator").val(e.wpie_csv_field_separator):jQuery(".wpie_csv_field_separator").val(","),void 0!==e.wpie_export_file_name&&""!=e.wpie_export_file_name?jQuery(".wpie_export_file_name").val(e.wpie_export_file_name):jQuery(".wpie_export_file_name").val(""),void 0!==e.wpie_export_file_type&&""!=e.wpie_export_file_type?jQuery(".wpie_export_file_type").val(e.wpie_export_file_type).trigger("chosen:updated"):jQuery(".wpie_export_file_type").val("").trigger("chosen:updated"),void 0!==e.wpie_records_per_iteration&&""!=e.wpie_records_per_iteration?jQuery(".wpie_records_per_iteration").val(e.wpie_records_per_iteration):jQuery(".wpie_records_per_iteration").val(50),void 0!==e.wpie_export_include_bom&&""!=e.wpie_export_include_bom?jQuery(".wpie_export_include_bom").prop("checked",!0):jQuery(".wpie_export_include_bom").prop("checked",!1),void 0!==e.wpie_order_item_sigle_row&&""!=e.wpie_order_item_sigle_row?(jQuery(".wpie_order_item_sigle_row").prop("checked",!0),jQuery(".wpie_order_item_fill_empty_wrapper").slideDown()):(jQuery(".wpie_order_item_sigle_row").prop("checked",!1),jQuery(".wpie_order_item_fill_empty_wrapper").slideUp()),void 0!==e.wpie_order_item_fill_empty&&""!=e.wpie_order_item_fill_empty?jQuery(".wpie_order_item_fill_empty").prop("checked",!0):jQuery(".wpie_order_item_fill_empty").prop("checked",!1),void 0!==e.extra_copy_path&&""!=e.extra_copy_path?jQuery(".extra_copy_path").val(e.extra_copy_path):jQuery(".extra_copy_path").val(""),wpiePluginSettings.wpieExportData.filterRule={},wpiePluginSettings.wpieExportData.filterRuleNumber=1,jQuery(".wpie_content_added_data_rule").html(""),void 0!==e.wpie_export_condition&&""!=e.wpie_export_condition){jQuery(".wpie_content_added_data_rule").html("");var t=e.wpie_export_condition.split("~`|`~");if(void 0!==t[0]){var i="";jQuery.each(t,function(e,t){if(""!=t){var p=t.split("`|~`");jQuery(".wpie_content_data_rule_fields").val(encodeURIComponent(p[0])).trigger("change"),jQuery(".wpie_content_data_rule_select").val(decodeURIComponent(p[1])).trigger("change"),jQuery(".wpie_content_data_rule_value").val(decodeURIComponent(p[2])),wpieAddNewExportRule(i),i=void 0!==p[3]&&"AND"===p[3]?"AND":"OR"}})}jQuery(".wpie_content_data_rule_fields").val("").trigger("chosen:updated"),jQuery(".wpie_content_data_rule_select").val("").trigger("chosen:updated"),jQuery(".wpie_content_data_rule_value").val("")}if(void 0!==e.wpie_wpml_lang&&""!=e.wpie_wpml_lang&&jQuery(".wpie_wpml_lang_"+e.wpie_wpml_lang).prop("checked",!0),void 0!==e.wpie_polylang_lang&&""!=e.wpie_polylang_lang&&jQuery(".wpie_polylang_lang_"+e.wpie_polylang_lang).prop("checked",!0),void 0!==e.fields_data&&""!=e.fields_data){var p="",r=e.fields_data.split("~||~");jQuery.each(r,function(e,t){var i=t.split("|~|"),r=i[0],o=encodeURIComponent(i[1]),a=encodeURIComponent(i[2]);""!=r&&(p+=wpieGenerateFieldsData(o,a,r))}),jQuery(".wpie_field_selection").html(p),"function"==typeof jQuery.fn.sortable&&jQuery(".wpie_field_selection").sortable("refresh"),"function"==typeof jQuery.fn.wpie_editable&&jQuery(".wpie_fields_title:not(.wpie_editable_container)").each(function(){jQuery(this).addClass("wpie_editable_container").wpie_editable("click",function(e){})})}wpieSetSuccessMsg(wpiePluginSettings.wpieLocalizeText.selectSettingloadText),wpieAddProecess("wpieExportRecordCount"),wpieExportRecordCount()}function wpieProcessExport(e){if(!wpieValidateExport())return!1;wpiePluginSettings.wpieExportData.exportStatus="export",wpiePluginSettings.wpieExportData.isPackage=e,wpiePluginSettings.wpieExportData.exportFileType=jQuery(".wpie_export_file_type").val(),wpieGenerateFile()}function wpiePreviewData(){var e=jQuery(".wpie_export_type_select").val(),t=jQuery(".wpie_taxonomies_types_select").val(),i=0;"taxonomies"==e&&""!=t?void 0!==wpiePluginSettings.wpieExportData[e][t]&&(i=wpiePluginSettings.wpieExportData[e][t].totalRecords):i=wpiePluginSettings.wpieExportData[e].totalRecords,wpieGetFieldsData(),wpieSetFieldRuleData();var p=jQuery(".wpie_export_frm").serializeArray();wpiePluginSettings.wpieExportData.wpiePreviewTable=jQuery(".wpie_preview").DataTable({processing:!0,serverSide:!0,searching:!1,ordering:!1,columnDefs:[{render:jQuery.fn.dataTable.render.ellipsis(80,!1,!0),targets:"_all"}],ajax:{url:wpiePluginSettings.wpieAjaxURL,type:"POST",cache:!1,data:function(e){delete e.columns,e.action="wpie_export_get_preview_data",e.total=i,e.wpieSecurity=wpiePluginSettings.wpieSecurity,jQuery.each(p,function(t,i){e[i.name]=i.value})},complete:function(e){}}}),jQuery(".wpie_preview_model").modal("show")}function wpieValidateExport(){var e=jQuery(".wpie_export_type_select").val(),t=jQuery(".wpie_taxonomies_types_select").val();return""==e?(wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.selectExportTypeText),!1):"taxonomies"==e&&""==t?(wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.selectExportTaxTypeText),!1):jQuery(".wpie_field_selection .wpie_fields_title").length<1?(wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.wpieExportEmptyColumnText),!1):void 0===wpiePluginSettings.wpieExportData[e]||!("taxonomies"!=e&&void 0!==wpiePluginSettings.wpieExportData[e].totalRecords&&wpiePluginSettings.wpieExportData[e].totalRecords<1||"taxonomies"==e&&void 0!==wpiePluginSettings.wpieExportData[e][t].totalRecords&&wpiePluginSettings.wpieExportData[e][t].totalRecords<1)||(wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.wpieExportEmptyDataText),!1)}function wpieValidateExportExt(){var e=jQuery(".wpie_export_type_select").val(),t=!0,i="";if(!Array.isArray(wpiePluginSettings.wpieExtensions)){var p=[];jQuery.isEmptyObject(wpiePluginSettings.wpieExtensions)||jQuery.each(wpiePluginSettings.wpieExtensions,function(e){p.push(e)}),wpiePluginSettings.wpieExtensions=p}return""==e?(i=wpiePluginSettings.wpieLocalizeText.selectExportTypeText,t=!1):void 0!==wpiePluginSettings.isWcActive&&1!=wpiePluginSettings.isWcActive&&-1!==jQuery.inArray(e,["shop_customer","shop_order","shop_coupon","product","product_attributes"])?t=!0:"users"==e?wpiePluginSettings.wpieExtensions.indexOf("wpie_user_export")<0&&(i=wpiePluginSettings.wpieLocalizeText.wpieExportUserExtDisableText,t=!1):"shop_customer"==e?wpiePluginSettings.wpieExtensions.indexOf("wpie_wc_export")<0?(i=wpiePluginSettings.wpieLocalizeText.wpieExportWCExtDisableText,t=!1):wpiePluginSettings.wpieExtensions.indexOf("wpie_user_export")<0&&(i=wpiePluginSettings.wpieLocalizeText.wpieExportUserExtDisableText,t=!1):"shop_order"==e||"shop_coupon"==e||"product"==e?wpiePluginSettings.wpieExtensions.indexOf("wpie_wc_export")<0&&(i=wpiePluginSettings.wpieLocalizeText.wpieExportWCExtDisableText,t=!1):"product_attributes"==e&&wpiePluginSettings.wpieExtensions.indexOf("wpie_product_attribute_export")<0&&(i=wpiePluginSettings.wpieLocalizeText.wpieExportattrExtDisableText,t=!1),0!=t||(jQuery(".wpie_export_type_select").val("").trigger("chosen:updated"),wpieRefreshExportData(),wpieSetErrorMsg(i),!1)}function wpieValidateProcess(){return!1!==wpieIsValidTime()&&!1!==wpieIsData()||(wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.wpieInvalidLicense),!1)}function wpieGenerateFile(){var e=jQuery(".wpie_export_type_select").val();void 0!==wpiePluginSettings.wpieExportData[e]&&null!=wpiePluginSettings.wpieExportData[e]||(wpiePluginSettings.wpieExportData[e]=[]),jQuery(".wpie_export_notice").show(),1==wpiePluginSettings.wpieExportData.isPackage&&wpieAddAllFields(),wpieGetFieldsData(),wpieSetFieldRuleData();var t=jQuery(".wpie_export_frm").serialize(),i=0;if("undefined"!=wpiePluginSettings.wpieExportData[e])if("taxonomies"==e){var p=jQuery(".wpie_taxonomies_types_select").val();"undefined"!=wpiePluginSettings.wpieExportData[e][p]&&"undefined"!=wpiePluginSettings.wpieExportData[e][p].totalRecords&&wpiePluginSettings.wpieExportData[e][p].totalRecords>0&&(i=wpiePluginSettings.wpieExportData[e][p].totalRecords)}else"undefined"!=wpiePluginSettings.wpieExportData[e].totalRecords&&wpiePluginSettings.wpieExportData[e].totalRecords>0&&(i=wpiePluginSettings.wpieExportData[e].totalRecords);jQuery.ajax({url:wpiePluginSettings.wpieAjaxURL,type:"POST",data:"action=wpie_export_create_data&wpieSecurity="+wpiePluginSettings.wpieSecurity+"&is_package="+wpiePluginSettings.wpieExportData.isPackage+"&"+t+"&total="+i,dataType:"json",success:function(e){if("error"==e.status)return wpieSetErrorMsg(e.message),!1;0!=e.wpie_export_id&&(wpieResetExportOptions(),jQuery(".wpie_download_exported_file_id").val(e.export_id),wpiePluginSettings.wpieExportData.wpieExportId=e.export_id,delete wpiePluginSettings.wpieExportData.exportProcess,wpieExportAllData())},error:function(e,t){wpieHandleAjaxError(e,t)}})}function wpieResetExportOptions(){jQuery(".wpie_remote_export_wrapper").hide(),jQuery(".wpie_export_process .progress-bar").removeClass("wpie_completed"),jQuery(".progress-bar").css("width","0%").html("0%"),jQuery(".wpie_export_process_header").html(jQuery(".wpie_export_process_header").attr("process_text")),jQuery(".wpie_export_process_per").html("0%"),jQuery(".wpie_export_time_elapsed_value").html("00:00:00"),jQuery(".wpie_export_total_records_value").html("0"),jQuery(".wpie_export_process_btn_wrapper").hide(),jQuery(".wpie_export_process_option_btn_wrapper").show(),new bootstrap.Modal(jQuery(".wpie_export_popup_wrapper"),{backdrop:"static",keyboard:!1}).show(),clearInterval(wpiePluginSettings.wpieExportData.exportInterval),wpiePluginSettings.wpieExportData.exportIntervalSec=0,wpiePluginSettings.wpieExportData.exportInterval=setInterval(function(){jQuery(".wpie_export_time_elapsed_value").html(wpieElapsedTimeString(wpiePluginSettings.wpieExportData.exportIntervalSec++))},1e3)}function wpiePrettyTimeString(e){return(e<10?"0":"")+e}function wpieElapsedTimeString(e){var t=Math.floor(e/3600);e%=3600;var i=Math.floor(e/60);e%=60;var p=Math.floor(e);return(t=wpiePrettyTimeString(t))+":"+(i=wpiePrettyTimeString(i))+":"+(p=wpiePrettyTimeString(p))}function wpieExportAllData(){var e=jQuery(".wpie_export_type_select").val();if(void 0!==wpiePluginSettings.wpieExportData.exportStatus)if("export"==wpiePluginSettings.wpieExportData.exportStatus){var t={action:"wpie_export_update_data",export_id:wpiePluginSettings.wpieExportData.wpieExportId,wpieSecurity:wpiePluginSettings.wpieSecurity};wpiePluginSettings.wpieExportData.exportProcess=jQuery.ajax({url:wpiePluginSettings.wpieAjaxURL,type:"GET",data:t,dataType:"json",success:function(t){if("error"==t.status)return wpieSetErrorMsg(t.message),!1;if(0!=t.wpie_export_id&&"completed"!=t.export_status){var i=t.exported_records,p=0;if(i>0)if("taxonomies"==e){var r=jQuery(".wpie_taxonomies_types_select").val();p=wpiePluginSettings.wpieExportData[e][r].totalRecords>0?parseInt(100*i/wpiePluginSettings.wpieExportData[e][r].totalRecords):100}else p=wpiePluginSettings.wpieExportData[e].totalRecords>0?parseInt(100*i/wpiePluginSettings.wpieExportData[e].totalRecords):100;p=p<100?p:100,jQuery(".progress-bar").css("width",p+"%").html(p+"%"),jQuery(".wpie_export_total_records_value").html(i),wpieExportAllData()}else(1==wpiePluginSettings.wpieExportData.isPackage||""!=wpiePluginSettings.wpieExportData.exportFileType&&"csv"!=wpiePluginSettings.wpieExportData.exportFileType)&&wpiePrepareExportFile(),jQuery(".wpie_export_proccess_title").html(wpiePluginSettings.wpieLocalizeText.wpieExportCompletedText),i=t.exported_records,p=100,clearInterval(wpiePluginSettings.wpieExportData.exportInterval),jQuery(".wpie_export_process_btn_wrapper").show(),jQuery(".wpie_remote_export_wrapper").show(),jQuery(".wpie_export_process_option_btn_wrapper").hide(),jQuery(".progress-bar").css("width","100%").html("100%"),jQuery(".wpie_export_total_records_value").html(i),jQuery(".wpie_export_process .progress-bar").addClass("wpie_completed"),jQuery(".wpie_export_notice").hide()},error:function(e,t){void 0!==wpiePluginSettings.wpieExportData.exportStatus&&"stop"==wpiePluginSettings.wpieExportData.exportStatus||wpieHandleAjaxError(e,t)}})}else if("bg"==wpiePluginSettings.wpieExportData.exportStatus)wpie_update_export_status("bg");else if("pause"==wpiePluginSettings.wpieExportData.exportStatus){jQuery(".wpie_export_process_pause_btn").hide(),jQuery(".wpie_export_process_resume_btn").show();var i=setInterval(function(){(!wpiePluginSettings.wpieExportData.exportProcess||wpiePluginSettings.wpieExportData.exportProcess&&4==wpiePluginSettings.wpieExportData.exportProcess.readyState)&&(jQuery(".wpie_process_action").modal("hide"),clearInterval(i))},1e3);clearInterval(wpiePluginSettings.wpieExportData.exportInterval)}else"stop"==wpiePluginSettings.wpieExportData.exportStatus&&setTimeout(function(){jQuery(".wpie_process_action").modal("hide"),jQuery(".wpie_export_popup_wrapper").modal("hide")},2e3)}function wpiePrepareExportFile(){wpieSetProcessLoader({wpiePrepareFile:wpiePluginSettings.wpieLocalizeText.wpiePrepareFile});var e={action:"wpie_export_prepare_file",export_id:wpiePluginSettings.wpieExportData.wpieExportId,wpieSecurity:wpiePluginSettings.wpieSecurity};jQuery.ajax({url:wpiePluginSettings.wpieAjaxURL,type:"GET",data:e,dataType:"json",success:function(e){if(wpieUpdateProcessLoader("wpiePrepareFile"),"error"==e.status)return wpieSetErrorMsg(e.message),!1},error:function(e,t){wpieHandleAjaxError(e,t)}})}function wpie_update_export_status(e){setTimeout(function(){jQuery(".wpie_process_action").modal("hide"),jQuery(".wpie_export_popup_wrapper").modal("hide")},1500),wpieShowLoader();var t={action:"wpie_export_update_status",export_id:wpiePluginSettings.wpieExportData.wpieExportId,process_status:e,wpieSecurity:wpiePluginSettings.wpieSecurity};jQuery.ajax({url:wpiePluginSettings.wpieAjaxURL,type:"GET",data:t,dataType:"json",success:function(e){if(wpieHideLoader(),"error"==e.status)return wpieSetErrorMsg(e.message),!1;wpieSetSuccessMsg(e.message)},error:function(e,t){wpieHandleAjaxError(e,t)}}),wpieHideLoader()}function wpieGetFieldsData(){var e="";jQuery(".wpie_field_selection .wpie_fields_title").each(function(t,i){var p=jQuery(this).text(),r=(i=decodeURIComponent(jQuery(this).attr("field_data")),decodeURIComponent(jQuery(this).attr("old_field_data")));e+=p+"|~|"+i+"|~|"+r+"~||~"}),jQuery(".wpie_export_fields_data").val(e)}function wpieSetFieldRuleData(){var e="";void 0!==wpiePluginSettings.wpieExportData.filterRule&&jQuery.each(wpiePluginSettings.wpieExportData.filterRule,function(t,i){var p="";jQuery(".wpie_filter_data_rule_"+t).length&&jQuery(".wpie_filter_data_rule_"+t).find(".wpie_rule_condition_option:checked").length&&(p=jQuery(".wpie_filter_data_rule_"+t).find(".wpie_rule_condition_option:checked").val()),e+=decodeURIComponent(i.fieldRule)+"`|~`"+i.fieldCondition+"`|~`"+i.fieldRuleValue+"`|~`"+p+"~`|`~"}),jQuery(".wpie_filter_rule").val(e),jQuery(".wpie_export_condition").val(e)}function wpieSetProcessLoader(e){var t="";jQuery.each(e,function(e,i){t+='<div class="wpie_task_wrapper '+e+'" >',t+='<div class="wpie_task_icon_wrapper wpie_task_processing_icon"><i class="fas fa-spinner fa-spin wpie_spinner_btn_icon"></i></div>',t+='<div class="wpie_task_icon_wrapper wpie_task_completed_icon"><i class="fas fa-check-circle wpie_general_btn_icon " aria-hidden="true"></i></div>',t+='<div class="wpie_task_title">'+i+"</div>",t+="</div>"}),jQuery(".wpie_task_list").html(t),new bootstrap.Modal(jQuery(".wpie_processing_data"),{backdrop:"static",keyboard:!1}).show()}function wpieUpdateProcessLoader(e){if(jQuery("."+e).addClass("task_completed"),!jQuery(".wpie_task_list").find(".wpie_task_wrapper:not(.task_completed)").length){jQuery(".wpie_processing_data").modal("hide");var t=setInterval(function(){jQuery(".wpie_processing_data").hasClass("show")?jQuery(".wpie_processing_data").modal("hide"):clearInterval(t)},1e3)}}jQuery(document).ready(function(e){null==wpiePluginSettings&&(wpiePluginSettings=[]),null==wpiePluginSettings.wpieExportData&&(wpiePluginSettings.wpieExportData=[]),null==wpiePluginSettings.processes&&(wpiePluginSettings.processes=[]),"function"==typeof jQuery.fn.chosen&&jQuery(".wpie_content_data_select").length&&jQuery(".wpie_content_data_select").chosen({search_contains:!0}),"function"==typeof jQuery.fn.autoComplete&&jQuery(".wpie_auto_complete").length&&jQuery(".autoComplete").autoComplete({minChars:0,source:function(e,t){e=e.toLowerCase();var p=[["Australia","au"],["Austria","at"],["Brasil","br"],["Bulgaria","bg"],["Canada","ca"],["China","cn"],["Czech Republic","cz"],["Denmark","dk"],["Finland","fi"],["France","fr"],["Germany","de"],["Hungary","hu"],["India","in"],["Italy","it"],["Japan","ja"],["Netherlands","nl"],["Norway","no"],["Portugal","pt"],["Romania","ro"],["Russia","ru"],["Spain","es"],["Swiss","ch"],["Turkey","tr"],["USA","us"]],r=[];for(i=0;i<p.length;i++)~(p[i][0]+" "+p[i][1]).toLowerCase().indexOf(e)&&r.push(p[i]);t(r)}}),wpieSetToolTip(),"1"!==wpiePluginSettings.isUploadDirWritable&&wpieSetStrictErrorMsg(wpiePluginSettings.wpieLocalizeText.uploadDirWritableError)}),jQuery(document).on("click",".wpie_content_data_header",function(){var e=jQuery(this).closest(".wpie_section_wrapper").find(".wpie_section_content");jQuery(this).hasClass("wpie_section_wrapper_selected")?(jQuery(this).removeClass("wpie_section_wrapper_selected"),jQuery(this).hasClass("wpie_field_mapping_section")&&jQuery(this).closest(".wpie_section_wrapper").find(".wpie_field_mapping_fields_wrapper").slideUp()):(jQuery(this).addClass("wpie_section_wrapper_selected"),jQuery(this).hasClass("wpie_field_mapping_section")&&jQuery(this).closest(".wpie_section_wrapper").find(".wpie_field_mapping_fields_wrapper").slideDown()),e.slideToggle("slow")}),jQuery(document).on("change",".wpie_scheduled_send_email_chk",function(){jQuery(this).closest("td").find(".wpie_options_data_send_mail").slideToggle()}),jQuery(document).on("change",".wpie_export_type_select",function(){wpieShowLoader(),jQuery(".wpie_main_container").hasClass("wpie_export_init_step")&&jQuery(".wpie_main_container").removeClass("wpie_export_init_step");var e=jQuery(this).val();jQuery(".wpie_update_template_btn_wrapper").hide(),jQuery(".wpie_content_data").attr("class","wpie_content_data wpie_"+e),wpieChangeExport(e)}),jQuery(document).on("change",".wpie_content_data_rule_fields",function(){var e,t=jQuery(this).val(),i=JSON.parse(decodeURIComponent(t));if(""!=t){var p=!1;void 0!==i&&null!=i||(i={}),void 0!==i.isDate&&1==i.isDate?(e=wpiePluginSettings.wpieExportData.exportRule.wpie_date,p=!0):e=void 0!==i.isTax&&1==i.isTax?wpiePluginSettings.wpieExportData.exportRule.wpie_tax:void 0!==i.isCapability&&1==i.isCapability?wpiePluginSettings.wpieExportData.exportRule.wpie_capabilities:void 0!==i.isUser&&1==i.isUser?wpiePluginSettings.wpieExportData.exportRule.wpie_user:void 0!==i.isTermParent&&1==i.isTermParent?wpiePluginSettings.wpieExportData.exportRule.wpie_term_parent_slug:wpiePluginSettings.wpieExportData.exportRule.default,!0===p?jQuery(".wpie_value_hints_container").show():jQuery(".wpie_value_hints_container").hide();var r="";jQuery.each(e,function(e,t){r+='<option value="'+e+'">'+t+"</option>"}),wpieRefreshExportRuleFilters(r)}}),jQuery(document).on("click",".wpie_save_add_rule_btn",function(){wpieShowLoader(),wpieAddNewExportRule("AND")?(jQuery(".wpie_content_data_rule_fields").val("").trigger("chosen:updated"),jQuery(".wpie_content_data_rule_select").val("").trigger("chosen:updated"),jQuery(".wpie_content_data_rule_value").val(""),wpieAddProecess("wpieExportRecordCount"),wpieExportRecordCount()):wpieHideLoader()}),jQuery(document).on("click",".wpie_content_data_rule_select",function(){var e=jQuery(this).val();"is_empty"==e||"is_not_empty"==e?jQuery(".wpie_content_data_rule_value").hide():jQuery(".wpie_content_data_rule_value").show()}),jQuery(document).on("show.bs.modal",".modal",function(e){var t=999999+10*jQuery(".modal:visible").length;jQuery(this).css("z-index",t),setTimeout(function(){jQuery(".modal-backdrop").not(".modal-stack").css("z-index",t-1).addClass("modal-stack")},0)}),jQuery(document).on("change",".wpie_taxonomies_types_select",function(){wpieShowLoader(),jQuery(".wpie_content_added_data_rule").html(""),wpieAddProecess("wpieSetExportFields"),wpieSetExportFields(),wpieAddProecess("wpieExportRecordCount"),wpieExportRecordCount()}),jQuery(document).on("change",".wpie_attribute_taxonomies_select",function(){wpieShowLoader(),wpieAddProecess("wpieExportRecordCount"),wpieExportRecordCount()}),jQuery(document).on("click",".wpie_rule_trash_btn",function(){wpieShowLoader();var e=jQuery(this).closest(".wpie_filter_data_rule").attr("wpie_rule_data");jQuery(this).closest(".wpie_filter_data_rule").remove(),jQuery(".wpie_filter_data_rule").last().find(".wpie_filter_data_rule_cond_data").html(""),void 0!==wpiePluginSettings.wpieExportData.filterRule[e]&&delete wpiePluginSettings.wpieExportData.filterRule[e],wpieAddProecess("wpieExportRecordCount"),wpieExportRecordCount()}),jQuery(document).on("change",".wpie_rule_condition_option",function(){wpieShowLoader(),wpieAddProecess("wpieExportRecordCount"),wpieExportRecordCount()}),jQuery(document).on("click",".wpie_fields_remove",function(){jQuery(this).closest(".wpie_fields_wrapper").remove()}),jQuery(document).on("click",".wpie_fields_remove_all",function(){jQuery(".wpie_field_selection").html("")}),jQuery(document).on("click",".wpie_fields_add_all",function(){wpieAddAllFields()}),jQuery(document).on("click",".wpie_fields_add_new",function(){if(""==jQuery(".wpie_export_type_select").val())return wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.selectExportTypeText),!1;jQuery(".wpie_export_php_fun_data").val(""),jQuery(".wpie_export_php_fun").prop("checked",!1),jQuery(".wpie_export_php_fun_inner_wrapper").hide(),jQuery(".wpie_field_editor_date_field_wrapper").hide();var e=jQuery(".wpie_content_data_field_list option").first().text(),t=jQuery(".wpie_content_data_field_list option").first().val();jQuery(".wpie_field_editor_data").val(e),jQuery(".wpie_content_data_field_list").val(t).trigger("chosen:updated"),jQuery(".wpie_field_editor_product_option_field").hide(),new bootstrap.Modal(jQuery(".wpie_field_editor_model")).show()}),jQuery(document).on("click",".wpie_add_bulk_fields",function(){if(""===jQuery(".wpie_export_type_select").val())return wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.selectExportTypeText),!1;jQuery(".wpie_bulk_fields").val("").trigger("chosen:updated"),new bootstrap.Modal(jQuery(".wpie_bulk_fields_model")).show()}),jQuery(document).on("click",".wpie_add_bulk_field_btn",function(){var e=jQuery(".wpie_bulk_fields").val();if(""===e||null===e)return wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.wpieExportEmptyFieldText),!1;var t="";jQuery.each(e,function(e,i){if(""!=i){var p=JSON.parse(decodeURIComponent(i));t+=wpieGenerateFieldsData(i,i,p.name)}}),jQuery(".wpie_field_selection").append(t),"function"==typeof jQuery.fn.sortable&&jQuery(".wpie_field_selection").sortable("refresh"),"function"==typeof jQuery.fn.wpie_editable&&jQuery(".wpie_fields_title:not(.wpie_editable_container)").each(function(){jQuery(this).addClass("wpie_editable_container").wpie_editable("click",function(e){})}),jQuery(".wpie_bulk_fields_model").modal("hide")}),jQuery(document).on("click",".wpie_fields_settings",function(){jQuery(".wpie_export_type_select").val();jQuery(".wpie_fields_title_active").removeClass("wpie_fields_title_active");var e=jQuery(this).closest(".wpie_fields_wrapper");e.addClass("wpie_fields_title_active");var t=e.find(".wpie_fields_title").text(),i=e.find(".wpie_fields_title").attr("old_field_data"),p=e.find(".wpie_fields_title").attr("field_data"),r=JSON.parse(decodeURIComponent(p));void 0!==r.isPhp&&1==r.isPhp?(jQuery(".wpie_export_php_fun").prop("checked",!0),jQuery(".wpie_export_php_fun_inner_wrapper").show()):(jQuery(".wpie_export_php_fun").prop("checked",!1),jQuery(".wpie_export_php_fun_inner_wrapper").hide()),"undefined"==r.metaKey||"_upsell_ids"!=r.metaKey&&"_crosssell_ids"!=r.metaKey?jQuery(".wpie_field_editor_product_option_field").hide():("undefined"!=r.UpCrossSell?jQuery(".wpie_field_editor_product_options_field").val(r.UpCrossSell).trigger("chosen:updated"):jQuery(".wpie_field_editor_product_options_field").val("sku").trigger("chosen:updated"),jQuery(".wpie_field_editor_product_option_field").show()),void 0!==r.phpFun?jQuery(".wpie_export_php_fun_data").val(r.phpFun):jQuery(".wpie_export_php_fun_data").val(""),"undefined"!=r.isDate&&1==r.isDate?(void 0!==r.dateType?jQuery(".wpie_field_editor_date_field").val(r.dateType).trigger("chosen:updated"):jQuery(".wpie_field_editor_date_field").val("php").trigger("chosen:updated"),void 0!==r.dateFormat?jQuery(".wpie_field_editor_date_field_format").val(r.dateFormat):jQuery(".wpie_field_editor_date_field_format").val(""),jQuery(".wpie_field_editor_date_field_wrapper").show()):jQuery(".wpie_field_editor_date_field_wrapper").hide(),jQuery(".wpie_field_editor_data").val(t),jQuery(".wpie_content_data_field_list").val(i).trigger("chosen:updated"),jQuery(".wpie_field_editor_model").modal("show")}),jQuery(document).on("change",".wpie_export_php_fun",function(){jQuery(".wpie_export_php_fun_inner_wrapper").slideToggle("slow")}),jQuery(document).on("click",".wpie_export_save_field_btn",function(){jQuery(".wpie_export_type_select").val();var e=jQuery(".wpie_field_editor_data").val();if(""==e)return wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.wpieExportEmptyFieldText),!1;var t=jQuery(".wpie_content_data_field_list").val();if(""!=t){var i=JSON.parse(decodeURIComponent(jQuery(".wpie_content_data_field_list").val()));jQuery(".wpie_export_php_fun").is(":checked")?i.isPhp=!0:i.isPhp=!1,i.phpFun=jQuery(".wpie_export_php_fun_data").val(),"undefined"!=i.isDate&&1==i.isDate&&(i.dateType=jQuery(".wpie_field_editor_date_field").val(),i.dateFormat=jQuery(".wpie_field_editor_date_field_format").val()),"undefined"!=i.UpCrossSell&&(i.UpCrossSell=jQuery(".wpie_field_editor_product_options_field").val());var p=encodeURIComponent(JSON.stringify(i));if(jQuery(".wpie_fields_title_active").length>0){var r=jQuery(".wpie_fields_title_active");r.find(".wpie_fields_title").text(e),r.find(".wpie_fields_title").attr("field_data",p),r.find(".wpie_fields_title").attr("old_field_data",t)}else{var o=wpieGenerateFieldsData(p,t,e);jQuery(".wpie_field_selection").append(o),"function"==typeof jQuery.fn.sortable&&jQuery(".wpie_field_selection").sortable("refresh"),"function"==typeof jQuery.fn.wpie_editable&&jQuery(".wpie_fields_title:not(.wpie_editable_container)").each(function(){jQuery(this).addClass("wpie_editable_container").wpie_editable("click",function(e){})})}}jQuery(".wpie_field_editor_model").modal("hide")}),jQuery(document).on("click",".wpie_save_template_btn",function(){wpieSaveTemplate(0,jQuery(".wpie_export_template_name").val()),jQuery(".wpie_export_template_name").val("")}),jQuery(document).on("click",".wpie_update_template_btn",function(){var e=jQuery(".wpie_template_list_select").val();if(""===e)return wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.wpieEmptyTemplate),!1;wpieSaveTemplate(e,"")}),jQuery(document).on("change",".wpie_template_list_select",function(){wpieShowLoader();var e=jQuery(this).val();if(""==e)return wpieHideLoader(),jQuery(".wpie_update_template_btn_wrapper").hide(),!1;jQuery(".wpie_update_template_btn_wrapper").show(),jQuery(".wpie_export_settings_list_select").val("").trigger("chosen:updated"),wpieChangeExportSettings(e)}),jQuery(document).on("change",".wpie_export_settings_list_select",function(){wpieShowLoader();var e=jQuery(this).val();if(""==e)return wpieHideLoader(),!1;jQuery(".wpie_template_list_select").val("").trigger("chosen:updated"),jQuery(".wpie_update_template_btn_wrapper").hide(),wpieChangeExportSettings(e)}),jQuery(document).on("change",".wpie_content_data_field_list",function(){var e=jQuery(this).find("option:selected").text();jQuery(".wpie_field_editor_data").val(e);var t=JSON.parse(decodeURIComponent(jQuery(this).val()));"undefined"!=t.isDate&&1==t.isDate?jQuery(".wpie_field_editor_date_field_wrapper").show():jQuery(".wpie_field_editor_date_field_wrapper").hide(),"undefined"==t.metaKey||"_upsell_ids"!=t.metaKey&&"_crosssell_ids"!=t.metaKey?jQuery(".wpie_field_editor_product_option_field").hide():jQuery(".wpie_field_editor_product_option_field").show()}),jQuery(document).on("click",".wpie_migrate_export_data_btn",function(){wpieProcessExport(1)}),jQuery(document).on("click",".wpie_export_data_btn",function(){wpieProcessExport(0)}),jQuery(document).on("click",".wpie_export_preview_btn",function(){if(!wpieValidateExport())return!1;void 0!==wpiePluginSettings.wpieExportData.wpiePreviewTable&&wpiePluginSettings.wpieExportData.wpiePreviewTable.destroy();var e=jQuery(".wpie_preview"),t=jQuery("<tr>");jQuery(".wpie_field_selection .wpie_fields_title").each(function(e,i){var p=jQuery(this).text(),r=jQuery("<th>").addClass("wpie_preview_header_data wpie_preview"+e).text(p);t.append(r)});var i=jQuery("<thead>").append(t.clone()),p=jQuery("<tfoot>").append(t);e.html("").append(i).append(p),wpiePreviewData()}),jQuery(document).on("change",".wpie_field_editor_date_field",function(){"php"==jQuery(this).val()?jQuery(".wpie_field_editor_date_field_format_wrapper").show():jQuery(".wpie_field_editor_date_field_format_wrapper").hide()}),jQuery(document).on("click",".wpie_export_process_close_btn",function(){jQuery(".wpie_export_popup_wrapper").modal("hide")}),jQuery(document).on("click",".wpie_export_process_pause_btn",function(){new bootstrap.Modal(jQuery(".wpie_process_action"),{backdrop:"static",keyboard:!1}).show(),wpiePluginSettings.wpieExportData.exportStatus="pause"}),jQuery(document).on("click",".wpie_export_bg_process_btn",function(){"pause"==wpiePluginSettings.wpieExportData.exportStatus&&wpiePluginSettings.wpieExportData.exportProcess&&4==wpiePluginSettings.wpieExportData.exportProcess.readyState?wpie_update_export_status("bg"):(new bootstrap.Modal(jQuery(".wpie_process_action"),{backdrop:"static",keyboard:!1}).show(),wpiePluginSettings.wpieExportData.exportStatus="bg")}),jQuery(document).on("click",".wpie_export_process_stop_btn",function(){"pause"==wpiePluginSettings.wpieExportData.exportStatus&&jQuery(".wpie_export_popup_wrapper").modal("hide"),wpiePluginSettings.wpieExportData.exportStatus="stop",jQuery(".wpie_process_action").modal("hide"),jQuery(".wpie_export_popup_wrapper").modal("hide"),wpiePluginSettings.wpieExportData.exportProcess&&4!=wpiePluginSettings.wpieExportData.exportProcess.readyState&&wpiePluginSettings.wpieExportData.exportProcess.abort()}),jQuery(document).on("click",".wpie_export_process_resume_btn",function(){wpiePluginSettings.wpieExportData.exportStatus="export",jQuery(".wpie_export_process_pause_btn").show(),jQuery(".wpie_export_process_resume_btn").hide(),wpiePluginSettings.wpieExportData.exportInterval=setInterval(function(){jQuery(".wpie_export_time_elapsed_value").html(wpieElapsedTimeString(wpiePluginSettings.wpieExportData.exportIntervalSec++))},1e3),wpieExportAllData()}),jQuery(document).on("click",".wpie_export_download_btn",function(){jQuery(".wpie_download_export_id").val(wpiePluginSettings.wpieExportData.wpieExportId),jQuery(".wpie_file_download_action").submit()}),jQuery(document).on("change",".wpie_order_item_sigle_row",function(){jQuery(".wpie_order_item_fill_empty_wrapper").slideToggle()}),jQuery(document).on("change",".wpie_wpml_lang,.wpie_polylang_lang",function(){if(""==jQuery(".wpie_export_type_select").val())return wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.selectExportTypeText),!1;wpieShowLoader(),wpieAddProecess("wpieExportRecordCount"),wpieExportRecordCount()}),jQuery(document).on("click",".wpie_save_scheduled_btn",function(){if(!1===wpieValidateExport())return!1;wpieShowLoader();var e=jQuery(".wpie_export_type_select").val();void 0!==wpiePluginSettings.wpieExportData[e]&&null!=wpiePluginSettings.wpieExportData[e]||(wpiePluginSettings.wpieExportData[e]=[]),wpieGetFieldsData(),wpieSetFieldRuleData();var t=jQuery(".wpie_export_frm").serialize();jQuery.ajax({url:wpiePluginSettings.wpieAjaxURL,type:"POST",data:"action=wpie_export_save_schedule_data&wpieSecurity="+wpiePluginSettings.wpieSecurity+"&"+t,dataType:"json",success:function(e){if(wpieHideLoader(),"error"==e.status)return wpieSetErrorMsg(e.message),!1;wpieSetSuccessMsg(e.message)},error:function(e,t){wpieHandleAjaxError(e,t)}})}),jQuery(document).on("change",".wpie_migrate_package",function(){jQuery(this).is(":checked")&&wpieAddAllFields()}),jQuery(document).on("change",".wpie_export_file_type",function(){"xml"===jQuery(this).val()?jQuery(".wpie_skip_empty_nodes_wrapper").show():jQuery(".wpie_skip_empty_nodes_wrapper").hide()}),jQuery(document).on("change",".wpie_product_variation_options",function(){if(""==jQuery(".wpie_export_type_select").val())return wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.selectExportTypeText),!1;"all"===jQuery(this).val()?(jQuery(".wpie_migrate_export_data_btn").removeClass("disabled"),jQuery(".wpie_export_product_variation_warning").hide()):(jQuery(".wpie_export_product_variation_warning").show(),jQuery(".wpie_migrate_export_data_btn").addClass("disabled")),wpieShowLoader(),wpieAddProecess("wpieExportRecordCount"),wpieExportRecordCount()}),jQuery(document).on("change",".wpie_export_only_customer_with_purchase",function(){if(""==jQuery(".wpie_export_type_select").val())return wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.selectExportTypeText),!1;wpieShowLoader(),wpieAddProecess("wpieExportRecordCount"),wpieExportRecordCount()}),jQuery(document).on("click",".wpie_show_more_text",function(){var e=jQuery(this).parent().find(".wpie-ellipsis");if(jQuery(this).hasClass("wpie_show_less")){var t=e.attr("shortened");jQuery(this).removeClass("wpie_show_less").text(wpiePluginSettings.wpieLocalizeText.showMoreText)}else{t=e.attr("content");jQuery(this).addClass("wpie_show_less").text(wpiePluginSettings.wpieLocalizeText.showLessText)}e.text(t)});
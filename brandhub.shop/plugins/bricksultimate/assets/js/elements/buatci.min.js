function buATCTooltip(){document.querySelectorAll(".bu-prd-type-simple").forEach(function(t){var a=JSON.parse(t.getAttribute("data-atci-tooltip"))||!1;a&&tippy(t,{appendTo:t,content:a.content,maxWidth:"none",interactive:!0,animation:a.animation,placement:a.placement,arrow:!0})}),document.querySelectorAll(".brxe-bu-qty").forEach(function(t){buATCIQuantityTriggers(t)})}function ATCIUpdateQty(t,a=!1){var e=t.value,t=t.closest(".brxe-loop-builder-on");t&&a&&(atcBtn=t.querySelector(a)||null)&&atcBtn.setAttribute("data-quantity",e)}function buATCIQuantityTriggers(d){let c=1;jQuery(d).on("focusin",".qty",function(t){c=$(t.currentTarget).val()}),jQuery(d).on("click",".action",function(t){var a,e,t=jQuery(t.currentTarget),r=t.siblings(".qty");r.length&&(a=itemBaseQty=parseFloat(r.val()),e=parseFloat(r.attr("step")),parseFloat(r.attr("min")),parseFloat(r.attr("max")),t=t.hasClass("plus")?a+e:a-e,r.val(t).trigger("change"))}),jQuery(d).on("change",".qty",function(t){var a=this,e=parseFloat(a.value),r=parseFloat(a.getAttribute("step")),n=parseFloat(a.getAttribute("min")),o=parseFloat(a.getAttribute("max")),i=!1;(isNaN(e)||e<0||e<n||o<e||e%r!=0)&&(i=!0),a.value=i?c:e,ATCIUpdateQty(this,d.getAttribute("data-trigger-class"))})}function buAddToCartIcon(o){o(document.body).on("click",".bu-prd-type-simple",function(t){if(!t.target.closest(".tippy-content")){var a=this.getAttribute("data-out-of-stock")||!1;if(!a&&"undefined"!=typeof wc_add_to_cart_params){t.preventDefault();var e=o(this).find("[data-product_id]"),r=o(this);if(e.addClass("hide-atc-btn"),r.find(".bu-ajax-spinner").addClass("show-spinner"),r.is(".show-spinner")&&r.addClass("removePointer"),!1===o(document.body).triggerHandler("should_send_ajax_request.adding_to_cart",[e]))return o(document.body).trigger("ajax_request_not_sent.adding_to_cart",[!1,!1,e]),!0;var n={};o.each(e.data(),function(t,a){n[t]=a}),o.each(e[0].dataset,function(t,a){n[t]=a}),o(document.body).trigger("adding_to_cart",[e,n]),o.ajax({type:"POST",url:wc_add_to_cart_params.wc_ajax_url.toString().replace("%%endpoint%%","add_to_cart"),data:n,success:function(t){e.removeClass("hide-atc-btn"),r.find(".bu-ajax-spinner").removeClass("show-spinner"),r.removeClass("removePointer"),t&&(t.error&&t.product_url?window.location=t.product_url:"yes"===wc_add_to_cart_params.cart_redirect_after_add?window.location=wc_add_to_cart_params.cart_url:(r.find(".bu-added-icon").show(),o(document.body).trigger("added_to_cart",[t.fragments,t.cart_hash,e])))},dataType:"json"})}}})}window.addEventListener("DOMContentLoaded",buATCTooltip),jQuery(document).ready(function(a){bricksIsFrontend&&(buAddToCartIcon(a),window.WP_Grid_Builder&&WP_Grid_Builder.on("init",function(t){t.facets.on("appended",function(t){buAddToCartIcon(a)})}))});
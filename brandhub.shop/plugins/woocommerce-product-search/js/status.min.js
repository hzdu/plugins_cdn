/*!
 * indexer-status.js
 *
 * Copyright (c) "kento" Karim Rahimpur www.itthinx.com
 *
 * This code is provided subject to the license granted.
 * Unauthorized use and distribution is prohibited.
 * See COPYRIGHT.txt and LICENSE.txt
 *
 * This code is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
 *
 * This header and all notices must be kept intact.
 *
 * @author itthinx
 * @package woocommerce-product-search
 * @since 4.11.0
 */
(function(a){a(document).ready(function(){if(typeof e==="undefined"){var e={completed:"Completed",running:"Running",stopped:"Stopped",warning:"Warning",interval:28999,long_interval:58999}}var b=e.interval;var d=e.long_interval;var c=function(){a(".woocommerce-product-search-admin-bar-status").each(function(){var g=b;const i=a(this).data("id");const f=a(this).data("url");const h=a.post(f,{},function(k){var j=typeof k.pct!=="undefined"&&k.pct>=100;if(typeof k.status!=="undefined"){if(k.status){a("#"+i).find(".woocommerce-product-search-indexer-status").removeClass("status-warning status-stopped");a("#"+i).find(".woocommerce-product-search-indexer-status").addClass("status-running");if(!j){a("#"+i).find(".woocommerce-product-search-indexer-status").text(e.running);a("#"+i).find(".woocommerce-product-search-indexer-status").attr("title",e.running)}else{a("#"+i).find(".woocommerce-product-search-indexer-status").text(e.completed);a("#"+i).find(".woocommerce-product-search-indexer-status").attr("title",e.completed);a("#"+i).find(".woocommerce-product-search-indexer-status").addClass("status-completed")}}else{a("#"+i).find(".woocommerce-product-search-indexer-status").text(e.stopped);a("#"+i).find(".woocommerce-product-search-indexer-status").attr("title",e.stopped);a("#"+i).find(".woocommerce-product-search-indexer-status").removeClass("status-warning status-running status-completed");a("#"+i).find(".woocommerce-product-search-indexer-status").addClass("status-stopped");if(j){a("#"+i).find(".woocommerce-product-search-indexer-status").addClass("status-completed")}}}if(typeof k.percent!=="undefined"){a("#"+i).find(".woocommerce-product-search-indexer-percent").text(k.percent)}if(j){g=d}},"json").fail(function(k,n,l){var m=typeof l!=="undefined"?l:"?";var j=typeof k!=="undefined"&&typeof k.status!=="undefined"?" ["+k.status+"]":"";a("#"+i).find(".woocommerce-product-search-indexer-status").text(e.warning);a("#"+i).find(".woocommerce-product-search-indexer-status").attr("title",e.warning+" : "+m+j);a("#"+i).find(".woocommerce-product-search-indexer-status").removeClass("status-running");a("#"+i).find(".woocommerce-product-search-indexer-status").removeClass("status-stopped");a("#"+i).find(".woocommerce-product-search-indexer-status").removeClass("status-completed");a("#"+i).find(".woocommerce-product-search-indexer-status").addClass("status-warning");console.log("Could not obtain the status: "+m+j)});setTimeout(c,g)})};setTimeout(c,b)})})(jQuery);
!function(t){"use strict";t(document).ready(function(){(!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||_woocommerce_notification_params.enableMobile)&&(t("#message-purchased").length>0&&(woo_notification,viSwipeDetect(document.getElementById("message-purchased"),function(e){"none"!==e&&(parseInt(woo_notification.show_close)>0&&parseInt(woo_notification.time_close)>0&&(t("#message-purchased").off(),woo_notification.setCookie("woo_notification_close",1,3600*parseInt(woo_notification.time_close))),woo_notification.message_hide(!1,e))})),"undefined"!=typeof gtm4wp_datalayer_name&&"undefined"!=typeof gtm4wp_first_container_id&&viwn_gtm4wp_compatible())}),t(window).on("load",function(){if(!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||_woocommerce_notification_params.enableMobile){var t=woo_notification;if(t.loop=_woocommerce_notification_params.loop,t.id=_woocommerce_notification_params.viwn_flexslider_pd_id||"",t.category_name=_woocommerce_notification_params.viwn_flexslider_category_name||"",t.loop_session=_woocommerce_notification_params.loop_session,t.loop_session_duration=parseFloat(_woocommerce_notification_params.loop_session_duration),t.loop_session_total=parseInt(_woocommerce_notification_params.loop_session_total),t.init_delay=parseInt(_woocommerce_notification_params.initial_delay),t.total=parseInt(_woocommerce_notification_params.notification_per_page),t.display_time=parseInt(_woocommerce_notification_params.display_time),t.next_time=parseInt(_woocommerce_notification_params.next_time),t.ajax_url=_woocommerce_notification_params.ajax_url,t.products=_woocommerce_notification_params.products||"",t.messages=_woocommerce_notification_params.messages,t.image=_woocommerce_notification_params.image,t.redirect_target=_woocommerce_notification_params.redirect_target,t.time=_woocommerce_notification_params.time,t.display_effect=_woocommerce_notification_params.display_effect,t.hidden_effect=_woocommerce_notification_params.hidden_effect,t.names=_woocommerce_notification_params.names,t.detect=_woocommerce_notification_params.detect,t.billing=_woocommerce_notification_params.billing,t.in_the_same_cate=_woocommerce_notification_params.in_the_same_cate,t.message_custom=_woocommerce_notification_params.message_custom,t.message_number_min=_woocommerce_notification_params.message_number_min,t.message_number_max=_woocommerce_notification_params.message_number_max,t.time_close=_woocommerce_notification_params.time_close,t.show_close=_woocommerce_notification_params.show_close,t.change_virtual_time=_woocommerce_notification_params.change_virtual_time,t.start_virtual_time=_woocommerce_notification_params.start_virtual_time,t.end_virtual_time=_woocommerce_notification_params.end_virtual_time,t.change_message_number=_woocommerce_notification_params.change_message_number,t.current_hour=parseInt(_woocommerce_notification_params.current_hour),t.atc_icon_url=_woocommerce_notification_params.atc_icon_url,t.close_icon_style=_woocommerce_notification_params.close_icon_style,t.add_to_cart_url=_woocommerce_notification_params.add_to_cart_url,t.nonce=_woocommerce_notification_params.nonce,t.is_single_product=_woocommerce_notification_params.is_single_product,0==_woocommerce_notification_params.billing&&0==_woocommerce_notification_params.detect){t.cities=[t.getCookie("wn_city")],t.country=[t.getCookie("wn_country")];var e=t.getCookie("wn_ip");e||(t.cities=[t.getCookie("wn_city")],t.country=[t.getCookie("wn_country")],e=t.getCookie("wn_ip")),e&&"undefined"!=e&&t.init()}else t.cities=_woocommerce_notification_params.cities,t.country=_woocommerce_notification_params.country,t.init()}}),window.viwn_gtm4wp_compatible=function(){t(document).on("viwn_view_product",function(t){if("interactive"===document.readyState)return!1;let e=woo_notification.current_product_showing;if(void 0===e)return!1;let i={name:e.title,id:e.product_id,price:e.price};window[gtm4wp_datalayer_name].push({event:"viwn.gtm4wp.view_item",ecommerce:{currency:gtm4wp_currency,value:e.price,items:[i]}})})},window.vi_wn_b64DecodeUnicode=function(t){var e="";if(t)try{e=decodeURIComponent(atob(t).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))}catch(i){return t}return e},window.viSwipeDetect=function(t,e){var i,s,n,o,a,r,c,u=t,l=e||function(t){};u.addEventListener("touchstart",function(t){t.preventDefault();let e=t.changedTouches[0];i="none",s=e.pageX,n=e.pageY,c=new Date().getTime()},{passive:!0}),u.addEventListener("touchmove",function(t){t.preventDefault()},{passive:!0}),u.addEventListener("touchend",function(t){t.preventDefault();var e=t.changedTouches[0];o=e.pageX-s,a=e.pageY-n,(r=new Date().getTime()-c)<=300&&(Math.abs(o)>=150&&100>=Math.abs(a)?i=o<0?"left":"right":Math.abs(a)>=150&&100>=Math.abs(o)&&(i=a<0?"up":"down")),l(i)},{passive:!0})},window.woo_notification={billing:0,in_the_same_cate:0,loop:0,loop_session:0,loop_session_duration:3600,loop_session_total:30,timeOutShow:0,timeOutHide:0,init_delay:5,total:30,display_time:5,next_time:60,count:0,intel:0,wn_popup:0,id:0,category_name:"",messages:"",products:"",ajax_url:"",display_effect:"",hidden_effect:"",time:"",names:"",cities:"",country:"",message_custom:"",message_number_min:"",message_number_max:"",detect:0,time_close:0,show_close:0,change_virtual_time:"",start_virtual_time:"",end_virtual_time:"",change_message_number:"",current_hour:"",gmt_offset:"",first_name_index:[],close_icon_style:0,add_to_cart_url:"",nonce:"",shortcodes:["{first_name}","{short_name}","{city}","{state}","{country}","{product}","{product_with_rating}","{product_with_atc}","{product_with_rating_atc}","{product_with_link}","{product_with_link_rating}","{product_with_link_atc}","{product_with_link_rating_atc}","{time_ago}","{custom}",],init:function(){if(1==this.loop&&1==this.loop_session){var e=this.getCookie("woo_notification_session"),i=Date.now(),s=this.getCookie("woo_notification_displaying");if(s){this.timeOutShow=setTimeout(function(){woo_notification.init()},s-i);return}if(e){var n=e.split(":"),o=parseInt(n[0]),a=n[1];if(o>=this.loop_session_total){this.timeOutShow=setTimeout(function(){woo_notification.init()},a-i);return}}}this.ajax_url?this.ajax_get_data():setTimeout(function(){woo_notification.get_product()},1e3*this.init_delay),t("#message-purchased").on("mouseenter",function(){window.clearTimeout(woo_notification.wn_popup),window.clearTimeout(woo_notification.timeOutShow),window.clearTimeout(woo_notification.timeOutHide)}).on("mouseleave",function(){woo_notification.message_show(!0)}),t(document).on("click",".wn-notification-atc i",function(e){t(this).closest(".wn-notification-atc").find(".viwn-add-to-cart-button").trigger("click")}),t(document).on("click",".wn-notification-atc a, .wn-notification-image-wrapper, .wn-popup-product-title-with-link",function(e){if(t(this).is(".viwn-add-to-cart-button")){if(t(this).is(".product_type_external")||t(this).is(".viwn-add-to-cart-button")&&t(this).is(".viwn-can-add-to-cart"))return}else t(document).trigger("viwn_view_product");let i=woo_notification.current_product_showing?.product_id,s=woo_notification.current_product_showing?.parent_id;if(i){if(t("form.cart:visible").length){let n=t("form.cart:visible").eq(0),o=n.find('[name="add-to-cart"]').val(),a=n.find('[name="product_id"]').val(),r=n.find('[name="variation_id"]').val();if(!s&&![o,a,r].includes(i.toString())||s&&![o,a,r].includes(s.toString()))return;e.preventDefault(),e.stopPropagation(),n[0].scrollIntoView()}else t(`#product-${i}:visible`).length&&(e.preventDefault(),e.stopPropagation(),t(`#product-${i}:visible`)[0].scrollIntoView())}})},detect_address:function(){this.getCookie("wn_ip")},ajax_get_data:function(){if(this.ajax_url&&!this.getCookie("woo_notification_close")){var e="",i=new Date().getTime(),s=1e3*woo_notification.init_delay;this.id?e="&viwn_pd_id="+this.id:this.category_name&&(e="&viwn_category_name="+this.category_name),t.ajax({type:"POST",data:"action=woonotification_get_product"+e+"&nonce="+woo_notification.nonce,url:this.ajax_url,success:function(t){var e=JSON.parse(t);if(e&&"undefined"!=e&&e.length>0){woo_notification.products=e;(s-=new Date().getTime()-i)>0?setTimeout(function(){woo_notification.get_product()},s):woo_notification.get_product()}},error:function(t){}})}},message_show:function(e=!1){var i=t("#message-purchased");if(e||(this.count++,this.audio()),1==this.loop&&1==this.loop_session){var s=this.getCookie("woo_notification_session"),n=1,o=1e3*this.loop_session_duration,a=Date.now(),r=a+o,c=this.getCookie("woo_notification_displaying");if(window.clearTimeout(this.timeOutHide),!e){if(c){window.clearTimeout(this.timeOutShow),this.timeOutShow=setTimeout(function(){woo_notification.get_product()},c-a);return}if(s){var u=s.split(":");if(n=parseInt(u[0]),o=(r=u[1])-a,n>=this.loop_session_total){window.clearTimeout(this.timeOutShow),this.timeOutShow=setTimeout(function(){woo_notification.get_product()},o);return}n++}this.setCookieNew("woo_notification_session",r,n+":"+r,!0)}this.timeOutHide=setTimeout(function(){woo_notification.message_hide()},1e3*this.display_time),this.setCookieNew("woo_notification_displaying",this.display_time+this.next_time),i.hasClass(this.hidden_effect)&&i.removeClass(this.hidden_effect),i.addClass(this.display_effect).css("display","inline-grid")}else this.wn_popup=setTimeout(function(){woo_notification.message_hide()},1e3*this.display_time),window.clearInterval(this.intel),i.hasClass(this.hidden_effect)&&i.removeClass(this.hidden_effect),i.addClass(this.display_effect).css("display","inline-grid")},message_hide:function(e=!1,i=""){var s=t("#message-purchased");switch(s.hasClass(this.display_effect)&&s.removeClass(this.display_effect),i){case"left":s.addClass("bounceOutLeft"),setTimeout(function(t){t.removeClass("bounceOutLeft")},1001,s);break;case"right":s.addClass("bounceOutRight"),setTimeout(function(t){t.removeClass("bounceOutRight")},1001,s);break;case"up":s.addClass("bounceOutUp"),setTimeout(function(t){t.removeClass("bounceOutUp")},1001,s);break;case"down":s.addClass("bounceOutDown"),setTimeout(function(t){t.removeClass("bounceOutDown")},1001,s);break;default:s.addClass(this.hidden_effect)}if(s.fadeOut(1e3),!(e||this.getCookie("woo_notification_close"))){var n=this.count;if(1==this.loop){if(1==this.loop_session){var o=this.getCookie("woo_notification_session"),a=1,r=1e3*this.loop_session_duration;if(this.getCookie("woo_notification_displaying"),window.clearTimeout(this.timeOutHide),window.clearTimeout(this.timeOutShow),o){var c=new Date,u=o.split(":");if(a=u[0],r=u[1]-c.getTime(),a>=this.loop_session_total){this.timeOutShow=setTimeout(function(){woo_notification.get_product()},r);return}}this.total>n?this.timeOutShow=setTimeout(function(){woo_notification.get_product()},1e3*this.next_time):this.timeOutShow=setTimeout(function(){woo_notification.get_product()},r)}else this.total>n&&(window.clearTimeout(this.wn_popup),this.intel=setInterval(function(){woo_notification.get_product()},1e3*this.next_time))}else window.clearTimeout(this.wn_popup),window.clearInterval(this.intel)}},get_time_cal:function(){return this.change_virtual_time&&this.start_virtual_time&&this.end_virtual_time?this.random(3600*this.start_virtual_time,3600*this.end_virtual_time):this.random(0,3600*this.time)},get_time_string:function(){var t=this.get_time_cal(),e=parseFloat(t/86400);return e>1?1==(e=parseInt(e))?e+" "+_woocommerce_notification_params.str_day:e+" "+_woocommerce_notification_params.str_days:(e=parseFloat(t/3600))>1?1==(e=parseInt(e))?e+" "+_woocommerce_notification_params.str_hour:e+" "+_woocommerce_notification_params.str_hours:(e=parseFloat(t/60))>1?1==(e=parseInt(e))?e+" "+_woocommerce_notification_params.str_min:e+" "+_woocommerce_notification_params.str_mins:e<10?_woocommerce_notification_params.str_few_sec:(e=parseInt(e))+" "+_woocommerce_notification_params.str_secs},get_billing_short_name:function(t,e){var i="";i+=t;for(var s="",n=e.split(" "),o=0;o<n.length;o++)s+=" "+n[o].charAt(0).toUpperCase()+".";return(i+=s).trim()},get_product:function(){var e,i,s,n,o,a,r,c,u=this.products,l=this.messages,d=this.image,m=this.redirect_target;if("undefined"!=u&&u&&l&&u.length>0&&l.length>0){var h=l[a=woo_notification.random(0,l.length-1)],g=u[a=woo_notification.random(0,u.length-1)];woo_notification.current_product_showing=g,parseInt(this.billing)>0&&1>parseInt(this.in_the_same_cate)?(e=vi_wn_b64DecodeUnicode(g.first_name),c=vi_wn_b64DecodeUnicode(g.last_name),n=vi_wn_b64DecodeUnicode(g.city),i=vi_wn_b64DecodeUnicode(g.state),s=vi_wn_b64DecodeUnicode(g.country),o=g.time,r=this.get_billing_short_name(e,c)):(this.names&&"undefined"!=this.names?(a=woo_notification.random(0,this.names.length-1),e=vi_wn_b64DecodeUnicode(this.names[a])):e="",this.cities&&"undefined"!=this.cities?(a=woo_notification.random(0,this.cities.length-1),n=vi_wn_b64DecodeUnicode(this.cities[a])):n="",i="",s=this.country,o=this.get_time_string());var p='<div class="wn-notification-star-rating">'+g.rating_html+"</div>",f="";g?.atc_button&&(f='<div class="wn-notification-atc" data-wn-product_id="'+g.product_id+'"><i><img src="'+this.atc_icon_url+'" alt="atc_icon"></i>'+g.atc_button+"</div>");var $='<span class="wn-popup-product-title">'+g.title+"</span>",w=$+f,v=$+p+f,b='<a class="wn-popup-product-title-with-link"';"1"===m&&(b+='target="_blank"');var y=(b+=' href="'+g.url+'">'+g.title+"</a>")+p,_=b+f,C=b+p+f,k="<small>"+_woocommerce_notification_params.str_about+" "+o+" "+_woocommerce_notification_params.str_ago+" </small>",O=this.message_custom,x="";let T="";g.thumb?(t("#message-purchased").addClass("wn-product-with-image").removeClass("wn-product-without-image"),"1"===d?(x='<a class="wn-notification-image-wrapper" ',"1"===m&&(x+='target="_blank"'),x+=' href="'+g.url+'"><img class="wn-notification-image" src="'+g.thumb+'"></a>'):x='<span class="wn-notification-image-wrapper"><img class="wn-notification-image" src="'+g.thumb+'"></span>'):t("#message-purchased").addClass("wn-product-without-image").removeClass("wn-product-with-image"),T=/{number}/g,O=O.replaceAll(T,this.get_data_custom_number(g.url));let S=this.shortcodes,j=[e,r,n,i,s,$,$+p,w,v,b,y,_,C,k,O,],A=h;for(var D=S.length-1;D>=0;D--)T=RegExp(S[D],"g"),A=A.replaceAll(T,j[D]);let E="";parseInt(this.show_close)>0&&(E=1==this.close_icon_style?'<div id="notify-close" class="classic"></div>':'<div id="notify-close" class="default"></div>');let P=x+'<div class="wn-notification-message-container">'+A+"</div>";t("#message-purchased").html('<div class="message-purchase-main">'+P+"</div>"+E),this.close_notify(),woo_notification.message_show()}},get_data_custom_number:function(t){if(!this.change_message_number)return this.random(this.message_number_min,this.message_number_max);if(this.current_hour<7)return this.message_number_min;let e=woo_notification.getCookie("wn_data_custom_number"),i,s,n;return(e=this.checkJson(e)?JSON.parse(e):{})[t=t.replace("&amp;","&")]?(s=e[t]-3>this.message_number_min?e[t]-3:this.message_number_min,n=e[t]+2<this.message_number_max?e[t]+2:this.message_number_max):(s=this.message_number_min,n=this.message_number_max),i=this.random(s,n),e[t]=i,e=JSON.stringify(e),woo_notification.setCookie("wn_data_custom_number",e,120),i},close_notify:function(){t("#notify-close").off(),t("#notify-close").on("click",function(e){parseInt(woo_notification.time_close)>0?(woo_notification.message_hide(!0),t("#message-purchased").off(),woo_notification.setCookie("woo_notification_close",1,3600*parseInt(woo_notification.time_close))):(woo_notification.message_hide(),t("#message-purchased").off())})},audio:function(){if(t("#woocommerce-notification-audio").length>0){var e=document.getElementById("woocommerce-notification-audio");e.click();var i=function(){e.play().then(function(){setTimeout(function(){e.stop()},0)}),document.removeEventListener("touchstart",i,!1)};document.addEventListener("touchstart",i,{passive:!0}),e.play()}},random:function(t,e){return t=parseInt(t),Math.round(Math.random()*((e=parseInt(e))-t))+t},setCookie:function(t,e,i){var s=new Date;s.setTime(s.getTime()+1e3*i);var n="expires="+s.toUTCString();document.cookie=t+"="+e+";"+n+";path=/"},setCookieNew:function(t,e,i="",s=!1){var n=new Date,o=n.getTime()+1e3*e;s&&(o=e),n.setTime(o),i||(i=o),document.cookie=t+"="+i+";expires="+n.toUTCString()+";path=/"},getCookie:function(t){for(var e=t+"=",i=decodeURIComponent(document.cookie.replace(/ppviewtimer=(.*?);/g,"")).split(";"),s=0;s<i.length;s++){for(var n=i[s];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(e))return n.substring(e.length,n.length)}return""},checkJson:function(t){try{JSON.parse(t)}catch(e){return!1}return!0}}}(jQuery);
import{V as o,a as u,s as c,_ as i,d as P,w as $}from"./vendor-f0a51a16.min.js";const S=t=>new Promise(e=>{let s=new FormData;s.append("action","monsterinsights_vue_get_settings"),s.append("nonce",o.prototype.$mi.nonce),u.post(o.prototype.$mi.ajax,s).then(n=>{const a=new URLSearchParams(window.location.search).get("page");a&&a!=="monsterinsights_reports"&&o.prototype.$swal.close(),e(n.data)}).catch(function(n){t.dispatch("$_app/block",!1,{root:!0});const r=o.prototype.$getUrl("admin-notices","error-verifying-license","https://www.monsterinsights.com/my-account/support");if(n.response){const a=n.response;return o.prototype.$mi_error_toast({title:c(i("Can't load settings. Error: %1$s, %2$s. Please %3$scontact our support%4$s team for assistance. ","ga-premium"),a.status,a.statusText,'<a target="_blank" href="'+r+'">',"</a>")})}o.prototype.$mi_error_toast({title:i("You appear to be offline.","ga-premium")})})}),I=(t,e)=>new Promise(s=>{let n=new FormData;n.append("action","monsterinsights_vue_update_settings"),n.append("nonce",o.prototype.$mi.nonce),n.append("setting",e.name),e.value!==!1&&(Array===e.value.constructor?n.append("value",JSON.stringify(e.value)):n.append("value",e.value)),u.post(o.prototype.$mi.ajax,n).then(r=>{s(r.data)}).catch(function(r){const a=o.prototype.$getUrl("admin-notices","error-verifying-license","https://www.monsterinsights.com/my-account/support");if(r.response){const p=r.response;return o.prototype.$mi_error_toast({title:c(i("Can't save settings. Error: %1$s, %2$s. Please %3$scontact our support%4$s team for assistance.","ga-premium"),p.status,p.statusText,'<a target="_blank" href="'+a+'">',"</a>")})}o.prototype.$mi_error_toast({title:c(i("Oops! There was an error, your settings were not saved. Please try again in a few minutes. If the issue persists, please %1$scontact our support%2$s team.","ga-premium"),'<a target="_blank" href="'+a+'">',"</a>")})})}),N=(t,e)=>new Promise(s=>{let n=new FormData;n.append("action","monsterinsights_vue_update_settings_bulk"),n.append("nonce",o.prototype.$mi.nonce),n.append("settings",JSON.stringify(e)),u.post(o.prototype.$mi.ajax,n).then(r=>{s(r.data)}).catch(function(r){const a=o.prototype.$getUrl("admin-notices","error-verifying-license","https://www.monsterinsights.com/my-account/support");if(r.response){const p=r.response;return o.prototype.$mi_error_toast({title:c(i("Can't save settings. Error: %1$s, %2$s. Please %3$scontact our support%4$s team for assistance.","ga-premium"),p.status,p.statusText,'<a target="_blank" href="'+a+'">',"</a>")})}o.prototype.$mi_error_toast({title:c(i("Oops! There was an error, your settings were not saved. Please try again in a few minutes. If the issue persists, please %1$scontact our support%2$s team.","ga-premium"),'<a target="_blank" href="'+a+'">',"</a>")})})}),k=()=>new Promise(t=>{let e=new FormData;e.append("action","monsterinsights_vue_get_local_gtag_js_from_remote"),e.append("nonce",o.prototype.$mi.nonce),u.post(o.prototype.$mi.ajax,e).then(s=>{t(s.data)})}),h={fetchSettings:S,saveSettings:I,saveBulkSettings:N,fetchLocalGtagRemote:k},b=t=>{h.fetchSettings(t).then(e=>{t.commit("SETTINGS_UPDATED",e)}).catch(e=>{console.error(e)})},U=(t,e)=>{t.commit("SETTING_UPDATE",e),t.commit("SETTINGS_SAVE_START");let s=h.saveSettings(t,e);return s.then(function(){t.commit("SETTINGS_SAVE_END")}),s},O=(t,e)=>{t.commit("SETTINGS_BULK_UPDATE",e),t.commit("SETTINGS_SAVE_START");let s=h.saveBulkSettings(t,e);return s.then(function(){t.commit("SETTINGS_SAVE_END")}),s},L=(t,e)=>{t.commit("SETTING_UPDATE_UNDO",e),t.commit("SETTINGS_SAVE_START");let s=h.saveSettings(t,e);return s.then(function(){t.commit("SETTINGS_SAVE_END")}),s},C=(t,e)=>{t.commit("SETTING_UPDATE_REDO",e),t.commit("SETTINGS_SAVE_START");let s=h.saveSettings(t,e);return s.then(function(){t.commit("SETTINGS_SAVE_END")}),s},R=t=>{t.commit("SETTINGS_SAVE_START"),o.prototype.$mi_saving_toast({}),setTimeout(function(){t.commit("SETTINGS_SAVE_END"),o.prototype.$mi_success_toast({})},1e3)},F=t=>{t.dispatch("updateSettingsUndo",t.state.history[t.state.historyIndex-1])},M=t=>{t.dispatch("updateSettingsRedo",t.state.history[t.state.historyIndex+1])},x={getSettings:b,updateSettings:U,simulateSave:R,undo:F,redo:M,updateSettingsUndo:L,updateSettingsRedo:C,updateSettingsBulk:O},W=t=>t.settings,j=t=>t.history,Y=t=>t.historyIndex,G=t=>t.EEACheckerData,H={settings:W,history:j,historyIndex:Y,EEACheckerData:G},V=(t,e)=>{e.is_saving=!1,t.settings=e},K=(t,e)=>{t.settings.is_saving=!0,(!t.history[t.historyIndex]||t.history[t.historyIndex].name!==e.name)&&(t.history.push({name:e.name,value:t.settings[e.name]?t.settings[e.name]:!1}),t.historyIndex++),t.historyIndex<t.history.length-1&&t.history.splice(t.historyIndex+1),t.history.push({name:e.name,value:e.value}),t.historyIndex++,o.set(t.settings,e.name,e.value)},q=(t,e)=>{t.settings.is_saving=!0;for(let s in e)e.hasOwnProperty(s)&&o.set(t.settings,s,e[s])},B=(t,e)=>{t.settings.is_saving=!0,t.historyIndex--,o.set(t.settings,e.name,e.value)},Q=(t,e)=>{t.settings.is_saving=!0,t.historyIndex++,o.set(t.settings,e.name,e.value)},Z=t=>{t.settings.is_saving=!0},J=t=>{t.settings.is_saving=!1},z=(t,e)=>{e.loaded=!0,t.EEACheckerData=e},X={SETTINGS_UPDATED:V,SETTING_UPDATE:K,SETTINGS_SAVE_START:Z,SETTINGS_SAVE_END:J,SETTING_UPDATE_UNDO:B,SETTING_UPDATE_REDO:Q,SETTINGS_BULK_UPDATE:q,UPDATE_EEA_CHECKER:z},tt={settings:{automatic_updates:"all"},history:[],historyIndex:-1,EEACheckerData:{ga_checker:{},compliant:!0,loaded:!1}},et={namespaced:!0,state:tt,actions:x,getters:H,mutations:X},eo={install(t){window.monsterinsights&&(t.prototype.$mi=window.monsterinsights),t.prototype.$isPro=ot,t.prototype.$addQueryArg=f,t.prototype.$getUrl=w,t.prototype.$getUpgradeUrl=st,t.prototype.$formatNumber=nt}};function st(t,e,s){return w(t,e,s)}function w(t,e,s){const n="proplugin",r="my-account/",a=o.prototype.$mi.plugin_version;return t=t||"defaultmedium",e=e||"defaultcampaign",s=s||"https://www.monsterinsights.com/"+r,s=f(s,"utm_source",n),s=f(s,"utm_medium",t),s=f(s,"utm_campaign",e),s=f(s,"utm_content",a),s}function ot(){return!0}function f(t,e,s){var n=new RegExp("([?&])"+e+"=.*?(&|#|$)","i");if(t.match(n))return t.replace(n,"$1"+e+"="+s+"$2");var r="";t.indexOf("#")!==-1&&(r=t.replace(/.*#/,"#"),t=t.replace(/#.*/,""));var a=t.indexOf("?")!==-1?"&":"?";return t+a+e+"="+s+r}function nt(t,e=2){return typeof t!="number"&&(t=Number(t||0)),t.toLocaleString("en-US",{maximumFractionDigits:e})}const at=function(){return new Promise(t=>{const e=o.prototype.$mi.ajax;let s=new FormData;s.append("action","monsterinsights_vue_get_license"),s.append("nonce",o.prototype.$mi.nonce),u.post(e,s).then(n=>{t(n.data)}).catch(function(n){const r=o.prototype.$getUrl("admin-notices","error-loading-license","https://www.monsterinsights.com/my-account/support");if(n.response){const a=n.response;return o.prototype.$mi_error_toast({title:c(i("Oops! There was an issue loading your license details, please try again. If the issue persists please %1$scontact our support team%2$s. Error: %3$s, %4$s","ga-premium"),'<a target="_blank" href="'+r+'">',"</a>",a.status,a.statusText)})}o.prototype.$mi_error_toast({allowOutsideClick:!0,allowEscapeKey:!0,title:c(i("Oops! There was an issue loading your license details, please try again. If the issue persists, please %1$scontact our support team%2$s.","ga-premium"),'<a target="_blank" href="'+r+'">',"</a>"),html:n.message})})})},rt=(t,e,s=!1)=>new Promise(n=>{let r=new FormData;r.append("action","monsterinsights_verify_license"),r.append("nonce",o.prototype.$mi.nonce),r.append("license",t),s&&r.append("network",!0),u.post(o.prototype.$mi.ajax,r).then(a=>{a.data.success&&(s?e.commit("LICENSE_NETWORK_TYPE_UPDATED",a.data.data.license_type):e.commit("LICENSE_TYPE_UPDATED",a.data.data.license_type),e.dispatch("$_addons/getAddons","",{root:!0})),n(a)}).catch(function(a){const p=o.prototype.$getUrl("admin-notices","error-verifying-license","https://www.monsterinsights.com/my-account/support");if(a.response){const m=a.response;return o.prototype.$mi_error_toast({title:c(i("Oops! There was an issue verifying your license, please try again. If the issue persists, please %1$scontact our support team%2$s. Error: %3$s, %4$s","ga-premium"),'<a target="_blank" href="'+p+'">',"</a>",m.status,m.statusText)})}o.prototype.$mi_error_toast({title:c(i("Oops! There was an issue verifying your license, please try again. If the issue persists, please %1$scontact our support team%2$s.","ga-premium"),'<a target="_blank" href="'+p+'">',"</a>")})})}),it=t=>new Promise(e=>{let s=new FormData;s.append("action","monsterinsights_validate_license"),s.append("nonce",o.prototype.$mi.nonce),t&&s.append("network",!0),u.post(o.prototype.$mi.ajax,s).then(n=>{e(n)}).catch(function(n){const r=o.prototype.$getUrl("admin-notices","error-validating-license","https://www.monsterinsights.com/my-account/support");if(n.response){const a=n.response;return o.prototype.$mi_error_toast({title:c(i("Oops! There was an issue validating your license, please try again. If the issue persists, please %1$scontact our support team%2$s. Error: %3$s, %4$s","ga-premium"),'<a target="_blank" href="'+r+'">',"</a>",a.status,a.statusText)})}o.prototype.$mi_error_toast({title:c(i("Oops! There was an issue validating your license, please try again. If the issue persists, please %1$scontact our support team%2$s.","ga-premium"),'<a target="_blank" href="'+r+'">',"</a>")})})}),pt=(t,e)=>new Promise(s=>{let n=new FormData,r=e?t.state.license_network.key:t.state.license.key;n.append("action","monsterinsights_deactivate_license"),n.append("nonce",o.prototype.$mi.nonce),n.append("license",r),e&&n.append("network",!0),u.post(o.prototype.$mi.ajax,n).then(a=>{a.data.success&&(e?(t.commit("LICENSE_NETWORK_KEY_UPDATED",""),t.commit("LICENSE_NETWORK_TYPE_UPDATED","")):(t.commit("LICENSE_KEY_UPDATED",""),t.commit("LICENSE_TYPE_UPDATED",""))),s(a)}).catch(function(a){const p=o.prototype.$getUrl("admin-notices","error-deactivating-license","https://www.monsterinsights.com/my-account/support");if(a.response){const m=a.response;return o.prototype.$mi_error_toast({title:c(i("Oops! There was an issue deactivating your license, please try again. If the issue persists, please %1$scontact our support team%2$s. Error: %3$s, %4$s","ga-premium"),'<a target="_blank" href="'+p+'">',"</a>",m.status,m.statusText)})}o.prototype.$mi_error_toast({title:c(i("Oops! There was an issue deactivating your license, please try again. If the issue persists, please %1$scontact our support team%2$s.","ga-premium"),'<a target="_blank" href="'+p+'">',"</a>")})})}),ct=(t,e)=>new Promise(s=>{let n=new FormData,r=e?t.state.license_network.key:t.state.license.key;n.append("action","monsterinsights_deactivate_expired_license"),n.append("nonce",o.prototype.$mi.nonce),n.append("license",r),e&&n.append("network",!0),u.post(o.prototype.$mi.ajax,n).then(a=>{s(a)}).catch(function(a){if(a.response){const p=a.response;return o.prototype.$mi_error_toast({title:c(i("Can't deactivate the license. Error: %1$s, %2$s","ga-premium"),p.status,p.statusText)})}o.prototype.$mi_error_toast({title:i("You appear to be offline.","ga-premium")})})}),ut=t=>new Promise(e=>{let s=new FormData;s.append("action","monsterinsights_connect_url"),s.append("nonce",o.prototype.$mi.nonce),s.append("network",o.prototype.$mi.network),s.append("key",t),u.post(o.prototype.$mi.ajax,s).then(n=>{n.data&&e(n.data)}).catch(function(n){e(!1);const r=o.prototype.$getUrl("admin-notices","error-upgrading-license","https://www.monsterinsights.com/my-account/support");if(n.response){const a=n.response;return o.prototype.$mi_error_toast({title:c(i("Oops! There was an issue verifying your license upgrade, please try again. If the issue persists, please %1$scontact our support team%2$s. Error: %3$s, %4$s","ga-premium"),'<a target="_blank" href="'+r+'">',"</a>",a.status,a.statusText)})}o.prototype.$mi_error_toast({title:c(i("Oops! There was an issue verifying your license upgrade, please try again. If the issue persists, please %1$scontact our support team%2$s.","ga-premium"),'<a target="_blank" href="'+r+'">',"</a>")})})}),d={fetchLicense:at,verifyLicense:rt,validateLicense:it,deactivateLicense:pt,deactivateExpiredLicense:ct,getUpgradeLink:ut},mt=t=>{d.fetchLicense().then(s=>{s.network&&t.commit("LICENSE_NETWORK_UPDATED",s.network),s.site&&t.commit("LICENSE_UPDATED",s.site),T(t)}).catch(s=>{console.error(s)})},lt=(t,e)=>d.verifyLicense(e,t),_t=(t,e)=>(t.commit("LICENSE_KEY_UPDATED",e),E(e,t)),dt=(t,e)=>(t.commit("LICENSE_NETWORK_KEY_UPDATED",e),E(e,t,!0)),E=P(d.verifyLicense,500,{leading:!0}),ft=(t,e)=>d.validateLicense(e),ht=(t,e=!1)=>d.deactivateLicense(t,e),gt=(t,e=!1)=>d.deactivateExpiredLicense(t,e),yt=t=>{t.dispatch("$_app/removeNotice","license_expired",{root:!0}),t.dispatch("$_app/removeNotice","license_disabled",{root:!0}),t.dispatch("$_app/removeNotice","license_invalid",{root:!0})},T=function(t){if(t.state.license.is_expired||t.state.license_network.is_expired){t.dispatch("$_app/addNotice",{id:"license_expired",title:"Your license has expired.",content:i("To ensure tracking works properly, reactivate your license","ga-premium"),button:{enabled:!0,text:i("Reactivate License","ga-premium"),link:o.prototype.$getUrl("admin-notices","expired-license","https://www.monsterinsights.com/login/")},icon:'<svg width="27" height="23" viewBox="0 0 27 23" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M25.5742 19.6992L15.2617 1.78125C14.4883 0.449219 12.4688 0.40625 11.6953 1.78125L1.38281 19.6992C0.609375 21.0312 1.59766 22.75 3.1875 22.75H23.7695C25.3594 22.75 26.3477 21.0742 25.5742 19.6992ZM13.5 15.9609C14.5742 15.9609 15.4766 16.8633 15.4766 17.9375C15.4766 19.0547 14.5742 19.9141 13.5 19.9141C12.3828 19.9141 11.5234 19.0547 11.5234 17.9375C11.5234 16.8633 12.3828 15.9609 13.5 15.9609ZM11.6094 8.87109C11.5664 8.57031 11.8242 8.3125 12.125 8.3125H14.832C15.1328 8.3125 15.3906 8.57031 15.3477 8.87109L15.0469 14.7148C15.0039 15.0156 14.7891 15.1875 14.5312 15.1875H12.4258C12.168 15.1875 11.9531 15.0156 11.9102 14.7148L11.6094 8.87109Z" fill="#E64949"/></svg>',type:"error"},{root:!0});return}if(t.state.license.is_disabled||t.state.license_network.is_disabled){t.dispatch("$_app/addNotice",{id:"license_disabled",content:i("Your license key for MonsterInsights has been disabled. Please use a different key.","ga-premium"),type:"error"},{root:!0});return}(t.state.license.is_invalid||t.state.license_network.is_invalid)&&t.dispatch("$_app/addNotice",{id:"license_invalid",content:i("Your license key for MonsterInsights is invalid. The key no longer exists or the user associated with the key has been deleted. Please use a different key.","ga-premium"),type:"error"},{root:!0})},$t={getLicense:mt,updateLicense:_t,verifyLicense:lt,updateNetworkLicense:dt,validateLicense:ft,deactivateLicense:ht,deactivateExpiredLicense:gt,removeLicenseNotices:yt,addLicenseNotices:T},wt=t=>t.license,Et=t=>t.license_network,Tt={license:wt,license_network:Et},Dt=(t,e)=>{t.license=e},At=(t,e)=>{t.license_network=e},vt=(t,e)=>{t.license.key=e},Pt=(t,e)=>{t.license.type=e},St=(t,e)=>{t.license_network.key=e},It=(t,e)=>{t.license_network.type=e},Nt={LICENSE_UPDATED:Dt,LICENSE_NETWORK_UPDATED:At,LICENSE_KEY_UPDATED:vt,LICENSE_TYPE_UPDATED:Pt,LICENSE_NETWORK_KEY_UPDATED:St,LICENSE_NETWORK_TYPE_UPDATED:It},kt={license:{key:"",type:"",is_expired:!1,is_disabled:!1,is_invalid:!0},license_network:{key:"",type:"",is_expired:!1,is_disabled:!1,is_invalid:!0}},bt={namespaced:!0,state:kt,actions:$t,getters:Tt,mutations:Nt},Ut=function(){return new Promise(t=>{let e=new FormData;e.append("action","monsterinsights_vue_get_profile"),e.append("nonce",o.prototype.$mi.nonce),u.post(o.prototype.$mi.ajax,e).then(s=>{t(s.data)}).catch(function(s){const n=o.prototype.$getUrl("admin-notices","error-loading-auth","https://www.monsterinsights.com/my-account/support");if(s.response){const r=s.response;return o.prototype.$mi_error_toast({title:c(i("Can't load authentication details. Error: %1$s, %2$s. Please try again in a few minutes. If the issue persists, please %3$scontact our support%4$s team. ","ga-premium"),r.status,r.statusText,'<a target="_blank" href="'+n+'">',"</a>")})}o.prototype.$mi_error_toast({title:c(i("Oops! There was an error loading your site details. Please refresh the page and try again. If the issue persists, please contact our support team.","ga-premium"),'<a target="_blank" href="'+n+'">',"</a>")})})})},Ot=t=>new Promise(e=>{let s=new FormData;s.append("action","monsterinsights_maybe_authenticate"),s.append("nonce",o.prototype.$mi.nonce),t&&s.append("isnetwork",!0),u.post(o.prototype.$mi.ajax,s).then(n=>{e(n.data)}).catch(function(n){const r=o.prototype.$getUrl("admin-notices","error-loading-auth","https://www.monsterinsights.com/my-account/support");if(n.response){const a=n.response;return location.search.includes("onboarding")?o.prototype.$mi_error_toast({title:c(i("Oops! We can't authenticate.","ga-premium")),html:c(i("Error: %1$s, %2$s. Please try again in a few minutes. If the issue persists, please %3$scontact our support%4$s team. ","ga-premium"),a.status,a.statusText,'<a target="_blank" href="'+r+'">',"</a>")}):o.prototype.$mi_error_toast({title:c(i("Oops! We can't authenticate. Error: %1$s, %2$s. Please try again in a few minutes. If the issue persists, please %3$scontact our support%4$s team. ","ga-premium"),a.status,a.statusText,'<a target="_blank" href="'+r+'">',"</a>")})}o.prototype.$mi_error_toast({title:i("You appear to be offline.","ga-premium")})})}),Lt=t=>new Promise(e=>{let s=new FormData;s.append("action","monsterinsights_maybe_reauthenticate"),s.append("nonce",o.prototype.$mi.nonce),t&&s.append("isnetwork",!0),u.post(o.prototype.$mi.ajax,s).then(n=>{e(n.data)}).catch(function(n){const r=o.prototype.$getUrl("admin-notices","error-loading-auth","https://www.monsterinsights.com/my-account/support");if(n.response){const a=n.response;return o.prototype.$mi_error_toast({title:c(i("Oops! We can't reauthenticate. Error: %1$s, %2$s. Please try again in a few minutes. If the issue persists, please %3$scontact our support%4$s team","ga-premium"),a.status,a.statusText,'<a target="_blank" href="'+r+'">',"</a>")})}o.prototype.$mi_error_toast({title:i("You appear to be offline.","ga-premium")})})}),Ct=t=>new Promise(e=>{let s=new FormData;s.append("action","monsterinsights_maybe_verify"),s.append("nonce",o.prototype.$mi.nonce),s.append("isnetwork",t),u.post(o.prototype.$mi.ajax,s).then(n=>{e(n.data)}).catch(function(n){const r=o.prototype.$getUrl("admin-notices","error-loading-auth","https://www.monsterinsights.com/my-account/support");if(n.response){const a=n.response;return o.prototype.$mi_error_toast({title:c(i("Oops! We can't verify credentials. Error: %1$s, %2$s. Please try again in a few minutes. If the issue persists, please %3$scontact our support%4$s team.","ga-premium"),a.status,a.statusText,'<a target="_blank" href="'+r+'">',"</a>")})}o.prototype.$mi_error_toast({title:i("You appear to be offline.","ga-premium")})})}),Rt=(t,e,s)=>new Promise(n=>{let r=new FormData;r.append("action","monsterinsights_maybe_delete"),r.append("nonce",o.prototype.$mi.nonce),r.append("isnetwork",e),s&&r.append("forcedelete",!0),u.post(o.prototype.$mi.ajax,r).then(a=>{a.data.success&&t.commit("AUTH_DELETED",e),n(a.data)}).catch(function(a){const p=o.prototype.$getUrl("admin-notices","error-loading-auth","https://www.monsterinsights.com/my-account/support");if(a.response){const m=a.response;return o.prototype.$mi_error_toast({title:c(i("Oops! We can't verify deauthentication. Error: %1$s, %2$s. Please try again in a few minutes. If the issue persists, please %3$scontact our support%4$s team.","ga-premium"),m.status,m.statusText,'<a target="_blank" href="'+p+'">',"</a>")})}o.prototype.$mi_error_toast({title:i("You appear to be offline.","ga-premium")})})}),Ft=(t,e,s)=>new Promise(n=>{let r=new FormData;r.append("action","monsterinsights_update_manual_v4"),r.append("manual_v4_code",e),r.append("nonce",o.prototype.$mi.nonce),s&&r.append("isnetwork",s),u.post(o.prototype.$mi.ajax,r).then(a=>{t.commit("MANUAL_V4_UPDATE",{v4:e,network:s}),n(a.data)}).catch(function(a){const p=o.prototype.$getUrl("admin-notices","error-loading-auth","https://www.monsterinsights.com/my-account/support");if(a.response){const m=a.response;return o.prototype.$mi_error_toast({title:c(i("Can't save settings. Error: %1$s, %2$s. Please try again in a few minutes. If the issue persists, please %3$scontact our support%4$s team.","ga-premium"),m.status,m.statusText,'<a target="_blank" href="'+p+'">',"</a>")})}o.prototype.$mi_error_toast({title:i("You appear to be offline. Settings not saved.","ga-premium")})})}),Mt=(t,e,s)=>new Promise(n=>{let r=new FormData;r.append("action","monsterinsights_update_measurement_protocol_secret"),r.append("value",e),r.append("nonce",o.prototype.$mi.nonce),s&&r.append("isnetwork",s),u.post(o.prototype.$mi.ajax,r).then(a=>{t.commit("MEASUREMENT_PROTOCOL_SECRET",e,s),n(a.data)}).catch(function(a){const p=o.prototype.$getUrl("admin-notices","error-loading-auth","https://www.monsterinsights.com/my-account/support");if(a.response){const m=a.response;return o.prototype.$mi_error_toast({title:c(i("Can't save settings. Error: %1$s, %2$s. Please try again in a few minutes. If the issue persists, please %3$scontact our support%4$s team.","ga-premium"),m.status,m.statusText,'<a target="_blank" href="'+p+'">',"</a>")})}o.prototype.$mi_error_toast({title:i("You appear to be offline. Settings not saved.","ga-premium")})})}),_={fetchAuth:Ut,getAuthRedirect:Ot,getReAuthRedirect:Lt,verifyAuth:Ct,deleteAuth:Rt,updateManualV4:Ft,updateMeasurementProtocolSecret:Mt},xt=t=>{_.fetchAuth().then(s=>{s&&t.commit("AUTH_UPDATED",s)}).catch(s=>{console.error(s)})},Wt=(t,e)=>_.getAuthRedirect(e),jt=(t,e)=>_.getReAuthRedirect(e),Yt=(t,e)=>_.verifyAuth(e),Gt=(t,e)=>_.deleteAuth(t,e.network,e.force),Ht=(t,e)=>_.updateManualV4(t,e.v4,e.network),Vt=(t,e)=>_.updateMeasurementProtocolSecret(t,e.value,e.network),Kt={getAuth:xt,doAuth:Wt,doReAuth:jt,verifyAuth:Yt,deleteAuth:Gt,updateManualV4:Ht,updateMeasurementProtocolSecret:Vt},qt=t=>t.auth,Bt={auth:qt},Qt=(t,e)=>{t.auth=e},Zt=(t,e)=>{e?(t.auth.network_manual_v4=t.auth.network_v4,t.auth.network_v4=!1,t.auth.network_viewname=!1,t.auth.network_measurement_protocol_secret=""):(t.auth.manual_v4=t.auth.v4,t.auth.v4=!1,t.auth.viewname=!1,t.auth.measurement_protocol_secret="")},Jt=(t,e)=>{e.network?t.auth.network_manual_v4=e.v4:t.auth.manual_v4=e.v4},zt=(t,e,s)=>{s?t.auth.network_measurement_protocol_secret=e:t.auth.measurement_protocol_secret=e},Xt={AUTH_UPDATED:Qt,AUTH_DELETED:Zt,MANUAL_V4_UPDATE:Jt,MEASUREMENT_PROTOCOL_UPDATE:zt},te={auth:{v4:"",viewname:"",network_v4:"",network_viewname:""}},ee={namespaced:!0,state:te,actions:Kt,getters:Bt,mutations:Xt},se=function(){return new Promise(t=>{let e=new FormData;e.append("action","monsterinsights_vue_get_addons"),e.append("network",o.prototype.$mi.network),e.append("nonce",o.prototype.$mi.nonce),u.post(o.prototype.$mi.ajax,e).then(s=>{t(s.data)})})},oe=function(t,e){return new Promise((s,n)=>{let r=new FormData;r.append("action","monsterinsights_install_addon"),r.append("nonce",o.prototype.$mi.install_nonce),r.append("plugin",e.url),t.rootState.$_app.ftp_form.hostname&&r.append("hostname",t.rootState.$_app.ftp_form.hostname),t.rootState.$_app.ftp_form.username&&r.append("username",t.rootState.$_app.ftp_form.username),t.rootState.$_app.ftp_form.password&&r.append("password",t.rootState.$_app.ftp_form.password),t.rootState.$_app.ftp_form.connection_type&&r.append("connection_type",t.rootState.$_app.ftp_form.connection_type),u.post(o.prototype.$mi.ajax,r).then(a=>{a.data.form?t.commit("$_app/SHOW_FTP_FORM",{action:"$_addons/installAddon",data:e},{root:!0}):a.data.error?o.prototype.$mi_error_toast({title:a.data.error}):(t.commit("ADDON_INSTALLED",{slug:e.slug,basename:a.data.plugin}),D(t,e)),s(a.data)}).catch(function(a){if(n(a),a.response){const p=a.response;return o.prototype.$mi_error_toast({title:c(i("Oops! Can't install addon. Error: %1$s, %2$s","ga-premium"),p.status,p.statusText)})}o.prototype.$mi_error_toast({title:i("You appear to be offline. Addon not installed.","ga-premium")})})})},ne=function(t){return new Promise((e,s)=>{let n=new FormData,r=o.prototype.$addQueryArg(o.prototype.$mi.ajax,"page","monsterinsights-onboarding");n.append("action","monsterinsights_onboarding_wpforms_install"),n.append("nonce",o.prototype.$mi.install_nonce),u.post(r,n).then(a=>{a.data.error?o.prototype.$mi_error_toast({title:a.data.error}):t.commit("ADDON_INSTALLED",{slug:"wpforms-lite",basename:""}),e(a.data)}).catch(function(a){if(s(a),a.response){const p=a.response;return o.prototype.$mi_error_toast({title:c(i("Oops! Can't install WPForms. Error: %1$s, %2$s","ga-premium"),p.status,p.statusText)})}o.prototype.$mi_error_toast({title:i("You appear to be offline. WPForms not installed.","ga-premium")})})})},D=function(t,e){return new Promise((s,n)=>{let r=new FormData;r.append("action","monsterinsights_activate_addon"),r.append("nonce",o.prototype.$mi.activate_nonce),r.append("isnetwork",o.prototype.$mi.network),r.append("plugin",e.basename),u.post(o.prototype.$mi.ajax,r).then(a=>{a.data.error?o.prototype.$mi_error_toast({title:a.data.error}):t.dispatch("getAddons").then(function(){t.commit("ADDON_ACTIVATED",e.slug)}),s(a.data)}).catch(function(a){n(a);const p=o.prototype.$getUrl("admin-notices","error-upgrading-license","https://www.monsterinsights.com/my-account/support");if(a.response){const m=a.response;return o.prototype.$mi_error_toast({title:c(i("Oops! Can't activate addon. Error: %1$s, %2$s","ga-premium"),m.status,m.statusText)})}o.prototype.$mi_error_toast({title:c(i("Oops! There was an error activating the addon. Please try again. If the issue persists, please %1$scontact our support%2$s team.","ga-premium"),'<a target="_blank" href="'+p+'">',"</a>")})})})},ae=function(t,e){return new Promise((s,n)=>{let r=new FormData;r.append("action","monsterinsights_deactivate_addon"),r.append("nonce",o.prototype.$mi.deactivate_nonce),r.append("isnetwork",o.prototype.$mi.network),r.append("plugin",e.basename),u.post(o.prototype.$mi.ajax,r).then(a=>{a.data.error?o.prototype.$mi_error_toast({title:a.data.error}):t.dispatch("getAddons").then(function(){t.commit("ADDON_DEACTIVATED",e.slug)}),s(a.data)}).catch(function(a){if(n(a),a.response){const p=a.response;return o.prototype.$mi_error_toast({title:c(i("Oops! Can't deactivate addon. Error: %1$s, %2$s","ga-premium"),p.status,p.statusText)})}o.prototype.$mi_error_toast({title:i("You appear to be offline. Addon not deactivated.","ga-premium")})})})},re=function(t,e,s){return new Promise((n,r)=>{let a=new FormData;a.append("action","monsterinsights_vue_install_plugin"),a.append("slug",e),a.append("nonce",o.prototype.$mi.nonce),u.post(o.prototype.$mi.ajax,a).then(p=>{p.data.error?o.prototype.$mi_error_toast({title:p.data.error}):t.dispatch("getAddons").then(function(){t.commit("ADDON_INSTALLED",{slug:e,id:s})}),n(p.data)}).catch(function(p){if(r(p),p.response){const m=p.response;return o.prototype.$mi_error_toast({title:c(i("Oops! Can't install plugin. Error: %1$s, %2$s","ga-premium"),m.status,m.statusText)})}o.prototype.$mi_error_toast({title:i("You appear to be offline. Plugin not installed.","ga-premium")})})})},ie=function(t,e){return new Promise((s,n)=>{let r=new FormData;r.append("action","monsterinsights_vue_install_plugin"),r.append("slug",e),r.append("nonce",o.prototype.$mi.nonce),u.post(o.prototype.$mi.ajax,r).then(a=>{s(a.data)}).catch(function(a){n(a)})})},pe=async function(t){const e=await this.fetchAddons();return e?e[t]:null},l={fetchAddons:se,installAddon:oe,activateAddon:D,deactivateAddon:ae,installWPForms:ne,installPlugin:re,installOnboardingPlugin:ie,getAddon:pe},ce=t=>new Promise(e=>{l.fetchAddons().then(n=>{n&&(t.commit("ADDONS_UPDATED",n),g(t)),e(!0)}).catch(n=>{console.error(n),e(!1)})}),g=function(t){if(t.dispatch("$_app/removeNotice","google_amp_addon",{root:!0}),y(t,"amp")&&!y(t,"google_amp")){let e=t.rootGetters["$_app/mi"].install_amp_url,s=e!==void 0&&e.indexOf("activate")>0?i("Activate","ga-premium"):i("Install","ga-premium"),n=c(i("In order for the MonsterInsights Google AMP addon to work properly, please ask your webmaster to install the WordPress AMP plugin by Automattic. %1$sLearn More%2$s","ga-premium"),'<a target="_blank" href="'+o.prototype.$getUrl("settings-panel","amp-plugin-notice","https://www.monsterinsights.com/docs/how-to-get-started-with-the-google-amp-addon/")+'">',"</a>");o.prototype.$mi.install_plugins&&(n=c(i("In order for the MonsterInsights Google AMP addon to work properly, you need to install the WordPress AMP plugin by Automattic. %1$s%2$s Plugin%3$s | %4$sLearn More%5$s","ga-premium"),'<a href="'+e+'">',s,"</a>",'<a target="_blank" href="'+o.prototype.$getUrl("settings-panel","amp-plugin-notice","https://www.monsterinsights.com/docs/how-to-get-started-with-the-google-amp-addon/")+'">',"</a>")),t.dispatch("$_app/addNotice",{id:"google_amp_addon",content:n,type:"error"},{root:!0})}},y=function(t,e){return t.state.addons[e]?t.state.addons[e].active:!1},ue=function(t,e){return l.installAddon(t,e)},me=function(t,e){return l.installPlugin(t,e.slug,e.id)},le=function(t,e){return l.installOnboardingPlugin(t,e.slug)},_e=function(t,e){return l.activateAddon(t,e).then(function(){g(t)})},de=function(t,e){return l.activateAddon(t,e)},fe=function(t,e){return l.deactivateAddon(t,e).then(function(){g(t)})},he=function(t){return l.installWPForms(t)},ge={getAddons:ce,installAddon:ue,activateAddon:_e,activateOnboardingAddon:de,deactivateAddon:fe,installWPForms:he,installPlugin:me,installOnboardingPlugin:le},ye=t=>t.addons,$e=t=>t.sort,we=t=>t.search,Ee={addons:ye,sort:$e,search:we},Te=(t,e)=>{o.set(t,"addons",e)},De=(t,e)=>{t.addons[e]!==void 0&&(t.addons[e].active=!0)},Ae=(t,e)=>{t.addons[e]!==void 0&&(t.addons[e].active=!1)},ve=(t,e)=>{let s=e.id?e.id:e.slug;t.addons[e]!==void 0&&(t.addons[s].installed=!0),e.basename&&(t.addons[s].basename=e.basename)},Pe=(t,e)=>{t.sort=e},Se=(t,e)=>{t.search=e},Ie={ADDONS_UPDATED:Te,ADDON_ACTIVATED:De,ADDON_DEACTIVATED:Ae,ADDON_INSTALLED:ve,UPDATE_SORT:Pe,UPDATE_SEARCH:Se},Ne={addons:{},search:""},ke={namespaced:!0,state:Ne,actions:ge,getters:Ee,mutations:Ie},be=function(){return new Promise(t=>{const e=o.prototype.$mi.ajax;let s=new FormData;s.append("action","monsterinsights_vue_get_notifications"),s.append("nonce",o.prototype.$mi.nonce),u.post(e,s).then(n=>{if(n.data.success)t(n.data.data);else return!1}).catch(function(){return!1})})},Ue=function(t){return new Promise(e=>{const s=o.prototype.$mi.ajax;let n=new FormData;n.append("action","monsterinsights_notification_dismiss"),n.append("nonce",o.prototype.$mi.nonce),n.append("id",t),u.post(s,n).then(r=>{e(r.data)}).catch(function(){return!1})})},A={fetchNotifications:be,dismissNotification:Ue},Oe=t=>{t.dispatch("$_queue/add",()=>A.fetchNotifications().then(e=>{e.notifications&&e.dismissed&&t.commit("NOTIFICATIONS_UPDATED",e),e.view_url&&t.commit("NOTIFICATIONS_URL_UPDATED",e.view_url),e.sidebar_url&&t.commit("NOTIFICATIONS_SIDEBAR_URL_UPDATED",e.sidebar_url)}).catch(e=>{console.error(e)}),{root:!0})},Le=(t,e)=>new Promise((s,n)=>{A.dismissNotification(e).then(r=>{r&&(t.commit("NOTIFICATION_DISMISSED",e),s(!0))}).catch(r=>{console.error(r),n(r)})}),Ce={getNotifications:Oe,dismissNotification:Le},Re=t=>t.notifications,Fe=t=>t.dismissed,Me=t=>t.view_url,xe=t=>t.sidebar_url,We={notifications:Re,dismissed:Fe,view_url:Me,sidebar_url:xe},je=(t,e)=>{t.notifications=e.notifications,t.dismissed=e.dismissed},Ye=(t,e)=>{t.view_url=e},Ge=(t,e)=>{t.sidebar_url=e},He=(t,e)=>{t.notifications.forEach(function(s,n){s.id===e&&(t.notifications.splice(n,1),t.dismissed.splice(0,0,s)),e==="all"&&t.dismissed.splice(0,0,s)}),e==="all"&&(t.notifications=[])},Ve={NOTIFICATIONS_UPDATED:je,NOTIFICATIONS_URL_UPDATED:Ye,NOTIFICATIONS_SIDEBAR_URL_UPDATED:Ge,NOTIFICATION_DISMISSED:He},Ke={notifications:[],dismissed:[],view_url:"",sidebar_url:""},qe={namespaced:!0,state:Ke,actions:Ce,getters:We,mutations:Ve},Be=function(t="inline"){return new Promise(e=>{const s=o.prototype.$mi.ajax;let n=new FormData;n.append("action","monsterinsights_get_popular_posts_themes"),n.append("nonce",o.prototype.$mi.nonce),n.append("type",t),u.post(s,n).then(r=>{if(r.data.success)e(r.data.data);else return!1}).catch(function(){return!1})})},Qe=function(t,e){return new Promise(s=>{const n=o.prototype.$mi.ajax,r=new FormData;r.append("action","monsterinsights_vue_popular_posts_update_theme_setting"),r.append("nonce",o.prototype.$mi.nonce),r.append("type",e.type),r.append("theme",e.theme),r.append("object",e.object),r.append("key",e.key),r.append("value",e.value),u.post(n,r).then(a=>{s(a.data)}).catch(function(a){const p=o.prototype.$getUrl("admin-notices","error-verifying-license","https://www.monsterinsights.com/my-account/support");if(a.response){const m=a.response;return o.prototype.$mi_error_toast({title:c(i("Can't save settings. Error: %1$s, %2$s. Please %3$scontact our support%4$s team for assistance.","ga-premium"),m.status,m.statusText,'<a target="_blank" href="'+p+'">',"</a>")})}o.prototype.$mi_error_toast({title:c(i("Oops! There was an error, your settings were not saved. Please try again in a few minutes. If the issue persists, please %1$scontact our support%2$s team.","ga-premium"),'<a target="_blank" href="'+p+'">',"</a>")})})})},v={fetchThemes:Be,updateThemeSetting:Qe},Ze=(t,e)=>{v.fetchThemes(e).then(s=>{s.themes&&t.commit("THEMES_UPDATED",{themes:s.themes,type:e})}).catch(s=>{console.error(s)})},Je=(t,e)=>{t.commit("THEME_STYLE_UPDATE",e),t.commit("$_settings/SETTINGS_SAVE_START",!0,{root:!0});let s=v.updateThemeSetting(t,e);return s.then(function(){t.commit("$_settings/SETTINGS_SAVE_END",!0,{root:!0})}),s},ze=(t,e)=>{e.type&&typeof e.key<"u"&&t.commit("PREVIEW_UPDATED",e)},Xe={getThemes:Ze,updatePreview:ze,updateThemeSetting:Je},ts=t=>t.themes_inline,es=t=>t.themes_widget,ss=t=>t.themes_products,os=t=>t.theme_preview_inline,ns=t=>t.theme_preview_widget,as=t=>t.theme_preview_products,rs={themes_inline:ts,themes_widget:es,themes_products:ss,theme_preview_inline:os,theme_preview_widget:ns,theme_preview_products:as},is=(t,e)=>{e.type&&typeof t["themes_"+e.type]<"u"&&(t["themes_"+e.type]=e.themes)},ps=(t,e)=>{e.type&&typeof t["theme_preview_"+e.type]<"u"&&(t["theme_preview_"+e.type]=e.key)},cs=(t,e)=>{e.type&&e.theme&&e.object&&e.key&&e.value&&typeof t["themes_"+e.type]<"u"&&(t["themes_"+e.type][e.theme].styles[e.object][e.key]=e.value)},us={THEMES_UPDATED:is,PREVIEW_UPDATED:ps,THEME_STYLE_UPDATE:cs},ms={themes_inline:{},themes_widget:{},themes_products:{},theme_preview_inline:"",theme_preview_widget:"",theme_preview_products:""},ls={namespaced:!0,state:ms,actions:Xe,getters:rs,mutations:us},_s=async({state:t,commit:e,dispatch:s})=>{if(!t.is_running&&t.queue&&t.queue.length>0){e("SET_IS_RUNNING",!0);const n=t.queue[0];await n(),e("SHIFT"),e("SET_IS_RUNNING",!1),setTimeout(()=>s("next"),0)}},ds=({state:t,commit:e,dispatch:s},n)=>{e("PUSH",n),t.is_running||s("next")},fs={next:_s,add:ds},hs=t=>t.queue,gs=t=>t.is_running,ys={queue:hs,is_running:gs},$s=t=>{t.queue&&t.queue.length>0&&(t.queue=t.queue.slice(1))},ws=(t,e)=>{t.queue&&(t.queue=[...t.queue,e])},Es=(t,e)=>{t.is_running=e},Ts={SHIFT:$s,PUSH:ws,SET_IS_RUNNING:Es},Ds={queue:[],is_running:!1},As={namespaced:!0,state:Ds,actions:fs,getters:ys,mutations:Ts},vs=t=>{t.commit("INIT")},Ps=t=>{t.commit("BLOCK_APP")},Ss=t=>{t.commit("UNBLOCK_APP")},Is=(t,e)=>{t.commit("ADD_NOTICE",e)},Ns=(t,e)=>{t.commit("REMOVE_NOTICE",e)},ks=t=>{t.commit("RESET_NOTICES")},bs={init:vs,block:Ps,unblock:Ss,addNotice:Is,removeNotice:Ns,resetNotices:ks},Us=t=>t.blocked,Os=t=>t.notices,Ls=t=>t.mi,Cs=t=>t.ftp_form,Rs={blocked:Us,notices:Os,mi:Ls,ftp_form:Cs},Fs=()=>{},Ms=t=>{t.blocked=!0},xs=t=>{t.blocked=!1},Ws=(t,e)=>{e.id&&o.set(t.notices,e.id,e)},js=(t,e)=>{t.notices[e]&&o.delete(t.notices,e)},Ys=t=>{t.notices={}},Gs=(t,e)=>{t.ftp_form.hostname=e},Hs=(t,e)=>{t.ftp_form.username=e},Vs=(t,e)=>{t.ftp_form.password=e},Ks=(t,e)=>{t.ftp_form.connection_type=e},qs=(t,e)=>{t.ftp_form.visible=!0,t.ftp_form.action=e.action,t.ftp_form.data=e.data},Bs=t=>{t.ftp_form.visible=!1},Qs={INIT:Fs,BLOCK_APP:Ms,UNBLOCK_APP:xs,ADD_NOTICE:Ws,REMOVE_NOTICE:js,RESET_NOTICES:Ys,UPDATE_HOSTNAME:Gs,UPDATE_USERNAME:Hs,UPDATE_PASSWORD:Vs,UPDATE_CONNECTION_TYPE:Ks,SHOW_FTP_FORM:qs,HIDE_FTP_FORM:Bs},Zs={blocked:!1,notices:{},mi:window.monsterinsights?window.monsterinsights:{},ftp_form:{hostname:"",username:"",password:"",connection_type:"ftp",visible:!1,action:"",data:{}}},Js={namespaced:!0,state:Zs,actions:bs,getters:Rs,mutations:Qs},zs=t=>{t.subscribe((e,s)=>{if(e.type==="$_app/INIT"){const n=s.$_app.mi.versions;n.php_version_below_54?t.commit("$_app/ADD_NOTICE",{title:i("Yikes! PHP Update Required","ga-premium"),content:c(i("MonsterInsights has detected that your site is running an outdated, insecure version of PHP (%1$s), which could be putting your site at risk for being hacked. WordPress stopped supporting your PHP version in April, 2019. Updating to the recommended version (PHP %2$s) only takes a few minutes and will make your website significantly faster and more secure.","ga-premium"),n.php_version,"7.4"),type:"error",button:{enabled:!0,text:i("Learn more about updating PHP","ga-premium"),link:n.php_update_link},dismissable:!0,id:"php_update_54"}):n.wp_version_below_46?t.commit("$_app/ADD_NOTICE",{title:i("Yikes! WordPress Update Required","ga-premium"),content:c(i("MonsterInsights has detected that your site is running an outdated version of WordPress (%s). MonsterInsights will stop supporting WordPress versions lower than 4.9 in 2020.  Updating WordPress takes just a few minutes and will also solve many bugs that exist in your WordPress install.","ga-premium"),n.wp_version),type:"error",button:{enabled:!0,text:i("Learn more about updating WordPress","ga-premium"),link:n.wp_update_link},dismissable:!0,id:"wp_update_46"}):n.php_version_below_56?t.commit("$_app/ADD_NOTICE",{title:i("Yikes! PHP Update Required","ga-premium"),content:c(i("MonsterInsights has detected that your site is running an outdated, insecure version of PHP (%1$s), which could be putting your site at risk for being hacked. Updating to the recommended version (PHP %2$s) only takes a few minutes and will make your website significantly faster and more secure.","ga-premium"),n.php_version,"7.4"),type:"error",button:{enabled:!0,text:i("Learn more about updating PHP","ga-premium"),link:n.php_update_link},dismissable:!0,id:"php_update_56"}):n.wp_version_below_49&&t.commit("$_app/ADD_NOTICE",{title:i("Yikes! WordPress Update Required","ga-premium"),content:c(i("MonsterInsights has detected that your site is running an outdated version of WordPress (%s). Updating WordPress takes just a few minutes and will also solve many bugs that exist in your WordPress install.","ga-premium"),n.wp_version),type:"error",button:{enabled:!0,text:i("Learn more about updating WordPress","ga-premium"),link:n.wp_update_link},dismissable:!0,id:"wp_update_49"})}})};o.use($);const Xs=[zs],so=new $.Store({modules:{$_app:Js,$_license:bt,$_auth:ee,$_addons:ke,$_settings:et,$_notifications:qe,$_popularposts:ls,$_queue:As},plugins:Xs});export{eo as M,A as N,et as S,h as a,d as b,w as g,so as s};

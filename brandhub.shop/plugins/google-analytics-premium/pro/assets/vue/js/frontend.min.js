import{V as a,a as v,n as i,_ as n,m as r,i as $,e as x}from"./chunks/vendor-f0a51a16.min.js";import{R as w}from"./chunks/index-6194cbc1.min.js";import{W as b}from"./chunks/WidgetReportError-6befc9bb.min.js";import{M as y,s as l}from"./chunks/index-4b67a93e.min.js";const C=s=>new Promise(t=>{let e=new FormData,_=a.prototype.$mi.page_id?a.prototype.$mi.page_id:window.location.pathname;e.append("action","monsterinsights_pageinsights_refresh_report"),e.append("security",a.prototype.$mi.nonce),e.append("report","pageinsights"),e.append("post_id",_),e.append("json",1),v.post(a.prototype.$mi.ajax,e).then(o=>{t(o.data)}).catch(function(o){s.dispatch("$_app/block",!1,{root:!0}),o.response})}),P={fetchReportData:C},D=s=>new Promise(t=>{s.dispatch("$_queue/add",()=>P.fetchReportData(s).then(function(e){if(e.data.message==="license_level"){t(!1);return}e.success?(s.commit("UPDATE_REPORT_DATA",{report:"pageinsights",data:e.data}),t(!0)):(a.prototype.$mi_error_toast(!1,e.data.message,e.data.footer),t(!1))}),{root:!0})}),E={getReportData:D},A=s=>s.date,R=s=>s.pageinsights,T=s=>s.loaded,F=s=>s.error,U=s=>s.noauth,I={date:A,pageinsights:R,loaded:T,error:F,noauth:U},O=(s,t)=>{t.report&&t.data&&s[t.report]&&a.set(s,t.report,t.data)},S=(s,t)=>{t.start&&t.end&&(a.set(s.date,"start",t.start),a.set(s.date,"end",t.end))},M=(s,t)=>{a.set(s.date,"interval",t)},L=(s,t)=>{s.loaded=t},k=(s,t)=>{s.error=t},N=s=>{s.noauth=!0,s.loaded=!0},V={UPDATE_REPORT_DATA:O,UPDATE_DATE:S,UPDATE_INTERVAL:M,UPDATE_LOADED:L,SET_ERROR:k,ENABLE_NOAUTH:N},B={loaded:!1,pageinsights:{},error:!1,noauth:!1},H={namespaced:!0,state:B,actions:E,getters:I,mutations:V},W={name:"FrontendStatsColumn",props:{extraClass:{type:String,default:""},label:String,value:[String,Number]},computed:{columnClass(){return"monsterinsights-stats-column "+this.extraClass}}};var j=function(){var t=this,e=t._self._c;return e("div",{class:t.columnClass},[t.label?e("div",{staticClass:"monsterinsights-stats-label",domProps:{textContent:t._s(t.label)}}):t._e(),t.value?e("div",{staticClass:"monsterinsights-stats-value",domProps:{innerHTML:t._s(t.value)}}):t._e(),t._t("default")],2)},z=[],G=i(W,j,z,!1,null,null,null,null);const d=G.exports,K={name:"NotificationsIndicator",data(){return{text_view_notifications:n("View notifications","ga-premium")}},computed:{...r({notifications:"$_notifications/notifications",view_url:"$_notifications/view_url",sidebar_url:"$_notifications/sidebar_url"}),has_notifications(){return this.notifications&&this.notifications.length>0}}};var Y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"monsterinsights-notifications-indicator"},[e("a",{attrs:{href:t.sidebar_url,title:t.text_view_notifications}},[e("svg",{attrs:{width:"35",height:"39",viewBox:"0 0 35 39",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M17.6898 39C20.3431 39 22.4954 36.8177 22.4954 34.125H12.8841C12.8841 36.8177 15.0364 39 17.6898 39ZM33.8706 27.5963C32.4192 26.015 29.7035 23.6361 29.7035 15.8438C29.7035 9.9252 25.6108 5.18731 20.0922 4.02492V2.4375C20.0922 1.09154 19.0164 0 17.6898 0C16.3631 0 15.2873 1.09154 15.2873 2.4375V4.02492C9.76874 5.18731 5.67602 9.9252 5.67602 15.8438C5.67602 23.6361 2.96031 26.015 1.50893 27.5963C1.05818 28.0876 0.858356 28.6749 0.862112 29.25C0.870376 30.4992 1.83721 31.6875 3.27357 31.6875H32.1059C33.5423 31.6875 34.5099 30.4992 34.5174 29.25C34.5212 28.6749 34.3213 28.0869 33.8706 27.5963Z",fill:"#393F4C"}})]),t.has_notifications?e("span",{staticClass:"monsterinsights-notifications-unread",domProps:{textContent:t._s(t.notifications.length)}}):t._e()])])},q=[],Z=i(K,Y,q,!1,null,null,null,null);const c=Z.exports,J={name:"FrontendStatsPageInsights",components:{NotificationsIndicator:c,FrontendStatsColumn:d},data(){return{text_insights_for:n("Last 30 Days Insights for:","ga-premium"),text_entrances:n("Entrances","ga-premium"),text_page_views:n("Page Views","ga-premium"),text_time_on_page:n("Time on Page","ga-premium"),text_page_load_time:n("Page Load Time","ga-premium"),text_total_users:n("Total Users","ga-premium"),text_exits:n("Exits","ga-premium"),text_30days:n("Last 30 Days","ga-premium"),text_yesterday:n("Yesterday","ga-premium"),interval:"30days",page_title:this.$mi.page_title}},computed:{...r({reportdata:"$_frontend/pageinsights"}),displayData(){let s={entrances:"0",pageviews:"0",timeonpage:"0",pageloadtime:"0",exits:"0",totalusers:"0"};return this.reportdata[this.interval]&&(s=this.reportdata[this.interval]),s}},methods:{hasData(s){return this.reportdata[this.interval]&&typeof this.reportdata[this.interval][s]<"u"}},mounted(){if(!this.$mi.authed){this.$store.commit("$_frontend/ENABLE_NOAUTH");return}Object.keys(this.reportdata).length!==0&&this.reportdata.constructor===Object||this.$store.dispatch("$_frontend/getReportData").then(()=>{this.$store.commit("$_frontend/UPDATE_LOADED",!0)})}};var Q=function(){var t=this,e=t._self._c;return e("div",{staticClass:"monsterinsights-frontend-stats-inner"},[e("frontend-stats-column",{attrs:{label:t.text_insights_for,value:t.page_title,"extra-class":"monsterinsights-stats-column-title"}}),e("frontend-stats-column",{attrs:{label:t.text_page_views,value:t.displayData.pageviews}}),e("frontend-stats-column",{attrs:{label:t.text_time_on_page,value:t.displayData.timeonpage}}),e("frontend-stats-column",{attrs:{label:t.text_entrances,value:t.displayData.entrances}}),e("frontend-stats-column",{attrs:{label:t.text_total_users,value:t.displayData.totalusers}}),t.hasData("exits")?e("frontend-stats-column",{attrs:{label:t.text_exits,value:t.displayData.exits}}):t._e(),e("frontend-stats-column",{staticClass:"monsterinsights-frontend-column-notifications"},[e("notifications-indicator")],1)],1)},X=[],tt=i(J,Q,X,!1,null,null,null,null);const et=tt.exports,st={name:"FrontendUpsell",data(){return{is_admin:this.$mi.is_admin,text_button:n("Upgrade to PRO","ga-premium"),text_install:n("Activate Page Insights Addon","ga-premium"),text_view_reports:n("View All Reports","ga-premium"),install_url:this.$mi.addons_url}},computed:{...r({license:"$_license/license",license_network:"$_license/license_network",addons:"$_addons/addons"}),upgradeUrl(){return this.$getUpgradeUrl("frontend-reports","admin-bar")},licenseType(){return this.$mi.network?this.license_network.type:this.license.type},reportsUrl(){return this.$mi.reports_url},isPageInsights(){return!!(typeof this.addons["page-insights"]<"u"&&this.addons["page-insights"].active)},canManageOptions(){return!!(this.$mi.roles_manage_options&&this.$mi.roles_manage_options.length!==0||this.$mi.roles_view_reports&&this.$mi.roles_view_reports.length!==0)}}};var nt=function(){var t=this,e=t._self._c;return e("div",[t.is_admin?e("a",{staticClass:"monsterinsights-button",attrs:{href:t.reportsUrl},domProps:{textContent:t._s(t.text_view_reports)}}):t.licenseType==="basic"?e("a",{staticClass:"monsterinsights-button",attrs:{target:"_blank",rel:"noopener",href:t.upgradeUrl},domProps:{textContent:t._s(t.text_button)}}):!t.is_admin&&t.canManageOptions&&!t.isPageInsights?e("a",{staticClass:"monsterinsights-button",attrs:{href:t.install_url},domProps:{textContent:t._s(t.text_install)}}):!t.is_admin&&!t.canManageOptions?e("a",{staticClass:"monsterinsights-button",attrs:{href:t.reportsUrl},domProps:{textContent:t._s(t.text_view_reports)}}):t._e()])},at=[],it=i(st,nt,at,!1,null,null,null,null);const rt=it.exports,ot={name:"FrontendStatsGeneral",components:{NotificationsIndicator:c,FrontendUpsell:rt,FrontendStatsColumn:d},data(){return{text_insights_for:n("Last 30 Days Insights for:","ga-premium"),text_your_website:n("Your Website","ga-premium"),text_sessions:n("Sessions","ga-premium"),text_pageviews:n("Pageviews","ga-premium"),text_session_duration:n("Avg. Duration","ga-premium"),text_total_users:n("Total Users","ga-premium")}},computed:{...r({overview:"$_reports/overview",addons:"$_addons/addons"}),text_upsell_title(){return this.$mi.is_admin?n("More data is available","ga-premium"):this.addons["page-insights"]&&this.addons["page-insights"].active?n("More data is available","ga-premium"):n("Want to see page-specific stats?","ga-premium")},hasTotalUsersData(){return typeof this.overview.infobox.totalusers<"u"&&typeof this.overview.infobox.totalusers.value<"u"}},mounted(){if(!this.$mi.authed){this.$store.commit("$_frontend/ENABLE_NOAUTH");return}this.$store.dispatch("$_reports/getReportData","overview").then(()=>{this.$store.commit("$_frontend/UPDATE_LOADED",!0)})}};var lt=function(){var t=this,e=t._self._c;return t.overview.infobox?e("div",{staticClass:"monsterinsights-frontend-stats-inner"},[e("frontend-stats-column",{attrs:{label:t.text_insights_for,value:t.text_your_website}}),e("frontend-stats-column",{attrs:{label:t.text_sessions,value:t.overview.infobox.sessions.value}}),e("frontend-stats-column",{attrs:{label:t.text_pageviews,value:t.overview.infobox.pageviews.value}}),e("frontend-stats-column",{attrs:{label:t.text_session_duration,value:t.overview.infobox.duration.value}}),t.hasTotalUsersData?e("frontend-stats-column",{attrs:{label:t.text_total_users,value:t.overview.infobox.totalusers.value}}):t._e(),e("frontend-stats-column",{staticClass:"monsterinsights-frontend-column-button",attrs:{label:t.text_upsell_title}},[e("frontend-upsell")],1),e("frontend-stats-column",{staticClass:"monsterinsights-frontend-column-notifications"},[e("notifications-indicator")],1)],1):t._e()},_t=[],dt=i(ot,lt,_t,!1,null,null,null,null);const ct=dt.exports,ut={name:"FrontendStatsContent",components:{FrontendStatsGeneral:ct,FrontendStatsPageInsights:et},data(){return{loaded:!1}},computed:{...r({license:"$_license/license",license_network:"$_license/license_network",addons:"$_addons/addons"})},mounted(){if(Object.keys(this.addons).length!==0&&this.addons.constructor===Object)return this.loaded=!0;this.$store.dispatch("$_license/getLicense"),this.$store.dispatch("$_addons/getAddons").then(()=>{this.loaded=!0})},methods:{showPageInsights(){return this.addons["page-insights"]&&!this.$mi.is_admin?this.addons["page-insights"].active:!1}}};var mt=function(){var t=this,e=t._self._c;return t.loaded?e("div",{staticClass:"monsterinsights-content-pro"},[t.showPageInsights()?e("frontend-stats-page-insights"):e("frontend-stats-general")],1):t._e()},pt=[],ht=i(ut,mt,pt,!1,null,null,null,null);const ft=ht.exports,gt={name:"FrontendPoweredBy",data(){return{text_powered_by:n("Powered by MonsterInsights","ga-premium"),upgrade_url:this.$getUpgradeUrl("admin-bar","powered-by")}}};var vt=function(){var t=this,e=t._self._c;return e("a",{staticClass:"monsterinsights-powered-by",attrs:{href:t.upgrade_url},domProps:{textContent:t._s(t.text_powered_by)}})},$t=[],xt=i(gt,vt,$t,!1,null,null,null,null);const wt=xt.exports,bt={name:"FrontendNoAuth",data(){return{text_no_auth:n("Please Setup Website Analytics to See Audience Insights","ga-premium"),text_auth_label:n("MonsterInsights, the #1 WordPress Analytics Plugin, helps you connect your website with Google Analytics, so you can see how people find and use your website. Over 3 million website owners use MonsterInsights to see the stats that matter and grow their business.","ga-premium"),text_wizard:n("Connect MonsterInsights and Setup Website Analytics","ga-premium"),text_learn:n("Learn More","ga-premium"),wizard_url:this.$mi.wizard_url,learn_link:this.$mi.getting_started_url}}};var yt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"monsterinsights-not-authenticated-notice"},[e("h3",{domProps:{textContent:t._s(t.text_no_auth)}}),e("div",{staticClass:"monsterinsights-settings-input monsterinsights-settings-input-authenticate"},[e("p",{domProps:{textContent:t._s(t.text_auth_label)}}),e("div",[e("a",{staticClass:"monsterinsights-wp-button monsterinsights-wp-button-primary",attrs:{href:t.wizard_url},domProps:{textContent:t._s(t.text_wizard)}}),e("a",{staticClass:"monsterinsights-wp-button",attrs:{href:t.learn_link},domProps:{textContent:t._s(t.text_learn)}})])])])},Ct=[],Pt=i(bt,yt,Ct,!1,null,null,null,null);const Dt=Pt.exports,Et={name:"ModuleFrontendReports",components:{FrontendNoAuth:Dt,FrontendPoweredBy:wt,WidgetReportError:b,FrontendStatsContent:ft},data(){return{statsVisible:!1,page_id:this.$mi.page_id,text_insights:n("Insights","ga-premium")}},created(){const s="$_reports";s in this.$store._modules.root._children||this.$store.registerModule(s,w);const t="$_frontend";t in this.$store._modules.root._children||this.$store.registerModule(t,H)},computed:{...r({reportdata:"$_frontend/pageinsights",loaded:"$_frontend/loaded",error:"$_frontend/error",noauth:"$_frontend/noauth"}),toggleButtonClass(){let s="ab-item ab-empty-item monsterinsights-toggle";return this.statsVisible&&(s+=" monsterinsights-toggle-active"),s},has_notifications(){return this.notifications&&this.notifications.length>0}},methods:{toggleStatsVisibility(){this.statsVisible=!this.statsVisible}}};var At=function(){var t=this,e=t._self._c;return e("li",{staticClass:"monsterinsights-adminbar-menu-item",attrs:{id:"wp-admin-bar-monsterinsights_frontend_button"}},[e("div",{class:t.toggleButtonClass,on:{click:t.toggleStatsVisibility}},[e("span",{staticClass:"ab-icon dashicons-before dashicons-chart-bar"}),e("span",{staticClass:"monsterinsights-admin-bar-handle-text",domProps:{textContent:t._s(t.text_insights)}}),t.has_notifications?e("span",{staticClass:"monsterinsights-menu-notification-indicator",domProps:{textContent:t._s(t.notifications.length)}}):t._e()]),t.statsVisible?e("div",{staticClass:"monsterinsights-frontend-stats"},[t.noauth?e("frontend-no-auth"):t.error?e("widget-report-error",{attrs:{error:t.error}}):e("frontend-stats-content"),t.loaded?t._e():e("div",{staticClass:"monsterinsights-frontend-stats-loading"},[e("span",{staticClass:"monsterinsights-frontend-spinner"})]),e("frontend-powered-by")],1):t._e()])},Rt=[],Tt=i(Et,At,Rt,!1,null,null,null,null);const Ft=Tt.exports;const Ut={install(s,{store:t}){s.prototype.$mi_loading_toast||(s.prototype.$mi_loading_toast=function(){}),s.prototype.$mi_error_toast||(s.prototype.$mi_error_toast=function(e){let{type:_="error",customContainerClass:o="monsterinsights-swal",allowOutsideClick:u=!1,allowEscapeKey:m=!1,allowEnterKey:p=!1,title:h=n("Error","ga-premium"),html:f=n("Please try again.","ga-premium"),footer:g=!1}=e;e={type:_,customContainerClass:o,allowOutsideClick:u,allowEscapeKey:m,allowEnterKey:p,title:h,html:f,footer:g},t.commit("$_frontend/SET_ERROR",{title:e.title,content:e.html,footer:e.footer})})}};window.addEventListener("load",function(){const s=document.getElementById("wp-admin-bar-monsterinsights_frontend_button");a.config.productionTip=!1,s&&({}.NODE_ENV!=="production"&&(a.config.devtools=!0,a.config.performance=!0),$({ctrl:!0}),a.use(y),a.use(Ut,{store:l}),x(window.monsterinsights.translations,"ga-premium"),new a({store:l,mounted:()=>{window.pagenow&&window.pagenow!=="dashboard"&&window.pagenow!=="toplevel_page_monsterinsights_reports"&&l.dispatch("$_queue/add",()=>l.dispatch("$_notifications/getNotifications"))},render:t=>t(Ft)}).$mount(s))});

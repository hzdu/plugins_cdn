!function(){var e={5396:function(e,t,i){e.exports=Backbone.Collection.extend({model:i(74)})},2190:function(e,t,i){const s=i(5396).extend({model:i(2185),firstPluginTag:"wp-rocket",activePlugins:function(){return this.where({active:!0})},getLatestActivePlugin:function(){const e=this.activePlugins();return e.length?e.pop():null},comparator:function(e){return e.get("tag")===this.firstPluginTag||e.get("configured")?0:1}});e.exports=s},7610:function(e,t,i){const s=i(5396),a=s.extend({model:i(6263),initialize:function(e){e.forEach((e=>{const t=jQuery.parseHTML(e.name);e.name=t?t[0].textContent:e.name,delete e.parent}))},comparator:(e,t)=>{let i;return i=e.isActive()?-1:t.isActive()?1:e.get("term_id")-t.get("term_id"),i},getActiveSkin:function(){let e;return this.models.forEach((t=>{t.isActive()&&(e=t)})),e},byName:function(e){let t=this.models;return e&&e.length>0&&(t=this.filter((t=>t.get("name").toLowerCase().includes(e.toLowerCase())))),new s(t)}});e.exports=a},2546:function(e,t,i){const s=i(5396).extend({model:i(6420),hasModel:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return this.filter((s=>s.meta("primary_template")===e&&s.meta("secondary_template")===t&&s.meta("variable_template")===i)).length>0},postTypeHasTemplate:function(e){return this.filter((t=>t.meta("secondary_template")===e)).length>0},generalArchiveTemplateExists:function(){return TTD.objects.collections.templates.hasModel("archive")},comparator:function(e){return e.id},filterItems:function(e){return this.filter((t=>{const i=this.filterByTemplateType(t),s=t.singleOrList(e),a=this.checkPostType(t),n=t.checkName(TTD.objects.models.filter.get("name"));return i&&s&&a&&n}))},filterByTemplateType:function(e){let t=!0;switch(TTD.objects.models.filter.get("template")){case"core":t=e.isCore();break;case"archive":t=e.isArchive();break;case"homepage":t=e.isHomepage()}return t},checkPostType:function(e){const t=TTD.objects.models.filter.get("post_type"),i=e.secondary();let s=!0;switch(t){case"all":const a=_.filter(TTD.CONST.content_types,(e=>"post"!==e.key&&"page"!==e.key));s=void 0!==_.findKey(a,(e=>e.key===i));break;case TTD.CONST.woocommerce.key:s=e.isWoo();break;case"":break;default:s="blog"===i?"post"===t:t===i}return s},modelInItemsFiltered:function(e){const t=this.filterItems(e.getType());return-1!==_.findIndex(t,(t=>t.get("ID")===e.get("ID")))},prepareTemplatesForSelect:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jQuery.noop,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=this.filter(e);let s=i.find((e=>e.isDefault()&&e.primary()===t.primary_template&&e.secondary()===t.secondary_template&&("post"!==t.secondary_template||e.format()===t.format)));return s||(s=i.find((e=>e.isDefault()&&e.primary()===t.primary_template&&e.secondary()===t.secondary_template)),s||(s={id:"default"})),i.map((e=>({key:e.get("ID"),name:e.name(),secondary:e.secondary(),inheritFrom:e.get("ID")===s.id})))},build(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:TTD.CONST.templates;return this.reset(),e.forEach((e=>this.add(TTD.utils.templateModelFactory(e)))),this}});e.exports=(new s).build()},3860:function(e,t,i){const s=i(5396);e.exports=s.extend({model:i(2995),comparator:(e,t)=>t.get("ID")-e.get("ID")})},74:function(e){function t(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function i(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}e.exports=Backbone.Model.extend({sync:function(e,t,i){(i=i||{}).cache=!1;const s=i.beforeSend;return i.beforeSend=function(e){if(e.setRequestHeader("X-WP-Nonce",TTD.CONST.nonce),"function"==typeof s)return s.apply(this,arguments)},Backbone.sync(e,t,i)},deepGet(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.attributes;const s=Array.isArray(e)?e:e.split(".");let a=i[s.shift()];for(;void 0!==a&&s.length;){const e=s.shift();if(void 0===a[e])return t;a=a[e]}return void 0===a?t:a},reset(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.clear({silent:e}),this.set("function"==typeof this.defaults?this.defaults():function(e){for(var s=1;s<arguments.length;s++){var a=null!=arguments[s]?arguments[s]:{};s%2?t(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},this.defaults))},getMultipleAttributes:function(e){let t={};return _.each(e,(e=>{t[e]=this.get(e)})),t}})},7140:function(e,t,i){e.exports=i(74).extend({defaults:()=>({title:"core",type:"",template:"core",post_type:"",name:"",counter:0}),setOptions:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.set(e),t||this.trigger("theme_dash:filter")}})},4603:function(e,t,i){const s=i(6420);e.exports=s.extend({hasThumbnail:function(){return!!this.isLandingPage()||s.prototype.hasThumbnail.call(this)},getThumbnailUrl:function(){return this.isLandingPage()?TTD.CONST.theme_url+"/inc/assets/images/lp-icon.png":s.prototype.getThumbnailUrl.call(this)},title:function(){return this.isLandingPage()?TTD.CONST.options.page.post_title:this.get("post_title")},icon:function(){let e=`${this.primary()}-${this.secondary()}`;return"blog"===this.secondary()&&(e="archive-general-template"),`<svg><use xlink:href="#ttd-${e}"></use></svg>`},isLandingPage:function(){return"page"===this.secondary()&&TTD.utils.isHomeLandingPage()},inheritsTemplate:function(){return 0===this.get("ID")},isCore:function(){return this.isDefault()},label:function(){return TTD.utils.homepageType()===this.secondary()?'<svg><use xlink:href="#ttd-home-page"></use></svg>Active Homepage':`Default ${TTD.utils.capitalize(this.secondary())}`},getContentType:function(){let e;return e=this.isLandingPage()?"Thrive Landing Page":this.isList()?"Blog":"Homepage",e}})},8707:function(e,t,i){const s=i(74);e.exports=s.extend({defaults:()=>({type:"",attachment_id:0,src:""}),initialize(e){e.attachment_id=TTD.CONST.branding.logo_data[e.type].attachment_id,e.src=TTD.CONST.branding.logo_data[e.type].src,this.set(e,{silent:!0})},getDisplayName:function(){return TTD.utils.capitalize(this.get("type"))+" Version"},getPlaceholder:function(){return TTD.CONST.branding.logo_data[this.get("type")].placeholder},fetchSourceForAttachmentId:function(){const e=this.get("attachment_id");if(""===e||0===parseInt(e))return void this.set("src",this.getPlaceholder());const t=this.getLogoCache(e);void 0===t?jQuery.ajax({url:TTD.CONST.routes.images+"/"+e,type:"get",headers:{"X-WP-Nonce":TTD.CONST.nonce}}).done((t=>{const i=t||this.getPlaceholder();this.set("src",i),this.setLogoCache(e,i)})).fail((()=>{TTD.utils.message("Error retrieving the logo.","error")})):this.set("src",t)},saveLogoAttachmentId:function(e,t,i){0!==e&&this.setLogoCache(e,t),this.set("src",t),TTD.CONST.branding.logo_data[this.get("type")].attachment_id=e,TTD.CONST.branding.logo_data[this.get("type")].src=t;const s=TTD.CONST.branding.logo_data[this.get("type")].logo_id;jQuery.ajax({url:TTD.CONST.routes.logo+"/"+s,type:"PUT",headers:{"X-WP-Nonce":TTD.CONST.nonce},data:{attachment_id:e}}).done((e=>{"function"==typeof i&&i(e)})).fail((()=>{TTD.utils.message("Error retrieving the logo.","error")}))},shouldHideReset:function(){const e=!this.get("src"),t=this.get("src")===this.getPlaceholder();return e||t},getLogoCache:function(e){return TTD.objects.collections.logo_sources&&TTD.objects.collections.logo_sources[e]},setLogoCache:function(e,t){TTD.objects.collections.logo_sources=TTD.objects.collections.logo_sources||{},TTD.objects.collections.logo_sources[e]=t}})},7506:function(e){e.exports=class{constructor(e){let t=void 0!==e.gallery_args?e.gallery_args:{};t=Object.assign({title:"Choose an image",button:{text:"Select"},multiple:!1,frame:"select",library:{type:"image"}},t),wp&&wp.media&&(this.instance=wp.media(t),this.add_callbacks(e.callbacks))}add_callbacks(e){this.instance.on("open",(()=>{"function"==typeof e.on_open&&e.on_open()})),this.instance.on("select",(()=>{if("function"==typeof e.on_select){const t=this.instance.state().get("selection").first().toJSON();e.on_select(t)}}))}open(){this.instance.open()}get_instance(){return this.instance}}},2185:function(e,t,i){function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function a(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){n(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}(t=>{const s=i(74);e.exports=s.extend({pluginAction:function(e,t,i,s){return new Promise(((n,o)=>{TTD.utils.sendApiRequest("plugins/"+e,a(a({},this.getMultipleAttributes(t)),s)).done((e=>{if(!_.isEmpty(i)){let t={};_.each(i,(i=>{t[i]=e[i]})),this.set(t)}n(e)})).fail((e=>{e.responseJSON&&(TTD.utils.message(e.responseJSON.message,"error"),o(e.responseJSON.message))}))}))}})})(jQuery)},6263:function(e,t,i){const s=i(74);e.exports=s.extend({urlRoot:TTD.CONST.routes.skins,idAttribute:"term_id",isActive:function(){return 1===parseInt(this.get("is_active"))},setActive:function(){this.set("is_active",1)},parse:function(e){return!e.id&&e.term_id&&(e.id=e.term_id),void 0!==e.parent&&delete e.parent,e},makeActive:function(){this.setActive(),TTD.utils.loading(),this.save({},{wait:!0,success:()=>{TTD.utils.message("Theme activated successfully!","success"),setTimeout((()=>location.href=`${TTD.CONST.wizardBaseUrl}#wizard`),1e3)}})},isNewlyAdded:function(){return this.isNew()||this.get("is_new_duplicate")||this.get("is_imported")},isDefaultTPMSkin:function(){return this.get("id")===TTD.CONST.default_tpm_theme_tag},getStatusLabel:function(){let e="";return this.isActive()?e="active":this.isNewlyAdded()&&(e="new"),e},isDuplicate:function(){return this.get("slug").includes("copy")},getPreviewThumbnail:function(){return`//landingpages.thrivethemes.com/data/skins/thumbnails/thumb-${this.get("tag")}.jpg`},getUniqueName:function(e){let t=`Copy of ${e}`,i=1,s=this.collection.where({name:t});for(;s.length;)t=t.includes(i-1)?t.replace(i-1,i):`${t}_${i}`,s=this.collection.where({name:t}),i+=1;return t}})},6420:function(e,t,i){const s=i(74);e.exports=s.extend({urlRoot:TTD.CONST.routes.templates,idAttribute:"ID",defaults:()=>({post_title:"",meta_input:{primary_template:"",secondary_template:"",variable_template:"",header:"",footer:"",format:"standard"},thumbnail:"",just_added:0,edit_url:"",preview_url:""}),meta:function(e,t){const i=this.get("meta_input");return void 0!==t&&(i[e]=t,this.set("meta_input",i)),i[e]},title:function(){return this.get("post_title")},primary:function(){return this.meta("primary_template")},secondary:function(){return this.meta("secondary_template")},variable:function(){return this.meta("variable_template")},format:function(){const e=this.meta("format");return void 0===e||0===e.length?"standard":e},getContentType:function(){let e;return e=this.is404()?"404":this.isSearch()?"Search":this.secondary(),0===e.length&&(e=this.isList()?"Archive":"Post"),e},icon:function(){const e=this.primary(),t=this.secondary();let i=["ttd"];if(this.isWoo())i.push("woo");else if(this.isSingular())switch(i.push("singular"),t){case"post":i.push("post",this.format());break;case"page":i.push("page")}else"archive"===e?i.push("archive",t?"custom":"general","template"):(i.push(e),t.length&&i.push(t));return`<svg><use xlink:href="#${i.join("-")}"></use></svg>`},name:function(){let e=this.title();if(!e){const t=this.primary(),i=this.secondary(),s=this.variable();switch(t){case"singular":"post"===i?(e=TTD.utils.capitalize(this.format()),e=(e||"Standard")+" Post"):e=TTD.utils.capitalize(i);break;case"archive":if(i.length>0){const t=TTD.CONST.archive_types[i];e=t.name,s.length>0&&(e+=" "+t.sub[s]),e+=" Archive"}else e="All Archives";break;default:e=TTD.utils.capitalize(t)}}return e.replace("Thrive ","")},isSingular:function(){return"singular"===this.primary()},isDefault:function(){return 1===parseInt(this.meta("default"))},isPostFormat:function(){return this.isSingular()&&"standard"!==this.format()},isPageTemplate:function(){return this.isSingular()&&"page"===this.secondary()&&!this.isDefault()},isBlog:function(){return"blog"===this.primary()},isSearch:function(){return"search"===this.primary()},is404(){return"error404"===this.primary()},isProduct(){return"product"===this.secondary()},isHomepage(){return"home"===this.primary()},isGeneralArchive:function(){return"archive"===this.primary()&&""===this.secondary()},isCustomArchive:function(){return"archive"===this.primary()&&this.secondary()},canDuplicate:function(){return!0},isList:function(){return this.isArchive()||this.isSearch()||this.isHomepage()&&"blog"===this.secondary()},singleOrList:function(e){const t=this.isList();return"single"===e?!t:t},checkName:function(e){return!e.trim().length||this.title().trim().toLowerCase().includes(e.toLowerCase())},isCore:function(){return["singular","archive","search","error404","blog"].includes(this.primary())&&(["post","page","product"].includes(this.secondary())||""===this.secondary())&&this.isDefault()},isArchive:function(){return"archive"===this.primary()},getType:function(){return this.isList()?"list":"single"},getLayoutName:function(){return this.get("layout")},getThumbnailUrl:function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.get("thumbnail").url+(e?`?_=${(new Date).getTime()}`:"")},getThumbnailCss:function(){return`background-image:linear-gradient(\n\t\t\t\t\trgba(255, 255, 255, 0) 0%, \n\t\t\t\t    rgba(255, 255, 255, 0) 80%,\n\t\t\t\t\trgb(255, 255, 255) 100%), \n\t\t\t\t\turl( ${this.getThumbnailUrl()} );`},hasThumbnail:function(){const e=this.get("thumbnail");return!_.isEmpty(e)&&!_.isEmpty(e.url)},getOrder:function(){let e=0;if(this.isDefault()?e+=3:e-=1,this.isHomepage())e+=6;else if(this.isSingular())switch(this.secondary()){case"post":e+=4+("standard"===this.format()?1:0);break;case"page":e+=3;break;case"product":e+=1}else this.isGeneralArchive()?e+=2:this.isSearch()?e+=1:this.is404()&&(e+=2);return-1*e},getDefaultLabel:function(){const e=this.secondary(),t=this.variable();let i=this.primary();if(this.isSingular())i=e,this.isPostFormat()?i=`${this.format()} ${i}`:this.isWoo()&&(i=` ${TTD.CONST.woocommerce.label} ${i}`);else if(this.isProduct())i=` ${TTD.CONST.woocommerce.label} ${TTD.CONST.woocommerce.shop_label}`;else if(e&&this.isCustomArchive()){const t=_.findWhere(TTD.CONST.list_templates,{key:"archive"});void 0!==t&&t.secondary&&t.secondary[e]&&(i=t.secondary[e].name)}if(t)try{if(this.get("variable_label"))i+=` "${this.get("variable_label")}"`;else{const s=TTD.CONST.list_templates.find((e=>"archive"===e.key));s&&s.secondary[e]&&s.secondary[e].variable[t]&&(i=`${i} "${s.secondary[e].variable[t]||""}"`)}}catch(e){console.warn(e)}return`Default ${i}`},isWoo(){return TTD.CONST.woocommerce.is_active&&TTD.CONST.woocommerce.templates.includes(this.meta("secondary_template"))},isJustAdded(){return this.get("just_added")}})},2995:function(e,t,i){const s=i(74);e.exports=s.extend({urlRoot:TTD.CONST.routes.typography,idAttribute:"ID",defaults:()=>({post_title:"",meta_input:{default:0,style:""},edit_url:"",preview_url:""}),is_active:function(){return this.meta("default")},meta:function(e,t){const i=this.get("meta_input");return void 0!==t&&(i[e]=t,this.set("meta_input",i)),i[e]},getPreviewUrl:function(){return this.get("preview_url")+`&admin_preview_id=${this.get("ID")}`}})},2625:function(e,t,i){function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function a(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){n(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let o;const{STEPS:r,SECTIONS:l}=i(1048),c=i(74).extend({promises:{},defaults(){const e={};return Object.values(r).forEach((t=>e[t.id]=null)),e.template_instances={},e},load(e){return this.promises[e]||(this.promises[e]=new Promise(((t,i)=>{if(null!==this.attributes[e])return t(this.attributes[e]);this.fetch(e).done((i=>{i&&i.data&&(this.set(e,Object.values(i.data)),t(i.data))})).fail(i)}))),this.promises[e].finally((()=>{delete this.promises[e]})),this.promises[e]},updateTemplate:function(e,t,i){const s=this.get(e);if(s){const e=s.find((e=>String(e.id)===String(t)));if(e)for(const t in i)e[t]=i[t]}return this},loadTemplate(e,t,i,s){const a=e+"--"+t,n=this.get("template_instances");return new Promise(((o,r)=>{if(n[a])return o(n[a]);this.fetchInstance(e,t,i,s).done((e=>{const t=e.data||e;n[a]=t,this.set({instances:n}),o(t)})).fail(r)}))},clearCache(e){const t=this.get("template_instances");Object.keys(t).forEach((i=>{i.startsWith(e+"--")&&delete t[i]}))},fetch(e){return jQuery.ajax({url:`${TTD.CONST.routes.wizard}/templates`,data:{type:e},headers:{"X-WP-Nonce":TTD.CONST.nonce}}).fail((t=>{t.responseJSON&&(TTD.utils.message(t.responseJSON.message,"error"),this.attributes[e]=null)}))},fetchInstance(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"cloud",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:`${TTD.CONST.routes.wizard}/templates/${t}`;return jQuery.ajax({url:s,data:{type:e,source:i},headers:{"X-WP-Nonce":TTD.CONST.nonce}})},indexOf(e,t){return this.get(e)?this.get(e).findIndex((e=>String(e.id)===t)):-1},count(e){return this.get(e)?this.get(e).length:0},getNextTemplateId(e,t){return(this.get(e)[this.indexOf(e,t)+1]||{id:""}).id},getPrevTemplateId(e,t){return(this.get(e)[this.indexOf(e,t)-1]||{id:""}).id},getNextTemplateSource(e,t){return(this.get(e)[this.indexOf(e,t)+1]||{source:""}).source},getPrevTemplateSource(e,t){return(this.get(e)[this.indexOf(e,t)-1]||{source:""}).source},getTemplate(e,t){const i=this.indexOf(e,t);return i>-1?this.get(e)[i]:null}}),d=i(74).extend({defaults:()=>({step:"splash",type:""}),__savedStepData:null,initialize(){o.on("step-change",((e,t)=>{e.id!==t.id&&("homepage"===e.id?this.saveWizardData():"homepage"===t.id&&this.restoreWizardData(),this.reset())}))},saveWizardData(){o.isStepCompleted("homepage")&&(this.__savedStepData=a({},o.deepGet("settings.homepage")))},restoreWizardData(){const e=this.isSetFromSkin();let t=this.__savedStepData;null===t&&e&&(t=TTD.CONST.wizardOriginal.settings.homepage),t&&(o.isStepCompleted("homepage")||e)&&o.setStepData(t,!0,!0,"homepage")},clearWizardData(){this.__savedStepData=null},isSplash(){return!o.isStepCompleted()&&"splash"===this.get("step")&&!this.isSetFromSkin()},reset(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.clear({silent:!0}),this.set(a(a({},this.defaults()),this.__savedStepData||o.deepGet("settings.homepage")),{silent:e})},data(){const e={title:"Choose a Homepage",canContinue:!1,hasTemplateSelector:!(this.isSplash()||!this.get("type")),hasTemplateDropdown:"blog"!==this.get("type"),popupMessage:"",saveData:{type:this.get("type")}};if(this.isSplash())return e;switch(e.title="Homepage",this.get("type")){case"page":e.canContinue=!!this.get("page_id"),e.saveData.page_id=this.get("page_id"),e.saveData.page_title=this.get("page_title"),e.saveData.page_url=this.get("page_url"),e.saveData.is_landing_page=this.get("is_landing_page");break;case"blog":e.canContinue=!0,e.hasTemplateSelector=o.hasStepChanges();break;case"template":e.canContinue=o.deepGet("settings.homepage.template_id"),e.popupMessage=o.isStepCompleted()?"You can change the <strong>Homepage Template</strong> from the top dropdown":"You can change the <strong>Homepage Template</strong> from the top dropdown or<br>by pressing the arrow keys &lt; &gt;<br>When you are done press the <strong>Choose and Continue</strong> button.",e.saveData.template_id=o.deepGet("settings.homepage.template_id"),e.saveData.uid=o.deepGet("settings.homepage.uid")||""}return e},getFrameURL(){let e=TTD.CONST.wizard.urls.home;const t={step:"homepage",type:this.isSplash()?"":this.get("type")};if("page"===t.type)t.page_id=this.get("page_id");else if("template"===t.type){if(this.isSetFromSkin()&&TTD.CONST.wizardOriginal.settings.homepage.template_id===this.get("template_id"))return TTD.utils.addUrlParam(TTD.CONST.wizard.urls.home,{"ttb-wizard[step]":"homepage-done"});t.template_id=this.get("template_id"),t.uid=this.get("uid"),e=TTD.CONST.wizard.urls.draft_homepage}return e=new URL(e),p(e,t)},getPreviewTemplateId(){let e="";return e="page"===this.get("type")?this.get("page_id"):this.get("template_id"),String(e||"")},isSetFromSkin(){return 1===this.get("has_homepage_set_from_skin")}}),h=i(74).extend({homepageState:null,sections:l,templates:new c(TTD.CONST.wizard.templates),url:TTD.CONST.routes.wizard,iframeData:{headerHeight:"",footerHeight:"",templateId:"",scrollWidth:"",nextPage:{},prevPage:{}},isNew:()=>!0,defaults:()=>({activeIndex:-1,active:"",done:[],settings:{}}),initialize(e){e.active&&(-1===this.indexOf(e.active)?this.set("active",""):this.loadStepTemplates()),window.TTD.objects.templatesStore=this.templates},getSteps(e){return r.filter((t=>t.section===e)).map((e=>(e.active=this.get("active")===e.id,e.done=this.get("done").includes(e.id),e.disabled=!this.canAccessStep(e.id),e)))},loadStepTemplates(){const e=this.get("active")&&!["logo","menu"].includes(this.get("active"))?this.templates.load(this.get("active")):new Promise((e=>e([])));return e.then((e=>{this.trigger("templates-loaded",e)})),e},_id(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?"string"==typeof e?e:e.id:""},indexOf(e){return e=this._id(e),_.findIndex(r,(t=>t.id===e))},canAccessStep(e){return e=this._id(e),!0},markComplete(e){Array.isArray(e)||(e=[e]);const t=new Set(this.get("done").concat(e));return this.set({done:Array.from(t).map(this._id)},{silent:!0}),this},getStep:e=>r[e],gotoStep(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"header";if(e=this._id(e),this.canAccessStep(e)&&e!==this.get("active")){const t=this.getCurrentStep();this.set({active:e,activeIndex:this.indexOf(e)}),this.triggerStepChange(t)}return this},triggerStepChange(e){e&&e.id===this.get("active")||this.loadStepTemplates(),e||(e=r[this.get("activeIndex")]);const t=r[this.get("activeIndex")];this.ensureStepUrl(t).then((()=>{this.trigger("step-change",t,e)}))},ensureStepUrl(e){return new Promise(((t,i)=>{if(this.getStepBaseURL())t();else{const s=this._id(e);jQuery.ajax({url:`${TTD.CONST.routes.wizard}/url/${s}`,headers:{"X-WP-Nonce":TTD.CONST.nonce}}).done((e=>{TTD.CONST.wizard.urls[s]=e,t()})).fail(i)}}))},getCurrentStep(){return r[this.get("activeIndex")]},getStepKey(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getCurrentStep())[e]},getOriginalStepData(e){return this.deepGet(`settings.${this.get("active")}.${e}`,null,TTD.CONST.wizardOriginal)},hasActiveStep(){return this.get("activeIndex")>=0&&r[this.get("activeIndex")]},previous(){let e=this.get("activeIndex")-1;return r[e]&&this.gotoStep(r[e].id),this},hasNextStep(){return-1!==this.getNextAvailableStepIndex()},hasPreviousStep(){return-1!==this.getPrevAvailableStepIndex()},next(){if(this.isFinished(!1))return this.set({active:"",activeIndex:-1}),this.trigger("finished"),this;const e=this.getNextAvailableStep();return e&&this.gotoStep(e.id),this},getStepBaseURL(){const e=this.getCurrentStep();let t="post";const i=this._id(e);switch(i){case"blog":t="blog";break;case"page":t="page";break;case"product":case"shop":case"cart":case"checkout":t=i}return TTD.CONST.wizard.urls[t]},getFrameURL(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.getCurrentStep()||this.getNextAvailableStep(),i=new URL(this.getStepBaseURL());return i.searchParams.append("force-flat",1),this.isFinished()||!t?(i.searchParams.append("ttb-wizard[step]","__welcome"),String(i)):"homepage"===t.id?this.isStepCompleted()&&!this.hasStepChanges()?TTD.utils.addUrlParam(TTD.CONST.wizard.urls.home,{"ttb-wizard[step]":"homepage-done"}):this.homepageState.getFrameURL():(e=a(a({step:t.id},this.deepGet(`settings.${t.id}`,{})),e),p(i,e))},isStarted(){return this.get("done").length>0||this.get("active")},isFinished(){return!((!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&this.get("active"))&&this.get("done").length>=r.length},getNextAvailableStep(){return r[this.getNextAvailableStepIndex()]||null},getNextAvailableStepIndex(){const e=r.map(((e,t)=>t)).filter((e=>!this.get("done").includes(r[e].id)));if(0===e.length)return-1;let t=e[0];const i=Number(this.get("activeIndex"));return e.some((e=>{if(e>i)return t=e,!0})),t!==i?t:-1},getPrevAvailableStepIndex(){const e=r.map(((e,t)=>t)).filter((e=>!this.get("done").includes(r[e].id))).reverse();if(0===e.length)return-1;let t=e[0];const i=Number(this.get("activeIndex"));return e.some((e=>{if(e<i)return t=e,!0})),t!==i?t:-1},start(){return this.gotoStep(this.getNextAvailableStep())},setStepData(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.get("active");const n=this.get("settings");return i&&delete n[s],n[s]=a(a({},n[s]||{}),e),this.set({settings:n},{silent:t}),this},completeStep(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this.get("active");TTD.utils.do_action(`wizard.model.complete.${this.get("active")}`,this,e),TTD.CONST.wizardOriginal.settings=TTD.CONST.wizardOriginal.settings||{},TTD.CONST.wizardOriginal.settings[i]=jQuery.extend(!0,{},this.deepGet(`settings.${i}`));const s=this.getNextAvailableStep();"logo"===i&&(this.templates.clearCache("header"),this.templates.clearCache("footer"),this.templates.clearCache("woo_header"),this.templates.clearCache("woo_footer")),this.trigger("ajax-send"),this.markComplete(i),!t&&e&&this.next();const{active:n,activeIndex:o}=this.attributes;return this.save(void 0,{beforeSend(e,t){const a=new URL(t.url);a.searchParams.append("step",i),a.searchParams.append("next",s?s.id:""),a.searchParams.append("nextIndex",r.indexOf(s)),t.url=a.toString()}}).done((i=>{const s=i.success;delete i.success,TTD.CONST.wizard=a(a({},TTD.CONST.wizard),i),TTD.utils.lightspeedOptimizeItem(i.id,i.preview_url);const r=this.get("settings");this.clear({silent:!0}),this.set(a(a(a({done:[]},TTD.CONST.wizard.data),{settings:r}),{},{active:n,activeIndex:o}),{silent:!0}),t||e||this.next(),this.trigger("complete-step-done",i,s),i.message&&TTD.utils.message(i.message,"info")})).always((()=>{this.trigger("ajax-done")}))},canContinue(){return TTD.utils.apply_filters("wizard.can_continue",this.getPreviewTemplateId(),this)},getPreviewTemplateId(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.get("active");return"homepage"===e?this.homepageState.getPreviewTemplateId():String(this.deepGet(`settings.${e}.template_id`,""))},getPreviewTemplateSource(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.get("active");return String(this.deepGet(`settings.${e}.source`,""))},getAdjacentTemplateId(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"next";return this.templates["next"===e?"getNextTemplateId":"getPrevTemplateId"](this.get("active"),this.getPreviewTemplateId())},getAdjacentTemplateSource(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"next";return this.templates["next"===e?"getNextTemplateSource":"getPrevTemplateSource"](this.get("active"),this.getPreviewTemplateId())},getPreviewTemplateTitle(){const e=this.getPreviewTemplateId(),t=this.templates.getTemplate(this.get("active"),e),i=this.getCurrentStep();return TTD.utils.apply_filters("wizard.preview_template_title",t?t.post_title:"",e)||i&&i.selector&&i.selector.label},hasAdjacentTemplate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"next",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.get("active"),i=!1;if("homepage"===t&&"page"===this.homepageState.get("type"))i=!!this.iframeData[`${e}Page`];else{const s=this.templates.indexOf(t,this.getPreviewTemplateId(t));"prev"===e?i=s>0:"next"===e&&(i=s<this.templates.count(t)-1)}return i},async selectTemplate(e){const t={template_id:e.id,uid:e.uid||""};let i;if("iframe"===this.getStepKey("previewMode")){this.setStepData(t);const s=this.get("active");"homepage"===s&&this.homepageState.set(t,{silent:!0}),"cloud"===e.source&&(e=await new Promise((t=>{TTD.objects.templatesStore.fetchInstance(s,e.id).done((i=>{TTD.objects.templatesStore.updateTemplate(s,e.id,{id:i.data.id,source:"local"}),t({id:i.data.id,source:"local"})}))})),t.template_id=e.id,this.setStepData({template_id:e.id,source:"local"})),i=new Promise((t=>{t({id:e.id})})),this.triggerStepChange()}else i=this.templates.loadTemplate(this.get("active"),e.id,e.source);return i.finally((()=>{e.source&&(t.source=e.source),this.setStepData(t),this.trigger("template-selected")})),i},getTemplateDefaultIcon(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getCurrentStep(),t="";switch(this._id(e)){case"post":t="singular-post-standard";break;case"blog":t="archive-general-template";break;case"homepage":case"page":t="singular-page"}return t?TTD.utils.icon(t):""},hasTopBar(){return this.getCurrentStep()&&this.getStepKey("hasTopMenu")},hasTemplateSelector(){return!!this.get("active")&&("homepage"===this.get("active")?this.homepageState.data().hasTemplateSelector:!!this.getStepKey("selector"))},hasSelectorDropdown(){return"homepage"!==this.get("active")||this.homepageState.data().hasTemplateDropdown},getContinueLabel(){const e=this.isFinished(!1);return"homepage"===this.get("active")&&"blog"===this.homepageState.get("type")?e?"Choose":"Continue":e?"Choose":"Choose and Continue"},isStepCompleted(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.get("active");return this.get("done").includes(this._id(e))},getPopupMessage(){if(this.hasActiveStep()){const e=this.getCurrentStep();return"homepage"===e.id?this.homepageState.data().popupMessage:(this.isStepCompleted()?e.completedPopupMessage:e.popupMessage)||""}},getStepTitle(){const e=this.getCurrentStep();return e?this.isStepCompleted()?e.sidebarLabel:"homepage"===e.id?this.homepageState.data().title:e.title:""},getStepDescription(){const e=this.getCurrentStep();return this.isStepCompleted()&&(e.subtitle=""),e.subtitle},hasStepChanges(){const e=this.get("active");if(!e)return!1;if("homepage"===e){const e=this.homepageState,t=e.get("type");return t!==this.getOriginalStepData("type")||"page"===t&&String(e.get("page_id"))!==String(this.getOriginalStepData("page_id"))||"template"===t&&String(e.get("template_id"))!==String(this.getOriginalStepData("template_id"))||e.isSetFromSkin()}const t=this.deepGet(`settings.${e}`);return Object.keys(t).some((e=>String(this.getOriginalStepData(e))!==String(t[e])))},hasPreviousStepLink(){return!this.isStepCompleted()&&this.get("activeIndex")>0}}),p=(e,t)=>(e instanceof URL||(e=new URL(e)),_.each(t,((t,i)=>{e.searchParams.append(`ttb-wizard[${i}]`,t||"")})),e.searchParams.append("_preview","1"),String(e));o=new h(_.isEmpty(ttd_admin_localize.wizard.data)?{}:ttd_admin_localize.wizard.data),o.homepageState=new d,TTD.CONST.wizardOriginal=jQuery.extend(!0,{},ttd_admin_localize.wizard.data),e.exports=o},1048:function(e){e.exports={STEPS:TTD.CONST.wizard.structure.steps,SECTIONS:TTD.CONST.wizard.structure.sections}},1607:function(){function e(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function t(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var i;(i=jQuery)((function(){let s,a,n;i.widget("custom.ttdTooltip",i.ui.tooltip,{close:function(e,t,i){n=this,a=this._superApply.bind(this);const o=e&&e.toElement&&e.toElement.closest(".ui-tooltip");o||(e.instantClose?a(arguments):s=setTimeout((()=>a(arguments)),300))},closeAll(i){Object.keys(this.tooltips).forEach((s=>{this.close(function(i){for(var s=1;s<arguments.length;s++){var a=null!=arguments[s]?arguments[s]:{};s%2?e(Object(a),!0).forEach((function(e){t(i,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(a)):e(Object(a)).forEach((function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(a,e))}))}return i}({currentTarget:this.tooltips[s].element},i))}))}}),i("body").on("mouseleave",".ui-tooltip:not(.persistent)",(()=>n.closeAll())).on("mouseenter",".ui-tooltip",(()=>clearTimeout(s))),i(document).ttdTooltip({show:null,items:"[data-tooltip]",content:function(){let e=this.dataset.tooltip;return(e.startsWith("#")||e.startsWith("."))&&(e=i(e).clone().removeAttr("style")),e},open:function(e,t){i(".ui-tooltip").not(t.tooltip).hide();const s=i(this).data("customTtdTooltip").tooltips[t.tooltip[0].id].element[0],a=s.dataset.tooltipPosition||"top",n={of:s,my:"center top",at:"center bottom",using:function(e,t){i(this).css(e),i("<div>").addClass(`ui-tt-arrow ${t.vertical} ${t.horizontal}`).appendTo(this)}};switch(s.dataset.tooltipSide){case"bottom":n.at="center bottom+10",n.my="center top";break;case"right":n.at="right+10 center",n.my="left center";break;case"left":n.at="left-10 center",n.my="right center";break;default:n.at="center top-10",n.my="center bottom"}t.tooltip.addClass(`ui-side-${a}`).position(n)}})}))},9676:function(e,t,i){(t=>{const s="ttd-",a=i(6420),n=i(4603),o=i(7610);let r=null;e.exports={tpl:(e,i)=>{0!==e.indexOf(s)&&(e=s+e);const a=t("script#"+e.replace(/\//g,"-")).html()||"";return i?_.template(a)(i):_.template(a)},icon:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ttd-";return e?this.tpl("dashboard/utils/icon")({icon:t+e}):""},add_filter:function(e,t,i){return void 0===i&&(i=10),this.filter_callbacks||(this.filter_callbacks={}),this.filter_callbacks[e]||(this.filter_callbacks[e]=[]),this.filter_callbacks[e].push({fn:t,priority:parseInt(i)}),this},remove_filter:function(e,t,i){if(!this.filter_callbacks)return this;if(void 0===t)return delete this.filter_callbacks[e],this;if(void 0===i&&(i=10),!this.has_filter(e))return this;for(let s,a=0;s=this.filter_callbacks[e][a++];)s.priority===i&&s.fn===t&&(a--,this.filter_callbacks[e].splice(a,1));return this},has_filter:function(e){return this.filter_callbacks&&this.filter_callbacks[e]&&this.filter_callbacks[e].length},apply_filters:function(e,i){if(arguments.length<1)return void 0!==i?i:null;if(this.has_filter(e)){let s=[];arguments.length>2&&(s=Array.prototype.slice.call(arguments,2));const a=this.filter_callbacks[e].sort((function(e,t){return e.priority-t.priority}));t.each(a,(function(e,t){t.fn&&(i=t.fn.apply(null,[i].concat(s)))}))}return i},add_action:function(e,t,i){return void 0===i&&(i=10),this.action_callbacks||(this.action_callbacks={}),this.action_callbacks[e]||(this.action_callbacks[e]=[]),this.action_callbacks[e].push({fn:t,priority:parseInt(i)}),this},remove_action:function(e,t,i){if(!this.action_callbacks)return this;if(void 0===t)return delete this.action_callbacks[e],this;if(void 0===i&&(i=10),!this.has_action(e))return this;for(let s,a=0;s=this.action_callbacks[e][a++];)s.priority===i&&s.fn===t&&(a--,this.action_callbacks[e].splice(a,1));return this},has_action:function(e){return this.action_callbacks&&this.action_callbacks[e]&&this.action_callbacks[e].length},do_action:function(e){if(this.has_action(e)){const i=arguments.length>1?Array.prototype.slice.call(arguments,1):[],s=this.action_callbacks[e].sort((function(e,t){return e.priority-t.priority}));t.each(s,(function(e,t){t.fn&&t.fn.apply(null,i)}))}},message:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3;TTD.Elements.$notification.attr("class",s+t+" ttd-show").html(e),setTimeout((()=>{TTD.Elements.$notification.removeClass("ttd-show")}),i)},capitalize:e=>e?e.charAt(0).toUpperCase()+e.slice(1):"",saveOptions:(e,i,s)=>{t.post({headers:{"X-WP-Nonce":TTD.CONST.nonce},url:TTD.CONST.routes.options,data:{name:e,value:i},dataType:"json"}).done((e=>{"function"==typeof s&&s(e)})).fail((()=>{TTD.utils.message("Error saving the option!","error")}))},get_options:function(e,i){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return t.get({headers:{"X-WP-Nonce":TTD.CONST.nonce},url:TTD.CONST.routes.options+"/"+s,data:{name:e},dataType:"json"}).done((e=>{"function"==typeof i&&i(e)})).fail((()=>{TTD.utils.message("Error retrieving the option!","error")}))},getCloudSkinsCollection(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise((i=>{null===r||e?t.get({headers:{"X-WP-Nonce":TTD.CONST.nonce},url:`${TTD.CONST.routes.skins}/cloud`,data:{force:e?1:0},dataType:"json"}).done((e=>{r=new o(e),i(r)})).fail((e=>{TTD.utils.message(e,"error"),i(new o([]))})):i(r)}))},tcb_editor_ajax_request:function(e,i,s){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"post";i=Object.assign({action:"tcb_editor_ajax",custom:e,nonce:TTD.CONST.editor_nonce},i),t.ajax({url:ajaxurl,type:a,data:i}).done((e=>{"function"==typeof s&&s(e)})).fail((()=>{TTD.utils.message("Error!","error")}))},local_storage_set:(e,t)=>{if(window.localStorage&&e&&null!=t){"object"==typeof t&&(t=JSON.stringify(t));try{window.localStorage.setItem(e,t)}catch(e){console.log(e)}}},content_smaller_than_screen:e=>{let t=0;return e.children().each(((e,i)=>t+=i.offsetHeight)),t+32<window.innerHeight},media_library_instance:function(e,t,i){if(void 0===TTD.objects.media[e]){const s={title:"Choose an image",button:{text:"Select"},multiple:!1,frame:"select",library:{type:"image"}};i=Object.assign(s,i),TTD.objects.media[e]=wp.media.frames.file_frame=wp.media(i),TTD.objects.media[e].on("select",(()=>{if("function"==typeof t){const i=TTD.objects.media[e].state().get("selection").first().toJSON();t(i)}}))}return TTD.objects.media[e]},saveSkinMeta:function(e,t,i){TTD.objects.collections.skins.getActiveSkin().save({[e]:t},{success:e=>{"function"==typeof i&&i(e)},error:(e,t,i)=>{this.error(e,t,i)}})},validate_url:e=>/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e),reload_iframe:function(e){e.attr("src",e[0].contentWindow.location.href)},loading:function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];TTD.Elements.$body.toggleClass("ttd-loading",e)},initScrollbar:function(e,t){e.addClass("scrollbar-inner").scrollbar(t)},is_in_viewport:function(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)},getCssVariableValue:function(e){return e=e.replace(/var\(|\)/gi,"").trim(),window.getComputedStyle(document.body).getPropertyValue(e)},toFixed:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Number(Math.round(parseFloat(e)+"e"+t)+"e-"+t)},changeCssVariableValue:function(e,t){document.getElementsByClassName("ttd-site-preview")[0].contentWindow.document.documentElement.style.setProperty(e,t),document.documentElement.style.setProperty(e,t)},changeMasterVariable:function(e){this.changeCssVariableValue("--tcb-theme-main-master-h",e.h),this.changeCssVariableValue("--tcb-theme-main-master-s",e.s),this.changeCssVariableValue("--tcb-theme-main-master-l",e.l),this.changeCssVariableValue("--tcb-theme-main-master-a",e.a),this.changeCssVariableValue("--tcb-main-master-h",e.h),this.changeCssVariableValue("--tcb-main-master-s",e.s),this.changeCssVariableValue("--tcb-main-master-l",e.l),this.changeCssVariableValue("--tcb-main-master-a",e.a)},homepageType:()=>"posts"===TTD.CONST.options.show_on_front?"blog":"page",isHomeLandingPage:()=>!!TTD.CONST.options.is_landing_page,templateModelFactory:function(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=t&&t.meta_input&&"home"===t.meta_input.primary_template?new n(t):new a(t),e},filterObjectPropertiesByKey:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Object.keys(e).filter((e=>t.includes(e))).reduce(((t,i)=>(t[i]=e[i],t)),{})},filterDataByAllowedArr:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const i=[];return _.each(e,(e=>{i.push(this.filterObjectPropertiesByKey(e,t))})),i},isWooStep:function(e){return"woo_header"===e||"woo_footer"===e},renderTemplatesSection:function(e,t,s){let a="";return _.isEmpty(t)||(a=new(i(4682))({title:e,items:t,view:s}).$el.html()),a},lightspeedOptimizeItem(e,i){e&&i&&(i=this.addUrlParam(i,{"force-flat":1,"tcb-lightspeed-optimize":1}),t(`<iframe id="lightspeed-optimize-iframe-${e}" style="display:none;">`).appendTo(t("body")).attr("src",i),this.listenerAdded||(window.addEventListener("message",(e=>{e.data&&"lightspeed-optimize"===e.data.from&&(t(`#lightspeed-optimize-iframe-${e.data.id}`).remove(),console.info(`${e.data.id} has been optimized!`))})),this.listenerAdded=!0))},addUrlParam(e,i){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const a=new URL(e);return t.isPlainObject(i)?Object.keys(i).forEach((e=>a.searchParams.append(e,i[e]))):a.searchParams.append(i,s),a.toString()},sendApiRequest(e){const i={namespace:"ttb/v1",endpoint:e,type:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST",data:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}};return i.headers={"X-WP-Nonce":TTD.CONST.nonce},t.ajax(wp.apiRequest.buildAjaxOptions(i))},tooltipDismissed:e=>TTD.CONST.dismissed_tooltips.includes(e),reloadDashboard(){TTD.Views.Dashboard&&TTD.Views.Dashboard.$el.addClass("ttd-loading"),location.reload()},isFreshInstall:()=>TTD.CONST.wizard.is_fresh_install,toggleModalFreeze:e=>TTD.FLAGS.MODAL_FREEZE=e,isModalFreezeActive:()=>TTD.FLAGS.MODAL_FREEZE}})(jQuery)},2586:function(e){e.exports=Backbone.View.extend({events:{"click .click":"_call","input .input":"_call","change .change":"_call","mousedown .mousedown":"_call","mouseenter .mouseenter":"_call","mousemove .mousemove":"_call","mouseup .mouseup":"_call","keyup .keyup":"_call","keydown .keydown":"_call","keyup .keyup-enter":"_keyup_enter","blur .blur":"_call","mouseleave .mouseleave":"_call"},initialize:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"function"==typeof this.before_initialize&&this.before_initialize(e),!e.preventRender&&this.render(e),"function"==typeof this.after_initialize&&this.after_initialize(e),this},_call:function(e){if(e.currentTarget.disabled)return!1;const t=e.currentTarget.getAttribute(`data-fn-${e.type}`)||e.currentTarget.dataset.fn;return t&&"__return_false"===t?(e.stopPropagation(),e.preventDefault(),!1):"function"!=typeof this[t]||this[t].call(this,e,e.currentTarget)},_keyup_enter:function(e){return 13!==e.which||this._call(e)},show:function(){return this.$el.show(),this},hide:function(){return this.$el.hide(),this},toggle:function(e){return e?this.show():this.hide()},toggleClass:function(e,t){return this.$el.toggleClass(e,t),this},render:function(e){return"function"==typeof this.before_render&&this.before_render(e),this.template&&_.isString(this.template)&&(this.template=TTD.utils.tpl(this.template)),this.template&&this.$el.html(this.template()),"function"==typeof this.after_render&&this.after_render(e),this},error:function(e,t,i){let s="";if(t.responseJSON)s=t.responseJSON.message;else if(t.responseText)try{s="parsererror"===i?"Could not parse response: "+t.responseText:JSON.parse(t.responseText).message}catch(e){}s||(s=(t.statusText||i)+(t.status?" ("+t.status+")":"")),TTD.utils.message(s,"error")},obj:e=>TTD&&TTD.objects&&TTD.objects[e]})},8388:function(e,t,i){(t=>{const s={templates:i(9190),typography:i(7540),branding:i(3333),settings:i(1871),wizard:i(6551),performance:i(7481)},a={templates:i(3497),typography:i(8343),branding:i(3487),wizard:i(8940),performance:i(5603),start:i(434),skins:i(4501)},n=i(7610),o=i(7678),r=i(8766);e.exports=i(2586).extend({template:"dashboard/main",$icons:null,$main:null,$sidebar:null,$themeInfo:null,after_render:function(){if(this.$el&&this.$el.length>0){const e=this.$el.html().replace(/tve-script/g,"script");this.$el.html(e),TTD.Elements.$modals=t("#ttd-modals"),this.$icons=new(i(5399))({el:this.$(".ttd-icon-menu")[0]}),TTD.utils.add_action("message:ttb.thumbnail.generated",this.onThumbnailGenerated.bind(this)),this.initializeSkinData()}},page:function(e,i){const n=this.hasSidebar(e);(n&&!s[e]||!a[e])&&(e="templates"),this.$main&&this.$sidebar&&(this.$main.undelegateEvents(),this.$sidebar.undelegateEvents()),TTD.objects.collections.skins.isEmpty()?r.setElement(t('<div class="ttd-no-skin-page"></div>').appendTo(this.$el)).render():(this.$main=new a[e]({el:this.$(".ttd-main-container")[0],tab:i}),n&&(this.$sidebar=new s[e]({el:this.$(".ttd-sidebar-container")[0],tab:i})),this.$icons.set_active(e),this.$(".scrollbar-inner").scrollbar());const o=["ttd-main","ttd-fixed-sidebar",`ttd-page-${e}`];n||o.push("ttd-no-sidebar"),this.$el.removeClass().addClass(o.join(" ")),TTD.utils.isFreshInstall()&&this.onFreshInstall()},hasSidebar:e=>!["start","skins"].includes(e),onThumbnailGenerated:function(e){this.$main.onThumbnailGenerated&&this.$main.onThumbnailGenerated(e)},initializeSkinData:function(){void 0===TTD.objects.collections.skins&&(TTD.objects.collections.skins=new n(TTD.CONST.skins)),TTD.objects.modals.new_skin=new o},onFreshInstall:function(){TTD.utils.getCloudSkinsCollection().then((e=>{e.filter((e=>!e.isDefaultTPMSkin())).length>0?(TTD.utils.toggleModalFreeze(!0),TTD.objects.modals.new_skin.open({collection:TTD.objects.collections.skins,step:"cloud-items",extraClass:"ttd-modal-hide-closing-options",isFreshInstall:!0})):TTD.utils.saveOptions("thrive_theme_is_fresh_install",0)}))}})})(jQuery)},2747:function(e,t,i){const s=i(2586);e.exports=s.extend({template:"dashboard/dropdown",initialize:function(e){this.items=e.items||[],"function"==typeof e.onSelect&&(this.onSelect=e.onSelect),s.prototype.initialize.call(this,e),this.$selectedValue=this.$(".ttd-selected-value"),this.$items=this.$(".ttd-dropdown-items"),this.setDefaultValue()},getItems(){return this.items},setItems(e){return this.items=e,this},onSelect(e,t){this.$el.removeClass("open"),this.setValue(t.dataset.id),this.trigger("select",t.dataset.id)},toggle(){this.$el.toggleClass("open")},open(){this.$el.addClass("open")},close(){this.$el.removeClass("open")},setValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.selectedValue=e,this.$items.find(".selected").removeClass("selected"),this.$items.find(`[data-id="${e}"]`).addClass("selected"),this.$selectedValue.html(this.getSelectedText())},getValue(){return this.selectedValue},getSelectedText(){const e=this.getItems().find((e=>e.id===this.getValue()));return e?e.text:""},setDefaultValue(){let e=this.items.find((e=>e.default));e||(e=this.items[0]),this.setValue(e.id)}})},5399:function(e,t,i){let s,a;TTD.CONST.wizard.is_completed?(a=TTD.utils.addUrlParam(TTD.CONST.admin_url+"admin.php",{page:"thrive-theme-dashboard"}),s=TTD.utils.addUrlParam(a,"tab","w")):(s=TTD.utils.addUrlParam(TTD.CONST.admin_url+"admin.php",{page:"thrive-theme-dashboard"}),a=TTD.utils.addUrlParam(s,"tab","other")),TTD.CONST.wizardBaseUrl=s,TTD.CONST.baseUrl=a;const n=[{icon:"start",label:"Home",disabled:!1,baseUrl:a},{icon:"skins",label:"Themes",disabled:!1,baseUrl:a},{icon:"wizard",label:"Site Wizard",disabled:!1,baseUrl:s},{icon:"branding",label:"Branding",disabled:!1,baseUrl:a},{icon:"typography",label:"Typography",disabled:!1,baseUrl:a},{icon:"templates",label:"Templates",disabled:!1,baseUrl:a},{icon:"performance",label:"Site Speed",disabled:!1,baseUrl:a}];e.exports=i(2586).extend({template:"dashboard/icon-menu",render:function(){n.forEach((e=>this.$el.append(TTD.utils.tpl(this.template)(e))))},set_active:function(e){this.$(".active").removeClass("active"),this.$(`[data-icon="${e}"]`).addClass("active")}})},3487:function(e,t,i){e.exports=i(2586).extend({template:"dashboard/main/branding",after_initialize(){TTD.CONST.woocommerce.is_active&&this.hideWooStoreNotice()},hideWooStoreNotice(){this.$("iframe").on("load",(e=>{const t=e.target.contentWindow.document.getElementsByClassName("woocommerce-store-notice")[0];void 0!==t&&(t.style.display="none")}))}})},9564:function(e,t,i){(t=>{const s=i(74).extend({urlRoot:TTD.CONST.routes.amp,postTypeEnabled:function(e){const t=this.get("post_types");return t&&t[e]},setPostType:function(e,t){let i=this.get("post_types");return i||(i={}),i[e]=t,this.set("post_types",i),this}});e.exports=i(2586).extend({template:"dashboard/main/performance/amp/main",before_initialize(){this.settings=new s(TTD.CONST.amp.settings),this.post_types=TTD.CONST.amp.post_types},after_render:function(){this.$settingsContainer=this.$(".ttd-amp-settings").toggle(this.settings.get("enabled")),this.$introContainer=this.$(".ttd-amp-intro").toggle(this.settings.get("enabled")),this.toggleAnalytics(this.settings.get("analytics_enabled"))},getLabelText:function(){return this.settings.get("enabled")?"Disable":"Enable"},enable:function(e,t){this.saveSetting("enabled",t.checked),this.$settingsContainer.toggle(t.checked),this.$introContainer.toggle(t.checked)},enablePostType:function(e,t){this.settings.setPostType(t.dataset.type,t.checked).save(null,{success:()=>{TTD.utils.message("Post type setting saved successfully!","success",1e3)},error:e=>{e.responseJSON&&TTD.utils.message(e.responseJSON.message,"error")}})},toggleInternalLinking:function(e,t){this.saveSetting("internal_linking",t.checked)},analytics:function(e,i){const s=this.$("textarea.amp-analytics").val(),a=t(i),n=this.$(".configured-state");this.isCodeValid(s)?this.settings.set("analytics",s).save(null,{success:()=>{a.hide(),n.show(),setTimeout((()=>{a.show(),n.hide()}),1e3),TTD.CONST.amp.settings.analytics=s},error:e=>{e.responseJSON&&TTD.utils.message(e.responseJSON.message,"error")}}):TTD.utils.message("Your Google Analytics code is not valid","error")},isCodeValid:function(e){let t=["amp-analytics","gtag"].some((t=>e.includes(t)));return t=t&&!["script","amp-analytics"].some((t=>e.split("<"+t).length!==e.split("</"+t+">").length)),t=t&&!e.includes("GA_MEASUREMENT_ID"),""===e||!!t},toggleAnalyticsListener:function(e,t){const i=t.checked;this.saveSetting("analytics_enabled",i),this.toggleAnalytics(i)},saveSetting:function(e,t){this.settings.set(e,t).save(null,{success:()=>{TTD.utils.message("Setting saved successfully!","success",1e3),TTD.CONST.amp.settings[e]=t,this.render()},error:e=>{e.responseJSON&&TTD.utils.message(e.responseJSON.message,"error")}})},toggleAnalytics:function(e){this.$settingsContainer.find(".ttd-amp-analytics").toggle(e)}})})(jQuery)},1325:function(e,t,i){(t=>{const s=i(2190),a=i(6375);e.exports=i(2586).extend({template:"dashboard/main/performance/cache/main",before_initialize:function(){void 0===TTD.objects.collections.plugins&&(TTD.objects.collections.plugins=new s(TTD.CONST.cache_plugins)),this.collection=TTD.objects.collections.plugins,this.collection.on("update_plugin_settings",this.render.bind(this))},after_render:function(){this.renderPlugins(),this.$(".ttd-performance-notice.warning").toggle(this.collection.activePlugins().length>1)},renderPlugins:function(){let e=this.$(".ttd-plugins-container").empty();this.collection.sort().each((t=>{let i=new a({model:t});e.append(i.$el)}))},closeNotice:function(e,i){t(i).parent(".ttd-performance-notice").hide()}})})(jQuery)},6375:function(e,t,i){(t=>{const s=i(2586),a=s.extend({template:"dashboard/main/performance/cache/button",className:"ttd-d-flex button-box",before_initialize:function(e){this.plugin=e.plugin,this.model=new Backbone.Model(this.getBtnOptions()),this.model.on("change",this.render.bind(this))},after_render:function(){this.plugin.get("configured")&&this.$("a.configured-state").removeClass("ttd-btn blue click fill"),this.plugin.get("premium")&&!this.plugin.get("installed")&&this.$(".main-btn").removeClass("click").attr("href",this.plugin.get("redirect"))},getBtnOptions:function(){let e="",t="",i="";return this.plugin.get("active")?(e="showConfirmSettings",t="Configure for Optimal Caching with Thrive"):this.plugin.get("installed")?(e="activate",t="Activate",i="btn-w-150"):(e="install",t=this.plugin.get("premium")?"Learn More":"Install Now",i="btn-w-150"),this.plugin.get("configured")&&(e="",t="Configured",i="configured-state"),{fn:e,text:t,class:i}}});e.exports=s.extend({className:"ttd-performance-card compact plugin-item mb-20",template:"dashboard/main/performance/cache/plugin",after_initialize:function(){this.model.on("change",this.render.bind(this))},after_render:function(){this.$confirmSettings=this.$(".confirm-settings"),this.$confirmActivate=this.$(".confirm-activate"),this.btnView=new a({plugin:this.model}),this.$(".ttd-plugin-btn-container").append(this.btnView.$el)},install:function(e){return this.btnView.model.set({text:"Installing...",class:"installing btn-w-150"}),this.model.pluginAction("install",["slug"],["installed"]).then((()=>{this.render()})),!1},activate:function(){const e=this.model.collection.getLatestActivePlugin();return e?(this.toggleConfirm("activate",!0),this.$confirmActivate.find(".ttd-active-plugin-name").html(e.get("name"))):this.activatePlugin(),!1},activatePlugin:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.model.pluginAction("activate",["file"],["active"],e).then((()=>{this.$el.removeClass("notice-state").siblings().hide(),this.showSuccessMessage(),e._and_deactivate&&this.model.collection.findWhere({file:e._and_deactivate}).set({active:!1,configured:!1})})),!1},showSuccessMessage:function(){const e=TTD.Views.Dashboard.$main.currentTabView.$(".success");e.show().find(".ttd-cache-plugin-name").html(this.model.get("name")),setTimeout((()=>{e.fadeOut()}),7e3)},confirmActivate:function(){const e=this.model.collection.getLatestActivePlugin();return e&&this.activatePlugin({_and_deactivate:e.get("file")}),!1},cancelActivate:function(){return this.toggleConfirm("activate",!1),!1},showConfirmSettings:function(){return TTD.Views.Dashboard.$main.currentTabView.$(".success").hide(),this.toggleConfirm("settings",!0),!1},cancelUpdateSettings:function(){return this.toggleConfirm("settings",!1),!1},toggleConfirm:function(e,t){("activate"===e?this.$confirmActivate:this.$confirmSettings).toggle(t),this.$el.toggleClass("notice-state",t)},updateSettings:function(){return this.model.pluginAction("settings",["tag"],["configured"]).then((()=>{this.$(".confirmation").hide(),this.$(".success").show(),this.$confirmSettings.show(),setTimeout((()=>{this.$el.removeClass("notice-state").siblings().show(),this.model.collection.trigger("update_plugin_settings")}),1e3)})),!1}})})(jQuery)},2699:function(e,t,i){function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function a(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){n(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var o;o=jQuery,e.exports=i(2586).extend({template:"dashboard/main/performance/image",before_render(){this.hasPlugins()||(this.state="optimole")},optionClick:function(e){o(e.currentTarget).addClass("selected").siblings().removeClass("selected"),this.$(".action-option").hide().filter(`#opt--${e.currentTarget.dataset.opt}`).show(),this.state=e.currentTarget.dataset.opt},hasPlugins(){return Object.values(this.plugins).filter((e=>e.active)).length},get plugins(){return TTD.CONST.image_optimization_plugins},renderPluginCard(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&(e=this.plugins[e]),e?TTD.utils.tpl("dashboard/main/performance/image/plugin")({plugin:a(a({},e),t)}):""},pluginAction(e){const t=e.currentTarget.dataset.plugin,i="activate"===e.currentTarget.dataset.action?"Activating":"Installing and activating";e.currentTarget.classList.add("installing"),e.currentTarget.textContent=`${i} plugin...`;let s=this.plugins[t].settings_redirect;return TTD.utils.sendApiRequest("plugins/install",{slug:this.plugins[t].slug.split("/").shift(),file:this.plugins[t].slug,_and_activate:1}).done((e=>{this.plugins[t].installed=this.plugins[t].active=1,s&&(location.href=this.plugins[t].settings_redirect)})).fail((e=>{e.responseJSON&&TTD.utils.message(e.responseJSON.message,"error")})).always((()=>{s||this.render()})),!1},cancelUpdateSettings(e){const t=e.currentTarget.closest(".plugin-item");return t.classList.remove("state-warn"),t.classList.add("state-normal"),!1},showConfigState(e){const t=e.currentTarget.closest(".plugin-item");return t.classList.remove("state-normal"),t.classList.add("state-warn"),!1},updateSettings(e){const t=e.currentTarget.dataset.plugin;return e.currentTarget.classList.add("installing"),e.currentTarget.textContent="Configuring...",TTD.utils.sendApiRequest("plugins/settings",{tag:e.currentTarget.dataset.tag}).done((e=>{this.plugins[t].status.configured=!0,this.$(".confirmation").hide(),this.$(".success").show()})).fail((e=>{e.responseJSON&&TTD.utils.message(e.responseJSON.message,"error")})).always((()=>{setTimeout(this.render.bind(this),2e3)})),!1}})},5603:function(e,t,i){(t=>{const s={cache:i(1325),image:i(2699),amp:i(9564)};e.exports=i(2586).extend({template:"dashboard/main/performance/main",before_initialize(e){e.tab&&void 0!==s[e.tab]&&(e.preventRender=!0,this.currentTabView=new s[e.tab]({el:this.el}))}})})(jQuery)},2163:function(e,t,i){const s=i(6263),a=i(451),n=i(2432);let o=!1;e.exports=i(2586).extend({className:"ttd-skin-card",template:"dashboard/main/skins/item",before_initialize:function(e){this.optionsTooltip=e.optionsTooltip},after_render:function(){this.model.isActive()&&this.$el.addClass("active"),this.model.isNewlyAdded()&&this.$el.addClass("new"),this.$name=this.$(".ttd-skin-name")},makeActive:function(){this.model.makeActive()},exportSkin:function(){TTD.objects.modals.skin_export_modal=new a({type:"small",ID:this.model.get("term_id")}),TTD.objects.modals.skin_export_modal.open()},duplicateSkin:function(){const e=new s({name:this.model.getUniqueName(this.model.get("name"))});TTD.utils.loading(),e.save({source_skin_id:this.model.get("term_id")},{wait:!0,success:e=>{e.set("is_new_duplicate",1),this.model.collection.add(e),TTD.utils.message("Theme <b>duplicated</b> successfully!","success"),TTD.Elements.$body.removeClass("ttd-loading")},error:(e,t,i)=>{this.error(e,t,i)}})},deleteSkin:function(){TTD.objects.modals.delete_skin.open({model:this.model})},openPreview:function(){const e=this.model.get("preview_url");TTD.Elements.$body.addClass("ttd-loading ttd-in-preview"),TTD.Views.Preview&&TTD.Views.Preview.undelegateEvents(),TTD.Views.Preview=new n({el:TTD.$(".ttd-preview-container")[0],model:this.model.set("preview_open",1),url:e})},editName:function(){0===this.$name.find("input").length&&this.$name.html('<input class="keydown blur" type="text" data-fn="saveName" value="'+this.model.get("name")+'">').find("input").focus(),this.$el.addClass("name-edit-mode")},saveName:function(e){const t=()=>this.$el.removeClass("name-edit-mode");if("keydown"===e.type&&(o=27===e.keyCode,13!==e.keyCode))return void(27===e.keyCode&&this.render());if(o)return o=!1,void t();const i=this.$name.find("input").val().trim();return i===this.model.get("name")?(this.render(),void t()):i&&0!==i.length?this.model.collection.where({name:i}).length?(TTD.utils.message("A theme with the name provided already exists","error"),void t()):void this.model.save({name:i},{wait:!0,success:()=>{this.render(),t(),TTD.utils.message("Name <b>changed</b> successfully!")},error:(e,t,i)=>this.error(e,t,i)}):void t()},showOptionsTooltip:function(){this.$el.append(this.optionsTooltip.$el.css({bottom:45,right:15})),this.$el.toggleClass("tooltip-open")}})},389:function(e,t,i){const s=i(2586),a=i(2163),n=i(9829),o=s.extend({tagName:"div",className:"ttd-template-options-tooltip",template:"dashboard/main/skins/options-tooltip"});e.exports=s.extend({template:"dashboard/main/skins/main",before_initialize:function(){this.initCollection(),this.initOptionsTooltip(),TTD.objects.modals.delete_skin=new n({type:"small"})},initCollection:function(){this.collection=TTD.objects.collections.skins,this.listenTo(this.collection,"add",this.renderList.bind(this)),this.listenTo(this.collection,"destroy",this.renderList.bind(this))},renderList:function(){this.$el.empty(),this.collection.sort().each((e=>{const t=new a({model:e,optionsTooltip:this.optionsTooltip});this.$el.append(t.$el)}))},initOptionsTooltip:function(){this.optionsTooltip=new o,TTD.utils.add_action("theme.document.click",(e=>{const t=TTD.$(e.target);t.is(".ttd-template-options-tooltip")||0!==t.closest(".ttd-dropdown-dots").length||this.hideOptionsTooltip()}))},hideOptionsTooltip:function(){this.$(".tooltip-open").removeClass("tooltip-open")}})},4501:function(e,t,i){const s=i(389);e.exports=i(2586).extend({template:"dashboard/main/skins/main",after_render:function(){new s({el:".ttd-skins-list",preventRender:!0}).renderList()},openCreateModal:function(){TTD.objects.modals.new_skin.open({collection:TTD.objects.collections.skins})}})},434:function(e,t,i){const s=i(9532);jQuery,e.exports=i(2586).extend({template:"dashboard/main/start/main",after_initialize:function(){TTD.objects.modals.helpCorner=new s},openHelpCornerModal(){TTD.objects.modals.helpCorner.open({type:this.$(".ttd-modal-sol .active").attr("data-primary"),currentModal:this})}})},4609:function(e,t,i){jQuery,e.exports=i(2586).extend({template:"dashboard/main/templates/filters",before_initialize:function(){this.listenTo(this.model,"theme_dash:filter",this.render)},before_render:function(){this.contentTypes=this.getContentTypes(),this.counter=0},after_render:function(){this.$filterTitle=this.$(".templates-title"),this.$counter=this.$(".templates-counter")},toggleDropdown:function(){this.$(".ttd-dropdown-w-count").toggleClass("ttd-dwc-selected")},mainFilter:function(e){const t=e.currentTarget.dataset.template;this.toggleDropdown(),TTD.objects.models.filter.setOptions({title:t,template:t,post_type:""})},postType:function(e){const t=e.currentTarget.getAttribute("data-post-type"),i="all"===t?"Custom Post":t;this.toggleDropdown(),TTD.objects.models.filter.setOptions({title:i,post_type:t,template:"post_type"})},getContentTypes:function(){return _.each(TTD.CONST.content_types,(e=>{const t=TTD.objects.collections.templates.postTypeHasTemplate(e.key);e.hideInDropdown=!t&&e.key!==TTD.CONST.woocommerce.key||e.exclude_from_dropdown})),TTD.CONST.content_types},filterByModel:function(e){let t;if(e.isHomepage())t={title:"Homepage",post_type:"",template:"homepage"};else if(e.isSingular())t={title:e.secondary(),post_type:e.secondary(),template:"post_type"};else{let i="archive"===e.primary()?"archive":"core";t={title:i,template:i,post_type:""}}TTD.objects.models.filter.setOptions(t)}})},4975:function(e,t,i){const s=i(7018);e.exports=s.extend({className:"theme-template",template:"dashboard/main/templates/homepage-item",before_initialize:function(){this.model.isLandingPage()&&this.model.set("edit_url",TTD.CONST.options.edit_url),TTD.objects.collections.templates.on("remove",(e=>{e.get("ID")===this.model.get("ID")&&this.remove()}))},after_render:function(){s.prototype.after_render.call(this),this.model.inheritsTemplate()&&!this.model.isLandingPage()&&this.$el.addClass("inherit-page-template"),this.model.isLandingPage()&&this.$el.addClass("is-landing-page"),TTD.utils.homepageType()===this.model.secondary()&&this.$el.addClass("blue-homepage-label")},newHomepage:function(){TTD.objects.modals.newHomepageTemplate.open()}})},7018:function(e,t,i){var s;s=jQuery,e.exports=i(2586).extend({className:"theme-template",template:"dashboard/main/templates/item",after_initialize:function(e){this.listenTo(this.model,"destroy",this.remove),this.listenTo(this.model,"change",this.render),this.model.set("post_title",this.model.name()),this.el.addEventListener("mouseleave",(()=>{this.el.classList.remove("tooltip-open")})),this.optionsTooltip=e.optionsTooltip},after_render:function(){this.$name=this.$(".template-name"),this.$el.css("order",this.model.getOrder()).attr("data-primary",this.model.primary()).attr("data-secondary",this.model.secondary()).attr("data-is-default",this.model.isDefault()),"post"===this.model.secondary()&&this.$el.attr("data-format",this.model.format()),this.saving=!1,this.loading(!1)},delete:function(){TTD.objects.modals.delete_template.open({model:this.model})},reset:function(){TTD.objects.modals.reset_template.open({model:this.model})},loading:function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$el.toggleClass("ttd-loading",e)},makeDefault:function(){if(1===parseInt(this.model.meta("default")))return!1;this.loading(),this.model.meta("default",1),this.model.save({action:"make_default"},{wait:!0,success:()=>{TTD.objects.collections.templates.forEach((e=>{this.model.get("ID")!==e.get("ID")&&this.model.primary()===e.primary()&&this.model.secondary()===e.secondary()&&this.model.variable()===e.variable()&&this.model.format()===e.format()&&(e.meta("default",0),e.trigger("change",e))})),this.render(),TTD.utils.message("The template is now <b>default</b> !")},error:()=>{this.loading(!1),TTD.utils.message("Error making template default!","error")}})},editTitle:function(){this.$name.html(s("<input>",{class:"blur keyup",value:this.model.name(),"data-fn-focusout":"saveTitle","data-fn-keyup":"titleKeyUp"})).find("input").focus()},saveTitle:function(){if(!this.saving){this.saving=!0;const e=this.$name.find("input").val();if(e===this.model.get("post_title"))return this.render();this.loading(),this.model.save({post_title:e,action:"update_fields",fields:{post_title:e}},{wait:!0,success:()=>this.render()&&TTD.utils.message("Title <b>changed</b> successfully!"),error:()=>TTD.utils.message("Error saving the title!","error")})}},titleKeyUp:function(e){switch(e.which){case 13:this.saveTitle();break;case 27:this.saving=!0,this.render()}},duplicate:function(){const e=TTD.utils.templateModelFactory({meta_input:{primary_template:this.model.primary(),secondary_template:this.model.secondary(),format:this.model.format(),default:0},thumbnail:this.model.get("thumbnail"),post_title:`Copy of ${this.model.name()}`});this.loading(),e.save({inherit_from:this.model.get("ID")},{wait:!0,success:e=>{TTD.objects.collections.templates.add(e),TTD.utils.message("Template <b>duplicated</b> successfully!","success"),this.loading(!1)},error:function(){TTD.utils.message("Error creating template!","error")}})},showOptionsTooltip:function(){this.optionsTooltip.$('.ttd-tooltip-row[data-fn="duplicate"]').toggle(this.model.canDuplicate()),this.optionsTooltip.$('.ttd-tooltip-row[data-fn="delete"]').toggleClass("default",this.model.isCore()&&this.model.isDefault()),this.optionsTooltip.$('.ttd-tooltip-row[data-fn="makeDefault"]').toggleClass("default",this.model.isDefault()),this.optionsTooltip.$(".ttd-template-preview-url").attr("href",this.model.get("preview_url")),this.$el.append(this.optionsTooltip.$el.css({bottom:70})),this.$el.toggleClass("tooltip-open")}})},3874:function(e,t,i){const s=i(7018),a=i(4975),n=i(2586).extend({tagName:"div",className:"tcb-template-options-tooltip",template:"dashboard/main/templates/options-tooltip"});var o;o=jQuery,e.exports=i(2586).extend({before_initialize:function(e){this.optionsTooltip=new n,this.type=e.type,TTD.utils.add_action("theme.document.click",(e=>{const t=o(e.target);t.is(".tcb-template-options-tooltip")||0!==t.closest(".ttd-dropdown-dots").length||this.hideOptionsTooltip()}))},renderCollection:function(){const e=TTD.objects.collections.templates.filterItems(this.type);this.counter=e.length,this.$el.empty(),this.$el.closest(".ttd-templates-area").toggle(!!e.length),_.each(e,(e=>{this.renderTemplate(e)}))},renderTemplate:function(e){const t=new(e.isHomepage()?a:s)({model:e,optionsTooltip:this.optionsTooltip});if(this.$el.append(t.$el),e.isJustAdded()){if(!TTD.utils.is_in_viewport(t.el)){const e=60,i=t.el.getBoundingClientRect().top-e;window.scrollTo({top:i,behavior:"smooth"})}t.$el.addClass("ttd-just-added"),setTimeout((()=>t.$el.removeClass("ttd-just-added")),5e3),e.set("just_added",0)}},hideOptionsTooltip:function(){this.$(".tooltip-open").removeClass("tooltip-open")}})},3497:function(e,t,i){const s=i(899),a=i(6661),n=i(8629),o=i(9302),r=i(9049),l=i(2382),c=i(7140),d=i(4609),h=i(3874);var p;p=jQuery,e.exports=i(2586).extend({template:"dashboard/main/templates/main",before_initialize:function(){TTD.objects.models.filter=new c,this.listenTo(TTD.objects.models.filter,"theme_dash:filter",this.renderTemplates),TTD.objects.collections.templates.off("add",this.afterModelAdd).on("add",this.afterModelAdd)},afterModelAdd:function(e){TTD.objects.collections.templates.modelInItemsFiltered(e)?TTD.Views.Dashboard.$main[`$${e.getType()}TemplatesView`].renderTemplate(e):TTD.Views.Dashboard.$main.$filters.filterByModel(e)},after_initialize:function(){TTD.objects.modals.cloudTemplates=new l,TTD.objects.modals.newHomepageTemplate=new o,TTD.objects.modals.newPostTemplate=new n,TTD.objects.modals.newTemplate=new r,TTD.objects.modals.delete_template=new s({type:"small"}),TTD.objects.modals.reset_template=new a({type:"small"})},after_render:function(){this.$singleTemplatesView=new h({el:".ttd-templates-inner.single",type:"single",preventRender:!0}),this.$listTemplatesView=new h({el:".ttd-templates-inner.list",type:"list",preventRender:!0}),this.renderTemplates(),this.$filters=new d({model:TTD.objects.models.filter}),this.$(".ttd-settings-container").prepend(this.$filters.$el)},renderTemplates:function(){this.checkHomepageTemplate(),this.$singleTemplatesView.renderCollection(),this.$listTemplatesView.renderCollection(),TTD.objects.models.filter.setOptions({counter:this.$singleTemplatesView.counter+this.$listTemplatesView.counter},!0)},add:function(e,t){TTD.objects.modals.newPostTemplate.open({collection:TTD.objects.collections.templates,meta_input:{primary_template:t.dataset.primary,secondary_template:t.dataset.secondary}})},addPageTemplate:function(){TTD.objects.modals.newTemplate.$templateName.val(""),TTD.objects.modals.newTemplate.open()},onThumbnailGenerated:function(e){const t=TTD.objects.collections.templates.findWhere({ID:parseInt(e.post_id)});t&&(t.set("thumbnail",e.thumb),t.trigger("change"))},checkHomepageTemplate:function(){const e=TTD.objects.collections.templates.filter((e=>e.isHomepage()&&e.secondary()===TTD.utils.homepageType()));if("posts"===TTD.CONST.options.show_on_front&&TTD.objects.collections.templates.filter((e=>e.isHomepage()&&"single"===e.getType())).forEach((e=>{TTD.objects.collections.templates.remove(e.get("ID"))})),e.length>0)TTD.objects.collections.templates.remove(0,{silent:!0});else{let e,t={ID:0,meta_input:{default:1,primary_template:"home",secondary_template:TTD.utils.homepageType()}};"page"!==TTD.utils.homepageType()||TTD.utils.isHomeLandingPage()?"blog"===TTD.utils.homepageType()&&(e=TTD.objects.collections.templates.find((e=>e.isDefault()&&"archive"===e.primary()))):(e=TTD.objects.collections.templates.find((e=>e.isSingular()&&e.isDefault()&&"page"===e.secondary())),e||(e=TTD.objects.collections.templates.find((e=>e.isSingular()&&e.isDefault())))),e&&(t=p.extend(!0,{},e.attributes,t)),TTD.objects.collections.templates.add(TTD.utils.templateModelFactory(t),{silent:!0})}}})},8730:function(e,t,i){jQuery,e.exports=i(2586).extend({tagName:"div",className:"ttd-typography-block",template:"dashboard/main/typography/item",after_initialize:function(){this.listenTo(this.model,"destroy",this.remove),this.listenTo(this.model,"change",this.render)},before_render:function(){this.$el.addClass("loader-absolute ttd-loading small")},after_render:function(){this.model.get("is_new")&&(this.$el.addClass("new-typography"),setTimeout((()=>{this.$el.removeClass("new-typography"),this.model.set({is_new:!1},{silent:!0})}),4e3)),this.$("iframe").on("load",(()=>{requestAnimationFrame((()=>this.$el.removeClass("ttd-loading")))}))},block_click:e=>e.preventDefault(),delete:function(){TTD.objects.modals.delete_typography.open({model:this.model})},toggle:function(){this.$el.toggleClass("ttd-block-expand");const e=this.$el.hasClass("ttd-block-expand");this.$(".height-toggle .text").html(e?"COLLAPSE":"EXPAND")},set_active:function(){TTD.utils.loading(),this.model.collection.each((e=>{e.meta("default",e.get("ID")===this.model.get("ID")?1:0)})),this.model.collection.sort(),this.model.collection.trigger("render"),this.model.save({action:"set_default"},{success:e=>{TTD.utils.message("Active Typography changed!")},error:()=>TTD.utils.message("Error setting the typography set as default!","error"),complete:()=>TTD.utils.loading(!1)})},name_edit:function(){this.$(".edit").hide(),this.$(".state-edit").show().find("input").focus().select()},cancelNameEdit:function(){this.$(".edit").show(),this.$(".state-edit").hide().find("input").val(this.model.get("post_title"))},save_title:function(e){if("keyup"===e.type){if(27===e.which)return this.cancelNameEdit();if(13!==e.which)return}const t=this.$("input.title").val().trim();t!==this.model.get("post_title")?t&&0!==t.length&&(this.model.set("post_title",t),this.model.save({post_title:t,action:"update_fields",fields:{post_title:t}},{success:()=>TTD.utils.message("Title <b>changed</b> successfully!"),error:()=>TTD.utils.message("Error saving the title!","error")})):this.cancelNameEdit()},reset:function(){TTD.objects.modals.reset_typography.open({model:this.model})}})},8343:function(e,t,i){(t=>{const s=i(2898),a=i(6553),n=i(3860),o=i(8730),r=i(2995);e.exports=i(2586).extend({template:"dashboard/main/typography/main",after_initialize:function(){TTD.objects.modals.delete_typography=new s({type:"small"}),TTD.objects.modals.reset_typography=new a({type:"small"}),void 0===TTD.objects.collections.typography&&(TTD.objects.collections.typography=new n(TTD.CONST.typography),this.listenTo(TTD.objects.collections.typography,"frame-height-update",(function(e,t){this.$(`#ttd-typography-block-${e}`).css("height",t+15+"px")})),this.listenTo(TTD.objects.collections.typography,"add",this.addToList.bind(this)),this.listenTo(TTD.objects.collections.typography,"render",this.render_list.bind(this)),TTD.utils.add_action("message:ttb-typography-saved",(e=>{const t=this.collection.findWhere({ID:parseInt(e.post_id)});t&&t.trigger("change")}))),this.collection=TTD.objects.collections.typography,this.collection.sort(),this.render_list()},create:function(){const e=new r({post_title:"New Typography Set"});TTD.utils.loading(),e.save({},{wait:!0,success:t=>{TTD.Elements.$body.removeClass("ttd-loading "),e.set("is_new",!0),this.collection.add(t),TTD.utils.message("Typography set <b>created</b> successfully!","success")},error:function(){TTD.utils.message("Error creating typography set!","error")}})},afterRender:function(){this.$(".ttd-subtitle").toggleClass("ttd-hide",this.collection.length<=1)},render_list:function(){const e=this.$(".ttd-default-typography").empty(),t=this.$(".ttd-other-typography").empty();let i;this.collection.each((s=>{i=new o({model:s}),s.is_active()?e.append(i.$el):t.append(i.$el)})),this.afterRender()},addToList:function(e){this.$(".ttd-other-typography").prepend(new o({model:e}).$el),this.afterRender()}})})(jQuery)},8940:function(e,t,i){jQuery,e.exports=i(2586).extend({template:"dashboard/main/wizard",popupCoords:{top:0,left:"50%"},before_initialize(e){window.TTD.objects.wizardView=this,this.top=i(565),e.model=this.model=i(2625),this.top.setModel(e.model),this.homepage=i(8721),this.top.parent=this.homepage.parent=this,this.hooks(),this.model.on("step-change",this.onStepChange.bind(this)),this.model.on("finished",(()=>{this.loadPreview()})),TTD.Elements.$body.removeClass("ttd-init"),this.model.on("templates-loaded",(e=>{const t=this.model.get("active");if("homepage"!==t&&e.length){const i=TTD.utils.apply_filters("thrive_theme.wizard_preview_template_id",this.model.getPreviewTemplateId()),s=TTD.utils.apply_filters("thrive_theme.wizard_preview_template_source",this.model.getPreviewTemplateSource());this.previewTemplate({id:i||e[0].id,source:s||e[0].source,previewedStep:t},!1)}})),TTD.utils.add_action("theme.document.keyup",this.onKeyup.bind(this))},after_initialize(){this.loadPreview()},after_render(){this.$dom={wrapper:this.$(".ttd-wizard-content"),frame:this.$("#wizard-frame"),container:this.$(".ttd-wizard-frame-container"),welcome:this.$(".ttd-wizard-welcome"),overlay:this.$(".ttd-wizard-frame-overlay"),nav:this.$(".ttd-template-nav")},this.top.setElement(this.$("#ttd-wizard-top")),this.top.render()},hooks:function(){_.each(i(7892),((e,t)=>TTD.utils.add_action(t,e))),_.each(i(9657),((e,t)=>TTD.utils.add_filter(t,e)))},start(){return this.model.start(),!1},onStepChange(e,t){this.$dom.wrapper.removeClass(((e,t)=>t.split(" ").filter((e=>0===e.indexOf("step-"))).join(" "))).addClass(`step-${e.id}`),t&&t.id!==e.id&&this.$dom.overlay.empty(),this.loadPreview()},loadPreview(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.model.getFrameURL(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this.$dom.frame.attr("src");i&&(i=i.replace(/(\\?|&)_=(\d+)$/,"",e)),e&&i!==e?(e=TTD.utils.addUrlParam(e,"_",String((new Date).getTime())),this.$dom.nav.hide(),this.loading(),this.$dom.frame.attr("src",e).one("load",(()=>{setTimeout((()=>{this.loading(!1),"function"==typeof t&&t()}),300)}))):this.buildOverlay()},buildOverlay(){if(!this.iframeData)return;this.top.render(),this.$dom.overlay.empty();const e=this.getStepOverlay();e instanceof Backbone.View?(e.setElement(this.$dom.overlay),e.parent=this,e.render()):this.$dom.overlay.html(e).toggle(!!e),!this.model.isStepCompleted()&&this.model.getPreviewTemplateId()?this.$dom.nav.show().filter(".btn-prev").toggleClass("disabled",!this.model.hasAdjacentTemplate("prev")).end().filter(".btn-next").toggleClass("disabled",!this.model.hasAdjacentTemplate("next")):this.$dom.nav.hide(),this.showTooltip(),this.contentClass()},loading(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$dom.wrapper.toggleClass("ttd-loading loader-absolute",e)},getStepOverlay(){let e;if(this.$dom.overlay.removeAttr("style"),this.model.isStarted())if(this.model.isFinished())e="dashboard/main/wizard/overlay-finished";else{let t=this.model.getCurrentStep();t||(t=this.model.getNextAvailableStep(),this.model.set({active:t.id,activeIndex:this.model.getNextAvailableStepIndex()},{silent:!0}));const s=t.id;e="";let a=`calc(50% + ${this.iframeData.headerHeight/2}px)`;const n=`${this.iframeData.scrollWidth||0}px`;switch(this.popupCoords.top=`${this.iframeData.headerHeight+50}px`,s){case"logo":e=i(4330);break;case"color":e=i(5027);break;case"header":case"woo_header":this.$dom.overlay.css("margin-top",this.iframeData.headerHeight),a=this.iframeData.headerHeight/2+"px",s.includes("woo")&&(e=i(8033).setType(s));break;case"footer":case"woo_footer":this.$dom.overlay.css("bottom",this.iframeData.footerHeight+"px"),a=`calc(100% - ${this.iframeData.footerHeight/2}px)`,this.popupCoords.top=`calc(100% - ${this.iframeData.footerHeight+250}px)`,s.includes("woo")&&(e=i(8033).setType(s));break;case"homepage":this.$(".ttd-wizard-home-opt").select2({dropdownParent:this.$(".ttd-wizard-top")}),this.model.isStepCompleted()||(e=i(8721));break;case"menu":e=i(5694)}this.$dom.nav.css({top:a}).filter(".btn-next").css({right:n})}else e="dashboard/main/wizard/overlay-welcome";return!e||e instanceof Backbone.View||(e=TTD.utils.tpl(e)({view:this,data:this.iframeData,wizard:this.model})),e},clickSaveTemplate(){TTD.utils.apply_filters("thrive_theme.wizard.should_save_template",!0,this.model)&&this.saveTemplate()},saveTemplate(){this.hideTooltip(),this.model.completeStep()},closeConfirmation(){this.homepage.$homepageConfirmTooltip.removeClass("ttd-tooltip-visible"),this.homepage.restoreSavedState()},onNavigationArrowClick(e,t){const i=t.dataset.direction;this.displayAdjacentTemplate(i)},displayAdjacentTemplate(e){return this.homepage.isActive()&&"page"===this.model.homepageState.get("type")&&this.iframeData[`${e}Page`]?this.homepage.previewPage(this.iframeData[`${e}Page`]):(this.model.hasAdjacentTemplate(e)&&this.previewTemplate({id:this.model.getAdjacentTemplateId(e),source:this.model.getAdjacentTemplateSource(e)}),!1)},onKeyup(e){switch(e.which){case 37:this.displayAdjacentTemplate("prev");break;case 39:this.displayAdjacentTemplate("next")}},hideTooltip(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.$("#ttd-step-tooltip");e?(t.addClass("ttd-out"),setTimeout((()=>t.removeClass("ttd-visible ttd-out")),1e3)):t.removeClass("ttd-visible")},showTooltip(){this.hideTooltip();const e=this.model.getPopupMessage();if((!this.lastHoveredElement||!this.lastHoveredElement.closest("#template-selector"))&&e&&!TTD.CONST.dismissed_tooltips.includes("wizard-select")){const t=this.top.$(".selector-btn");this.$("#ttd-step-tooltip").addClass("ttd-visible").css({right:`${(t.outerWidth()||0)+15}px`}).find(".tt-message").html(e)}},tooltipNeverShow(){return this.hideTooltip(!0),TTD.CONST.dismissed_tooltips=Array.from(new Set(TTD.CONST.dismissed_tooltips.concat("wizard-select"))),TTD.utils.sendApiRequest("options/user-option",{meta_key:"ttb_dismissed_tooltips",meta_value:TTD.CONST.dismissed_tooltips.filter((e=>e))}),!1},dismissTooltipOnMouseenter(){this.hideTooltip(!0)},previewTemplate(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=()=>{let t=!0;return e.previewedStep&&(t=e.previewedStep===this.model.get("active")),t};if(this.templateLoading||!i())return;if(void 0===this.iframeAPI)return setTimeout(this.previewTemplate.bind(this,e,t),200);const s=this.model.getStepKey("previewMode");this.templateLoading=!0,this.$(".template-loading").addClass("ttd-loading"),"iframe"!==s&&this.iframeAPI.getPreviewElement().addClass("ttb-loading"),this.model.selectTemplate(e).then((a=>{if(delete this.templateLoading,t&&this.hideTooltip(),i()&&"iframe"!==s){if(void 0===this.iframeAPI)return setTimeout(this.previewTemplate.bind(this,e,t),200);this.iframeAPI.inlinePreview(a)}}))},homepageChangeOption(e){this.homepage.selectType(e.currentTarget.value)},contentClass(){let e=this.model.get("active"),t="";this.model.isFinished()&&(e="finished"),"homepage"===e&&(t=" home--"+this.model.homepageState.get("step")),this.$dom.wrapper.removeClass(((e,t)=>t.split(" ").filter((e=>e.startsWith("step-")||e.startsWith("home--"))).join(" "))).addClass(`step-${e||"welcome"}${t}`)},skipSetup(){TTD.utils.saveSkinMeta("is_wizard_skipped",1,(()=>{location.href=`${TTD.CONST.baseUrl}#start`}))},toggleSkipTooltip:e=>TTD.$(e.target).closest(".ttd-wizard-close").find(".ttd-tooltip").toggle("mouseenter"===e.type),recordMouseOver(e){this.lastHoveredElement=e.target}})},5027:function(e,t,i){!function(t){const s=2===TTD.CONST.skin_palettes.version?i(4099):i(7292),a=i(2586).extend({template:"dashboard/main/wizard/overlay-color",wizard:i(2625),after_initialize:function(){TTD.utils.add_action("skin_color_updated",this.onColorUpdated.bind(this))},after_render(){this.skin_palettes=new s({el:this.$("#wizard-step-color-palette"),spectrumOptions:{saveOnApply:!1,appendTo:"#wizard-spectrum-container"}})},onColorUpdated(e){this.savedColorData=e},clickNext(){return this.parent.loading(),this.wizard.setStepData({save_data:this.savedColorData||""},!0).completeStep(!1),!1}});e.exports=new a}(jQuery)},8721:function(e,t,i){!function(t){const s=i(2625),a=i(2586).extend({initialize(){this.state=s.homepageState,this.state.reset(!0),this.state.on("change",(()=>{this.render()})),TTD.utils.add_action("wizard.previous_click",(e=>{this.isActive()&&"splash"!==this.state.get("step")&&(this.restoreSavedState(),e.preventDefault())})),TTD.utils.add_action("wizard.model.complete.homepage",(e=>{this.state.clearWizardData(),e.setStepData(this.state.data().saveData,!0,!0)})),TTD.utils.add_filter("wizard.selector.action",(e=>(this.isActive()&&"page"===this.state.get("type")&&(e="toggleDropdown"),e))),TTD.utils.add_filter("wizard.preview_template_title",((e,t)=>{if(this.isActive()){const i=this.state.get("type");"page"===i?e=this.state.get("page_title")||"Choose Page":"template"===i&&!e&&t.includes("tcb2")&&(e=`${t.replace("tcb2-","").split("-").map(TTD.utils.capitalize).join(" ")}`)}return e})),TTD.utils.add_filter("wizard.can_continue",(e=>(this.isActive()&&(e=this.state.data().canContinue),e))),TTD.utils.add_filter("thrive_theme.wizard.should_save_template",((e,i)=>{if(this.isActive()&&(i.isStepCompleted()||i.homepageState.isSetFromSkin()&&!_.isEmpty(i.homepageState._previousAttributes))){const i=TTD.CONST.wizardOriginal.settings.homepage;if(i&&"template"===i.type){e=!1;const i=t("#template-selector");0===i.find(".ttd-homepage-confirmation-tooltip").length&&(this.$homepageConfirmTooltip=t(TTD.utils.tpl("dashboard/main/wizard/top/homepage-template-confirmation")()),i.append(this.$homepageConfirmTooltip)),this.$homepageConfirmTooltip.addClass("ttd-tooltip-visible")}}return e})),s.on("dropdown-selection",this.previewPage.bind(this)),s.on("after-top-render",(e=>{this.isActive()&&s.isStepCompleted()&&!s.hasStepChanges()&&e.$("#template-selector").append(TTD.utils.tpl("dashboard/main/wizard/homepage/edit-page")({wizard:s,homepage:this}))}))},after_render(){if(this.state.isSplash()){const e=TTD.utils.tpl(`dashboard/main/wizard/homepage/${this.state.get("step")}`);this.$el.append(e({wizard:s,state:this.state}))}s.trigger("render-top-bar"),TTD.objects.wizardView.contentClass();const e=t(this.parent.el).find(".ttd-wizard-top");e.find(".ttd-wizard-home-opt").select2({dropdownParent:e})},restoreSavedState(){this.state.restoreWizardData(),this.state.reset(),this.parent.loadPreview()},typeClicked(e,t){const i=t.dataset.type;return this.$(t).siblings().removeClass("selected"),this.selectType(i),!1},isActive:()=>"homepage"===s.get("active"),selectType(e){switch(this.state.set({type:e,step:"option-"+e},{silent:"blog"===e}),s.setStepData({type:e}),s.trigger("render-top-bar"),e){case"page":const e=()=>this.parent.$(".selector-drop").click();this.state.get("page_id")?this.parent.loadPreview(this.parent.model.getFrameURL(),e):e();break;case"blog":this.parent.loadPreview();break;case"template":s.loadStepTemplates().then((e=>{const t=e[0]&&e[0].id;TTD.objects.wizardView.previewTemplate({id:t},!1)}))}},previewPage(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:"",label:"",url:"",lp:!1};this.state.set({page_id:e.id,page_title:e.label,page_url:e.url,is_landing_page:e.lp}),this.parent.loadPreview()}});e.exports=new a({preventRender:!0})}(jQuery)},7892:function(e){e.exports={}},9657:function(e,t,i){const s=i(2625);function a(e,t){const i=s.get("active");if(TTD.utils.isWooStep(i)&&!e){const a=i.replace("woo_","");e=s.deepGet(`settings.${a}.${t}`)}return String(e||"")}e.exports={"thrive_theme.wizard_preview_template_id":e=>a(e,"template_id"),"thrive_theme.wizard_preview_template_source":e=>a(e,"source"),"theme.wizard.build_preview_before":(e,t)=>{const i=s.get("active");if("header"===i||"footer"===i){const s=`${TTD.utils.capitalize(i)}s`;let a=[],n=[];_.each(t.templates,(e=>{"local"===e.source?a.push(e):n.push(e)})),e+=TTD.utils.renderTemplatesSection(`Theme ${s}`,n,t),e+=TTD.utils.renderTemplatesSection(`My Saved ${s}`,a,t),t.removeMasonry()}return e}}},4682:function(e,t,i){!function(t){const s=i(2586);e.exports=s.extend({template:TTD.utils.tpl("dashboard/main/wizard/woo/section"),before_initialize:function(e){this.title=e.title,this.items=e.items,this.view=e.view},render:function(){let e="";_.each(this.items,(t=>{e+=this.view.item({model:this.view.model,item:t,itemClass:this.view.itemClass.replace(".","")})}));const t=this.template({title:this.title,sectionContent:e});this.$el.html(t)}})}(jQuery)},4330:function(e,t,i){!function(t){const s=TTD.CONST.branding.logo_data.dark,a=TTD.CONST.branding.logo_data.light,n=TTD.CONST.branding.logo_data.preview,o=i(8707),r=i(4821).extend({template:"dashboard/main/wizard/overlay-logo",wizard:i(2625),saveLogo(e,t){const i=this.model.get("opened");this.$(".logo-"+i).css("background-image","url("+t+")"),"light"===i?this.model.set({attachment_light_id:e,light_src:t},{silent:!0}):"dark"===i?this.model.set({attachment_dark_id:e,dark_src:t},{silent:!0}):"default"===i&&(this.model.set({attachment_light_id:e,light_src:t},{silent:!0}),this.model.set({attachment_dark_id:e,dark_src:t},{silent:!0}),s.attachment_id=a.attachment_id=this.model.get("attachment_dark_id"),s.src=a.src=this.model.get("dark_src"),this.wizard.setStepData({dark_id:this.model.get("attachment_dark_id")},!0),this.wizard.setStepData({light_id:this.model.get("attachment_dark_id")},!0),this.render())},loaderTarget(){return this.$(".logo-button")},before_initialize(){a.src||(a.src=a.placeholder),s.src||(s.src=s.placeholder),this.model.set({attachment_light_id:a.attachment_id,light_src:a.src,attachment_dark_id:s.attachment_id,dark_src:s.src,preview_src:n.src.replace(/\\/g,"/")},{silent:!0})},before_render(){let e=!0;"0"!==a.attachment_id&&""!==a.attachment_id||"0"!==s.attachment_id&&""!==s.attachment_id||(e=!1),this.model.set({isSet:e},{silent:!0})},after_render(){this.$(".logo-light, .logo-dark").on("mouseenter mouseleave",(function(){t(this).children().toggle()})),""===TTD.CONST.branding.logo_data.ttb_logo_tooltip&&setTimeout((()=>{this.$(".ttb-mega-tooltip").addClass("ttb-tooltip-visible")}),100),this.$(".ttb-mega-tooltip-acknowledge").on("click",(function(){TTD.CONST.branding.logo_data.ttb_logo_tooltip=1,t(this).parents(".ttb-mega-tooltip").hide(),TTD.utils.sendApiRequest("options/user-option",{meta_key:"ttb_logo_tooltip",meta_value:1})}))},nextStep(){return this.parent.loading(),s.attachment_id=this.model.get("attachment_dark_id")?this.model.get("attachment_dark_id"):this.model.get("attachment_id"),s.src=this.model.get("dark_src")?this.model.get("dark_src"):this.model.get("src"),a.attachment_id=this.model.get("attachment_light_id")?this.model.get("attachment_light_id"):this.model.get("attachment_id"),a.src=this.model.get("light_src")?this.model.get("light_src"):this.model.get("src"),this.wizard.setStepData({dark_id:s.attachment_id},!0),this.wizard.setStepData({light_id:a.attachment_id},!0).completeStep(!1),!1},openMedia:function(e){const t=e.currentTarget.classList;let i="dark";t.contains("logo-light")?i="light":(t.contains("logo-default")||t.contains("upload-logo-text"))&&(i="default"),this.model.set("opened",i),this.mediaLibrary.open()}});e.exports=new r({model:new o({type:"dark"})})}(jQuery)},5694:function(e,t,i){(t=>{const s=i(2586).extend({id:"#ttd-wizard-menu",model:i(2625),className:"ttd-wizard-menu ttd-d-flex",template:"dashboard/main/wizard/menu",after_initialize(){this.menus=[...TTD.CONST.menus,{id:-1,name:"I will choose later...",extra_class:" choose-later"}]},getSelectedMenus(){const e={id:0,name:"Choose a WordPress Menu"},t=this.model.deepGet("settings.menu")||{};return{header:_.find(this.menus,(e=>e.id===parseInt(t.header)))||e,footer:_.find(this.menus,(e=>e.id===parseInt(t.footer)))||e}},before_render(){this.activeMenus=this.getSelectedMenus()},toggleDropdown:function(e){e.currentTarget.classList.toggle("dropdown-visible")},selectItem:function(e){const t=e.currentTarget;this.$(`.selected-menu[data-target="${t.dataset.target}"]`).attr("data-id",t.dataset.id).html(t.innerHTML),this.activeMenus[t.dataset.target]={id:t.dataset.id,name:t.innerHTML}},finishMenu:function(e){return"1"===e.currentTarget.dataset.templates&&(this.activeMenus.header.id=this.activeMenus.footer.id=0),this.parent.loading(),this.model.setStepData({header:this.activeMenus.header.id||0,footer:this.activeMenus.footer.id||0}),this.model.completeStep(!1),!1}});e.exports=new s({preventRender:!0})})(jQuery)},565:function(e,t,i){function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function a(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){n(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}!function(t){const s=i(2586),n=i(8756),o=i(2464),r=s.extend({template:"dashboard/main/wizard/top",structureModals:[],events:()=>a(a({},Object.getPrototypeOf(r.prototype).events),{},{"mousedown .ttd-wizard-selector *":()=>!1}),setModel(e){return this.model||(this.model=e,this.model.on("step-change",this.render.bind(this)),this.model.on("template-selected",this.render.bind(this)),this.model.on("render-top-bar",this.render.bind(this))),this},previousClick(e){TTD.utils.do_action("wizard.previous_click",e),e.isDefaultPrevented()||(this.parent.hideTooltip(!0),this.model.previous())},render(){return this.model.hasTopBar()?s.prototype.render.apply(this,arguments):(this.$el.html(""),this)},after_render(){const e=this.$("#d-search");if(this.model.hasTopBar()&&e.length){this.__suggest=TTD.CONST.wizard.suggest_pages.map((e=>a({},e))),this.offset=0,this.limit=Math.max(this.__suggest.length,5),this.search="",e.autocomplete({delay:200,minLength:0,appendTo:".d-results-holder",source:(e,t)=>{this.fetchPages({search:e.term}).done((i=>{this.search=e.term,this.offset=0,this.__suggest=i,t(i)}))}});const i=this.$widget=e.autocomplete("instance"),s=String(this.model.getPreviewTemplateId());i._renderItem=(e,i)=>{const a=String(i.value)===s;return t('<li class="ui-menu-item"></li>').toggleClass("lp",i.lp).toggleClass("ttd-selected",a).append(i.label).append(i.lp?this.landingPageIcon():"").append(a?TTD.utils.icon("check_light"):"").appendTo(e)},e.on("focus",(e=>{e.currentTarget.value||i._suggest(this.__suggest)})).on("autocompleteclose",this.hideDropdown.bind(this)).on("autocompletefocus autocompleteselect",((t,i)=>("mouseenter"!==t.originalEvent.originalEvent.type&&(t.currentTarget.value=i.item.label),"autocompleteselect"===t.type&&(requestAnimationFrame((()=>e.trigger("autocompleteclose"))),this.model.trigger("dropdown-selection",i.item,this)),!1))),this.model.trigger("after-top-render",this)}},hideDropdown(e){e&&e.view&&this.$("#ttd-wizard-page-selector").hide()},toggleDropdown(){return this.$("#ttd-wizard-page-selector").toggle().css("width",this.$(".selector-drop").outerWidth()).find("#d-search").focus(),!1},fetchPages(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=a({search:this.search,limit:this.limit,offset:this.offset},e||{}),TTD.utils.sendApiRequest("wizard/pages",e,"GET").done((e=>this.$(".d-load-more").removeClass("ui-loading").toggle(e.length>=this.limit)))},loadMore(){return this.$(".d-load-more").addClass("ui-loading"),this.fetchPages({offset:this.offset+this.limit}).then((e=>{this.offset+=e.length,this.__suggest=this.__suggest.concat(e),this.$widget._suggest(this.__suggest)})),!1},openModal(){const e=this.model.get("active");void 0===this.structureModals[e]&&(this.structureModals[e]="homepage"===e?new o({model:this.model}):new n({model:this.model})),this.structureModals[e].open()},selectorClick(){const e=TTD.utils.apply_filters("wizard.selector.action","openModal");return"function"==typeof this[e]&&this[e].apply(this,arguments),!1},getEditLink(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"tar";if("tar"===e)return TTD.CONST.wizard.urls.homepage_architect;if("ttb"===e&&TTD.objects.wizardView.iframeData){const e=TTD.objects.collections.templates.findWhere({ID:Number(TTD.objects.wizardView.iframeData.templateId)});return e&&e.get("edit_url")||""}return""},landingPageIcon:()=>`<span title="Architect Landing Page" class="lp-icon"><img src="${TTD.CONST.architect_url}editor/css/images/admin-bar-logo.png" width="16" height="16"></span>`});e.exports=new r({preventRender:!0})}(jQuery)},8033:function(e,t,i){!function(t){const s=i(2586).extend({template:"dashboard/main/wizard/woo/header-footer",section:TTD.utils.tpl("dashboard/main/wizard/woo/section"),model:i(2625),before_initialize:function(){let e=[];TTD.utils.add_action("theme.wizard.select_template",(t=>{const i=this.model.get("active"),s="woo_"+i;"header"!==i&&"footer"!==i||!e[s]||(e[s].hasPreview=!1)})),TTD.utils.add_action("theme.wizard.build_preview",(t=>{const i=this.model.get("active");if(TTD.utils.isWooStep(i)){const s=this.model.deepGet(`settings.${this.type}`);if(e[i]=t,s){let e=t.$templatesList.find(`[data-id=${s.template_id}]`);setTimeout((()=>{e.hasClass("active")||e.addClass("ttd-hf-default-template").find(".tpl-title-container").append(`<span class="tpl-title mb-5 tpl-use-default">Use my default ${this.type}</span>`)}),1e3)}}})),TTD.utils.add_filter("theme.wizard.build_preview_before",((e,t)=>{const i=this.model.get("active");if(TTD.utils.isWooStep(i)){const s="woo_header"===i?"Headers":"Footers",a=[],n=[],o=[];_.each(t.templates,(e=>{"local"===e.source?o.push(e):parseInt(e.is_woo)?a.push(e):n.push(e)})),e+=TTD.utils.renderTemplatesSection(`E-Commerce ${s}`,a,t),e+=TTD.utils.renderTemplatesSection(`Regular ${s}`,n,t),e+=TTD.utils.renderTemplatesSection(`My Saved ${s}`,o,t),t.removeMasonry()}return e})),this.model.on("step-change",((e,t)=>{const i=t.id;TTD.utils.isWooStep(i)&&(this.model.get("done").find((e=>e===i))||this.model.setStepData({template_id:"",source:""},!0,!0,i))}))},setType:function(e){return this.type=e.replace("woo_",""),this},chooseDefault:function(){this.parent.loading(),this.model.setStepData(this.model.deepGet(`settings.${this.type}`)),this.model.completeStep(!1)}});e.exports=new s({preventRender:!0})}(jQuery)},6577:function(e,t,i){var s;s=jQuery,e.exports=i(2586).extend({before_initialize:function(){TTD.utils.add_action("theme.document.keyup",(e=>{27===e.keyCode&&!TTD.utils.isModalFreezeActive()&&this.is_open()&&this.close()})),TTD.utils.add_action("theme.document.click",(e=>{!TTD.utils.isModalFreezeActive()&&e.target.classList.contains("ttd-modal")&&e.target.classList.contains("active")&&this.close()})),TTD.utils.add_action("theme.document.keyup",(e=>{this.is_open()&&13===e.keyCode&&this.on_enter()}))},on_enter:()=>{},open:function(e){"function"==typeof this.before_open&&this.before_open(e),TTD.Elements.$body.addClass("ttd-modal-visible"),this.$el.addClass("active"),"function"==typeof this.after_open&&this.after_open(e)},close:function(e){return TTD.Elements.$body.removeClass("ttd-modal-visible"),this.$el.removeClass("active"),"function"==typeof this.after_close&&this.after_close(e),this.$content.removeClass("ttd-loading small"),this},is_open:function(){return this.$el.hasClass("active")},validate:()=>!0,render:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"function"==typeof this.before_render&&this.before_render(e),this.template&&_.isString(this.template)&&(this.template=TTD.utils.tpl(this.template)),this.template&&(this.setElement(s(TTD.utils.tpl("dashboard/modals/base")()).appendTo(TTD.Elements.$modals)),this.$(".modal-inner").html(this.template(e)),e.type&&"small"===e.type&&this.$el.closest(".ttd-modal").addClass("ttd-modal-small")),this.$content=this.$(".modal-content"),"function"==typeof this.after_render&&this.after_render(e),this}})},9149:function(e,t,i){function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const n=i(6577),o=i(2747);e.exports=n.extend({modalTemplate(){throw new Error('"modalTemplate" is not specified!')},itemTemplate(){throw new Error('"itemTemplate" is not specified!')},radioFilterItemHtml(){throw new Error('"radio filter item html" is not specified!')},getItems(){throw new Error('"getItems" method is not implemented!')},initialize(e){e=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){a(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({autoFilter:!0},e),this.template=this.modalTemplate(),n.prototype.initialize.call(this,e),this.$items=this.$(".tve-c-modal-items"),this.$radioFilterItems=this.$(".tve-c-modal-radio-filter"),this.dropdownFilter=new o({el:this.$(".tve-c-modal-select-filter")[0],items:this.getDropdownFilterItems()}),this.dropdownFilter.on("select",(e=>this.trigger("filter.change",{type:"dropdown",value:e}))),e.autoFilter&&this.on("filter.change",(()=>this.renderTemplates(!1))),this.renderRadioFilters()},renderRadioFilters(){this.$radioFilterItems.empty(),this.getRadioFiltersItems().forEach((e=>this.$radioFilterItems.append(this.radioFilterItemHtml(e))))},open(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(const t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);this.loading(!1),n.prototype.open.call(this,e),this.resetFilters(),this.renderTemplates()},renderTemplates(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return new Promise((t=>{e&&this.$items.addClass("ttd-loading"),this.$items.empty(),this.$items.data("masonry")&&this.$items.data("masonry").destroy(),this.getItems().then((i=>{this.filterItems(i).forEach((e=>{this.$items.append(TTD.utils.tpl(this.itemTemplate())({item:e,itemWidth:this.getItemWidth()}))})),this.$items.masonry(),e&&this.$items.removeClass("ttd-loading"),t()}))}))},filterItems:e=>e,resetFilters(){this.$(".tve-c-modal-search-input").val(""),this.dropdownFilter.setDefaultValue(),this.dropdownFilter.close(),this.setRadioFilterValue(this.getDefaultRadioFilterValue())},onRadioFilterClick(e,t){this.setRadioFilterValue(t.dataset.value,!0)},setRadioFilterValue(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.$radioFilterItems.find(".active").removeClass("active"),this.$radioFilterItems.find(`[data-value="${e}"]`).addClass("active"),t&&this.trigger("filter.change",{type:"radio",value:e})},onSearch:_.throttle((function(e,t){this.trigger("filter.change",{type:"search",value:t.value})}),420),getRadioFilterValue(){return this.$radioFilterItems.find(".active").attr("data-value")},getDefaultRadioFilterValue:()=>"",getDropdownFilterValue(){return this.dropdownFilter.getValue()},getSearchValue(){return this.$(".tve-c-modal-search-input").val()},getDropdownFilterItems:()=>[],getRadioFiltersItems:()=>[],getItemWidth:()=>300,refreshItems(){this.items=null,this.loading(!0),this.renderTemplates().then((()=>this.loading(!1)))},prepareItem:e=>e,setItems(e){return this.items=e,this},modalTitle:()=>"",loading(){}})},8298:function(e,t,i){const s=i(2586),a=i(6263);e.exports=s.extend({tagName:"div",template:"dashboard/modals/skins/cloud/item",className:"ttd-cloud-skin-item-container",after_render:function(){this.$newSkinView=TTD.objects.modals.new_skin,this.$el.attr("data-id",this.model.get("id"))},skinImportStep:function(){this.beforeImport();const e=this.$el.attr("data-id");TTD.$.ajax({url:TTD.CONST.routes.skins+"/cloud_import",type:"POST",data:{skin_id:e},headers:{"X-WP-Nonce":TTD.CONST.nonce}}).done((t=>{let i="Theme <b>imported</b> successfully!",s="success";if("string"==typeof t)i=t,s="error";else{const i=new a(t,{parse:!0});i.set("tag",e),i.isActive()&&TTD.utils.reloadDashboard(),TTD.objects.collections.skins.add(i,{at:0})}TTD.utils.message(i,s)})).fail(((e,t,i)=>{this.error(e,t,i)})).always((()=>{this.$el.removeClass("ttd-loading "),this.closeModal()}))},beforeImport:function(){this.$el.addClass("ttd-loading")},closeModal:function(){this.$newSkinView.close()},skinSetupStep:function(){this.beforeImport(),this.model.isDefaultTPMSkin()?(TTD.utils.saveOptions("thrive_theme_is_fresh_install",0,(()=>{this.closeModal(),TTD.utils.toggleModalFreeze(!1)})),TTD.CONST.wizard.is_fresh_install=0,TTD.utils.message("Theme activated successfully!","success")):this.skinImportStep()}})},4164:function(e,t,i){const s=i(8298);e.exports=i(2586).extend({className:"ttd-cloud-skins-listing",template:"dashboard/modals/skins/cloud/list",async renderSkins(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=this.$(".ttd-cloud-skins-list").empty();null===e&&await TTD.utils.getCloudSkinsCollection().then((t=>{this.collection=t,e=this.collection})),e.each((e=>t.append(new s({model:e}).$el))),TTD.utils.initScrollbar(this.$(".ttd-cloud-skin-scroll"))}})},3552:function(e,t,i){const s=i(2586),a=i(4164);e.exports=s.extend({template:"dashboard/modals/skins/cloud/main",after_render:function(){this.$cloudSkins=new a,this.$(".cloud-items-content").append(this.$cloudSkins.$el),this.toggleLoading(!0),this.$cloudSkins.renderSkins().then((()=>{this.setCloudItemsNumber(this.$cloudSkins.collection.length),this.toggleLoading(!1)}))},setCloudItemsNumber:function(e){this.$(".cloud-items-counter").html(e)},searchCloudSkins:function(e,t){27!==e.which&&TTD.utils.getCloudSkinsCollection().then((e=>{const i=e.byName(t.value);this.$cloudSkins.renderSkins(i),this.setCloudItemsNumber(i.length)}))},refreshItems(){this.toggleLoading(!0),TTD.utils.getCloudSkinsCollection(!0).then((e=>{this.$cloudSkins.collection=e,this.$cloudSkins.renderSkins(e),this.setCloudItemsNumber(e.length),this.toggleLoading(!1)}))},toggleLoading(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$cloudSkins.$el.toggleClass("ttd-loading",e)}})},7678:function(e,t,i){(t=>{const s=i(6263),a=i(3552);e.exports=i(6577).extend({template:"dashboard/modals/skins/create",importSkinFrame:null,before_open:function(e){const t=e.step?e.step:"first";e.extraClass&&this.$el.addClass(e.extraClass),this.collection=e.collection,this.beforeStep(t),this.displayStep(t),this.initImportMediaLibrary()},initImportMediaLibrary:function(){this.importSkinFrame=wp.media.frames.file_frame=wp.media({title:"Import Theme",button:{text:"Import"},multiple:!1,frame:"select",library:{type:"application/zip"}}),this.importSkinFrame.on("select",(()=>{this.content().addClass("ttd-loading");const e=this.importSkinFrame.state().get("selection").first().toJSON();if("application/zip"!==e.mime)return alert("Only .zip files are allowed"),this.content().removeClass("ttd-loading"),void this.importSkinFrame.open();this.importSkin({attachment_id:e.id})}))},importSkin:function(e){TTD.$.ajax({url:TTD.CONST.routes.skins+"/import",type:"POST",data:e,headers:{"X-WP-Nonce":TTD.CONST.nonce}}).done((e=>{const t=new s(e,{parse:!0});t.isActive()&&TTD.utils.reloadDashboard(),TTD.objects.collections.skins.add(t,{at:0}),TTD.utils.message("Theme <b>imported</b> successfully!","success")})).fail(((e,t)=>{this.error({},e,t)})).always((()=>{this.close(),TTD.Elements.$body.removeClass("ttd-loading "),this.$content.removeClass("ttd-loading small")}))},step:function(e,t){const i=t.dataset.step;this.beforeStep(i),this.displayStep(i)},beforeStep(e){switch(this.$el.removeClass("cloud-items"),e){case"blank":this.$(".step input").val(""),this.focusOnInput();break;case"cloud-items":this.focusOnInput(),this.$el.addClass("cloud-items"),void 0!==this.cloud&&this.cloud.undelegateEvents(),this.cloud=new a({el:this.$(".cloud-items-container")[0]})}},focusOnInput:function(){setTimeout((()=>{this.$(".step:visible input").trigger("focus")}),100)},displayStep:function(e){this.$(".ttd-error-message, .step").hide(),this.$step=this.$(`.${e}-step`).show()},skinSave:function(){const e=this.getInputName();e&&this.save(new s({name:e}))},getInputName:function(){const e=this.$("#skin-name");let t=e.val();return t&&0!==t.length||(this.$(".blank-step .ttd-error-message").show(),e.trigger("focus"),t=!1),t},save:function(e,t){t=TTD.$.extend({},t,{}),this.$content.addClass("ttd-loading small"),e.save(t,{wait:!0,success:e=>{this.collection.add(e,{at:0}),this.close(),TTD.utils.message("Theme <b>created</b> successfully!","success")},error:(e,t,i)=>{this.close(),this.error(e,t,i)}})},keyup:function(e){this.$(".ttd-error-message").hide(),13===e.keyCode&&this.$step.find(".click.normal-button").trigger("click")},import:function(){this.importSkinFrame.open()},content(){return this.$content||(this.$content=this.$(".modal-content"))}})})(jQuery)},9829:function(e,t,i){jQuery,e.exports=i(6577).extend({template:"dashboard/modals/skins/delete",model:null,after_open:function(e){this.model=e.model,this.$(".ttd-delete-skin-name").html(`<b>${this.model.get("name")}</b>`)},delete:function(){this.$content.find(".red").addClass("ttd-button-loading no-transition").attr("disabled",!0),this.model.destroy({processData:!0,data:{force:!0},wait:!0,success:()=>{this.$content.find(".red").removeClass("ttd-button-loading no-transition").removeAttr("disabled"),this.close(),TTD.utils.message("Theme <b>deleted</b>.","success")},error:(e,t,i)=>{this.error(e,t,i)}})},on_enter:function(){this.delete()}})},451:function(e,t,i){(t=>{const s=i(6577);e.exports=s.extend({template:"dashboard/modals/skins/export",model:null,export_ids:[],before_initialize:function(e){s.prototype.before_initialize.apply(this,arguments),this.model=new Backbone.Model,this.model.set("skin_id",e.ID),this.model.set("name",TTD.objects.collections.skins.find((function(t){return t.get("term_id")===e.ID})).get("name"))},before_open:function(){this.$("#export-archive-name").val(this.model.get("name"))},export:function(){this.model.get("skin_id")?this.model.get("name")?(this.content().addClass("ttd-loading"),t.ajax({url:TTD.CONST.routes.skins+"/export",type:"POST",data:{name:this.model.get("name"),skin_id:this.model.get("skin_id")},headers:{"X-WP-Nonce":TTD.CONST.nonce}}).done((e=>{window.location.assign(e)})).fail((()=>{TTD.utils.message("Error exporting theme!","error",5e3)})).always((()=>{this.close(),this.content().removeClass("ttd-loading"),TTD.Elements.$body.removeClass("ttd-loading ")}))):TTD.utils.message("Please fill in a name for the archive!","error",3e3):TTD.utils.message("Error: No theme selected!","error",3e3)},keyup:function(e){this.model.set("name",this.$("#export-archive-name").val())},on_enter:function(){this.export()},content(){return this.$content||(this.$content=this.$(".modal-content"))}})})(jQuery)},2382:function(e,t,i){const s=i(9149);e.exports=s.extend({after_initialize(){this.$(".modal-content").addClass("large-modal"),this.$footer=this.$(".tve-c-modal-footer")},templates:{},itemTemplate:()=>"dashboard/modals/cloud-templates/template-item",modalTemplate:()=>"dashboard/modals/cloud-templates/main",radioFilterItemHtml:e=>TTD.utils.tpl("dashboard/modals/cloud-templates/radio-item")({item:e}),getItems(){return new Promise((e=>{this.templates[this.type]?(this.setItems(this.templates[this.type]),e(this.templates[this.type])):TTD.$.ajax({url:`${TTD.CONST.routes.templates}/cloud`,data:{is_singular:"single"===this.type?1:0},headers:{"X-WP-Nonce":TTD.CONST.nonce}}).fail((()=>{TTD.utils.message("Error fetching templates!","error")})).done((t=>{this.templates[this.type]=[...t,...this.getLocalTemplates(this.type)],this.setItems(this.templates[this.type]),e(this.templates[this.type])}))}))},getLocalTemplates:e=>TTD.objects.collections.templates.filter((t=>{const i=t.isList();return"list"===e?i:!i})).map((e=>({id:e.get("ID"),type:"local",title:e.title(),primary:e.primary(),secondary:e.secondary(),thumb:e.get("thumbnail")}))),setItems(e){return this.items=e,this.currentRadioFilter=this.getRadioFilterValue()||this.getDefaultRadioFilterValue(),this.renderRadioFilters(),this},filterItems(e){const t=this.getSearchValue().trim().toLowerCase(),i=this.getDropdownFilterValue(),s=this.getRadioFilterValue()||"",[a,n]=s.split("|");return e.filter((e=>{let o=!0;return i&&"all"!==i&&i!==e.type&&(o=!1),o&&t&&!e.title.toLowerCase().includes(t)&&(o=!1),o&&s&&"all"!==s&&(e.primary!==a||e.secondary!==n)&&(o=!1),("single"===this.type&&!["post","page"].includes(e.secondary)&&e.secondary!==this.meta_input.secondary_template||"single"===this.type&&"home"===e.primary&&"home"!==this.meta_input.primary_template)&&(o=!1),o}))},getDropdownFilterItems:()=>[{id:"all",order:1,text:"All Templates",description:"Everything in one place."},{id:"local",order:2,text:"Saved Templates",description:"Saved templates are the ones that we have."},{id:"cloud",order:3,text:"Cloud Templates",description:"Cloud templates come from the cloud.",default:!0}],getRadioFiltersItems(){const e=this.filterItems(this.items||[]);let t={all:{id:"all",label:"All",count:e.length,default:"all"===this.currentRadioFilter||!this.currentRadioFilter}};return e.forEach((e=>{const i=`${e.primary}|${e.secondary.trim()}`;let s;switch(i){case"home|page":s="Homepage";break;case"archive|product":s="Shop";break;case"archive|product_cat":s="Product categories";break;default:s=TTD.utils.capitalize(e.secondary||e.primary)}void 0===t[i]&&(t[i]={id:i,label:s,count:0,default:this.currentRadioFilter===i}),t[i].count++})),t=Object.values(t),t.length&&!t.some((e=>e.default))&&(t[0].default=!0),t},refreshItems(){this.templates={},s.prototype.refreshItems.call(this)},back(){this.close(),this.currentModal&&this.currentModal.open()},resetFilters(){s.prototype.resetFilters.call(this),this.selectedTemplate=null,this.$footer.hide()},selectTemplate(e,t){this.$footer.show(),this.selectedTemplate=t.dataset.id,this.$items.find(".selected").removeClass("selected"),t.closest(".tve-c-modal-item").classList.add("selected")},createTemplate(){this.selectedTemplate&&(this.trigger("ttd.template.select",this.selectedTemplate),this.back())},loading(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$(".modal-content").toggleClass("ttd-loading",e)},getItemWidth:()=>260,getDefaultRadioFilterValue(){return`${this.meta_input.primary_template}|${this.meta_input.secondary_template}`}})},9302:function(e,t,i){i(2194),e.exports=i(6577).extend({template:"dashboard/modals/templates/create-homepage",after_render:function(){this.$errorMessage=this.$(".ttd-error-message"),this.$templateName=this.$("#homepage-template-name")},before_open:function(){this.$templateName.val("")},after_open:function(){setTimeout((()=>{this.$templateName.trigger("focus")}),100)},after_close:function(){this.$templateName.removeClass("ttd-error-input"),this.$errorMessage.hide()},keyup:function(e){13===e.which&&this.save()},getMetaOptions:function(){return{primary_template:"home",secondary_template:TTD.utils.homepageType()}},save:function(){const e=this.$templateName.val();if(!e)return this.$templateName.addClass("ttd-error-input"),void this.$errorMessage.show();const t=TTD.utils.templateModelFactory({meta_input:this.getMetaOptions(),post_title:e});this.$content.addClass("ttd-loading small"),t.save({},{wait:!0,success:(e,t)=>{this.$content.removeClass("ttd-loading small"),this.close(),e.set("just_added",1),TTD.objects.collections.templates.remove(0),TTD.objects.collections.templates.add(e),TTD.CONST.templates.push(t),TTD.utils.message("Template <b>created</b> successfully!","success"),TTD.utils.lightspeedOptimizeItem(e.get("ID"),e.get("preview_url"))},error:function(){TTD.utils.message("Error creating template!","error")}})}})},9049:function(e,t,i){const s=i(612),a=i(5077);e.exports=i(6577).extend({template:"dashboard/modals/templates/create-page",after_initialize:function(){this.$templateName=this.$("#template-name"),this.$singleViewOptions=new s({el:this.$(".select-single-container")[0]}),this.$listViewOptions=new a({el:this.$(".select-list-container")[0]}),TTD.objects.modals.cloudTemplates.off("ttd.template.select").on("ttd.template.select",(e=>{this.inheritFrom=e,this.save()}))},after_render:function(){this.$primaryBtns=this.$(".ttd-modal-sol"),this.$input=this.$("#template-name"),this.$errorMessage=this.$(".ttd-error-message")},before_open:function(){this.inheritFrom=null},after_open:function(){setTimeout((()=>{this.$templateName.trigger("focus")}),100)},after_close:function(){this.$input.removeClass("ttd-error-input"),this.$errorMessage.hide()},keyup:function(e){13===e.which&&this.save()},save:function(){const e=this.$templateName.val();if(!e)return this.$input.addClass("ttd-error-input"),void this.$errorMessage.show();const t={meta_input:this.getCreateView().getCreateOptions(),post_title:e};this.$content.addClass("ttd-loading small"),TTD.utils.templateModelFactory(t).save({inherit_from:this.inheritFrom||"default"},{wait:!0,success:(e,t)=>{this.$content.removeClass("ttd-loading small"),this.close(),e.set("just_added",1),TTD.objects.collections.templates.add(e),TTD.CONST.templates.push(t),TTD.utils.message("Template <b>created</b> successfully!","success"),TTD.utils.lightspeedOptimizeItem(e.get("ID"),e.get("preview_url"))},error:function(){TTD.utils.message("Error creating template!","error")}})},openCloudTemplatesModal(){0===this.$templateName.val().trim().length?(this.$input.addClass("ttd-error-input"),this.$errorMessage.show()):(this.close(),TTD.objects.modals.cloudTemplates.open({type:this.$(".ttd-modal-sol .active").attr("data-primary"),meta_input:this.getCreateView().getCreateOptions(),currentModal:this}))},getCreateView(){return"single"===this.$primaryBtns.find(".active").attr("data-primary")?this.$singleViewOptions:this.$listViewOptions},singleOrList:function(e,t){this.inheritFrom=null,Array.from(t.parentElement.children).forEach((e=>e.classList.remove("active"))),t.classList.add("active"),this.$listViewOptions.$el.toggle("list"===t.dataset.primary),this.$singleViewOptions.$el.toggle("single"===t.dataset.primary),this.getCreateView().beforeShow()}})},5077:function(e,t,i){const s=i(2194);e.exports=i(2586).extend({after_initialize:function(){this.renderListSelect()},beforeShow:function(){},renderListSelect:function(){this.deleteSelect(this.primarySelect),this.primarySelect=new s({el:this.$(".ttd-template-primary")[0],model:{list:TTD.CONST.list_templates,label:"List Type:",default:TTD.CONST.list_templates.length?TTD.CONST.list_templates[0].key:""},on_select:e=>{"blog"===e||"archive"===e?this.renderCustomArchiveSelect(_.findWhere(TTD.CONST.list_templates,{key:e})):(this.deleteSelect(this.secondarySelect),this.deleteSelect(this.variableSelect))}}),this.renderCustomArchiveSelect(_.findWhere(TTD.CONST.list_templates,{key:"blog"}))},renderCustomArchiveSelect:function(e){const t=this.getSecondaryList(e);this.deleteSelect(this.secondarySelect),this.deleteSelect(this.variableSelect),this.secondarySelect=new s({el:this.$(".ttd-template-secondary")[0],model:{list:t,label:"Archive Type:",default:t.length?t[0].key:""},on_select:(t,i)=>{this.variableSelectInit(e,{key:t,name:i})}})},variableSelectInit:function(e,t){const i=t.key,s=e.secondary&&e.secondary[i]&&e.secondary[i].variable,a=e.secondary[i],n=this.$("#ttd-variable-template").empty();if(n.data("select2"))try{n.select2("destroy")}catch(e){}s?(this.variableSelect=n,n.parent().show(),n.html(`<option value="">All ${a.name}</option>`),n.select2({minimumResultsForSearch:0,minimumInputLength:2,ajax:{delay:100,url:TTD.CONST.routes.templates+"/suggest-variable?secondary_template="+t.key,type:"GET",dataType:"json",headers:{"X-WP-Nonce":TTD.CONST.nonce},processResults:e=>(e.unshift({id:"",text:"All "+a.name}),{results:e})}})):n.parent().hide()},getSecondaryList:function(e){const t=[],i=void 0!==e.secondary?e.secondary:{};return t.push({key:0,name:"All "+e.name}),_.each(i,((e,i)=>{t.push({key:i,name:e.name})})),t},getVariableList:function(e,t){const i=[];return i.push({key:"0",name:"All "+t.name}),t.variable&&_.each(t.variable,((e,t)=>{i.push({key:t,name:e})})),i},deleteSelect:function(e){if(e&&void 0!==e.$el)e.undelegateEvents(),e.$el.empty(),e=null;else if(e&&e.jquery){if(e.data("select2"))try{e.select2("destroy")}catch(e){}e.val("").parent().hide()}},getCreateOptions:function(){let e=this.primarySelect.get_value(),t=this.secondarySelect?this.secondarySelect.get_value():"";return"blog"===e&&("post"===t?(e="home",t="blog"):e="archive"),{primary_template:e,secondary_template:t,variable_template:this.variableSelect&&this.variableSelect.val()||"",default:0}}})},612:function(e,t,i){function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function a(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){n(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const o=i(2194);e.exports=i(2586).extend({after_initialize:function(){this.renderDropdowns()},beforeShow:function(){},renderDropdowns:function(){const e=this.prepareItemsForSelect(TTD.CONST.post_formats),t=a(a({},TTD.CONST.content_types),{},{error404:{key:"error404",name:" 404 Page"}});TTD.utils.isHomeLandingPage()||"posts"===TTD.CONST.options.show_on_front||(t.home={key:"home",name:"Homepage"}),TTD.CONST.woocommerce.is_active&&delete t[TTD.CONST.woocommerce.key],this.postFormatSelect=this.renderSelect(".ttd-template-post-format",e,"Choose Post Format"),this.contentTypeSelect=this.renderSelect(".ttd-template-content-type",t,"Choose Content Type",(e=>{this.postFormatSelect.$el.toggle("post"===e)}))},prepareItemsForSelect:function(e){return e.map((e=>({key:e,name:TTD.utils.capitalize(e)})))},renderSelect:function(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:jQuery.noop;return new o({el:this.$(e)[0],model:new Backbone.Model({list:t,label:i,default:_.isEmpty(t)?"":t[Object.keys(t)[0]].key}),on_select:s})},getCreateOptions:function(){const e=this.contentTypeSelect.get_value(),t={primary_template:"singular",secondary_template:e,default:0};switch(e){case"post":t.format=this.postFormatSelect.get_value();break;case"error404":t.primary_template=e,t.secondary_template="";break;case"home":t.primary_template="home",t.secondary_template="page"}return t}})},899:function(e,t,i){jQuery,e.exports=i(6577).extend({template:"dashboard/modals/templates/delete",model:null,after_open:function(e){this.model=e.model,this.$(".ttd-delete-template-name").html("<b>"+this.model.get("post_title")+"</b>")},delete:function(){this.$content.addClass("ttd-loading small"),this.model.destroy({wait:!0,success:(e,t)=>{this.$content.removeClass("ttd-loading small"),TTD.CONST.templates=TTD.CONST.templates.filter((e=>e.ID!==parseInt(t))),this.close(),TTD.utils.message("Template <b>deleted</b>.","success")}})},on_enter:function(){this.delete()}})},8629:function(e,t,i){function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function a(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){n(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const o=i(6420),r=i(2194);e.exports=i(6577).extend({template:"dashboard/modals/templates/create-post",before_open:function(e){this.collection=e.collection,this.meta_input=e.meta_input||{};const t=this.meta_input.primary_template;this.beforeStep(t),this.displayStep(t),this.$(".ttd-modal-sidebar-icon").hide().filter(`[data-icon="${t}"]`).show()},displayStep:function(e){this.$(".ttd-error-message").hide(),this.$(".step").hide(),this.$step=this.$("."+e+"-step").show()},beforeStep(e){switch(e){case"singular":this.enablePostFormats();break;case"list":this.renderListSelect()}},step:function(e,t){this.beforeStep(t.dataset.step),this.displayStep(t.dataset.step)},singularSave:function(){const e=this.$(".post-format:checked").val();e&&this.save(new o({meta_input:a(a({},this.meta_input),{},{format:e,default:1})}))},listTemplateSave:function(){const e=new o({meta_input:a(a({},this.meta_input),{},{primary_template:this.primarySelect?this.primarySelect.get_value():"",secondary_template:this.secondarySelect?this.secondarySelect.get_value():"",variable_template:this.variableSelect?this.variableSelect.get_value():"",default:1})});this.save(e)},save:function(e){e.set("post_title",e.name()),this.$content.addClass("ttd-loading small"),e.save({},{wait:!0,success:e=>{this.$content.removeClass("ttd-loading small"),this.collection.add(e),this.close(),TTD.utils.message("Template <b>created</b> successfully!","success")},error:function(){TTD.utils.message("Error creating template!","error")}})},getVariableList:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const i=[];return"general"===e||(TTD.objects.collections.templates.hasModel("archive",e)||i.push({key:"0",name:"All "+t}),TTD.CONST.archive_types[e].sub&&_.each(TTD.CONST.archive_types[e].sub,((t,s)=>{TTD.objects.collections.templates.hasModel("archive",e,s)||i.push({key:s,name:t})}))),i},getSecondaryList:function(){const e=[];return _.each(TTD.CONST.archive_types,((t,i)=>{(this.getVariableList(i).length||"general"===i&&!TTD.objects.collections.templates.generalArchiveTemplateExists())&&e.push({key:i,name:t.name})})),e},enablePostFormats:function(){const e=[];let t=!1;this.collection.each((t=>{"post"===t.secondary()&&e.push(t.format())})),this.$("#post-formats-select input").each(((i,s)=>{const a=s.nextElementSibling;-1===e.indexOf(s.value)?(s.disabled=!1,a.classList.remove("disabled"),t?s.checked=!1:(s.checked=!0,t=!0)):(s.disabled=!0,s.checked=!1,a.classList.add("disabled"))}))},renderListSelect:function(){let e=[];TTD.objects.collections.templates.hasModel("blog")||e.push({key:"blog",name:"Blog"}),TTD.objects.collections.templates.hasModel("search")||e.push({key:"search",name:"Search"}),this.getSecondaryList().length>0&&e.push({key:"archive",name:"Archive"}),this.primarySelect&&this.primarySelect.undelegateEvents(),this.primarySelect=new r({el:this.$(".ttd-template-primary")[0],model:{list:e,label:"List Type:",default:e.length?e[0].key:""},on_select:(e,t)=>{"archive"===e?this.renderCustomArchiveSelect():this.clearCustomArchiveSelect()}}),1===e.length&&"archive"===e[0].key?this.renderCustomArchiveSelect():this.clearCustomArchiveSelect()},renderCustomArchiveSelect:function(){this.variableSelect&&(this.variableSelect.set_value("0"),this.variableSelect.hide());const e=this.getSecondaryList();this.secondarySelect&&this.secondarySelect.undelegateEvents(),0!==e.length?(this.secondarySelect=new r({el:this.$(".ttd-template-secondary")[0],model:{list:e,label:"Archive Type:",default:e.length?e[0].key:""},on_select:(e,t)=>{this.variableSelectInit({key:e,name:t})}}),this.variableSelectInit(e[0])):this.$(".ttd-template-secondary").html("You've created templates for all the custom archives!")},clearCustomArchiveSelect:function(){this.$(".ttd-template-secondary").html(""),this.$(".ttd-template-variable").html(""),this.secondarySelect&&(this.secondarySelect.undelegateEvents(),this.secondarySelect=null),this.variableSelect&&(this.variableSelect.undelegateEvents(),this.variableSelect=null)},variableSelectInit:function(e){const t=this.getVariableList(e.key,e.name);this.variableSelect&&(this.variableSelect.$el.empty(),this.variableSelect.undelegateEvents()),t.length>0&&(this.variableSelect=new r({el:this.$(".ttd-template-variable").show()[0],model:{list:t,label:"Defined for:",default:t.length?t[0].key:""}}))}})},6661:function(e,t,i){e.exports=i(6577).extend({template:"dashboard/modals/templates/reset",model:null,after_open:function(e){this.model=e.model,this.$(".ttd-reset-template-name").html(`<b>${this.model.get("post_title")}</b>`)},reset:function(){this.$content.addClass("ttd-loading small"),this.model.save({action:"reset_template"},{success:e=>{this.$content.removeClass("ttd-loading small"),this.close(),TTD.utils.message("Template has been <b>reset</b> to default."),TTD.utils.lightspeedOptimizeItem(e.get("ID"),e.get("preview_url"))}})},on_enter:function(){this.reset()}})},9532:function(e,t,i){const s=i(6577);e.exports=s.extend({template:"dashboard/modals/start/main",before_open:function(){this.$el.find(".kb-input-search").val("")},chooseLink:function(e){let t;switch(e.currentTarget.classList[0]){case"knowledge-base":e.target.parentNode.classList.contains("kb-search")||e.target.classList.contains("kb-search")||(t="https://help.thrivethemes.com");break;case"thrive-university":t="https://thrivethemes.com/university/";break;case"support":t="https://thrivethemes.com/support"}t&&window.open(t)},searchKB:function(e){let t=this.$(e.currentTarget).parent().children()[0].value;t.length&&(t=t.replace(/\s+/g,"+"),window.open("https://help.thrivethemes.com/en/?q="+t))}})},2898:function(e,t,i){jQuery,e.exports=i(6577).extend({template:"dashboard/modals/typography/delete",model:null,after_open:function(e){this.model=e.model,this.$(".ttd-delete-template-name").html("<b>"+this.model.get("post_title")+"</b>")},delete:function(){this.$content.addClass("ttd-loading small"),this.model.destroy({wait:!0,success:()=>{this.$content.removeClass("ttd-loading small"),this.close(),TTD.utils.message("Template <b>deleted</b>.","success")}})},on_enter:function(){this.delete()}})},6553:function(e,t,i){jQuery,e.exports=i(6577).extend({template:"dashboard/modals/typography/reset",model:null,after_open:function(e){this.model=e.model,this.$(".ttd-reset-typography-name").html("<b>"+this.model.get("post_title")+"</b>")},reset:function(){this.$content.addClass("ttd-loading small"),this.model.meta("style",""),this.model.save({action:"reset"},{wait:!0,success:()=>{this.$content.removeClass("ttd-loading small"),this.close(),TTD.utils.message("Typography set has been <b>reset</b> to default.")}})},on_enter:function(){this.reset()}})},2464:function(e,t,i){e.exports=i(8756).extend({template:"dashboard/modals/wizard/lp-templates",item:TTD.utils.tpl("dashboard/modals/wizard/lp-template"),searchValue:"",templatesCategory:"cloud",cloudTemplates:[],localTemplates:[],after_initialize(){this.$el.addClass(this.className),this.$searchClear=this.$(".lp-search-clear"),this.$search=this.$(".lp-search input"),this.$sidebarCategories=this.$("#structure-lp-templates-sidebar .lp-categories"),this.$templatesList=this.$("#structure-lp-templates-list"),this.$cloudCounter=this.$('.lp-category-filter[data-source="cloud"] .ttd-lp-counter'),this.$localCounter=this.$('.lp-category-filter[data-source="saved"] .ttd-lp-counter')},before_open(){this.setCategory("cloud"),this.searchValue="",this.$search.val("")},after_open(){const e=this.$(".modal-content").addClass("ttd-loading loader-absolute");this.toggleClass("w-narrow",!!this.model.getStepKey("narrowTemplate")),this.model.loadStepTemplates().then((t=>{this.processTemplates(_.sortBy(t,(e=>e.order))),this.createLazyLoader(),this.buildPreview(),this.markSelectedTemplate({id:this.model.getPreviewTemplateId()}),e.removeClass("ttd-loading loader-absolute")}))},processTemplates(e){this.localTemplates=[],this.cloudTemplates=[],e.forEach((e=>{e.id.includes("user-saved-template")?this.localTemplates.push(e):this.cloudTemplates.push(e)})),this.$cloudCounter.text(this.cloudTemplates.length),this.$localCounter.text(this.localTemplates.length)},onCategoryClick(e,t){this.setCategory(t.dataset.source),this.buildPreview()},setCategory(e){this.templatesCategory=e,this.$sidebarCategories.find(".active").removeClass("active"),this.$sidebarCategories.find(`[data-source="${e}"]`).addClass("active")},clearSearch(){this.searchValue="",this.buildPreview(),this.$searchClear.hide(),this.$search.val("")},doSearch:_.debounce((function(e,t){this.searchValue=t.value,this.buildPreview(),this.searchValue&&this.$searchClear.show()}),100),renderTemplates(e){let t="saved"===this.templatesCategory?this.localTemplates:this.cloudTemplates;return this.searchValue&&(t=t.filter((e=>e.post_title.toLowerCase().includes(this.searchValue.toLowerCase())))),_.each(t,(t=>{e+=this.item({model:this.model,item:t,itemClass:this.itemClass.replace(".","")})})),e}})},8756:function(e,t,i){var s;s=jQuery,e.exports=i(6577).extend({className:"ttd-wizard-templates-modal tcb-modal",template:"dashboard/modals/wizard/templates",item:TTD.utils.tpl("dashboard/modals/wizard/template"),itemClass:".ttd-wizard-template",hasPreview:!1,after_initialize:function(e){this.$el.addClass(this.className),this.$templatesList=this.$("#structure-templates-list")},after_open:function(){const e=this.$(".modal-content").addClass("ttd-loading loader-absolute");this.toggleClass("w-narrow",!!this.model.getStepKey("narrowTemplate")),this.model.loadStepTemplates().then((t=>{this.templates=_.sortBy(t,(e=>e.order)),this.createLazyLoader(),this.buildPreview(),this.markSelectedTemplate({id:this.model.getPreviewTemplateId()}),e.removeClass("ttd-loading loader-absolute")}))},createLazyLoader:function(){this.lazyLoader=new window.LazyLoad({container:this.$el[0],elements_selector:".tve-lazy-img",threshold:0,load_delay:0,callback_loaded:function(e){s(e).parent().removeClass("lazy-loading")}})},updateLazyLoader:function(){this.lazyLoader.update()},buildPreview:function(){let e="";e=TTD.utils.apply_filters("theme.wizard.build_preview_before",e,this),""===e&&(e=this.renderTemplates(e)),this.$templatesList.html(e);const t=this.$(".do-masonry"),i=parseInt(this.$templatesList.find(this.itemClass).width());this.$templatesList.find("img").each((function(){const e=this.dataset.ratio;e&&s(this).parent().css("height",i*parseFloat(e))})),t.hasClass("masonry")&&t.masonry("destroy"),t.masonry({gutter:30,columnWidth:this.itemClass,isAnimated:!0}),this.hasPreview=!0,setTimeout((()=>{TTD.utils.initScrollbar(this.$(".modal-content"),{onInit:function(e){e.removeClass("ttd-loading modal-content")}})}),100),this.updateLazyLoader(),TTD.utils.do_action("theme.wizard.build_preview",this)},renderTemplates(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return _.each(this.templates,(t=>{e+=this.item({model:this.model,item:t,itemClass:this.itemClass.replace(".","")})})),e},removeMasonry(){this.$(".do-masonry").removeClass("do-masonry")},markSelectedTemplate(e){this.$(this.itemClass).removeClass("active").filter(`[data-id="${e.id}"]`).addClass("active")},clickSelect:function(e,t){let i;return i="iframe"===this.model.getStepKey("previewMode")&&"cloud"===t.dataset.source?new Promise(((e,i)=>{const s=this.model.get("active");this.$(".modal-inner").addClass("ttd-loading"),TTD.objects.templatesStore.fetchInstance(s,t.dataset.id).done((i=>{const a=i.data||i;TTD.objects.templatesStore.updateTemplate(s,t.dataset.id,{id:a.id,source:"local"}),this.$(".modal-inner").removeClass("ttd-loading"),e(a)})).fail(i)})):new Promise((e=>{e({id:t.dataset.id,uid:t.dataset.uid||"",source:t.dataset.source})})),i.then((e=>{this.markSelectedTemplate(e),TTD.objects.wizardView.previewTemplate(e),setTimeout((()=>{this.close()})),TTD.utils.do_action("theme.wizard.select_template",this)})),!1}})},8766:function(e,t,i){(()=>{const t=i(2586).extend({template:"dashboard/no-skin",openModal:function(){TTD.objects.modals.new_skin.open({collection:TTD.objects.collections.skins})}});e.exports=new t({preventRender:!0})})()},3488:function(e,t,i){const s=i(2586);e.exports=s.extend({className:"ttd-preview-skin-item-container",template:"dashboard/preview/item",after_render:function(){this.listenTo(this.model,"change:preview_open",this.render)},changeSkinPreview:function(){const e=this.getNewSrc(TTD.Views.Preview.$iframe.attr("src"));TTD.Views.Preview.setPreviewModel(this.model.set("preview_open",1)),TTD.Views.Preview.render({url:e})},getNewSrc:function(e){const t=e.match(new RegExp("thrive_skin_preview=\\d+"));return e.replace(t[0],`thrive_skin_preview=${this.model.get("term_id")}`)}})},2574:function(e,t,i){const s=i(2586),a=i(3488);e.exports=s.extend({template:"dashboard/preview/list",after_render:function(){this.renderList(),TTD.utils.initScrollbar(this.$(".ttd-preview-skin-scroll"))},toggleListDropdown:function(e){e.currentTarget.classList.toggle("ttd-rotate"),this.$(".ttd-preview-skins-list").toggle()},renderList:function(){const e=this.$(".ttd-preview-skins-list").empty();TTD.objects.collections.skins.each((t=>{t.isActive()||e.append(new a({model:t}).$el)}))}})},2432:function(e,t,i){(t=>{const s=i(3488),a=i(2574);e.exports=i(2586).extend({template:"dashboard/preview/main",after_render:function(e){this.$iframe=this.$("iframe.ttd-site-preview"),this.loadIframe(e.url),this.renderPreviewInfo(),this.renderActiveSkin(),this.$skin_view=new a({el:this.$(".ttd-preview-skins-list-content")[0]}),this.$skinSidebar=this.$(".ttd-preview-skins-drop-sidebar"),TTD.utils.add_action("theme.document.keyup",(e=>{27===e.keyCode&&this.$skinSidebar.hasClass("ttd-anim-down")&&t(".ttd-theme-info").trigger("click")}))},loadIframe:function(e){this.$iframe.parent().addClass("ttd-loading"),this.$iframe.one("load",(()=>{this.$iframe[0].contentDocument.addEventListener("click",(()=>this.toggleSkinView(!1))),TTD.Elements.$body.removeClass("ttd-loading "),this.$iframe.parent().removeClass("ttd-loading"),this.show()})),this.$iframe.attr("src",e)},close:function(){TTD.Elements.$body.removeClass("ttd-in-preview"),this.hide()},toggleToolbar:function(){const e=this.$(".ttd-site-preview-container");e.hasClass("ttd-fullheight")?setTimeout((function(){e.removeClass("ttd-fullheight")}),500):e.addClass("ttd-fullheight"),this.$(".preview-bar").slideToggle(),this.$(".ttd-buttons-fixed").slideToggle(),this.$skinSidebar.removeClass("ttd-anim-down ttd-anim-up")},toggleSkinView:function(e){"boolean"!=typeof e&&(e=!this.isVisible()),e&&this.$skinSidebar.show(),this.$skinSidebar.toggleClass("ttd-anim-down",e).toggleClass("ttd-anim-up",!e),this.$(".ttd-theme-info").toggleClass("ttd-change-bg",e),this.$(".ttd-icon-blue").toggleClass("ttd-change-bg",e).toggleClass("ttd-change-bg-reverse",!e)},isVisible:function(){return this.$(".ttd-theme-info").hasClass("ttd-change-bg")},renderPreviewInfo:function(){this.$(".ttd-preview-info-container").html(TTD.utils.tpl("dashboard/preview/info")({name:this.model.get("name")}))},renderActiveSkin:function(){this.$activeSkinView=new s({model:TTD.objects.collections.skins.getActiveSkin()}),this.$(".ttd-preview-active-skin-container").append(this.$activeSkinView.$el)},setPreviewModel:function(e){this.model.set("preview_open",0),this.model=e},activateSkin:function(){this.model.makeActive()}})})(jQuery)},2194:function(e,t,i){var s;s=jQuery,e.exports=i(2586).extend({template:"dashboard/utils/select",before_initialize:function(e){"function"==typeof e.on_select&&(this.on_select=e.on_select.bind(this)),TTD.utils.add_action("theme.document.click",(e=>{0===this.$el.find(e.target).length&&this.close()})),this.model instanceof Backbone.Model||(this.model=new Backbone.Model(this.model)),this.listenTo(this.model,"change:list",this.render)},after_render:function(){const e=this.$("ul");_.each(this.model.get("list"),(t=>{e.append('<li class="click" data-fn="set_value" data-key="'+t.key+'">'+t.name+"</li>")})),void 0!==this.model.get("default")&&this.set_value(this.model.get("default"))},select_toggle:function(){this.is_open()||s(".ttd-drop-down").removeClass("active"),this.$el.toggleClass("active")},set_value:function(e){let t="";t="string"==typeof e||"number"==typeof e?e:e.currentTarget.dataset.key;const i=this.$("ul li").removeClass("active").filter('[data-key="'+t+'"]').addClass("active").text();this.$el.removeClass("active").find(".default-value").attr("data-key",t).html(i),"object"==typeof e&&this.on_select(t,i,e)},get_value:function(){let e=this.$(".default-value").attr("data-key");return"0"!==e&&"general"!==e||(e=""),e},open:function(){this.$el.addClass("active")},close:function(){this.$el.removeClass("active")},is_open:function(){return this.$el.hasClass("active")},on_select:function(){}})},1582:function(e,t,i){const s=i(7506);e.exports=i(2586).extend({template:"dashboard/sidebar/branding/favicon/main",after_initialize:function(){this.mediaLibrary=this.initMediaLibrary()},after_render:function(){const e=TTD.CONST.branding.favicon.id,t=this.$(".favicon-preview-button");t.addClass("ttd-loading tiny"),TTD.$.ajax({url:TTD.CONST.routes.images+"/"+e,type:"get",headers:{"X-WP-Nonce":TTD.CONST.nonce},data:{is_favicon:!0}}).done((e=>{const i=e||TTD.CONST.branding.favicon.placeholder;t.removeClass("ttd-loading tiny").css("background-image",`url(${i})`)})).fail((()=>{TTD.utils.message("Error retrieving the favicon.","error")}))},resetFavicon:function(){const e=TTD.CONST.branding.favicon.placeholder;this.saveFavicon(0,e,"Favicon removed successfully!")},saveFavicon:function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Favicon saved successfully!";TTD.utils.saveOptions(TTD.CONST.branding.favicon.db_option,e,(()=>{this.$(".favicon-preview-button").css("background-image",`url(${t})`),TTD.$('link[rel*="icon"]').prop("href",t),this.$(".ttd-favicon-reset").toggle(!!e),TTD.utils.message(i,"success")}))},shouldHideReset:function(){return 0===parseInt(TTD.CONST.branding.favicon.id)},openMedia:function(){this.mediaLibrary.open()},initMediaLibrary:function(){return new s({gallery_args:{title:"Add a Favicon"},callbacks:{on_select:e=>{["image/png","image/jpeg","image/gif","image/x-icon"].includes(e.mime)?this.saveFavicon(e.id,e.url):(TTD.utils.message("Accepted formats: png, jpg, gif, ico.","error"),this.instance.open())},on_open:()=>{void 0===this.mediaLibrary.get_instance()&&TTD.utils.message("Error while opening the media gallery!","error")}}})}})},2412:function(e){(t=>{let i={},s=!1,a="",n="";e.exports={get_spectrum_instance:function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o={preferredFormat:"hex",showInput:!0,alpha_input:!0,showAlpha:!0,allowAlpha:!0,cancelText:"CANCEL",chooseText:"APPLY",move:this.move,change:this.change,hide:this.hide},r=t("iframe");return a=e.overlay,r.length&&r.on("load",(()=>{n=r[0].contentDocument.children[0]})),s=Object.assign(s,o),i=e.input.spectrum(s),i},move:e=>{const s=i.spectrum("option","model");s.set("color",e),n&&n.setAttribute("style","--tcb-color-"+s.get("id")+":"+e),t(".sp-color-preview").css("background-color",e)},change:(e,t)=>{if(t&&t.from_input)return i.spectrum("option","move")(e);a.hide(),s=!0;const n=i.spectrum("option","model"),o=_.findIndex(TTD.CONST.branding.global_colors,(e=>e.id===n.get("id")));TTD.CONST.branding.global_colors[o].color=e.toRgbString();const r=Object.assign({},TTD.CONST.branding.global_colors[o]);delete r.active,TTD.utils.tcb_editor_ajax_request("global_colors",r,(()=>{TTD.utils.message("Color saved successfully!","success"),s=!1}))},hide:e=>{a.hide(),s||(i.spectrum("option","model").set("color",e),n&&n.setAttribute("style",""))}}})(jQuery)},598:function(e,t,i){(t=>{const s=i(2586);let a=!1;e.exports=s.extend({tagName:"div",className:"ttd-global-color-row",template:"dashboard/sidebar/branding/global-colors/item",before_initialize:function(e){this.colorPicker=e.colorPicker,this.optionsTooltip=e.optionsTooltip,this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"change:index",this.reposition)},reposition:function(e){const t=this.el.style.top?parseInt(this.el.style.top,10):0,i=e.get("index")-e._previousAttributes.index;this.el.style.top=t+i*this.$el.outerHeight(!0)+"px"},show_tooltip:function(e){this.$el.append(this.optionsTooltip.$el.css({top:25})),this.$el.toggleClass("tooltip-open")},open_color_picker:function(e){this.colorPicker.spectrum("option","model",this.model),this.colorPicker.spectrum("set",this.model.get("color")),t(".sp-color-preview").css("background-color",this.model.get("color")),this.colorPicker.spectrum("show");const i=t(e.target).closest(".ttd-global-color-row").offset();return this.colorPicker.spectrum("container").css({top:i.top+15}),!1},name_edit:function(){0===this.$el.find("input").length&&(this.$el.find(".ttd-global-color-text").html('<input class="keydown blur" type="text" data-fn="save_name" value="'+this.model.get("name")+'">').find("input").focus(),this.$el.addClass("name-edit-mode"))},save_name:function(e){if("keydown"===e.type&&(a=27===e.keyCode,13!==e.keyCode))return void(27===e.keyCode&&this.render());if(this.$el.removeClass("name-edit-mode"),a)return void(a=!1);const t=this.$el.find("input").val().trim();if(t===this.model.get("name"))return void this.render();if(!t||0===t.length)return;this.model.set({custom_name:1,name:t});const i=_.findIndex(TTD.CONST.branding.global_colors,(e=>e.id===this.model.get("id")));TTD.CONST.branding.global_colors[i]=Object.assign(TTD.CONST.branding.global_colors[i],{name:t,custom_name:1});const s=Object.assign({},TTD.CONST.branding.global_colors[i]);delete s.active,TTD.utils.tcb_editor_ajax_request("global_colors",s,(()=>{TTD.utils.message("Name saved successfully.")}))}})})(jQuery)},314:function(e,t,i){(t=>{const s=i(5396).extend({comparator:function(e,t){return e.get("name").toLowerCase().localeCompare(t.get("name").toLowerCase())}}),a=i(2586),n=i(598),o=a.extend({tagName:"div",className:"ttd-global-color-tooltip click",template:"dashboard/sidebar/branding/global-colors/tooltip",after_initialize:function(){this.$el.attr("data-fn","name_edit")}}),r=new s;e.exports=a.extend({template:"dashboard/sidebar/branding/global-colors/list",hide_tooltip:function(){this.$(".tooltip-open").removeClass("tooltip-open")},after_initialize:function(){const e=t("iframe");e.on("load",(()=>{e[0].contentDocument.addEventListener("click",(()=>this.hide_tooltip()))})),this.optionsTooltip=new o,TTD.utils.add_action("theme.document.click",(e=>{t(e.target).closest(".dots").length||this.hide_tooltip()}));const s={input:this.$("#ttd-color-picker"),overlay:this.$("#ttd-color-picker-overlay")};this.color_picker=i(2412).get_spectrum_instance(s,{appendTo:"#ttd-global-vars-container"}),this.$list=this.$("#ttd-global-colors-container"),this.listenTo(r,"reset",this.render_items),this.listenTo(r,"change:name",this.sort_and_index),TTD.utils.get_options("thrv_global_colours",(e=>{r.reset(e),TTD.CONST.branding.global_colors=e,this.$el.removeClass("ttd-loading small")}),"global_colors")},sort_and_index:function(){r.sort().each((e=>{e.set("index",r.indexOf(e))}))},render_items:function(){this.$list.empty(),this.sort_and_index(),r.each((e=>{this.$list.append(new n({model:e,colorPicker:this.color_picker,optionsTooltip:this.optionsTooltip}).$el)})),r.length||this.$list.text("You have no global colors on your templates.")},stop_click:e=>{e.stopPropagation()}})})(jQuery)},4821:function(e,t,i){(t=>{const s=i(7506);e.exports=i(2586).extend({template:"dashboard/sidebar/branding/logo/item",className:"logo-container",after_initialize:function(){this.mediaLibrary=this.initMediaLibrary(),this.listenTo(this.model,"change:attachment_id",((e,t)=>{t&&0!==parseInt(t)&&this.loaderTarget().addClass("ttd-loading small"),this.model.fetchSourceForAttachmentId()})),this.listenTo(this.model,"change:src",this.render)},loaderTarget(){return this.$el},after_render:function(){this.loaderTarget().addClass("ttd-loading small"),requestAnimationFrame((()=>{let e=this.model.get("src");e&&0!==e.length||(e=this.model.getPlaceholder());const t=new Image;t.src=e,t.onload=()=>{this.loaderTarget().removeClass("ttd-loading small"),this.$(".logo-button").css("background-image","url("+e+")")}}))},openMedia:function(){this.mediaLibrary.open()},initMediaLibrary:function(){return new s({gallery_args:{title:"Upload Images"},callbacks:{on_select:e=>{if(-1===["image/png","image/jpeg","image/gif"].indexOf(e.mime))return TTD.utils.message("Accepted formats: png, jpg, gif.","error"),void this.instance.open();this.saveLogo(e.id,e.url)},on_open:()=>{void 0===this.mediaLibrary.get_instance()&&TTD.utils.message("Error while opening the media gallery!","error")}}})},resetLogo:function(){this.saveLogo(0,this.model.getPlaceholder())},saveLogo:function(e,i){this.model.saveLogoAttachmentId(e,i,(()=>{this.$(".logo-button").css("background-image","url("+i+")"),this.$(".ttd-logo-reset").toggle(!!e),TTD.utils.reload_iframe(t("iframe")),TTD.utils.message("Logo saved successfully!","success")}))}})})(jQuery)},4853:function(e,t,i){const s=i(8707),a=i(4821);e.exports=i(2586).extend({template:"dashboard/sidebar/branding/logo/main",after_initialize:function(){this.$("#ttd-logo-preview-wrapper").append(new a({model:new s({type:"dark"})}).$el).append(new a({model:new s({type:"light"})}).$el)},saveLogoUrl:function(){const e=this.$("#logo-redirect-url").val();!e||TTD.utils.validate_url(e)?(TTD.CONST.branding.logo_data.redirect_url=e,TTD.utils.saveOptions(TTD.CONST.branding.logo_data.url_db_option,e,(()=>TTD.utils.message("Logo URL saved successfully!","success")))):TTD.utils.message("Please insert a valid URL.","error")}})},3333:function(e,t,i){(t=>{const s=i(4853),a=i(1582);e.exports=i(2586).extend({template:"dashboard/sidebar/branding/main",after_initialize:function(){const e=2===TTD.CONST.skin_palettes.version?i(4099):i(7292);this.skin_palettes=new e({el:this.$("#ttd-skin-palettes-wrapper")}),this.logo_settings=new s({el:this.$("#ttd-logo-wrapper")}),this.favicon_settings=new a({el:this.$("#ttd-favicon-wrapper")}),this.$(".ttd-sidebar-branding-block").hide()},toggle_dropdown:function(e){const i=t(e.target).closest(".ttd-sidebar-branding-header "),s=i.find(".dropdown-arrow");s.hasClass("ttd-flip")||(this.$(".ttd-sidebar-branding-block").hide(),this.$(".ttd-flip").removeClass("ttd-flip")),s.toggleClass("ttd-flip"),i.next().toggle()}})})(jQuery)},2745:function(e){function t(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function i(e){for(var i=1;i<arguments.length;i++){var a=null!=arguments[i]?arguments[i]:{};i%2?t(Object(a),!0).forEach((function(t){s(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}(t=>{let s={},a=!1,n={},o="";function r(){n.h=parseInt(TTD.utils.getCssVariableValue("--tcb-theme-main-master-h")),n.s=TTD.utils.getCssVariableValue("--tcb-theme-main-master-s"),n.l=TTD.utils.getCssVariableValue("--tcb-theme-main-master-l"),n.a=TTD.utils.getCssVariableValue("--tcb-theme-main-master-a")}e.exports={getSpectrumInstance:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a={preferredFormat:"hex",showInput:!0,alpha_input:!0,showAlpha:!0,allowAlpha:!0,cancelText:"CANCEL",chooseText:"APPLY",saveOnApply:!0,move:this.move,change:this.change,hide:this.hide,beforeShow:this.beforeShow};return o=e.overlay,s=e.input.spectrum(i(i({},a),t)),s},beforeShow:()=>r(),hide:()=>{a&&TTD.utils.changeMasterVariable(n)},move:_.debounce((e=>{const t=e.toHsl();TTD.utils.changeMasterVariable({h:parseInt(t.h),s:`${parseInt(100*t.s)}%`,l:`${parseInt(100*t.l)}%`,a:t.a}),a=!0}),0),change:(e,t)=>{if(t&&t.from_input)return void s.spectrum("move");if(!a)return;const n=e.toHsl(),o=TTD.CONST.skin_palettes.active_id,l={h:parseInt(n.h),s:TTD.utils.toFixed(n.s,2),l:TTD.utils.toFixed(n.l,2),a:TTD.utils.toFixed(n.a,2)};TTD.CONST.skin_palettes.palettes[o].modified_hsl=i(i({},TTD.CONST.skin_palettes.palettes[o].modified_hsl),l),r(),s.spectrum("option","saveOnApply")&&wp.apiRequest({url:TTD.CONST.routes.palette,type:"POST",data:{hsl:TTD.CONST.skin_palettes.palettes[o].modified_hsl}}).done((()=>TTD.utils.message("Color saved successfully!","success"))).fail((e=>{e.responseJSON&&TTD.utils.message(e.responseJSON.message,"error")})),TTD.utils.do_action("skin_color_updated",{hsl:l})}}})(jQuery)},7679:function(e,t,i){e.exports=i(2586).extend({template:"dashboard/sidebar/branding/skin-palettes/variable-item",before_initialize:function(e){this.colorPicker=e.colorPicker},render:function(){this.$el.html(TTD.utils.tpl(this.template)({model:this.model,extra_class:""}))},editSkinVariable:function(e){return this.colorPicker.spectrum("option","model",this.model),this.colorPicker.spectrum("set",tinycolor.fromRatio({h:parseInt(TTD.utils.getCssVariableValue("--tcb-theme-main-master-h")),s:parseInt(TTD.utils.getCssVariableValue("--tcb-theme-main-master-s")),l:parseInt(TTD.utils.getCssVariableValue("--tcb-theme-main-master-l")),a:TTD.utils.getCssVariableValue("--tcb-theme-main-master-a")})),this.colorPicker.spectrum("show"),this.colorPicker.spectrum("container").css({top:e.target.closest(".ttd-skin-color-row").offsetTop+50,left:e.target.closest(".ttd-skin-color-row").offsetLeft+35}),!1}})},4099:function(e,t,i){function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const n=i(5226),o=i(7679),r=i(314);e.exports=i(2586).extend({template:"dashboard/sidebar/branding/skin-palettes/list",after_initialize:function(e){this.$paletteContainer=this.$("#ttd-skin-palette-container"),this.$masterVarsContainer=this.$("#ttd-skin-master-vars-container"),this.$globalVarsContainer=this.$("#ttd-global-vars-container"),Array.isArray(TTD.CONST.skin_palettes.palettes)&&TTD.CONST.skin_palettes.palettes.length&&(this.colorPicker=i(2745).getSpectrumInstance({input:this.$("#ttd-skin-color-picker"),overlay:this.$("#ttd-skin-color-picker-overlay")},function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){a(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({appendTo:"#ttd-skin-palettes-wrapper"},e.spectrumOptions)),this.$paletteContainer.append(TTD.utils.tpl("dashboard/sidebar/branding/skin-palettes/palettes")()),this.buildPalettesSelect(),this.buildMasterVariable()),this.globalColors=new r({el:this.$globalVarsContainer})},buildPalettesSelect:function(){this.palettesSelect=new n({el:this.$("#ttd-skin-palettes-select")[0],list:this,on_select:_.bind(this.afterPaletteChanged,this),model:new Backbone.Model({list:this.getSelectList(),default:TTD.CONST.skin_palettes.active_id})})},buildMasterVariable:function(){const e=this.getPalette(TTD.CONST.skin_palettes.active_id),t=this.buildHslString(e.modified_hsl,!0);this.$masterVarsContainer.append(new o({model:new Backbone.Model({name:e.name,bg:`linear-gradient(${t}, ${t})`}),colorPicker:this.colorPicker}).$el)},getSelectList:function(){const e=[];return TTD.CONST.skin_palettes.palettes.forEach(((t,i)=>{const s=i===TTD.CONST.skin_palettes.active_id;e.push({key:i,name:this.getPalettePreview(t,s)})})),e},getPalettePreview:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return`<div class="skin-palette"><div class="skin-palette-item" style="background-color: ${this.buildHslString(e.modified_hsl,t)}"></div></div>`},buildHslString:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=t?"var(--tcb-theme-main-master-h)":e.h,s=t?"var(--tcb-theme-main-master-s)":100*e.s+"%",a=t?"var(--tcb-theme-main-master-l)":100*e.l+"%";return`hsl(${i},${s},${a})`},getPalette:function(e){return TTD.CONST.skin_palettes.palettes[e]},afterPaletteChanged:function(e){const t=TTD.CONST.skin_palettes.active_id;if((e=parseInt(e))===TTD.CONST.skin_palettes.active_id)return;const i=this.getPalette(e);this.changeMasterVariable(i.modified_hsl),TTD.CONST.skin_palettes.active_id=e,this.$("#ttd-skin-master-vars-container .ttd-skin-color-text").text(TTD.CONST.skin_palettes.palettes[e].name),this.palettesSelect.model.set("list",this.getSelectList()),this.palettesSelect.reflowList(),wp.apiRequest({url:`${TTD.CONST.routes.skins}/${TTD.CONST.skin_id}/change_palette`,type:"POST",data:{previous_id:t,active_id:e,version:2}}).fail((e=>{e.responseJSON&&TTD.utils.message(e.responseJSON.message,"error")}))},resetPalette:function(){if(confirm("Are you sure you want to reset this palette?")){const e=this.getPalette(TTD.CONST.skin_palettes.active_id);this.changeMasterVariable(e.original_hsl),TTD.CONST.skin_palettes.palettes[TTD.CONST.skin_palettes.active_id].modified_hsl=_.clone(e.original_hsl),wp.apiRequest({url:TTD.CONST.routes.palette,type:"POST",data:{hsl:e.original_hsl}})}},changeMasterVariable:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};TTD.utils.changeMasterVariable({h:parseInt(e.h),s:`${parseInt(100*e.s)}%`,l:`${parseInt(100*e.l)}%`,a:e.a})}})},5226:function(e,t,i){const s=i(2194);e.exports=s.extend({before_initialize:function(e){s.prototype.before_initialize.apply(this,arguments),this.list=e.list},reflowList:function(){const e=this.$("ul");e.empty(),this.model.get("list").forEach((t=>{e.append(`<li class="click" data-fn="set_value" data-key="${t.key}">${t.name}</li>`)}))},set_value:function(e){let t="";t="string"==typeof e||"number"==typeof e?e:e.currentTarget.dataset.key;const i=TTD.CONST.skin_palettes.palettes[TTD.CONST.skin_palettes.active_id],s=this.list.getPalettePreview(i,!0);this.$el.removeClass("active").find(".default-value").attr("data-key",t).html(s+i.name),"object"==typeof e&&this.on_select(t,s,e)}})},6790:function(e){function t(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function i(e){for(var i=1;i<arguments.length;i++){var a=null!=arguments[i]?arguments[i]:{};i%2?t(Object(a),!0).forEach((function(t){s(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}(t=>{let s={},a={},n="",o=!1,r=!1,l="";function c(){a={},n="",o=!1,r=!1}e.exports={getSpectrumInstance:function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r={preferredFormat:"hex",showInput:!0,alpha_input:!0,showAlpha:!0,allowAlpha:!0,cancelText:"CANCEL",chooseText:"APPLY",saveOnApply:!0,move:this.move,change:this.change,hide:this.hide,beforeShow:this.beforeShow};return l=e.overlay,s=e.input.spectrum(i(i({},r),a)),t(s[0]).on("hue.changed.spectrum",((e,t)=>{t<=1&&(t*=360),o=!0,n=parseInt(t)})),s},hide:()=>{if(!r)return;const e=s.spectrum("option","model");TTD.utils.changeCssVariableValue(e.get("css_variable"),e.get("variable").color),c()},beforeShow:function(){c();const e=s.spectrum("option","model"),t=e.get("variable"),i=tinycolor(TTD.utils.getCssVariableValue(e.get("css_variable")));a=i.toHsl(),n=a.h,t.hsl&&[a.h,a.s,a.l].includes(0)&&(n=parseInt(t.hsl.h),s.spectrum("set",tinycolor({h:t.hsl.h,l:t.hsl.l,s:t.hsl.s,a:a.a})))},move:_.debounce((e=>{const t=e.toHsl();TTD.utils.changeMasterVariable({h:parseInt(t.h),s:`${parseInt(100*t.s)}%`,l:`${parseInt(100*t.l)}%`}),r=!0}),0),change:(e,t)=>{if(t&&t.from_input)return void s.spectrum("move");if(!r)return;const a=e.toHsl(),n=e.toRgbString(),o=TTD.CONST.skin_palettes.active_id,l=s.spectrum("option","model").get("variable"),d={h:parseInt(a.h),s:TTD.utils.toFixed(a.s,2),l:TTD.utils.toFixed(a.l,2),id:parseInt(l.id)},h=TTD.CONST.skin_variables.colors.findIndex((e=>parseInt(e.id)===parseInt(l.id)));TTD.CONST.skin_variables.colors[h].hsl=d,TTD.CONST.skin_variables.colors[h].color=n,TTD.CONST.skin_palettes.modified[o].colors[h].color=n,TTD.CONST.skin_palettes.modified[o].colors[h].hsl=d,s.spectrum("option","saveOnApply")&&wp.apiRequest({url:`${TTD.CONST.routes.skins}/${TTD.CONST.skin_id}/skin_variables`,type:"POST",data:i(i({},d),{color:n})}).done((()=>TTD.utils.message("Color saved successfully!","success"))).fail((e=>{e.responseJSON&&TTD.utils.message(e.responseJSON.message,"error")})),TTD.utils.do_action("skin_color_updated",i(i({},d),{color:n})),c()}}})(jQuery)},2424:function(e,t,i){e.exports=i(2586).extend({template:"dashboard/sidebar/branding/skin-palettes/variable-item",before_initialize:function(e){this.colorPicker=e.colorPicker,this.extra_class=e.extra_class},render:function(){this.$el.html(TTD.utils.tpl(this.template)({model:this.model,extra_class:this.extra_class}))},editSkinVariable:function(e){const t=TTD.utils.getCssVariableValue(this.model.get("css_variable"));return this.colorPicker.spectrum("option","model",this.model),this.colorPicker.spectrum("set",t),this.colorPicker.spectrum("show"),this.colorPicker.spectrum("container").css({top:e.target.closest(".ttd-skin-color-row").offsetTop+50,left:e.target.closest(".ttd-skin-color-row").offsetLeft+35}),!1}})},7292:function(e,t,i){function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}(t=>{const n=i(8286),o=i(2424),r=i(314);e.exports=i(2586).extend({template:"dashboard/sidebar/branding/skin-palettes/list",variableItem:TTD.utils.tpl("dashboard/sidebar/branding/skin-palettes/variable-item"),palettesSelect:null,colorPicker:null,after_initialize:function(e){TTD.utils.add_action("message:ttb.skin_variables_changed",(e=>{const t=e.color_data,i=[];i.push({id:t.id,hsl:t.hsl,color:t.value}),_.each(t.linked_variables,((e,s)=>{i.push({id:s,hsl_parent_dependency:s.hsl_parent_dependency,color:t.value})})),this.updateSkinColors(i)})),TTD.utils.add_action("message:ttb.skin_palette_reset",(e=>{this.updateSkinColors(e.palette.colors),this.updateSkinGradients(e.palette.gradients),TTD.utils.changeMasterVariable({h:parseInt(e.masterColor.hsl.h),s:`${parseInt(100*e.masterColor.hsl.s)}%`,l:`${parseInt(100*e.masterColor.hsl.l)}%`})})),TTD.utils.add_action("message:ttb.skin_palette_changed",(e=>{this.afterPaletteChanged(e.data.active_id,!1)}));const t=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){a(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({appendTo:"#ttd-skin-palettes-wrapper"},e.spectrumOptions);this.skinVariables=this.getSkinVariables(TTD.CONST.skin_variables),this.skinPalettes=TTD.CONST.skin_palettes,this.$paletteContainer=this.$("#ttd-skin-palette-container"),this.$masterVarsContainer=this.$("#ttd-skin-master-vars-container"),this.$otherVarsContainer=this.$("#ttd-skin-other-vars-container"),this.$globalVarsContainer=this.$("#ttd-global-vars-container"),this.colorPicker=i(6790).getSpectrumInstance({input:this.$("#ttd-skin-color-picker"),overlay:this.$("#ttd-skin-color-picker-overlay")},t),this.skinPalettes&&this.skinPalettes.modified.length>0&&(this.activePaletteID=this.skinPalettes.active_id,this.$paletteContainer.append(TTD.utils.tpl("dashboard/sidebar/branding/skin-palettes/palettes")()),this.buildPalettesSelect()),this.skinVariables.master_variables.length&&_.each(this.skinVariables.master_variables,(e=>{this.outputVariables(this.$masterVarsContainer,e,!0)})),this.skinVariables.other_variables.length&&(this.$otherVarsContainer.append(TTD.utils.tpl("dashboard/sidebar/branding/skin-palettes/other-vars-header")()),_.each(this.skinVariables.other_variables,(e=>{this.outputVariables(this.$otherVarsContainer,e,!1)}))),this.globalColors=new r({el:this.$globalVarsContainer})},outputVariables:function(e,t,i){const s=new Backbone.Model({name:t.name,css_variable:t.css_variable,linked_variables:i?this.getLinkedVars(t.type,t.id):{},variable:t,bg:t.css});e.append(new o({model:s,extra_class:i?"":"other_var",colorPicker:this.colorPicker}).$el)},buildPalettesSelect:function(){this.palettesSelect=new n({el:this.$("#ttd-skin-palettes-select")[0],list:this,on_select:_.bind(this.afterPaletteChanged,this),model:new Backbone.Model({list:this.getSelectList(),default:this.activePaletteID})})},afterPaletteChanged:function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(parseInt(e)===this.activePaletteID)return;const i=this.activePaletteID,s=this.getMasterVariable(this.skinPalettes.modified[e].colors);return this.updateSkinColors(this.skinPalettes.modified[e].colors),TTD.utils.changeMasterVariable({h:parseInt(s.hsl.h),s:`${parseInt(100*s.hsl.s)}%`,l:`${parseInt(100*s.hsl.l)}%`}),this.activePaletteID=parseInt(e),this.palettesSelect.model.set("list",this.getSelectList()),this.palettesSelect.reflowList(),t&&wp.apiRequest({url:`${TTD.CONST.routes.skins}/${TTD.CONST.skin_id}/change_palette`,type:"POST",data:{previous_id:i,active_id:this.activePaletteID,master_id:s.id,version:1}}).done((()=>{TTD.CONST.skin_palettes.active_id=this.activePaletteID})).fail((e=>{e.responseJSON&&TTD.utils.message(e.responseJSON.message,"error")})),!1},getSelectList:function(){const e=[];return _.each(this.skinPalettes.modified,((t,i)=>{const s=i===this.activePaletteID;e.push({key:i,name:this.getPalettePreview(t,s)})})),e},getPalettePreview:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i='<div class="skin-palette">';return _.each(this.skinVariables.master_variables,(s=>{let a=e.colors.find((e=>parseInt(e.id)===parseInt(s.id))).color;t&&(a=`var(${TTD.CONST.skin_variables.colors_prefix}${s.id})`),i+=`<div class="skin-palette-item" style="background-color: ${a}"></div>`})),i+="</div>",i},updateSkinColors:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];_.each(e,(e=>{const t=TTD.CONST.skin_variables.colors.findIndex((t=>parseInt(t.id)===parseInt(e.id)));t>-1&&(TTD.CONST.skin_variables.colors[t].color=e.color,e.hsla_vars&&(TTD.CONST.skin_variables.colors[t].hsla_vars=e.hsla_vars,["h","s","l","a"].forEach((t=>{TTD.utils.changeCssVariableValue(`${TTD.CONST.skin_variables.colors_prefix}${e.id}-${t}`,e.hsla_vars[t])}))),TTD.CONST.skin_variables.colors[t].hsl_parent_dependency?TTD.CONST.skin_variables.colors[t].hsl_parent_dependency=_.extend({},e.hsl_parent_dependency):TTD.CONST.skin_variables.colors[t].hsl&&(TTD.CONST.skin_variables.colors[t].hsl=_.extend({},e.hsl))),TTD.utils.changeCssVariableValue(TTD.CONST.skin_variables.colors_prefix+e.id,e.hsla_code?e.hsla_code:e.color)}))},updateSkinGradients:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];_.each(e,(e=>{TTD.utils.changeCssVariableValue(TTD.CONST.skin_variables.gradients_prefix+e.id,e.gradient);const t=TTD.CONST.skin_variables.gradients.findIndex((t=>parseInt(t.id)===parseInt(e.id)));t>-1&&(TTD.CONST.skin_variables.gradients[t].gradient=e.gradient)}))},resetPalette:function(){if(confirm("Are you sure you want to reset this palette?")){const e=this.skinPalettes.original[this.activePaletteID],t=this.getMasterVariable(e.colors),i=this.getMasterVariableIndex(this.skinPalettes.modified[this.activePaletteID].colors);this.skinPalettes.modified[this.activePaletteID].colors[i].hsl=t.hsl,this.skinPalettes.modified[this.activePaletteID].colors[i].color=t.color,TTD.utils.changeMasterVariable({h:parseInt(t.hsl.h),s:`${parseInt(100*t.hsl.s)}%`,l:`${parseInt(100*t.hsl.l)}%`}),wp.apiRequest({url:`${TTD.CONST.routes.skins}/${TTD.CONST.skin_id}/reset_palette`,type:"POST",data:{active_id:this.activePaletteID}})}return!1},getLinkedVars:function(e,t){const i=TTD.CONST.skin_variables[`${e}_prefix`];let s={};return _.each(TTD.CONST.skin_variables[e],(e=>{_.isNumber(e.parent)&&e.parent===t&&(s[e.id]=i+e.id)})),s},getSkinVariables:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=["colors","gradients"],i={master_variables:[],other_variables:[]};return _.isEmpty(e)||_.each(t,(t=>{const s=e[`${t}_prefix`];_.each(e[t],(e=>{const a=parseInt(e.parent),n=`var(${s}${e.id})`,o="colors"===t?`linear-gradient(${n}, ${n})`:n;Object.assign(e,{type:t,css_variable:s+e.id,prefix:s,css:o}),-1===a?i.master_variables.push(e):_.isNaN(a)&&i.other_variables.push(e)}))})),i},getMasterVariable:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.find((e=>void 0!==e.hsl))},getMasterVariableIndex:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.findIndex((e=>void 0!==e.hsl))}})})(jQuery)},8286:function(e,t,i){const s=i(2194);e.exports=s.extend({before_initialize:function(e){s.prototype.before_initialize.apply(this,arguments),this.list=e.list},reflowList:function(){const e=this.$("ul");e.empty(),this.model.get("list").forEach((t=>{e.append(`<li class="click" data-fn="set_value" data-key="${t.key}">${t.name}</li>`)}))},set_value:function(e){let t="";t="string"==typeof e||"number"==typeof e?e:e.currentTarget.dataset.key;const i=this.list.getPalettePreview(this.list.skinPalettes.modified[this.list.activePaletteID],!0),s=this.list.skinPalettes.modified[this.list.activePaletteID].name;this.$el.removeClass("active").find(".default-value").attr("data-key",t).html(i+s),"object"==typeof e&&this.on_select(t,i,e)}})},7481:function(e,t,i){(t=>{const s=[{key:"lightspeed",label:ttd_admin_localize.t.nav.lightspeed,redirectLink:"admin.php?page=tve_lightspeed"},{key:"image",label:ttd_admin_localize.t.nav.image},{key:"cache",label:ttd_admin_localize.t.nav.cache},{key:"amp",label:ttd_admin_localize.t.nav.amp}];e.exports=i(2586).extend({template:"dashboard/sidebar/performance/main",navItemTemplate:"dashboard/sidebar/performance/nav-item",navItemLinkTemplate:"dashboard/sidebar/performance/nav-item-link",before_initialize(e){this.tab=e.tab?e.tab:""},after_render(){this.$navItems=this.$(".ttd-performance-nav"),s.forEach((e=>{this.$navItems.append(TTD.utils.tpl(e.redirectLink?this.navItemLinkTemplate:this.navItemTemplate)({item:e,active:this.tab}))}))},goTo(e,t){TTD.Router.navigate(`#performance/${t.dataset.tab}`,{trigger:!0})}})})(jQuery)},1871:function(e,t,i){jQuery,e.exports=i(2586).extend({template:"dashboard/sidebar/settings"})},9190:function(e,t,i){jQuery,e.exports=i(2586).extend({template:"dashboard/sidebar/templates",after_initialize:function(){this.listenTo(TTD.objects.models.filter,"theme_dash:filter",this.updateCounters)},after_render:function(){this.updateCounters()},filterByName:function(e){TTD.objects.models.filter.setOptions({name:e.currentTarget.value})},showByType:function(e){const t=e.currentTarget.getAttribute("data-type");TTD.Views.Dashboard.$main.$el.find(`.${t}-container`).toggle(e.currentTarget.checked)},updateCounters:function(){this.$(".single-templates .templates-counter").html(TTD.Views.Dashboard.$main.$singleTemplatesView.$el.children().length),this.$(".list-templates .templates-counter").html(TTD.Views.Dashboard.$main.$listTemplatesView.$el.children().length)}})},7540:function(e,t,i){e.exports=i(2586).extend({template:"dashboard/sidebar/typography"})},6551:function(e,t,i){var s;s=jQuery,e.exports=i(2586).extend({template:"dashboard/sidebar/wizard",stepTemplate:"dashboard/sidebar/wizard/steps",$dom:{},before_initialize(e){e.model=this.model=i(2625)},after_initialize(){this.$dom={},this.model.sections.forEach((e=>this.$dom[e.id]=this.$(`#wizard-section-${e.id}`))),this.renderSteps(),this.model.on("change",this.renderSteps.bind(this))},toggleCollapse(e,t){t.closest(".collapsible").classList.toggle("collapse"),s(t).next(".section-steps").slideToggle(200)},renderSteps(){let e=1;const t=TTD.utils.tpl(this.stepTemplate);this.model.sections.forEach((i=>{const s=this.model.getSteps(i.id);this.$dom[i.id].html(t({view:this,steps:s,baseIndex:e})),e+=s.length}))},stepClick(e){this.model.gotoStep(e.currentTarget.dataset.step),TTD.objects.wizardView.hideTooltip()},restart(){return this.model.isNew=()=>!1,s("body").addClass("ttd-loading"),this.model.destroy().then((()=>location.reload())),!1}})}},t={};function i(s){var a=t[s];if(void 0!==a)return a.exports;var n=t[s]={exports:{}};return e[s](n,n.exports,i),n.exports}!function(){_.templateSettings={evaluate:/<#([\s\S]+?)#>/g,interpolate:/<#=([\s\S]+?)#>/g,escape:/<#-([\s\S]+?)#>/g};const e=window.TTD={CONST:ttd_admin_localize,objects:{collections:{},modals:{},media:{},models:{}},Views:{}};var t;t=jQuery,e.DEBUG_MODE=!!parseInt(e.CONST.debug),e.$=t,e.FLAGS={},e.utils=i(9676),e.Elements={$body:t("body"),$document:t(document),$window:t(window)},e.objects.collections.templates=i(2546),e.Elements.$body.addClass("folded"),e.Router=new(Backbone.Router.extend({view:null,routes:{":page(/:tab)":"page"},initialize:function(){const s=i(8388);e.Views.Dashboard=new s({el:"#thrive-theme-dashboard"}),e.Elements.$notification=t("#ttd-notification-box")},page:function(t,i){e.Views.Dashboard.page(t,i)}})),e.Elements.$document.on("keyup",(t=>e.utils.do_action("theme.document.keyup",t))).on("click",(t=>e.utils.do_action("theme.document.click",t))).on("tvd_after_auth",((t,i)=>{e.CONST.nonce=i.rest_nonce})),t((()=>{Backbone.history.stop(),Backbone.history.start({hashchange:!0}),Backbone.history.fragment||e.Router.navigate(e.CONST.wizard.is_skipped||e.CONST.wizard.is_completed?"#start":"#wizard",{trigger:!0})})),setTimeout((()=>e.Elements.$body.removeClass("ttd-init")),1700),e.utils.add_action("theme.document.keyup",(t=>{27===t.keyCode&&(e.Elements.$body.removeClass("ttd-init"),e.Elements.$document.find(".ttd-loading").removeClass("ttd-loading"))})),e.Elements.$window.on("message",(t=>{const i=t.originalEvent;i.isTrusted&&i.data&&i.data.action&&e.utils.do_action(`message:${i.data.action}`,i.data)})),window.onbeforeunload=function(){t("body").addClass("ttd-loading")},i(1607)}()}();
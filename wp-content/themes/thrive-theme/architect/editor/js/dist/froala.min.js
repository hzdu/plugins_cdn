/*! For license information please see froala.min.js.LICENSE.txt */
!function(){var e,t,n={48478:function(e){e.exports=function(e){let t;function n(e){const t=e.selection.blocks();return t.length||"P"!==e.$oel[0].tagName||t.push(e.$oel),TVE.apply_filters("tve.froala.align.get_blocks",t)}e.FE.PLUGINS.align=function(o){return{apply:function(t){const r="P"!==o.$oel[0].tagName;o.selection.save(),o.html.wrap(r,!0,!1,!0),o.selection.restore();const i=n(o);for(let n=0;n<i.length;n++)e(i[n]).css("text-align",t).removeClass("fr-temp-div"),""===e(i[n]).attr("class")&&e(i[n]).removeAttr("class"),""===e(i[n]).attr("style")&&e(i[n]).removeAttr("style");o.selection.save(),o.html.unwrap(),o.selection.restore(),TVE.do_action("tve.froala.align.after_apply")},refresh:function(r){const i=r[0].dataset.cmd;if("align-left"===i){const r=n(o);r.length&&(t="align-"+o.helpers.getAlignment(e(r[0])))}r.tcbToggleClass("fr-active",t===i)}}},e.FE.DefineIcon("align-left",{NAME:"align-left-light"}),e.FE.DefineIcon("align-right",{NAME:"align-right-light"}),e.FE.DefineIcon("align-center",{NAME:"align-center-light"}),e.FE.DefineIcon("align-justify",{NAME:"align-justify-light"}),e.each({left:"Align Left",center:"Align Center",right:"Align Right",justify:"Align Justify"},(function(t,n){e.FE.RegisterCommand("align-"+t,function(e,t){return{className:"group-align",title:t,icon:"align-"+e,callback(){this.align.apply(e)},refresh(e){this.align.refresh(e)}}}(t,n))}))}},77466:function(e){e.exports=function(e){let t,n=e();function o(){const n=getSelection().getRangeAt(0);n&&e.contains(t.$oel[0],n.commonAncestorContainer)&&!t.$el.find(".fr-marker").length&&t.selection.save()}e.FE.PLUGINS.frameDropdown=function(r){return t=r,r.events.on("focus",(function(){t=this,this.frameDropdown.hideAll()})),{register:function(i){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=r.$tb.find(`[data-cmd="${i}"]`);if(!s.length||s.data("fr-dropdown-init"))return s&&s.data("fr-dropdown")||e();s.data("fr-dropdown-init",!0);const l=s.data("fr-dropdown").addClass("fr-controlled-dropdown");return n=TVE.inner_$(".fr-dropdown-holder"),n.length||(n=TVE.Editor_Page.editor.parent()),n=TVE.apply_filters("tcb.froala.dropdown_container",n,s,l),n.append(l),l.data("fr-btn",s).addClass("tcb-style-wrap"),l.on("mousedown",(function(e){return o(),"INPUT"===e.target.tagName&&(t.events.disableBlur(),e.stopPropagation(),!0)})).on("click",".fr-command",(function(e){if(this.dataset.confirm&&!confirm(this.dataset.confirm))return!1;let n=!0,o=!0;const r=a[this.dataset.cmd]&&a[this.dataset.cmd].call(this,t,l,e);return r&&!1===r.focus&&(o=!1),r&&!1===r.hide&&(n=!1),n&&l.frHide(),o&&(t.events.focus(),t.button.bulkRefresh()),!1})).on("toggle.froalaEditor",(function(e,n){if(t.popups.hideAll(),"false"===l.attr("aria-hidden")){l.trigger("show.tcb");const e=TVE.main.$frame.offset();e.top+=parseInt(TVE.main.$frame.css("border-top-width")||0),e.left+=parseInt(TVE.main.$frame.css("border-left-width")||0);const t=n.offset();l.css({left:t.left-e.left,top:Math.max(0,t.top-e.top+n.outerHeight())})}})).on("focus","input",(()=>{o()})),t.events.on("buttons.refresh",(()=>l.frHide())),l},hideAll:function(){n.children(".fr-controlled-dropdown").frHide()}}},e.fn.frHide=function(){return this.each((function(){const t=e(this).data("fr-btn");this.setAttribute("aria-hidden","true"),t&&t.length&&t.tcbRemoveClass("fr-active").attr("aria-expanded","false")}))}}},92039:function(e){e.exports={ATTRIBUTE_IDENTIFIER:"data-attr-",OPTION_IDENTIFIER:"data-option-",DEFAULT_TITLE:"Dynamic text",SHORTCODE_POPUP:"shortcode.popup",SHORTCODE_CLASS:"thrive-inline-shortcode",SHORTCODE_CONTENT_CLASS:"thrive-shortcode-content",SHORTCODE_LINK_IDENTIFIER:"4",SHORTCODE_TEXT_IDENTIFIER:"1",CUSTOM_FIELDS:{POST_LIST_KEY:"tcb_post_custom_field",POST_LIST_EXTRA_KEY:"CFP",GLOBAL_KEY:"thrive_custom_fields_shortcode_data",GLOBAL_EXTRA_KEY:"CFG"},SHORTCODE_GROUP_ORDER_MAP:["Post","Taxonomies","Content","WooCommerce","Custom fields","Global fields","User data","Request data","Source","Time & date","Post list pagination"]}},6875:function(e,t,n){const o=n(39735);e.exports=function(){TVE.add_action("tcb.edit_mode.enter",(e=>{const t=o.addCustomFieldsShortcodes(TVE.CONST.inline_shortcodes);TVE.CONST.inline_shortcodes=TVE.apply_filters("tcb.filter_inline_shortcodes.enter",t,e)})),TVE.add_action("tcb.edit_mode.exit",(e=>{TVE.CONST.inline_shortcodes=TVE.apply_filters("tcb.filter_inline_shortcodes.exit",TVE.CONST.inline_shortcodes,e)})),TVE.add_action("tcb.element.before_focus",(()=>{TVE.$CURRENT_SHORTCODE=null})),TVE.add_filter("tcb_is_protected_text",(e=>(TVE.$CURRENT_SHORTCODE&&(e=!1),e))),TVE.add_action("tcb.froala.dynamic_link_select_change",((e,t)=>{const n=t.target,o=n.options[n.selectedIndex].dataset.shortcodeId;n.options.length&&("mail"===o?(e.find(".tcb-email-dynamic-link-info").show(),e.find(".tcb-phone-dynamic-link-info").hide()):"phone"===o||"alt_phone"===o?(e.find(".tcb-phone-dynamic-link-info").show(),e.find(".tcb-email-dynamic-link-info").hide()):(e.find(".tcb-phone-dynamic-link-info").hide(),e.find(".tcb-email-dynamic-link-info").hide()))}))}},93306:function(e,t,n){e.exports=function(e){if(0===Object.keys(TVE.CONST.inline_shortcodes).length)return;const t=n(92039),o={};t.SHORTCODE_GROUP_ORDER_MAP=TVE.apply_filters("tcb.inline_shortcodes.shortcode_group",t.SHORTCODE_GROUP_ORDER_MAP),t.SHORTCODE_GROUP_ORDER_MAP.forEach((e=>{TVE.CONST.inline_shortcodes[e]&&(o[e]=TVE.CONST.inline_shortcodes[e])})),TVE.CONST.inline_shortcodes=o,n(6875)(),TVE.inlineShortcodeFn=n(20177),e.FE.PLUGINS.shortcodePopup=n(83328),e.FroalaEditor.DefineIcon("shortcode",{NAME:"database-regular"}),e.FroalaEditor.RegisterCommand("shortcode",{className:"fr-has-caret",undo:!0,focus:!0,popup:!0,refreshAfterCallback:!1,forcedRefresh:!0,callback(){const e=this.$tb.find(".fr-btn[data-cmd=shortcode]"),n=this.popups.isVisible(t.SHORTCODE_POPUP);n?this.popups.hide(t.SHORTCODE_POPUP):this.shortcodePopup.showPopup(),e.toggleClass("fr-popup-active",!n).toggleClass("fr-active",!!TVE.$CURRENT_SHORTCODE)},refresh(e){this.shortcodePopup.refreshToolbarButton(e)},plugin:"shortcodePopup"}),e.extend(e.FroalaEditor.POPUP_TEMPLATES,{[t.SHORTCODE_POPUP]:"[_BUTTONS_][_CUSTOM_LAYER_]"}),e.FE.DefineIcon("shortcodeInsert",{NAME:"arrow-left-light"}),e.FE.RegisterCommand("shortcodeInsert",{focus:!1,refreshAfterCallback:!0,callback(){this.shortcodePopup.insertCallback()},refresh(e){const t=this.shortcodePopup.getShortcode(),n=t&&t.length>0;e.toggle(n).text(this.language.translate(n?"Update":"Insert"))}}),e.FE.DefineIcon("shortcodeRemove",{NAME:"times-light"}),e.FE.RegisterCommand("shortcodeRemove",{title:"Remove",undo:!0,focus:!1,refreshAfterCallback:!0,callback(){this.shortcodePopup.removeShortcode(),this.link.remove()},refresh(e){e.toggleClass("fr-hidden",!this.shortcodePopup.getShortcode())}})}},83328:function(e,t,n){const o=n(92039),r=n(39735),i=n(20177);e.exports=function(e){return{_init(){TVE.$CURRENT_SHORTCODE=null,e.events.on("mouseup",this._mouseUp.bind(this)),e.events.on("keydown",this._keypress.bind(this))},_mouseUp(t){const n=TVE.inner_$(t.target),r=n.closest("."+o.SHORTCODE_CLASS),i=e.$tb.find(".fr-btn[data-cmd=shortcode]");r.length?(TVE.$CURRENT_SHORTCODE=r,TVE.froala.selectNode(r,!0)):n.hasClass("tve-element-mask")||(TVE.$CURRENT_SHORTCODE=null),this.refreshToolbarButton(i)},_keypress(e){if(TVE.$CURRENT_SHORTCODE){if(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),46!==e.which&&8!==e.which||this.removeShortcode(),TVE.froala.editor.keys.isArrow(e.which)){TVE.froala.editor.selection.clear();const t=document.createRange(),n=window.getSelection(),o=e.which<39?"Before":"After";t.selectNodeContents(TVE.$CURRENT_SHORTCODE[0].parentNode),t[`setStart${o}`](TVE.$CURRENT_SHORTCODE[0]),t[`setEnd${o}`](TVE.$CURRENT_SHORTCODE[0]),n.removeAllRanges(),n.addRange(t),TVE.$CURRENT_SHORTCODE=null}return!1}},getPopup:()=>e.popups.get(o.SHORTCODE_POPUP),getShortcode:()=>TVE.$CURRENT_SHORTCODE,showPopup(){const t=this.initPopup();if(e.popups.setContainer(o.SHORTCODE_POPUP,e.$sc),e.popups.isVisible(o.SHORTCODE_POPUP))return;t.hasClass("fr-active")||(t.addClass("fr-right"),e.popups.refresh(o.SHORTCODE_POPUP),e.popups.setContainer(o.SHORTCODE_POPUP,e.$tb)),e.$shortcodeCategoryList=t.find("#fr-dropdown-categories-list"),e.$shortcodeCategoryList.off("change").on("change",(e=>this.categorySelectedCallback(e.target.value))),TVE.do_action("tcb.froala.before_shortcode_popup",t,TVE.ActiveElement,TVE.CONST.inline_shortcodes),TVE.$CURRENT_SHORTCODE&&this.displayExistingShortcode();const n=e.$tb.find(".fr-btn[data-cmd=shortcode]"),r=n.offset(),i=n.outerHeight();e.popups.show(o.SHORTCODE_POPUP,r.left+n.outerWidth()/2,r.top+i,i)},initPopup(){let t=this.getPopup();return t&&t.remove(),t=e.popups.create(o.SHORTCODE_POPUP,{buttons:"",custom_layer:TVE.tpl("inline/shortcodes/main")({utils:r,shortcodeCategories:TVE.apply_filters("tcb.filter_inline_shortcodes.categories",Object.keys(TVE.CONST.inline_shortcodes))})}),t},hidePopup(){e.popups.hide(o.SHORTCODE_POPUP),e.$tb.find(".fr-command[data-cmd=shortcode]").removeClass("fr-popup-active")},categorySelectedCallback(t){e.$tb.find('button[data-cmd="shortcodeInsert"]').hide(),e.$tb.find(".tve-custom-input-container").html(""),e.$tb.find(".tve-options-list-container").html(TVE.apply_filters("tve.shortcode.options.html",TVE.tpl("inline/shortcodes/options")({shortcodes:TVE.CONST.inline_shortcodes[t],utils:r}),t)),TVE.do_action("tcb.froala.after_shortcode_category_select",t,e.$tb),e.$shortcodeList=this.getPopup().find("#fr-dropdown-shortcode-list"),"Custom fields"===t?this.selectCustomField():e.$shortcodeList.show().off("change").on("change",(()=>{const t=e.$shortcodeList.find("option:selected");this.shortcodeSelectedCallback({key:t.val(),extra_key:t.attr("data-extra-key")})}))},shortcodeSelectedCallback(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=!1;e.$tb.find('button[data-cmd="shortcodeInsert"]').show(),TVE._.isEmpty(n)&&(o=!0,n=i.getShortcodeByValue(t).config),n&&e.$tb.find(".tve-custom-input-container").html(TVE.tpl("inline/shortcodes/popup-custom-input")({shortcode:n,selectedData:t,isNew:o,utils:r})),n&&n.extra_param&&TVE._.each(n.input,((e,t)=>{const n=e.extra_options;n&&this.initExtraOptionsForShortcode(t,n)})),TVE.do_action("tcb.froala.after_shortcode_select",e.$tb,{selectedData:t,cfg:n})},displayExistingShortcode(){const t=TVE.apply_filters("tcb.froala.display_existing_shortcode_data",i.getConfigFromPage(TVE.$CURRENT_SHORTCODE)),n=i.getShortcodeByValue(t);if(TVE.froala.selectNode(TVE.$CURRENT_SHORTCODE),e.$shortcodeCategoryList.val(n.groupKey).trigger("change"),t.extra_key){const n=e.$shortcodeList.find('[data-extra-key="'+t.extra_key+'"]');if(!n||"none"===n.css("display"))return;n.prop("selected",!0)}else e.$shortcodeList.val(t.key);this.shortcodeSelectedCallback(t,n.config)},insertCallback(){const t=e.$shortcodeList.find("option:selected"),n=e.$tb.find(".fr-custom-input"),r=TVE.apply_filters("tcb.inline_shortcodes.insert",i.getShortcodeFromPopup(t,n));let a,s=i.getHtmlToInsert(r);const l=jQuery(s),d=e.$oel.parents("div[data-link-wrap]");if(d.parent("a[href]").length&&l.find("a[href]").length){const e=TVE.t.warning_link_insert_inside_link.split("##split##");return TVE.page_message(e[0]+'<strong>"'+TVE.get_element_name(d)+'"</strong>'+e[1],!0,1e4),!1}TVE.$CURRENT_SHORTCODE?(TVE.$CURRENT_SHORTCODE.html(s),a=TVE.$CURRENT_SHORTCODE):(s=`<span class="tve-inserted ${r.class}" contenteditable="false">${s}</span>`,e.selection.save(),e.html.wrap(!0,!0,!0,!0),e.selection.restore(),e.html.insert(s),e.selection.save(),e.html.unwrap(),e.selection.restore(),a=TVE.ActiveElement.find(".tve-inserted").removeClass("tve-inserted")),this.hidePopup(),TVE.apply_filters("tcb.inline_shortcodes.afterInsert",a,r),TVE.inner.window.TCB_Front.replaceDynamicContent();const c=a.find("a");if(c.length)TVE.froala.force_focus(c,!0);else if(TVE.froala.editor.$oel.is("a")){const e=a.parents(TVE.TEXT_ALL).first();TVE.froala.force_focus(e,!1).then((function(){setTimeout((()=>{a.find(`.${o.SHORTCODE_CONTENT_CLASS}`).trigger("mouseup")}),200)}))}else setTimeout((()=>{TVE.froala.editor.events.focus(),a.trigger("mouseup")}))},removeShortcode(){if(TVE.$CURRENT_SHORTCODE){const t=TVE.$CURRENT_SHORTCODE.parent();TVE.$CURRENT_SHORTCODE.remove(),TVE.$CURRENT_SHORTCODE=null,t.text().trim().length||t.text(TVE.main.$('#tve-static-elements [data-elem="text"]').text().trim()),e.$tb.find(".fr-btn[data-cmd=shortcode]").removeClass("fr-active"),this.hidePopup()}},initExtraOptionsForShortcode(t,n){const o=e.$tb.find("#fr-dropdown-list-"+t);o.length&&(this.renderExtraOptions(n,o.find("option:selected").attr("data-type")),o.off("change").on("change",(()=>this.renderExtraOptions(n,o.find("option:selected").attr("data-type")))))},renderExtraOptions(t,n){const o=e.$tb.find(".tve-custom-input-extra-options").html("");TVE._.each(t,((e,t)=>{if(e.available_for.includes(parseInt(n))){let n,a=0;if(this.getShortcode()&&(n=i.getConfigFromPage(this.getShortcode())),n&&n.configOptions){const e=n.configOptions.find((e=>e.key===t));void 0!==e&&(a=parseInt(e.value))}o.append(TVE.tpl("inline/shortcodes/popup-custom-input-extra")({input:e,key:t,selectedValue:a,utils:r}))}}))},refreshToolbarButton(t){if(TVE.apply_filters("tcb.inline_shortcodes.is_available",!0,TVE.ActiveElement)){const n=!!this.getShortcode();t.tcbToggleClass("fr-popup-active",e.popups.isVisible(o.SHORTCODE_POPUP)).tcbToggleClass("fr-active",n).tcbShow("inline-flex"),TVE.Components.text.$(".tve-advanced-controls").tcbToggleClass("control-hide",n)}else t.tcbHide()},selectCustomField(){let t,n;TVE.PostList.utils.isInPostListEditMode()?(t=o.CUSTOM_FIELDS.POST_LIST_KEY,n=o.CUSTOM_FIELDS.POST_LIST_EXTRA_KEY):(t=o.CUSTOM_FIELDS.GLOBAL_KEY,n=o.CUSTOM_FIELDS.GLOBAL_EXTRA_KEY),this.shortcodeSelectedCallback({key:t,extra_key:n}),e.$shortcodeList.val(t).hide()},openInstructionsLightbox(e,t){TVE.modal_open("instructions",{element:TVE.ActiveElement,target:t})}}}},20177:function(e,t,n){function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const a=n(92039);e.exports={getDefaultConfig:()=>({key:"",extra_key:"",name:"",shortcodeName:"",class:a.SHORTCODE_CLASS,content_class:a.SHORTCODE_CONTENT_CLASS,configOptions:[],options:[]}),getShortcodeFromPopup(e,t){const n=e.attr("data-name"),o=r(r({},this.getDefaultConfig()),{},{key:e.val(),extra_key:e.attr("data-extra-key")||"",name:n,shortcodeName:n});return t.each(((e,t)=>{let n=t.value;"checkbox"!==t.type||t.checked||(n=0),o.configOptions.push({key:t.name,value:n})})),o},getConfigFromPage(e){let t=e.find(".thrive-shortcode-content");t=TVE.apply_filters("tve.read.shortcode",t);const n=r(r({},this.getDefaultConfig()),{},{key:t.attr("data-shortcode"),extra_key:t.attr("data-extra_key"),name:t[0].innerHTML,shortcodeName:t.attr("data-shortcode-name")});return TVE._.each(t[0].attributes,(e=>{const t=e.name;t.startsWith(a.ATTRIBUTE_IDENTIFIER)?n.configOptions.push({key:t.replace(a.ATTRIBUTE_IDENTIFIER,""),value:e.value}):t.startsWith(a.OPTION_IDENTIFIER)&&n.options.push({key:t.replace(a.OPTION_IDENTIFIER,""),value:e.value})})),n},getShortcodeByValue(e){let t={};return TVE._.some(TVE.CONST.inline_shortcodes,((n,o)=>void 0!==n.find((n=>{let r=n.value===e.key;return n.extra_param&&(r=r&&n.extra_param===e.extra_key),r&&(t={config:n,groupKey:o}),r})))),TVE.apply_filters("tcb.inline_shortcodes.get_shortcode_by_value",t)},outputInsertShortcodeContent:(e,t)=>TVE.apply_filters("tcb.inline_shortcodes.shortcode_value",e,t),getHtmlToInsert(e){const t=[];return e.configOptions.forEach((e=>{t.push(`${a.ATTRIBUTE_IDENTIFIER}${e.key}="${e.value}"`)})),e.options.forEach((e=>{t.push(`${a.OPTION_IDENTIFIER}${e.key}="${e.value}"`)})),TVE.tpl("inline/shortcodes/html-to-insert")({attributes:t,shortcodeData:e,shortcodeValue:this.outputInsertShortcodeContent(e.name,e)})},isLink(e){const t=this.getShortcodeByValue(e);let n;if(t)try{n=t.config.input.id.value_type[e.configOptions[0].value]}catch(e){n=a.SHORTCODE_TEXT_IDENTIFIER}return n===a.SHORTCODE_LINK_IDENTIFIER}}},39735:function(e){e.exports={addCustomFieldsShortcodes(e){const t=TVE._.findIndex(e["Custom fields"],(e=>"Custom Fields Postlist"===e.name));if(void 0!==e["Custom fields"][t]){const n={},o={},r={};TVE._.each(TVE.PostList.posts,(e=>{e.tcb_post_custom_fields_data.forEach((e=>{o[e.key]=e.key,r[e.key]="0",n[e.key]=null===e.label?e.key:e.label}))})),Object.assign(e["Custom fields"][t].input.id,{value:n,real_value:o,value_type:r})}return e},updatePostTypeLabel:e=>{let t=TVE.CONST.post_type;if(TVE.PostList.utils.isInPostListEditMode()){const e=TVE.PostList.utils.readQueryFromElement(TVE.main.EditMode.element()[0]);if(e.post_type){const n=e.post_type||["post"];t=Array.isArray(n)?n[0]:n.split(",")[0]}}const n=TVE.CONST.post_types[t]?TVE.CONST.post_types[t].label:TVE.ucFirst(t);return e.replace("Post",n)}}},37323:function(e){e.exports=function(e){function t(){return TVE.tpl("util/link-styles")({linkStyles:TVE.CONST.global_styles.link})}e.FE.PLUGINS.linkStyles=function(e){const n=e.frameDropdown.register("linkStyles",{linkStyleApply(e){e.styles.apply(this.dataset.style),o()},linkStyleUpdate(e){e.styles.update(this.dataset.style),o()},linkStyleAddForm:()=>(r("add"),{hide:!1,focus:!1}),linkStyleCancelAdd:()=>(r("normal"),{hide:!1}),linkStyleAdd(e,t){const n=t.find(".fr-link-style-name");return n.val().trim()?(e.styles.add(n.val()),o(),{hide:!1}):(n.addClass("fr-error").trigger("focus"),{hide:!1,focus:!1})},linkStyleDelete(e){return e.styles.remove(this.dataset.style),o(),{hide:!1}},linkStyleDefaultReset(e){e.styles.removeDefault("link",!0),o()}});function o(){n.find(".fr-dropdown-content").html(t())}function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"normal";if(n.find(".fr-state").hide().filter(`[data-state="${e}"]`).show(),"add"===e){n.find(".fr-link-style-name").val("").trigger("focus");const e=n.find(".fr-link-style-preview > a").attr("style","")[0],t=getComputedStyle(TVE.ActiveElement[0]);Array.from(t).filter((e=>!e.includes("outline"))).forEach((n=>e.style.setProperty(n,t.getPropertyValue(n),t.getPropertyPriority(n))))}}return n.on("show",(()=>r())).on("keyup",(e=>(13===e.which?n.find("[data-cmd=linkStyleAdd]").trigger("click"):27===e.which&&n.find("[data-cmd=linkStyleCancelAdd]").trigger("click"),e.currentTarget.classList.remove("fr-error"),!1))),{}},e.FE.RegisterCommand("linkStyles",{title:"Text Link",className:"fr-has-caret btn-thin hide-tablet hide-mobile",dropdownClass:"fr-multilevel",icon:!1,undo:!0,focus:!0,popup:!0,refreshAfterCallback:!1,forcedRefresh:!0,displaySelection:!0,type:"dropdown",html:t,defaultSelection:()=>"Text Link",displaySelectionWidth:130,refresh(e){e.children("span").text(this.styles.label())},plugin:"linkStyles"})}},88454:function(e,t,n){const o=n(56149);e.exports=function(e){let t=!1,n=!1,r=!1,i=!1;const a="Content";function s(e){const t={thrive_lightbox:"TCB Lightbox",thrive_leads_2_step:"ThriveBox"};return t[e]?t[e]:e}function l(e,t){let n,o=null;e.autocomplete({appendTo:e.parent(),source(e,t){if(o===e.term)return void t(n);if(/^https?:/.test(e.term)||-1!==e.term.indexOf("."))return t();const r=TVE.apply_filters("link_search_lightbox",1);TVE.ajax("post_search","post",{q:e.term,search_lightbox:r}).done((function(e){n=e,t(e)})),o=e.term},select:(n,o)=>(t(o.item),e.autocomplete("destroy"),l(e,t),!1),open(){e.autocomplete("widget").css({width:"100%","max-height":"170px"})},minLength:2,delay:300,position:{my:"left top+2"}}),e.data("ui-autocomplete")._renderItem=function(e,t){return jQuery('<li role="option" id="mce-tcb-autocomplete-'+t.id+'">').append('<div class="post-name">'+t.label+'</div><span class="tcb-post-type">'+(t.post_type_name?t.post_type_name:t.type)+"</span>").appendTo(e)},e.autocomplete("widget").addClass("tcb-suggest tcb-absolute")}e.extend(e.FE.POPUP_TEMPLATES,{"tcbLink.edit":"[_BUTTONS_]","tcbLink.insert":"[_BUTTONS_][_INPUT_LAYER_]"}),e.extend(e.FE.DEFAULTS,{linkInsertButtons:["searchSettings"],linkAttributes:{},linkAutoPrefix:"http://",linkText:!0}),e.FE.PLUGINS.link=function(d){function c(){if("A"===d.el.tagName)return d.el;if(d.$wp){let t=d.selection.ranges(0).commonAncestorContainer;if(t&&(t.contains&&t.contains(d.el)||!d.el.contains(t)||d.el===t)&&(t=null),t&&"A"===t.tagName)return t;let n=d.selection.element(),o=d.selection.endElement();return"A"===n.tagName||d.node.isElement(n)||(n=e(n).parentsUntil(d.$el,"a:first").get(0)),"A"===o.tagName||d.node.isElement(o)||(o=e(o).parentsUntil(d.$el,"a:first").get(0)),o&&(o.contains&&o.contains(d.el)||!d.el.contains(o)||d.el===o)&&(o=null),n&&(n.contains&&n.contains(d.el)||!d.el.contains(n)||d.el===n)&&(n=null),o&&o===n&&"A"===o.tagName?n:null}}function f(){const e=[];let t,n,o,r;if(d.win.getSelection){const i=d.win.getSelection();if(i.getRangeAt&&i.rangeCount){r=d.doc.createRange();for(let a=0;a<i.rangeCount;++a)if(t=i.getRangeAt(a),n=t.commonAncestorContainer,n&&1!==n.nodeType&&(n=n.parentNode),n&&"a"===n.nodeName.toLowerCase())e.push(n);else{o=n.getElementsByTagName("a");for(let n=0;n<o.length;++n)r.selectNodeContents(o[n]),r.compareBoundaryPoints(t.END_TO_START,t)<1&&r.compareBoundaryPoints(t.START_TO_END,t)>-1&&e.push(o[n])}}}else if(d.doc.selection&&"Control"!==d.doc.selection.type)if(t=d.doc.selection.createRange(),n=t.parentElement(),"a"===n.nodeName.toLowerCase())e.push(n);else{o=n.getElementsByTagName("a"),r=d.doc.body.createTextRange();for(let n=0;n<o.length;++n)r.moveToElementText(o[n]),r.compareEndPoints("StartToEnd",t)>-1&&r.compareEndPoints("EndToStart",t)<1&&e.push(o[n])}return e}function p(){}function u(){const i=d.popups.get("tcbLink.insert");r=!1;const a=e(c());if(a&&a.length){const e=a[0],t=i.find('input.fr-link-attr[type="text"]'),n=i.find('input.fr-link-attr[type="checkbox"]'),o=i.find('input.fr-jump-attr[name="jump-animation"]');let l,c;d.opts.linkEventActions&&d.opts.linkEventActions.updateFromLink(a,i)||e.classList.contains("tve_evt_manager_listen")&&(l=TVE.EventManager.get(e,"click"),l&&(r={is_popup:!0,title:s(l.a),event_action:l.a,id:l.config.l_id||l.config.id},c="#"+r.title)),t.each((function(){const t=this.getAttribute("name");let n;t&&(n="href"===t&&r?c:"href"===t?e.getAttribute("data-tcb-href")||e.getAttribute("href"):e.getAttribute(t),this.value=n)})),n.prop("checked",!1).each((function(){const t=e.getAttribute(this.getAttribute("name"));this.checked=t&&-1!==t.indexOf(this.getAttribute("data-checked"))}));const f=e.getAttribute("jump-animation");o.prop("checked",f),TVE.jumplinks.isJumplink(a)||h(i,"static"),i.find('input.fr-link-attr[type="text"][name="text"]').val(a.text())}else i.find('input.fr-link-attr[type="text"]').val(""),i.find('input.fr-link-attr[type="checkbox"]').prop("checked",!1),i.find('input.fr-jump-attr[type="checkbox"]').prop("checked",!1),i.find('input.fr-link-attr[type="text"][name="text"]').val(d.selection.text()),(o.get(o.keys.link_new_tab)||d.$oel.closest(".tcb-lg-consent"))&&i.find('input.fr-link-attr[name="target"]').prop("checked",!0),o.get(o.keys.link_no_follow)&&i.find('.fr-link-attr[name="rel"]').prop("checked",!0),o.get(o.keys.jump_animation)&&i.find('input.fr-jump-attr[name="jump-animation"]').prop("checked",!0),d.opts.linkEventActions&&d.opts.linkEventActions.reset(i);t=i.find('input[name="text"]').val().length,n=!0,i.find('input.fr-link-attr:not([type="checkbox"])').trigger("change"),i.find('.fr-link-attr[name="text"]').parent().toggle(!TVE.$CURRENT_SHORTCODE),E(i)}function g(i){if(i)return d.popups.onRefresh("tcbLink.insert",u),d.popups.onHide("tcbLink.insert",p),!0;let s="";d.opts.linkInsertButtons.length>=1&&(s='<div class="fr-url-settings fr-icon">'+d.button.buildList(d.opts.linkInsertButtons)+"</div>");let f=0,g='<div class="fr-link-insert-layer fr-layer fr-active" id="fr-link-insert-layer-'+d.id+'">';d.opts.linkEventActions&&(g+=d.opts.linkEventActions.getHtml()),g+=TVE.tpl("inline/link-types")(),d.opts.linkText&&(g+='<div class="fr-input-line fr-link-text"><label>'+d.language.translate("Text")+'</label><input id="fr-link-insert-layer-text-'+d.id+'" name="text" type="text" class="fr-link-attr" placeholder="'+d.language.translate("Text")+'" tabIndex="'+ ++f+'"></div>');const m=TVE.apply_filters("tcb.render_dynamic_categories",JSON.parse(JSON.stringify(TVE.CONST.dynamic_links_categories))),v=TVE.apply_filters("tcb.render_dynamic_links",JSON.parse(JSON.stringify(TVE.CONST.dynamic_links)));g+=TVE.tpl("inline/staticlink-popup")({link_buttons:s,editor_id:d.id}),g+=TVE.tpl("inline/jumplink-popup")({editor_id:d.id}),g+=TVE.tpl("inline/dynamiclink-popup")({link_buttons:s,editor_id:d.id,categories:m,links:v[m[0]].links});const b={buttons:"",input_layer:g},T=d.popups.create("tcbLink.insert",b),S=T.find("#fr-link-insert-layer-url-"+d.id),y=T.find("#fr-link-insert-layer-url-redirect"),N=T.find("#fr-link-insert-layer-text-"+d.id);return S.on("change",(function(){n?n=!1:r=!1})),y.on("change",(function(){n?n=!1:r=!1})),l(S,(function(e){t||N.val(e.title),r=e,S.val(e.url),n=!0})),l(y,(function(e){t||N.val(e.title),r=e,y.val(e.url),n=!0})),d.$wp&&d.events.$on(d.$wp,"scroll.link-insert",(function(){c&&d.popups.isVisible("tcbLink.insert")&&update()})),d.opts.linkEventActions&&d.opts.linkEventActions.bindEvents(T),function(t){t.on("change",".fr-dynamic-category, .fr-dynamic-link-select",(function(e){TVE.do_action("tcb.froala.popup_click",e)})),t.on("click",".fr-checkbox-line",(function(e){TVE.do_action("tcb.froala.link_type_change",e)})),t.on("change",".fr-dynamic-link-select",(function(e){TVE.do_action("tcb.froala.dynamic_link_select_change",t,e)})),t.on("change",".fr-link-type",(function(){E(t),h(t,this.getAttribute("value"))})),t.on("change",".fr-jump-attr",(function(){!function(e,t){const n=e.find('input.fr-link-attr[type="text"]').filter('[name="href"]').val(),r=n&&TVE.jumplinks.isJumplink(c()),i=e.find(".fr-jump-attr[data-checked="+t+"]").is(":checked");r&&(i?TVE.inner_$("[href*="+n+"]").attr("jump-animation","smooth"):TVE.inner_$("[href*="+n+"]").removeAttr("jump-animation")),o.set(o.keys.jump_animation,i)}(t,this.dataset.checked)})),t.on("change",'.fr-link-attr[type="checkbox"]',(function(){!function(t,n){let r;const i=c(),a=e(n),s=a.attr("name"),l=a.is(":checked");switch(s){case"rel":r="link_no_follow";break;case"target":r="link_new_tab"}TVE.do_action("tcb.froala.link.attributes",t,a),t.find('input[name="'+s+'"]').prop("checked",l),i&&(l?i.setAttribute(s,n.dataset.checked):i.removeAttribute(s)),o.set(o.keys[r],l)}(t,this)})),t.on("click",".fr-jump-target-elem",(function(e){e.preventDefault(),e.stopPropagation(),TVE.inner_$(e.currentTarget.getAttribute("href")).tve_highlight()})),t.on("change","#fr-dynamic-category-list",(function(){const n=this.value;TVE.jumplinks.updateDynamicCustomFieldsLink(),e(this).find('[value="Custom Fields"]').toggle(TVE.jumplinks.categoryHasLinks("Custom Fields"));const o=["Shortcode"].includes(n);if(n===a&&TVE.PostList.utils.shouldShowDynamicLinks())t.find(".fr-dynamic-links").html(TVE.tpl("inline/postlist-links"));else{t.find(".fr-dynamic-links").html(TVE.tpl("controls/link/dynamic-links",{links:TVE.CONST.dynamic_links[n].links,options:TVE.CONST.dynamic_links[n].options||{}}));const e=t.find("#fr-dynamic-link-list option:selected").attr("data-shortcode-id")||"";e&&TVE.CONST.dynamic_links[n].options&&t.find(`.dynamic-extra-opt[data-show-for="${e}"]`).show()}t.find("#fr-dynamic-link-shortcode-input").val(""),t.find(".fr-dynamic-links").toggle(!o),t.find(".fr-dynamic-link-shortcode").toggle(o),TVE.do_action("tcb.froala.dynamic.link.category",t,n),t.find(".fr-dynamic-link-select").trigger("change")}))}(T),f=0,T.find("input,select,button").each((function(){this.setAttribute("tabindex",++f)})),TVE.do_action("tcb.popupInserted",T),T}function h(e,t){e.find(".fr-link-box").hide(),e.find(`.fr-${t}-box`).show(),e.find(".fr-link-type").prop("checked",!1),e.find(`.fr-link-type[name="${t}-link-type"]`).prop("checked",!0),TVE.do_action("tcb.froala.link.tab."+t,e)}function m(e){return!!(e.dataset.shortcodeId&&e.dataset.dynamicLink||e.getAttribute("dynamic-postlink")||v(e)||e.dataset.customShortcode)}function E(e){const t=c(),n=!(!t||!v(t)),o=e.find(".fr-jump-target");let r=!1,i=!1;e.find(".tcb-no-target").hide(),t&&(TVE.jumplinks.isJumplink(t)?(function(e,t){let n;try{n=TVE.inner_$(t.hash)}catch(e){n=TVE.inner_$()}e.find(".tcb-no-target").toggle(t.hash&&!n.length);const o=e.find(".fr-jump-target-elem"),r=TVE._type(n);o.html(r).attr("href",t.hash),h(e,"jump")}(e,t),o.removeClass("tcb-hide"),r=!0,TVE.inner_$(t).addClass("tve-jump-scroll").removeClass("tve-dynamic-link").removeAttr("data-shortcode-id data-dynamic-link dynamic-postlink")):m(t)&&(function(e){const t=c(),n=TVE.apply_filters("tcb.render_dynamic_categories",JSON.parse(JSON.stringify(TVE.CONST.dynamic_links_categories))),o=TVE.apply_filters("tcb.update_dynamic_popup_shortcode",t.dataset.dynamicLink),r=e.find(".fr-dynamic-links"),i=e.find(".fr-dynamic-link-shortcode");if(!v(t)){let s=!1;if(i.find("input").val(t.getAttribute("data-custom-shortcode")),t.getAttribute("data-custom-shortcode"))e.find('.fr-dynamic-categories option[value="Shortcode"]').prop("selected",!0);else if(t.getAttribute("data-dynamic-link").includes("tcb_post")&&TVE.PostList.utils.shouldShowDynamicLinks()){s=a,r.html(TVE.tpl("inline/postlist-links"));const e=r.find('option[value="'+t.getAttribute("data-dynamic-link")+'"]');0===e.length?TVE.page_message(TVE.t.invalidLink,!0):e.prop("selected",!0),t.setAttribute("dynamic-postlink",t.getAttribute("data-dynamic-link"))}else{TVE.jumplinks.updateDynamicCustomFieldsLink(),n.forEach((function(e){TVE.CONST.dynamic_links[e]&&e!==a&&TVE.CONST.dynamic_links[e].shortcode===o&&(s=e)})),TVE.jumplinks.categoryHasLinks(s)||(TVE.page_message(TVE.t.invalidLink,!0),s=n[0]);const i=TVE.apply_filters("tcb.render_dynamic_links",JSON.parse(JSON.stringify(TVE.CONST.dynamic_links)));r.html(TVE.tpl("controls/link/dynamic-links",{links:i[s].links,options:i[s].options||{}}));const l=t.dataset.shortcodeId,d=r.find(`[data-shortcode-id="${l}"],[data-compat-id="${l}"]`);if(0===d.length?TVE.page_message(TVE.t.invalidLink,!0):d.prop("selected",!0),s&&i[s].options&&i[s].options[l]){e.find(`.dynamic-extra-opt[data-show-for="${l}"]`).show();const n=t.dataset.option||"";n&&e.find(`.dynamic-extra-option[data-field="${l}"]`).val(n)}TVE.apply_filters("tcb.froala.should_trigger_dynamic_change",!1,l,d)&&TVE.ActiveElement.is("a")&&e.find(".fr-dynamic-link-select").trigger("change")}r.toggle(s.length>0),i.toggle(!s.length>0),e.find('.fr-dynamic-categories option[value="'+s+'"]').prop("selected",!0),TVE.do_action("tcb.froala.dynamic.link.category",e,s)}h(e,"dynamic")}(e),i=!0)),e.find(".fr-link-text").toggleClass("tcb-hide",n),e.find(".tve-top-tabs").toggleClass("tve-disabled",n),e.find(".fr-inline-shortcode-links-container").toggleClass("tcb-hide",!n),e.find(".fr-dynamic-links-container").toggleClass("tcb-hide",n),o.toggleClass("tcb-hide",!r),r||i||h(e,"static")}function v(e){if(e||e.parentNode)return TVE.apply_filters("tve.froala.dynamic_link_shortcode",e.parentNode.classList.contains("thrive-shortcode-content")&&(e.parentNode.dataset.attrLink||e.parentNode.dataset.attrEnable_call||e.parentNode.dataset.attrEnable_email),e)}function b(){const t=c();if(!1===d.events.trigger("link.beforeRemove",[t]))return!1;if(t){const n=e(t);n.parent().removeAttr("data-attr-static-link");const o=n.parents(TVE.TEXT_ALL).first();if(o&&o.length){const e=TVE.$CURRENT_SHORTCODE;TVE.froala.force_focus(o,!1).then((function(t){d=t,setTimeout((()=>{TVE.froala.selectNode(n),t.selection.save(),n.replaceWith(n.html()),t.selection.restore(),TVE.$CURRENT_SHORTCODE=e})),t.popups.hide("tcbLink.insert")}))}}}function T(t,n,o){if(d.$el.parents("div[data-link-wrap]").parent("a[href]").length){const e=d.$el.closest("a[href]").children().first(),t=TVE.t.warning_link_insert_inside_link.split("##split##");return TVE.page_message(t[0]+'<strong>"'+TVE.get_element_name(e)+'"</strong>'+t[1],!0,1e4),!1}if(void 0===o&&(o={}),!1===d.events.trigger("link.beforeInsert",[t,n,o]))return!1;"A"!==d.el.tagName?d.selection.restore():"A"===d.el.tagName&&d.$el.trigger("focus");const a=t;let s=null;const l=d.popups.get("tcbLink.insert");if(r&&r.is_popup?(t="javascript:void(0)",s={a:r.event_action,config:{l_id:r.id,id:r.id}}):d.opts.linkEventActions&&d.opts.linkEventActions.hasSelected(l)?(t="javascript:void(0)",s=d.opts.linkEventActions.getEventConfig(l)):(""===d.opts.linkAutoPrefix||/^(mailto|tel|sms|notes|data):.*/i.test(t)||/^data:image.*/i.test(t)||/^(https?:|ftps?:|file:|)\/\//i.test(t)||["/","{","[","#","("].indexOf((t||"")[0])<0&&!t.includes("javascript")&&(t=d.opts.linkAutoPrefix+t),t=d.helpers.sanitizeURL(t)),n=n||"",t===d.opts.linkAutoPrefix)return l.find('input[name="href"]').addClass("fr-error"),d.events.trigger("link.bad",[a]),!1;const p=c();let u;if(p)u=e(p),u.attr("href",t),TVE.preserve_changed_link(u),n.length>0&&u.text()!==n&&u.text(n),"A"!==d.el.tagName&&u.prepend(e.FE.START_MARKER).append(e.FE.END_MARKER),u.attr(o),s&&!i?TVE.EventManager.replace(p,"click",s):TVE.EventManager.remove(p,"click"),"A"!==d.el.tagName&&d.selection.restore();else{if(d.format.remove("a"),d.selection.isCollapsed())n=0===n.length?a:n,d.html.insert('<a href="'+t+'">'+e.FE.START_MARKER+n+e.FE.END_MARKER+"</a>"),d.selection.restore();else if(n.length>0&&n!==d.selection.text().replace(/\n/g,""))d.selection.remove(),d.html.insert('<a href="'+t+'">'+e.FE.START_MARKER+n+e.FE.END_MARKER+"</a>"),d.selection.restore();else if(TVE.$CURRENT_SHORTCODE){const o=e("<a>",{href:t}).text(n);TVE.$CURRENT_SHORTCODE.find(".thrive-shortcode-content").empty().append(o),TVE.froala.selectNode(o,!0)}else!function(){if(!d.selection.isCollapsed()){d.selection.save();let t=d.$el.find(".fr-marker").addClass("fr-unprocessed").toArray();for(;t.length;){const n=e(t.pop());n.removeClass("fr-unprocessed");const o=d.node.deepestParent(n.get(0));if(o){let t=n.get(0),r="",i="";do{t=t.parentNode,d.node.isBlock(t)||(r+=d.node.closeTagString(t),i=d.node.openTagString(t)+i)}while(t!==o);const a=d.node.openTagString(n.get(0))+n.html()+d.node.closeTagString(n.get(0));n.replaceWith('<span id="fr-break"></span>');let s=e(o).html();s=s.replace(/<span id="fr-break"><\/span>/g,r+a+i),e(o).html(s)}t=d.$el.find(".fr-marker.fr-unprocessed").toArray()}d.selection.restore()}}(),d.format.apply("a",{href:t});const r=f();for(let t=0;t<r.length;t++)s?TVE.EventManager.replace(r[t],"click",s):TVE.EventManager.remove(r[t],"click"),u=e(r[t]),u.attr(o),u.removeAttr("_moz_dirty"),TVE.preserve_changed_link(r[t]);1===r.length&&d.$wp&&(e(r[0]).prepend(e.FE.START_MARKER).append(e.FE.END_MARKER),d.selection.restore())}if(E(l),d.popups.hide("tcbLink.insert"),"A"!==d.el.tagName){const e=d.selection.endElement(),t=d.doc.createRange();d.events.focus(!0),t.setStartAfter(e),t.setEndAfter(e),d.selection.get().removeAllRanges(),d.selection.get().addRange(t),d.html.cleanWhiteTags(),i=!1}TVE.froala.refreshLinks(d.$el),TVE.$CURRENT_SHORTCODE&&TVE.froala.selectNode(TVE.$CURRENT_SHORTCODE.find("a")),TVE.PostList.utils.checkForPostListSync(d.$oel),TVE.do_action("tcb.froala.dynamic_link_after_insert",u)}return TVE.add_filter("tve.froala.focus_content.first_input",((e,t)=>{const n=TVE.froala.editor.link.get();return!(t=t.find(".fr-link-insert-layer").addBack(".fr-link-insert-layer")).length||n&&(!n||TVE.jumplinks.isJumplink(n)||TVE.jumplinks.isDynamicLink(n))||(e=t.find('.fr-static-box .fr-input-line input[id*="fr-link-insert"]')),e})),TVE.add_action("tcb.apply_jumplink.text",(()=>{if(TVE.JumplinkApplied||!d.popups.get("tcbLink.insert")||TVE.froala.editor.id!==d.id)return;const e="#"+TVE.JumpElement.attr("id"),t=d.popups.get("tcbLink.insert");let n=t.find('input.fr-link-attr[type="text"]').filter('[name="text"]').val();const a={};t.find('.fr-jump-attr[data-checked="smooth-anim"]').is(":checked")&&(a["jump-animation"]="smooth"),a.class="tve-jump-scroll",n||(n=TVE.ucFirst(TVE._type(TVE.JumpElement))),r=!1,i=!0,!1!==T(e,n,a)&&TVE.page_message(TVE.t.jumplink_added),o.set(o.keys.jump_animation,!!a["jump-animation"]&&a["jump-animation"]),TVE.JumpElement.removeClass("jump_target"),TVE.state_manager.set_state("default"),E(t),TVE.jumplinks.exitJumpMode(),TVE.froala.show_toolbars(),d.selection.restore(),TVE.Editor_Page.focus_element(TVE.is_group_editing?TVE.ActiveElement.filter(".edit_mode"):TVE.ActiveElement)})),TVE.add_action("tcb.froala.link.tab.dynamic",(e=>{const t=e.find("#fr-dynamic-category-list"),n=TVE.froala.editor.link.get(),o=TVE.PostList.utils.shouldShowDynamicLinks(),r=void 0!==TVE.CONST.dynamic_links["Custom Fields"];if(t.find('option[value="Custom Fields"]').toggle(r),t.find('option[value="Content"]').toggle(o),t.find('option[value="Custom Fields Postlist"]').toggle(o),!n||!TVE.froala.editor.link.isDynamicLink(n)){const e=t.find('option:not([style*="display: none"]):first');t.val(e.val()).trigger("change")}})),{_init:function(){g(!0)},remove:b,jumpRemove:function(){const e=c();e&&e.hash&&TVE.jumplinks.clearTargetID(e.hash),b()},showInsertPopup:function(){const e=d.$tb.find('.fr-command[data-cmd="tcbLink"]');let t=d.popups.get("tcbLink.insert");t?t.find("ul.ui-autocomplete").hide():t=g(),t.hasClass("fr-active")||(t.addClass("fr-right"),d.popups.refresh("tcbLink.insert"),d.popups.setContainer("tcbLink.insert",d.$tb||d.$sc),function(e,t){const n=(t=t||d.$tb.find(".fr-btn[data-cmd=tcbLink]")).offset();d.popups.show(e,n.left+t.outerWidth()/2,t.outerHeight()+n.top,t.outerHeight());const o=c();o&&(!o||TVE.jumplinks.isJumplink(o)||TVE.jumplinks.isDynamicLink(o))||setTimeout((()=>{d.accessibility.focusContent(d.popups.get(e))}))}("tcbLink.insert",e))},insertCallback:function(){const t=d.popups.get("tcbLink.insert"),n=t.find('input.fr-link-attr[type="text"]'),r=t.find('input.fr-link-attr[type="checkbox"]'),i=n.filter('[name="href"]').val(),a=n.filter('[name="text"]').val(),s={},l=c();let f,p;for(f=0;f<n.length;f++)p=e(n[f]),["href","text"].indexOf(p.attr("name"))<0&&(s[p.attr("name")]=p.val());for(f=0;f<r.length;f++)p=e(r[f]),p.is(":checked")?s[p.attr("name")]=p.data("checked"):s[p.attr("name")]=p.data("unchecked")||null;l&&TVE.inner_$(l).removeClass("tve-dynamic-link tve-jump-scroll").removeAttr("data-custom-shortcode data-dynamic-link data-shortcode-id dynamic-postlink jump-animation"),TVE.do_action("tcb.froala.before_link_insertion",this),o.set(o.keys.link_new_tab,null!==s.target),o.set(o.keys.link_no_follow,null!==s.rel);const u=d.helpers.scrollTop();T(i,a,s),e(d.o_win).scrollTop(u)},insertJumpCallback:function(){TVE.state_manager.set_state("jump"),d.selection.save(),TVE.froala.hide_toolbars(),TVE.jumplinks.enterJumpMode(TVE.froala.get_selection_element().closest(TVE.BLOCK_ELEMENTS)),TVE.do_action("tcb.froala.before_jumplink_insertion",this)},insert:T,get:c,allSelected:f,insertDynamicCallback:function(){const t=d.popups.get("tcbLink.insert");if(TVE.apply_filters("tcb.link.validate_url",!0,t.find(".elem-link-redirect-logout-link input:visible").val())){const n=t.find("#fr-dynamic-link-list option:selected");let s,l,d=n.val(),f={};const p=t.find('input.fr-link-attr[type="text"]').filter('[name="text"]').val(),u=t.find("#fr-dynamic-category-list").val(),g=t.find('input.fr-link-attr[type="checkbox"]'),h=t.find("#fr-dynamic-link-shortcode-input"),m=c(),E=n.attr("data-shortcode-id");if(f["data-shortcode-id"]=E,f["data-dynamic-link"]=TVE.CONST.dynamic_links[u]?TVE.CONST.dynamic_links[u].shortcode:"",f["data-custom-shortcode"]=h.val(),f.class="tve-dynamic-link "+(m&&m.classList.contains("edit_mode")?" edit_mode":""),f["data-option"]=t.find(`.dynamic-extra-option[data-field="${E}"]`).val(),f=TVE.apply_filters("tcb.froala.add_shortcode_attributes",f,E,t),TVE.do_action("tcb.froala.before_dynamic_link_insertion",E),m&&e(m).removeAttr("data-shortcode-id data-dynamic-link dynamic-postlink data-custom-shortcode"),u===a&&TVE.PostList.utils.shouldShowDynamicLinks()){const e=TVE.PostList.utils.getArticleID();f["dynamic-postlink"]=d,f["data-dynamic-link"]=d,d=TVE.PostList.posts[e][d],f["data-shortcode-id"]=e}for(s=0;s<g.length;s++)l=e(g[s]),l.is(":checked")?f[l.attr("name")]=l.data("checked"):f[l.attr("name")]=l.data("unchecked")||null;o.set(o.keys.link_new_tab,null!==f.target),o.set(o.keys.link_no_follow,null!==f.rel),r=!1,i=!0,!1!==T(d,p,f)&&TVE.page_message(TVE.t.dynamiclink_added,!1,2e3)}else TVE.page_message("Only internal links are allowed for logout redirect.",-1)},isDynamicLink:m}},e.FE.DefineIcon("tcbLink",{NAME:"link-light"}),e.FE.RegisterShortcut(e.FE.KEYCODE.K,"tcbLink",null,"K"),e.FE.RegisterCommand("tcbLink",{title:"Link",className:"fr-has-caret",undo:!1,focus:!0,forcedRefresh:!0,popup:!0,refreshAfterCallback:!1,callback(){const e=this.$tb.find(".fr-command[data-cmd=tcbLink]");let t=!0;this.popups.isVisible("tcbLink.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("tcbLink.insert"),t=!1):this.link.showInsertPopup(),e.toggleClass("fr-popup-active",t).toggleClass("fr-active",!!this.link.get())},refresh(e){e.toggleClass("fr-active",!!this.link.get()),e.removeClass("fr-popup-active")},plugin:"link"}),e.FE.DefineIcon("linkRemove",{NAME:"unlink-light"}),e.FE.RegisterCommand("linkRemove",{title:"Unlink",refreshAfterCallback:!1,callback(){this.link.remove()},refresh(e){e.toggleClass("fr-hidden",!this.link.get())}}),e.FE.RegisterCommand("linkInsert",{focus:!1,refreshAfterCallback:!1,callback(){this.link.insertCallback()},refresh(e){this.link.get()?e.text(this.language.translate("Update")):e.text(this.language.translate("Insert"))}}),e.FE.RegisterCommand("jumpInsert",{focus:!1,refreshAfterCallback:!0,callback(){return this.link.insertJumpCallback()},refresh(e){const t=this.link.get();e.text(this.language.translate(t&&TVE.jumplinks.isJumplink(t)?"Modify Target":"Select target"))}}),e.FE.RegisterCommand("jumpRemove",{title:"Remove Jump Link",refreshAfterCallback:!1,callback(){this.link.jumpRemove(),this.$tb.find(".fr-command[data-cmd=tcbLink]").removeClass("fr-popup-active")},refresh(e){const t=this.link.get();e.toggleClass("fr-hidden",!t||!TVE.jumplinks.isJumplink(t))}}),e.FE.DefineIcon("searchSettings",{NAME:"cog-light"}),e.FE.RegisterCommand("searchSettings",{title:"Search settings",undo:!1,icon:"searchSettings",focus:!1,refreshAfterCallback:!1,callback(){TVE.modal_open("options-post-types")}}),e.FE.RegisterCommand("dynamicLinkInsert",{focus:!1,refreshAfterCallback:!0,callback(){this.link.insertDynamicCallback()},refresh(e){const t=this.link.get();e.text(this.language.translate(t&&this.link.isDynamicLink(t)?"Update":"Insert"))}}),e.FE.RegisterCommand("dynamicLinkRemove",{title:"Remove Dynamic Link",refreshAfterCallback:!1,callback(){this.link.remove()},refresh(e){const t=this.link.get();e.toggleClass("fr-hidden",!t||!this.link.isDynamicLink(t))}})}},12307:function(e){e.exports=function(e){e.FE.PLUGINS.lists=function(t){function n(e){return'<span class="fr-open-'+e.toLowerCase()+'"></span>'}function o(e){return'<span class="fr-close-'+e.toLowerCase()+'"></span>'}function r(r){let i,a;for(i=r.length-1;i>=0;i--)for(a=i-1;a>=0;a--)if(e(r[a]).find(r[i]).length||r[a]===r[i]){r.splice(i,1);break}const s=[];for(i=0;i<r.length;i++){const a=e(r[i]);let l=r[i].parentNode;const d=t.node.attributes(r[i]);a.before(o(l.tagName)),"LI"===l.parentNode.tagName?(a.before(o("LI")),a.after(n("LI"))):(d&&a.wrapInner("<"+t.html.defaultTag()+' class="'+d+'"></'+t.html.defaultTag()+">"),t.node.isEmpty(a.get(0),!0)||0!==a.find(t.html.blockTagsQuery()).length||a.append("<br>"),a.append(n("LI")),a.prepend(o("LI"))),a.after(n(l.tagName)),"LI"===l.parentNode.tagName&&(l=l.parentNode.parentNode),s.indexOf(l)<0&&s.push(l)}for(i=0;i<s.length;i++){const n=e(s[i]);let o=n.html();o=o.replace(/<span class="fr-close-([a-z]*)"><\/span>/g,"</$1>"),o=o.replace(/<span class="fr-open-([a-z]*)"><\/span>/g,"<$1>"),n.replaceWith(t.node.openTagString(n.get(0))+o+t.node.closeTagString(n.get(0)))}t.$el.find("li:empty").remove(),t.$el.find("ul:empty, ol:empty").remove(),t.clean.lists(),t.html.wrap()}function i(n){t.selection.save();for(let o=0;o<n.length;o++){const r=n[o].previousSibling;if(r){const i=e(n[o]).find("> ul, > ol").last().get(0);if(i){const a=e("<li>").prependTo(e(i));let s=t.node.contents(n[o])[0];for(;s&&!t.node.isList(s);){const e=s.nextSibling;a.append(s),s=e}e(r).append(e(i)),e(n[o]).remove()}else{const t=e(r).find("> ul, > ol").last().get(0);if(t)e(t).append(e(n[o]));else{const t=e("<"+n[o].parentNode.tagName+">");e(r).append(t),t.append(e(n[o]))}}}}t.clean.lists(),t.selection.restore()}function a(e){t.selection.save(),r(e),t.selection.restore()}function s(e){if("indent"===e||"outdent"===e){let n=!1;const o=t.selection.blocks(),r=[];for(let e=0;e<o.length;e++)"LI"===o[e].tagName?(n=!0,r.push(o[e])):"LI"===o[e].parentNode.tagName&&(n=!0,r.push(o[e].parentNode));n&&("indent"===e?i(r):a(r))}}return{_init:function(){t.events.on("commands.after",s),t.events.on("keydown",(function(n){if(n.which===e.FE.KEYCODE.TAB){const e=t.selection.blocks(),o=[];for(let t=0;t<e.length;t++)"LI"===e[t].tagName?o.push(e[t]):"LI"===e[t].parentNode.tagName&&o.push(e[t].parentNode);if(o.length>1||o.length&&(t.selection.info(o[0]).atStart||t.node.isEmpty(o[0])))return n.preventDefault(),n.stopPropagation(),n.shiftKey?a(o):i(o),!1}}),!0)},format:function(n){t.selection.save(),t.html.wrap(!0,!0,!0,!0),t.selection.restore();const o=t.selection.blocks();for(let e=0;e<o.length;e++)"LI"!==o[e].tagName&&"LI"===o[e].parentNode.tagName&&(o[e]=o[e].parentNode);t.selection.save(),function(e,t){let n=!0;for(let o=0;o<e.length;o++){if("LI"!==e[o].tagName)return!1;e[o].parentNode.tagName!==t&&(n=!1)}return n}(o,n)?r(o):function(n,o){!function(t,n){const o=[];for(let e=0;e<t.length;e++){const r=t[e].parentNode;"LI"===t[e].tagName&&r.tagName!==n&&o.indexOf(r)<0&&o.push(r)}for(let t=o.length-1;t>=0;t--){const r=e(o[t]),i=n.toLowerCase();r[o[t].tagName!==n?"html":"replaceWith"](`<${i}> ${r.html()}</${i}>`)}}(n,o);const r=t.html.defaultTag();for(let i=0;i<n.length;i++)"LI"!==n[i].tagName&&(r&&n[i].tagName.toLowerCase()===r?e(n[i]).replaceWith("<"+o+"><li"+t.node.attributes(n[i])+">"+e(n[i]).html()+"</li></"+o+">"):e(n[i]).wrap("<"+o+"><li></li></"+o+">"));t.clean.lists()}(o,n),t.html.unwrap(),t.selection.restore()},refresh:function(n,o){const r=e(t.selection.element());if(r.get(0)!==t.el){let e=r.get(0);e="LI"!==e.tagName&&e.firstElementChild&&"LI"!==e.firstElementChild.tagName?r.parents("li").get(0):"LI"===e.tagName||e.firstElementChild?e.firstElementChild&&"LI"===e.firstElementChild.tagName?r.get(0).firstChild:r.get(0):r.parents("li").get(0),e&&e.parentNode.tagName===o&&t.el.contains(e.parentNode)&&n.addClass("fr-active")}}}},e.FE.RegisterCommand("formatUL",{title:"Unordered List",refresh(e){this.lists.refresh(e,"UL")},callback(){this.lists.format("UL")},plugin:"lists"}),e.FE.RegisterCommand("formatOL",{title:"Ordered List",refresh(e){this.lists.refresh(e,"OL")},callback(){this.lists.format("OL")},plugin:"lists"}),e.FE.DefineIcon("formatUL",{NAME:"list-ul-light"}),e.FE.DefineIcon("formatOL",{NAME:"list-ol-light"})}},90690:function(e){e.exports=function(e){function t(t,n){let o=t.parent();if(o.length)for(;!o.is("#tve_editor")&&o.length;){const t=o.clone().empty(),r=o.html().split(/<p class="tve_more_tag(?:[^"]*)"(?:[^>]*)><span class="tve_no_edit">More...<\/span><\/p>/);if(e(r[1]).length){const n=o.children(".tve-page-section-out,.tve-content-box-background");n.length&&(r[1]=e("<div></div>").append(n).html()+r[1]),o.html(r[0]),t.html(r[1]),o.after(t)}else o.find(".tve_more_tag").remove();o.after(n),o=o.parent()}}e.FE.DefineIcon("moreTagIcon",{NAME:"ellipsis-h"}),e.FE.RegisterCommand("tcbMoreTag",{title:"Insert Read More tag after current paragraph",icon:"moreTagIcon",undo:!1,focus:!1,refreshAfterCallback:!1,callback(){let n=this.tcb.getBlockElement();const o=n.closest(".thrv_wrapper"),r=e('<p class="tve_more_tag"><span class="tve_no_edit">More...</span></p>');n.is("li")&&(n=n.closest("ul,ol"));const i=n.nextAll();if(TVE.Editor_Page.before_action(),i.length){const e=o.clone().empty();o.after(e),e.append(i)}TVE.Editor_Page.editor.find(".tve_more_tag").remove(),o.after(r),t(o,r),TVE.Editor_Page.after_action(),TVE.drag.refresh(!0)},split_contents:t,refresh(e){this.tcb.getBlockElement().closest("table").length?e.hide():e.show()}}),e((function(){TVE.add_action("tcb_after_element_drop",(function(n,o,r){if(n.hasClass("tve_more_tag")){e(".tve_more_tag").not(n).remove(),n.removeClass("tve-dropped tve-droppable");const i=o.is(TVE.Editor_Page.editor);let a=i?o:o.closest(TVE.drag.getDraggableElements());if(i&&"mid"===r)a.append(n);else if(a.length)if("bottom"===r)t(a,n);else if("top"===r||"mid"===r){for(a=n.prev(TVE.drag.getDraggableElements());!a.length&&(a=n.parents(TVE.drag.getDraggableElements()).first(),a.length);)a.before(n),a=n.prev(TVE.drag.getDraggableElements());a.length&&t(a,n)}}}))}))}},47924:function(e){function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function n(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?t(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.exports=function(e){let t;TVE.add_action("tcb.froala.refresh",(e=>{const n=e.tcb.getBlockElement();n.hasClass("fr-view")||(t=n)}));let o=!1;function r(){o||(TVE.CONST.landing_page&&(i(),TVE.CONST.landing_page_text_styles=TVE.CONST.landing_page_text_styles||{},TVE._.each(TVE.CONST.default_styles,((t,n)=>{TVE.CONST.landing_page_text_styles[n]=new TVE.CSS(e(),{landingPageSelector:t.lp_selector}).collect("landing_page").removeImportant().css}))),o=!0)}function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#tcb_landing_page",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:TVE.$(".tve_global_style");const n=TVE.CSS_Rule_Cache.getRulesForSelector(e,TVE.main.media_query_tpl("desktop")),o=t[0].sheet;for(let t=0;t<o.cssRules.length;t++){const n=o.cssRules[t];n.type===CSSRule.STYLE_RULE&&n.selectorText.includes(e)&&o.deleteRule(t--)}n.forEach((e=>o.insertRule(e.cssText,o.cssRules.length))),TVE.CSS_Rule_Cache.getImports().forEach((e=>o.insertRule(e,0)))}function a(e,t){TVE.do_action(`global_styles.${e}.update`,t)}TVE.main.on("stylesheet_loaded",r),TVE.main.on("tcb-ready",(()=>setTimeout(r,1e3))),e.FE.PLUGINS.styles=function(o){function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e=e&&e.length?e:o.tcb.getBlockElement(t),"A"!==e[0].tagName||TVE.ActiveElement.is("a")||(e=e.parent()),!e.data("tcb-default-type")){let t="A"===e[0].tagName?"link":e[0].tagName.toLowerCase();"div"===t?t="plaintext":"li"===t&&(t="p"),e.data("tcb-default-type",t)}return{$el:e,defaultType:e.data("tcb-default-type"),globalType:"A"===e[0].tagName?"link":"text"}}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const{$el:t,defaultType:n,globalType:o}=r(e),i={defaultStyleSelector:TVE.CONST.default_styles[n].selector,globalStylePrefix:TVE.CONST.global_styles[`prefix_${o}`],landingPageSelector:TVE.CONST.default_styles[n].lp_selector};"text"===o&&(i.required=["color","background-color","font-family","font-size","font-weight","font-style","margin","padding-top","padding-bottom","text-decoration","text-transform","border-left"],i.computed=["--tcb-applied-color"]);const a=new TVE.CSS(t,i);return a.defaultType=n,a.globalType=o,a}function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";const{$el:t,globalType:n}=r(),o=TVE.CONST.global_styles[`prefix_${n}`],i=TVE.getClassThatContains(t,o);if(!i)return null;const a=i.replace(o,"");switch(e){case"class":return i;case"id":return a;case"object":case"style":return TVE._.findWhere(TVE.CONST.global_styles[n],{id:a})}}function d(e,t){const{$el:n,globalType:o}=r(t);n.removeClassContaining(TVE.CONST.global_styles[`prefix_${o}`]).removeAttr("data-css"),e&&n.addClass(TVE.CONST.global_styles[`prefix_${o}`]+e),TVE.main.update_components()}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=s();t.removeImportant(),e=e||t.defaultType,p(e,!1),Array.isArray(e)||(e=[e]);const o={};let r=[],a=!1;e.forEach((e=>{t.options=n(n({},t.options),{defaultStyleSelector:TVE.CONST.default_styles[e].selector,landingPageSelector:TVE.CONST.default_styles[e].lp_selector}),"li"===e&&t.remove("padding","padding-top","padding-bottom"),t.write(TVE.CONST.landing_page?"landing_page":"default");const i=t.asString();r=r.concat(i["@imports"]),delete i["@imports"],o[e]=JSON.stringify(i),e===t.defaultType&&(a=!0)})),TVE.CONST.landing_page?i():TVE.ajax("default_styles","post",{_do:"save",expect:"html",imports:r,json_rules:o}).done((e=>{TVE.$(".tve_global_style").replaceWith(e)})),a&&d(null)}function f(t){Array.isArray(t)||(t=[t]),t.forEach((t=>{TVE.head_css_remove(TVE.CONST.default_styles[t].lp_selector.split(", ").shift(),null,!0);const n=new TVE.CSS(e(),{landingPageSelector:TVE.CONST.default_styles[t].lp_selector});n.css=e.extend(!0,{},TVE.CONST.landing_page_text_styles[t]),n.write("landing_page")})),i(),TVE.main.update_components()}function p(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(TVE.CONST.landing_page)return f(e);const n={};e=e||r().type,Array.isArray(e)||(e=[e]),TVE.USE_GLOBALSHEET=!0,e.forEach((e=>{TVE.head_css_remove(TVE.CONST.default_styles[e].selector.split(", ").shift(),null,!0),n[e]=JSON.stringify({})})),TVE.USE_GLOBALSHEET=!1,t&&(TVE.ajax("default_styles","post",{_do:"save",expect:"html",json_rules:n}).done((e=>{TVE.$(".tve_global_style").replaceWith(e)})),TVE.main.update_components())}return{apply:d,update:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("__default"===e)return c(t);const n=s(),o=TVE.CONST.global_styles[`prefix_${n.globalType}`]+e,r=TVE._.findWhere(TVE.CONST.global_styles[n.globalType],{id:e});TVE.USE_GLOBALSHEET=!0,TVE.head_css_remove(o,null,!0),TVE.USE_GLOBALSHEET=!1,n.write("global",o),TVE.Components["shared-styles"].save_style({identifier:e,type:t||n.globalType,global_class:o,attr:r.attr}).done((()=>{setTimeout(i,500)})),a(n.globalType,"update"),d(e)},add:function(e){const t=s().write("instance");t.$el.removeClassContaining(`${TVE.CONST.global_styles.prefix}`);const n=TVE.ActiveElement;TVE.ActiveElement=t.$el,TVE.ActiveElement.data("tcb-elem-type",t.globalType),TVE.Components["shared-styles"].add_style(e,{attr:{tag:t.defaultType}}).done((()=>{setTimeout(i,500)})),TVE.ActiveElement=n,a(t.globalType,"add")},remove:function(e){const{$el:t,globalType:n}=r();if(!t.length)return!0;const o=TVE.CONST.global_styles[n];t.removeClassContaining(e),TVE.CONST.global_styles[n]=TVE._.reject(o,(t=>t.id===e)),TVE.USE_GLOBALSHEET=!0,TVE.head_css_remove(e,null,!0),TVE.USE_GLOBALSHEET=!1,TVE.ajax("global_styles","post",{identifier:e,type:n,delete:1}),a(n,"remove"),TVE.main.update_components()},get:l,updateDefault:c,removeDefault:p,label:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l("object");return e&&e.name?e.name:TVE.CONST.landing_page?TVE.t.lp_default:TVE.t.State_Default},setActiveElement:function(e){t=e},elementCSS:s}}}},42621:function(e){e.exports=function(e){const t={bold:"strong",italic:"em",underline:"u",strikeThrough:"s"};e.FE.PLUGINS.tcbFormat=function(n){function o(e){n.format.remove(e),n.selection.save(),n.selection.restore()}function r(){let t=e(n.selection.element());for(;1===t.children().length&&t.text()===t.children().text();)t=t.children();return t[0]}const i={bold:{tag:t.bold,css:"fontWeight",match:()=>Number(getComputedStyle(r()).fontWeight)>400,apply:()=>{n.format.removeStyle("font-weight"),d("strong")||n.format.apply("strong")},remove:()=>{n.format.removeStyle("font-weight"),o("strong"),d("strong")&&n.format.applyStyle("font-weight","normal")}},italic:{tag:t.italic,css:"fontStyle",match:()=>getComputedStyle(r()).fontStyle.includes("italic"),apply:()=>{n.format.removeStyle("font-style"),d("em")||n.format.apply("em")},remove:()=>{n.format.removeStyle("font-style"),o("em"),d("em")&&n.format.applyStyle("font-style","normal")}},underline:{tag:t.underline,css:"textDecoration",match:a.bind(null,"underline"),apply:s.bind(null,"underline"),remove:l.bind(null,"underline")},strikeThrough:{tag:t.strikeThrough,css:"textDecoration",match:a.bind(null,"line-through"),apply:s.bind(null,"line-through"),remove:l.bind(null,"line-through")}};function a(e){let t=r();const o=n.tcb.getBlockElement();for(n.$el.is(t)&&n.selection.endElement(),n.$el.is(t)&&(t=o[0]);!o.is(t)&&!n.$oel.is(t);){if(t.style&&t.style.textDecoration&&!t.style.textDecoration.includes(e))return!1;if(getComputedStyle(t).textDecoration.includes(e))return!0;t=t.parentNode}return getComputedStyle(t).textDecoration.includes(e)}function s(e){const t="underline"===e?"line-through":"underline",o=d("underline"===e?"strikeThrough":"underline")?t:"";d(e)||n.format.applyStyle("text-decoration",`${e} ${o}`.trim())}function l(e){if(o(i[e].tag),d(e)){const t="underline"===e?"strikeThrough":"underline",o="underline"===e?"line-through":"underline",r=d(t),i=r?o:"none";n.format.removeStyle("text-decoration"),(d(e)||r!==d(t))&&n.format.applyStyle("text-decoration",`${i}`)}}function d(e,t){e=i[e]?i[e].tag:e;let o=n.format.is(e,t);return i[e]&&!o&&(o=i[e].match()),o}return i.strong=i.bold,i.em=i.italic,i.u=i.underline,i.s=i.strikeThrough,i["line-through"]=i.s,{is:d,apply:function(e,t){if(e=i[e]?i[e].tag:e,!i[e])return n.format.apply(e,t);let o=!0;n.tcb.selectionIsFullBlock()&&(o=TVE.apply_filters(`tcb.${TVE._type(TVE.ActiveElement)}.format.apply`,!0,n,e)),o&&i[e].apply()},remove:function(e,t,o){if(e=i[e]?i[e].tag:e,!i[e])return n.format.remove(e,t,o);let r=!0;n.tcb.selectionIsFullBlock()&&(r=TVE.apply_filters(`tcb.${TVE._type(TVE.ActiveElement)}.format.remove`,!0,n,e)),r&&i[e].remove()}}},e.FE.COMMANDS.bold.refresh=e.FE.COMMANDS.italic.refresh=e.FE.COMMANDS.underline.refresh=e.FE.COMMANDS.strikeThrough.refresh=function(e){this.tcbFormat.is(e.attr("data-cmd"))?e[0].classList.add("fr-active"):e[0].classList.remove("fr-active")},e.FE.COMMANDS.bold.callback=e.FE.COMMANDS.italic.callback=e.FE.COMMANDS.underline.callback=e.FE.COMMANDS.strikeThrough.callback=function(e){if(!this.selection.text())return this.format.toggle(t[e]);this.tcbFormat.is(e)?this.tcbFormat.remove(e):this.tcbFormat.apply(e)}}},43011:function(e){e.exports=function(e){e.FE.PLUGINS.tcb=function(t){function n(){let n;return n="A"===t.el.tagName&&t.selection.element()===t.el?t.$el:e(t.selection.blocks()),n}return{getBlockElement:function(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=null;if(!t.selection.isCollapsed()){r=n().filter(TVE.BLOCK_ELEMENTS);const e=r.children("a");r.is("a")||1!==e.length||r.text().length!==e.text().length||(r=e)}return r&&r.length&&!t.selection.isCollapsed()||(r=e(t.selection.element().closest(TVE.BLOCK_ELEMENTS))),r&&r.length||(r=o||t.$el),r},selectionIsFullBlock:function(){const e=n();return!(e.length>1)&&e.text().trim().length===t.selection.text().trim().length},blockRefresh:function(n,o){const r=t.html.defaultTag();"N"===o&&void 0!==r&&(o=r.toUpperCase());const i=t.selection.blocks()[0].tagName===o||1===e(t.selection.blocks()[0]).closest(o).length;n.toggleClass("fr-active",i).attr("aria-pressed",i)},getSelectionBlock:n}},e.FE.DEFAULTS.htmlAllowedAttrs.push("onclick"),e.FE.DefineIcon("tcbFroalaMode",{NAME:"ellipsis-v-regular"}),e.FE.RegisterCommand("tcbFroalaMode",{type:"dropdown",title:"Froala View",focus:!0,undo:!0,options:{tve_froala_default:"Normal Mode",tve_froala_distraction_free:"Distraction Free Mode",tve_froala_pinned_mode:"Pinned Mode"},selectedIcon:TVE.icon("check"),callback(e,t){TVE.CONST.froalaMode&&"tve_froala_default"!==t||(TVE.CONST.froalaMode={tve_froala_distraction_free:!1,tve_froala_pinned_mode:!1}),"tve_froala_default"!==t&&(TVE.CONST.froalaMode[t]=!JSON.parse(TVE.CONST.froalaMode[t])),TVE.Editor_Page.updateFroalaModeDisplay(),TVE.CONST.froalaMode.tve_froala_distraction_free?TVE.ElementEditIcons.hide_icons():(TVE.ElementEditIcons.show_icons(TVE.ClickedElement),TVE.ClickedElement.closest(".tcb-group-editing").length&&(TVE.ClickedElement.hasClass("tcb-excluded-from-group-item")?TVE.ElementEditIcons.$unlock.toggle():TVE.ElementEditIcons.$lock.toggle())),TVE.ajax("froala_mode","post",{froala_mode:TVE.CONST.froalaMode})},refreshOnShow(e,t){const n=t.find("a").removeClass("fr-active");let o=!1;TVE._.isEmpty(TVE.CONST.froalaMode)||Object.keys(TVE.CONST.froalaMode).forEach((e=>{JSON.parse(TVE.CONST.froalaMode[e])&&(n.filter(`[data-param1="${e}"]`).addClass("fr-active"),o=!0)})),o||n.filter('[data-param1="tve_froala_default"]').addClass("fr-active")}})}},95623:function(e){e.exports=function(e){TVE.CONST.FROALA_FORMAT_OPTIONS={P:"Paragraph",H1:"Heading 1",H2:"Heading 2",H3:"Heading 3",H4:"Heading 4",H5:"Heading 5",H6:"Heading 6",BLOCKQUOTE:"Blockquote",PlainText:"Plain text"};const t={plaintext:'<svg class="tcb-icon" style="width: 22px" viewBox="0 0 17 6"><g fill-rule="evenodd"><path d="M.6,5.3A2.35,2.35,0,0,1,0,3.6,2.27,2.27,0,0,1,.6,2a2,2,0,0,1,1.5-.6,1.42,1.42,0,0,1,1.4.8V1.4H4.6V5.8H3.5V5.1a1.6,1.6,0,0,1-1.4.8A2,2,0,0,1,.6,5.3Zm2.5-.7a1.33,1.33,0,0,0,.4-1,1.28,1.28,0,0,0-.4-1,1.88,1.88,0,0,0-.8-.2,1.14,1.14,0,0,0-.8.3,1.33,1.33,0,0,0-.3,1,1.28,1.28,0,0,0,.4,1,.74.74,0,0,0,.7.3A1.23,1.23,0,0,0,3.1,4.6Z"/><path d="M7.3,2.1a1.6,1.6,0,0,1,1.4-.8,2.13,2.13,0,0,1,1.5.7,2.27,2.27,0,0,1,.6,1.6,2.27,2.27,0,0,1-.6,1.6,2,2,0,0,1-1.5.6A1.6,1.6,0,0,1,7.3,5v.7H6.2V0H7.3Zm2,2.5a1.49,1.49,0,0,0,.3-1,1.69,1.69,0,0,0-.3-1,1.88,1.88,0,0,0-.8-.2,1.14,1.14,0,0,0-.8.3,1.33,1.33,0,0,0-.3,1,1.69,1.69,0,0,0,.3,1,1.91,1.91,0,0,0,.8.3A1.23,1.23,0,0,0,9.3,4.6Z"/><path d="M12.4,5.3a2.35,2.35,0,0,1-.6-1.7A2.27,2.27,0,0,1,12.4,2,2.11,2.11,0,0,1,14,1.4a1.84,1.84,0,0,1,1.3.4A1.77,1.77,0,0,1,16,2.9H14.8a.8.8,0,0,0-.9-.6.91.91,0,0,0-.8.4,1.49,1.49,0,0,0-.3,1,1.69,1.69,0,0,0,.3,1,1,1,0,0,0,.8.4,1,1,0,0,0,.9-.6H16a2.1,2.1,0,0,1-.7,1.1A2,2,0,0,1,14,6,2.64,2.64,0,0,1,12.4,5.3Z"/></g></svg>',blockquote:'<svg class="tcb-icon" style="width: 14px" viewBox="0 0 512 512"><path d="M448 224h-64v-24c0-30.9 25.1-56 56-56h16c22.1 0 40-17.9 40-40V72c0-22.1-17.9-40-40-40h-16c-92.6 0-168 75.4-168 168v216c0 35.3 28.7 64 64 64h112c35.3 0 64-28.7 64-64V288c0-35.3-28.7-64-64-64zm32 192c0 17.7-14.3 32-32 32H336c-17.7 0-32-14.3-32-32V200c0-75.1 60.9-136 136-136h16c4.4 0 8 3.6 8 8v32c0 4.4-3.6 8-8 8h-16c-48.6 0-88 39.4-88 88v56h96c17.7 0 32 14.3 32 32v128zM176 224h-64v-24c0-30.9 25.1-56 56-56h16c22.1 0 40-17.9 40-40V72c0-22.1-17.9-40-40-40h-16C75.4 32 0 107.4 0 200v216c0 35.3 28.7 64 64 64h112c35.3 0 64-28.7 64-64V288c0-35.3-28.7-64-64-64zm32 192c0 17.7-14.3 32-32 32H64c-17.7 0-32-14.3-32-32V200c0-75.1 60.9-136 136-136h16c4.4 0 8 3.6 8 8v32c0 4.4-3.6 8-8 8h-16c-48.6 0-88 39.4-88 88v56h96c17.7 0 32 14.3 32 32v128z"></path></svg>'};function n(){return TVE.tpl("util/text-styles")({defaultStyles:TVE.CONST.FROALA_FORMAT_OPTIONS,customStyles:TVE.CONST.global_styles.text.filter((e=>e&&e.attr&&e.attr.tag)).map((e=>(e.shortTag=t[e.attr.tag]||e.attr.tag.toUpperCase(),e)))})}e.FE.PLUGINS.textStyles=function(t){function o(n,o){if(!o)return n;let r=e("<"+o+">"+n.html()+"</"+o+">");if(o.toLowerCase()===t.html.defaultTag())return n;if(n.find("ul, ol").length>0){const i=e("<"+o+">");n.prepend(i);let a=t.node.contents(n.get(0))[0];for(;a&&["UL","OL"].indexOf(a.tagName)<0;){const e=a.nextSibling;i.append(a),a=e}r=i}else n.html(r);return r}function r(n,o){const r=o.toLowerCase()===t.html.defaultTag()?n.html():e("<"+o+">").html(n.html());return n.replaceWith(r),r}function i(n,o){let r;return o.toLowerCase()===t.html.defaultTag()?(t.node.isEmpty(n.get(0),!0)||n.append("<br/>"),r=e(n.html())):r=e("<"+o+">").html(n.html()),n.replaceWith(r),r}function a(n,o){const r=e("<"+o+" "+t.node.attributes(n.get(0))+">").html(n.html());return n.replaceWith(r),r}const s=t.frameDropdown.register("textStyles",{apply(e){e.selection.restore();const t=e.textStyles.tag(this.dataset.tagName);t&&t.length&&e.styles.setActiveElement(t),e.styles.apply(this.dataset.style||null,t)},updateDefault(e){const t=this.dataset.tagName.toLowerCase();e.styles.updateDefault("p"===t?["p","li"]:t),d()},resetDefault(e){const t=this.dataset.tagName.toLowerCase();e.styles.removeDefault("p"===t?["p","li"]:t,!0),d()},add(e,t){const n=t.find(".fr-style-name");return n.val().trim()?(e.events.focus(),e.selection.restore(),e.styles.add(n.val()),d(),{hide:!1}):(n.addClass("fr-error").trigger("focus"),{hide:!1,focus:!1})},update(e){e.styles.update(this.dataset.style),d("custom")},remove(e){e.styles.remove(this.dataset.style),d("custom")},changeTab(){return c(this.dataset.target,s),{hide:!1,focus:!1}}});function l(){s.find(".fr-style-reset").each((function(){const e=parseInt(TVE.inner.window.getComputedStyle(this).fontSize);e<8?this.style.setProperty("font-size","8px","important"):e>30&&this.style.setProperty("font-size","30px","important")}))}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";s.find(".fr-dropdown-content").html(n()),c(e),l()}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";s.find(".fr-tab-link").removeClass("fr-tab-active").filter(`[data-target="${e}"]`).addClass("fr-tab-active"),s.find(".fr-tab").removeClass("fr-visible").filter(`.fr-tab-${e}`).addClass("fr-visible"),s.find(".fr-error").removeClass("fr-error")}return s.on("keyup",(e=>(13===e.which?s.find("[data-cmd=add]").trigger("click"):27===e.which&&s.find("input").val("").trigger("blur"),e.currentTarget.classList.remove("fr-error"),!1))),t.events.on("initialized",(()=>{s.data("ensure-preview-size")||(s.data("ensure-preview-size",!0),l())})),{refresh:function(e){let n,o="P",r="default";const i=t.styles.get("object");if(i)n=t.styles.label(i),r="custom";else{const e=t.selection.blocks();if(e.length){const n=e[0],r=t.html.defaultTag();n.tagName.toLowerCase()!==r&&n!==t.el&&(o=n.tagName),["LI","TD","TH"].indexOf(o)>=0&&(o="P"),("DIV"===o||n.classList.contains("tcb-plain-text"))&&(o="PlainText"),TVE.CONST.FROALA_FORMAT_OPTIONS[o]||(o="P")}n=TVE.CONST.FROALA_FORMAT_OPTIONS[o]}e.data("tag-name",o).children("span").text(n),c(r),s.find(".fr-selected").removeClass("fr-selected");const a="default"===r?`.fr-tab-default [data-tag-name="${o}"]`:`[data-style="${i.id}"]`;s.find(a).addClass("fr-selected")},tag:function(n){const s="PLAINTEXT"===(n=n.toUpperCase());"N"===n&&(n=t.html.defaultTag()),s&&(n="div"),t.selection.save(),t.html.wrap(!0,!0,!1,!0),t.selection.restore();const l=t.selection.blocks();let d=e();t.selection.save(),t.$el.find("pre").attr("skip",!0);for(let c=0;c<l.length;c++)if(l[c].tagName!==n&&!t.node.isList(l[c])){const t=e(l[c]);s||t.removeClass("tcb-plain-text"),d="LI"===l[c].tagName?d.add(o(t,n)):"LI"===l[c].parentNode.tagName&&l[c]?d.add(r(t,n)):["TD","TH"].indexOf(l[c].parentNode.tagName)>=0?d.add(i(t,n)):d.add(a(t,n))}return d.toggleClass("tcb-plain-text",s),t.$el.find('pre:not([skip="true"]) + pre:not([skip="true"])').each((function(){e(this).prev().append("<br>"+e(this).html()),e(this).remove()})),t.$el.find("pre").removeAttr("skip"),t.html.unwrap(),t.selection.restore(),d.first().closest("[data-child-styles]").applyChildrenGlobalStyle(),d}}},e.FE.RegisterCommand("textStyles",{className:"fr-has-caret btn-thin hide-tablet hide-mobile",icon:!1,undo:!0,focus:!0,refreshAfterCallback:!1,forcedRefresh:!0,displaySelection:!0,type:"dropdown",html:n,defaultSelection:()=>"Paragraph text",refresh(e){this.textStyles.refresh(e)},plugin:"textStyles",displaySelectionWidth:80})}},56149:function(e){const t={setItem(e,t){},getItem(e){},removeItem(e){}};function n(){this.api=window.localStorage||t,this.keys={link_new_tab:"tcb-lnk-new-tab",link_no_follow:"tcb-lnk-no-follow",jump_animation:"smooth-anim",video:{autoplay:"tcb-video-autoplay",controls:"tcb-video-controls",loop:"tcb-video-loop",showinfo:"tcb-video-showinfo",modestbranding:"tcb-video-modestbranding",byline:"tcb-video-byline","play-bar":"tcb-video-play-bar",fs:"tcb-video-fs",rel:"tcb-video-rel"},audio:{"data-autoplay":"tcb-audio-autoplay",loop:"tcb-audio-loop","no-download":"tcb-audio-no-download",auto_play:"tcb-audio-auto_play",show_artwork:"tcb-audio-show_artwork",show_user:"tcb-audio-show_user"}},jQuery(window).on("storage.tcb",jQuery.proxy((function(e){let t=(e=e.originalEvent).newValue,n=e.oldValue;try{t=JSON.parse(t),n=JSON.parse(n)}catch(e){}jQuery(this).trigger(e.key,[t,n])}),this))}n.prototype.set=function(e,t){if(!e||null==t)return this;"object"==typeof t&&(t=JSON.stringify(t));try{this.api.setItem(e,t)}catch(e){}return this},n.prototype.get=function(e){if(!e)return;const t=this.api.getItem(e);if(!t)return t;try{return JSON.parse(t)}catch(e){return t}},n.prototype.unset=function(e){if(!e)return this;try{this.api.removeItem(e)}catch(e){}return this},n.prototype.on=function(e,t){return jQuery(this).on(e,(function(e,n,o){t(n,o)}))},n.prototype.off=function(e){return jQuery(this).off(e)},n.prototype.setComponentMeta=function(e,t,n){const o=this.get("tcb-components-display")||{};o[e]=o[e]||{},o[e][t]=n,this.set("tcb-components-display",o)},n.instance=function(){return this._instance||(this._instance=new n),this._instance},e.exports=n.instance()}},o={};function r(e){var t=o[e];if(void 0!==t)return t.exports;var i=o[e]={exports:{}};return n[e](i,i.exports,r),i.exports}e=jQuery,(t=function(n,o){this.id=++e.FE.ID,this.opts=e.extend(!0,{},e.extend({},t.DEFAULTS,"object"==typeof o&&o)),this.opts.tooltipContainer||(this.opts.tooltipContainer=n.ownerDocument.body);var r={};e.each(this.opts,e.proxy((function(e,t){t&&(t.jquery||t instanceof Element)&&(r[e]=t,delete this.opts[e])}),this));var i=JSON.stringify(this.opts);this.opts=e.extend(this.opts,r),e.FE.OPTS_MAPPING[i]=e.FE.OPTS_MAPPING[i]||this.id,this.sid=e.FE.OPTS_MAPPING[i],e.FE.SHARED[this.sid]=e.FE.SHARED[this.sid]||{},this.shared=e.FE.SHARED[this.sid],this.shared.count=(this.shared.count||0)+1,this.$oel=e(n),this.$oel.data("froala.editor",this),this.o_doc=n.ownerDocument,this.o_win="defaultView"in this.o_doc?this.o_doc.defaultView:this.o_doc.parentWindow;var a=e(this.o_win).scrollTop();this.$oel.on("froala.doInit",e.proxy((function(){if(this.$oel.off("froala.doInit"),this.doc=this.$el.get(0).ownerDocument,this.win="defaultView"in this.doc?this.doc.defaultView:this.doc.parentWindow,this.$doc=e(this.doc),this.$win=e(this.win),this.$body=e("body"),this.opts.pluginsEnabled||(this.opts.pluginsEnabled=Object.keys(e.FE.PLUGINS)),this.opts.initOnClick){var t="mousedown.init touchend.init";this.load(e.FE.MODULES),this.$el.on("touchstart.init",(function(){e(this).data("touched",!0)})),this.$el.on("touchmove.init",(function(){e(this).removeData("touched")})),this.$el.on(t,e.proxy((function(n){var o=e.Event("froala-focus");if(this.$el.trigger(o),o.isDefaultPrevented())return!1;if("touchend"===n.type&&!this.$el.data("touched"))return!0;if(1===n.which||!n.which){this.$el.off(t),this.load(e.FE.MODULES),this.load(e.FE.PLUGINS);var r=n.originalEvent&&n.originalEvent.originalTarget;r&&"IMG"==r.tagName&&e(r).trigger("mousedown"),void 0===this.ul&&this.destroy(),"touchend"==n.type&&this.image&&n.originalEvent&&n.originalEvent.target&&e(n.originalEvent.target).is("img")&&setTimeout(e.proxy((function(){this.image.edit(e(n.originalEvent.target))}),this),100),this.ready=!0,this.events.trigger("initialized")}}),this))}else this.load(e.FE.MODULES),this.load(e.FE.PLUGINS),e(this.o_win).scrollTop(a),void 0===this.ul&&this.destroy(),this.ready=!0,this.events.trigger("initialized")}),this)),this._init()}).DEFAULTS={initOnClick:!1,pluginsEnabled:null},t.MODULES={},t.PLUGINS={},t.VERSION="2.6.0",t.INSTANCES=[],t.OPTS_MAPPING={},t.SHARED={},t.ID=0,t.prototype._init=function(){var t=this.$oel.prop("tagName");this.$oel.closest("label").length>=1&&console.warn("Note! It is not recommended to initialize the Froala Editor within a label tag.");var n=e.proxy((function(n,o){"TEXTAREA"!=t&&(this._original_html=this._original_html||this.$oel.html()),n="<"+(n=n||"div")+"></"+n+">",o="<"+(o=o||"div")+"></"+o+">",this.$box=this.$box||this.$oel,this.$el=e(n),this.el=this.$el.get(0),this.$wp=e(o).append(this.$el),this.$box.html(this.$wp),this.$oel.trigger("froala.doInit"),this.$oel.hasClass("tve-fr-non-editable")&&this.$el.attr("contenteditable",!1)}),this),o=e.proxy((function(){this.$box=e("<div>"),this.$oel.before(this.$box).hide(),this._original_html=this.$oel.val(),this.$oel.parents("form").on("submit."+this.id,e.proxy((function(){this.events.trigger("form.submit")}),this)),this.$oel.parents("form").on("reset."+this.id,e.proxy((function(){this.events.trigger("form.reset")}),this)),n()}),this),r=e.proxy((function(){this.$el=this.$oel,this.el=this.$el.get(0),this.$el.closest(".thrive-shortcode-content").length||this.$el.attr("contenteditable",!0).css("outline","none"),this.opts.multiLine=!1,this.$oel.trigger("froala.doInit")}),this),i=e.proxy((function(){this.$el=this.$oel,this.el=this.$el.get(0),this.$oel.trigger("froala.doInit")}),this),a=e.proxy((function(){this.$el=this.$oel,this.el=this.$el.get(0),this.$oel.on("click.popup",(function(e){e.preventDefault()})),this.$oel.trigger("froala.doInit")}),this),s=e.proxy((function(){this.opts.multiLine=!1,this.opts.pastePlain=!0,this.opts.enter=e.FE.ENTER_BR,n("span","span")}),this);this.opts.editInPopup?a():"TEXTAREA"==t?o():"A"==t?r():"IMG"==t?i():"INPUT"==t?(this.opts.editInPopup=!0,a()):"BUTTON"===t?s():this.$oel.is(".wp-caption-text.thrv-inline-text")?n("span","span"):n()},t.prototype.load=function(t){for(var n in t)if(t.hasOwnProperty(n)){if(this[n])continue;if(e.FE.PLUGINS[n]&&this.opts.pluginsEnabled.indexOf(n)<0)continue;if(this[n]=new t[n](this),this[n]._init&&(this[n]._init(),this.opts.initOnClick&&"core"==n))return!1}},t.prototype.destroy=function(){this.shared.count--,this.events.$off();var t=this.html.get();if(this.events.trigger("destroy",[],!0),this.events.trigger("shared.destroy",void 0,!0),0===this.shared.count){for(var n in this.shared)this.shared.hasOwnProperty(n)&&(this.shared[n],e.FE.SHARED[this.sid][n]=null);e.FE.SHARED[this.sid]={}}this.$oel.parents("form").off("."+this.id),this.$oel.off("click.popup"),this.$oel.removeData("froala.editor"),this.$oel.off("froalaEditor"),this.core.destroy(t),e.FE.INSTANCES.splice(e.FE.INSTANCES.indexOf(this),1)},e.fn.froalaEditor=function(n){for(var o=[],r=0;r<arguments.length;r++)o.push(arguments[r]);if("string"==typeof n){var i=[];return this.each((function(){var t,r,a=e(this).data("froala.editor");if(!a)return console.warn("Editor should be initialized before calling the "+n+" method.");if(n.indexOf(".")>0&&a[n.split(".")[0]]?(a[n.split(".")[0]]&&(t=a[n.split(".")[0]]),r=n.split(".")[1]):(t=a,r=n.split(".")[0]),!t[r])return e.error("Method "+n+" does not exist in Froala Editor.");var s=t[r].apply(a,o.slice(1));void 0===s?i.push(this):0===i.length&&i.push(s)})),1==i.length?i[0]:i}if("object"==typeof n||!n)return this.each((function(){e(this).data("froala.editor")||new t(this,n)}))},e.fn.froalaEditor.Constructor=t,e.FroalaEditor=t,e.FE=t,e.FE.XS=0,e.FE.SM=1,e.FE.MD=2,e.FE.LG=3,e.FE.MODULES.helpers=function(e){function t(){return/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&!r()}function n(){return/(Android)/g.test(navigator.userAgent)&&!r()}function o(){return/(Blackberry)/g.test(navigator.userAgent)}function r(){return/(Windows Phone)/gi.test(navigator.userAgent)}function i(e){return!!/^(https?:|ftps?:|)\/\//i.test(e)&&(e=String(e).replace(/</g,"%3C").replace(/>/g,"%3E").replace(/"/g,"%22").replace(/ /g,"%20"),/(http|ftp|https):\/\/[a-z\u00a1-\uffff0-9{}]+(\.[a-z\u00a1-\uffff0-9{}]*)*([a-z\u00a1-\uffff0-9.,@?^=%&amp;:\/~+#-_{}]*[a-z\u00a1-\uffff0-9@?^=%&amp;\/~+#-_{}])?/gi.test(e))}var a=null;return{_init:function(){e.browser=function(){var e={},t=function(){var e,t=-1;return"Microsoft Internet Explorer"==navigator.appName?(e=navigator.userAgent,null!==new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})").exec(e)&&(t=parseFloat(RegExp.$1))):"Netscape"==navigator.appName&&(e=navigator.userAgent,null!==new RegExp("Trident/.*rv:([0-9]{1,}[\\.0-9]{0,})").exec(e)&&(t=parseFloat(RegExp.$1))),t}();if(t>0)e.msie=!0;else{var n=navigator.userAgent.toLowerCase(),o=/(edge)[ \/]([\w.]+)/.exec(n)||/(chrome)[ \/]([\w.]+)/.exec(n)||/(webkit)[ \/]([\w.]+)/.exec(n)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(n)||/(msie) ([\w.]+)/.exec(n)||n.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(n)||[],r={browser:o[1]||"",version:o[2]||"0"};o[1]&&(e[r.browser]=!0),e.chrome?e.webkit=!0:e.webkit&&(e.safari=!0)}return e.msie&&(e.version=t),e}()},isIOS:t,isMac:function(){return null==a&&(a=navigator.platform.toUpperCase().indexOf("MAC")>=0),a},isAndroid:n,isBlackberry:o,isWindowsPhone:r,isMobile:function(){return n()||t()||o()},requestAnimationFrame:function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}},getPX:function(e){return parseInt(e,10)||0},isTouch:function(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch},sanitizeURL:function(e){if(/^(https?:|ftps?:|)\/\//i.test(e)){if(!i(e)&&!i("http:"+e))return""}else/\[([^)]+)\]/.test(e)?e=e.replace(/"/g,"'"):e.includes("javascript")||(e=encodeURIComponent(e).replace(/%23/g,"#").replace(/%2F/g,"/").replace(/%25/g,"%").replace(/mailto%3A/gi,"mailto:").replace(/file%3A/gi,"file:").replace(/sms%3A/gi,"sms:").replace(/tel%3A/gi,"tel:").replace(/notes%3A/gi,"notes:").replace(/data%3Aimage/gi,"data:image").replace(/blob%3A/gi,"blob:").replace(/webkit-fake-url%3A/gi,"webkit-fake-url:").replace(/%3F/g,"?").replace(/%3D/g,"=").replace(/%26/g,"&").replace(/&amp;/g,"&").replace(/%2C/g,",").replace(/%3B/g,";").replace(/%2B/g,"+").replace(/%40/g,"@").replace(/%5B/g,"[").replace(/%5D/g,"]").replace(/%7B/g,"{").replace(/%7D/g,"}"));return e},isArray:function(e){return e&&!e.propertyIsEnumerable("length")&&"object"==typeof e&&"number"==typeof e.length},isURL:i,getAlignment:function(e){var t=(e.css("text-align")||"").replace(/-(.*)-/g,"");return["left","right","justify","center"].indexOf(t)<0&&(t="left"),t},scrollTop:function(){return e.o_win.pageYOffset?e.o_win.pageYOffset:e.o_doc.documentElement&&e.o_doc.documentElement.scrollTop?e.o_doc.documentElement.scrollTop:e.o_doc.body.scrollTop?e.o_doc.body.scrollTop:0},scrollLeft:function(){return e.o_win.pageXOffset?e.o_win.pageXOffset:e.o_doc.documentElement&&e.o_doc.documentElement.scrollLeft?e.o_doc.documentElement.scrollLeft:e.o_doc.body.scrollLeft?e.o_doc.body.scrollLeft:0}}},e.FE.MODULES.events=function(t){var n,o={};function r(e,t,n){f(e,t,n)}function i(n){if(void 0===n&&(n=!0),!t.$wp)return!1;if(t.helpers.isIOS()&&t.$win.get(0).focus(),!t.core.hasFocus()&&n){var o=t.$win.scrollTop();t.browser.msie&&t.$box&&t.$box.css("position","fixed"),t.browser.msie&&t.$wp&&t.$wp.css("overflow","visible");const e=t.selection.element();return t.$el.focus(),e&&e.classList.contains("thrive-shortcode-content")&&t.selection.get().getRangeAt(0).selectNode(e),t.browser.msie&&t.$box&&t.$box.css("position",""),t.browser.msie&&t.$wp&&t.$wp.css("overflow","auto"),o!=t.$win.scrollTop()&&t.$win.scrollTop(o),!1}if(!t.core.hasFocus()||t.$el.find(".fr-marker").length>0)return!1;if(t.selection.info(t.el).atStart&&t.selection.isCollapsed()&&null!=t.html.defaultTag()){var r=t.markers.insert();if(r&&!t.node.blockParent(r)){e(r).remove();var i=t.$el.find(t.html.blockTagsQuery()).get(0);i&&(e(i).prepend(e.FE.MARKERS),t.selection.restore())}else r&&e(r).remove()}}var a=!1;function s(){n=!0}function l(){return n}function d(e,n,r){var i,a=e.split(" ");if(a.length>1){for(var s=0;s<a.length;s++)d(a[s],n,r);return!0}void 0===r&&(r=!1),i=0!==e.indexOf("shared.")?o[e]=o[e]||[]:t.shared._events[e]=t.shared._events[e]||[],r?i.unshift(n):i.push(n)}var c=[];function f(e,n,o,r,i){"function"==typeof o&&(i=r,r=o,o=!1);var a=i?t.shared.$_events:c,s=i?t.sid:t.id;o?e.on(n.split(" ").join(".ed"+s+" ")+".ed"+s,o,r):e.on(n.split(" ").join(".ed"+s+" ")+".ed"+s,r),a.indexOf(e.get(0))<0&&a.push(e.get(0))}function p(t,n){for(var o=0;o<t.length;o++)e(t[o]).off(".ed"+n)}function u(n,r,i){if(!t.edit.isDisabled()||i){var a,s;if(0!==n.indexOf("shared."))a=o[n];else{if(t.shared.count>0)return!1;a=t.shared._events[n]}if(a)for(var l=0;l<a.length;l++)if(!1===(s=a[l].apply(t,r)))return!1;return!1!==(s=t.$oel.triggerHandler("froalaEditor."+n,e.merge([t],r||[])))&&s}}function g(){for(var e in o)o.hasOwnProperty(e)&&delete o[e]}function h(){for(var e in t.shared._events)t.shared._events.hasOwnProperty(e)&&delete t.shared._events[e]}return{_init:function(){t.shared.$_events=t.shared.$_events||[],t.shared._events={},t.helpers.isMobile()?(t._mousedown="touchstart",t._mouseup="touchend",t._move="touchmove",t._mousemove="touchmove"):(t._mousedown="mousedown",t._mouseup="mouseup",t._move="",t._mousemove="mousemove"),r(t.$el,"click mouseup mousedown touchstart touchend",(function(e){u(e.type,[e])})),d("mousedown",(function(){for(var n=0;n<e.FE.INSTANCES.length;n++)e.FE.INSTANCES[n]!=t&&e.FE.INSTANCES[n].popups&&e.FE.INSTANCES[n].popups.areVisible()&&e.FE.INSTANCES[n].$el.find(".fr-marker").remove()})),r(t.$win,t._mousedown,(function(e){u("window.mousedown",[e]),s()})),r(t.$win,t._mouseup,(function(e){u("window.mouseup",[e])})),r(t.$win,"cut copy keydown keyup touchmove touchend",(function(e){u("window."+e.type,[e])})),r(t.$el,"keydown keypress keyup input",(function(e){u(e.type,[e])})),r(t.$el,"focus",(function(e){if(!t.ready)return!1;l()&&(i(!1),!1===a&&u(e.type,[e]))})),r(t.$el,"blur",(function(e){l()&&!0===a&&(u(e.type,[e]),s())})),d("focus",(function(){a=!0})),d("blur",(function(){a=!1})),s(),r(t.$el,"cut copy paste beforepaste",(function(e){u(e.type,[e])})),d("destroy",g),d("shared.destroy",h)},on:d,trigger:u,bindClick:function(n,o,r){f(n,t._mousedown,o,(function(n){t.edit.isDisabled()||function(n){var o=e(n.currentTarget);t.edit.isDisabled()||t.node.hasClass(o.get(0),"fr-disabled")?n.preventDefault():"mousedown"===n.type&&1!==n.which||(t.helpers.isMobile()||n.preventDefault(),(t.helpers.isAndroid()||t.helpers.isWindowsPhone())&&0===o.parents(".fr-dropdown-menu").length&&(n.preventDefault(),n.stopPropagation()),o.addClass("fr-selected"),t.events.trigger("commands.mousedown",[o]))}(n)}),!0),f(n,t._mouseup+" "+t._move,o,(function(n){t.edit.isDisabled()||function(n,o){var r=e(n.currentTarget);if(t.edit.isDisabled()||t.node.hasClass(r.get(0),"fr-disabled"))return n.preventDefault(),!1;if("mouseup"===n.type&&1!==n.which)return!0;if(!t.node.hasClass(r.get(0),"fr-selected"))return!0;if("touchmove"!=n.type){if(n.stopPropagation(),n.stopImmediatePropagation(),n.preventDefault(),!t.node.hasClass(r.get(0),"fr-selected"))return t.button.getButtons(".fr-selected",!0).removeClass("fr-selected"),!1;if(t.button.getButtons(".fr-selected",!0).removeClass("fr-selected"),r.data("dragging")||r.attr("disabled"))return r.removeData("dragging"),!1;var i=r.data("timeout");i&&(clearTimeout(i),r.removeData("timeout")),o.apply(t,[n])}else r.data("timeout")||r.data("timeout",setTimeout((function(){r.data("dragging",!0)}),100))}(n,r)}),!0),f(n,"mousedown click mouseup",o,(function(e){t.edit.isDisabled()||e.stopPropagation()}),!0),d("window.mouseup",(function(){t.edit.isDisabled()||(n.find(o).removeClass("fr-selected"),s())}))},disableBlur:function(){n=!1},enableBlur:s,blurActive:l,focus:i,chainTrigger:function(n,r,i){if(!t.edit.isDisabled()||i){var a,s;if(0!==n.indexOf("shared."))a=o[n];else{if(t.shared.count>0)return!1;a=t.shared._events[n]}if(a)for(var l=0;l<a.length;l++)void 0!==(s=a[l].apply(t,[r]))&&(r=s);return void 0!==(s=t.$oel.triggerHandler("froalaEditor."+n,e.merge([t],[r])))&&(r=s),r}},$on:f,$off:function(){p(c,t.id),c=[],0===t.shared.count&&(p(t.shared.$_events,t.sid),t.shared.$_events=null)}}},e.FE.MODULES.node=function(t){function n(e){return e&&"IFRAME"!=e.tagName?Array.prototype.slice.call(e.childNodes||[]):[]}function o(t){return!!t&&t.nodeType==Node.ELEMENT_NODE&&e.FE.BLOCK_TAGS.indexOf(t.tagName.toLowerCase())>=0}function r(e){var t={},n=e.attributes;if(n)for(var o=0;o<n.length;o++){var r=n[o];t[r.nodeName]=r.value}return t}function i(t){for(var n="",o=r(t),i=Object.keys(o).sort(),a=0;a<i.length;a++)if(!e.FE.FLAG_IGNORE_CSS_ATTR||"data-css"!==i[a]){var s=i[a],l=o[s];l.indexOf("'")<0&&l.indexOf('"')>=0?n+=" "+s+"='"+l+"'":l.indexOf('"')>=0&&l.indexOf("'")>=0?n+=" "+s+'="'+(l=l.replace(/"/g,"&quot;"))+'"':n+=" "+s+'="'+l+'"'}return n}function a(e){return e===t.el}return{isBlock:o,isEmpty:function(r,i){if(!r)return!0;if(r.querySelector("table"))return!1;var a=n(r);1==a.length&&o(a[0])&&(a=n(a[0]));for(var s=!1,l=0;l<a.length;l++){var d=a[l];if(!(i&&t.node.hasClass(d,"fr-marker")||d.nodeType==Node.TEXT_NODE&&0===d.textContent.length)){if("BR"!=d.tagName&&(d.textContent||"").replace(/\u200B/gi,"").replace(/\n/g,"").length>0)return!1;if(s)return!1;"BR"==d.tagName&&(s=!0)}}return!(r.querySelectorAll(e.FE.VOID_ELEMENTS.join(",")).length-r.querySelectorAll("br").length||r.querySelector(t.opts.htmlAllowedEmptyTags.join(":not(.fr-marker),")+":not(.fr-marker)")||r.querySelectorAll(e.FE.BLOCK_TAGS.join(",")).length>1||r.querySelector(t.opts.htmlDoNotWrapTags.join(":not(.fr-marker),")+":not(.fr-marker)"))},blockParent:function(e){for(;e&&e.parentNode!==t.el&&(!e.parentNode||!t.node.hasClass(e.parentNode,"fr-inner"));)if(o(e=e.parentNode))return e;return null},deepestParent:function(n,r,i){if(void 0===r&&(r=[]),void 0===i&&(i=!0),r.push(t.el),r.indexOf(n.parentNode)>=0||n.parentNode&&t.node.hasClass(n.parentNode,"fr-inner")||n.parentNode&&e.FE.SIMPLE_ENTER_TAGS.indexOf(n.parentNode.tagName)>=0&&i)return null;for(;r.indexOf(n.parentNode)<0&&n.parentNode&&!t.node.hasClass(n.parentNode,"fr-inner")&&(e.FE.SIMPLE_ENTER_TAGS.indexOf(n.parentNode.tagName)<0||!i)&&(!o(n)||!o(n.parentNode)||!i);)n=n.parentNode;return n},rawAttributes:r,attributes:i,clearAttributes:function(e){for(var t=e.attributes,n=t.length-1;n>=0;n--){var o=t[n];e.removeAttribute(o.nodeName)}},openTagString:function(e){return"<"+e.tagName.toLowerCase()+i(e)+">"},closeTagString:function(e){return"</"+e.tagName.toLowerCase()+">"},isFirstSibling:function e(n,o){void 0===o&&(o=!0);for(var r=n.previousSibling;r&&o&&t.node.hasClass(r,"fr-marker");)r=r.previousSibling;return!r||r.nodeType==Node.TEXT_NODE&&""===r.textContent&&e(r)},isLastSibling:function e(n,o){void 0===o&&(o=!0);for(var r=n.nextSibling;r&&o&&t.node.hasClass(r,"fr-marker");)r=r.nextSibling;return!r||r.nodeType==Node.TEXT_NODE&&""===r.textContent&&e(r)},isList:function(e){return!!e&&["UL","OL"].indexOf(e.tagName)>=0},isLink:function(e){return!!e&&e.nodeType==Node.ELEMENT_NODE&&"a"==e.tagName.toLowerCase()},isElement:a,contents:n,isVoid:function(t){return t&&t.nodeType==Node.ELEMENT_NODE&&e.FE.VOID_ELEMENTS.indexOf((t.tagName||"").toLowerCase())>=0},hasFocus:function(e){return e===t.doc.activeElement&&(!t.doc.hasFocus||t.doc.hasFocus())&&!!(a(e)||e.type||e.href||~e.tabIndex)},isEditable:function(e){return(!e.getAttribute||"false"!=e.getAttribute("contenteditable"))&&["STYLE","SCRIPT"].indexOf(e.tagName)<0},isDeletable:function(e){return e&&e.nodeType==Node.ELEMENT_NODE&&e.getAttribute("class")&&(e.getAttribute("class")||"").indexOf("fr-deletable")>=0},hasClass:function(t,n){return t instanceof e&&(t=t.get(0)),t&&t.classList&&t.classList.contains(n)},filter:function(e){return t.browser.msie?e:{acceptNode:e}}}},e.FE.INVISIBLE_SPACE="&#8203;",e.FE.START_MARKER='<span class="fr-marker" data-id="0" data-type="true" style="display: none; line-height: 0;">'+e.FE.INVISIBLE_SPACE+"</span>",e.FE.END_MARKER='<span class="fr-marker" data-id="0" data-type="false" style="display: none; line-height: 0;">'+e.FE.INVISIBLE_SPACE+"</span>",e.FE.MARKERS=e.FE.START_MARKER+e.FE.END_MARKER,e.FE.MODULES.markers=function(t){function n(){if(!t.$wp)return null;try{var n=t.selection.ranges(0),o=n.commonAncestorContainer;if(o!=t.el&&0===t.$el.find(o).length)return null;var r=n.cloneRange(),i=n.cloneRange();r.collapse(!0);var a=e('<span class="fr-marker" style="display: none; line-height: 0;">'+e.FE.INVISIBLE_SPACE+"</span>",t.doc)[0];if(r.insertNode(a),a=t.$el.find("span.fr-marker").get(0)){for(var s=a.nextSibling;s&&s.nodeType===Node.TEXT_NODE&&0===s.textContent.length;)e(s).remove(),s=t.$el.find("span.fr-marker").get(0).nextSibling;return t.selection.clear(),t.selection.get().addRange(i),a}return null}catch(e){console.warn("MARKER",e)}}function o(){t.$el.find(".fr-marker").remove()}return{place:function(n,o,r){var i,a,s;try{var l=n.cloneRange();if(l.collapse(o),l.insertNode(function(n,o){return e('<span class="fr-marker" data-id="'+o+'" data-type="'+n+'" style="display: '+(t.browser.safari?"none":"inline-block")+'; line-height: 0;">'+e.FE.INVISIBLE_SPACE+"</span>",t.doc)[0]}(o,r)),!0===o)for(s=(i=t.$el.find('span.fr-marker[data-type="true"][data-id="'+r+'"]').get(0)).nextSibling;s&&s.nodeType===Node.TEXT_NODE&&0===s.textContent.length;)e(s).remove(),s=i.nextSibling;if(!0===o&&!n.collapsed){for(;!t.node.isElement(i.parentNode)&&!s;)e(i.parentNode).after(i),s=i.nextSibling;if(s&&s.nodeType===Node.ELEMENT_NODE&&t.node.isBlock(s)){a=[s];do{s=a[0],a=t.node.contents(s)}while(a[0]&&t.node.isBlock(a[0]));e(s).prepend(e(i))}}if(!1===o&&!n.collapsed){if((s=(i=t.$el.find('span.fr-marker[data-type="false"][data-id="'+r+'"]').get(0)).previousSibling)&&s.nodeType===Node.ELEMENT_NODE&&t.node.isBlock(s)){a=[s];do{s=a[a.length-1],a=t.node.contents(s)}while(a[a.length-1]&&t.node.isBlock(a[a.length-1]));e(s).append(e(i))}i.parentNode&&["TD","TH"].indexOf(i.parentNode.tagName)>=0&&i.parentNode.previousSibling&&!i.previousSibling&&e(i.parentNode.previousSibling).append(i)}var d=t.$el.find('span.fr-marker[data-type="'+o+'"][data-id="'+r+'"]').get(0);return d&&(d.style.display="none"),d}catch(e){return null}},insert:n,split:function(){t.selection.isCollapsed()||t.selection.remove();var o=t.$el.find(".fr-marker").get(0);if(null==o&&(o=n()),null==o)return null;var r=t.node.deepestParent(o);if(r||(r=t.node.blockParent(o))&&"LI"!=r.tagName&&(r=null),r)if(t.node.isBlock(r)&&t.node.isEmpty(r))"LI"==r.tagName&&r.parentNode.firstElementChild==r?e(r).append('<span class="fr-marker"></span>'):e(r).replaceWith('<span class="fr-marker"></span>');else if(t.cursor.isAtStart(o,r))e(r).before('<span class="fr-marker"></span>'),e(o).remove();else if(t.cursor.isAtEnd(o,r))e(r).after('<span class="fr-marker"></span>'),e(o).remove();else{var i=o,a="",s="";do{i=i.parentNode,a+=t.node.closeTagString(i),s=t.node.openTagString(i)+s}while(i!=r);e(o).replaceWith('<span id="fr-break"></span>');var l=t.node.openTagString(r)+e(r).html()+t.node.closeTagString(r);l=l.replace(/<span id="fr-break"><\/span>/g,a+'<span class="fr-marker"></span>'+s),e(r).replaceWith(l)}return t.$el.find(".fr-marker").get(0)},insertAtPoint:function(e){var r,i=e.clientX,a=e.clientY;o();var s=null;if(void 0!==t.doc.caretPositionFromPoint?(r=t.doc.caretPositionFromPoint(i,a),(s=t.doc.createRange()).setStart(r.offsetNode,r.offset),s.setEnd(r.offsetNode,r.offset)):void 0!==t.doc.caretRangeFromPoint&&(r=t.doc.caretRangeFromPoint(i,a),(s=t.doc.createRange()).setStart(r.startContainer,r.startOffset),s.setEnd(r.startContainer,r.startOffset)),null!==s&&void 0!==t.win.getSelection){var l=t.win.getSelection();l.removeAllRanges(),l.addRange(s)}else if(void 0!==t.doc.body.createTextRange)try{(s=t.doc.body.createTextRange()).moveToPoint(i,a);var d=s.duplicate();d.moveToPoint(i,a),s.setEndPoint("EndToEnd",d),s.select()}catch(e){return!1}n()},remove:o}},e.FE.MODULES.selection=function(t){function n(){var e="";return t.win.getSelection?e=t.win.getSelection():t.doc.getSelection?e=t.doc.getSelection():t.doc.selection&&(e=t.doc.selection.createRange().text),e.toString()}function o(){return t.win.getSelection?t.win.getSelection():t.doc.getSelection?t.doc.getSelection():t.doc.selection.createRange()}function r(e){var n=o(),r=[];if(n&&n.getRangeAt&&n.rangeCount){r=[];for(var i=0;i<n.rangeCount;i++)r.push(n.getRangeAt(i))}else r=t.doc.createRange?[t.doc.createRange()]:[];return void 0!==e?r[e]:r}function i(){var e=o();try{e.removeAllRanges?e.removeAllRanges():e.empty?e.empty():e.clear&&e.clear()}catch(e){}}function a(){var i=o();try{if(i.rangeCount){var a,s=r(0),l=s.startContainer;if(l.nodeType==Node.TEXT_NODE&&s.startOffset==(l.textContent||"").length&&l.nextSibling&&(l=l.nextSibling),l.nodeType==Node.ELEMENT_NODE){var d=!1;if(l.childNodes.length>0&&l.childNodes[s.startOffset]){for(a=l.childNodes[s.startOffset];a&&a.nodeType==Node.TEXT_NODE&&0===a.textContent.length;)a=a.nextSibling;if(a&&a.textContent.replace(/\u200B/g,"")===n().replace(/\u200B/g,"")&&(l=a,d=!0),!d&&l.childNodes.length>1&&s.startOffset>0&&l.childNodes[s.startOffset-1]){for(a=l.childNodes[s.startOffset-1];a&&a.nodeType==Node.TEXT_NODE&&0===a.textContent.length;)a=a.nextSibling;a&&a.textContent.replace(/\u200B/g,"")===n().replace(/\u200B/g,"")&&(l=a,d=!0)}}else!s.collapsed&&l.nextSibling&&l.nextSibling.nodeType==Node.ELEMENT_NODE&&(a=l.nextSibling)&&a.textContent.replace(/\u200B/g,"")===n().replace(/\u200B/g,"")&&(l=a,d=!0);!d&&l.childNodes.length>0&&e(l.childNodes[0]).text().replace(/\u200B/g,"")===n().replace(/\u200B/g,"")&&["BR","IMG","HR"].indexOf(l.childNodes[0].tagName)<0&&(l=l.childNodes[0])}for(;l.nodeType!=Node.ELEMENT_NODE&&l.parentNode;)l=l.parentNode;for(var c=l;c&&"HTML"!=c.tagName;){if(c==t.el)return l;c=c.parentNode}}}catch(e){}return t.el}function s(e,t){var n=e;return n.nodeType==Node.ELEMENT_NODE&&n.childNodes.length>0&&n.childNodes[t]&&(n=n.childNodes[t]),n.nodeType==Node.TEXT_NODE&&(n=n.parentNode),n}function l(){if(t.$wp){t.markers.remove();var n,o,i=r(),a=[];for(o=0;o<i.length;o++)if(i[o].startContainer!==t.doc||t.browser.msie){var s=(n=i[o]).collapsed,l=t.markers.place(n,!0,o),d=t.markers.place(n,!1,o);void 0!==l&&l||!s||(e(".fr-marker").remove(),t.selection.setAtEnd(t.el)),t.el.normalize(),t.browser.safari&&!s&&((n=t.doc.createRange()).setStartAfter(l),n.setEndBefore(d),a.push(n))}if(t.browser.safari&&a.length)for(t.selection.clear(),o=0;o<a.length;o++)t.selection.get().addRange(a[o])}}function d(){var n,r=t.el.querySelectorAll('.fr-marker[data-type="true"]');if(!t.$wp)return t.markers.remove(),!1;if(0===r.length)return!1;if(t.browser.msie||t.browser.edge)for(n=0;n<r.length;n++)r[n].style.display="inline-block";t.core.hasFocus()||t.browser.msie||t.browser.webkit||t.$el.focus(),i();var s=o();for(n=0;n<r.length;n++){var l=e(r[n]).data("id"),d=r[n],f=t.doc.createRange(),p=t.$el.find('.fr-marker[data-type="false"][data-id="'+l+'"]');(t.browser.msie||t.browser.edge)&&p.css("display","inline-block");var u=null;if(p.length>0){p=p[0];try{for(var g,h=!1,m=d.nextSibling;m&&m.nodeType==Node.TEXT_NODE&&0===m.textContent.length;)g=m,m=m.nextSibling,e(g).remove();for(var E,v,b=p.nextSibling;b&&b.nodeType==Node.TEXT_NODE&&0===b.textContent.length;)g=b,b=b.nextSibling,e(g).remove();if(d.nextSibling==p||p.nextSibling==d){for(var T=d.nextSibling==p?d:p,S=T==d?p:d,y=T.previousSibling;y&&y.nodeType==Node.TEXT_NODE&&0===y.length;)g=y,y=y.previousSibling,e(g).remove();if(y&&y.nodeType==Node.TEXT_NODE)for(;y&&y.previousSibling&&y.previousSibling.nodeType==Node.TEXT_NODE;)y.previousSibling.textContent=y.previousSibling.textContent+y.textContent,y=y.previousSibling,e(y.nextSibling).remove();for(var N=S.nextSibling;N&&N.nodeType==Node.TEXT_NODE&&0===N.length;)g=N,N=N.nextSibling,e(g).remove();if(N&&N.nodeType==Node.TEXT_NODE)for(;N&&N.nextSibling&&N.nextSibling.nodeType==Node.TEXT_NODE;)N.nextSibling.textContent=N.textContent+N.nextSibling.textContent,N=N.nextSibling,e(N.previousSibling).remove();if(y&&(t.node.isVoid(y)||t.node.isBlock(y))&&(y=null),N&&(t.node.isVoid(N)||t.node.isBlock(N))&&(N=null),y&&N&&y.nodeType==Node.TEXT_NODE&&N.nodeType==Node.TEXT_NODE){e(d).remove(),e(p).remove();var _=y.textContent.length;y.textContent=y.textContent+N.textContent,e(N).remove(),t.spaces.normalize(y),f.setStart(y,_),f.setEnd(y,_),h=!0}else!y&&N&&N.nodeType==Node.TEXT_NODE?(e(d).remove(),e(p).remove(),t.spaces.normalize(N),u=e(t.doc.createTextNode("​")),e(N).before(u),f.setStart(N,0),f.setEnd(N,0),h=!0):!N&&y&&y.nodeType==Node.TEXT_NODE&&(e(d).remove(),e(p).remove(),t.spaces.normalize(y),u=e(t.doc.createTextNode("​")),e(y).after(u),f.setStart(y,y.textContent.length),f.setEnd(y,y.textContent.length),h=!0)}h||((t.browser.chrome||t.browser.edge)&&d.nextSibling==p?(E=c(p,f,!0)||f.setStartAfter(p),v=c(d,f,!1)||f.setEndBefore(d)):(d.previousSibling==p&&(p=(d=p).nextSibling),p.nextSibling&&"BR"===p.nextSibling.tagName||!p.nextSibling&&t.node.isBlock(d.previousSibling)||d.previousSibling&&"BR"==d.previousSibling.tagName||(d.style.display="inline",p.style.display="inline",u=e(t.doc.createTextNode("​"))),E=c(d,f,!0)||e(d).before(u)&&f.setStartBefore(d),v=c(p,f,!1)||e(p).after(u)&&f.setEndAfter(p)),"function"==typeof E&&E(),"function"==typeof v&&v())}catch(e){console.warn("RESTORE RANGE",e)}}u&&u.remove();try{s.addRange(f)}catch(e){console.warn("ADD RANGE",e)}}t.markers.remove();const C=a();C&&C.classList.contains("thrive-inline-shortcode")&&f.selectNodeContents(C)}function c(n,o,r){var i,a=n.previousSibling,s=n.nextSibling;return a&&s&&a.nodeType==Node.TEXT_NODE&&s.nodeType==Node.TEXT_NODE?(i=a.textContent.length,r?(s.textContent=a.textContent+s.textContent,e(a).remove(),e(n).remove(),t.spaces.normalize(s),function(){o.setStart(s,i)}):(a.textContent=a.textContent+s.textContent,e(s).remove(),e(n).remove(),t.spaces.normalize(a),function(){o.setEnd(a,i)})):a&&!s&&a.nodeType==Node.TEXT_NODE?(i=a.textContent.length,r?(t.spaces.normalize(a),function(){o.setStart(a,i)}):(t.spaces.normalize(a),function(){o.setEnd(a,i)})):!(!s||a||s.nodeType!=Node.TEXT_NODE)&&(r?(t.spaces.normalize(s),function(){o.setStart(s,0)}):(t.spaces.normalize(s),function(){o.setEnd(s,0)}))}function f(){for(var e=r(),t=0;t<e.length;t++)if(!e[t].collapsed)return!1;return!0}function p(e){var n,o,r=!1,i=!1;if(t.win.getSelection){var a=t.win.getSelection();a.rangeCount&&((o=(n=a.getRangeAt(0)).cloneRange()).selectNodeContents(e),o.setEnd(n.startContainer,n.startOffset),r=""===o.toString(),o.selectNodeContents(e),o.setStart(n.endContainer,n.endOffset),i=""===o.toString())}else t.doc.selection&&"Control"!=t.doc.selection.type&&((o=(n=t.doc.selection.createRange()).duplicate()).moveToElementText(e),o.setEndPoint("EndToStart",n),r=""===o.text,o.moveToElementText(e),o.setEndPoint("StartToEnd",n),i=""===o.text);return{atStart:r,atEnd:i}}function u(n,o){void 0===o&&(o=!0);var r=e(n).html();r&&r.replace(/\u200b/g,"").length!=r.length&&e(n).html(r.replace(/\u200b/g,""));for(var i=t.node.contents(n),a=0;a<i.length;a++)i[a].nodeType!=Node.ELEMENT_NODE?e(i[a]).remove():(u(i[a],0===a),0===a&&(o=!1));n.nodeType==Node.TEXT_NODE?e(n).replaceWith('<span data-first="true" data-text="true"></span>'):o&&e(n).attr("data-first",!0)}function g(){return 0===e(this).find("fr-inner").length}function h(n,o){var r=t.node.contents(n.get(0));["TD","TH"].indexOf(n.get(0).tagName)>=0&&1==n.find(".fr-marker").length&&t.node.hasClass(r[0],"fr-marker")&&n.attr("data-del-cell",!0);for(var i=0;i<r.length;i++){var a=r[i];if(t.node.hasClass(a,"fr-marker"))o=(o+1)%2;else if(o)if(e(a).find(".fr-marker").length>0)o=h(e(a),o);else if(["TD","TH"].indexOf(a.tagName)<0&&!t.node.hasClass(a,"fr-inner")){const n=a.parentNode.textContent.replace(/\s/g,"").replace(/\u200B/g,""),o=a.textContent.replace(/\s/g,"").replace(/\u200B/g,"");!t.opts.keepFormatOnDelete||t.$el.find("[data-first]").length>0||a.tagName&&["strong","em"].includes(a.tagName.toLowerCase())&&n!==o&&!t.isDuringPaste?e(a).remove():u(a),delete t.isDuringPaste}else t.node.hasClass(a,"fr-inner")?0===e(a).find(".fr-inner").length?e(a).html("<br>"):e(a).find(".fr-inner").filter(g).html("<br>"):(e(a).empty(),e(a).attr("data-del-cell",!0));else e(a).find(".fr-marker").length>0&&(o=h(e(a),o))}return o}function m(){try{if(!t.$wp)return!1;for(var e=r(0).commonAncestorContainer;e&&!t.node.isElement(e);)e=e.parentNode;return!!t.node.isElement(e)}catch(e){return!1}}function E(n){if(!n||n.getElementsByClassName("fr-marker").length>0)return!1;for(var o=n.firstChild;o&&t.node.isBlock(o);)n=o,o=o.firstChild;n.innerHTML=e.FE.MARKERS+n.innerHTML}function v(n){if(!n||n.getElementsByClassName("fr-marker").length>0)return!1;for(var o=n.lastChild;o&&t.node.isBlock(o);)n=o,o=o.lastChild;n.innerHTML=n.innerHTML+e.FE.MARKERS}return{text:n,get:o,ranges:r,clear:i,element:a,endElement:function(){var i=o();try{if(i.rangeCount){var a,s=r(0),l=s.endContainer;if(l.nodeType==Node.ELEMENT_NODE){var d=!1;l.childNodes.length>0&&l.childNodes[s.endOffset]&&e(l.childNodes[s.endOffset]).text()===n()?(l=l.childNodes[s.endOffset],d=!0):!s.collapsed&&l.previousSibling&&l.previousSibling.nodeType==Node.ELEMENT_NODE?(a=l.previousSibling)&&a.textContent.replace(/\u200B/g,"")===n().replace(/\u200B/g,"")&&(l=a,d=!0):!s.collapsed&&l.childNodes.length>0&&l.childNodes[s.endOffset]&&(a=l.childNodes[s.endOffset].previousSibling).nodeType==Node.ELEMENT_NODE&&a&&a.textContent.replace(/\u200B/g,"")===n().replace(/\u200B/g,"")&&(l=a,d=!0),!d&&l.childNodes.length>0&&e(l.childNodes[l.childNodes.length-1]).text()===n()&&["BR","IMG","HR"].indexOf(l.childNodes[l.childNodes.length-1].tagName)<0&&(l=l.childNodes[l.childNodes.length-1])}for(l.nodeType==Node.TEXT_NODE&&0===s.endOffset&&l.previousSibling&&l.previousSibling.nodeType==Node.ELEMENT_NODE&&(l=l.previousSibling);l.nodeType!=Node.ELEMENT_NODE&&l.parentNode;)l=l.parentNode;for(var c=l;c&&"HTML"!==c.tagName;){if(c===t.el)return l;c=c.parentNode}}}catch(e){}return t.el},save:l,restore:d,isCollapsed:f,isFull:function(){if(f())return!1;t.$el.find("td, th, img, br:not(:last)").prepend('<span class="fr-mk">'+e.FE.INVISIBLE_SPACE+"</span>");var n=!1,o=p(t.el);return o.atStart&&o.atEnd&&(n=!0),t.$el.find(".fr-mk").remove(),n},inEditor:m,remove:function(){if(f())return!0;var n;l();var o=function(t){for(var n=t.previousSibling;n&&n.nodeType==Node.TEXT_NODE&&0===n.textContent.length;){var o=n;n=n.previousSibling,e(o).remove()}return n},r=function(t){for(var n=t.nextSibling;n&&n.nodeType==Node.TEXT_NODE&&0===n.textContent.length;){var o=n;n=n.nextSibling,e(o).remove()}return n},i=t.$el.find('.fr-marker[data-type="true"]');for(n=0;n<i.length;n++)for(var a=i[n];!o(a)&&!t.node.isBlock(a.parentNode)&&!t.$el.is(a.parentNode);)e(a.parentNode).before(a);var s=t.$el.find('.fr-marker[data-type="false"]');for(n=0;n<s.length;n++){for(var c=s[n];!r(c)&&!t.node.isBlock(c.parentNode)&&!t.$el.is(c.parentNode);)e(c.parentNode).after(c);c.parentNode&&t.node.isBlock(c.parentNode)&&t.node.isEmpty(c.parentNode)&&!t.$el.is(c.parentNode)&&t.opts.keepFormatOnDelete&&e(c.parentNode).after(c)}h(t.$el,0);var p=t.$el.find('[data-first="true"]');if(p.length)t.$el.find(".fr-marker").remove(),p.append(e.FE.INVISIBLE_SPACE+e.FE.MARKERS).removeAttr("data-first"),p.attr("data-text")&&p.replaceWith(p.html());else for(t.$el.find("table").filter((function(){return e(this).find("[data-del-cell]").length>0&&e(this).find("[data-del-cell]").length==e(this).find("td, th").length})).remove(),t.$el.find("[data-del-cell]").removeAttr("data-del-cell"),i=t.$el.find('.fr-marker[data-type="true"]'),n=0;n<i.length;n++){var u=i[n],g=u.nextSibling,m=t.$el.find('.fr-marker[data-type="false"][data-id="'+e(u).data("id")+'"]').get(0);if(m){if(u&&(!g||g!=m)){var E=t.node.blockParent(u),v=t.node.blockParent(m),b=!1,T=!1;if(E&&["UL","OL"].indexOf(E.tagName)>=0&&(E=null,b=!0),v&&["UL","OL"].indexOf(v.tagName)>=0&&(v=null,T=!0),e(u).after(m),E!=v)if(null!=E||b)if(null!=v||T||0!==e(E).parentsUntil(t.$el,"table").length)E&&v&&0===e(E).parentsUntil(t.$el,"table").length&&0===e(v).parentsUntil(t.$el,"table").length&&(e(E).append(e(v).html()),e(v).remove());else{for(g=E;!g.nextSibling&&g.parentNode!=t.el;)g=g.parentNode;for(g=g.nextSibling;g&&"BR"!=g.tagName;){var S=g.nextSibling;e(E).append(g),g=S}g&&"BR"==g.tagName&&e(g).remove()}else{var y=t.node.deepestParent(u);y?(e(y).after(e(v).html()),e(v).remove()):0===e(v).parentsUntil(t.$el,"table").length&&(e(u).next().after(e(v).html()),e(v).remove())}}}else m=e(u).clone().attr("data-type",!1),e(u).after(m)}t.opts.keepFormatOnDelete||t.html.fillEmptyBlocks(),t.html.cleanEmptyTags(!0),t.clean.lists(),t.spaces.normalize();var N=t.$el.find(".fr-marker:last").get(0),_=t.$el.find(".fr-marker:first").get(0);void 0!==N&&void 0!==_&&!N.nextSibling&&_.previousSibling&&"BR"==_.previousSibling.tagName&&t.node.isElement(N.parentNode)&&t.node.isElement(_.parentNode)&&t.$el.append("<br>"),d()},blocks:function(){var n,i=[],a=o();if(m()&&a.rangeCount){var l=r();for(n=0;n<l.length;n++){var d,c=l[n],f=s(c.startContainer,c.startOffset),p=s(c.endContainer,c.endOffset);t.node.isBlock(f)&&i.indexOf(f)<0&&i.push(f),(d=t.node.blockParent(f))&&i.indexOf(d)<0&&i.push(d);for(var u=[],g=f;g!==p&&g!==t.el;)u.indexOf(g)<0&&g.children&&g.children.length?(u.push(g),g=g.children[0]):g.nextSibling?g=g.nextSibling:g.parentNode&&(g=g.parentNode,u.push(g)),t.node.isBlock(g)&&u.indexOf(g)<0&&i.indexOf(g)<0&&(g!==p||c.endOffset>0)&&i.push(g);t.node.isBlock(p)&&i.indexOf(p)<0&&c.endOffset>0&&i.push(p),(d=t.node.blockParent(p))&&i.indexOf(d)<0&&i.push(d)}}for(n=i.length-1;n>0;n--)e(i[n]).find(i).length&&("LI"!=i[n].tagName||1==i[n].children.length&&i.indexOf(i[n].children[0])>=0)&&i.splice(n,1);return i},info:p,setAtEnd:v,setAtStart:E,setBefore:function(n,o){void 0===o&&(o=!0);for(var r=n.previousSibling;r&&r.nodeType==Node.TEXT_NODE&&0===r.textContent.length;)r=r.previousSibling;return r?(t.node.isBlock(r)?v(r):"BR"==r.tagName?e(r).before(e.FE.MARKERS):e(r).after(e.FE.MARKERS),!0):!!o&&(t.node.isBlock(n)?E(n):e(n).before(e.FE.MARKERS),!0)},setAfter:function(n,o){void 0===o&&(o=!0);for(var r=n.nextSibling;r&&r.nodeType==Node.TEXT_NODE&&0===r.textContent.length;)r=r.nextSibling;return r?(t.node.isBlock(r)?E(r):e(r).before(e.FE.MARKERS),!0):!!o&&(t.node.isBlock(n)?v(n):e(n).after(e.FE.MARKERS),!0)},rangeElement:s}},e.extend(e.FE.DEFAULTS,{htmlAllowedTags:["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","br","button","canvas","caption","cite","code","col","colgroup","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meter","nav","noscript","object","ol","optgroup","option","output","p","param","pre","progress","queue","rp","rt","ruby","s","samp","script","style","section","select","small","source","span","font","strike","strong","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","var","video","wbr"],htmlRemoveTags:["script","style"],htmlAllowedAttrs:["accept","accept-charset","accesskey","action","align","allowfullscreen","allowtransparency","alt","async","autocomplete","autofocus","autoplay","autosave","background","bgcolor","border","charset","cellpadding","cellspacing","checked","cite","class","color","cols","colspan","content","contenteditable","contextmenu","controls","coords","data","data-.*","datetime","default","defer","dir","dirname","disabled","download","draggable","dropzone","dynamic-postlink","enctype","for","form","formaction","frameborder","headers","height","hidden","high","href","hreflang","http-equiv","icon","id","ismap","itemprop","jump-animation","keytype","kind","label","lang","language","list","loop","low","max","maxlength","media","method","min","mozallowfullscreen","multiple","name","novalidate","open","optimum","pattern","ping","placeholder","poster","preload","pubdate","radiogroup","readonly","rel","required","reversed","rows","rowspan","sandbox","scope","scoped","scrolling","seamless","selected","shape","size","sizes","span","src","srcdoc","srclang","srcset","start","step","summary","spellcheck","style","tabindex","target","title","type","translate","usemap","value","valign","webkitallowfullscreen","width","wrap"],htmlAllowedStyleProps:[".*"],htmlAllowComments:!0,htmlUntouched:!1}),e.FE.HTML5Map={B:"STRONG",I:"EM",STRIKE:"S"},e.FE.MODULES.clean=function(t){var n,o,r,i;function a(e){if(e.nodeType==Node.ELEMENT_NODE&&e.getAttribute("class")&&e.getAttribute("class").indexOf("fr-marker")>=0)return!1;var n,o=t.node.contents(e),r=[];for(n=0;n<o.length;n++)o[n].nodeType!=Node.ELEMENT_NODE||t.node.isVoid(o[n])?o[n].nodeType==Node.TEXT_NODE&&(o[n].textContent=o[n].textContent.replace(/\u200b/g,"")):o[n].textContent.replace(/\u200b/g,"").length!=o[n].textContent.length&&a(o[n]);if(e.nodeType==Node.ELEMENT_NODE&&!t.node.isVoid(e)&&(e.normalize(),o=t.node.contents(e),r=e.querySelectorAll(".fr-marker"),o.length-r.length==0)){for(n=0;n<o.length;n++)if((o[n].getAttribute("class")||"").indexOf("fr-marker")<0)return!1;for(n=0;n<r.length;n++)e.parentNode.insertBefore(r[n].cloneNode(!0),e);return e.parentNode.removeChild(e),!1}}function s(e,n){if(e.nodeType==Node.COMMENT_NODE)return"\x3c!--"+e.nodeValue+"--\x3e";if(e.nodeType==Node.TEXT_NODE)return n?e.textContent.replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):e.textContent.replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\u00A0/g,"&nbsp;").replace(/\u0009/g,"");if(e.nodeType!=Node.ELEMENT_NODE)return e.outerHTML;if(e.nodeType==Node.ELEMENT_NODE&&["STYLE","SCRIPT","NOSCRIPT"].indexOf(e.tagName)>=0)return e.outerHTML;if(e.nodeType==Node.ELEMENT_NODE&&"svg"==e.tagName){var o=document.createElement("div"),r=e.cloneNode(!0);return o.appendChild(r),o.innerHTML}if("IFRAME"==e.tagName)return e.outerHTML;var i=e.childNodes;if(0===i.length)return e.outerHTML;for(var a="",l=0;l<i.length;l++)"PRE"==e.tagName&&(n=!0),a+=s(i[l],n);return t.node.openTagString(e)+a+t.node.closeTagString(e)}var l=[];function d(n,o,r){return i=function(n,o){var r,i=e("<div>"+n+"</div>"),a="";if(i){var l=t.node.contents(i.get(0));for(r=0;r<l.length;r++)o(l[r]);for(l=t.node.contents(i.get(0)),r=0;r<l.length;r++)a+=s(l[r])}return a}((l=[],n.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,(function(e){return l.push(e),"[FROALA.EDITOR.SCRIPT "+(l.length-1)+"]"})).replace(/<noscript\b[^<]*(?:(?!<\/noscript>)<[^<]*)*<\/noscript>/gi,(function(e){return l.push(e),"[FROALA.EDITOR.NOSCRIPT "+(l.length-1)+"]"})).replace(/<img((?:[\w\W]*?)) src="/g,'<img$1 data-fr-src="')),o),(i=(i=i.replace(/\[FROALA\.EDITOR\.SCRIPT ([\d]*)\]/gi,(function(e,n){return t.opts.htmlRemoveTags.indexOf("script")>=0?"":l[parseInt(n,10)]}))).replace(/\[FROALA\.EDITOR\.NOSCRIPT ([\d]*)\]/gi,(function(e,n){return t.opts.htmlRemoveTags.indexOf("noscript")>=0?"":l[parseInt(n,10)].replace(/\&lt;/g,"<").replace(/\&gt;/g,">")}))).replace(/<img((?:[\w\W]*?)) data-fr-src="/g,'<img$1 src="');var i}function c(a){for(var s=t.node.contents(a),l=0;l<s.length;l++)s[l].nodeType!=Node.TEXT_NODE&&c(s[l]);!function(a){if("SPAN"==a.tagName&&(a.getAttribute("class")||"").indexOf("fr-marker")>=0)return!1;var s,l,d,c;if("PRE"==a.tagName&&(l=(s=a).innerHTML).indexOf("\n")>=0&&(s.innerHTML=l.replace(/\n/g,"<br>")),a.nodeType==Node.ELEMENT_NODE&&(a.getAttribute("data-fr-src")&&a.setAttribute("data-fr-src",t.helpers.sanitizeURL(a.getAttribute("data-fr-src"))),a.getAttribute("href")&&a.setAttribute("href",t.helpers.sanitizeURL(a.getAttribute("href"))),["TABLE","TBODY","TFOOT","TR"].indexOf(a.tagName)>=0&&(a.innerHTML=a.innerHTML.trim())),!t.opts.pasteAllowLocalImages&&a.nodeType==Node.ELEMENT_NODE&&"IMG"==a.tagName&&a.getAttribute("data-fr-src")&&0===a.getAttribute("data-fr-src").indexOf("file://"))return a.parentNode.removeChild(a),!1;if(a.nodeType==Node.ELEMENT_NODE&&e.FE.HTML5Map[a.tagName]&&""===t.node.attributes(a)){var f=e.FE.HTML5Map[a.tagName],p="<"+f+">"+a.innerHTML+"</"+f+">";a.insertAdjacentHTML("beforebegin",p),(a=a.previousSibling).parentNode.removeChild(a.nextSibling)}if(t.opts.htmlAllowComments||a.nodeType!=Node.COMMENT_NODE)if(a.tagName&&a.tagName.match(o))a.parentNode.removeChild(a);else if(a.tagName&&!a.tagName.match(n))"svg"===a.tagName?a.parentNode.removeChild(a):t.browser.safari&&"path"==a.tagName&&a.parentNode&&"svg"==a.parentNode.tagName||(a.outerHTML=a.innerHTML);else{var u=a.attributes;if(u)for(var g=u.length-1;g>=0;g--){var h=u[g],m=h.nodeName.match(r),E=null;"style"==h.nodeName&&t.opts.htmlAllowedStyleProps.length&&(E=h.value.match(i)),m&&E?h.value=(d=E.join(";"),c=void 0,";"!=(c=(c=d.replace(/;;/gi,";")).replace(/^;/gi,"")).charAt(c.length)&&(c+=";"),c):m&&("style"!=h.nodeName||E)||a.removeAttribute(h.nodeName)}}else 0!==a.data.indexOf("[FROALA.EDITOR")&&a.parentNode.removeChild(a)}(a)}return{_init:function(){},html:function(a,s,l,f){void 0===s&&(s=[]),void 0===l&&(l=[]),void 0===f&&(f=!1),a=a.replace(/<br> */g,"<br>");var p,u=e.merge([],t.opts.htmlAllowedTags);for(p=0;p<s.length;p++)u.indexOf(s[p])>=0&&u.splice(u.indexOf(s[p]),1);var g=e.merge([],t.opts.htmlAllowedAttrs);for(p=0;p<l.length;p++)g.indexOf(l[p])>=0&&g.splice(g.indexOf(l[p]),1);return g.push("data-fr-.*"),g.push("fr-.*"),n=new RegExp("^"+u.join("$|^")+"$","gi"),r=new RegExp("^"+g.join("$|^")+"$","gi"),o=new RegExp("^"+t.opts.htmlRemoveTags.join("$|^")+"$","gi"),i=t.opts.htmlAllowedStyleProps.length?new RegExp("((^|;|\\s)"+t.opts.htmlAllowedStyleProps.join(":.+?(?=;|$))|((^|;|\\s)")+":.+?(?=(;)|$))","gi"):null,d(a,c)},toHTML5:function(){var n=t.el.querySelectorAll(Object.keys(e.FE.HTML5Map).join(","));if(n.length){var o=!1;t.el.querySelector(".fr-marker")||(t.selection.save(),o=!0);for(var r=0;r<n.length;r++)""===t.node.attributes(n[r])&&e(n[r]).replaceWith("<"+e.FE.HTML5Map[n[r].tagName]+">"+n[r].innerHTML+"</"+e.FE.HTML5Map[n[r].tagName]+">");o&&t.selection.restore()}},tables:function(){!function(){for(var e=t.el.querySelectorAll("tr"),n=0;n<e.length;n++){for(var o=e[n].children,r=!0,i=0;i<o.length;i++)if("TH"!=o[i].tagName){r=!1;break}if(!1!==r&&0!==o.length){for(var a=e[n];a&&"TABLE"!=a.tagName&&"THEAD"!=a.tagName;)a=a.parentNode;var s=a;"THEAD"!=s.tagName&&(s=t.doc.createElement("THEAD"),a.insertBefore(s,a.firstChild)),s.appendChild(e[n])}}}(),function(){var n=t.html.defaultTag();if(n)for(var o=t.el.querySelectorAll("td > "+n+", th > "+n),r=0;r<o.length;r++)""===t.node.attributes(o[r])&&e(o[r]).replaceWith(o[r].innerHTML+"<br>")}()},lists:function(){!function(){var e=[],n=function(e){return!t.node.isList(e.parentNode)};do{if(e.length){var o=e[0],r=t.doc.createElement("ul");o.parentNode.insertBefore(r,o);do{var i=o;o=o.nextSibling,r.appendChild(i)}while(o&&"LI"==o.tagName)}e=[];for(var a=t.el.querySelectorAll("li"),s=0;s<a.length;s++)n(a[s])&&e.push(a[s])}while(e.length>0)}(),function(){for(var e=t.el.querySelectorAll("ol + ol, ul + ul"),n=0;n<e.length;n++){var o=e[n];if(t.node.isList(o.previousSibling)&&t.node.openTagString(o)==t.node.openTagString(o.previousSibling)){for(var r=t.node.contents(o),i=0;i<r.length;i++)o.previousSibling.appendChild(r[i]);o.parentNode.removeChild(o)}}}(),function(){var e,n,o;do{n=!1;var r=t.el.querySelectorAll("li:empty");for(e=0;e<r.length;e++)r[e].parentNode.removeChild(r[e]);var i=t.el.querySelectorAll("ul, ol");for(e=0;e<i.length;e++)(o=i[e]).querySelector("LI")||(n=!0,o.parentNode.removeChild(o))}while(!0===n)}(),function(){for(var n=t.el.querySelectorAll("ul > ul, ol > ol, ul > ol, ol > ul"),o=0;o<n.length;o++){var r=n[o],i=r.previousSibling;i&&("LI"==i.tagName?i.appendChild(r):e(r).wrap("<li></li>"))}}(),function(){for(var n=t.el.querySelectorAll("li > ul, li > ol"),o=0;o<n.length;o++){var r=n[o];if(r.nextSibling){var i=r.nextSibling,a=e("<li>");e(r.parentNode).after(a);do{var s=i;i=i.nextSibling,a.append(s)}while(i)}}}(),function(){for(var n=t.el.querySelectorAll("li > ul, li > ol"),o=0;o<n.length;o++){var r=n[o];if(t.node.isFirstSibling(r))e(r).before("<br/>");else if(r.previousSibling&&"BR"==r.previousSibling.tagName){for(var i=r.previousSibling.previousSibling;i&&t.node.hasClass(i,"fr-marker");)i=i.previousSibling;i&&"BR"!=i.tagName&&e(r.previousSibling).remove()}}}(),function(){for(var n=t.el.querySelectorAll("ul, ol"),o=0;o<n.length;o++)for(var r=t.node.contents(n[o]),i=null,a=r.length-1;a>=0;a--)"LI"!=r[a].tagName?(i||(i=e("<li>")).insertBefore(r[a]),i.prepend(r[a])):i=null}(),function(){for(var n=t.el.querySelectorAll("li:empty"),o=0;o<n.length;o++)e(n[o]).remove()}(),function(){if(t.html.defaultTag())for(var n=t.el.querySelectorAll("li > "+t.html.defaultTag()),o=n.length-1;o>=0;o--){var r=n[o];r.previousSibling&&!t.node.isEmpty(r)&&e("<br>").insertAfter(r.previousSibling),r.outerHTML=r.innerHTML}}()},quotes:function(){for(var n=t.el.querySelectorAll("blockquote + blockquote"),o=0;o<n.length;o++){var r=n[o];t.node.attributes(r)==t.node.attributes(r.previousSibling)&&(e(r).prev().append(e(r).html()),e(r).remove())}},invisibleSpaces:function(e){return e.replace(/\u200b/g,"").length==e.length?e:t.clean.exec(e,a)},exec:d}},e.FE.MODULES.spaces=function(t){function n(n,o){var r=n.previousSibling,i=n.nextSibling,a=n.textContent,s=n.parentNode;if(!t.html.isPreformatted(s)){o&&(a=a.replace(/[\f\n\r\t\v ]{2,}/g," "),i&&"BR"!==i.tagName&&!t.node.isBlock(i)||!t.node.isBlock(s)&&!t.node.isLink(s)||(a=a.replace(/[\f\n\r\t\v ]{1,}$/g,"")),r&&"BR"!==r.tagName&&!t.node.isBlock(r)||!t.node.isBlock(s)&&!t.node.isLink(s)||(a=a.replace(/^[\f\n\r\t\v ]{1,}/g,""))," "===a&&(r&&r.nodeType!=Node.TEXT_NODE||i&&i.nodeType!=Node.TEXT_NODE)&&(a="")),a=a.replace(new RegExp(e.FE.UNICODE_NBSP,"g")," ");for(var l="",d=0;d<a.length;d++)32!=a.charCodeAt(d)||0!==d&&32!=l.charCodeAt(d-1)?l+=a[d]:l+=e.FE.UNICODE_NBSP;(!i||t.node.isBlock(i)||i.nodeType==Node.ELEMENT_NODE&&t.win.getComputedStyle(i)&&"block"==t.win.getComputedStyle(i).display)&&(l=l.replace(/ $/,e.FE.UNICODE_NBSP)),!r||t.node.isVoid(r)||t.node.isBlock(r)||1!==(l=l.replace(/^\u00A0([^ $])/," $1")).length||160!==l.charCodeAt(0)||!i||t.node.isVoid(i)||t.node.isBlock(i)||(l=" "),l=l.replace(/([^ \u00A0])\u00A0([^ \u00A0])/g,"$1 $2"),n.textContent!=l&&(n.textContent=l)}}function o(e,o){if(void 0!==e&&e||(e=t.el),void 0===o&&(o=!1),e.nodeType==Node.TEXT_NODE&&n(e,o),t.opts.htmlUntouched)return!1;if((!e.getAttribute||"false"!=e.getAttribute("contenteditable"))&&e.nodeType==Node.ELEMENT_NODE)for(var r=t.doc.createTreeWalker(e,NodeFilter.SHOW_TEXT,t.node.filter((function(e){for(var n=e.parentNode;n&&n!==t.el;){if("STYLE"==n.tagName)return!1;if("PRE"===n.tagName)return!1;n=n.parentNode}return null!=e.textContent.match(/([ \u00A0\f\n\r\t\v]{2,})|(^[ \u00A0\f\n\r\t\v]{1,})|([ \u00A0\f\n\r\t\v]{1,}$)/g)&&!t.node.hasClass(e.parentNode,"fr-marker")})),!1);r.nextNode();)n(r.currentNode,o)}return{normalize:o,normalizeAroundCursor:function(){for(var e=[],n=t.el.querySelectorAll(".fr-marker"),r=0;r<n.length;r++){for(var i,a=(i=t.node.blockParent(n[r])||n[r]).nextSibling,s=i.previousSibling;a&&"BR"==a.tagName;)a=a.nextSibling;for(;s&&"BR"==s.tagName;)s=s.previousSibling;i&&e.indexOf(i)<0&&e.push(i),s&&e.indexOf(s)<0&&e.push(s),a&&e.indexOf(a)<0&&e.push(a)}for(var l=0;l<e.length;l++)o(e[l])}}},e.FE.UNICODE_NBSP=String.fromCharCode(160),e.FE.VOID_ELEMENTS=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],e.FE.BLOCK_TAGS=["address","article","aside","audio","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","section","table","tbody","td","tfoot","th","thead","tr","ul","video"],e.extend(e.FE.DEFAULTS,{htmlAllowedEmptyTags:["textarea","a","iframe","object","video","style","script",".fa",".fr-emoticon"],htmlDoNotWrapTags:["script","style"],htmlSimpleAmpersand:!1,htmlIgnoreCSSProperties:[],htmlExecuteScripts:!0}),e.FE.MODULES.html=function(t){function n(){return t.opts.enter==e.FE.ENTER_P?"p":t.opts.enter==e.FE.ENTER_DIV?"div":t.opts.enter==e.FE.ENTER_BR?null:void 0}function o(e){return-1!=["PRE","SCRIPT"].indexOf(e.tagName)}function r(n){var o,r=[],a=[];if(n){var s=t.el.querySelectorAll(".fr-marker");for(o=0;o<s.length;o++){var l=t.node.blockParent(s[o])||s[o];if(l){var d=l.nextSibling,c=l.previousSibling;l&&a.indexOf(l)<0&&t.node.isBlock(l)&&a.push(l),c&&t.node.isBlock(c)&&a.indexOf(c)<0&&a.push(c),d&&t.node.isBlock(d)&&a.indexOf(d)<0&&a.push(d)}}}else a=t.el.querySelectorAll(i());var f=i();for(f+=","+e.FE.VOID_ELEMENTS.join(","),f+=","+t.opts.htmlAllowedEmptyTags.join(":not(.fr-marker),")+":not(.fr-marker)",o=a.length-1;o>=0;o--)if(!(a[o].textContent&&a[o].textContent.replace(/\u200B|\n/g,"").length>0||a[o].querySelectorAll(f).length>0)){for(var p=t.node.contents(a[o]),u=!1,g=0;g<p.length;g++)if(p[g].nodeType!=Node.COMMENT_NODE&&p[g].textContent&&p[g].textContent.replace(/\u200B|\n/g,"").length>0){u=!0;break}u||r.push(a[o])}return r}function i(){return e.FE.BLOCK_TAGS.join(", ")}function a(n){var o,r,i=e.merge([],e.FE.VOID_ELEMENTS);i=e.merge(i,t.opts.htmlAllowedEmptyTags),void 0===n&&(i=e.merge(i,e.FE.BLOCK_TAGS)),o=t.el.querySelectorAll("*:empty:not("+i.join("):not(")+"):not(.fr-marker)");do{r=!1;for(var a=0;a<o.length;a++)0!==o[a].attributes.length&&void 0===o[a].getAttribute("href")||(o[a].parentNode.removeChild(o[a]),r=!0);o=t.el.querySelectorAll("*:empty:not("+i.join("):not(")+"):not(.fr-marker)")}while(o.length&&r)}function s(e,o){var r=n();if(o&&(r="div"),r){for(var i=t.doc.createDocumentFragment(),a=null,s=!1,l=e.firstChild;l;){var d=l.nextSibling;if(l.nodeType==Node.ELEMENT_NODE&&(t.node.isBlock(l)||t.opts.htmlDoNotWrapTags.indexOf(l.tagName.toLowerCase())>=0&&!t.node.hasClass(l,"fr-marker")))a=null,i.appendChild(l);else if(l.nodeType!=Node.ELEMENT_NODE&&l.nodeType!=Node.TEXT_NODE)a=null,i.appendChild(l);else if("BR"==l.tagName)null==a?(a=t.doc.createElement(r),o&&a.setAttribute("data-empty",!0),a.appendChild(l),i.appendChild(a)):!1===s&&(a.appendChild(t.doc.createElement("br")),a.setAttribute("data-empty",!0)),a=null;else{var c=l.textContent;l.nodeType==Node.TEXT_NODE&&0===c.replace(/\n/g,"").replace(/(^( |\t)*)|(( |\t)*$)/g,"").length||(null==a&&(a=t.doc.createElement(r),o&&a.setAttribute("class","fr-temp-div"),i.appendChild(a),s=!1),a.appendChild(l),s||t.node.hasClass(l,"fr-marker")||l.nodeType==Node.TEXT_NODE&&0===c.replace(/([ \t])/g,"").length||(s=!0))}l=d}e.innerHTML="",e.appendChild(i)}}function l(e,t){for(var n=0;n<e.length;n++)s(e[n],t)}function d(e,n,o,r){if(!t.$wp)return!1;void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===o&&(o=!1),void 0===r&&(r=!1);var i=t.$wp.scrollTop();s(t.el,e),r&&l(t.el.querySelectorAll(".fr-inner"),e),n&&l(t.el.querySelectorAll("td, th"),e),o&&l(t.el.querySelectorAll("blockquote"),e),i!=t.$wp.scrollTop()&&t.$wp.scrollTop(i)}function c(e){if(void 0===e&&(e=t.el),e&&["SCRIPT","STYLE","PRE"].indexOf(e.tagName)>=0)return!1;for(var n=t.doc.createTreeWalker(e,NodeFilter.SHOW_TEXT,t.node.filter((function(e){return null!=e.textContent.match(/([ \n]{2,})|(^[ \n]{1,})|([ \n]{1,}$)/g)})),!1);n.nextNode();){var r=n.currentNode;if(!o(r.parentNode)){var i=t.node.isBlock(r.parentNode)||t.node.isElement(r.parentNode),a=r.textContent.replace(/(?!^)( ){2,}(?!$)/g," ").replace(/\n/g," ").replace(/^[ ]{2,}/g," ").replace(/[ ]{2,}$/g," ");if(i){var s=r.previousSibling,l=r.nextSibling;s&&l&&" "==a?a=t.node.isBlock(s)&&t.node.isBlock(l)?"":"\n":(s||(a=a.replace(/^ */,"")),l||(a=a.replace(/ *$/,"")))}r.textContent=a}}}function f(e,t,n){var o=new RegExp(t,"gi").exec(e);return o?o[n]:null}function p(n,o){var r=n.parentNode;if(r&&(t.node.isBlock(r)||t.node.isElement(r))&&["TD","TH"].indexOf(r.tagName)<0){for(var i=n.previousSibling,a=n.nextSibling;i&&i.nodeType==Node.TEXT_NODE&&0===i.textContent.replace(/\n|\r/g,"").length;)i=i.previousSibling;i&&r&&"BR"!=i.tagName&&!t.node.isBlock(i)&&!a&&r.textContent.replace(/\u200B/g,"").length>0&&i.textContent.length>0&&!t.node.hasClass(i,"fr-marker")&&(t.el==r&&!a&&t.opts.enter==e.FE.ENTER_BR&&t.browser.msie||(o&&t.selection.save(),n.parentNode.removeChild(n),o&&t.selection.restore()))}else!r||t.node.isBlock(r)||t.node.isElement(r)||n.previousSibling||n.nextSibling||p(n.parentNode,o)}function u(){t.opts.htmlUntouched||(a(),d()),c(),t.opts.htmlUntouched||(t.spaces.normalize(null,!0),t.html.fillEmptyBlocks(),t.clean.quotes(),t.clean.lists(),t.clean.tables(),t.clean.toHTML5(),t.html.cleanBRs()),t.selection.restore(),g()}function g(){t.core.isEmpty()&&(null!=n()?t.el.querySelector(i())||t.el.querySelector(t.opts.htmlDoNotWrapTags.join(":not(.fr-marker),")+":not(.fr-marker)")||(t.core.hasFocus()?(t.$el.html("<"+n()+">"+e.FE.MARKERS+"<br/></"+n()+">"),t.selection.restore()):t.$el.html("<"+n()+"><br/></"+n()+">")):t.el.querySelector("*:not(.fr-marker):not(br)")||(t.core.hasFocus()?(t.$el.html(e.FE.MARKERS+"<br/>"),t.selection.restore()):t.$el.html("<br/>")))}function h(e,n){t.opts.htmlExecuteScripts?e.html(n):e.get(0).innerHTML=n}function m(e){var t;return(t=/:not\(([^\)]*)\)/g).test(e)&&(e=e.replace(t,"     $1 ")),100*(e.match(/(#[^\s\+>~\.\[:]+)/g)||[]).length+10*(e.match(/(\[[^\]]+\])/g)||[]).length+10*(e.match(/(\.[^\s\+>~\.\[:]+)/g)||[]).length+10*(e.match(/(:[\w-]+\([^\)]*\))/gi)||[]).length+10*(e.match(/(:[^\s\+>~\.\[:]+)/g)||[]).length+(e.match(/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi)||[]).length+((e=(e=e.replace(/[\*\s\+>~]/g," ")).replace(/[#\.]/g," ")).match(/([^\s\+>~\.\[:]+)/g)||[]).length}function E(e){if(t.events.trigger("html.processGet",[e]),e&&e.getAttribute&&""===e.getAttribute("class")&&e.removeAttribute("class"),e&&e.nodeType==Node.ELEMENT_NODE)for(var n=e.querySelectorAll('[class=""]'),o=0;o<n.length;o++)n[o].removeAttribute("class")}function v(e,t){return e[3]-t[3]}function b(n){var o=null;if(void 0===n&&(o=t.selection.element()),t.opts.keepFormatOnDelete)return!1;var r,i,a=o?(o.textContent.match(/\u200B/g)||[]).length-o.querySelectorAll(".fr-marker").length:0;if((t.el.textContent.match(/\u200B/g)||[]).length-t.el.querySelectorAll(".fr-marker").length==a)return!1;do{i=!1,r=t.el.querySelectorAll("*:not(.fr-marker)");for(var s=0;s<r.length;s++){var l=r[s];if(o!=l){var d=l.textContent;0===l.children.length&&1===d.length&&8203==d.charCodeAt(0)&&(e(l).remove(),i=!0)}}}while(i)}return{defaultTag:n,isPreformatted:o,emptyBlocks:r,emptyBlockTagsQuery:function(){return e.FE.BLOCK_TAGS.join(":empty, ")+":empty"},blockTagsQuery:i,fillEmptyBlocks:function(n){for(var o=r(n),i=0;i<o.length;i++){var a=o[i];"false"===a.getAttribute("contenteditable")||a.querySelector(t.opts.htmlAllowedEmptyTags.join(":not(.fr-marker),")+":not(.fr-marker)")||t.node.isVoid(a)||"TABLE"!=a.tagName&&"TBODY"!=a.tagName&&"TR"!=a.tagName&&a.appendChild(t.doc.createElement("br"))}if(t.browser.msie&&t.opts.enter==e.FE.ENTER_BR){var s=t.node.contents(t.el);s.length&&s[s.length-1].nodeType==Node.TEXT_NODE&&t.$el.append("<br>")}},cleanEmptyTags:a,cleanWhiteTags:b,cleanBlankSpaces:c,blocks:function(){return t.$el.get(0).querySelectorAll(i())},getDoctype:function(e){var t=e.doctype,n="<!DOCTYPE html>";return t&&(n="<!DOCTYPE "+t.name+(t.publicId?' PUBLIC "'+t.publicId+'"':"")+(!t.publicId&&t.systemId?" SYSTEM":"")+(t.systemId?' "'+t.systemId+'"':"")+">"),n},set:function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var o=n?t.clean.html(e||"",[],[],!1):e;h(t.$el,o);var r=t.edit.isDisabled();t.edit.on(),u(),t.opts.useClasses||(t.$el.find("[fr-original-class]").each((function(){this.setAttribute("class",this.getAttribute("fr-original-class")),this.removeAttribute("fr-original-class")})),t.$el.find("[fr-original-style]").each((function(){this.setAttribute("style",this.getAttribute("fr-original-style")),this.removeAttribute("fr-original-style")}))),r&&t.edit.off(),t.events.trigger("html.set")},get:function(e,n){if(!t.$wp)return t.$oel.clone().removeClass("fr-view").removeAttr("contenteditable").get(0).outerHTML;var o="";t.events.trigger("html.beforeGet");var r,i,a=[],s={},l=[];if(!t.opts.useClasses&&!n){var d=new RegExp("^"+t.opts.htmlIgnoreCSSProperties.join("$|^")+"$","gi");for(r=0;r<t.doc.styleSheets.length;r++){var c,f=0;try{c=t.doc.styleSheets[r].cssRules,t.doc.styleSheets[r].ownerNode&&"STYLE"==t.doc.styleSheets[r].ownerNode.nodeType&&(f=1)}catch(e){}if(c)for(var p=0,u=c.length;p<u;p++)if(c[p].selectorText&&c[p].style.cssText.length>0){var g,h=c[p].selectorText.replace(/body |\.fr-view /g,"").replace(/::/g,":");try{g=t.el.querySelectorAll(h)}catch(e){g=[]}for(i=0;i<g.length;i++){!g[i].getAttribute("fr-original-style")&&g[i].getAttribute("style")?(g[i].setAttribute("fr-original-style",g[i].getAttribute("style")),a.push(g[i])):g[i].getAttribute("fr-original-style")||a.push(g[i]),s[g[i]]||(s[g[i]]={});for(var b=1e3*f+m(c[p].selectorText),T=c[p].style.cssText.split(";"),S=0;S<T.length;S++){var y=T[S].trim().split(":")[0];y.match(d)||(s[g[i]][y]||(s[g[i]][y]=0,(g[i].getAttribute("fr-original-style")||"").indexOf(y+":")>=0&&(s[g[i]][y]=1e4)),b>=s[g[i]][y]&&(s[g[i]][y]=b,T[S].trim().length&&l.push([g[i],y.trim(),T[S].trim().split(":")[1].trim(),b])))}}}}for(l.sort(v),r=0;r<l.length;r++){var N=l[r];N[0].style[N[1]]=N[2]}for(r=0;r<a.length;r++)if(a[r].getAttribute("class")&&(a[r].setAttribute("fr-original-class",a[r].getAttribute("class")),a[r].removeAttribute("class")),(a[r].getAttribute("fr-original-style")||"").trim().length>0){var _=a[r].getAttribute("fr-original-style").split(";");for(i=0;i<_.length;i++)_[i].indexOf(":")>0&&(a[r].style[_[i].split(":")[0].trim()]=_[i].split(":")[1].trim())}}if(t.core.isEmpty()||(void 0===e&&(e=!1),o=t.$el.html()),!t.opts.useClasses&&!n)for(r=0;r<a.length;r++)a[r].getAttribute("fr-original-class")&&(a[r].setAttribute("class",a[r].getAttribute("fr-original-class")),a[r].removeAttribute("fr-original-class")),a[r].getAttribute("fr-original-style")?(a[r].setAttribute("style",a[r].getAttribute("fr-original-style")),a[r].removeAttribute("fr-original-style")):a[r].removeAttribute("style");t.opts.htmlSimpleAmpersand&&(o=o.replace(/\&amp;/gi,"&")),t.events.trigger("html.afterGet"),e||(o=o.replace(/<span[^>]*? class\s*=\s*["']?fr-marker["']?[^>]+>\u200b<\/span>/gi,"")),o=t.clean.invisibleSpaces(o),o=t.clean.exec(o,E);var C=t.events.chainTrigger("html.get",o);return"string"==typeof C&&(o=C),o.replace(/<pre(?:[\w\W]*?)>(?:[\w\W]*?)<\/pre>/g,(function(e){return e.replace(/<br>/g,"\n")}))},getSelected:function(){var n,o,r=function(n,o){for(;o&&(o.nodeType==Node.TEXT_NODE||!t.node.isBlock(o))&&!t.node.isElement(o);)o&&o.nodeType!=Node.TEXT_NODE&&e(n).wrapInner(t.node.openTagString(o)+t.node.closeTagString(o)),o=o.parentNode;o&&n.innerHTML==o.innerHTML&&(n.innerHTML=o.outerHTML)},i="";if(void 0!==t.win.getSelection){t.browser.mozilla&&(t.selection.save(),t.$el.find('.fr-marker[data-type="false"]').length>1&&(t.$el.find('.fr-marker[data-type="false"][data-id="0"]').remove(),t.$el.find('.fr-marker[data-type="false"]:last').attr("data-id","0"),t.$el.find(".fr-marker").not('[data-id="0"]').remove()),t.selection.restore());for(var a=t.selection.ranges(),s=0;s<a.length;s++){var l=document.createElement("div");l.appendChild(a[s].cloneContents());var d=l.children;if(d.length){var c=d[d.length-1];("P"==c.tagName&&t.opts.enter==e.FroalaEditor.ENTER_P||"DIV"==c.tagName&&t.opts.enter==e.FroalaEditor.ENTER_DIV)&&t.node.isEmpty(c)&&l.removeChild(c)}r(l,(n=void 0,o=void 0,o=null,t.win.getSelection?(n=t.win.getSelection())&&n.rangeCount&&(o=n.getRangeAt(0).commonAncestorContainer).nodeType!=Node.ELEMENT_NODE&&(o=o.parentNode):(n=t.doc.selection)&&"Control"!=n.type&&(o=n.createRange().parentElement()),null!=o&&(e.inArray(t.el,e(o).parents())>=0||o==t.el)?o:null)),e(l).find(".fr-element").length>0&&(l=t.el),i+=l.innerHTML}}else void 0!==t.doc.selection&&"Text"==t.doc.selection.type&&(i=t.doc.selection.createRange().htmlText);return i},insert:function(n,o,r){var a,s,l;if(t.selection.isCollapsed()||t.selection.remove(),a=(a=o?n:t.clean.html(n)).replace(/\r|\n/g," "),n.indexOf('class="fr-marker"')<0&&(s=a,(l=t.doc.createElement("div")).innerHTML=s,t.selection.setAtEnd(l),a=l.innerHTML),t.core.isEmpty()&&!t.opts.keepFormatOnDelete)t.el.innerHTML=a;else{var d=t.markers.insert();if(d){t.node.isLastSibling(d)&&e(d).parent().hasClass("fr-deletable")&&e(d).insertAfter(e(d).parent());var c=t.node.blockParent(d);if((function(e){var n=t.doc.createElement("div");return n.innerHTML=e,null!==n.querySelector(i())}(a)||r)&&(t.node.deepestParent(d)||c&&"LI"==c.tagName)){if(!(d=t.markers.split()))return!1;d.outerHTML=a}else d.outerHTML=a}else t.el.innerHTML=t.el.innerHTML+a}u(),t.events.trigger("html.inserted")},wrap:d,unwrap:function(){t.$el.find("div.fr-temp-div").each((function(){e(this).data("empty")||"LI"==this.parentNode.tagName||t.node.isBlock(this.nextSibling)&&!e(this.nextSibling).hasClass("fr-temp-div")?e(this).replaceWith(e(this).html()):e(this).replaceWith(e(this).html()+"<br>")})),t.$el.find(".fr-temp-div").removeClass("fr-temp-div").filter((function(){return""===e(this).attr("class")})).removeAttr("class")},escapeEntities:function(e){return e.replace(/</gi,"&lt;").replace(/>/gi,"&gt;").replace(/"/gi,"&quot;").replace(/'/gi,"&#39;")},checkIfEmpty:g,extractNode:function(e,t){return f(e,"<"+t+"[^>]*?>([\\w\\W]*)</"+t+">",1)},extractNodeAttrs:function(n,o){var r=e("<div "+(f(n,"<"+o+"([^>]*?)>",1)||"")+">");return t.node.rawAttributes(r.get(0))},extractDoctype:function(e){return f(e,"<!DOCTYPE([^>]*?)>",0)||"<!DOCTYPE html>"},cleanBRs:function(e,n){var o,r=null;if(e)for(r=function(){var e,n,o=t.selection.element(),r=[];if(e=t.node.isBlock(o)?o:t.node.blockParent(o)){var i=e.nextSibling,a=e.previousSibling;e&&r.indexOf(e)<0&&r.push(e),a&&t.node.isBlock(a)&&r.indexOf(a)<0&&r.push(a),i&&t.node.isBlock(i)&&r.indexOf(i)<0&&r.push(i)}var s=[];for(n=0;n<r.length;n++)for(var l=r[n].querySelectorAll("br"),d=0;d<l.length;d++)s.indexOf(l[d])<0&&s.push(l[d]);if(o.parentNode==t.el){var c=t.el.children;for(n=0;n<c.length;n++)"BR"==c[n].tagName&&s.indexOf(c[n])<0&&s.push(c[n])}return s}(),o=0;o<r.length;o++)p(r[o],n);else for(r=t.el.getElementsByTagName("br"),o=0;o<r.length;o++)p(r[o],n)},_init:function(){var e=function(){b()};t.events.on("mouseup",e),t.events.on("keydown",e),t.events.on("contentChanged",g)}}},e.extend(e.FE.DEFAULTS,{height:null,heightMax:null,heightMin:null,width:null}),e.FE.MODULES.size=function(e){function t(){e.opts.heightMin?e.$el.css("minHeight",e.opts.heightMin):e.$el.css("minHeight",""),e.opts.heightMax?(e.$wp.css("maxHeight",e.opts.heightMax),e.$wp.css("overflow","auto")):(e.$wp.css("maxHeight",""),e.$wp.css("overflow","")),e.opts.height?(e.$wp.height(e.opts.height),e.$wp.css("overflow","auto"),e.$el.css("minHeight",e.opts.height-e.helpers.getPX(e.$el.css("padding-top"))-e.helpers.getPX(e.$el.css("padding-bottom")))):(e.$wp.css("height",""),e.opts.heightMin||e.$el.css("minHeight",""),e.opts.heightMax||e.$wp.css("overflow","")),e.opts.width&&e.$box.width(e.opts.width)}return{_init:function(){if(!e.$wp)return!1;t()},refresh:t}},e.extend(e.FE.DEFAULTS,{language:null}),e.FE.LANGUAGE={},e.FE.MODULES.language=function(t){var n;return{_init:function(){e.FE.LANGUAGE&&(n=e.FE.LANGUAGE[t.opts.language]),n&&n.direction&&(t.opts.direction=n.direction)},translate:function(e){return n&&n.translation[e]?n.translation[e]:e}}},e.extend(e.FE.DEFAULTS,{placeholderText:"Type something"}),e.FE.MODULES.edit=function(e){function t(){if(e.browser.mozilla)try{e.doc.execCommand("enableObjectResizing",!1,"false"),e.doc.execCommand("enableInlineTableEditing",!1,"false")}catch(e){}if(e.browser.msie)try{e.doc.body.addEventListener("mscontrolselect",(function(e){return e.preventDefault(),!1}))}catch(e){}}var n=!1;return{on:function(){e.$wp?(e.$el.prop("contenteditable",!0),e.$el.tcbRemoveClass("fr-disabled"),e.$tb&&e.$tb.tcbRemoveClass("fr-disabled"),t()):e.$el.is("a")&&e.$el.prop("contenteditable",!0),n=!1},off:function(){e.$wp?(e.$el.attr("contenteditable",!1),e.$el.addClass("fr-disabled").attr("aria-disabled",!0),e.$tb&&e.$tb.addClass("fr-disabled").attr("aria-disabled",!0)):e.$el.is("a")&&e.$el.attr("contenteditable",!1),n=!0},disableDesign:t,isDisabled:function(){return n}}},e.extend(e.FE.DEFAULTS,{editorClass:null,requestWithCORS:!0,requestWithCredentials:!1,requestHeaders:{},useClasses:!0,spellcheck:!0,direction:"auto",zIndex:1,disableRightClick:!1,scrollableContainer:"body",keepFormatOnDelete:!1,theme:null}),e.FE.MODULES.core=function(t){return{_init:function(){if(e.FE.INSTANCES.push(t),t.$wp){t.$box.addClass("fr-box"+(t.opts.editorClass?" "+t.opts.editorClass:"")),t.$wp.addClass("fr-wrapper"),t.$el.addClass("fr-element fr-view"),"auto"!=t.opts.direction&&t.$box.removeClass("fr-ltr fr-rtl").addClass("fr-"+t.opts.direction),t.$el.attr("dir",t.opts.direction),t.$wp.attr("dir",t.opts.direction),t.opts.zIndex>1&&t.$box.css("z-index",t.opts.zIndex),t.opts.theme&&t.$box.addClass(t.opts.theme+"-theme"),t.html.set(t._original_html,!1),t.$el.attr("spellcheck",t.opts.spellcheck),t.helpers.isMobile()&&(t.$el.attr("autocomplete",t.opts.spellcheck?"on":"off"),t.$el.attr("autocorrect",t.opts.spellcheck?"on":"off"),t.$el.attr("autocapitalize",t.opts.spellcheck?"on":"off")),t.opts.disableRightClick&&t.events.$on(t.$el,"contextmenu",(function(e){if(2==e.button)return!1}));try{t.doc.execCommand("styleWithCSS",!1,!1)}catch(e){}}"TEXTAREA"==t.$oel.get(0).tagName&&(t.events.on("contentChanged",(function(){t.$oel.val(t.html.get())})),t.events.on("form.submit",(function(){t.$oel.val(t.html.get())})),t.events.on("form.reset",(function(){t.html.set(t._original_html)})),t.$oel.val(t.html.get())),t.helpers.isIOS()&&t.events.$on(t.$doc,"selectionchange",(function(){t.$doc.get(0).hasFocus()||t.$win.get(0).focus()})),t.events.trigger("init")},destroy:function(e){"TEXTAREA"==t.$oel.get(0).tagName&&t.$oel.val(e),t.$wp&&("TEXTAREA"==t.$oel.get(0).tagName?(t.$el.html(""),t.$wp.html(""),t.$box.replaceWith(t.$oel),t.$oel.show()):t.$oel.get(0).getAttribute("class").includes("tve_btn_txt")?(t.$wp.html(e),t.$box.removeClass("fr-view fr-ltr fr-box "+(t.opts.editorClass||"")),t.opts.theme&&t.$box.addClass(t.opts.theme+"-theme")):(t.$wp.replaceWith(e),t.$el.html(""),t.$box.removeClass("fr-view fr-ltr fr-box "+(t.opts.editorClass||"")),t.opts.theme&&t.$box.addClass(t.opts.theme+"-theme"))),this.$wp=null,this.$el=null,this.el=null,this.$box=null},isEmpty:function(){return t.node.isEmpty(t.el)},hasFocus:function(){return t.browser.mozilla&&t.helpers.isMobile()?t.selection.inEditor():t.node.hasFocus(t.el)||t.$el.find("*:focus").length>0},sameInstance:function(e){if(!e)return!1;var n=e.data("instance");return!!n&&n.id==t.id}}},e.FE.MODULES.cursorLists=function(t){function n(e){for(var t=e;"LI"!=t.tagName;)t=t.parentNode;return t}function o(e){for(var n=e;!t.node.isList(n);)n=n.parentNode;return n}function r(r){var i,a=n(r),s=a.nextSibling,l=a.previousSibling,d=t.html.defaultTag();if(t.node.isEmpty(a,!0)&&s){for(var c="",f="",p=r.parentNode;!t.node.isList(p)&&p.parentNode&&"LI"!==p.parentNode.tagName;)c=t.node.openTagString(p)+c,f+=t.node.closeTagString(p),p=p.parentNode;c=t.node.openTagString(p)+c,f+=t.node.closeTagString(p);var u;for(u=p.parentNode&&"LI"==p.parentNode.tagName?f+"<li>"+e.FE.MARKERS+"<br>"+c:d?f+"<"+d+">"+e.FE.MARKERS+"<br></"+d+">"+c:f+e.FE.MARKERS+"<br>"+c,e(a).html('<span id="fr-break"></span>');["UL","OL"].indexOf(p.tagName)<0||p.parentNode&&"LI"===p.parentNode.tagName;)p=p.parentNode;var g=t.node.openTagString(p)+e(p).html()+t.node.closeTagString(p);g=g.replace(/<span id="fr-break"><\/span>/g,u),e(p).replaceWith(g),t.$el.find("li:empty").remove()}else if(l&&s||!t.node.isEmpty(a,!0)){for(var h="<br>",m=r.parentNode;m&&"LI"!=m.tagName;)h=t.node.openTagString(m)+h+t.node.closeTagString(m),m=m.parentNode;e(a).before("<li>"+h+"</li>"),e(r).remove()}else l?((i=o(a)).parentNode&&"LI"==i.parentNode.tagName?e(i.parentNode).after("<li>"+e.FE.MARKERS+"<br></li>"):d?e(i).after("<"+d+">"+e.FE.MARKERS+"<br></"+d+">"):e(i).after(e.FE.MARKERS+"<br>"),e(a).remove()):((i=o(a)).parentNode&&"LI"==i.parentNode.tagName?s?e(i.parentNode).before("<li>"+e.FE.MARKERS+"<br></li>"):e(i.parentNode).after("<li>"+e.FE.MARKERS+"<br></li>"):d?e(i).before("<"+d+">"+e.FE.MARKERS+"<br></"+d+">"):e(i).before(e.FE.MARKERS+"<br>"),e(a).remove())}return{_startEnter:r,_middleEnter:function(o){for(var r=n(o),i="",a=o,s="",l="";a!=r;){var d="A"==(a=a.parentNode).tagName&&t.cursor.isAtEnd(o,a)?"fr-to-remove":"";s=t.node.openTagString(e(a).clone().addClass(d).get(0))+s,l=t.node.closeTagString(a)+l}i=l+i+s+e.FE.MARKERS,e(o).replaceWith('<span id="fr-break"></span>');var c=t.node.openTagString(r)+e(r).html()+t.node.closeTagString(r);c=c.replace(/<span id="fr-break"><\/span>/g,i),e(r).replaceWith(c)},_endEnter:function(o){var i=n(o);if(t.opts.htmlUntouched&&t.node.isEmpty(i))return r(o);for(var a=e.FE.MARKERS,s="",l=o,d=!1;l!=i;){var c="A"==(l=l.parentNode).tagName&&t.cursor.isAtEnd(o,l)?"fr-to-remove":"";d||l==i||t.node.isBlock(l)||(d=!0,s+=e.FE.INVISIBLE_SPACE),s=t.node.openTagString(e(l).clone().addClass(c).get(0))+s,a+=t.node.closeTagString(l)}var f=s+a;e(o).remove(),e(i).after(f)},_backspace:function(r){var i=n(r),a=i.previousSibling;if(a){a=e(a).find(t.html.blockTagsQuery()).get(-1)||a,e(r).replaceWith(e.FE.MARKERS);var s=t.node.contents(a);s.length&&"BR"==s[s.length-1].tagName&&e(s[s.length-1]).remove(),e(i).find(t.html.blockTagsQuery()).not("ol, ul, table").each((function(){this.parentNode==i&&e(this).replaceWith(e(this).html()+(t.node.isEmpty(this)?"":"<br>"))}));for(var l,d=t.node.contents(i)[0];d&&!t.node.isList(d);)l=d.nextSibling,e(a).append(d),d=l;for(a=i.previousSibling;d;)l=d.nextSibling,e(a).append(d),d=l;e(i).remove()}else{var c=o(i);if(e(r).replaceWith(e.FE.MARKERS),c.parentNode&&"LI"==c.parentNode.tagName){var f=c.previousSibling;t.node.isBlock(f)?(e(i).find(t.html.blockTagsQuery()).not("ol, ul, table").each((function(){this.parentNode==i&&e(this).replaceWith(e(this).html()+(t.node.isEmpty(this)?"":"<br>"))})),e(f).append(e(i).html())):e(c).before(e(i).html())}else{var p=t.html.defaultTag();p&&0===e(i).find(t.html.blockTagsQuery()).length?e(c).before("<"+p+">"+e(i).html()+"</"+p+">"):(e(c).before(e(i).html()),t.html.wrap())}e(i).remove(),0===e(c).find("li").length&&e(c).remove()}},_del:function(o){var r,i=n(o),a=i.nextSibling;if(a){(r=t.node.contents(a)).length&&"BR"==r[0].tagName&&e(r[0]).remove(),e(a).find(t.html.blockTagsQuery()).not("ol, ul, table").each((function(){this.parentNode==a&&e(this).replaceWith(e(this).html()+(t.node.isEmpty(this)?"":"<br>"))}));for(var s,l=o,d=t.node.contents(a)[0];d&&!t.node.isList(d);)s=d.nextSibling,e(l).after(d),l=d,d=s;for(;d;)s=d.nextSibling,e(i).append(d),d=s;e(o).replaceWith(e.FE.MARKERS),e(a).remove()}else{for(var c=i;!c.nextSibling&&c!=t.el;)c=c.parentNode;if(c==t.el)return!1;if(c=c.nextSibling,t.node.isBlock(c))e.FE.NO_DELETE_TAGS.indexOf(c.tagName)<0&&(e(o).replaceWith(e.FE.MARKERS),(r=t.node.contents(i)).length&&"BR"==r[r.length-1].tagName&&e(r[r.length-1]).remove(),e(i).append(e(c).html()),e(c).remove());else for((r=t.node.contents(i)).length&&"BR"==r[r.length-1].tagName&&e(r[r.length-1]).remove(),e(o).replaceWith(e.FE.MARKERS);c&&!t.node.isBlock(c)&&"BR"!=c.tagName;)e(i).append(e(c)),c=c.nextSibling}}}},e.FE.NO_DELETE_TAGS=["TH","TD","TR","TABLE","FORM"],e.FE.SIMPLE_ENTER_TAGS=["TH","TD","LI","DL","DT","FORM"],e.FE.MODULES.cursor=function(t){function n(e){return!!e&&(!!t.node.isBlock(e)||(e.nextSibling&&e.nextSibling.nodeType==Node.TEXT_NODE&&0===e.nextSibling.textContent.replace(/\u200b/g,"").length?n(e.nextSibling):!(e.nextSibling&&(!e.previousSibling||"BR"!=e.nextSibling.tagName||e.nextSibling.nextSibling))&&n(e.parentNode)))}function o(e){return!!e&&(!!t.node.isBlock(e)||(e.previousSibling&&e.previousSibling.nodeType==Node.TEXT_NODE&&0===e.previousSibling.textContent.replace(/\u200b/g,"").length?o(e.previousSibling):!e.previousSibling&&o(e.parentNode)))}function r(e,n){return!!e&&e!=t.$wp.get(0)&&(e.previousSibling&&e.previousSibling.nodeType==Node.TEXT_NODE&&0===e.previousSibling.textContent.replace(/\u200b/g,"").length?r(e.previousSibling,n):!e.previousSibling&&(e.parentNode==n||r(e.parentNode,n)))}function i(e,n){return!!e&&e!=t.$wp.get(0)&&(e.nextSibling&&e.nextSibling.nodeType==Node.TEXT_NODE&&0===e.nextSibling.textContent.replace(/\u200b/g,"").length?i(e.nextSibling,n):!(e.nextSibling&&(!e.previousSibling||"BR"!=e.nextSibling.tagName||e.nextSibling.nextSibling))&&(e.parentNode==n||i(e.parentNode,n)))}function a(n){return e(n).parentsUntil(t.$el,"LI").length>0&&0===e(n).parentsUntil("LI","TABLE").length}function s(e,t){var n=new RegExp("(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\u0023-\\u0039]\\ufe0f?\\u20e3|\\u3299|\\u3297|\\u303d|\\u3030|\\u24c2|\\ud83c[\\udd70-\\udd71]|\\ud83c[\\udd7e-\\udd7f]|\\ud83c\\udd8e|\\ud83c[\\udd91-\\udd9a]|\\ud83c[\\udde6-\\uddff]|[\\ud83c[\\ude01-\\ude02]|\\ud83c\\ude1a|\\ud83c\\ude2f|[\\ud83c[\\ude32-\\ude3a]|[\\ud83c[\\ude50-\\ude51]|\\u203c|\\u2049|[\\u25aa-\\u25ab]|\\u25b6|\\u25c0|[\\u25fb-\\u25fe]|\\u00a9|\\u00ae|\\u2122|\\u2139|\\ud83c\\udc04|[\\u2600-\\u26FF]|\\u2b05|\\u2b06|\\u2b07|\\u2b1b|\\u2b1c|\\u2b50|\\u2b55|\\u231a|\\u231b|\\u2328|\\u23cf|[\\u23e9-\\u23f3]|[\\u23f8-\\u23fa]|\\ud83c\\udccf|\\u2934|\\u2935|[\\u2190-\\u21ff])"+(t?"":"$"),"i"),o=e.match(n);return o?o[0].length:1}function l(n){for(var o,r=n;!r.previousSibling;)if(r=r.parentNode,t.node.isElement(r))return!1;if(r=r.previousSibling,!t.node.isBlock(r)&&t.node.isEditable(r)){for(o=t.node.contents(r);r.nodeType!=Node.TEXT_NODE&&!t.node.isDeletable(r)&&o.length&&t.node.isEditable(r);)r=o[o.length-1],o=t.node.contents(r);if(r.nodeType==Node.TEXT_NODE){if(t.helpers.isIOS())return!0;var i=r.textContent,a=i.length;t.opts.tabSpaces&&i.length>=t.opts.tabSpaces&&0===i.substr(i.length-t.opts.tabSpaces,i.length-1).replace(/ /g,"").replace(new RegExp(e.FE.UNICODE_NBSP,"g"),"").length&&(a=i.length-t.opts.tabSpaces),r.textContent=i.substring(0,a-s(i));var l=i.length!=r.textContent.length;0===r.textContent.length?l&&t.opts.keepFormatOnDelete&&!["strong","em"].includes(r.parentNode.tagName.toLowerCase())?e(r).after(e.FE.INVISIBLE_SPACE+e.FE.MARKERS):(2!=r.parentNode.childNodes.length||r.parentNode!=n.parentNode)&&1!=r.parentNode.childNodes.length||t.node.isBlock(r.parentNode)||t.node.isElement(r.parentNode)?(e(r).after(e.FE.MARKERS),t.node.isElement(r.parentNode)&&!n.nextSibling&&r.previousSibling&&"BR"==r.previousSibling.tagName&&e(n).after("<br>"),r.parentNode.removeChild(r)):(e(r.parentNode).after(e.FE.MARKERS),e(r.parentNode).remove()):e(r).after(e.FE.MARKERS)}else t.node.isDeletable(r)?(e(r).after(e.FE.MARKERS),e(r).remove()):n.nextSibling&&"BR"==n.nextSibling.tagName&&t.node.isVoid(r)&&"BR"!=r.tagName?(e(n.nextSibling).remove(),e(n).replaceWith(e.FE.MARKERS)):!1!==t.events.trigger("node.remove",[e(r)])&&(e(r).after(e.FE.MARKERS),e(r).remove())}else if(e.FE.NO_DELETE_TAGS.indexOf(r.tagName)<0&&(t.node.isEditable(r)||t.node.isDeletable(r)))if(t.node.isDeletable(r))e(n).replaceWith(e.FE.MARKERS),e(r).remove();else if(t.node.isEmpty(r)&&!t.node.isList(r))e(r).remove(),e(n).replaceWith(e.FE.MARKERS);else{for(t.node.isList(r)&&(r=e(r).find("li:last").get(0)),(o=t.node.contents(r))&&"BR"==o[o.length-1].tagName&&e(o[o.length-1]).remove(),o=t.node.contents(r);o&&t.node.isBlock(o[o.length-1]);)r=o[o.length-1],o=t.node.contents(r);e(r).append(e.FE.MARKERS);for(var d=n;!d.previousSibling;)d=d.parentNode;for(;d&&"BR"!==d.tagName&&!t.node.isBlock(d);){var c=d;d=d.nextSibling,e(r).append(c)}d&&"BR"==d.tagName&&e(d).remove(),e(n).remove()}else n.nextSibling&&"BR"==n.nextSibling.tagName&&e(n.nextSibling).remove()}function d(n){var o=e(n).parentsUntil(t.$el,"BLOCKQUOTE").length>0,r=t.node.deepestParent(n,[],!o);if(r&&"BLOCKQUOTE"==r.tagName){var i=t.node.deepestParent(n,[e(n).parentsUntil(t.$el,"BLOCKQUOTE").get(0)]);i&&i.nextSibling&&(r=i)}if(null!==r){var a,s=r.nextSibling;if(t.node.isBlock(r)&&(t.node.isEditable(r)||t.node.isDeletable(r))&&s&&e.FE.NO_DELETE_TAGS.indexOf(s.tagName)<0)if(t.node.isDeletable(s))e(s).remove(),e(n).replaceWith(e.FE.MARKERS);else if(t.node.isBlock(s)&&t.node.isEditable(s))if(t.node.isList(s))if(t.node.isEmpty(r,!0))e(r).remove(),e(s).find("li:first").prepend(e.FE.MARKERS);else{var l=e(s).find("li:first");"BLOCKQUOTE"==r.tagName&&(a=t.node.contents(r)).length&&t.node.isBlock(a[a.length-1])&&(r=a[a.length-1]),0===l.find("ul, ol").length&&(e(n).replaceWith(e.FE.MARKERS),l.find(t.html.blockTagsQuery()).not("ol, ul, table").each((function(){this.parentNode==l.get(0)&&e(this).replaceWith(e(this).html()+(t.node.isEmpty(this)?"":"<br>"))})),e(r).append(t.node.contents(l.get(0))),l.remove(),0===e(s).find("li").length&&e(s).remove())}else{if((a=t.node.contents(s)).length&&"BR"==a[0].tagName&&e(a[0]).remove(),"BLOCKQUOTE"!=s.tagName&&"BLOCKQUOTE"==r.tagName)for(a=t.node.contents(r);a.length&&t.node.isBlock(a[a.length-1]);)r=a[a.length-1],a=t.node.contents(r);else if("BLOCKQUOTE"==s.tagName&&"BLOCKQUOTE"!=r.tagName)for(a=t.node.contents(s);a.length&&t.node.isBlock(a[0]);)s=a[0],a=t.node.contents(s);e(n).replaceWith(e.FE.MARKERS),e(r).append(s.innerHTML),e(s).remove()}else{for(e(n).replaceWith(e.FE.MARKERS);s&&"BR"!==s.tagName&&!t.node.isBlock(s)&&t.node.isEditable(s);){var d=s;s=s.nextSibling,e(r).append(d)}s&&"BR"==s.tagName&&t.node.isEditable(s)&&e(s).remove()}}}function c(){for(var e=t.el.querySelectorAll("blockquote:empty"),n=0;n<e.length;n++)e[n].parentNode.removeChild(e[n])}function f(n,o,r){var a,s=t.node.deepestParent(n,[],!r);if(s&&"BLOCKQUOTE"==s.tagName)return i(n,s)?((a=t.html.defaultTag())?e(s).after("<"+a+">"+e.FE.MARKERS+"<br></"+a+">"):e(s).after(e.FE.MARKERS+"<br>"),e(n).remove(),!1):(u(n,o,r),!1);if(null==s)(a=t.html.defaultTag())&&t.node.isElement(n.parentNode)?e(n).replaceWith("<"+a+">"+e.FE.MARKERS+"<br></"+a+">"):!n.previousSibling||e(n.previousSibling).is("br")||n.nextSibling?e(n).replaceWith("<br>"+e.FE.MARKERS):e(n).replaceWith("<br>"+e.FE.MARKERS+"<br>");else{var l=n,d="";t.node.isBlock(s)&&!o||(d="<br/>");var c,f="",p="",g="",h="";(a="DIV"===s.tagName?"div":t.html.defaultTag())&&t.node.isBlock(s)&&(g="<"+a+">",h="</"+a+">",s.tagName==a.toUpperCase()&&(g=t.node.openTagString(e(s).clone().removeAttr("id").get(0))));do{if(l=l.parentNode,!o||l!=s||o&&!t.node.isBlock(s))if(f+=t.node.closeTagString(l),l==s&&t.node.isBlock(s))p=g+p;else{var m="A"==l.tagName&&i(n,l)?"fr-to-remove":"";p=t.node.openTagString(e(l).clone().addClass(m).get(0))+p}}while(l!=s);d=f+d+p+(n.parentNode==s&&t.node.isBlock(s)?"":e.FE.INVISIBLE_SPACE)+e.FE.MARKERS,t.node.isBlock(s)&&!e(s).find("*:last").is("br")&&e(s).append("<br/>"),e(n).after('<span id="fr-break"></span>'),e(n).remove(),s.nextSibling&&!t.node.isBlock(s.nextSibling)||t.node.isBlock(s)||e(s).after("<br>"),c=(c=!o&&t.node.isBlock(s)?t.node.openTagString(s)+e(s).html()+h:t.node.openTagString(s)+e(s).html()+t.node.closeTagString(s)).replace(/<span id="fr-break"><\/span>/g,d),"div"===a&&s.nextSibling&&s.nextSibling.nodeType===Element.TEXT_NODE&&!s.nextSibling.textContent.trim()&&s.parentNode.removeChild(s.nextSibling),e(s).replaceWith(c)}}function p(n,o,a){var s,l=t.node.deepestParent(n,[],!a);if(l&&"TABLE"==l.tagName)return e(l).find("td:first, th:first").prepend(n),p(n,o,a);if(l&&"BLOCKQUOTE"==l.tagName){if(r(n,l))return(s=t.html.defaultTag())?e(l).before("<"+s+">"+e.FE.MARKERS+"<br></"+s+">"):e(l).before(e.FE.MARKERS+"<br>"),e(n).remove(),!1;i(n,l)?f(n,o,!0):u(n,o,!0)}if(null==l)(s=t.html.defaultTag())&&t.node.isElement(n.parentNode)?e(n).replaceWith("<"+s+">"+e.FE.MARKERS+"<br></"+s+">"):e(n).replaceWith("<br>"+e.FE.MARKERS);else{if(t.node.isBlock(l))if(o)e(n).remove(),e(l).prepend("<br>"+e.FE.MARKERS);else{if(t.node.isEmpty(l,!0))return f(n,o,a);e(l).before(t.node.openTagString(e(l).clone().removeAttr("id").get(0))+"<br>"+t.node.closeTagString(l))}else e(l).before("<br>");e(n).remove()}}function u(n,o,a){var s=t.node.deepestParent(n,[],!a);if(null==s)t.html.defaultTag()&&n.parentNode===t.el?e(n).replaceWith("<"+t.html.defaultTag()+">"+e.FE.MARKERS+"<br></"+t.html.defaultTag()+">"):(n.nextSibling&&!t.node.isBlock(n.nextSibling)||e(n).after("<br>"),e(n).replaceWith("<br>"+e.FE.MARKERS));else{var l=n,d="";"PRE"==s.tagName&&(o=!0),t.node.isBlock(s)&&!o||(d="<br>");var c="",f="";do{var p=l;if(l=l.parentNode,"BLOCKQUOTE"==s.tagName&&t.node.isEmpty(p)&&!t.node.hasClass(p,"fr-marker")&&e(p).find(n).length>0&&e(p).after(n),("BLOCKQUOTE"!=s.tagName||!i(n,l)&&!r(n,l))&&(!o||l!=s||o&&!t.node.isBlock(s))){c+=t.node.closeTagString(l);var u="A"==l.tagName&&i(n,l)?"fr-to-remove":"";f=t.node.openTagString(e(l).clone().addClass(u).removeAttr("id").get(0))+f}}while(l!=s);var g=s==n.parentNode&&t.node.isBlock(s)||n.nextSibling;if("BLOCKQUOTE"==s.tagName){n.previousSibling&&t.node.isBlock(n.previousSibling)&&n.nextSibling&&"BR"==n.nextSibling.tagName&&(e(n.nextSibling).after(n),n.nextSibling&&"BR"==n.nextSibling.tagName&&e(n.nextSibling).remove());var h=t.html.defaultTag();d=c+d+(h?"<"+h+">":"")+e.FE.MARKERS+"<br>"+(h?"</"+h+">":"")+f}else d=c+d+f+(g?"":e.FE.INVISIBLE_SPACE)+e.FE.MARKERS;e(n).replaceWith('<span id="fr-break"></span>');var m=t.node.openTagString(s)+e(s).html()+t.node.closeTagString(s);m=m.replace(/<span id="fr-break"><\/span>/g,d),e(s).replaceWith(m)}}return{enter:function(r){var i=t.markers.insert();if(!i)return!0;t.el.normalize();var s=!1;e(i).parentsUntil(t.$el,"BLOCKQUOTE").length>0&&(r=!1,s=!0),e(i).parentsUntil(t.$el,"TD, TH").length&&(s=!1),n(i)?!a(i)||r||s?f(i,r,s):t.cursorLists._endEnter(i):o(i)?!a(i)||r||s?p(i,r,s):t.cursorLists._startEnter(i):!a(i)||r||s?u(i,r,s):t.cursorLists._middleEnter(i),t.$el.find(".fr-to-remove").each((function(){for(var n=t.node.contents(this),o=0;o<n.length;o++)n[o].nodeType==Node.TEXT_NODE&&(n[o].textContent=n[o].textContent.replace(/\u200B/g,""));e(this).replaceWith(this.innerHTML)})),t.html.fillEmptyBlocks(!0),t.opts.htmlUntouched||(t.html.cleanEmptyTags(),t.clean.lists()),t.spaces.normalizeAroundCursor(),t.selection.restore()},backspace:function(){var i=!1,d=t.markers.insert();if(!d)return!0;for(var f=d.parentNode;f&&!t.node.isElement(f);){if("false"===f.getAttribute("contenteditable"))return e(d).replaceWith(e.FE.MARKERS),t.selection.restore(),!1;if("true"===f.getAttribute("contenteditable"))break;f=f.parentNode}t.el.normalize();var p=d.previousSibling;if(p){var u=p.textContent;u&&u.length&&8203==u.charCodeAt(u.length-1)&&(1==u.length?e(p).remove():p.textContent=p.textContent.substr(0,u.length-s(u)))}return n(d)?i=l(d):o(d)?a(d)&&r(d,e(d).parents("li:first").get(0))?t.cursorLists._backspace(d):function(n){var o=e(n).parentsUntil(t.$el,"BLOCKQUOTE").length>0,r=t.node.deepestParent(n,[],!o);if(r&&"BLOCKQUOTE"==r.tagName){var i=t.node.deepestParent(n,[e(n).parentsUntil(t.$el,"BLOCKQUOTE").get(0)]);i&&i.previousSibling&&(r=i)}if(null!==r){var a,s=r.previousSibling;if(t.node.isBlock(r)&&t.node.isEditable(r)&&s&&e.FE.NO_DELETE_TAGS.indexOf(s.tagName)<0)if(t.node.isDeletable(s))e(s).remove(),e(n).replaceWith(e.FE.MARKERS);else if(t.node.isEditable(s))if(t.node.isBlock(s))if(t.node.isEmpty(s)&&!t.node.isList(s))e(s).remove(),e(n).after(t.opts.keepFormatOnDelete?e.FE.INVISIBLE_SPACE:"");else{if(t.node.isList(s)&&(s=e(s).find("li:last").get(0)),(a=t.node.contents(s)).length&&"BR"==a[a.length-1].tagName&&e(a[a.length-1]).remove(),"BLOCKQUOTE"==s.tagName&&"BLOCKQUOTE"!=r.tagName)for(a=t.node.contents(s);a.length&&t.node.isBlock(a[a.length-1]);)s=a[a.length-1],a=t.node.contents(s);else if("BLOCKQUOTE"!=s.tagName&&"BLOCKQUOTE"==r.tagName)for(a=t.node.contents(r);a.length&&t.node.isBlock(a[0]);)r=a[0],a=t.node.contents(r);e(n).replaceWith(e.FE.MARKERS),e(s).append(t.node.isEmpty(r)?e.FE.MARKERS:r.innerHTML),e(r).remove()}else e(n).replaceWith(e.FE.MARKERS),"BLOCKQUOTE"==r.tagName&&s.nodeType==Node.ELEMENT_NODE?e(s).remove():(e(s).after(t.node.isEmpty(r)?"":e(r).html()),e(r).remove(),"BR"==s.tagName&&e(s).remove())}}(d):i=l(d),e(d).remove(),c(),t.html.fillEmptyBlocks(!0),t.opts.htmlUntouched||(t.html.cleanEmptyTags(),t.clean.quotes(),t.clean.lists()),t.spaces.normalizeAroundCursor(),t.selection.restore(),i},del:function(){var r=t.markers.insert();if(!r)return!1;if(t.el.normalize(),n(r))if(a(r))if(0===e(r).parents("li:first").find("ul, ol").length)t.cursorLists._del(r);else{var i=e(r).parents("li:first").find("ul:first, ol:first").find("li:first");(i=i.find(t.html.blockTagsQuery()).get(-1)||i).prepend(r),t.cursorLists._backspace(r)}else d(r);else o(r),function(o){for(var r,i=o;!i.nextSibling;)if(i=i.parentNode,t.node.isElement(i))return!1;if("BR"==(i=i.nextSibling).tagName&&t.node.isEditable(i))if(i.nextSibling){if(t.node.isBlock(i.nextSibling)&&t.node.isEditable(i.nextSibling)){if(!(e.FE.NO_DELETE_TAGS.indexOf(i.nextSibling.tagName)<0))return void e(i).remove();i=i.nextSibling,e(i.previousSibling).remove()}}else if(n(i))return void(a(o)?t.cursorLists._del(o):t.node.deepestParent(i)&&((!t.node.isEmpty(t.node.blockParent(i))||(t.node.blockParent(i).nextSibling&&e.FE.NO_DELETE_TAGS.indexOf(t.node.blockParent(i).nextSibling.tagName))<0)&&e(i).remove(),d(o)));if(!t.node.isBlock(i)&&t.node.isEditable(i)){for(r=t.node.contents(i);i.nodeType!=Node.TEXT_NODE&&r.length&&!t.node.isDeletable(i)&&t.node.isEditable(i);)i=r[0],r=t.node.contents(i);i.nodeType==Node.TEXT_NODE?(e(i).before(e.FE.MARKERS),i.textContent.length&&(i.textContent=i.textContent.substring(s(i.textContent,!0),i.textContent.length))):(t.node.isDeletable(i)||!1!==t.events.trigger("node.remove",[e(i)]))&&(e(i).before(e.FE.MARKERS),e(i).remove()),e(o).remove()}else if(e.FE.NO_DELETE_TAGS.indexOf(i.tagName)<0&&(t.node.isEditable(i)||t.node.isDeletable(i)))if(t.node.isDeletable(i))e(o).replaceWith(e.FE.MARKERS),e(i).remove();else if(t.node.isList(i))o.previousSibling?(e(i).find("li:first").prepend(o),t.cursorLists._backspace(o)):(e(i).find("li:first").prepend(e.FE.MARKERS),e(o).remove());else if((r=t.node.contents(i))&&"BR"==r[0].tagName&&e(r[0]).remove(),r&&"BLOCKQUOTE"==i.tagName){var l=r[0];for(e(o).before(e.FE.MARKERS);l&&"BR"!=l.tagName;){var c=l;l=l.nextSibling,e(o).before(c)}l&&"BR"==l.tagName&&e(l).remove()}else e(o).after(e(i).html()).after(e.FE.MARKERS),e(i).remove()}(r);e(r).remove(),c(),t.html.fillEmptyBlocks(!0),t.opts.htmlUntouched||(t.html.cleanEmptyTags(),t.clean.quotes(),t.clean.lists()),t.spaces.normalizeAroundCursor(),t.selection.restore()},isAtEnd:i,isAtStart:r}},e.FE.ENTER_P=0,e.FE.ENTER_DIV=1,e.FE.ENTER_BR=2,e.FE.KEYCODE={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,FF_HYPHEN:173,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,HYPHEN:189,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221},e.extend(e.FE.DEFAULTS,{enter:e.FE.ENTER_P,multiLine:!0,tabSpaces:0}),e.FE.MODULES.keys=function(t){var n,o,r,i=!1;function a(e,n){e.preventDefault(),e.stopPropagation(),(t.opts.multiLine||n)&&(t.selection.isCollapsed()||t.selection.remove(),t.cursor.enter(!0))}function s(){if(t.browser.mozilla&&t.selection.isCollapsed()&&!i){var e=t.selection.ranges(0),n=e.startContainer,o=e.startOffset;n&&n.nodeType==Node.TEXT_NODE&&o<=n.textContent.length&&o>0&&32==n.textContent.charCodeAt(o-1)&&(t.selection.save(),t.spaces.normalize(),t.selection.restore())}}function l(){t.selection.isFull()&&setTimeout((function(){var n=t.html.defaultTag();n?t.$el.html("<"+n+">"+e.FE.MARKERS+"<br/></"+n+">"):t.$el.html(e.FE.MARKERS+"<br/>"),t.selection.restore(),t.button.bulkRefresh(),t.undo.saveStep()}),0)}function d(){i=!1}function c(o){t.events.disableBlur(),n=!0;var r=o.which;if(16===r)return!0;if(229===r)return i=!0,!0;i=!1;const s=t.core.isEmpty();var l=g(r)&&!p(o),d=r==e.FE.KEYCODE.BACKSPACE||r==e.FE.KEYCODE.DELETE;if((t.selection.isFull()&&!t.opts.keepFormatOnDelete&&!s||d&&s&&t.opts.keepFormatOnDelete)&&(l||d)){var c=t.html.defaultTag();if(c?t.$el.html("<"+c+">"+e.FE.MARKERS+"<br/></"+c+">"):t.$el.html(e.FE.MARKERS+"<br/>"),t.selection.restore(),!g(r))return o.preventDefault(),!0}r==e.FE.KEYCODE.ENTER?o.shiftKey?a(o):function(e){t.opts.multiLine||t.opts.multiLineEnableBR?t.opts.multiLineEnableBR?a(e,!0):t.helpers.isIOS()||(e.preventDefault(),e.stopPropagation(),t.selection.isCollapsed()||t.selection.remove(),t.cursor.enter()):(e.preventDefault(),e.stopPropagation())}(o):r===e.FE.KEYCODE.BACKSPACE&&(o.metaKey||o.ctrlKey)?setTimeout((function(){t.events.disableBlur(),t.events.focus()}),0):r!=e.FE.KEYCODE.BACKSPACE||p(o)||o.altKey?r!=e.FE.KEYCODE.DELETE||p(o)||o.altKey?r==e.FE.KEYCODE.SPACE?function(n){var o=t.selection.element();if(!t.helpers.isMobile()&&(t.browser.mozilla||o&&"A"==o.tagName)){n.preventDefault(),n.stopPropagation(),t.selection.isCollapsed()||t.selection.remove();var r=t.markers.insert();if(r){var i=r.previousSibling;if(!r.nextSibling&&r.parentNode&&"A"==r.parentNode.tagName){const n=t.$el.is("a")?"beforeend":"afterend";r.parentNode.insertAdjacentHTML(n,"&nbsp;"+e.FE.MARKERS),r.parentNode.removeChild(r)}else i&&i.nodeType==Node.TEXT_NODE&&1==i.textContent.length&&160==i.textContent.charCodeAt(0)?i.textContent=i.textContent+" ":r.insertAdjacentHTML("beforebegin","&nbsp;"),r.outerHTML=e.FE.MARKERS;t.selection.restore()}}}(o):r==e.FE.KEYCODE.TAB?function(e){if(t.opts.tabSpaces>0)if(t.selection.isCollapsed()){t.undo.saveStep(),e.preventDefault(),e.stopPropagation();for(var n="",o=0;o<t.opts.tabSpaces;o++)n+="&nbsp;";t.html.insert(n),t.undo.saveStep()}else e.preventDefault(),e.stopPropagation(),e.shiftKey?t.commands.outdent():t.commands.indent()}(o):TVE.apply_filters("tcb_is_protected_text",!p(o)&&g(o.which)&&!t.selection.isCollapsed()&&!o.ctrlKey)&&t.selection.remove():s?(o.preventDefault(),o.stopPropagation()):function(e){e.preventDefault(),e.stopPropagation(),t.events.trigger("tcb_before_delete"),""===t.selection.text()?t.cursor.del():(t.selection.remove(),t.html.fillEmptyBlocks())}(o):s?(o.preventDefault(),o.stopPropagation()):function(e){t.selection.isCollapsed()?t.cursor.backspace()||(e.preventDefault(),e.stopPropagation(),n=!1):(e.preventDefault(),e.stopPropagation(),t.selection.remove(),t.html.fillEmptyBlocks(),n=!1)}(o),t.events.enableBlur()}function f(o){if(t.helpers.isAndroid&&t.browser.mozilla)return!0;if(i)return!1;if(!t.selection.isCollapsed())return!0;if(o&&(o.which===e.FE.KEYCODE.META||o.which==e.FE.KEYCODE.CTRL))return!0;if(o&&u(o.which))return!0;o&&o.which==e.FE.KEYCODE.ENTER&&t.helpers.isIOS()&&function(){var n=t.selection.element(),o=t.node.blockParent(n);if(o&&"DIV"==o.tagName&&t.selection.info(o).atStart){var r=t.html.defaultTag();o.previousSibling&&"DIV"!=o.previousSibling.tagName&&r&&"div"!=r&&(t.selection.save(),e(o).replaceWith("<"+r+">"+o.innerHTML+"</"+r+">"),t.selection.restore())}}(),o&&(o.which==e.FE.KEYCODE.ENTER||o.which==e.FE.KEYCODE.BACKSPACE||o.which>=37&&o.which<=40&&!t.browser.msie)&&(o.which==e.FE.KEYCODE.BACKSPACE&&n||function(){if(!t.$wp)return!0;var n;t.opts.height||t.opts.heightMax?(n=t.position.getBoundingRect().top,t.helpers.isIOS()&&(n-=t.helpers.scrollTop()),n>t.$wp.offset().top-t.helpers.scrollTop()+t.$wp.height()-20&&t.$wp.scrollTop(n+t.$wp.scrollTop()-(t.$wp.height()+t.$wp.offset().top)+t.helpers.scrollTop()+20)):(n=t.position.getBoundingRect().top,t.opts.toolbarBottom&&(n+=t.opts.toolbarStickyOffset),t.helpers.isIOS()&&(n-=t.helpers.scrollTop()),(n+=t.opts.toolbarStickyOffset)>t.o_win.innerHeight-20&&e(t.o_win).scrollTop(n+t.helpers.scrollTop()-t.o_win.innerHeight+20),n=t.position.getBoundingRect().top,t.opts.toolbarBottom||(n-=t.opts.toolbarStickyOffset),t.helpers.isIOS()&&(n-=t.helpers.scrollTop()),n<t.$tb.height()+20&&n>=0&&e(t.o_win).scrollTop(n+t.helpers.scrollTop()-t.$tb.height()-20))}()),t.html.cleanBRs(!0,!0);var r=t.selection.element();(function(e){if(!e)return!1;var t=e.innerHTML;return!!((t=t.replace(/<span[^>]*? class\s*=\s*["']?fr-marker["']?[^>]+>\u200b<\/span>/gi,""))&&/\u200B/.test(t)&&t.replace(/\u200B/gi,"").length>0)})(r)&&!t.node.hasClass(r,"fr-marker")&&"IFRAME"!=r.tagName&&function(e){return!t.helpers.isIOS()||0===((e.textContent||"").match(/[\u3041-\u3096\u30A0-\u30FF\u4E00-\u9FFF\u3130-\u318F\uAC00-\uD7AF]/gi)||[]).length}(r)&&(t.selection.save(),function(e){for(var n=t.doc.createTreeWalker(e,NodeFilter.SHOW_TEXT,t.node.filter((function(e){return/\u200B/gi.test(e.textContent)})),!1);n.nextNode();){var o=n.currentNode;o.textContent=o.textContent.replace(/\u200B/gi,"")}}(r),t.selection.restore())}function p(e){if(-1!=navigator.userAgent.indexOf("Mac OS X")){if(e.metaKey&&!e.altKey)return!0}else if(e.ctrlKey&&!e.altKey)return!0;return!1}function u(t){if(t>=e.FE.KEYCODE.ARROW_LEFT&&t<=e.FE.KEYCODE.ARROW_DOWN)return!0}function g(n){if(n>=e.FE.KEYCODE.ZERO&&n<=e.FE.KEYCODE.NINE)return!0;if(n>=e.FE.KEYCODE.NUM_ZERO&&n<=e.FE.KEYCODE.NUM_MULTIPLY)return!0;if(n>=e.FE.KEYCODE.A&&n<=e.FE.KEYCODE.Z)return!0;if(t.browser.webkit&&0===n)return!0;switch(n){case e.FE.KEYCODE.SPACE:case e.FE.KEYCODE.QUESTION_MARK:case e.FE.KEYCODE.NUM_PLUS:case e.FE.KEYCODE.NUM_MINUS:case e.FE.KEYCODE.NUM_PERIOD:case e.FE.KEYCODE.NUM_DIVISION:case e.FE.KEYCODE.SEMICOLON:case e.FE.KEYCODE.FF_SEMICOLON:case e.FE.KEYCODE.DASH:case e.FE.KEYCODE.EQUALS:case e.FE.KEYCODE.FF_EQUALS:case e.FE.KEYCODE.COMMA:case e.FE.KEYCODE.PERIOD:case e.FE.KEYCODE.SLASH:case e.FE.KEYCODE.APOSTROPHE:case e.FE.KEYCODE.SINGLE_QUOTE:case e.FE.KEYCODE.OPEN_SQUARE_BRACKET:case e.FE.KEYCODE.BACKSLASH:case e.FE.KEYCODE.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}function h(n){const i=n.which,a=p(n),s=g(i);if(a||i>=37&&i<=40||!s&&i!=e.FE.KEYCODE.DELETE&&i!=e.FE.KEYCODE.BACKSPACE&&i!=e.FE.KEYCODE.ENTER&&229!=i)return a&&s&&(TVE.ElementEditIcons.toggle(!1),setTimeout((()=>{TVE.Editor_Page.reposition_icons(),TVE.ElementEditIcons.toggle()}),Math.max(250,t.opts.typingTimer))),!0;TVE.ElementEditIcons.toggle(!1),o||(r=t.snapshot.get(),t.undo.canDo()||t.undo.saveStep()),clearTimeout(o),o=setTimeout((function(){TVE.Editor_Page.reposition_icons(),TVE.ElementEditIcons.toggle(),TVE.do_action("tcb.froala.typing_ended",TVE.ActiveElement),o=null,t.undo.saveStep()}),Math.max(250,t.opts.typingTimer))}function m(e){var n=e.which;if(p(e)||n>=37&&n<=40)return!0;r&&o&&(t.undo.saveStep(r),r=null)}return{_init:function(){if(t.events.on("keydown",h),t.events.on("input",s),t.events.on("keyup input",m),t.events.on("keypress",d),t.events.on("keydown",c),t.events.on("keyup",f),t.events.on("html.inserted",f),t.events.on("cut",l),!t.browser.edge&&t.el.msGetInputContext)try{t.el.msGetInputContext().addEventListener("MSCandidateWindowShow",(function(){i=!0})),t.el.msGetInputContext().addEventListener("MSCandidateWindowHide",(function(){i=!1,f()}))}catch(e){}},ctrlKey:p,isCharacter:g,isArrow:u,forceUndo:function(){o&&(clearTimeout(o),t.undo.saveStep(),r=null)},isIME:function(){return i},isBrowserAction:function(t){var n=t.which;return p(t)||n==e.FE.KEYCODE.F5}}},e.FE.MODULES.accessibility=function(t){var n=!0;function o(e){e&&e.length&&(e.data("blur-event-set")||e.parents(".fr-popup").length||(t.events.$on(e,"blur",(function(){var n=e.parents(".fr-toolbar, .fr-popup").data("instance")||t;n.events.blurActive()&&n.events.trigger("blur"),n.events.enableBlur()}),!0),e.data("blur-event-set",!0)),(e.parents(".fr-toolbar, .fr-popup").data("instance")||t).events.disableBlur(),e.focus(),t.shared.$f_el=e)}function r(e,t){var n=t?"last":"first",r=e.find("button:visible:not(.fr-disabled), .fr-group span.fr-command:visible")[n]();if(r.length)return o(r),!0}function i(e){return e.is("input, textarea")&&e[0].ownerDocument===t.el.ownerDocument&&s(),t.events.disableBlur(),setTimeout((()=>e.focus().select()),50),!0}function a(e,n){var o=e.find("input, textarea, button, select").filter(":visible").not(":disabled").filter(n?":last":":first");if(o.length)return i(TVE.apply_filters("tve.froala.focus_content.first_input",o,e));if(t.shared.with_kb){var r=e.find(".fr-active-item:visible:first");if(r.length)return i(r);var a=e.find("[tabIndex]:visible:first");if(a.length)return i(a)}}function s(){0===t.$el.find(".fr-marker").length&&t.core.hasFocus()&&t.selection.save()}function l(e){e.$el.find(".fr-marker").length&&(e.events.disableBlur(),e.selection.restore(),e.events.enableBlur())}function d(){var e=t.popups.areVisible();if(e){var n=e.find(".fr-buttons");return n.find("button:focus, .fr-group span:focus").length?!r(e.data("instance").$tb):!r(n)}return!r(t.$tb)}function c(){var e=null;return t.shared.$f_el.is(".fr-dropdown.fr-active")?e=t.shared.$f_el:t.shared.$f_el.closest(".fr-dropdown-menu").prev().is(".fr-dropdown.fr-active")&&(e=t.shared.$f_el.closest(".fr-dropdown-menu").prev()),e}function f(n,i,s){if(t.shared.$f_el){var l=c();l&&(t.button.click(l),t.shared.$f_el=l);var d,f=n.find("button:visible:not(.fr-disabled), .fr-group span.fr-command:visible"),p=f.index(t.shared.$f_el);return 0===p&&!s||p==f.length-1&&s?(i&&(n.parent().is(".fr-popup")&&(d=!a(n.parent().children().not(".fr-buttons"),!s)),!1===d&&(t.shared.$f_el=null)),i&&!1===d||r(n,!s)):o(e(f.get(p+(s?1:-1)))),!1}}function p(e,t){return f(e,t,!0)}function u(e,t){return f(e,t)}function g(e){if(t.shared.$f_el){var n;if(t.shared.$f_el.is(".fr-dropdown.fr-active"))return o(n=e?t.shared.$f_el.next().find(".fr-command:not(.fr-disabled)").first():t.shared.$f_el.next().find(".fr-command:not(.fr-disabled)").last()),!1;if(t.shared.$f_el.is("a.fr-command"))return(n=e?t.shared.$f_el.closest("li").nextAll(":visible:first").find(".fr-command:not(.fr-disabled)").first():t.shared.$f_el.closest("li").prevAll(":visible:first").find(".fr-command:not(.fr-disabled)").first()).length||(n=e?t.shared.$f_el.closest(".fr-dropdown-menu").find(".fr-command:not(.fr-disabled)").first():t.shared.$f_el.closest(".fr-dropdown-menu").find(".fr-command:not(.fr-disabled)").last()),o(n),!1}}function h(){if(t.shared.$f_el){if(t.shared.$f_el.hasClass("fr-dropdown"))t.button.click(t.shared.$f_el);else if(t.shared.$f_el.is("button.fr-back")){var e=t.popups.areVisible(t);e&&(t.shared.with_kb=!1),t.button.click(t.shared.$f_el),v(e)}else{if(t.events.disableBlur(),t.button.click(t.shared.$f_el),t.shared.$f_el.attr("data-popup")){var n=t.popups.areVisible(t);n&&n.data("popup-button",t.shared.$f_el)}t.shared.$f_el=null}return!1}}function m(){t.shared.$f_el&&(t.events.disableBlur(),t.shared.$f_el.blur(),t.shared.$f_el=null),!1!==t.events.trigger("toolbar.focusEditor")&&(t.events.disableBlur(),t.events.focus())}function E(o){o&&o.length&&(t.events.$on(o,"keydown",(function(n){if(!e(n.target).is("a.fr-command, button.fr-command, .fr-group span.fr-command"))return!0;var r=o.parents(".fr-popup").data("instance")||o.data("instance")||t;t.shared.with_kb=!0;var i=r.accessibility.exec(n,o);return t.shared.with_kb=!1,i}),!0),t.events.$on(o,"mouseenter","[tabIndex]",(function(r){var i=o.parents(".fr-popup").data("instance")||o.data("instance")||t;if(!n)return r.stopPropagation(),void r.preventDefault();var a=e(r.currentTarget);i.shared.$f_el&&i.shared.$f_el.not(a)&&i.accessibility.focusEditor()}),!0))}function v(e){var t=e.data("popup-button");t&&setTimeout((function(){o(t),e.data("popup-button",null)}),0)}function b(e){var n=t.popups.areVisible(e);n&&n.data("popup-button",null)}function T(n){var o=-1!=navigator.userAgent.indexOf("Mac OS X")?n.metaKey:n.ctrlKey;if(n.which==e.FE.KEYCODE.F10&&!o&&!n.shiftKey&&n.altKey){t.shared.with_kb=!0;var r=t.popups.areVisible(t),i=!1;return r&&(i=a(r.children().not(".fr-buttons"))),i||d(),t.shared.with_kb=!1,n.preventDefault(),n.stopPropagation(),!1}return!0}return{_init:function(){t.$wp?t.events.on("keydown",T,!0):t.events.$on(t.$win,"keydown",T,!0),t.events.on("mousedown",(function(e){b(t),t.shared.$f_el&&(l(t),e.stopPropagation(),t.events.disableBlur(),t.shared.$f_el=null)}),!0),t.events.on("blur",(function(){t.shared.$f_el=null,b(t)}),!0)},registerPopup:function(o){var i=t.popups.get(o),s=function(n){var o=t.popups.get(n);return{_tiKeydown:function(i){var s=o.data("instance")||t;if(!1===s.events.trigger("popup.tab",[i]))return!1;var d=i.which,c=o.find(":focus:first");if(e.FE.KEYCODE.TAB==d){i.preventDefault();var f=o.children().not(".fr-buttons"),p=f.find("input, textarea, button, select").filter(":visible").not(".fr-no-touch input, .fr-no-touch textarea, .fr-no-touch button, .fr-no-touch select, :disabled").toArray(),u=p.indexOf(this)+(i.shiftKey?-1:1);if(0<=u&&u<p.length)return s.events.disableBlur(),e(p[u]).focus(),i.stopPropagation(),!1;var g=o.find(".fr-buttons");if(g.length&&r(g,!!i.shiftKey))return i.stopPropagation(),!1;if(a(f))return i.stopPropagation(),!1}else{if(e.FE.KEYCODE.ENTER!=d)return e.FE.KEYCODE.ESC==d?(i.preventDefault(),i.stopPropagation(),l(s),s.popups.isVisible(n)&&o.find(".fr-back:visible").length?(s.button.exec(o.find(".fr-back:visible:first")),v(o)):s.popups.isVisible(n)&&o.find(".fr-dismiss:visible").length?s.button.exec(o.find(".fr-dismiss:visible:first")):(s.popups.hide(n),v(o)),!1):e.FE.KEYCODE.SPACE==d&&(c.is(".fr-submit")||c.is(".fr-dismiss"))?(i.preventDefault(),i.stopPropagation(),s.events.disableBlur(),s.button.exec(c),!0):s.keys.isBrowserAction(i)||c.is("input[type=text], textarea")||e.FE.KEYCODE.SPACE==d&&(c.is(".fr-link-attr")||c.is("input[type=file]"))?void i.stopPropagation():(i.stopPropagation(),i.preventDefault(),!1);var h=null;o.find(".fr-submit:visible").length>0?h=o.find(".fr-submit:visible:first"):o.find(".fr-dismiss:visible").length&&(h=o.find(".fr-dismiss:visible:first")),h&&(i.preventDefault(),i.stopPropagation(),s.events.disableBlur(),s.button.exec(h))}},_tiMouseenter:function(){b(o.data("instance")||t)}}}(o);E(i.find(".fr-buttons")),t.events.$on(i,"mouseenter","tabIndex",s._tiMouseenter,!0),t.events.$on(i.children().not(".fr-buttons"),"keydown","[tabIndex]",s._tiKeydown,!0),t.popups.onHide(o,(function(){l(i.data("instance")||t)})),t.popups.onShow(o,(function(){n=!1,setTimeout((function(){n=!0}),0)}))},registerToolbar:E,focusToolbarElement:o,focusToolbar:r,focusContent:a,focusPopup:function(e){var o=e.children().not(".fr-buttons");o[0].ownerDocument!==t.el.ownerDocument||o.data("mouseenter-event-set")||(t.events.$on(o,"mouseenter","[tabIndex]",(function(r){var i=e.data("instance")||t;if(!n)return r.stopPropagation(),void r.preventDefault();var a=o.find(":focus:first");a.length&&!a.is("input, button, textarea")&&(i.events.disableBlur(),a.blur(),i.events.disableBlur(),i.events.focus())})),o.data("mouseenter-event-set",!0)),!a(o)&&t.shared.with_kb&&r(e.find(".fr-buttons"))},focusModal:function(e){t.core.hasFocus()||(t.events.disableBlur(),t.events.focus()),t.accessibility.saveSelection(),t.events.disableBlur(),t.$el.blur(),t.selection.clear(),t.events.disableBlur(),t.shared.with_kb?e.find(".fr-command[tabIndex], [tabIndex]").first().focus():e.find("[tabIndex]:first").focus()},focusEditor:m,focusPopupButton:v,focusModalButton:function(e){var t=e.data("modal-button");t&&setTimeout((function(){o(t),e.data("modal-button",null)}),0)},hasFocus:function(){return null!=t.shared.$f_el},exec:function(n,r){var i=-1!=navigator.userAgent.indexOf("Mac OS X")?n.metaKey:n.ctrlKey,a=n.which,s=!1;return a!=e.FE.KEYCODE.TAB||i||n.shiftKey||n.altKey?a!=e.FE.KEYCODE.ARROW_RIGHT||i||n.shiftKey||n.altKey?a!=e.FE.KEYCODE.TAB||i||!n.shiftKey||n.altKey?a!=e.FE.KEYCODE.ARROW_LEFT||i||n.shiftKey||n.altKey?a!=e.FE.KEYCODE.ARROW_UP||i||n.shiftKey||n.altKey?a!=e.FE.KEYCODE.ARROW_DOWN||i||n.shiftKey||n.altKey?a!=e.FE.KEYCODE.ENTER||i||n.shiftKey||n.altKey?a!=e.FE.KEYCODE.ESC||i||n.shiftKey||n.altKey?a!=e.FE.KEYCODE.F10||i||n.shiftKey||!n.altKey||(s=d()):s=function(e){if(t.shared.$f_el){var n=c();return n?(t.button.click(n),o(n)):e.parent().find(".fr-back:visible").length?(t.shared.with_kb=!1,t.button.exec(e.parent().find(".fr-back:visible:first")),v(e.parent())):t.shared.$f_el.is("button, .fr-group span")&&(e.parent().is(".fr-popup")?(l(t),t.shared.$f_el=null,!1!==t.events.trigger("toolbar.esc")&&(t.popups.hide(e.parent()),v(e.parent()))):m()),!1}}(r):s=h():s=t.shared.$f_el&&t.shared.$f_el.is(".fr-dropdown:not(.fr-active)")?h():g(!0):s=g():s=u(r):s=u(r,!0):s=p(r):s=p(r,!0),t.shared.$f_el||void 0!==s||(s=!0),!s&&t.keys.isBrowserAction(n)&&(s=!0),!!s||(n.preventDefault(),n.stopPropagation(),!1)},saveSelection:s,restoreSelection:l}},e.FE.MODULES.format=function(t){function n(e,t){var n="<"+e;for(var o in t)t.hasOwnProperty(o)&&(n+=" "+o+'="'+t[o]+'"');return n+">"}function o(e,t){var n=e;for(var o in t)t.hasOwnProperty(o)&&(n+="id"==o?"#"+t[o]:"class"==o?"."+t[o]:"["+o+'="'+t[o]+'"]');return n}function r(e,t){return!(!e||e.nodeType!=Node.ELEMENT_NODE)&&(e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector).call(e,t)}function i(o,r,a){if(o){if(t.node.isBlock(o))return i(o.firstChild,r,a),!1;for(var s=e(n(r,a)).insertBefore(o),l=o;l&&!e(l).is(".fr-marker")&&0===e(l).find(".fr-marker").length&&"UL"!=l.tagName&&"OL"!=l.tagName;){var d=l;l=l.nextSibling,s.append(d)}if(l)(e(l).find(".fr-marker").length||"UL"==l.tagName||"OL"==l.tagName)&&i(l.firstChild,r,a);else{for(var c=s.get(0).parentNode;c&&!c.nextSibling&&!t.node.isElement(c);)c=c.parentNode;if(c){var f=c.nextSibling;f&&(t.node.isBlock(f)?i(f.firstChild,r,a):i(f,r,a))}}s.is(":empty")&&s.remove()}}function a(a,s){var l;if(void 0===s&&(s={}),s.style&&delete s.style,t.selection.isCollapsed())t.markers.insert(),t.$el.find(".fr-marker").replaceWith(n(a,s)+e.FE.INVISIBLE_SPACE+e.FE.MARKERS+function(e){return"</"+e+">"}(a)),t.selection.restore();else{var d;t.selection.save(),i(t.$el.find('.fr-marker[data-type="true"]').get(0).nextSibling,a,s);do{for(d=t.$el.find(o(a,s)+" > "+o(a,s)),l=0;l<d.length;l++)d[l].outerHTML=d[l].innerHTML}while(d.length);t.el.normalize();var c=t.el.querySelectorAll(".fr-marker");for(l=0;l<c.length;l++){var f=e(c[l]);!0===f.data("type")?r(f.get(0).nextSibling,o(a,s))&&f.next().prepend(f):r(f.get(0).previousSibling,o(a,s))&&f.prev().append(f)}t.selection.restore()}}function s(e,n,i,a){if(!a){var s=!1;if(!0===e.data("type"))for(;t.node.isFirstSibling(e.get(0))&&!e.parent().is(t.$el)&&!e.parent().is("ol")&&!e.parent().is("ul");)e.parent().before(e),s=!0;else if(!1===e.data("type"))for(;t.node.isLastSibling(e.get(0))&&!e.parent().is(t.$el)&&!e.parent().is("ol")&&!e.parent().is("ul");)e.parent().after(e),s=!0;if(s)return!0}if(e.parents(n).length||void 0===n){var l="",d="",c=e.parent();if(c.is(t.$el)||t.node.isBlock(c.get(0)))return!1;for(;!t.node.isBlock(c.parent().get(0))&&(void 0===n||void 0!==n&&!r(c.get(0),o(n,i)));)l+=t.node.closeTagString(c.get(0)),d=t.node.openTagString(c.get(0))+d,c=c.parent();var f=e.get(0).outerHTML;e.replaceWith('<span id="mark"></span>');var p=c.html().replace(/<span id="mark"><\/span>/,l+t.node.closeTagString(c.get(0))+d+f+l+t.node.openTagString(c.get(0))+d);return c.replaceWith(t.node.openTagString(c.get(0))+p+t.node.closeTagString(c.get(0))),!0}return!1}function l(n,i,a,s,d){for(var c=t.node.contents(n.get(0)),f=0;f<c.length;f++){var p=c[f];if(!d||!d(p))if(t.node.hasClass(p,"fr-marker"))i=(i+1)%2;else if(i)if(e(p).find(".fr-marker").length>0)i=l(e(p),i,a,s,d);else{for(var u=e(p).find(a||"*"),g=u.length-1;g>=0;g--){var h=u[g];d&&d(h)||t.node.isBlock(h)||t.node.isVoid(h)||void 0!==a&&!r(h,o(a,s))||(h.outerHTML=h.innerHTML)}void 0===a&&p.nodeType==Node.ELEMENT_NODE&&!t.node.isVoid(p)&&!t.node.isBlock(p)||r(p,o(a,s))?e(p).replaceWith(p.innerHTML):void 0===a&&p.nodeType==Node.ELEMENT_NODE&&t.node.isBlock(p)&&t.node.clearAttributes(p)}else e(p).find(".fr-marker").length>0&&(i=l(e(p),i,a,s,d))}return i}function d(n,o,r){void 0===o&&(o={}),o.style&&delete o.style;var i=t.selection.isCollapsed();t.selection.save();for(var a=!0;a;){a=!1;for(var d=t.$el.find(".fr-marker"),c=0;c<d.length;c++)if(s(e(d[c]),n,o,i)){a=!0;break}}l(t.$el,0,n,o,r),i&&t.$el.find(".fr-marker").before(e.FE.INVISIBLE_SPACE).after(e.FE.INVISIBLE_SPACE),t.html.cleanEmptyTags(),t.el.normalize(),t.selection.restore()}function c(t,n){var o=e(t);o.css(n,""),""!==o.attr("style")||o[0].classList.contains("thrive-shortcode-content")||o[0].classList.contains("thrive-inline-shortcode")||o.replaceWith(o.html())}function f(t,n){return 0===e(t).attr("style").indexOf(n+":")||e(t).attr("style").indexOf(";"+n+":")>=0||e(t).attr("style").indexOf("; "+n+":")>=0}function p(n,o){var r,a;if(t.selection.isCollapsed()){t.markers.insert();var l=(a=t.$el.find(".fr-marker")).parent();if(t.node.openTagString(l.get(0))=='<span style="'+n+": "+l.css(n)+';">'){if(t.node.isEmpty(l.get(0)))l.replaceWith('<span style="'+n+": "+o+';">'+e.FE.INVISIBLE_SPACE+e.FE.MARKERS+"</span>");else{var d={};d[n]=o,s(a,"span",d,!0),(a=t.$el.find(".fr-marker")).replaceWith('<span style="'+n+": "+o+';">'+e.FE.INVISIBLE_SPACE+e.FE.MARKERS+"</span>")}t.html.cleanEmptyTags()}else t.node.isEmpty(l.get(0))&&l.is("span")?(a.replaceWith(e.FE.MARKERS),l.css(n,o)):a.replaceWith('<span style="'+n+": "+o+';">'+e.FE.INVISIBLE_SPACE+e.FE.MARKERS+"</span>");t.selection.restore()}else{if(t.selection.save(),null==o||"color"==n&&t.$el.find(".fr-marker").parents("u, a").length>0){var p=t.$el.find(".fr-marker");for(r=0;r<p.length;r++)if(!0===(a=e(p[r])).data("type"))for(;t.node.isFirstSibling(a.get(0))&&!a.parent().is(t.$el)&&!t.node.isElement(a.parent().get(0))&&!t.node.isBlock(a.parent().get(0));)a.parent().before(a);else for(;t.node.isLastSibling(a.get(0))&&!a.parent().is(t.$el)&&!t.node.isElement(a.parent().get(0))&&!t.node.isBlock(a.parent().get(0));)a.parent().after(a)}var u=t.$el.find('.fr-marker[data-type="true"]').get(0).nextSibling,g={class:"fr-unprocessed"};for(o&&(g.style=n+": "+o+";"),i(u,"span",g),t.$el.find(".fr-marker + .fr-unprocessed").each((function(){e(this).prepend(e(this).prev())})),t.$el.find(".fr-unprocessed + .fr-marker").each((function(){e(this).prev().append(this)}));t.$el.find("span.fr-unprocessed").length>0;){var h=t.$el.find("span.fr-unprocessed:first").removeClass("fr-unprocessed");if(h.parent().get(0).normalize(),h.parent().is("span")&&1==h.parent().get(0).childNodes.length){h.parent().css(n,o);var m=h;h=h.parent(),m.replaceWith(m.html())}var E=h.find("span");for(r=E.length-1;r>=0;r--)c(E[r],n);var v=h.parentsUntil(t.$el,"span[style]"),b=[];for(r=v.length-1;r>=0;r--)f(v[r],n)||b.push(v[r]);if((v=v.not(b)).length){var T="",S="",y="",N="",_=h.get(0);do{_=_.parentNode,e(_).addClass("fr-split"),T+=t.node.closeTagString(_),S=t.node.openTagString(e(_).clone().addClass("fr-split").get(0))+S,v.get(0)!=_&&(y+=t.node.closeTagString(_),N=t.node.openTagString(e(_).clone().addClass("fr-split").get(0))+N)}while(v.get(0)!=_);var C=T+t.node.openTagString(e(v.get(0)).clone().css(n,o||"").get(0))+N+h.css(n,"").get(0).outerHTML+y+"</span>"+S;h.replaceWith('<span id="fr-break"></span>');var k=v.get(0).outerHTML;e(v.get(0)).replaceWith(k.replace(/<span id="fr-break"><\/span>/g,C))}}for(;t.$el.find(".fr-split:empty").length>0;)t.$el.find(".fr-split:empty").remove();t.$el.find(".fr-split").removeClass("fr-split"),t.$el.find('span[style=""]').removeAttr("style"),t.$el.find('span[class=""]').removeAttr("class"),t.html.cleanEmptyTags(),e(t.$el.find("span").get().reverse()).each((function(){this.attributes&&0!==this.attributes.length||e(this).replaceWith(this.innerHTML)})),t.el.normalize();var O=t.$el.find("span[style] + span[style]");for(e.FE.FLAG_IGNORE_CSS_ATTR=!0,r=0;r<O.length;r++){var A=e(O[r]),x=e(O[r]).prev();A.get(0).previousSibling==x.get(0)&&t.node.openTagString(A.get(0))==t.node.openTagString(x.get(0))&&(A.prepend(x.html()),x.remove())}delete e.FE.FLAG_IGNORE_CSS_ATTR,t.$el.find("span[style] span[style]").each((function(){if(e(this).attr("style").indexOf("font-size")>=0){var t=e(this).parents("span[style]");t.attr("style").indexOf("background-color")>=0&&(e(this).attr("style",e(this).attr("style")+";"+t.attr("style")),s(e(this),"span[style]",{},!1))}})),t.el.normalize(),t.selection.restore()}}function u(e,n,i){void 0===n&&(n={}),n.style&&delete n.style;var a=t.selection.ranges(0),s=a.startContainer;if(s.nodeType==Node.ELEMENT_NODE&&s.childNodes.length>0&&s.childNodes[a.startOffset]&&(s=s.childNodes[a.startOffset]),!a.collapsed&&s.nodeType==Node.TEXT_NODE&&a.startOffset==(s.textContent||"").length){for(;!t.node.isBlock(s.parentNode)&&!s.nextSibling;)s=s.parentNode;s.nextSibling&&(s=s.nextSibling)}for(var l=s;l&&l.nodeType==Node.ELEMENT_NODE&&!r(l,o(e,n));)l=l.firstChild;if(l&&l.nodeType==Node.ELEMENT_NODE&&r(l,o(e,n)))return!i||l;var d=s;for(d&&d.nodeType!=Node.ELEMENT_NODE&&(d=d.parentNode);d&&d.nodeType==Node.ELEMENT_NODE&&d!=t.el&&!r(d,o(e,n));)d=d.parentNode;return!(!d||d.nodeType!=Node.ELEMENT_NODE||d===t.el||!r(d,o(e,n)))&&(!i||d)}return{is:u,toggle:function(e,t){u(e,t)?d(e,t):a(e,t)},apply:a,remove:d,applyStyle:p,removeStyle:function(e){p(e,null)}}},e.FE.COMMANDS={bold:{title:"Bold",toggle:!0,refresh:function(e){var t=this.format.is("strong");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},italic:{title:"Italic",toggle:!0,refresh:function(e){var t=this.format.is("em");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},underline:{title:"Underline",toggle:!0,refresh:function(e){var t=this.format.is("u");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},strikeThrough:{title:"Strikethrough",toggle:!0,refresh:function(e){var t=this.format.is("s");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},subscript:{title:"Subscript",toggle:!0,refresh:function(e){var t=this.format.is("sub");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},superscript:{title:"Superscript",toggle:!0,refresh:function(e){var t=this.format.is("sup");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},outdent:{title:"Decrease Indent"},indent:{title:"Increase Indent"},undo:{title:"Undo",undo:!1,forcedRefresh:!0,disabled:!0},redo:{title:"Redo",undo:!1,forcedRefresh:!0,disabled:!0},insertHR:{title:"Insert Horizontal Line"},clearFormatting:{title:"Clear Formatting"},selectAll:{title:"Select All",undo:!1}},e.FE.RegisterCommand=function(t,n){e.FE.COMMANDS[t]=n},e.FE.MODULES.commands=function(t){function n(e){return t.html.defaultTag()&&(e="<"+t.html.defaultTag()+">"+e+"</"+t.html.defaultTag()+">"),e}var o={bold:function(){i(0,"strong")},subscript:function(){t.format.remove("sup"),i(0,"sub")},superscript:function(){t.format.remove("sub"),i(0,"sup")},italic:function(){i(0,"em")},strikeThrough:function(){i(0,"s")},underline:function(){i(0,"u")},undo:function(){t.undo.run()},redo:function(){t.undo.redo()},indent:function(){a(1)},outdent:function(){a(-1)},show:function(){},insertHR:function(){t.selection.remove();var o="";t.core.isEmpty()&&(o=n(o="<br>")),t.html.insert('<hr id="fr-just">'+o);var r,i=t.$el.find("hr#fr-just");i.removeAttr("id"),i.prev().is("hr")?r=t.selection.setAfter(i.get(0),!1):i.next().is("hr")?r=t.selection.setBefore(i.get(0),!1):t.selection.setAfter(i.get(0),!1)||t.selection.setBefore(i.get(0),!1),r||void 0===r||(o=n(o=e.FE.MARKERS+"<br>"),i.after(o)),t.selection.restore()},clearFormatting:function(e,n){t.format.remove(void 0,void 0,n)},selectAll:function(){t.doc.execCommand("selectAll",!1,!1)}};function r(n,r){if(!1!==t.events.trigger("commands.before",e.merge([n],r||[]))){var i=e.FE.COMMANDS[n]&&e.FE.COMMANDS[n].callback||o[n],a=!0,s=!1;e.FE.COMMANDS[n]&&(void 0!==e.FE.COMMANDS[n].focus&&(a=e.FE.COMMANDS[n].focus),void 0!==e.FE.COMMANDS[n].accessibilityFocus&&(s=e.FE.COMMANDS[n].accessibilityFocus)),(!t.core.hasFocus()&&a&&!t.popups.areVisible()||!t.core.hasFocus()&&s&&t.accessibility.hasFocus())&&t.events.focus(!0),e.FE.COMMANDS[n]&&!1!==e.FE.COMMANDS[n].undo&&(t.$el.find(".fr-marker").length&&(t.events.disableBlur(),t.selection.restore()),t.undo.saveStep()),i&&i.apply(t,e.merge([n],r||[])),t.events.trigger("commands.after",e.merge([n],r||[])),e.FE.COMMANDS[n]&&!1!==e.FE.COMMANDS[n].undo&&t.undo.saveStep()}}function i(e,n){t.format.toggle(n)}function a(n){t.selection.save(),t.html.wrap(!0,!0,!0,!0),t.selection.restore();for(var o=t.selection.blocks(),r=0;r<o.length;r++)if("LI"!=o[r].tagName&&"LI"!=o[r].parentNode.tagName){var i=e(o[r]),a="rtl"==t.opts.direction||"rtl"==i.css("direction")?"margin-right":"margin-left",s=t.helpers.getPX(i.css(a));i.css(a,Math.max(s+20*n,0)||""),i.removeClass("fr-temp-div")}t.selection.save(),t.html.unwrap(),t.selection.restore()}function s(e){return function(){r(e,Array.prototype.slice.call(arguments,0))}}var l={};for(var d in o)o.hasOwnProperty(d)&&(l[d]=s(d));return e.extend(l,{exec:r,_init:function(){t.events.on("keydown",(function(e){var n=t.selection.element();if(n&&"HR"==n.tagName&&!t.keys.isArrow(e.which))return e.preventDefault(),!1})),t.events.on("keyup",(function(n){var o=t.selection.element();if(o&&"HR"==o.tagName)if(n.which==e.FE.KEYCODE.ARROW_LEFT||n.which==e.FE.KEYCODE.ARROW_UP){if(o.previousSibling)return t.node.isBlock(o.previousSibling)?t.selection.setAtEnd(o.previousSibling):e(o).before(e.FE.MARKERS),t.selection.restore(),!1}else if((n.which==e.FE.KEYCODE.ARROW_RIGHT||n.which==e.FE.KEYCODE.ARROW_DOWN)&&o.nextSibling)return t.node.isBlock(o.nextSibling)?t.selection.setAtStart(o.nextSibling):e(o).after(e.FE.MARKERS),t.selection.restore(),!1})),t.events.on("mousedown",(function(e){if(e.target&&"HR"==e.target.tagName)return e.preventDefault(),e.stopPropagation(),!1})),t.events.on("mouseup",(function(){var n=t.selection.element();n==t.selection.endElement()&&n&&"HR"==n.tagName&&(n.nextSibling&&(t.node.isBlock(n.nextSibling)?t.selection.setAtStart(n.nextSibling):e(n).after(e.FE.MARKERS)),t.selection.restore())}))}})},e.FE.MODULES.data=function(e){function t(e){for(var t=e.toString(),n=0,o=0;o<t.length;o++)n+=parseInt(t.charAt(o),10);return n>10?n%9+1:n}function n(e,t,n){for(var o=Math.abs(n);o-- >0;)e-=t;return n<0&&(e+=123),e}function o(e){return!(!e||"none"!=e.css("display")||(e.remove(),0))}function r(){return!!e.$box&&(e.$box.append(l(l("noLD2laB-7NB1C1ebcvH-9SB3a1C6QC2D4A-9d1E2B2B4xgAE4B2G2I1C3A3B2qMF1DE1fkxfcC-11C-9g1G2E4XC9a1E5A3G-10mvrioCC3AA1KA1qJ-7NB2MA6sxeqVA6TD6e2D4B-9rYA2a1A4bCD3vwC-7EC10D3E2lNC1KD1QB9SB6UE5TE4YF3YA5c1A3d1B3kGE2gFA5A2D2ch1KI1IB1thyH5wvVC11UB6c1F4wwwXA7gmnfB2jgB1A7nd1e1IC2NG4H1A9bjvnbC-8PG3mlazD4dH-9HI2qAA2jGC2IA1dajajFD5SG4J4c1qttyB-9wg1B2b2A6b1C3EG3B2I2rCD4E1B1LG1oaMA3RE7abC-8C-7aVA4C5B5F-11e1D3I3a5A8hmmnogH2IB5A2nhkgiA4TH4VC7yxdblH-8YC6D6C4xC3yqJJ2C-21spB-11fMF1KF1IC2USC4PG4TE3RD6ZF5XE3UE3uefaFE4D2G2AE1HA2JD1zzzQE3SD9vgqF4ua3B13XA4C5gd1E3E2A14ridsldcCA7MC5ghwE-11ZH5f1D3a1D8bwxmkzi1A7IB3KvpB-8rwMD3IE1GG-10bgqwxewvWE4H3VbD-16qC-11qc1E2TwEA6A3aCE4A1A4lOD3JC1iVA3RA13c2D8olqf1G3A32B17=="))),i=e.$box.find("> div:last"),a=i.find("> a"),void("rtl"==e.opts.direction&&i.css("left","auto").css("right",0)))}var i,a,s=function(){for(var e=0,t=document.domain,n=t.split("."),o="_gd"+(new Date).getTime();e<n.length-1&&-1==document.cookie.indexOf(o+"="+o);)t=n.slice(-1-++e).join("."),document.cookie=o+"="+o+";domain="+t+";";return document.cookie=o+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain="+t+";",(t||"").replace(/(^\.*)|(\.*$)/g,"")}(),l=function(e){if(!e)return e;for(var o="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".indexOf(e[0]),i=1;i<e.length-2;i++){for(var a=t(++r),s=e.charCodeAt(i),l="";/[0-9-]/.test(e[i+1]);)l+=e[++i];s=n(s,a,l=parseInt(l,10)||0),s^=r-1&31,o+=String.fromCharCode(s)}return o};return{_init:function(){var t=localStorage&&localStorage.FEK||e.opts.key||[""];"string"==typeof t&&(t=[t]),e.ul=!0;for(var n=0;n<t.length;n++){var d=l(t[n])||"";if(!(d!==l(l("mcVRDoB1BGILD7YFe1BTXBA7B6=="))&&d.indexOf(s,d.length-s.length)<0&&[l("9qqG-7amjlwq=="),l("KA3B3C2A6D1D5H5H1A3=="),l("QzbzvxyB2yA-9m=="),l("ji1kacwmgG5bc=="),l("naamngiA3dA-16xtE-11C-9B1H-8sc==")].indexOf(s)<0)){e.ul=!1;break}}!0===e.ul&&r(),e.events.on("contentChanged",(function(){!0===e.ul&&(o(i)||o(a))&&r()})),e.events.on("destroy",(function(){i&&i.length&&i.remove()}),!0)}}},e.extend(e.FE.DEFAULTS,{pastePlain:!1,pasteDeniedTags:["colgroup","col"],pasteDeniedAttrs:["class","id","style"],pasteAllowedStyleProps:[],pasteAllowLocalImages:!1}),e.FE.MODULES.paste=function(t){var n,o,r,i;function a(e,n){t.win.localStorage.setItem("fr-copied-html",e),t.win.localStorage.setItem("fr-copied-text",n)}function s(n){var o=t.html.getSelected();a(o,e("<div>").html(o).text()),"cut"==n.type&&(t.undo.saveStep(),setTimeout((function(){t.selection.save(),t.html.wrap(),t.selection.restore(),t.events.focus(),t.undo.saveStep()}),0))}var l=!1;function d(i){if(l)return!1;if(t.browser.safari&&t.$oel.parents().removeAttr("draggable"),i.originalEvent&&(i=i.originalEvent),!1===t.events.trigger("paste.before",[i]))return i.preventDefault(),!1;if(t.$win.scrollTop(),i&&i.clipboardData&&i.clipboardData.getData){var a="",s=i.clipboardData.types;if(t.helpers.isArray(s))for(var d=0;d<s.length;d++)a+=s[d]+";";else a=s;if(n="",o=i.clipboardData.getData("text/rtf"),/text\/html/.test(a)?n=i.clipboardData.getData("text/html"):/text\/rtf/.test(a)&&t.browser.safari?n=o:/text\/plain/.test(a)&&!this.browser.mozilla&&(n=t.html.escapeEntities(i.clipboardData.getData("text/plain")).replace(/\n/g,"<br>")),""!==n)return f(),i.preventDefault&&(i.stopPropagation(),i.preventDefault()),!1;n=null}return t.selection.save(),t.events.disableBlur(),n=null,r?r.html(""):(r=e('<div class="fr-paste-div" contenteditable="true" style="position: fixed; top: 0; left: -9999px; height: 100%; width: 0; word-break: break-all; overflow:hidden; z-index: 9999; line-height: 140%;" tabIndex="-1"></div>'),t.$body.append(r),t.events.on("destroy",(function(){r.remove()}))),r.focus(),t.win.setTimeout(f,1),!1}function c(r){if(r.originalEvent&&(r=r.originalEvent),r&&r.dataTransfer&&r.dataTransfer.getData){var i="",a=r.dataTransfer.types;if(t.helpers.isArray(a))for(var s=0;s<a.length;s++)i+=a[s]+";";else i=a;if(n="",o=r.dataTransfer.getData("text/rtf"),/text\/html/.test(i)?n=r.dataTransfer.getData("text/html"):/text\/rtf/.test(i)&&t.browser.safari?n=o:/text\/plain/.test(i)&&!this.browser.mozilla&&(n=t.html.escapeEntities(r.dataTransfer.getData("text/plain")).replace(/\n/g,"<br>")),""!==n){if(!1!==t.markers.insertAtPoint(r)){var l=t.el.querySelector(".fr-marker");return e(l).replaceWith(e.FE.MARKERS),f(),r.preventDefault&&(r.stopPropagation(),r.preventDefault()),!1}}else n=null}}function f(){t.keys.forceUndo(),i=t.snapshot.get(),null===n&&(n=r.get(0).innerHTML,t.selection.restore(),t.events.enableBlur());var e=n.match(/(class=\"?Mso|class=\'?Mso|style=\"[^\"]*\bmso\-|style=\'[^\']*\bmso\-|w:WordDocument)/gi),o=t.events.chainTrigger("paste.beforeCleanup",n);o&&"string"==typeof o&&(n=o),(!e||e&&!1!==t.events.trigger("paste.wordPaste",[n]))&&(t.isDuringPaste=!0,p(n,e))}function p(n,o,r){var a,s=null,l=null;n.toLowerCase().indexOf("<body")>=0&&(n=(n=n.replace(/[.\s\S\w\W<>]*<body[^>]*>[\s]*([.\s\S\w\W<>]*)[\s]*<\/body>[.\s\S\w\W<>]*/gi,"$1")).replace(/([^>])\n([^<])/g,"$1 $2"));var d=!1;if(n.indexOf('id="docs-internal-guid')>=0&&(n=(n=n.replace(/<b[^>]*>/g,"")).replace(/<\/b[^>]*>/g,""),d=!0),!o){var c=t.opts.htmlAllowedStyleProps;t.opts.htmlAllowedStyleProps=t.opts.pasteAllowedStyleProps,t.opts.htmlAllowComments=!1,n=t.clean.html(n,t.opts.pasteDeniedTags,t.opts.pasteDeniedAttrs),t.opts.htmlAllowedStyleProps=c,t.opts.htmlAllowComments=!0,n=(n=g(n)).replace(/\r|\n|\t/g,""),t.doc.createElement("div").innerHTML=n,t.win.localStorage.getItem("fr-copied-html"),t.win.localStorage.getItem("fr-copied-text"),n=n.replace(/^ */g,"").replace(/ *$/g,"")}!o||t.wordPaste&&r||(0===(n=n.replace(/^\n*/g,"").replace(/^ /g,"")).indexOf("<colgroup>")&&(n="<table>"+n+"</table>"),n=function(e){var n;e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/<p(.*?)class="?'?MsoListParagraph"?'? ([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ul><li>$3</li></ul>")).replace(/<p(.*?)class="?'?NumberedText"?'? ([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ol><li>$3</li></ol>")).replace(/<p(.*?)class="?'?MsoListParagraphCxSpFirst"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ul><li$3>$5</li>")).replace(/<p(.*?)class="?'?NumberedTextCxSpFirst"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ol><li$3>$5</li>")).replace(/<p(.*?)class="?'?MsoListParagraphCxSpMiddle"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li>")).replace(/<p(.*?)class="?'?NumberedTextCxSpMiddle"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li>")).replace(/<p(.*?)class="?'?MsoListBullet"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li>")).replace(/<p(.*?)class="?'?MsoListParagraphCxSpLast"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li></ul>")).replace(/<p(.*?)class="?'?NumberedTextCxSpLast"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li></ol>")).replace(/<span([^<]*?)style="?'?mso-list:Ignore"?'?([\s\S]*?)>([\s\S]*?)<span/gi,"<span><span")).replace(/<!--\[if \!supportLists\]-->([\s\S]*?)<!--\[endif\]-->/gi,"")).replace(/<!\[if \!supportLists\]>([\s\S]*?)<!\[endif\]>/gi,"")).replace(/(\n|\r| class=(")?Mso[a-zA-Z0-9]+(")?)/gi," ")).replace(/<!--[\s\S]*?-->/gi,"")).replace(/<(\/)*(meta|link|span|\\?xml:|st1:|o:|font)(.*?)>/gi,"");var o,r=["style","script","applet","embed","noframes","noscript"];for(n=0;n<r.length;n++){var i=new RegExp("<"+r[n]+".*?"+r[n]+"(.*?)>","gi");e=e.replace(i,"")}e=(e=(e=e.replace(/&nbsp;/gi," ")).replace(/<td([^>]*)><\/td>/g,"<td$1><br></td>")).replace(/<th([^>]*)><\/th>/g,"<th$1><br></th>");do{o=e,e=e.replace(/<[^\/>][^>]*><\/[^>]+>/gi,"")}while(e!=o);e=(e=e.replace(/<lilevel([^1])([^>]*)>/gi,'<li data-indent="true"$2>')).replace(/<lilevel1([^>]*)>/gi,"<li$1>"),e=(e=(e=t.clean.html(e,t.opts.pasteDeniedTags,t.opts.pasteDeniedAttrs)).replace(/<a>(.[^<]+)<\/a>/gi,"$1")).replace(/<br> */g,"<br>");var a=t.o_doc.createElement("div");a.innerHTML=e;var s=a.querySelectorAll("li[data-indent]");for(n=0;n<s.length;n++){var l=s[n],d=l.previousElementSibling;if(d&&"LI"==d.tagName){var c=d.querySelector(":scope > ul, :scope > ol");c||(c=document.createElement("ul"),d.appendChild(c)),c.appendChild(l)}else l.removeAttribute("data-indent")}return t.html.cleanBlankSpaces(a),a.innerHTML}(n),n=g(n)),t.opts.pastePlain&&(n=function(e){var n,o=null,r=t.doc.createElement("div");r.innerHTML=e;var i=r.querySelectorAll("p, div, h1, h2, h3, h4, h5, h6, pre, blockquote");for(n=0;n<i.length;n++)(o=i[n]).outerHTML="<"+(t.html.defaultTag()||"DIV")+">"+o.innerHTML+"</"+(t.html.defaultTag()||"DIV")+">";for(n=(i=r.querySelectorAll("*:not("+"p, div, h1, h2, h3, h4, h5, h6, pre, blockquote, ul, ol, li, table, tbody, thead, tr, td, br, img".split(",").join("):not(")+")")).length-1;n>=0;n--)(o=i[n]).outerHTML=o.innerHTML;var a=function(e){for(var n=t.node.contents(e),o=0;o<n.length;o++)n[o].nodeType!=Node.TEXT_NODE&&n[o].nodeType!=Node.ELEMENT_NODE?n[o].parentNode.removeChild(n[o]):a(n[o])};return a(r),r.innerHTML}(n));var f=t.events.chainTrigger("paste.afterCleanup",n);if("string"==typeof f&&(n=f),d){for(t.html.insert(n,!0),h(!0,TVE.ActiveElement,0,0),u(),t.spaces.normalize(t.$el),a=(p=t.$el.find("span")).length-1;a>=0;a--)0===(E=p[a]).attributes.length&&(E.outerHTML=E.innerHTML);return t.undo.saveStep(i),t.undo.saveStep(),!1}if(""!==n){var p,m=t.o_doc.createElement("div");for(m.innerHTML=n,t.spaces.normalize(m),a=(p=m.getElementsByTagName("span")).length-1;a>=0;a--){var E;0===(E=p[a]).attributes.length&&(E.outerHTML=E.innerHTML)}var v=m.children;if(1==v.length&&["OL","UL"].indexOf(v[0].tagName)>=0&&(v[0].outerHTML=v[0].innerHTML),!d){var b=m.getElementsByTagName("br");for(a=b.length-1;a>=0;a--){var T=b[a];t.node.isBlock(T.previousSibling)&&T.parentNode.removeChild(T)}}if(t.opts.enter==e.FE.ENTER_BR)for(a=(s=m.querySelectorAll("p, div")).length-1;a>=0;a--)0===(l=s[a]).attributes.length&&(l.outerHTML=l.innerHTML+(l.nextSibling&&!t.node.isEmpty(l)?"<br>":""));else if(t.opts.enter==e.FE.ENTER_DIV)for(a=(s=m.getElementsByTagName("p")).length-1;a>=0;a--)(l=s[a]).outerHTML="<div>"+l.innerHTML+"</div>";n=m.innerHTML;var S=t.events.chainTrigger("paste.beforeInsert",m);S&&"string"==typeof S&&(n=S),t.html.insert(n,!0)}u(),t.undo.saveStep(i),t.undo.saveStep()}function u(){jQuery("[data-traversed]").removeAttr("data-traversed"),t.events.trigger("paste.after"),TVE.Editor_Page.reposition_icons()}function g(e){var n,o=t.o_doc.createElement("div");o.innerHTML=e;for(var r=o.querySelectorAll("*:empty:not(br):not(img):not(td):not(th)");r.length;){for(n=0;n<r.length;n++)r[n].parentNode.removeChild(r[n]);r=o.querySelectorAll("*:empty:not(br):not(img):not(td):not(th)")}for(var i=o.querySelectorAll(":scope > div:not([style]), td > div:not([style]), th > div:not([style]), li > div:not([style])");i.length;){var a=i[i.length-1];if(t.html.defaultTag()&&"div"!=t.html.defaultTag())a.querySelector(t.html.blockTagsQuery())?a.outerHTML=a.innerHTML:a.outerHTML="<"+t.html.defaultTag()+">"+a.innerHTML+"</"+t.html.defaultTag()+">";else{var s=a.querySelectorAll("*");!s.length||"BR"!==s[s.length-1].tagName&&0===a.innerText.length?a.outerHTML=a.innerHTML+"<br>":a.outerHTML=a.innerHTML}i=o.querySelectorAll(":scope > div:not([style]), td > div:not([style]), th > div:not([style]), li > div:not([style])")}for(i=o.querySelectorAll("div:not([style])");i.length;){for(n=0;n<i.length;n++){var l=i[n],d=l.innerHTML.replace(/\u0009/gi,"").trim();l.outerHTML=d}i=o.querySelectorAll("div:not([style])")}return o.innerHTML}function h(e,t,n,o){if(!1===e&&0===n)return!1;var r,i;!0===e&&0===n&&(e=!1),t.hasClass("edit_mode")&&t.hasClass("fr-wrapper")&&t.hasClass("fr-view")||t.attr("data-traversed","true"),void 0!==(i=(r=t).attr("style"))&&(i.split(";").forEach((function(e){var t=e.split(":"),n=t[0],o=t[1];void 0!==n&&void 0!==o&&("font-weight"===n&&parseInt(o)>=500?r.html("<strong>"+r.html()+"</strong>"):"font-style"===n&&"italic"===o?r.html("<em>"+r.html()+"</em>"):"text-decoration"===n&&"underline"===o?r.html("<u>"+r.html()+"</u>"):"text-decoration"===n&&"line-through"===o&&r.html("<s>"+r.html()+"</s>"))})),r.removeAttr("style"),r.removeAttr("dir"));var a=t.children(),s=t.next(),l=t.parent();return 0!==a.length&&"true"!==a.first().attr("data-traversed")&&o<=n&&h(e,a.first(),n+1,n),0!==s.length&&"true"!==s.first().attr("data-traversed")&&h(e,s.first(),n,n),0!==l.length&&"true"!==l.first().attr("data-traversed")&&n-1>=0&&h(e,l.first(),n-1,n),!1}return{_init:function(){t.events.on("copy",s),t.events.on("cut",s),t.events.on("paste",d),t.events.on("drop",c),t.browser.msie&&t.browser.version<11&&(t.events.on("mouseup",(function(e){2==e.button&&(setTimeout((function(){l=!1}),50),l=!0)}),!0),t.events.on("beforepaste",d))},removeEmptyTags:g,getRtfClipboard:function(){return o},saveCopiedText:a,clean:p}},e.extend(e.FE.DEFAULTS,{shortcutsEnabled:[],shortcutsHint:!0}),e.FE.SHORTCUTS_MAP={},e.FE.RegisterShortcut=function(t,n,o,r,i,a){e.FE.SHORTCUTS_MAP[(i?"^":"")+(a?"@":"")+t]={cmd:n,val:o,letter:r,shift:i,option:a},e.FE.DEFAULTS.shortcutsEnabled.push(n)},e.FE.RegisterShortcut(e.FE.KEYCODE.E,"show",null,"E",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.B,"bold",null,"B",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.I,"italic",null,"I",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.U,"underline",null,"U",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.S,"strikeThrough",null,"S",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.CLOSE_SQUARE_BRACKET,"indent",null,"]",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.OPEN_SQUARE_BRACKET,"outdent",null,"[",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.Z,"undo",null,"Z",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.Z,"redo",null,"Z",!0,!1),e.FE.MODULES.shortcuts=function(t){var n=null,o=!1;function r(n){if(!t.core.hasFocus())return!0;var r=n.which,i=-1!=navigator.userAgent.indexOf("Mac OS X")?n.metaKey:n.ctrlKey;if("keyup"==n.type&&o&&r!=e.FE.KEYCODE.META)return o=!1,!1;"keydown"==n.type&&(o=!1);var a=(n.shiftKey?"^":"")+(n.altKey?"@":"")+r;if(i&&e.FE.SHORTCUTS_MAP[a]){var s=e.FE.SHORTCUTS_MAP[a].cmd;if(s&&t.opts.shortcutsEnabled.indexOf(s)>=0){var l,d=e.FE.SHORTCUTS_MAP[a].val;if(s&&!d?l=t.$tb.find('.fr-command[data-cmd="'+s+'"]'):s&&d&&(l=t.$tb.find('.fr-command[data-cmd="'+s+'"][data-param1="'+d+'"]')),l.length)return n.preventDefault(),n.stopPropagation(),l.parents(".fr-toolbar").data("instance",t),"keydown"==n.type&&(t.button.exec(l),o=!0),!1;if(s&&t.commands[s])return n.preventDefault(),n.stopPropagation(),"keydown"==n.type&&(t.commands[s](),o=!0),!1}}}return{_init:function(){t.events.on("keydown",r,!0),t.events.on("keyup",r,!0)},get:function(o){if(!t.opts.shortcutsHint)return null;if(!n)for(var r in n={},e.FE.SHORTCUTS_MAP)e.FE.SHORTCUTS_MAP.hasOwnProperty(r)&&t.opts.shortcutsEnabled.indexOf(e.FE.SHORTCUTS_MAP[r].cmd)>=0&&(n[e.FE.SHORTCUTS_MAP[r].cmd+"."+(e.FE.SHORTCUTS_MAP[r].val||"")]={shift:e.FE.SHORTCUTS_MAP[r].shift,option:e.FE.SHORTCUTS_MAP[r].option,letter:e.FE.SHORTCUTS_MAP[r].letter});var i=n[o];return i?(t.helpers.isMac()?String.fromCharCode(8984):"Ctrl+")+(i.shift?t.helpers.isMac()?String.fromCharCode(8679):"Shift+":"")+(i.option?t.helpers.isMac()?String.fromCharCode(8997):"Alt+":"")+i.letter:null}}},e.FE.MODULES.snapshot=function(e){function t(e){for(var t=e.parentNode.childNodes,n=0,o=null,r=0;r<t.length;r++){if(o){var i=t[r].nodeType===Node.TEXT_NODE&&""===t[r].textContent,a=o.nodeType===Node.TEXT_NODE&&t[r].nodeType===Node.TEXT_NODE;i||a||n++}if(t[r]==e)return n;o=t[r]}}function n(n){var o=[];if(!n.parentNode)return[];for(;!e.node.isElement(n);)o.push(t(n)),n=n.parentNode;return o.reverse()}function o(e,t){for(;e&&e.nodeType===Node.TEXT_NODE;){var n=e.previousSibling;n&&n.nodeType==Node.TEXT_NODE&&(t+=n.textContent.length),e=n}return t}function r(t){for(var n=e.el,o=0;o<t.length;o++)n=n.childNodes[t[o]];return n}function i(t,n){try{var o=r(n.scLoc),i=n.scOffset,a=r(n.ecLoc),s=n.ecOffset,l=e.doc.createRange();l.setStart(o,i),l.setEnd(a,s),t.addRange(l)}catch(e){console.warn(e)}}return{get:function(){var t,r={};if(e.events.trigger("snapshot.before"),r.html=(e.$wp?e.$el.html():e.$oel.get(0).outerHTML).replace(/ style=""/g,""),r.ranges=[],e.$wp&&e.selection.inEditor()&&e.core.hasFocus())for(var i=e.selection.ranges(),a=0;a<i.length;a++)r.ranges.push({scLoc:n((t=i[a]).startContainer),scOffset:o(t.startContainer,t.startOffset),ecLoc:n(t.endContainer),ecOffset:o(t.endContainer,t.endOffset)});return e.events.trigger("snapshot.after"),r},restore:function(t){e.$el.html()!=t.html&&e.$el.html(t.html);var n=e.selection.get();e.selection.clear(),e.events.focus(!0);for(var o=0;o<t.ranges.length;o++)i(n,t.ranges[o])},equal:function(t,n){return t.html==n.html&&(!e.core.hasFocus()||JSON.stringify(t.ranges)==JSON.stringify(n.ranges))}}},e.FE.MODULES.undo=function(e){function t(t){var n=t.which;e.keys.ctrlKey(t)&&(90==n&&t.shiftKey&&t.preventDefault(),90==n&&t.preventDefault())}var n=null;function o(){if(!e.undo_stack||e.undoing)return!1;for(;e.undo_stack.length>e.undo_index;)e.undo_stack.pop()}function r(){e.undo_index=0,e.undo_stack=[]}function i(){e.undo_stack=[]}return{_init:function(){r(),e.events.on("initialized",(function(){n=(e.$wp?e.$el.html():e.$oel.get(0).outerHTML).replace(/ style=""/g,"")})),e.events.on("blur",(function(){e.el.querySelector(".fr-dragging")||e.undo.saveStep()})),e.events.on("keydown",t),e.events.on("destroy",i)},run:function(){if(e.undo_index>1){e.undoing=!0;var t=e.undo_stack[--e.undo_index-1];clearTimeout(e._content_changed_timer),e.snapshot.restore(t),n=t.html,e.popups.hideAll(),e.toolbar.enable(),e.events.trigger("contentChanged"),e.events.trigger("commands.undo"),e.undoing=!1}},redo:function(){if(e.undo_index<e.undo_stack.length){e.undoing=!0;var t=e.undo_stack[e.undo_index++];clearTimeout(e._content_changed_timer),e.snapshot.restore(t),n=t.html,e.popups.hideAll(),e.toolbar.enable(),e.events.trigger("contentChanged"),e.events.trigger("commands.redo"),e.undoing=!1}},canDo:function(){return!(0===e.undo_stack.length||e.undo_index<=1)},canRedo:function(){return e.undo_index!=e.undo_stack.length},dropRedo:o,reset:r,saveStep:function(t){if(!e.undo_stack||e.undoing||e.el.querySelector(".fr-marker"))return!1;void 0===t?(t=e.snapshot.get(),e.undo_stack[e.undo_index-1]&&e.snapshot.equal(e.undo_stack[e.undo_index-1],t)||(o(),e.undo_stack.push(t),e.undo_index++,t.html!=n&&(e.events.trigger("contentChanged"),n=t.html,e.events.trigger("undo.saveStep")))):(o(),e.undo_index>0?e.undo_stack[e.undo_index-1]=t:(e.undo_stack.push(t),e.undo_index++),e.events.trigger("undo.saveStep"))}}},e.FE.ICON_DEFAULT_TEMPLATE="font_awesome",e.FE.ICON_TEMPLATES={font_awesome:'<i class="fa fa-[NAME]" aria-hidden="true"></i>',text:'<span style="text-align: center;">[NAME]</span>',image:"<img src=[SRC] alt=[ALT] />",svg:'<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">[PATH]</svg>'},e.FE.ICONS={bold:{NAME:"bold"},italic:{NAME:"italic"},underline:{NAME:"underline"},strikeThrough:{NAME:"strikethrough"},subscript:{NAME:"subscript"},superscript:{NAME:"superscript"},color:{NAME:"tint"},outdent:{NAME:"outdent"},indent:{NAME:"indent"},undo:{NAME:"rotate-left"},redo:{NAME:"rotate-right"},insertHR:{NAME:"minus"},clearFormatting:{NAME:"eraser"},selectAll:{NAME:"mouse-pointer"}},e.FE.DefineIconTemplate=function(t,n){e.FE.ICON_TEMPLATES[t]=n},e.FE.DefineIcon=function(t,n){e.FE.ICONS[t]=n},e.FE.MODULES.icon=function(){return{create:function(t){var n=null,o=e.FE.ICONS[t];if(void 0!==o){var r=o.template||e.FE.ICON_DEFAULT_TEMPLATE;r&&(r=e.FE.ICON_TEMPLATES[r])&&(n=r.replace(/\[([a-zA-Z]*)\]/g,(function(e,n){return"NAME"==n?o[n]||t:o[n]})))}return n||t},getTemplate:function(t){var n=e.FE.ICONS[t],o=e.FE.ICON_DEFAULT_TEMPLATE;return void 0!==n?o=n.template||e.FE.ICON_DEFAULT_TEMPLATE:o}}},e.extend(e.FE.DEFAULTS,{tooltips:!0}),e.FE.MODULES.tooltip=function(t){function n(){t.$tooltip&&t.$tooltip.removeClass("fr-visible").css("left","-3000px").css("position","fixed")}function o(n,o){if(n.data("title")||n.data("title",n.attr("title")),!n.data("title"))return!1;t.$tooltip||t.opts.tooltips&&!t.helpers.isMobile()&&(t.shared.$tooltip?t.$tooltip=t.shared.$tooltip:(t.shared.$tooltip=e('<div class="fr-tooltip"></div>'),t.$tooltip=t.shared.$tooltip,t.opts.theme&&t.$tooltip.addClass(t.opts.theme+"-theme"),e(t.opts.tooltipContainer).append(t.$tooltip)),t.events.on("shared.destroy",(function(){t.$tooltip.html("").removeData().remove(),t.$tooltip=null}),!0)),n.removeAttr("title"),t.$tooltip.text(n.data("title")),t.$tooltip.addClass("fr-visible");var r=n.offset().left+(n.outerWidth()-t.$tooltip.outerWidth())/2;r<0&&(r=0),r+t.$tooltip.outerWidth()>e(t.o_win).width()&&(r=e(t.o_win).width()-t.$tooltip.outerWidth()),void 0===o&&(o=t.opts.toolbarBottom);var i=o?n.offset().top-t.$tooltip.height():n.offset().top+n.outerHeight();t.$tooltip.css("position",""),t.$tooltip.css("left",r),t.$tooltip.css("top",Math.ceil(i)),"static"!=e(t.o_doc).find("body:first").css("position")?(t.$tooltip.css("margin-left",-e(t.o_doc).find("body:first").offset().left),t.$tooltip.css("margin-top",-e(t.o_doc).find("body:first").offset().top)):(t.$tooltip.css("margin-left",""),t.$tooltip.css("margin-top",""))}return{hide:n,to:o,bind:function(r,i,a){t.opts.tooltips&&!t.helpers.isMobile()&&(t.events.$on(r,"mouseenter",i,(function(n){t.node.hasClass(n.currentTarget,"fr-disabled")||t.edit.isDisabled()||o(e(n.currentTarget),a)}),!0),t.events.$on(r,"mouseleave "+t._mousedown+" "+t._mouseup,i,(function(){n()}),!0))}}},e.FE.MODULES.button=function(t){var n=[];t.opts.toolbarContainer&&(t.shared.buttons||(t.shared.buttons=[]),n=t.shared.buttons);var o=[];function r(t,n,o){for(var r=e(),i=0;i<t.length;i++){var a=e(t[i]);if(a.is(n)&&(r=r.add(a)),o&&a.is(".fr-dropdown")){var s=a.next().find(n);r=r.add(s)}}return r}function i(i,a){var s,l=e();if(!i)return l;for(s in l=(l=l.add(r(n,i,a))).add(r(o,i,a)),t.shared.popups)if(t.shared.popups.hasOwnProperty(s)){var d=t.shared.popups[s].children().not(".fr-buttons").find(i);l=l.add(d)}return l}function a(e){e.addClass("fr-blink"),setTimeout((function(){e.removeClass("fr-blink")}),500);for(var n=e.data("cmd"),o=[];void 0!==e.data("param"+(o.length+1));)o.push(e.data("param"+(o.length+1)));t.button.hideActiveDropdowns(),e.parents(".fr-popup, .fr-toolbar").data("instance").commands.exec(n,o)}function s(n){var o=n.parents(".fr-popup, .fr-toolbar").data("instance");if(0!==n.parents(".fr-popup").length||n.data("popup")||o.popups.hideAll(),o.popups.areVisible()&&!o.popups.areVisible(o)){for(var r=0;r<e.FE.INSTANCES.length;r++)e.FE.INSTANCES[r]!=o&&e.FE.INSTANCES[r].popups&&e.FE.INSTANCES[r].popups.areVisible()&&e.FE.INSTANCES[r].$el.find(".fr-marker").remove();o.popups.hideAll()}t.node.hasClass(n.get(0),"fr-dropdown")?function(n){var o=n.data("fr-dropdown"),r=t.node.hasClass(n.get(0),"fr-active"),a=i(".fr-dropdown.fr-active").not(n),s=n.parents(".fr-toolbar, .fr-popup").data("instance")||t;if(s.helpers.isIOS()&&!s.el.querySelector(".fr-marker")&&(s.selection.save(),s.selection.clear(),s.selection.restore()),!r){var l=n.data("cmd");o.find(".fr-command").removeClass("fr-active").attr("aria-selected",!1),e.FE.COMMANDS[l]&&e.FE.COMMANDS[l].refreshOnShow&&e.FE.COMMANDS[l].refreshOnShow.apply(s,[n,o]);var d=n.offset().left-n.parent().offset().left-("rtl"==t.opts.direction?o.width()-n.outerWidth():0);"center"===o.attr("data-position")&&(d-=o.outerWidth()/2-n.outerWidth()/2),o.css("left",d+"px"),t.opts.toolbarBottom?o.css("bottom",t.$tb.height()-n.position().top):o.css("top",n.position().top+n.outerHeight())}n.addClass("fr-blink").toggleClass("fr-active"),n.hasClass("fr-active")?(o.attr("aria-hidden",!1),n.attr("aria-expanded",!0)):(o.attr("aria-hidden",!0),n.attr("aria-expanded",!1)),setTimeout((function(){n.removeClass("fr-blink")}),300),a.removeClass("fr-active").attr("aria-expanded",!1).next().attr("aria-hidden",!0),a.parent(".fr-toolbar:not(.fr-inline)").css("zIndex",""),0===n.parents(".fr-popup").length&&(t.node.hasClass(n.get(0),"fr-active")?t.$tb.css("zIndex",(t.opts.zIndex||1)+4):t.$tb.css("zIndex",""));var c=o.find("a.fr-command.fr-active:first");!t.helpers.isMobile()&&t.opts.toolbarFocusElement&&(c.length?t.accessibility.focusToolbarElement(c):t.accessibility.focusToolbarElement(n)),o.trigger("toggle.froalaEditor",[n])}(n):(function(t){e(t).addClass("fr-active").parent().siblings().children().removeClass("fr-active"),a(t)}(n),e.FE.COMMANDS[n.data("cmd")]&&!1!==e.FE.COMMANDS[n.data("cmd")].refreshAfterCallback&&o.button.bulkRefresh()),TVE.do_action("tcb.froala.popup_button_click")}function l(t){s(e(t.currentTarget))}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.$tb;var n=e.find(".fr-dropdown.fr-active");n.length&&(n.removeClass("fr-active").attr("aria-expanded",!1).data("fr-dropdown").attr("aria-hidden",!0),n.parent(".fr-toolbar:not(.fr-inline)").css("zIndex",""))}function c(e){e.preventDefault(),e.stopPropagation()}function f(e){if(e.stopPropagation(),!t.helpers.isMobile())return!1}function p(n,o,r){if(t.helpers.isMobile()&&!1===o.showOnMobile)return"";var i,a=o.displaySelection;if("function"==typeof a&&(a=a(t)),a){var s="function"==typeof o.defaultSelection?o.defaultSelection(t):o.defaultSelection;i='<span style="width:'+(o.displaySelectionWidth||100)+'px">'+(s||t.language.translate(o.title))+"</span>"}else i=t.icon.create(o.icon||n),i+='<span class="fr-sr-only">'+(t.language.translate(o.title)||"")+"</span>";var l=o.popup?' data-popup="true"':"",d=o.modal?' data-modal="true"':"",c=t.shortcuts.get(n+".");c=c?" ("+c+")":"";var f=n+"-"+t.id,p="dropdown-menu-"+f,u='<button id="'+f+'"type="button" tabIndex="-1" role="button"'+(o.toggle?' aria-pressed="false"':"")+("dropdown"==o.type?' aria-controls="'+p+'" aria-expanded="false" aria-haspopup="true"':"")+(o.disabled?' aria-disabled="true"':"")+' title="'+(t.language.translate(o.title)||"")+c+'" class="'+(o.className?o.className+" ":"")+"fr-command fr-btn"+("dropdown"==o.type?" fr-dropdown":"")+" fr-btn-"+t.icon.getTemplate(o.icon)+(o.displaySelection?" fr-selection":"")+(o.back?" fr-back":"")+(o.disabled?" fr-disabled":"")+(r?"":" fr-hidden")+'" data-cmd="'+n+'"'+l+d+">"+i+"</button>";if("dropdown"===o.type){var g=' id="'+p+'" class="fr-dropdown-menu '+(o.dropdownClass||"")+'" role="listbox" aria-labelledby="'+f+'" aria-hidden="true"';g+="",o.dropdownAttr&&e.each(o.dropdownAttr,(function(e,t){g+=" "+e+'="'+t+'"'}));var h="<div"+g+'><div class="fr-dropdown-wrapper" role="presentation"><div class="fr-dropdown-content" role="presentation">';h+=function(e,n){var o="";if(n.html)"function"==typeof n.html?o+=n.html.call(t):o+=n.html;else{var r=n.options;for(var i in"function"==typeof r&&(r=r()),o+='<ul class="fr-dropdown-list" role="presentation">',r)if(r.hasOwnProperty(i)){var a=t.shortcuts.get(e+"."+i);a=a?'<span class="fr-shortcut">'+a+"</span>":"",o+=`<li role="presentation"><a class="fr-command ${n.selectedIcon?"fr-dropdown-li-with-icon":""}" tabIndex="-1" role="option" data-cmd="${e}" data-param1="${i}" title="${r[i]}">${n.selectedIcon?`<span class="fr-dropdown-li-icon">${n.selectedIcon}</span>`:""}${t.language.translate(r[i])}</a></li>`}o+="</ul>"}return o}(n,o),u+=h+="</div></div></div>"}return u}function u(n){for(var o=t.$tb&&t.$tb.data("instance")||t,r=o.selection.inEditor()&&o.core.hasFocus(),i=0;i<n.length;i++){var a=e(n[i]),s=a.data("cmd");0===a.parents(".fr-popup").length?r||e.FE.COMMANDS[s]&&e.FE.COMMANDS[s].forcedRefresh?o.button.refresh(a):t.node.hasClass(a.get(0),"fr-dropdown")||(a.removeClass("fr-active"),a.attr("aria-pressed")&&a.attr("aria-pressed",!1)):a.parents(".fr-popup").is(":visible")&&o.button.refresh(a)}}t.shared.popup_buttons||(t.shared.popup_buttons=[]),o=t.shared.popup_buttons;const g=TVE._.debounce((function(e){if(!1===t.events.trigger("buttons.refresh",[e,t]))return!0;u(n),u(o)}),500,!0);function h(){n=[],o=[]}return{_init:function(){t.events.on("mouseup",g),t.events.on("keyup",g),t.events.on("contentChanged",g),t.events.on("shared.destroy",h)},buildList:function(n,o){for(var r="",i=0;i<n.length;i++){var a=n[i],s=e.FE.COMMANDS[a];s&&void 0!==s.plugin&&t.opts.pluginsEnabled.indexOf(s.plugin)<0||(s?r+=p(a,s,void 0===o||o.indexOf(a)>=0):"|"==a?r+='<div class="fr-separator fr-vs" role="separator" aria-orientation="vertical"></div>':"-"==a&&(r+='<div class="fr-separator fr-hs" role="separator" aria-orientation="horizontal"></div>'))}return r},bindCommands:function(r,i){t.events.bindClick(r,".fr-command:not(.fr-disabled)",l),t.events.$on(r,t._mousedown+" "+t._mouseup+" "+t._move,".fr-dropdown-menu",c,!0),t.events.$on(r,t._mousedown+" "+t._mouseup+" "+t._move,".fr-dropdown-menu .fr-dropdown-wrapper",f,!0);var a=r.get(0).ownerDocument,s="defaultView"in a?a.defaultView:a.parentWindow;t.events.$on(e(s),t._mouseup+" resize keydown",(function(n){(!n||n.type==t._mouseup&&n.target!=e("html").get(0)||"keydown"==n.type&&(t.keys.isCharacter(n.which)&&!t.keys.ctrlKey(n)||n.which==e.FE.KEYCODE.ESC))&&d(r)}),!0),t.node.hasClass(r.get(0),"fr-popup")?e.merge(o,r.find(".fr-btn").toArray()):e.merge(n,r.find(".fr-btn").toArray()),t.tooltip.bind(r,".fr-btn, .fr-title",i)},refresh:function(n){var o,r=n.parents(".fr-popup, .fr-toolbar").data("instance")||t,i=n.data("cmd");t.node.hasClass(n.get(0),"fr-dropdown")?o=n.next():(n.removeClass("fr-active"),n.attr("aria-pressed")&&n.attr("aria-pressed",!1)),e.FE.COMMANDS[i]&&e.FE.COMMANDS[i].refresh?e.FE.COMMANDS[i].refresh.apply(r,[n,o]):t.refresh[i]&&r.refresh[i](n,o)},bulkRefresh:g,exec:a,click:s,hideActiveDropdowns:d,getButtons:i}},e.FE.POPUP_TEMPLATES={"text.edit":"[_EDIT_]"},e.FE.RegisterTemplate=function(t,n){e.FE.POPUP_TEMPLATES[t]=n},e.FE.MODULES.popups=function(t){t.shared.popups||(t.shared.popups={});var n=t.shared.popups;function o(e){return n[e]&&t.node.hasClass(n[e],"fr-active")&&t.core.sameInstance(n[e])||!1}function r(e){for(var t in n)if(n.hasOwnProperty(t)&&o(t)&&(void 0===e||n[t].data("instance")==e))return n[t];return!1}function i(e){var o=null;(o="string"!=typeof e?e:n[e])&&t.node.hasClass(o,"fr-active")&&(o.removeClass("fr-active fr-above"),t.events.trigger("popups.hide."+e),t.$tb&&(t.opts.zIndex>1?t.$tb.css("zIndex",t.opts.zIndex+1):t.$tb.css("zIndex","")),t.events.disableBlur(),o.find("input, textarea, button").filter(":focus").blur(),o.find("input, textarea").attr("disabled","disabled"))}function a(e){for(var t in void 0===e&&(e=[]),n)n.hasOwnProperty(t)&&e.indexOf(t)<0&&i(t)}function s(){t.shared.exit_flag=!0}function l(){t.shared.exit_flag=!1}function d(){return t.shared.exit_flag}function c(r){var i=n[r];return{_windowResize:function(){var e=i.data("instance")||t;!e.helpers.isMobile()&&i.is(":visible")&&(e.events.disableBlur(),e.popups.hide(r),e.events.enableBlur())},_inputFocus:function(n){var o=i.data("instance")||t,r=e(n.currentTarget);if(r.is("input:file")&&r.closest(".fr-layer").addClass("fr-input-focus"),n.preventDefault(),n.stopPropagation(),setTimeout((function(){o.events.enableBlur()}),0),o.helpers.isMobile()){var a=e(o.o_win).scrollTop();setTimeout((function(){e(o.o_win).scrollTop(a)}),0)}},_inputBlur:function(n){var o=i.data("instance")||t,r=e(n.currentTarget);r.is("input:file")&&r.closest(".fr-layer").removeClass("fr-input-focus"),document.activeElement!=this&&e(this).is(":visible")&&(o.events.blurActive()&&o.events.trigger("blur"),o.events.enableBlur())},_editorKeydown:function(n){var a=i.data("instance")||t;a.keys.ctrlKey(n)||n.which==e.FE.KEYCODE.ALT||n.which==e.FE.KEYCODE.ESC||(o(r)&&i.find(".fr-back:visible").length?a.button.exec(i.find(".fr-back:visible:first")):n.which!=e.FE.KEYCODE.ALT&&a.popups.hide(r))},_preventFocus:function(n){var o=i.data("instance")||t,r=n.originalEvent?n.originalEvent.target||n.originalEvent.originalTarget:null;"mouseup"==n.type||e(r).is(":focus")||o.events.disableBlur(),"mouseup"!=n.type||e(r).hasClass("fr-command")||e(r).parents(".fr-command").length>0||t.button.hideActiveDropdowns(i),(t.browser.safari||t.browser.mozilla)&&"mousedown"==n.type&&e(r).is("input[type=file]")&&o.events.disableBlur();var a="input, textarea, button, select, label, .fr-command";return r&&!e(r).is(a)&&0===e(r).parents(a).length?(n.stopPropagation(),!1):(!r||!e(r).is("label"))&&(r&&e(r).is(a)&&n.stopPropagation(),void l())},_editorMouseup:function(){i.is(":visible")&&d()&&i.find("input:focus, textarea:focus, button:focus, select:focus").filter(":visible").length>0&&t.events.disableBlur()},_windowMouseup:function(e){if(!t.core.sameInstance(i))return!0;var n=i.data("instance")||t;i.is(":visible")&&d()&&(e.stopPropagation(),n.markers.remove(),n.popups.hide(r),l())},_windowKeydown:function(n){if(!t.core.sameInstance(i))return!0;var o=i.data("instance")||t,a=n.which;return e.FE.KEYCODE.ESC==a&&o.popups.isVisible(r)?(i.find(".fr-back:visible").length?(o.button.exec(i.find(".fr-back:visible:first")),o.accessibility.focusPopupButton(i)):i.find(".fr-dismiss:visible").length?o.button.exec(i.find(".fr-dismiss:visible:first")):(o.popups.hide(r),o.accessibility.focusPopupButton(i)),!1):void 0},_doPlaceholder:function(){0===e(this).next().length&&e(this).attr("placeholder")&&e(this).after('<label for="'+e(this).attr("id")+'">'+e(this).attr("placeholder")+"</label>"),e(this).toggleClass("fr-not-empty",""!==e(this).val())},_repositionPopup:function(){if(!t.opts.height&&!t.opts.heightMax)return!0;if(t.$wp&&o(r)&&i.parent().get(0)==t.$sc.get(0)){var e=i.offset().top-t.$wp.offset().top,n=t.$wp.outerHeight();t.node.hasClass(i.get(0),"fr-above")&&(e+=i.outerHeight()),e>n||e<0?i.addClass("fr-hidden"):i.removeClass("fr-hidden")}}}}function f(e,o){t.events.on("mouseup",e._editorMouseup,!0),t.$wp&&t.events.on("keydown",e._editorKeydown),t.events.on("blur",(function(){r()&&t.markers.remove(),a()})),t.$wp&&!t.helpers.isMobile()&&t.events.$on(t.$wp,"scroll.popup"+o,e._repositionPopup),t.events.on("window.mouseup",e._windowMouseup,!0),t.events.on("window.keydown",e._windowKeydown,!0),n[o].data("inst"+t.id,!0)}function p(){for(var e in n)n.hasOwnProperty(e)&&(n[e].html("").removeData().remove(),n[e]=null);n=[]}return t.shared.exit_flag=!1,{_init:function(){t.events.on("shared.destroy",p,!0),t.events.on("window.mousedown",s),t.events.on("window.touchmove",l),t.events.on("mousedown",(function(e){r()&&(e.stopPropagation(),t.$el.find(".fr-marker").remove(),s(),t.events.disableBlur())}))},create:function(o,r){var i=function(o,r){var i=function(n,o){var r=e.FE.POPUP_TEMPLATES[n];for(var i in"function"==typeof r&&(r=r.apply(t)),o)o.hasOwnProperty(i)&&(r=r.replace("[_"+i.toUpperCase()+"_]",o[i]));return r}(o,r),a=e('<div class="fr-popup'+(t.helpers.isMobile()?" fr-mobile":" fr-desktop")+'"><span class="fr-arrow"></span>'+i+"</div>");t.opts.theme&&a.addClass(t.opts.theme+"-theme"),t.opts.zIndex>1&&t.$tb.css("z-index",t.opts.zIndex+2),"auto"!=t.opts.direction&&a.removeClass("fr-ltr fr-rtl").addClass("fr-"+t.opts.direction),a.find("input, textarea").attr("dir",t.opts.direction).attr("disabled","disabled");var s=e("body:first");return s.append(a),a.data("container",s),n[o]=a,t.button.bindCommands(a,!1),a}(o,r),a=c(o);return f(a,o),t.events.$on(i,"mousedown mouseup touchstart touchend touch","*",a._preventFocus,!0),t.events.$on(i,"focus","input, textarea, button, select",a._inputFocus,!0),t.events.$on(i,"blur","input, textarea, button, select",a._inputBlur,!0),t.accessibility.registerPopup(o),t.events.$on(i,"keydown keyup change input","input, textarea",a._doPlaceholder,!0),t.helpers.isIOS()&&t.events.$on(i,"touchend","label",(function(){e("#"+e(this).attr("for")).prop("checked",(function(e,t){return!t}))}),!0),t.events.$on(e(t.o_win),"resize",a._windowResize,!0),i},get:function(e){var o=n[e];return o&&!o.data("inst"+t.id)&&f(c(e),e),o},show:function(e,i,s,d){if(r()&&t.$el.find(".fr-marker").length>0?(t.events.disableBlur(),t.selection.restore()):(t.events.disableBlur(),t.events.focus(),t.events.enableBlur()),a([e]),!n[e])return!1;n[e].data("instance",t),t.$tb&&(t.button.hideActiveDropdowns(),t.$tb.data("instance",t));var f=n[e].outerWidth(),p=o(e);n[e].addClass("fr-active").removeClass("fr-hidden").find("input, textarea").removeAttr("disabled");var u=n[e].data("container");(u=n[e].data("container")).is(t.$tb)?t.$tb.css("zIndex",(t.opts.zIndex||1)+4):n[e].css("zIndex",(t.opts.zIndex||1)+4),i&&(i-=f/2),t.opts.toolbarBottom&&u&&t.$tb&&u.get(0)==t.$tb.get(0)&&(n[e].addClass("fr-above"),s&&(s-=n[e].outerHeight())),n[e].removeClass("fr-active"),t.position.at(i,s,n[e],d||0),n[e].addClass("fr-active"),p||t.accessibility.focusPopup(n[e]),t.events.trigger("popups.show."+e),c(e)._repositionPopup(),l()},hide:i,onHide:function(e,n){t.events.on("popups.hide."+e,n)},hideAll:a,setContainer:function(e,o){o.is(":visible")||(o=t.$sc),o.is(n[e].data("container"))||(n[e].data("container",o),o.append(n[e]))},refresh:function(o){t.events.trigger("popups.refresh."+o);for(var r=n[o].find(".fr-command"),i=0;i<r.length;i++){var a=e(r[i]);0===a.parents(".fr-dropdown-menu").length&&t.button.refresh(a)}},onRefresh:function(e,n){t.events.on("popups.refresh."+e,n)},onShow:function(e,n){t.events.on("popups.show."+e,n)},isVisible:o,areVisible:r}},e.FE.MODULES.position=function(e){return{at:function(t,n,o,r){var i=o.data("container");!i||"BODY"===i.get(0).tagName&&"static"==i.css("position")||(t&&(t-=i.offset().left),n&&(n-=i.offset().top),"BODY"!=i.get(0).tagName?(t&&(t+=i.get(0).scrollLeft),n&&(n+=i.get(0).scrollTop)):"absolute"==i.css("position")&&(t&&(t+=i.position().left),n&&(n+=i.position().top)));var a=function(t,n){var o=t.outerWidth(!0);return n+o>e.$sc.get(0).clientWidth-10&&(n=e.$sc.get(0).clientWidth-o-10),n<0&&(n=10),n}(o,t);if(t){o.css("left",a);var s=o.data("fr-arrow");s||(s=o.find(".fr-arrow"),o.data("fr-arrow",s)),s.data("margin-left")||s.data("margin-left",e.helpers.getPX(s.css("margin-left"))),s.css("margin-left",t-a+s.data("margin-left"))}n&&o.css("top",function(t,n,o){var r=t.outerHeight(!0);if(!e.helpers.isMobile()&&e.$tb&&t.parent().get(0)!=e.$tb.get(0)){var i=t.parent().offset().top,a=n-r-(o||0);t.parent().get(0)==e.$sc.get(0)&&(i-=t.parent().position().top);var s=e.$sc.get(0).scrollHeight;i+n+r>e.$sc.offset().top+s&&t.parent().offset().top+a>0?(n=a,t.addClass("fr-above")):t.removeClass("fr-above")}return n}(o,n,r))},getBoundingRect:function(){var t=e.selection.ranges(0).getBoundingClientRect();if(0===t.top&&0===t.left&&0===t.width||0===t.height){var n=!1;0===e.$el.find(".fr-marker").length&&(e.selection.save(),n=!0);var o=e.$el.find(".fr-marker:first");o.css("display","inline"),o.css("line-height","");var r=o.offset(),i=o.outerHeight();o.css("display","none"),o.css("line-height",0),(t={}).left=r.left,t.width=0,t.height=i,t.top=r.top-(e.helpers.isMobile()?0:e.helpers.scrollTop()),t.right=1,t.bottom=1,t.ok=!0,n&&e.selection.restore()}return t}}},e.FE.MODULES.refresh=function(t){function n(e,t){e.toggleClass("fr-disabled",t).attr("aria-disabled",t)}return{undo:function(e){n(e,!t.undo.canDo())},redo:function(e){n(e,!t.undo.canRedo())},outdent:function(o){if(t.node.hasClass(o.get(0),"fr-no-refresh"))return!1;for(var r=t.selection.blocks(),i=0;i<r.length;i++){var a="rtl"==t.opts.direction||"rtl"==e(r[i]).css("direction")?"margin-right":"margin-left";if("LI"==r[i].tagName||"LI"==r[i].parentNode.tagName)return n(o,!1),!0;if(t.helpers.getPX(e(r[i]).css(a))>0)return n(o,!1),!0}n(o,!0)},indent:function(e){if(t.node.hasClass(e.get(0),"fr-no-refresh"))return!1;for(var o=t.selection.blocks(),r=0;r<o.length;r++){for(var i=o[r].previousSibling;i&&i.nodeType==Node.TEXT_NODE&&0===i.textContent.length;)i=i.previousSibling;if("LI"!=o[r].tagName||i)return n(e,!1),!0;n(e,!0)}}}},e.extend(e.FE.DEFAULTS,{editInPopup:!1}),e.extend(e.FE.DEFAULTS,{toolbarBottom:!1,toolbarButtons:["fullscreen","bold","italic","underline","strikeThrough","subscript","superscript","|","fontFamily","fontSize","color","inlineStyle","paragraphStyle","|","paragraphFormat","align","formatOL","formatUL","outdent","indent","quote","-","insertLink","insertImage","insertVideo","insertFile","insertTable","|","emoticons","specialCharacters","insertHR","selectAll","clearFormatting","|","print","spellChecker","help","html","|","undo","redo"],toolbarContainer:null,toolbarSticky:!0,toolbarStickyOffset:0,toolbarVisibleWithoutSelection:!1}),e.FE.MODULES.toolbar=function(t){var n;function o(){t.$tb.html("").removeData().remove(),t.$tb=null}function r(){t.$box.removeClass("fr-top fr-bottom fr-inline fr-basic"),t.$box.find(".fr-sticky-dummy").remove()}function i(){t.opts.theme&&t.$tb.addClass(t.opts.theme+"-theme"),t.opts.zIndex>1&&t.$tb.css("z-index",t.opts.zIndex+1),"auto"!=t.opts.direction&&t.$tb.removeClass("fr-ltr fr-rtl").addClass("fr-"+t.opts.direction),t.helpers.isMobile()?t.$tb.addClass("fr-mobile"):t.$tb.addClass("fr-desktop"),t.opts.toolbarBottom?t.$tb.addClass("fr-bottom"):t.$tb.addClass("fr-top"),"defaultView"in(n=t.$tb.get(0).ownerDocument)?n.defaultView:n.parentWindow,function(){for(var n=e.merge([],t.opts.toolbarButtons),o=n.length-1;o>=0;o--)"-"!=n[o]&&"|"!=n[o]&&n.indexOf(n[o])<o&&n.splice(o,1);var r=t.button.buildList(n,t.opts.toolbarButtons);t.$tb.append(r),t.$tb.find(".fr-dropdown-menu").each((function(){const t=e(this);t.prev("button").data("fr-dropdown",t)})),t.button.bindCommands(t.$tb)}(),t.accessibility.registerToolbar(t.$tb),t.events.$on(t.$tb,t._mousedown+" "+t._mouseup,(function(e){var n=e.originalEvent?e.originalEvent.target||e.originalEvent.originalTarget:null;if(n&&"INPUT"!=n.tagName&&!t.edit.isDisabled())return e.stopPropagation(),e.preventDefault(),!1}),!0)}[][e.FE.LG]=t.opts.toolbarButtons,t.tb_hide_timeout=null;var a=!1;return{_init:function(){if(t.$sc=e(t.opts.scrollableContainer).first(),!t.$wp)return!1;t.opts.toolbarContainer?(t.shared.$tb?t.$tb=t.shared.$tb:(t.shared.$tb=e('<div class="fr-toolbar"></div>'),t.$tb=t.shared.$tb,e(t.opts.toolbarContainer).append(t.$tb),i(),t.$tb.data("instance",t)),t.$box.addClass("fr-basic"),t.events.on("focus",(function(){t.$tb.data("instance",t)}),!0)):(t.$box.addClass("fr-basic"),t.$tb=e('<div class="fr-toolbar"></div>'),i(),t.$tb.data("instance",t)),t.events.on("destroy",r,!0),t.events.on(t.opts.toolbarContainer?"shared.destroy":"destroy",o,!0),t.$tb.show=function(){this.siblings().not(".fr-drag").hide(),this[0].style.display="block",t.opts.toolbarContainer&&t.opts.toolbarContainer.show(),this.find(".fr-dropdown.fr-active").removeClass("fr-active").attr("aria-expanded","false"),setTimeout((()=>{TVE.main.$el.hasClass("tve_froala_pinned_mode")&&TVE.main.$container.addClass("froala-pinned")}),200)}},hide:function(){if(t.button.getButtons(".fr-dropdown.fr-active").next().find(t.o_doc.activeElement).length)return!0;!1!==t.events.trigger("toolbar.hide")&&t.$tb&&(clearTimeout(t.tb_hide_timeout),t.tb_hide_timeout=setTimeout((function(){t.$tb&&t.$tb.hide()}),50))},show:function(){if(!1===t.events.trigger("toolbar.show"))return!1;clearTimeout(t.tb_hide_timeout),t.$tb.show()},disable:function(){!a&&t.$tb&&(t.$tb.find("> .fr-command").addClass("fr-disabled fr-no-refresh").attr("aria-disabled",!0),a=!0)},enable:function(){a&&t.$tb&&(t.$tb.find("> .fr-command").removeClass("fr-disabled fr-no-refresh").attr("aria-disabled",!1),a=!1),t.button.bulkRefresh()}}},r(48478)(e),r(12307)(e),r(88454)(e),r(90690)(e),r(43011)(e),r(42621)(e),r(93306)(e),r(77466)(e),r(47924)(e),r(37323)(e),r(95623)(e)}();
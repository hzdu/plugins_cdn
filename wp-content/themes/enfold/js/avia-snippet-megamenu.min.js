!function(i){"use strict";i((function(){i.fn.aviaMegamenu&&i(".main_menu .menu").aviaMegamenu({modify_position:!0})})),i.fn.aviaMegamenu=function(n){var t=i.extend({modify_position:!0,delay:300},n);return this.each((function(){var n=i("html").first(),e=(i("#main .container").first(),n.filter(".html_menu_left, .html_logo_center").length),o=i.avia_utilities.isMobile,s=i(this),a=s.find(">li:not(.ignore_menu)"),c=a.find(">div").parent().css({overflow:"hidden"}),f=s.find(">.current-menu-item>a, >.current_page_item>a"),u=a.find(">ul").parent(),l=s.parent(),d=s.parents(".main_menu").eq(0),r=l.width(),h={},p=[];function m(i){if(1==h[i]){var n=c.eq(i).css({overflow:"visible"}).find("div").first(),t=c.eq(i).find("a").first();p["check"+i]=!0,n.stop().css("display","block").animate({opacity:1},300),n.length&&t.addClass("open-mega-a")}}function v(n){if(0==h[n]){c.eq(n).find(">a").removeClass("open-mega-a");var t=c.eq(n);t.find("div").first().stop().css("display","block").animate({opacity:0},300,(function(){i(this).css("display","none"),t.css({overflow:"hidden"}),p["check"+n]=!1}))}}f.length||s.find(".current-menu-ancestor, .current_page_ancestor").eq(0).find("a").eq(0).parent().addClass("active-parent-item"),n.is(".html_header_top")||(t.modify_position=!1),a.on("click","a",(function(i){this.href!=window.location.href+"#"&&this.href!=window.location.href+"/#"||i.preventDefault()})),a.each((function(){var n=i(this),o=n.position(),s=n.find("div").first().css({opacity:0,display:"none"}),a="";if(s.length||(a=n.find(">ul").css({display:"none"})),s.length||a.length){var c=n.addClass("dropdown_ul_available").find(">a");c.append('<span class="dropdown_available"></span>'),"string"==typeof c.attr("href")&&"#"!=c.attr("href")||c.css("cursor","default").on("click",(function(i){i.preventDefault()}))}t.modify_position&&s.length&&n.on("mouseenter focusin",(function(){!function(i,n,t,o){n=i.position(),e?t.width()>n.left+i.outerWidth()?t.css({left:-1*n.left}):n.left+t.width()>o&&t.css({left:-1*(t.width()-n.left)}):n.left+t.width()<o?t.css({right:-t.outerWidth()+i.outerWidth()}):n.left+t.width()>o&&t.css({right:-d.outerWidth()+(n.left+i.outerWidth())})}(n,o,s,r)}))})),o&&c.each((function(n){i(this).on("click",(function(){if(1!=p["check"+n])return!1}))})),c.each((function(n){i(this).on("mouseenter",(function(){h[n]=!0,setTimeout((function(){m(n)}),t.delay)})).on("mouseleave",(function(){h[n]=!1,setTimeout((function(){v(n)}),t.delay)})),i(this).find("a").on("focus",(function(){h[n]=!0,setTimeout((function(){m(n)}),50)})).on("blur",(function(){h[n]=!1,setTimeout((function(){v(n)}),50)}))})),u.find("li").addBack().each((function(){var n=i(this),t=n.find("ul").first();if(t.length){t.css({display:"block",opacity:0,visibility:"hidden"});var e=n.find(">a");e.on("mouseenter",(function(){t.stop().css({visibility:"visible"}).animate({opacity:1})})),e.on("focus",(function(){t.stop().css({visibility:"visible"}).animate({opacity:1}),t.find("li").on("focusin",(function(){t.stop().css({visibility:"visible"}).animate({opacity:1})})).on("focusout",(function(){t.stop().animate({opacity:0},(function(){t.css({visibility:"hidden"})}))}))})).on("focusout",(function(){i(this).trigger("mouseleave")})),n.on("mouseleave",(function(){t.stop().animate({opacity:0},(function(){t.css({visibility:"hidden"})}))}))}}))}))}}(jQuery);
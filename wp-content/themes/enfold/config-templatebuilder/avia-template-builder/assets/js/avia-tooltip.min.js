!function(t){"use strict";t.AviaTooltip=function(i){this.options=t.extend({},{delay:1500,delayOut:300,class:"avia-tooltip",scope:"#avia_builder",data:"avia-tooltip",attach:"element",event:"mouseenter",position:"top"},i),this.body=t("body"),this.scope=t(this.options.scope),this.tooltip=t('<div class="'+this.options.class+'"><span class="avia-arrow-wrap"><span class="avia-arrow"></span></span></div>'),this.inner=t('<div class="inner_tooltip"></div>').prependTo(this.tooltip),this.open=!1,this.timer=!1,this.active=!1,this.bind_events()},t.AviaTooltip.openTTs=[],t.AviaTooltip.prototype={bind_events:function(){this.scope.on(this.options.event+" mouseleave","[data-"+this.options.data+"]",this.start_countdown.bind(this)),"click"!=this.options.event?this.scope.on("mouseleave","[data-"+this.options.data+"]",this.hide_tooltip.bind(this)):this.body.on("mousedown",this.hide_tooltip.bind(this))},start_countdown:function(t){if(clearTimeout(this.timer),t.type==this.options.event){var i="click"==this.options.event||this.open?0:this.options.delay;this.timer=setTimeout(this.display_tooltip.bind(this,t),i)}else"mouseleave"==t.type&&(this.timer=setTimeout(this.stop_instant_open.bind(this,t),this.options.delayOut));t.preventDefault()},reset_countdown:function(t){clearTimeout(this.timer),this.timer=!1},display_tooltip:function(i){var o="click"==this.options.event?i.target:i.currentTarget,s=t(o),e=s.data(this.options.data),n=s.data("avia-created-tooltip"),a="element"==this.options.attach?s:this.body,p="element"==this.options.attach?s.position():s.offset();if(this.inner.html(e),n=void 0!==n?t.AviaTooltip.openTTs[n]:this.tooltip.clone().appendTo(a),this.open=!0,this.active=n,!n.is(":animated:visible")||"click"!=i.type){var h=p.top-n.outerHeight(),l=p.left+s.outerWidth()/2-n.outerWidth()/2;"bottom"==this.options.position&&(h=p.top+s.outerHeight()),n.css({opacity:0,display:"block",top:h-10,left:l}).stop().animate({top:h,opacity:1},200),t.AviaTooltip.openTTs.push(n),s.data("avia-created-tooltip",t.AviaTooltip.openTTs.length-1)}},hide_tooltip:function(i){var o,s,e=t(i.currentTarget);"click"==this.options.event?(e=t(i.target)).is("."+this.options.class)||0!=e.parents("."+this.options.class).length||this.active.length&&(o=this.active,this.active=!1):o=void 0!==(o=e.data("avia-created-tooltip"))&&t.AviaTooltip.openTTs[o],o&&(s=parseInt(o.css("top"),10)-10,o.animate({top:s,opacity:0},200,(function(){o.css({display:"none"})})))},stop_instant_open:function(t){this.open=!1}}}(jQuery);
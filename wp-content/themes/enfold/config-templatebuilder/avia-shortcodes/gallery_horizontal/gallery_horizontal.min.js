!function(a){"use strict";a.fn.avia_hor_gallery=function(e){e=a.extend({slide_container:".av-horizontal-gallery-inner",slide_element:".av-horizontal-gallery-slider",slide_content:".av-horizontal-gallery-wrap",slide_arrows:".avia-slideshow-arrows",slide_dots:".avia-slideshow-dots",active:"av-active-gal-item",slide_controls:".avia-slideshow-controls",prev:".av-horizontal-gallery-prev",next:".av-horizontal-gallery-next"},e);var i=a(window),l=(a.avia_utilities.supports("transition"),!1!==this.browserPrefix),n=a.avia_utilities.isMobile,s=a.avia_utilities.isTouchDevice,t=-1!==document.documentElement.className.indexOf("avia_transform3d"),o={};return this.each((function(){var d=a(this),r=d.find(e.slide_container),v=d.find(e.slide_element),u=d.find(e.slide_content),c=(d.find(e.slide_controls),d.find(e.slide_arrows)),p=d.find(e.slide_dots),f=p.find("a"),h=d.find(e.prev),m=d.find(e.next),_=d.find("img"),g=0,y=!1,C={animation:"av-tab-slide-transition",autoplay:!1,loop_autoplay:"once",interval:5,loop_manual:"manual-endless",autoplay_stopper:!1,noNavigation:!1,initial:null,enlarge:1},w=d.data("slideshow-data"),x=null;void 0!==w&&(C=a.extend({},C,w));var b=function(){var e=r.width()/100*r.data("av-height");r.css({padding:0}).height(e),_.css("display","inline-block"),setTimeout((function(){_.css("display","block")}),10),g=0,u.each((function(){g+=a(this).outerWidth(!0)})),v.css("min-width",g),!1!==y&&k(y)},k=function(a){var i=v.find(e.slide_content).eq(a),n=r.width(),s=C.enlarge>1&&y==a?C.enlarge:1,d=i.outerWidth(!0)*s,u=parseInt(i.css("margin-right"),10)/2,c=n<g?-1*i.position().left-d/2+n/2:0;(c+=u)+g<n&&(c=-1*(g-n-parseInt(i.css("margin-right"),10))),c>0&&(c=0),l?(o.transform=t?"translate3d( "+c+"px, 0, 0 )":"translate( "+c+"px, 0 )",o.left="0px",v.css(o)):v.css("left",c),r.find("."+e.active).removeClass(e.active),i.addClass(e.active),y=a,I(),q()},z=function(){"number"==typeof x&&clearTimeout(x),x=null},T=function(){if(!0!==C.autoplay&&d.removeClass("av-slideshow-autoplay").addClass("av-slideshow-manual"),void 0!==C.loop_autoplay&&"endless"==C.loop_autoplay||(C.loop_autoplay="once"),void 0===C.interval&&(C.interval=5),void 0===C.autoplay||!0!==C.autoplay)return C.autoplay=!1,void d.removeClass("av-slideshow-autoplay").addClass("av-slideshow-manual");z(),x=setTimeout((function(){N()}),1e3*C.interval)},N=function(){if(x=null,"endless"!=C.loop_autoplay){var a=!1;if(!1===y?0==u.length&&(a=!0):a=y+1>=u.length,a)return C.autoplay=!1,C.loop_autoplay="manual",d.removeClass("av-slideshow-autoplay").addClass("av-slideshow-manual"),void d.removeClass("av-loop-endless").addClass("av-loop-once")}m.trigger("click")},I=function(){"endless"==C.loop_autoplay||"manual-endless"==C.loop_manual||!1===y?(c.addClass("av-visible-prev"),c.addClass("av-visible-next")):0==y?(c.removeClass("av-visible-prev"),c.addClass("av-visible-next")):y+1>=u.length?(c.addClass("av-visible-prev"),c.removeClass("av-visible-next")):(c.addClass("av-visible-prev"),c.addClass("av-visible-next"))},q=function(){p.find("a").removeClass("active");var a=!1!==y?y:0;p.find("a").eq(a).addClass("active")};u.on("click",(function(e){var i=a(this),l=u.index(i);y!==l&&(z(),k(l),T())})),h.on("click",(function(a){var e=!1!==y?y-1:0;if(e<0){if("endless"!=C.loop_autoplay&&"manual-endless"!=C.loop_manual)return;e=u.length-1}z(),k(e),T()})),m.on("click",(function(a){var e=!1!==y?y+1:0;if(e>=u.length){if("endless"!=C.loop_autoplay&&"manual-endless"!=C.loop_manual)return;e=0}z(),k(e),T()})),f.on("click",(function(e){var i=a(this),l=f.index(i);z(),k(l),T()})),a.avia_utilities.preload({container:d,global_callback:function(){if(b(),C.initial){var a=parseInt(C.initial,10);isNaN(a)||a<1?a=1:a>u.length&&(a=u.length),k(a-1)}I(),q(),T(),setTimeout((function(){d.addClass("av-horizontal-gallery-animated")}),10),i.on("debouncedresize",b)}}),d.hasClass("av-control-hidden")||(n||d.avia_keyboard_controls({37:e.prev,39:e.next}),(n||s)&&d.avia_swipe_trigger({prev:e.prev,next:e.next}))}))}}(jQuery);
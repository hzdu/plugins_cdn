!function(i){"use strict";i.AviaSlider=function(s,t){var e=this;this.$win=i(window),this.$slider=i(t),this.isMobile=i.avia_utilities.isMobile,this.isTouchDevice=i.avia_utilities.isTouchDevice,this._prepareSlides(s),i.avia_utilities.preload({container:this.$slider,single_callback:function(){e._init(s)}})},i.AviaSlider.defaults={interval:5,autoplay:!1,autoplay_stopper:!1,loop_autoplay:"once",loop_manual:"manual-endless",stopinfiniteloop:!1,noNavigation:!1,animation:"slide",transitionSpeed:900,easing:"easeInOutQuart",wrapElement:">ul",slideElement:">li",hoverpause:!1,bg_slider:!1,show_slide_delay:0,fullfade:!1,keep_padding:!1,carousel:"no",carouselSlidesToShow:3,carouselSlidesToScroll:1,carouselResponsive:new Array},i.AviaSlider.prototype={_init:function(s){this.options=this._setOptions(s),this.$sliderUl=this.$slider.find(this.options.wrapElement),this.$slides=this.$sliderUl.find(this.options.slideElement),this.slide_arrows=this.$slider.find(".avia-slideshow-arrows"),this.gotoButtons=this.$slider.find(".avia-slideshow-dots a"),this.permaCaption=this.$slider.find(">.av-slideshow-caption"),this.itemsCount=this.$slides.length,this.current=0,this.currentCarousel=0,this.slideWidthCarousel="240",this.loopCount=0,this.isAnimating=!1,this.browserPrefix=i.avia_utilities.supports("transition"),this.cssActive=!1!==this.browserPrefix,this.css3DActive=-1!==document.documentElement.className.indexOf("avia_transform3d"),1==this.options.bg_slider?(this.imageUrls=[],this.loader=i.avia_utilities.loading(this.$slider),this._bgPreloadImages()):this._kickOff(),"yes"===this.options.carousel&&(this.options.animation="carouselslide")},_setOptions:function(s){var t=this.$slider.data("slideshow-options");if("object"==typeof t)return void 0!==(e=i.extend({},i.AviaSlider.defaults,s,t)).transition_speed&&(e.transitionSpeed=e.transition_speed),e;var e=i.extend(!0,{},i.AviaSlider.defaults,s),a=this.$slider.data();for(var o in a){var n="transition_speed"!=o?o:"transitionSpeed";"string"!=typeof a[o]&&"number"!=typeof a[o]&&"boolean"!=typeof a[o]||(e[n]=a[o]),void 0!==e.autoplay_stopper&&1==e.autoplay_stopper&&(e.autoplay_stopper=!0)}return e},_prepareSlides:function(s){var t=this.$slider.find(".avia-multi-slideshow-button");(t.length&&t.on("click",(function(s){s.stopPropagation(),i.avia_utilities.loading(i(this)).show()})),this.isMobile)&&this.$slider.find(".av-mobile-fallback-image").each((function(){var t=i(this).removeClass("av-video-slide").data({avia_video_events:!0,"video-ratio":0}),e=t.data("mobile-img"),a=t.data("fallback-link"),o=t.find(".avia-slide-wrap");if(t.find(".av-click-overlay, .mejs-mediaelement, .mejs-container").remove(),e||i('<p class="av-fallback-message"><span>Please set a mobile device fallback image for this video in your wordpress backend</span></p>').appendTo(o),s&&s.bg_slider)t.data("img-url",e),""!=a&&(o.is("a")?o.attr("href",a):(o.replaceWith((function(){var s=i(this);return i("<a>").attr({"data-rel":s.data("rel"),class:s.attr("class"),href:a}).append(i(this).contents())})),o=t.find(".avia-slide-wrap")),i.fn.avia_activate_lightbox&&t.parents("#main").avia_activate_lightbox());else{var n='<img src="'+e+'" alt="" title="" />',l=!1;if("string"==typeof a&&""!=a.trim()){if(o.is("a"))o.attr("href",a);else{var r=null!=a.match(/\.(jpg|jpeg|gif|png)$/i)?' rel="lightbox" ':"";n='<a href="'+a.trim()+'"'+r+">"+n+"</a>"}l=!0}t.find(".avia-slide-wrap").append(n),l&&i.fn.avia_activate_lightbox&&t.parents("#main").avia_activate_lightbox()}}));i("html").is(".pointer-device-fine")&&i("body").is(".avia-slider-video-controls-fix-support")&&avia_slider_video_controls_fix(this)},_bgPreloadImages:function(i){this._getImageURLS(),this._preloadSingle(0,(function(){this._kickOff(),this._preloadNext(1)}))},_getImageURLS:function(){var s=this;this.$slides.each((function(t){s.imageUrls[t]=[],s.imageUrls[t].url=i(this).data("img-url"),"string"==typeof s.imageUrls[t].url?s.imageUrls[t].status=!1:s.imageUrls[t].status=!0}))},_preloadSingle:function(s,t){var e=this,a=new Image;"string"==typeof e.imageUrls[s].url?(i(a).on("load error",(function(){e.imageUrls[s].status=!0,e.$slides.eq(s).css("background-image","url("+e.imageUrls[s].url+")"),"function"==typeof t&&t.apply(e,[a,s])})),""!=e.imageUrls[s].url?a.src=e.imageUrls[s].url:i(a).trigger("error")):"function"==typeof t&&t.apply(e,[a,s])},_preloadNext:function(i){void 0!==this.imageUrls[i]&&this._preloadSingle(i,(function(){this._preloadNext(i+1)}))},_bindEvents:function(){var s=i(window);this.$slider.on("click",".next-slide",this.next.bind(this)),this.$slider.on("click",".prev-slide",this.previous.bind(this)),this.$slider.on("click",".goto-slide",this.go2.bind(this)),this.options.hoverpause&&(this.$slider.on("mouseenter",this.pause.bind(this)),this.$slider.on("mouseleave",this.resume.bind(this))),this.permaCaption.length&&(this.permaCaption.on("click",this._routePermaCaptionClick),this.$slider.on("avia_slider_first_slide avia_slider_last_slide avia_slider_navigate_slide",this._setPermaCaptionPointer.bind(this))),this.options.stopinfiniteloop&&this.options.autoplay&&("last"==this.options.stopinfiniteloop?this.$slider.on("avia_slider_last_slide",this._stopSlideshow.bind(this)):"first"==this.options.stopinfiniteloop&&this.$slider.on("avia_slider_first_slide",this._stopSlideshow.bind(this))),"yes"===this.options.carousel?this.isMobile||s.on("debouncedresize",this._buildCarousel.bind(this)):s.on("debouncedresize.aviaSlider",this._setSize.bind(this)),this.options.noNavigation||(this.isMobile||this.$slider.avia_keyboard_controls(),(this.isMobile||this.isTouchDevice)&&this.$slider.avia_swipe_trigger()),this._attach_video_events()},_kickOff:function(){var s=this,t=s.$slides.eq(0),e=t.data("video-ratio");s._bindEvents(),s._set_slide_arrows_visibility(),this.$slider.removeClass("av-default-height-applied"),e?s._setSize(!0):1!=this.options.keep_padding&&(s.$sliderUl.css("padding",0),s.$win.trigger("av-height-change")),s._setCenter(),"no"===this.options.carousel&&(t.addClass("next-active-slide"),t.css({visibility:"visible",opacity:0}).avia_animate({opacity:1},(function(){i(this).addClass("active-slide");s.permaCaption.length&&s.permaCaption.addClass("active-slide")}))),s.$slider.trigger("avia_slider_first_slide"),s.options.autoplay&&s._startSlideshow(),"yes"===s.options.carousel&&s._buildCarousel(),s.$slider.trigger("_kickOff")},_set_slide_arrows_visibility:function(){"yes"!=this.options.carousel?"endless"==this.options.loop_autoplay||"manual-endless"==this.options.loop_manual?(this.slide_arrows.addClass("av-visible-prev"),this.slide_arrows.addClass("av-visible-next")):0==this.current?(this.slide_arrows.removeClass("av-visible-prev"),this.slide_arrows.addClass("av-visible-next")):this.current+1>=this.itemsCount?(this.slide_arrows.addClass("av-visible-prev"),this.slide_arrows.removeClass("av-visible-next")):(this.slide_arrows.addClass("av-visible-prev"),this.slide_arrows.addClass("av-visible-next")):0==this.currentCarousel?(this.slide_arrows.removeClass("av-visible-prev"),this.slide_arrows.addClass("av-visible-next")):this.currentCarousel+this.options.carouselSlidesToShow>=this.itemsCount?(this.slide_arrows.addClass("av-visible-prev"),this.slide_arrows.removeClass("av-visible-next")):(this.slide_arrows.addClass("av-visible-prev"),this.slide_arrows.addClass("av-visible-next"))},_buildCarousel:function(){var s=this.$slider.outerWidth(),t=parseInt(s/this.options.carouselSlidesToShow),e=window.innerWidth||i(window).width();if(this.options.carouselResponsive&&this.options.carouselResponsive.length&&null!==this.options.carouselResponsive)for(var a in this.options.carouselResponsive){var o=this.options.carouselResponsive[a].breakpoint,n=this.options.carouselResponsive[a].settings.carouselSlidesToShow;o>=e&&(t=parseInt(s/n),this.options.carouselSlidesToShow=n)}this.slideWidthCarousel=t,this.$slides.each((function(s){i(this).width(t)}));var l=t*this.itemsCount;this.$sliderUl.width(l).css("transform","translateX(0px)"),this.options.carouselSlidesToShow>=this.itemsCount&&this.$slider.find(".av-timeline-nav").hide()},_navigate:function(i,s){if(this.isAnimating||this.itemsCount<2||!this.$slider.is(":visible"))return!1;if(this.isAnimating=!0,this.prev=this.current,void 0!==s)this.current=s,i=this.current>this.prev?"next":"prev";else if("next"===i){if(this.current=this.current<this.itemsCount-1?this.current+1:0,0===this.current&&this.options.autoplay_stopper&&this.options.autoplay)return this.isAnimating=!1,this.current=this.prev,this._stopSlideshow(),!1;if(0===this.current&&"endless"!=this.options.loop_autoplay&&"manual-endless"!=this.options.loop_manual)return this.isAnimating=!1,this.current=this.prev,!1}else if("prev"===i&&(this.current=this.current>0?this.current-1:this.itemsCount-1,this.itemsCount-1===this.current&&"endless"!=this.options.loop_autoplay&&"manual-endless"!=this.options.loop_manual))return this.isAnimating=!1,this.current=this.prev,!1;this.gotoButtons.removeClass("active").eq(this.current).addClass("active"),this._set_slide_arrows_visibility(),"no"===this.options.carousel&&this._setSize(),1==this.options.bg_slider?1==this.imageUrls[this.current].status?this["_"+this.options.animation].call(this,i):(this.loader.show(),this._preloadSingle(this.current,(function(){this["_"+this.options.animation].call(this,i),this.loader.hide()}))):this["_"+this.options.animation].call(this,i),0==this.current?(this.loopCount++,this.$slider.trigger("avia_slider_first_slide")):this.current==this.itemsCount-1?this.$slider.trigger("avia_slider_last_slide"):this.$slider.trigger("avia_slider_navigate_slide")},_setSize:function(i){if(1!=this.options.bg_slider){var s=this,t=this.$slides.eq(this.current),e=(t.find("img"),Math.floor(this.$sliderUl.height())),a=t.data("video-ratio"),o=a?this.$sliderUl.width()/a:Math.floor(t.height()),n=t.data("video-height"),l=t.data("video-toppos");this.$sliderUl.height(e).css("padding",0),o!=e&&(1==i?(this.$sliderUl.css({height:o}),this.$win.trigger("av-height-change")):this.$sliderUl.avia_animate({height:o},(function(){s.$win.trigger("av-height-change")}))),this._setCenter(),n&&"set"!=n&&(t.find("iframe, embed, video, object, .av_youtube_frame").css({height:n+"%",top:l+"%"}),t.data("video-height","set"))}},_setCenter:function(){var i=this.$slides.eq(this.current),s=i.find("img"),t=parseInt(s.css("min-width"),10),e=i.width(),a=i.find(".av-slideshow-caption"),o=(e-t)/2;a.length&&(a.is(".caption_left")?o=(e-t)/1.5:a.is(".caption_right")&&(o=(e-t)/2.5)),e>=t&&(o=0),s.css({left:o})},_carouselmove:function(){var i=this.slideWidthCarousel*this.currentCarousel;this.$sliderUl.css("transform","translateX(-"+i+"px)")},_carouselslide:function(i){console.log("_carouselslide:",i,this.currentCarousel),"next"===i?this.options.carouselSlidesToShow+this.currentCarousel<this.itemsCount&&(this.currentCarousel++,this._carouselmove()):"prev"===i&&this.currentCarousel>0&&(this.currentCarousel--,this._carouselmove()),this._set_slide_arrows_visibility(),this.isAnimating=!1},_slide:function(i){var s=this.$slider.width(),t="next"===i?-1:1,e=this.browserPrefix+"transform",a={},o={},n={},l=s*t*-1,r=s*t/1;this.cssActive?(e=this.browserPrefix+"transform",this.css3DActive?(a[e]="translate3d("+l+"px, 0, 0)",o[e]="translate3d("+r+"px, 0, 0)",n[e]="translate3d(0,0,0)"):(a[e]="translate("+l+"px,0)",o[e]="translate("+r+"px,0)",n[e]="translate(0,0)")):(a.left=l,o.left=r,n.left=0),this._slide_animate(a,o,n)},_slide_up:function(i){var s=this.$slider.height(),t="next"===i?-1:1,e=this.browserPrefix+"transform",a={},o={},n={},l=s*t*-1,r=s*t/2;this.cssActive?(e=this.browserPrefix+"transform",this.css3DActive?(a[e]="translate3d( 0,"+l+"px, 0)",o[e]="translate3d( 0,"+r+"px, 0)",n[e]="translate3d(0,0,0)"):(a[e]="translate( 0,"+l+"px)",o[e]="translate( 0,"+r+"px)",n[e]="translate(0,0)")):(a.top=l,o.top=r,n.top=0),o["z-index"]="1",n["z-index"]="2",this._slide_animate(a,o,n)},_slide_animate:function(i,s,t){var e=this,a=this.$slides.eq(this.current),o=this.$slides.eq(this.prev);o.trigger("pause"),a.data("disableAutoplay")||(a.hasClass("av-video-lazyload")&&!a.hasClass("av-video-lazyload-complete")?a.find(".av-click-to-play-overlay").trigger("click"):a.trigger("play")),a.css({visibility:"visible",zIndex:4,opacity:1,left:0,top:0}),a.css(i),o.avia_animate(s,this.options.transitionSpeed,this.options.easing);var n=function(){e.isAnimating=!1,a.addClass("active-slide"),o.css({visibility:"hidden"}).removeClass("active-slide next-active-slide"),e.$slider.trigger("avia-transition-done")};e.options.show_slide_delay>0?setTimeout((function(){a.addClass("next-active-slide"),a.avia_animate(t,e.options.transitionSpeed,e.options.easing,n)}),e.options.show_slide_delay):(a.addClass("next-active-slide"),a.avia_animate(t,e.options.transitionSpeed,e.options.easing,n))},_fade:function(){var i=this,s=this.$slides.eq(this.current),t=this.$slides.eq(this.prev),e={visibility:"visible",zIndex:3,opacity:0},a=function(){i.isAnimating=!1,s.addClass("active-slide"),t.css({visibility:"hidden",zIndex:2}).removeClass("active-slide next-active-slide"),i.$slider.trigger("avia-transition-done")};t.trigger("pause"),s.data("disableAutoplay")||(s.hasClass("av-video-lazyload")&&!s.hasClass("av-video-lazyload-complete")?s.find(".av-click-to-play-overlay").trigger("click"):s.trigger("play")),s.addClass("next-active-slide"),1==i.options.fullfade?t.avia_animate({opacity:0},200,"linear",(function(){s.css(e).avia_animate({opacity:1},i.options.transitionSpeed,"linear",a)})):0===i.current?(t.avia_animate({opacity:0},i.options.transitionSpeed/2,"linear"),s.css(e).avia_animate({opacity:1},i.options.transitionSpeed/2,"linear",a)):s.css(e).avia_animate({opacity:1},i.options.transitionSpeed/2,"linear",(function(){t.avia_animate({opacity:0},200,"linear",a)}))},_attach_video_events:function(){var s=this,t=i("html");function e(i){0===i.data.iteration?(i.data.wrap.css("opacity",0),i.data.self.isMobile||i.data.slide.data("disableAutoplay")||i.data.slide.trigger("play"),setTimeout((function(){i.data.wrap.avia_animate({opacity:1},400)}),50)):t.is(".avia-msie")&&!i.data.slide.is(".av-video-service-html5")&&(i.data.slide.data("disableAutoplay")||i.data.slide.trigger("play")),i.data.slide.is(".av-video-service-html5")&&0!==i.data.iteration&&i.data.slide.trigger("pause"),i.data.lazyload&&(i.data.slide.addClass("av-video-lazyload-complete"),i.data.slide.trigger("play"))}function a(i){i.data.slide.is(".av-single-slide")||i.data.slide.is(".av-loop-video")||(i.data.slide.trigger("reset"),s._navigate("next"),s.resume()),i.data.slide.is(".av-loop-video")&&i.data.slide.is(".av-video-service-html5")&&t.is(".avia-safari-8")&&setTimeout((function(){i.data.slide.trigger("play")}),1)}function o(i){"A"!=i.target.tagName&&i.data.slide.trigger("toggle")}s.$slides.each((function(t){var n=i(this),l=n.find(".caption_fullwidth, .av-click-overlay"),r=n.find(".mejs-mediaelement"),d=!!n.hasClass("av-video-lazyload");1!=n.data("avia_video_events")&&(n.data("avia_video_events",!0),n.on("av-video-events-bound",{slide:n,wrap:r,iteration:t,self:s,lazyload:d},e),n.on("av-video-ended",{slide:n,self:s},a),n.on("av-video-play-executed",(function(){setTimeout((function(){s.pause()}),100)})),l.on("click",{slide:n},o),n.is(".av-video-events-bound")&&n.trigger("av-video-events-bound"),d&&0===t&&!n.data("disableAutoplay")&&n.find(".av-click-to-play-overlay").trigger("click"))}))},_timer:function(i,s,t){var e,a=this,o=s;a.timerId=0,this.pause=function(){window.clearTimeout(a.timerId),o-=new Date-e},this.resume=function(){e=new Date,a.timerId=window.setTimeout(i,o)},this.destroy=function(){window.clearTimeout(a.timerId)},this.resume(!0)},_startSlideshow:function(){var i=this;this.isPlaying=!0,this.slideshow=new this._timer((function(){i._navigate("next"),i.options.autoplay&&i._startSlideshow()}),1e3*this.options.interval)},_stopSlideshow:function(){this.options.autoplay&&(this.slideshow.destroy(),this.isPlaying=!1,this.options.autoplay=!1),this.options.autoplay=!1,this.options.loop_autoplay="once",this.$slider.removeClass("av-slideshow-autoplay").addClass("av-slideshow-manual"),this.$slider.removeClass("av-loop-endless").addClass("av-loop-once")},_setPermaCaptionPointer:function(s){if(this.permaCaption.length){var t=i(this.$slides[this.current]).find("a").length;this.permaCaption.css("cursor",t?"pointer":"default")}},_routePermaCaptionClick:function(s){var t=i(this).siblings(".avia-slideshow-inner").find(">.active-slide a");t.length&&(s.preventDefault(),t[0].click())},next:function(i){i.preventDefault(),this._stopSlideshow(),this._navigate("next")},previous:function(i){i.preventDefault(),this._stopSlideshow(),this._navigate("prev")},go2:function(i){if(isNaN(i)&&(i.preventDefault(),i=i.currentTarget.hash.replace("#","")),(i-=1)===this.current||i>=this.itemsCount||i<0)return!1;this._stopSlideshow(),this._navigate(!1,i)},play:function(){this.isPlaying||(this.isPlaying=!0,this._navigate("next"),this.options.autoplay=!0,this._startSlideshow())},pause:function(){this.isPlaying&&this.slideshow.pause()},resume:function(){this.isPlaying&&this.slideshow.resume()},destroy:function(i){this.slideshow.destroy(i)}},i.fn.aviaSlider=function(s){return this.each((function(){var t=i.data(this,"aviaSlider");t||(t=i.data(this,"aviaSlider",new i.AviaSlider(s,this)))}))}}(jQuery);
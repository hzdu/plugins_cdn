var aviaJS=aviaJS||{};!function(t){"use strict";var e=["years","months","weeks","days","hours","minutes","seconds"],a=1e3,n=6e4,i=36e5,o=864e5,r=7*o,d=function(t,e){var a,n,i=e.getDate(),o=i-t.day;(o<0&&(a=t.month,n=t.year,o=new Date(n,a,0).getDate()-t.day+i),o>0)&&(new Date(t.year,t.month-1,t.day+o,t.hours,t.minutes,t.seconds)>e&&o--);return o>=0?o:0},s=function(t,e){var a,n={year:(a=t).getFullYear(),month:a.getMonth()+1,day:a.getDate(),hours:a.getHours(),minutes:a.getMinutes(),seconds:a.getSeconds()},i={years:0,year_months:0,month_months:0,days:0};return i.years=function(t,e){var a=e.getFullYear()-t.year;return a>0&&new Date(t.year+a,t.month-1,t.day,t.hours,t.minutes,t.seconds)>e&&a--,a>=0?a:0}(n,e),n.year+=i.years,i.year_months=function(t,e){var a=e.getMonth()+1,n=a-t.month;return n<0&&(n=12-t.month+a),n>0&&new Date(t.year,t.month-1+n,t.day,t.hours,t.minutes,t.seconds)>e&&n--,n>=0?n:0}(n,e),n.month+=i.year_months,i.days=d(n,e),n.day+=i.days,i.month_months=12*i.years+i.year_months,i},u=function(t,e){if(!0===e){for(let e in t.time)"object"==typeof t.update[e]&&t.update[e].label_container.length&&t.update[e].label_container.css({"min-width":""});return void(t.labelMinWidth=0)}let a=t.labelMinWidth;for(let n in t.time)if("object"==typeof t.update[n]&&t.update[n].label_container.length){let e=t.update[n].label_container.outerWidth(!0);a<e&&(a=e)}if(a>t.labelMinWidth){for(let e in t.time)"object"==typeof t.update[e]&&t.update[e].label_container.length&&t.update[e].label_container.css({"min-width":a+"px"});t.labelMinWidth=a}},l=function(e){var d=new Date,l=new Date(d.getTime()+6e4*d.getTimezoneOffset()),m=e.end-l;if(m<=0){if(!e.firstrun||e.container.hasClass("av-finished-msg"))return e.container.addClass("av-countdown-finished"),void clearInterval(e.countdown);m=0}e.time.years=0,e.time.months=0,e.time.weeks=Math.floor(m/r),e.time.days=Math.floor(m%r/o),e.time.hours=Math.floor(m%o/i),e.time.minutes=Math.floor(m%i/n),e.time.seconds=Math.floor(m%n/a);var c=s(l,e.end);switch(e.data.maximum){case 1:e.time.seconds=Math.floor(m/a);break;case 2:e.time.minutes=Math.floor(m/n);break;case 3:e.time.hours=Math.floor(m/i);break;case 4:e.time.days=Math.floor(m/o);break;case 6:e.time.days=c.days,e.time.months=c.month_months;break;case 7:e.time.days=c.days,e.time.months=c.year_months,e.time.years=c.years}for(let t in e.time)if("object"==typeof e.update[t]&&e.update[t].label_container.length&&(e.firstrun||e.oldtime[t]!=e.time[t])){let a=1===e.time[t]?"single":"multi",n=e.update[t][a];e.update[t].label_container.text()!=n&&e.update[t].label_container.text(n),e.isFlipNumbers?e.update[t].unitContainer.length&&(e.firstrun||(e.update[t].backCard.attr("data-value",e.oldtime[t]),e.update[t].bottomCard.attr("data-value",e.oldtime[t])),e.update[t].topCard.text(e.time[t]),e.update[t].backBottomCard.attr("data-value",e.time[t]),e.update[t].unitContainer.removeClass("flip"),e.update[t].unitContainer[0].offsetWidth,e.update[t].unitContainer.addClass("flip")):e.isFlipClock?e.update[t].unitContainer.length&&(e.firstrun||(e.update[t].currentTop.text(e.oldtime[t]),e.update[t].currentBottom.text(e.oldtime[t])),e.update[t].nextTop.text(e.time[t]),e.update[t].nextBottom.text(e.time[t]),e.update[t].unitContainer.removeClass("flip"),e.update[t].unitContainer[0].offsetWidth,e.update[t].unitContainer.addClass("flip")):e.update[t].time_container.text(e.time[t])}e.firstrun&&e.container.addClass("av-countdown-active"),e.oldtime=t.extend({},e.time),e.firstrun=!1,(e.isFlipNumbers||e.isFlipClock)&&e.number_space&&setTimeout((function(){u(e)}),50)};t.fn.aviaCountdown=function(a){if(this.length)return this.each((function(){var a={update:{},time:{},oldtime:{},firstrun:!0};a.container=t(this),a.data=a.container.data(),a.end=new Date(a.data.year,a.data.month,a.data.day,a.data.hour,a.data.minute),a.isFlipNumbers=a.container.hasClass("av-flip-numbers"),a.isFlipClock=a.container.hasClass("av-flip-clock"),a.number_space=a.container.hasClass("av-number-space-equal"),a.labelMinWidth=0;for(var n in"0"!=a.data.timezone&&(a.end=new Date(a.end.getTime()-6e4*a.data.timezone)),e){let t=a.container.find(".av-countdown-"+e[n]);a.update[e[n]]={unitContainer:t,time_container:a.container.find(".av-countdown-"+e[n]+" .av-countdown-time"),label_container:a.container.find(".av-countdown-"+e[n]+" .av-countdown-time-label")},a.update[e[n]].label_container.length&&(a.update[e[n]].single=a.update[e[n]].label_container.data("label"),a.update[e[n]].multi=a.update[e[n]].label_container.data("label-multi")),a.isFlipNumbers?(a.update[e[n]].topCard=t.find(".card__top"),a.update[e[n]].bottomCard=t.find(".card__bottom"),a.update[e[n]].backCard=t.find(".card__back"),a.update[e[n]].backBottomCard=t.find(".card__back .card__bottom")):a.isFlipClock&&(a.update[e[n]].currentTop=t.find(".curr.top"),a.update[e[n]].nextTop=t.find(".next.top"),a.update[e[n]].nextBottom=t.find(".next.bottom"),a.update[e[n]].currentBottom=t.find(".curr.bottom"))}l(a),a.countdown=setInterval((function(){l(a)}),1e3),window.addEventListener("resize",aviaJS.aviaJSHelpers.debounce(function(t){a.number_space&&u(a,!0)}.bind(this),50))}))}}(jQuery);
!function(i){"use strict";i.AviaFullscreenSlider=function(t,s){this.$slider=i(s),this.$inner=this.$slider.find(".avia-slideshow-inner"),this.$innerLi=this.$inner.find(">li"),this.$caption=this.$inner.find(".avia-slide-wrap .caption_container"),this.$win=i(window),this.isMobile=i.avia_utilities.isMobile,this.isTouchDevice=i.avia_utilities.isTouchDevice,this.mobile_no_animation=i("body").hasClass("avia-mobile-no-animations"),this.options={},this.property={},this.scrollPos="0",this.transform3d=-1!==document.documentElement.className.indexOf("avia_transform3d"),this.ticking=!1,void 0===i.avia_utilities.supported.transition&&(i.avia_utilities.supported.transition=i.avia_utilities.supports("transition")),this._init(t)},i.AviaFullscreenSlider.defaults={height:100,subtract:"#wpadminbar, #header, #main>.title_container",image_attachment:"scroll",parallax_enabled:!0},i.AviaFullscreenSlider.prototype={_init:function(t){var s=this,e=this.$slider.data("slideshow-options");this.options=i.extend(!0,{},i.AviaFullscreenSlider.defaults,t),"object"==typeof e?(this.options.height=void 0!==e.slide_height?e.slide_height:this.options.height,this.options.image_attachment=void 0!==e.image_attachment?e.image_attachment:this.options.image_attachment):(this.$slider.data("slide_height")&&(this.options.height=this.$slider.data("slide_height")),this.$slider.data("image_attachment")&&(this.options.image_attachment=this.$slider.data("image_attachment"))),this.options.parallax_enabled=""==this.options.image_attachment,this.$subtract=i(this.options.subtract),this._setSize(),this.$win.on("debouncedresize",this._setSize.bind(this)),setTimeout((function(){s.options.parallax_enabled&&(!s.isMobile||s.isMobile&&!this.mobile_no_animation)&&s.$win.on("scroll",s._on_scroll.bind(s))}),100),this.$slider.aviaSlider({bg_slider:!0})},_on_scroll:function(i){var t=this;t.ticking||(t.ticking=!0,window.requestAnimationFrame(t._parallaxRequest.bind(t)))},_fetch_properties:function(i){this.property.offset=this.$slider.offset().top,this.property.wh=this.$win.height(),this.property.height=i||this.$slider.outerHeight(),this._parallax_scroll()},_setSize:function(){if(!i.fn.avia_browser_height){var t=this.$win.height(),s=Math.ceil(t/100*this.options.height);this.$subtract.length&&100==this.options.height?this.$subtract.each((function(){s-=this.offsetHeight-.5})):s-=1,this.$slider.height(s).removeClass("av-default-height-applied"),this.$inner.css("padding",0)}this._fetch_properties(s)},_parallaxRequest:function(i){setTimeout(this._parallax_scroll.bind(this),0)},_parallax_scroll:function(t){if(this.options.parallax_enabled&&(!this.isMobile||!this.mobile_no_animation)){var s=this.$win.scrollTop(),e=(this.property.wh,"0"),a={};this.property.offset<s&&s<=this.property.offset+this.property.height&&(e=Math.round(.3*(s-this.property.offset))),this.scrollPos!=e&&(this.scrollPos=e,this.transform3d?a[i.avia_utilities.supported.transition+"transform"]="translate3d(0px,"+e+"px,0px)":a[i.avia_utilities.supported.transition+"transform"]="translate(0px,"+e+"px)",this.$inner.css(a)),this.ticking=!1}}},i.fn.aviaFullscreenSlider=function(t){return this.each((function(){i.data(this,"aviaFullscreenSlider")||(i.data(this,"aviaFullscreenSlider",1),new i.AviaFullscreenSlider(t,this))}))}}(jQuery);
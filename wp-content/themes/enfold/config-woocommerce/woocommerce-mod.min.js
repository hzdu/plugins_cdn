function avia_cart_dropdown_changed(){var t=jQuery("html"),e=jQuery("body").is(".woocommerce-cart"),a=jQuery(".cart_dropdown .av-cart-counter"),r=jQuery(".cart_dropdown"),o=0,i=jQuery("body").hasClass("avia-woocommerce-30");e&&(i?o=parseInt(a.text(),10):r.find(".cart_list li .quantity").each((function(){o+=parseInt(jQuery(this).text(),10)})),0==o?(a.removeClass("av-active-counter").text(o),setTimeout((function(){t.removeClass("html_visible_cart")}),200)):a.length>0&&o>0&&setTimeout((function(){a.addClass("av-active-counter").text(o),t.addClass("html_visible_cart")}),10))}function update_cart_dropdown(t){var e=jQuery("html"),a=jQuery(".cart_dropdown"),r=jQuery(".cart_dropdown .av-cart-counter"),o=a.find(".empty"),i=a.data("success"),n=jQuery.extend({name:"Product",price:"",image:""},avia_clicked_product),d=0,c=jQuery("body").hasClass("avia-woocommerce-30");if(0!=r.length){if(o.length>0&&void 0!==t&&e.addClass("html_visible_cart"),void 0!==t){var s=jQuery(".html_header_sticky #header_main .cart_dropdown_first, .html_header_sidebar #header_main .cart_dropdown_first"),u=(jQuery(".added_to_cart_notification").trigger("avia_hide"),jQuery("<div class='added_to_cart_notification'><span class='avia-arrow'></span><div class='added-product-text'><strong>\""+n.name+'"</strong> '+i+"</div> "+n.image+"</div>").css("opacity",0));s.length||(s="body"),u.on("mouseenter avia_hide",(function(){u.animate({opacity:0,top:parseInt(u.css("top"),10)+15},(function(){u.remove()}))})).appendTo(s).animate({opacity:1},500),setTimeout((function(){u.trigger("avia_hide")}),2500)}"object"==typeof t&&"added_to_cart"==t.type&&c||setTimeout((function(){c?d=r.text():a.find(".cart_list li .quantity").each((function(){d+=parseInt(jQuery(this).text(),10)})),r.length>0&&d>0&&setTimeout((function(){r.addClass("av-active-counter").text(d)}),10)}),300)}}jQuery((function(t){function e(){t(".quantity input[type=number]").each((function(){var e=t(this),a=e.val(),r=e.clone(!0);if(void 0===a||""==(a+"").trim()){var o=r.attr("placeholder");o=void 0===o||""==(o+"").trim()?1:o,r.attr("value",o)}var i=parseFloat(e.attr("max")),n=parseFloat(e.attr("min")),d=parseInt(e.attr("step"),10),c=r.insertAfter(e);c.addClass("no-spin-num"),e.remove(),setTimeout((function(){var e=null,a=null;0===c.next(".plus").length?(e=t('<input type="button" value="-" class="minus">').insertBefore(c),a=t('<input type="button" value="+" class="plus">').insertAfter(c)):(e=c.prev(".minus"),a=c.next(".plus")),e.on("click",(function(){var t=parseInt(c.val(),10);isNaN(t)&&(t=0);let e=parseInt(c.attr("step"),10);isNaN(e)&&(e=d),t=(t=(t-=e)<0?0:t)<n?n:t,c.val(t).trigger("change")})),a.on("click",(function(){var t=parseInt(c.val(),10);isNaN(t)&&(t=0);let e=parseInt(c.attr("step"),10);isNaN(e)&&(e=d),t=(t+=e)>i?i:t,c.val(t).trigger("change")}))}),10)}))}cart_improvement_functions(),cart_dropdown_improvement(),track_ajax_add_to_cart(),t.fn.avia_sc_slider&&t(".shop_slider_yes ul").avia_sc_slider({appendControlls:!1,group:!0,slide:".product",arrowControll:!0,autorotationInterval:"parent"}),t("body.single-product").on("click",".single-product-main-image .avia-wc-30-product-gallery-lightbox",(function(e){e.preventDefault();var a=t(this),r=a.parents(".single-product-main-image"),o=r.find(".flex-active-slide a.lightbox-added").eq(0);if(0==o.length&&(o=r.find("a.lightbox-added").eq(0)),a.hasClass("av-remove-size-attr")){let t=o.find("img").eq(0);t.length&&t.removeAttr("sizes")}o.trigger("click")})),product_add_to_cart_click(),e(),t(document).on("updated_cart_totals",e),setTimeout(first_load_amount,10),t("body").on("added_to_cart",update_cart_dropdown),t("body").on("wc_fragments_refreshed",avia_cart_dropdown_changed),t(".avia_mobile .sort-param").on("touchstart",(function(){}))}));var avia_clicked_product={};function track_ajax_add_to_cart(){jQuery("body").on("click",".add_to_cart_button",(function(t){var e=jQuery(this).parents(".product").eq(0),a={};a.name=e.find(".woocommerce-loop-product__title").text(),a.image=e.find(".thumbnail_container img"),a.price=e.find(".price .amount").last().text(),""===a.name&&(a.name=e.find(".inner_product_header h3").text()),0===e.length&&(e=jQuery(this),a.name=e.find(".av-cart-update-title").text(),a.image=e.find(".av-cart-update-image"),a.price=e.find(".av-cart-update-price").text()),a.image.length?a.image="<img class='added-product-image' src='"+a.image.get(0).src+"' title='' alt='' />":a.image="",avia_clicked_product=a}))}function first_load_amount(){var t=0,e=function(){jQuery(".cart_dropdown .dropdown_widget_cart").eq(0).find(".total .amount").length?update_cart_dropdown():++t<15&&setTimeout(e,500)};if(e(),jQuery(".av-display-cart-on-load").length&&0===jQuery(".woocommerce-message").length){var a=jQuery(".cart_dropdown");setTimeout((function(){a.trigger("mouseenter")}),500),setTimeout((function(){a.trigger("mouseleave")}),2500)}}function product_add_to_cart_click(){var t=jQuery("body"),e=jQuery(".av-catalogue-item"),a=!1;e.length&&(a=jQuery.avia_utilities.loading()),t.on("click",".add_to_cart_button",(function(t){var e=jQuery(this);e.parents(".product").eq(0).addClass("adding-to-cart-loading").removeClass("added-to-cart-check"),e.is(".av-catalogue-item")&&a.show();var r=jQuery("html");r.hasClass("html_visible_cart")||r.addClass("html_visible_cart")})),t.on("added_to_cart",(function(){jQuery(".adding-to-cart-loading").removeClass("adding-to-cart-loading").addClass("added-to-cart-check"),!1!==a&&a.hide()}))}function cart_improvement_functions(){jQuery(".product_type_downloadable, .product_type_virtual").addClass("product_type_simple"),jQuery(".woocommerce-tabs .tabs a").addClass("no-scroll"),jQuery(".single-product-main-image>.images a").attr("rel","product_images[grouped]")}function cart_dropdown_improvement(){var t=jQuery(".cart_dropdown"),e=t.find(".cart_dropdown_link"),a=t.find(".dropdown_widget").css({display:"none",opacity:0});e.on("focus",(function(){t.trigger("mouseenter")})).on("blur",(function(){t.trigger("mouseleave")})),t.on("mouseenter",(function(){const e=t.find(".widget_shopping_cart_content");jQuery.trim(e.html()).length&&a.css({display:"block"}).stop().animate({opacity:1})})).on("mouseleave",(function(){a.stop().animate({opacity:0},(function(){a.css({display:"none"})}))}))}
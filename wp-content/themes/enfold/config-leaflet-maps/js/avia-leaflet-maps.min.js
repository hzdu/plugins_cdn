!function(t){"use strict";t.AviaLeaflet=function(){this.self=this,this.queryURL=" https://nominatim.openstreetmap.org/search?",this.maxResultsInfo=4,this.default_location={street:"",postalcode:"",city:"",country:"",county:"",state:""},this.default_long_lat={lng:"",lat:""}},t.AviaLeaflet.prototype={findGeoLocationModalContainer:function(e){var a=t(e),n=a.closest(".avia-element-action_button"),i=n.find(".avia-name-description > strong"),o=n.find(".avia-name-description > div"),l=a.closest(".avia-modal-toggle-container-inner").find(".avia-form-element-container.avia-element-input"),r=a.data("text"),s=a.data("text_active"),c=this,f=t.extend({},this.default_location),u=t.extend({},this.default_long_lat);l.each((function(){var e=t(this).find("input"),a=e.attr("id");if(void 0!==a){var n=a.replace(/aviaTB/g,"").replace(/geo_/g,"");void 0!==u[n]?u[n]=e:void 0!==f[n]&&(f[n]=e.val().trim())}}));var d=!0;if(t.each(f,(function(t){if(""!=this.trim())return d=!1,!1})),d)alert(avia_modal_L10n.leafletNoAddress);else{f.format="json";var v=this.queryURL+t.param(f);t.ajax({type:"GET",url:v,dataType:"json",cache:!1,beforeSend:function(t,e){void 0!==s&&a.html(s)},success:function(e,a,n){if("success"==a)if(0!=e.length){"object"==typeof u.lng&&u.lng.val(e[0].lon),"object"==typeof u.lat&&u.lat.val(e[0].lat);var l="",r="",s="",f="";e.length>1&&(l+="<ul>",r="</ul>",s="<li>",f="</li>"),t.each(e,(function(t){var a=this.display_name;if(e.length>1&&0==t&&(a=" ---\x3e "+a),l+=s+a+f,t>=c.maxResultsInfo-1)return l+=s+"........"+f,!1})),l+=r,i.html(avia_modal_L10n.leafletResults),o.html(l)}else alert(avia_modal_L10n.leafletNotFound);else alert(avia_modal_L10n.connection_error)},error:function(t){alert(avia_modal_L10n.connection_error)},complete:function(t){void 0!==s&&setTimeout((function(){a.html(r)}),300)}})}}},t((function(){t.avia_leaflet=new t.AviaLeaflet}))}(jQuery);
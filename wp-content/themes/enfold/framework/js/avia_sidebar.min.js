/**
 * This file holds the main javascript functions needed for the functionallity of the widget area creator at wp-admin/widgets.php
 *
 * @author		Christian "Kriesi" Budschedl
 * @copyright	Copyright ( c ) Christian Budschedl
 * @link		http://kriesi.at
 * @link		http://aviathemes.com
 * @since		Version 1.0
 * @package 	AviaFramework
 */
!function(e){var t=function(){this.widget_wrap=e(".widget-liquid-right"),this.widget_area=e("#widgets-right"),this.widget_add=e("#avia-tmpl-add-widget"),this.create_form(),this.add_del_button(),this.bind_events()};t.prototype={create_form:function(){this.widget_wrap.append(this.widget_add.html()),this.widget_name=this.widget_wrap.find('input[name="avia-sidebar-widgets"]'),this.nonce=this.widget_wrap.find('input[name="avia-delete-custom-sidebar-nonce"]').val()},add_del_button:function(){this.widget_area.find(".sidebar-avia-custom").append('<span class="avia-custom-sidebar-area-delete"></span>')},bind_events:function(){this.widget_wrap.on("click",".avia-custom-sidebar-area-delete",this.delete_sidebar.bind(this))},delete_sidebar:function(t){if(0==confirm("Do you really want to delete this widget area?"))return!1;var i=e(t.currentTarget).parents(".widgets-holder-wrap").eq(0),a=i.find(".sidebar-name h3 , .sidebar-name h2"),n=a.find(".spinner"),o=a.text().trim();e.ajax({type:"POST",url:window.ajaxurl,data:{action:"avia_ajax_delete_custom_sidebar",name:o,_wpnonce:this.nonce},beforeSend:function(){n.addClass("activate_spinner")},success:function(t){"sidebar-deleted"==t&&i.slideUp(200,(function(){e(".widget-control-remove",i).trigger("click"),i.remove()}))}})}},e((function(){new t}))}(jQuery),function(e){var t=function(){this,this.body=e("body"),this.bind_events(),this.body.find("form .widget-content .avia-coditional-widget-select").trigger("change")};t.prototype={bind_events:function(){this.body.on("change","form .widget-content .avia-coditional-widget-select",this.select_changed),e(document).on("widget-updated",(function(){var t=e(this.activeElement).closest("form").find(".avia-coditional-widget-select");t.length>0&&t.trigger("change")}))},select_changed:function(t){var i=e(this),a=i.closest(".avia_widget_conditional_form").first();i.find("option").each((function(){var t=e(this).val();a.removeClass(t)}));var n=i.find("option:selected").val();a.addClass(n)}},e((function(){new t}))}(jQuery),function(e){var t=function(){var t=this;e(document).on("widget-added",(function(i,a){e("body").hasClass("block-editor-page")?t.check_colorpickers(e(a)):t.check_colorpickers()})),e(document).on("widget-updated",(function(i){var a=e(this.activeElement).closest("form"),n=a.closest("div.widgets-sortables");a.find(".avia_color_picker.avia-colorpicker-attached").removeClass("avia-colorpicker-attached").addClass("avia-colorpicker-to-attach"),t.check_colorpickers(n)}))};t.prototype={check_colorpickers:function(t){var i=void 0!==t?t:e("div.widgets-sortables");if(0!=i.length){var a=e("body").hasClass("block-editor-page")?"":".avia-colorpicker-to-attach";i.find(".avia_color_picker"+a).each((function(t){var i=e(this);i.removeClass("avia-colorpicker-to-attach").addClass("avia-colorpicker-attached"),i.closest(".avia_colorpicker_style_wrap").avia_color_picker_activation()}))}}},e((function(){new t}))}(jQuery);
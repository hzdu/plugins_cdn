jQuery((function(e){e(".avia_colorpicker").avia_color_picker_activation(),e("body").avia_color_picker_autodetection()})),function(e){e.fn.avia_color_picker_autodetection=function(o){return this.each((function(){e(".avia_autodetect").on("click",(function(){var o=e(this).parents(".avia_control").eq(0),t=e(".avia_color_picker",o),r=e(".avia_color_picker_div",o),i=e(".avia_loading",o),n="#avia_"+this.hash.substring(1),a=this.id.split("-__-"),c=o.parents(".avia_visual_set").eq(0).find(".avia_preview_pic");void 0!==a[1]&&(n=n+"-__-"+a[1]);var l=e(n+" .avia_upload_input").val();return e.ajax({type:"POST",url:window.ajaxurl,data:"action=avia_ajax_get_image_color&attachment_id="+l,beforeSend:function(){i.css({display:"none",visibility:"visible"}).fadeIn(400)},success:function(e){i.fadeOut(),7==e.length&&(r.css("backgroundColor",e),t.val(e),c.css("backgroundColor",e))}}),!1}))}))}}(jQuery),function(e){e.fn.avia_color_picker_activation=function(o){return this.each((function(){var o=e(this);o.length&&(o.each((function(){var o=e(this).find(".avia_color_picker"),t=e(this).find(".avia_color_picker_div"),r=e(this).parents(".avia_visual_set").eq(0).find(".avia_target_inside"),i=o.val(),n="#fff";""!=i&&(t.css("backgroundColor",i),n=i),o.AviaColorPicker({color:n,onShow:function(o){return e(o).fadeIn(300),!1},onHide:function(t){return e(t).fadeOut(300),o.trigger("change"),!1},onChange:function(e,i,n){r.css("backgroundColor","#"+i),t.css("backgroundColor","#"+i),o.val("#"+i)}}),r.css("backgroundColor",t.css("backgroundColor"));var a=e("#"+o.data("colorpickerId"));o.on("change keyup",(function(){var i=e(this).val();7==i.length&&(r.css("backgroundColor",i),t.css("backgroundColor",i),o.val(i),a.find(".colorpicker_hex input").val(i).trigger("change"))}))})),e(".avia_color_picker_div").on("click",(function(){return e(this).prev(".avia_color_picker").trigger("click"),!1})))}))}}(jQuery),function(e){var o,t,r,i,n,a,c,l,d,s,u,p,f,h,v,g,m,k,b,_,y,C,S,w,x,I,M,H,j,P,W,E,Q,T,N,q,O,L=(o=65,t={eventName:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},color:"ff0000",livePreview:!0,flat:!1},r=function(o,t){var r=N(o);e(t).data("colorpicker").fields.eq(1).val(r.r).end().eq(2).val(r.g).end().eq(3).val(r.b).end()},i=function(o,t){e(t).data("colorpicker").fields.eq(4).val(o.h).end().eq(5).val(o.s).end().eq(6).val(o.b).end()},n=function(o,t){e(t).data("colorpicker").fields.eq(0).val(q(o)).end()},a=function(o,t){e(t).data("colorpicker").selector.css("backgroundColor","#"+q({h:o.h,s:100,b:100})),e(t).data("colorpicker").selectorIndic.css({left:parseInt(150*o.s/100,10),top:parseInt(150*(100-o.b)/100,10)})},c=function(o,t){e(t).data("colorpicker").hue.css("top",parseInt(150-150*o.h/360,10))},l=function(o,t){e(t).data("colorpicker").currentColor.css("backgroundColor","#"+q(o))},d=function(o,t){e(t).data("colorpicker").newColor.css("backgroundColor","#"+q(o))},s=function(t){var r=t.charCode||t.keyCode||-1;if(r>o&&r<=90||32==r)return!1;!0===e(this).parent().parent().data("colorpicker").livePreview&&u.apply(this)},u=function(o){var t,l=e(this).parent().parent();this.parentNode.className.indexOf("_hex")>0?l.data("colorpicker").color=t=Q(E(this.value)):this.parentNode.className.indexOf("_hsb")>0?l.data("colorpicker").color=t=P({h:parseInt(l.data("colorpicker").fields.eq(4).val(),10),s:parseInt(l.data("colorpicker").fields.eq(5).val(),10),b:parseInt(l.data("colorpicker").fields.eq(6).val(),10)}):l.data("colorpicker").color=t=T(W({r:parseInt(l.data("colorpicker").fields.eq(1).val(),10),g:parseInt(l.data("colorpicker").fields.eq(2).val(),10),b:parseInt(l.data("colorpicker").fields.eq(3).val(),10)})),o&&(r(t,l.get(0)),n(t,l.get(0)),i(t,l.get(0))),a(t,l.get(0)),c(t,l.get(0)),d(t,l.get(0)),l.data("colorpicker").onChange.apply(l,[t,q(t),N(t)])},p=function(o){e(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus")},f=function(){o=this.parentNode.className.indexOf("_hex")>0?70:65,e(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus"),e(this).parent().addClass("colorpicker_focus")},h=function(o){var t=e(this).parent().find("input").trigger("focus"),r={el:e(this).parent().addClass("colorpicker_slider"),max:this.parentNode.className.indexOf("_hsb_h")>0?360:this.parentNode.className.indexOf("_hsb")>0?100:255,y:o.pageY,field:t,val:parseInt(t.val(),10),preview:e(this).parent().parent().data("colorpicker").livePreview};e(document).on("mouseup",r,g),e(document).on("mousemove",r,v)},v=function(e){return e.data.field.val(Math.max(0,Math.min(e.data.max,parseInt(e.data.val+e.pageY-e.data.y,10)))),e.data.preview&&u.apply(e.data.field.get(0),[!0]),!1},g=function(o){return u.apply(o.data.field.get(0),[!0]),o.data.el.removeClass("colorpicker_slider").find("input").trigger("focus"),e(document).off("mouseup",g),e(document).off("mousemove",v),!1},m=function(o){var t={cal:e(this).parent(),y:e(this).offset().top};t.preview=t.cal.data("colorpicker").livePreview,e(document).on("mouseup",t,b),e(document).on("mousemove",t,k)},k=function(e){return u.apply(e.data.cal.data("colorpicker").fields.eq(4).val(parseInt(360*(150-Math.max(0,Math.min(150,e.pageY-e.data.y)))/150,10)).get(0),[e.data.preview]),!1},b=function(o){return r(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),n(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),e(document).off("mouseup",b),e(document).off("mousemove",k),!1},_=function(o){var t={cal:e(this).parent(),pos:e(this).offset()};t.preview=t.cal.data("colorpicker").livePreview,e(document).on("mouseup",t,C),e(document).on("mousemove",t,y)},y=function(e){return u.apply(e.data.cal.data("colorpicker").fields.eq(6).val(parseInt(100*(150-Math.max(0,Math.min(150,e.pageY-e.data.pos.top)))/150,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(150,e.pageX-e.data.pos.left))/150,10)).get(0),[e.data.preview]),!1},C=function(o){return r(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),n(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),e(document).off("mouseup",C),e(document).off("mousemove",y),!1},S=function(o){e(this).addClass("colorpicker_focus")},w=function(o){e(this).removeClass("colorpicker_focus")},x=function(o){var t=e(this).parent(),r=t.data("colorpicker").color;t.data("colorpicker").origColor=r,l(r,t.get(0)),t.data("colorpicker").onSubmit(r,q(r),N(r),t.data("colorpicker").el)},I=function(o){var t=e("#"+e(this).data("colorpickerId"));t.data("colorpicker").onBeforeShow.apply(this,[t.get(0)]);var r=e(this).offset(),i=j(),n=r.top+this.offsetHeight,a=r.left;return n+176>i.t+i.h&&(n-=this.offsetHeight+176),a+356>i.l+i.w&&(a-=356),t.css({left:a+"px",top:n+"px"}),0!=t.data("colorpicker").onShow.apply(this,[t.get(0)])&&t.show(),e(document).on("mousedown",{cal:t},M),!1},M=function(o){e(o.target).data()&&e(o.target).data("colorpickerId")==o.data.cal.attr("id")||H(o.data.cal.get(0),o.target,o.data.cal.get(0))||(0!=o.data.cal.data("colorpicker").onHide.apply(this,[o.data.cal.get(0)])&&o.data.cal.hide(),e(document).off("mousedown",M))},H=function(e,o,t){if(e==o)return!0;if(e.contains)return e.contains(o);if(e.compareDocumentPosition)return!!(16&e.compareDocumentPosition(o));for(var r=o.parentNode;r&&r!=t;){if(r==e)return!0;r=r.parentNode}return!1},j=function(){var e="CSS1Compat"==document.compatMode;return{l:window.pageXOffset||(e?document.documentElement.scrollLeft:document.body.scrollLeft),t:window.pageYOffset||(e?document.documentElement.scrollTop:document.body.scrollTop),w:window.innerWidth||(e?document.documentElement.clientWidth:document.body.clientWidth),h:window.innerHeight||(e?document.documentElement.clientHeight:document.body.clientHeight)}},P=function(e){return{h:Math.min(360,Math.max(0,e.h)),s:Math.min(100,Math.max(0,e.s)),b:Math.min(100,Math.max(0,e.b))}},W=function(e){return{r:Math.min(255,Math.max(0,e.r)),g:Math.min(255,Math.max(0,e.g)),b:Math.min(255,Math.max(0,e.b))}},E=function(e){var o=6-e.length;if(o>0){for(var t=[],r=0;r<o;r++)t.push("0");t.push(e),e=t.join("")}return e},Q=function(e){return T(function(e){return{r:(e=parseInt(e.indexOf("#")>-1?e.substring(1):e,16))>>16,g:(65280&e)>>8,b:255&e}}(e))},T=function(e){var o={h:0,s:0,b:0},t=Math.min(e.r,e.g,e.b),r=Math.max(e.r,e.g,e.b),i=r-t;return o.b=r,o.s=0!=r?255*i/r:0,0!=o.s?e.r==r?o.h=(e.g-e.b)/i:e.g==r?o.h=2+(e.b-e.r)/i:o.h=4+(e.r-e.g)/i:o.h=-1,o.h*=60,o.h<0&&(o.h+=360),o.s*=100/255,o.b*=100/255,o},N=function(e){var o={},t=Math.round(e.h),r=Math.round(255*e.s/100),i=Math.round(255*e.b/100);if(0==r)o.r=o.g=o.b=i;else{var n=i,a=(255-r)*i/255,c=t%60*(n-a)/60;360==t&&(t=0),t<60?(o.r=n,o.b=a,o.g=a+c):t<120?(o.g=n,o.b=a,o.r=n-c):t<180?(o.g=n,o.r=a,o.b=a+c):t<240?(o.b=n,o.r=a,o.g=n-c):t<300?(o.b=n,o.g=a,o.r=a+c):t<360?(o.r=n,o.g=a,o.b=n-c):(o.r=0,o.g=0,o.b=0)}return{r:Math.round(o.r),g:Math.round(o.g),b:Math.round(o.b)}},q=function(o){return t=N(o),r=[t.r.toString(16),t.g.toString(16),t.b.toString(16)],e.each(r,(function(e,o){1==o.length&&(r[e]="0"+o)})),r.join("");var t,r},O=function(){var o=e(this).parent(),t=o.data("colorpicker").origColor;o.data("colorpicker").color=t,r(t,o.get(0)),n(t,o.get(0)),i(t,o.get(0)),a(t,o.get(0)),c(t,o.get(0)),d(t,o.get(0))},{init:function(o){if("string"==typeof(o=e.extend({},t,o||{})).color)o.color=Q(o.color);else if(null!=o.color.r&&null!=o.color.g&&null!=o.color.b)o.color=T(o.color);else{if(null==o.color.h||null==o.color.s||null==o.color.b)return this;o.color=P(o.color)}return this.each((function(){if(!e(this).data("colorpickerId")){var t=e.extend({},o);t.origColor=o.color;var v="collorpicker_"+(parseInt(1e3*Math.random())+parseInt(1e3*Math.random()));e(this).data("colorpickerId",v);var g=e('<div class="colorpicker"><div class="colorpicker_color"><div><div></div></div></div><div class="colorpicker_hue"><div></div></div><div class="colorpicker_new_color"></div><div class="colorpicker_current_color"></div><div class="colorpicker_hex"><input type="text" maxlength="6" size="6" /></div><div class="colorpicker_rgb_r colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_g colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_h colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_s colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_submit"></div></div>').attr("id",v);t.flat?g.appendTo(this).show():g.appendTo(document.body),t.fields=g.find("input").on("keyup",s).on("change",u).on("blur",p).on("focus",f),g.find("span").on("mousedown",h).end().find(">div.colorpicker_current_color").on("click",O),t.selector=g.find("div.colorpicker_color").on("mousedown",_),t.selectorIndic=t.selector.find("div div"),t.el=this,t.hue=g.find("div.colorpicker_hue div"),g.find("div.colorpicker_hue").on("mousedown",m),t.newColor=g.find("div.colorpicker_new_color"),t.currentColor=g.find("div.colorpicker_current_color"),g.data("colorpicker",t),g.find("div.colorpicker_submit").on("mouseenter",S).on("mouseleave",w).on("click",x),r(t.color,g.get(0)),i(t.color,g.get(0)),n(t.color,g.get(0)),c(t.color,g.get(0)),a(t.color,g.get(0)),l(t.color,g.get(0)),d(t.color,g.get(0)),t.flat?g.css({position:"relative",display:"block"}):e(this).on(t.eventName,I)}}))},showPicker:function(){return this.each((function(){e(this).data("colorpickerId")&&I.apply(this)}))},hidePicker:function(){return this.each((function(){e(this).data("colorpickerId")&&e("#"+e(this).data("colorpickerId")).hide()}))},setColor:function(o){if("string"==typeof o)o=Q(o);else if(null!=o.r&&null!=o.g&&null!=o.b)o=T(o);else{if(null==o.h||null==o.s||null==o.b)return this;o=P(o)}return this.each((function(){if(e(this).data("colorpickerId")){var t=e("#"+e(this).data("colorpickerId"));t.data("colorpicker").color=o,t.data("colorpicker").origColor=o,r(o,t.get(0)),i(o,t.get(0)),n(o,t.get(0)),c(o,t.get(0)),a(o,t.get(0)),l(o,t.get(0)),d(o,t.get(0))}}))}});e.fn.extend({AviaColorPicker:L.init,AviaColorPickerHide:L.hidePicker,AviaColorPickerShow:L.showPicker,AviaColorPickerSetColor:L.setColor});var Y,A=window.EYE=(Y={init:[]},{init:function(){e.each(Y.init,(function(e,o){o.call()}))},extend:function(e){for(var o in e)null!=e[o]&&(this[o]=e[o])},register:function(e,o){Y[o]||(Y[o]=[]),Y[o].push(e)}});e(A.init)}(jQuery),function(e){EYE.extend({getPosition:function(e,o){var t=0,r=0,i=e.style,n=!1;if(o&&"none"==jQuery.curCSS(e,"display")){var a=i.visibility,c=i.position;n=!0,i.visibility="hidden",i.display="block",i.position="absolute"}var l=e;if(l.getBoundingClientRect){var d=l.getBoundingClientRect();t=d.left+Math.max(document.documentElement.scrollLeft,document.body.scrollLeft)-2,r=d.top+Math.max(document.documentElement.scrollTop,document.body.scrollTop)-2}else{if(t=l.offsetLeft,r=l.offsetTop,e!=(l=l.offsetParent))for(;l;)t+=l.offsetLeft,r+=l.offsetTop,l=l.offsetParent;for(jQuery.browser.safari&&"absolute"==jQuery.curCSS(e,"position")&&(t-=document.body.offsetLeft,r-=document.body.offsetTop),l=e.parentNode;l&&"BODY"!=l.tagName.toUpperCase()&&"HTML"!=l.tagName.toUpperCase();)"inline"!=jQuery.curCSS(l,"display")&&(t-=l.scrollLeft,r-=l.scrollTop),l=l.parentNode}return 1==n&&(i.display="none",i.position=c,i.visibility=a),{x:t,y:r}},getSize:function(e){var o=parseInt(jQuery.curCSS(e,"width"),10),t=parseInt(jQuery.curCSS(e,"height"),10),r=0,i=0;if("none"!=jQuery.curCSS(e,"display"))r=e.offsetWidth,i=e.offsetHeight;else{var n=e.style,a=n.visibility,c=n.position;n.visibility="hidden",n.display="block",n.position="absolute",r=e.offsetWidth,i=e.offsetHeight,n.display="none",n.position=c,n.visibility=a}return{w:o,h:t,wb:r,hb:i}},getClient:function(e){var o,t;if(e)t=e.clientWidth,o=e.clientHeight;else{var r=document.documentElement;t=window.innerWidth||self.innerWidth||r&&r.clientWidth||document.body.clientWidth,o=window.innerHeight||self.innerHeight||r&&r.clientHeight||document.body.clientHeight}return{w:t,h:o}},getScroll:function(e){var o=0,t=0,r=0,i=0,n=0,a=0;return e&&"body"!=e.nodeName.toLowerCase()?(o=e.scrollTop,t=e.scrollLeft,r=e.scrollWidth,i=e.scrollHeight):(document.documentElement?(o=document.documentElement.scrollTop,t=document.documentElement.scrollLeft,r=document.documentElement.scrollWidth,i=document.documentElement.scrollHeight):document.body&&(o=document.body.scrollTop,t=document.body.scrollLeft,r=document.body.scrollWidth,i=document.body.scrollHeight),"undefined"!=typeof pageYOffset&&(o=pageYOffset,t=pageXOffset),n=self.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||0,a=self.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0),{t:o,l:t,w:r,h:i,iw:n,ih:a}},getMargins:function(e,o){var t=jQuery.curCSS(e,"marginTop")||"",r=jQuery.curCSS(e,"marginRight")||"",i=jQuery.curCSS(e,"marginBottom")||"",n=jQuery.curCSS(e,"marginLeft")||"";return o?{t:parseInt(t,10)||0,r:parseInt(r,10)||0,b:parseInt(i,10)||0,l:parseInt(n,10)}:{t:t,r:r,b:i,l:n}},getPadding:function(e,o){var t=jQuery.curCSS(e,"paddingTop")||"",r=jQuery.curCSS(e,"paddingRight")||"",i=jQuery.curCSS(e,"paddingBottom")||"",n=jQuery.curCSS(e,"paddingLeft")||"";return o?{t:parseInt(t,10)||0,r:parseInt(r,10)||0,b:parseInt(i,10)||0,l:parseInt(n,10)}:{t:t,r:r,b:i,l:n}},getBorder:function(e,o){var t=jQuery.curCSS(e,"borderTopWidth")||"",r=jQuery.curCSS(e,"borderRightWidth")||"",i=jQuery.curCSS(e,"borderBottomWidth")||"",n=jQuery.curCSS(e,"borderLeftWidth")||"";return o?{t:parseInt(t,10)||0,r:parseInt(r,10)||0,b:parseInt(i,10)||0,l:parseInt(n,10)||0}:{t:t,r:r,b:i,l:n}},traverseDOM:function(e,o){for(o(e),e=e.firstChild;e;)EYE.traverseDOM(e,o),e=e.nextSibling},getInnerWidth:function(e,o){var t=e.offsetWidth;return o?Math.max(e.scrollWidth,t)-t+e.clientWidth:e.clientWidth},getInnerHeight:function(e,o){var t=e.offsetHeight;return o?Math.max(e.scrollHeight,t)-t+e.clientHeight:e.clientHeight},getExtraWidth:function(o){return e.boxModel?(parseInt(e.curCSS(o,"paddingLeft"))||0)+(parseInt(e.curCSS(o,"paddingRight"))||0)+(parseInt(e.curCSS(o,"borderLeftWidth"))||0)+(parseInt(e.curCSS(o,"borderRightWidth"))||0):0},getExtraHeight:function(o){return e.boxModel?(parseInt(e.curCSS(o,"paddingTop"))||0)+(parseInt(e.curCSS(o,"paddingBottom"))||0)+(parseInt(e.curCSS(o,"borderTopWidth"))||0)+(parseInt(e.curCSS(o,"borderBottomWidth"))||0):0},isChildOf:function(o,t,r){if(o==t)return!0;if(!t||!t.nodeType||1!=t.nodeType)return!1;if(o.contains&&!e.browser.safari)return o.contains(t);if(o.compareDocumentPosition)return!!(16&o.compareDocumentPosition(t));for(var i=t.parentNode;i&&i!=r;){if(i==o)return!0;i=i.parentNode}return!1},centerEl:function(o,t){var r=EYE.getScroll(),i=EYE.getSize(o);t&&"vertically"!=t||e(o).css({top:r.t+(Math.min(r.h,r.ih)-i.hb)/2+"px"}),t&&"horizontally"!=t||e(o).css({left:r.l+(Math.min(r.w,r.iw)-i.wb)/2+"px"})}}),e.easing.easeout||(e.easing.easeout=function(e,o,t,r,i){return-r*((o=o/i-1)*o*o*o-1)+t})}(jQuery),function(e){var o=function(o){var t=e("ul.navigationTabs a").removeClass("active").index(this);e(this).addClass("active"),e("div.tab").hide().eq(t).show()};EYE.register((function(){var t=window.location.hash.replace("#",""),r=e("ul.navigationTabs a").on("click",o).filter('a[rel="'+t+'"]');0==r.length&&(r=e("ul.navigationTabs a").first()),o.apply(r.get(0)),e("#colorpickerHolder").AviaColorPicker({flat:!0}),e("#colorpickerHolder2").AviaColorPicker({flat:!0,color:"#00ff00",onSubmit:function(o,t,r){e("#colorSelector2 div").css("backgroundColor","#"+t)}}),e("#colorpickerHolder2>div").css("position","absolute");var i=!1;e("#colorSelector2").on("click",(function(){e("#colorpickerHolder2").stop().animate({height:i?0:173},500),i=!i})),e("#colorpickerField1, #colorpickerField2, #colorpickerField3").AviaColorPicker({onSubmit:function(o,t,r,i){e(i).val(t),e(i).AviaColorPickerHide()},onBeforeShow:function(){e(this).AviaColorPickerSetColor(this.value)}}).on("keyup",(function(){e(this).AviaColorPickerSetColor(this.value)})),e("#colorSelector").AviaColorPicker({color:"#0000ff",onShow:function(o){return e(o).fadeIn(500),!1},onHide:function(o){return e(o).fadeOut(500),!1},onChange:function(o,t,r){e("#colorSelector div").css("backgroundColor","#"+t)}})}),"init")}(jQuery);
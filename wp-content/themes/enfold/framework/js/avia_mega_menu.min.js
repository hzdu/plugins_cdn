/**
 * This file holds the main javascript functions needed to improve the avia mega menu backend
 *
 * @author		Christian "Kriesi" Budschedl
 * @copyright	Copyright ( c ) Christian Budschedl
 * @link		http://kriesi.at
 * @link		http://aviathemes.com
 * @since		Version 1.0
 * @package 	AviaFramework
 */
!function(e){var a={recalcTimeout:!1,bind_click:function(){e(document).on("click",".menu-item-avia-megamenu,#menu-to-edit",(function(){var n=e(this),i=n.parents(".menu-item").eq(0);n.is(":checked")?i.addClass("avia_mega_active"):i.removeClass("avia_mega_active"),a.recalc()}))},recalcInit:function(){e(document).on("mouseup",".menu-item-bar",(function(n,i){e(n.target).is("a")||(clearTimeout(a.recalcTimeout),a.recalcTimeout=setTimeout(a.recalc,500))}))},recalc:function(){var a=e(".menu-item","#menu-to-edit");a.each((function(n){var i=e(this),t=e(".menu-item-avia-megamenu",this);i.is(".menu-item-depth-0")||(a.eq(n-1).is(".avia_mega_active")?(i.addClass("avia_mega_active"),t.attr("checked","checked")):(i.removeClass("avia_mega_active"),t.attr("checked","")))}))},addItemToMenu:function(a,n,i){var t=e("#menu").val(),c=e("#menu-settings-column-nonce").val();n=n||function(){},i=i||function(){},params={action:"avia_ajax_switch_menu_walker",menu:t,"menu-settings-column-nonce":c,"menu-item":a},e.post(ajaxurl,params,(function(a){var t=e("#menu-instructions");n(a,params),!t.hasClass("menu-instructions-inactive")&&t.siblings().length&&t.addClass("menu-instructions-inactive"),i()}))}};e((function(){a.bind_click(),a.recalcInit(),a.recalc(),"undefined"!=typeof wpNavMenu&&(wpNavMenu.addItemToMenu=a.addItemToMenu)}))}(jQuery);
function bricksWooRefreshCartFragments(){if("undefined"!=typeof woocommerce_params){var t=woocommerce_params.wc_ajax_url;t=t.replace("%%endpoint%%","get_refreshed_fragments"),jQuery.post(t,(function(t,e){t.fragments&&bricksWooReplaceFragments(t.fragments),jQuery("body").trigger("wc_fragments_refreshed")}))}}function bricksWooReplaceFragments(t){t&&jQuery.each(t,(function(t,e){var r=jQuery(t);r&&r.replaceWith(e)}))}function bricksWooMiniCartHideDetailsClickOutside(){const t=t=>{if(!t.classList.contains("cart-detail"))return;t.classList.remove("active");const e=t.closest(".brxe-woocommerce-mini-cart");e&&e.classList.toggle("show-cart-details")},e=bricksQuerySelectorAll(document,".cart-detail");e&&e.forEach((function(e){document.addEventListener("click",(function(r){r.target.closest(".mini-cart-link")||!e.classList.contains("active")||r.target.closest(".cart-detail")||t(e)}))}));const r=bricksQuerySelectorAll(document,".cart-detail .bricks-mini-cart-close");r&&r.forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault();const r=e.target.closest(".cart-detail");r&&t(r)}))}))}function bricksWooMiniModalsToggle(t){t.preventDefault();var e=t.currentTarget.getAttribute("data-toggle-target");if(e){document.querySelectorAll(".bricks-woo-toggle").forEach((function(t){var r=t.getAttribute("data-toggle-target");if(r!==e){var o=t.querySelector(r);if(null!==o&&o.classList.contains("active")){o.classList.remove("active");var c=t.closest(".brxe-woocommerce-mini-cart");c&&c.classList.remove("show-cart-details")}}}));var r=document.querySelector(e);if(null!==r){r.classList.toggle("active");var o=r.closest(".brxe-woocommerce-mini-cart");o&&o.classList.toggle("show-cart-details")}}}function bricksWooProductGallery(){bricksIsFrontend||void 0===jQuery(this).wc_product_gallery||jQuery(".woocommerce-product-gallery").each((function(){jQuery(this).trigger("wc-product-gallery-before-init",[this,window.wc_single_product_params]),jQuery(this).wc_product_gallery(window.wc_single_product_params),jQuery(this).trigger("wc-product-gallery-after-init",[this,window.wc_single_product_params])}))}function bricksWooQuantityTriggers(){bricksQuerySelectorAll(document,"form .quantity .action").forEach((function(t){t.classList.contains("brx-initialized")||(t.classList.add("brx-initialized"),t.addEventListener("click",(function(t){t.preventDefault();var e=t.target.closest(".quantity").querySelector(".qty:not([readonly])");if(!e)return;var r=document.querySelector('button[name="update_cart"]');r&&(r.removeAttribute("disabled"),r.setAttribute("aria-disabled","false")),t.target.classList.contains("plus")?e.stepUp():t.target.classList.contains("minus")&&e.stepDown();const o=new Event("change",{bubbles:!0});e.dispatchEvent(o)})))}))}function bricksWooProductsFilter(){bricksQuerySelectorAll(document,".brxe-woocommerce-products-filter .filter-item").forEach((function(t){function e(t){t.target.closest("form").submit()}function r(t){t.target.closest(".filter-item").classList.toggle("open")}bricksQuerySelectorAll(t,".dropdown").forEach((function(t){t.addEventListener("change",e)})),bricksQuerySelectorAll(t,'input[type="radio"], input[type="checkbox"]').forEach((function(t){t.addEventListener("change",e),t.addEventListener("click",e)})),bricksQuerySelectorAll(t,".double-slider-wrap").forEach((function(t){bricksWooProductsFilterInitSlider(t)})),bricksQuerySelectorAll(t,".title").forEach((function(t){t.onclick=r}))}))}function bricksWooMiniModals(){document.querySelectorAll(".bricks-woo-toggle").forEach((function(t){t.addEventListener("click",bricksWooMiniModalsToggle),t.hasAttribute("data-open-on-add-to-cart")&&jQuery(document.body).on("added_to_cart",(function(e,r,o,c){t.click()}))}))}function bricksWooProductsFilterInitSlider(t){var e=t.querySelector("input.lower"),r=t.querySelector("input.upper");e.oninput=bricksWooProductsFilterUpdateSliderValue,r.oninput=bricksWooProductsFilterUpdateSliderValue;var o=parseInt(e.value),c=parseInt(r.value);bricksWooProductsFilterRenderSliderValues(e.parentNode,o,c),e.addEventListener("change",(function(){t.closest("form").submit()})),r.addEventListener("change",(function(){t.closest("form").submit()}))}function bricksWooProductsFilterUpdateSliderValue(t){var e=t.target.parentNode,r=e.querySelector("input.lower"),o=e.querySelector("input.upper"),c=parseInt(r.value),i=parseInt(o.value);i<c+4&&(r.value=i-4,o.value=c+4,c==r.min&&(o.value=4),i==o.max&&(r.value=parseInt(o.max)-4)),bricksWooProductsFilterRenderSliderValues(e,c,i)}function bricksWooProductsFilterRenderSliderValues(t,e,r){var o=t.getAttribute("data-currency"),c=t.querySelector("label.lower"),i=t.querySelector("label.upper"),a=t.querySelector(".value.lower"),n=t.querySelector(".value.upper");a.innerText=c.innerText+": "+o+e,n.innerText=i.innerText+": "+o+r}function bricksWooAjaxAddToCartInit(t){if(!window.bricksWooCommerce.ajaxAddToCartEnabled)return;let e=document;t&&document.querySelector(t)&&(e=document.querySelector(t));bricksQuerySelectorAll(e,".single_add_to_cart_button").forEach((function(t){t.addEventListener("click",(function(e){if(e.preventDefault(),t.classList.contains("disabled"))return;bricksWooAddToCart(t.closest("form.cart"))}))}));const r=function(t){let e={addingHTML:bricksWooCommerce.ajaxAddingText,addedHTML:bricksWooCommerce.ajaxAddedText};return t.closest(".brxe-product-add-to-cart")&&(e=t.closest(".brxe-product-add-to-cart")?.getAttribute("data-bricks-ajax-add-to-cart")||e),"string"==typeof e?JSON.parse(e):e};jQuery("body").on("adding_to_cart",(function(t,e,o){e[0].setAttribute("disabled","disabled"),e[0].classList.add("disabled","bricks-cart-adding");const c=r(e[0]);c&&c.addingHTML&&(e[0].innerHTML=c.addingHTML)})),jQuery("body").on("added_to_cart",(function(t,e,o,c){c[0].removeAttribute("disabled"),c[0].classList.add("bricks-cart-added"),c[0].classList.remove("disabled","bricks-cart-adding");const i=r(c[0]);i&&i.addedHTML&&c.html(i.addedHTML)}))}function bricksWooAddToCart(t){if("undefined"==typeof woocommerce_params)return;const e=t.querySelector(".single_add_to_cart_button"),r=new FormData(t),o={};if(o.product_id=e.value,o.quantity=r.get("quantity"),o.product_type="simple",t.classList.contains("variations_form")){o.product_id=r.get("product_id"),o.quantity=r.get("quantity"),o.variation_id=r.get("variation_id"),o.product_type="variable";const t={};for(const e of r.entries())e[0].indexOf("attribute_")>-1&&(t[e[0]]=e[1]);o.variation=t}if(t.classList.contains("grouped_form")){o.product_id=r.get("add-to-cart");const t={};for(const e of r.entries())if(e[0].indexOf("quantity")>-1&&e[1]>0){t[e[0].replace("quantity[","").replace("]","")]=e[1]}o.products=t,o.product_type="grouped"}if("grouped"===o.product_type&&0===Object.keys(o.products).length)return;for(const t of r.entries())"product_id"===t[0]||"quantity"===t[0]||"variation_id"===t[0]||"add-to-cart"===t[0]||t[0].indexOf("attribute_")>-1||(o[t[0]]=t[1]);jQuery("body").trigger("adding_to_cart",[jQuery(e),o]);const c=woocommerce_params.wc_ajax_url.toString().replace("%%endpoint%%","bricks_add_to_cart");jQuery.ajax({type:"POST",url:c,data:o,dataType:"json",success:function(t){t.error&&t.product_url?window.location=t.product_url:"undefined"!=typeof wc_add_to_cart_params&&"yes"===wc_add_to_cart_params.cart_redirect_after_add&&wc_add_to_cart_params.cart_url?window.location=wc_add_to_cart_params.cart_url:(t.fragments&&(bricksWooReplaceFragments(t.fragments),jQuery("body").trigger("wc_fragments_refreshed")),jQuery("body").trigger("added_to_cart",[t.fragments,t.cart_hash,jQuery(e)]))},error:function(t){t.error&&t.product_url&&(window.location=t.product_url)},complete:function(t){}})}document.addEventListener("DOMContentLoaded",(function(t){bricksWooProductsFilter(),bricksWooMiniModals(),bricksWooMiniCartHideDetailsClickOutside(),bricksWooAjaxAddToCartInit(),jQuery(document.body).on("updated_cart_totals",(function(){bricksWooQuantityTriggers(),bricksLazyLoad()})),setTimeout((function(){bricksWooQuantityTriggers()}),150)}));

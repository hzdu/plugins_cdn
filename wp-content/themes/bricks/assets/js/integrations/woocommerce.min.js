function bricksWooRefreshCartFragments(){if("undefined"!=typeof woocommerce_params){var t=woocommerce_params.wc_ajax_url;t=t.replace("%%endpoint%%","get_refreshed_fragments"),jQuery.post(t,(function(t,e){t.fragments&&bricksWooReplaceFragments(t.fragments),jQuery("body").trigger("wc_fragments_refreshed")}))}}function bricksWooReplaceFragments(t){t&&jQuery.each(t,(function(t,e){var o=jQuery(t);o&&o.replaceWith(e)}))}function bricksWooMiniCartHideDetailsClickOutside(){const t=t=>{if(!t.classList.contains("cart-detail"))return;t.classList.remove("active");const e=t.closest(".brxe-woocommerce-mini-cart");e&&e.classList.toggle("show-cart-details")},e=bricksQuerySelectorAll(document,".cart-detail");e&&e.forEach((function(e){document.addEventListener("click",(function(o){o.target.closest(".mini-cart-link")||!e.classList.contains("active")||o.target.closest(".cart-detail")||t(e)}))}));const o=bricksQuerySelectorAll(document,".cart-detail .bricks-mini-cart-close");o&&o.forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault();const o=e.target.closest(".cart-detail");o&&t(o)}))}))}function bricksWooMiniModalsToggle(t){t.preventDefault();var e=t.currentTarget.getAttribute("data-toggle-target");if(e){document.querySelectorAll(".bricks-woo-toggle").forEach((function(t){var o=t.getAttribute("data-toggle-target");if(o!==e){var r=t.querySelector(o);if(null!==r&&r.classList.contains("active")){r.classList.remove("active");var c=t.closest(".brxe-woocommerce-mini-cart");c&&c.classList.remove("show-cart-details")}}}));var o=document.querySelector(e);if(null!==o){o.classList.toggle("active");var r=o.closest(".brxe-woocommerce-mini-cart");r&&r.classList.toggle("show-cart-details")}}}function bricksWooProductGallery(){bricksIsFrontend||void 0===jQuery(this).wc_product_gallery||jQuery(".woocommerce-product-gallery").each((function(){jQuery(this).trigger("wc-product-gallery-before-init",[this,window.wc_single_product_params]),jQuery(this).wc_product_gallery(window.wc_single_product_params),jQuery(this).trigger("wc-product-gallery-after-init",[this,window.wc_single_product_params])}))}function bricksWooProductGalleryEnhance(){void 0!==window.wc_single_product_params&&void 0!==jQuery.fn.flexslider&&(jQuery(document.body).on("wc-product-gallery-before-init",(function(t){jQuery(".brx-product-gallery-thumbnail-slider").each((function(){let t=jQuery(this).data("thumbnail-settings");jQuery(this).flexslider(t)}))})),jQuery(document.body).on("woocommerce_gallery_init_zoom",(function(t){jQuery(".brx-product-gallery-thumbnail-slider").each((function(){let t=jQuery(this).data("flexslider");t&&0===t.currentItem&&0!==t.currentSlide&&jQuery(this).flexslider(0)}))})))}function bricksWooQuantityTriggers(){bricksQuerySelectorAll(document,"form .quantity .action").forEach((function(t){t.classList.contains("brx-initialized")||(t.classList.add("brx-initialized"),t.addEventListener("click",(function(t){t.preventDefault();var e=t.target.closest(".quantity").querySelector(".qty:not([readonly])");if(!e)return;var o=document.querySelector('button[name="update_cart"]');o&&(o.removeAttribute("disabled"),o.setAttribute("aria-disabled","false")),t.target.classList.contains("plus")?e.stepUp():t.target.classList.contains("minus")&&e.stepDown();const r=new Event("change",{bubbles:!0});e.dispatchEvent(r)})))}))}function bricksWooProductsFilter(){bricksQuerySelectorAll(document,".brxe-woocommerce-products-filter .filter-item").forEach((function(t){function e(t){t.target.closest("form").submit()}function o(t){t.target.closest(".filter-item").classList.toggle("open")}bricksQuerySelectorAll(t,".dropdown").forEach((function(t){t.addEventListener("change",e)})),bricksQuerySelectorAll(t,'input[type="radio"], input[type="checkbox"]').forEach((function(t){t.addEventListener("change",e),t.addEventListener("click",e)})),bricksQuerySelectorAll(t,".double-slider-wrap").forEach((function(t){bricksWooProductsFilterInitSlider(t)})),bricksQuerySelectorAll(t,".title").forEach((function(t){t.onclick=o}))}))}function bricksWooMiniModals(){document.querySelectorAll(".bricks-woo-toggle").forEach((function(t){t.addEventListener("click",bricksWooMiniModalsToggle),t.hasAttribute("data-open-on-add-to-cart")&&jQuery(document.body).on("added_to_cart",(function(e,o,r,c){t.click()}))}))}function bricksWooProductsFilterInitSlider(t){var e=t.querySelector("input.lower"),o=t.querySelector("input.upper");e.oninput=bricksWooProductsFilterUpdateSliderValue,o.oninput=bricksWooProductsFilterUpdateSliderValue;var r=parseInt(e.value),c=parseInt(o.value);bricksWooProductsFilterRenderSliderValues(e.parentNode,r,c),e.addEventListener("change",(function(){t.closest("form").submit()})),o.addEventListener("change",(function(){t.closest("form").submit()}))}function bricksWooProductsFilterUpdateSliderValue(t){var e=t.target.parentNode,o=e.querySelector("input.lower"),r=e.querySelector("input.upper"),c=parseInt(o.value),i=parseInt(r.value);i<c+4&&(o.value=i-4,r.value=c+4,c==o.min&&(r.value=4),i==r.max&&(o.value=parseInt(r.max)-4)),bricksWooProductsFilterRenderSliderValues(e,c,i)}function bricksWooProductsFilterRenderSliderValues(t,e,o){var r=t.getAttribute("data-currency"),c=t.querySelector("label.lower"),i=t.querySelector("label.upper"),n=t.querySelector(".value.lower"),a=t.querySelector(".value.upper");n.innerText=c.innerText+": "+r+e,a.innerText=i.innerText+": "+r+o}function bricksWooAjaxAddToCartInit(t){if(!window.bricksWooCommerce.ajaxAddToCartEnabled)return;let e=document;t&&document.querySelector(t)&&(e=document.querySelector(t));bricksQuerySelectorAll(e,".single_add_to_cart_button, .brx_ajax_add_to_cart").forEach((function(t){t.addEventListener("click",(function(e){if(e.preventDefault(),t.classList.contains("disabled"))return;const o=t.classList.contains("single_add_to_cart_button")?"single":"loop",r="single"===o?t.closest("form.cart"):t;if("single"===o){const e=t.closest("form.cart");if("get"===e.getAttribute("method"))return void e.submit()}bricksWooAddToCart(r,o)}))}));const o=function(t){let e={addingHTML:bricksWooCommerce.ajaxAddingText,addedHTML:bricksWooCommerce.ajaxAddedText,showNotice:bricksWooCommerce.showNotice,scrollToNotice:bricksWooCommerce.scrollToNotice,resetTextAfter:bricksWooCommerce.resetTextAfter};if(t.closest(".brxe-product-add-to-cart")&&(customAjaxButtonSettingsObj=t.closest(".brxe-product-add-to-cart")?.getAttribute("data-bricks-ajax-add-to-cart")||!1,customAjaxButtonSettingsObj))try{JSON.parse(customAjaxButtonSettingsObj,((t,o)=>{e[t]=o}))}catch(t){console.error("Bricks WooCommerce: Invalid JSON format for data-bricks-ajax-add-to-cart")}return e};jQuery("body").on("adding_to_cart",(function(t,e,r){e[0].setAttribute("disabled","disabled"),e[0].classList.add("disabled","bricks-cart-adding");const c=o(e[0]);c&&c.addingHTML&&(e[0].hasAttribute("data-original-text")||e[0].setAttribute("data-original-text",e[0].innerHTML),e[0].innerHTML=c.addingHTML)})),jQuery("body").on("added_to_cart",(function(t,e,r,c){c[0].removeAttribute("disabled"),c[0].classList.add("bricks-cart-added"),c[0].classList.remove("disabled","bricks-cart-adding");const i=o(c[0]);i&&i.addedHTML&&(c[0].innerHTML=i.addedHTML,setTimeout((function(){c[0].innerHTML=c[0].getAttribute("data-original-text")}),1e3*i.resetTextAfter)),"string"==typeof window.bricksWooCommerce.addedToCartNotices&&window.bricksWooCommerce.addedToCartNotices.length>0&&"yes"===i.showNotice&&(jQuery(".woocommerce-notices-wrapper").html(window.bricksWooCommerce.addedToCartNotices),window.bricksWooCommerce.addedToCartNotices="","yes"===i.scrollToNotice&&"function"==typeof jQuery.scroll_to_notices&&jQuery.scroll_to_notices(jQuery(".woocommerce-notices-wrapper")))}))}function bricksWooAddToCart(t,e){if("undefined"==typeof woocommerce_params)return;const o="single"===e?t.querySelector(".single_add_to_cart_button"):t,r={};if("single"===e){const e=t,c=new FormData(e);if(r.product_id=o.value,r.quantity=c.get("quantity"),r.product_type="simple",e.classList.contains("variations_form")){r.product_id=c.get("product_id"),r.quantity=c.get("quantity"),r.variation_id=c.get("variation_id"),r.product_type="variable";const t={};for(const e of c.entries())e[0].indexOf("attribute_")>-1&&(t[e[0]]=e[1]);r.variation=t}if(e.classList.contains("grouped_form")){r.product_id=c.get("add-to-cart");const t={};for(const e of c.entries())if(e[0].indexOf("quantity")>-1&&e[1]>0){t[e[0].replace("quantity[","").replace("]","")]=e[1]}r.products=t,r.product_type="grouped"}if("grouped"===r.product_type&&0===Object.keys(r.products).length)return;for(const t of c.entries())"product_id"===t[0]||"quantity"===t[0]||"variation_id"===t[0]||"add-to-cart"===t[0]||t[0].indexOf("attribute_")>-1||(r[t[0]]=t[1])}else r.product_id=o.dataset?.product_id||0,r.quantity=o.dataset?.quantity||1,r.product_type=o.dataset?.product_type||"simple";jQuery("body").trigger("adding_to_cart",[jQuery(o),r]);const c=woocommerce_params.wc_ajax_url.toString().replace("%%endpoint%%","bricks_add_to_cart");jQuery.ajax({type:"POST",url:c,data:r,dataType:"json",success:function(t){t.error&&t.product_url?window.location=t.product_url:"undefined"!=typeof wc_add_to_cart_params&&"yes"===wc_add_to_cart_params.cart_redirect_after_add&&wc_add_to_cart_params.cart_url?window.location=wc_add_to_cart_params.cart_url:(t.fragments&&(bricksWooReplaceFragments(t.fragments),jQuery("body").trigger("wc_fragments_refreshed")),t.notices&&"string"==typeof t.notices&&t.notices.length>0&&void 0!==window.bricksWooCommerce.addedToCartNotices&&(window.bricksWooCommerce.addedToCartNotices=t.notices),jQuery("body").trigger("added_to_cart",[t.fragments,t.cart_hash,jQuery(o)]))},error:function(t){t.error&&t.product_url&&(window.location=t.product_url)},complete:function(t){}})}function bricksWooCheckoutSubmitBehavior(){if("undefined"==typeof wc_checkout_params||!wc_checkout_params.is_checkout)return;const t=jQuery("form.checkout");t&&t.one("checkout_place_order",(function(t,e){"object"==typeof e&&"function"==typeof e.submit_error&&(e.submit_error=function(t){const o=jQuery(".brxe-woocommerce-notice");o.length>0?o.html(t):(jQuery(".woocommerce-NoticeGroup-checkout, .woocommerce-error, .woocommerce-message").remove(),e.$checkout_form.prepend('<div class="woocommerce-NoticeGroup woocommerce-NoticeGroup-checkout">'+t+"</div>")),e.$checkout_form.removeClass("processing").unblock(),e.$checkout_form.find(".input-text, select, input:checkbox").trigger("validate").trigger("blur"),e.scroll_to_notices(),jQuery(document.body).trigger("checkout_error",[t])},"function"==typeof e.scroll_to_notices&&(e.scroll_to_notices=function(){const t=jQuery(".woocommerce-NoticeGroup-updateOrderReview, .woocommerce-NoticeGroup-checkout, .brxe-woocommerce-notice");t.length||(t=jQuery("form.checkout")),jQuery.scroll_to_notices(t)}))}))}function bricksWooLoopQtyListener(){if(!window.bricksWooCommerce.useQtyInLoop)return;const t=bricksQuerySelectorAll(document,".brx-loop-product-form input.qty:not(.brx-initialized)"),e=t=>{const e=t.target.closest("form.brx-loop-product-form");if(e){const o=t.target.value,r=e.querySelector(".add_to_cart_button");if(r){const t=new URL(r.href);t.searchParams.set("quantity",o),r.href=t.toString(),r.setAttribute("data-quantity",o)}}};t.forEach((function(t){t.classList.add("brx-initialized"),t.addEventListener("change",e)}))}document.addEventListener("DOMContentLoaded",(function(t){bricksWooProductsFilter(),bricksWooMiniModals(),bricksWooMiniCartHideDetailsClickOutside(),bricksWooAjaxAddToCartInit(),bricksWooCheckoutSubmitBehavior(),bricksWooProductGalleryEnhance(),jQuery(document.body).on("updated_cart_totals",(function(){bricksWooQuantityTriggers(),bricksLazyLoad()})),setTimeout((function(){bricksWooQuantityTriggers(),bricksWooLoopQtyListener()}),150)}));

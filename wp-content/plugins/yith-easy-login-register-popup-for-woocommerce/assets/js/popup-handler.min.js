!function(t,e,o){if("undefined"!=typeof yith_welrp){var i=performance.getEntriesByType("navigation")[0],a=void 0!==i&&i.toJSON(),n=!1;a&&"back_forward"==a.type&&p(yith_welrp.checkLogin,{context:"frontend"}).done(t=>{n=t.logged});var s=function(i){i.length&&(this.self=i,this.wrap=i.find(".yith-welrp-popup-wrapper"),this.popup=i.find(".yith-welrp-popup"),this.content=i.find(".yith-welrp-popup-content-wrapper"),this.overlay=i.find(".yith-welrp-overlay"),this.blocked=!1,this.opened=!1,this.animated=!1,this.additional=i.hasClass("fixed"),this.currentSection=null,this.previousSection=null,this.animationIn=this.popup.attr("data-animation-in"),this.animationOut=this.popup.attr("data-animation-out"),this.position(null),this.handleFacebook(),this.handleGoogle(),this.handleGoogleReCaptcha(),t(this.popup).on("click",function(t){t.stopPropagation()}),t(e).on("resize",{obj:this},this.position),t(o).on("click",yith_welrp.mainSelector,{obj:this,additional:!1},this.open),yith_welrp.additionalSelector&&t(o).on("click",yith_welrp.additionalSelector,{obj:this,additional:!0},this.open),this.wrap.hasClass("close-on-click")&&this.wrap.on("click",{obj:this},this.close),this.popup.on("click",".yith-welrp-popup-close",{obj:this},this.close),this.popup.on("click","a.yith-welrp-go-back",{obj:this},this.goBack),this.popup.on("click","a.yith-welrp-lost-password",{obj:this},this.goLostPassword),this.popup.on("click","a.yith-welrp-send-auth, a.yith-welrp-send-email",{obj:this},this.sendResetEmail),this.popup.on("click",".yith-welrp-password-eye",{obj:this},this.passwordEye),this.popup.on("submit","form.yith-welrp-form",{obj:this},this.formSubmit),this.popup.on("keyup","#user_login, #reg_email",{obj:this},this.emailSuggestions),this.popup.on("click",".yith-welrp-email-suggestion-item",{obj:this},this.useEmailSuggestion),this.popup.on("click","*",this.closeEmailSuggestion))};s.prototype.position=function(o){let i=null==o?this.popup:o.data.obj.popup,a=t(e).width(),n=t(e).height(),s=a-40>yith_welrp.popupWidth?n/10+"px":"0",l=a-40>yith_welrp.popupWidth?yith_welrp.popupWidth+"px":"auto";i.css({"margin-top":s,"margin-bottom":s,width:l})},s.prototype.block=function(){this.blocked||(this.popup.block({message:null,overlayCSS:{background:"#fff url("+yith_welrp.loader+") no-repeat center",opacity:.5,cursor:"none"}}),this.blocked=!0)},s.prototype.unblock=function(){this.blocked&&(this.popup.unblock(),this.blocked=!1)},s.prototype.reset=function(t){this.loadTemplate("email-section",{title:this.additional?yith_welrp.fsAdditionalTitle:yith_welrp.fsTitle}),this.previousSection=null,t&&this.addMessage(t,"error"),this.unblock()},s.prototype.loadTemplate=function(t,e){var o=wp.template(t);this.content.find(".yith-welrp-message").remove(),this.previousSection=this.content.html(),this.showTemplate(o(e))},s.prototype.showTemplate=function(e){this.content.hide().html(e).fadeIn(),t(o).trigger("yith_welrp_popup_template_loaded",[this.popup,this])},s.prototype.addMessage=function(e,o){if(e){void 0===o&&(o="success");let i=t("<div/>",{class:"yith-welrp-message "+o}).html(e);t(".yith-welrp-message").length?t(".yith-welrp-message").replaceWith(i):this.content.find(".yith-welrp-submit-button").before(i)}},s.prototype.passwordEye=function(e){let o=t(this).closest(".yith-welrp-password-container").find("input"),i=o.attr("type");t(this).toggleClass("opened"),o.attr("type","password"==i?"text":"password")},s.prototype.open=function(e){if(n)return;e.preventDefault();let i=e.data.obj;i.opened||i.animated||(i.opened=!0,e.data.additional&&(i.additional=!0,i.popup.addClass("additional")),i.loadTemplate("email-section",{title:i.additional?yith_welrp.fsAdditionalTitle:yith_welrp.fsTitle}),i.animated=!0,i.self.show(),r(i.overlay,"fadeIn"),r(i.popup,i.animationIn,function(){i.animated=!1}),t("html, body").addClass("yith_welrp_opened"),t(o).trigger("yith_welrp_popup_opened",[i.popup,i]))},s.prototype.close=function(e){e.preventDefault();var i=e.data.obj;i.animated||(i.animated=!0,c(i.popup,i.animationOut),c(i.overlay,"fadeOut slow",function(){i.opened=!1,i.additional=!1,i.animated=!1,i.popup.removeClass("additional"),i.self.hide()}),t("html, body").removeClass("yith_welrp_opened"),t(o).trigger("yith_welrp_popup_closed",[i.popup,i]))},s.prototype.goBack=function(t){t.preventDefault();let e=t.data.obj;null!=e.previousSection?(e.showTemplate(e.previousSection),e.previousSection=null):e.reset()},s.prototype.goLostPassword=function(t){t.preventDefault();var e=t.data.obj,o=e.content.find("input[name='user_login']"),i={title:yith_welrp.lostPasswordTitle,message:yith_welrp.lostPasswordMessage,button_label:yith_welrp.lostPasswordButton,user_login:o.length?o.val():"",action:"lost-password"};e.loadTemplate("lost-password-section",i)},s.prototype.sendResetEmail=function(e){e.preventDefault();var o=e.data.obj,i=[{name:"action",value:"lost-password"},{name:"resend",value:!0},{name:"user_login",value:t(this).data("user-login")}];o.formAction(i)},s.prototype.emailSuggestions=function(e){let o=t(this),i=o.val().split("@"),a=i[0],n=i.length>1?i[1]:"",s="";t.each(yith_welrp.emailSuggestions,function(t,e){(!n||0===e.indexOf(n)&&n!==e)&&(s=s+'<li class="yith-welrp-email-suggestion-item">'+a+"@"+e+"</li>")}),a.length<3||!s?o.closest(".yith-welrp-email-suggestion").replaceWith(o).end().focus():(o.closest(".yith-welrp-email-suggestion").length||o.wrap('<div class="yith-welrp-email-suggestion"></div>').after('<ul class="yith-welrp-email-suggestion-list"></ul>').focus(),o.next(".yith-welrp-email-suggestion-list").html(s))},s.prototype.useEmailSuggestion=function(e){e.stopPropagation(),t(this).closest(".yith-welrp-email-suggestion").find("input").val(t(this).text()).keyup()},s.prototype.closeEmailSuggestion=function(e){if(e.stopPropagation(),t(this).closest(".yith-welrp-email-suggestion").length||t(this).hasClass("yith-welrp-email-suggestion"))return;let o=t(".yith-welrp-email-suggestion").find("input");o.length&&t(".yith-welrp-email-suggestion").replaceWith(o)},s.prototype.formSubmit=function(e){e.preventDefault();var o=e.data.obj,i=t(this).serializeArray();o.formAction(i)},s.prototype.formAction=function(i){var a=this;i.push({name:"origin",value:e.location.pathname},{name:"additional",value:a.additional?1:0},{name:"context",value:"frontend"}),a.block(),p(yith_welrp.formAction,i).done(i=>{if(i.success&&void 0!==i.data.action){if(void 0!==i.data.action.redirectTo)return void(e.location.href=i.data.action.redirectTo);void 0!==i.data.action.nextSection&&a.loadTemplate(i.data.action.nextSection,i.data.popup)}a.addMessage(i.data.message,i.success?"success":"error"),t(o).trigger("yith_welrp_popup_form_action_handled",[i.success,i,this]),a.unblock()}).fail(t=>{a.reset(yith_welrp.errorMsg)})},s.prototype.handleGoogleReCaptcha=function(){void 0!==yith_welrp.googleReCaptcha&&l("https://www.google.com/recaptcha/api.js").done((e,i)=>{var a=null;t(o).on("yith_welrp_popup_template_loaded",function(){var t=o.getElementById("g-recaptcha");t&&(a=grecaptcha.render(t,{sitekey:yith_welrp.googleReCaptcha,theme:"light"}))}),t(o).on("yith_welrp_popup_form_action_handled",function(t,e){e||null===a||grecaptcha.reset(a)})}).fail((t,e,o)=>{console.log("Error retreiving Google reCaptcha")})},s.prototype.socialAction=function(i,a){var n=this,s=[{name:"origin",value:e.location.pathname},{name:"additional",value:n.additional?1:0},{name:"context",value:"frontend"},{name:"token",value:i},{name:"social",value:a}];p(yith_welrp.socialAction,s).done(i=>{i.success?void 0!==i.data.redirectTo&&(e.location.href=i.data.redirectTo):n.reset(i.data.message,"error"),t(o).trigger("yith_welrp_popup_form_social_handled",[i.success,i,a,this])}).fail(t=>{n.reset(yith_welrp.message)})},s.prototype.handleFacebook=function(){var t=this;void 0!==yith_welrp.facebookAppID&&l("https://connect.facebook.net/en_US/sdk.js").done((e,o)=>{FB.init({appId:yith_welrp.facebookAppID,xfbml:!0,version:"v4.0"}),t.popup.on("click","#yith-welrp-facebook-button",e=>{t.block(),FB.getLoginStatus(e=>{"connected"==e.status?t.socialAction(e.authResponse.accessToken,"facebook"):FB.login(e=>{"connected"===e.status?t.socialAction(e.authResponse.accessToken,"facebook"):t.reset(yith_welrp.errorMsg)},{scope:"public_profile,email"})})})}).fail((t,e,o)=>{console.log("Error retreiving FB SDK")})},s.prototype.handleGoogle=function(){var e=this;void 0!==yith_welrp.googleAppID&&l("https://apis.google.com/js/api:client.js").done((i,a)=>{gapi.load("auth2",function(){auth2=gapi.auth2.init({client_id:yith_welrp.googleAppID,cookiepolicy:"single_host_origin"}),t(o).on("yith_welrp_popup_opened",function(){var i=o.getElementById("yith-welrp-google-button");t(i).on("click",function(){e.block()}),auth2.attachClickHandler(i,{},t=>{e.socialAction(t.getAuthResponse().id_token,"google")},t=>{console.log(JSON.stringify(t,void 0,2)),e.reset(yith_welrp.errorMsg)})})})}).fail((t,e,o)=>{console.log("Error retreiving Google SDK")})},t(o).on("ready",function(){new s(t(o).find("#yith-welrp"))})}function l(e,o){return o=t.extend(o||{},{dataType:"script",cache:!0,url:e}),jQuery.ajax(o)}function p(e,o){return t.ajax({url:yith_welrp.ajaxUrl.toString().replace("%%endpoint%%",e),data:o,dataType:"json",type:"POST"})}function r(t,e,o){t.show().addClass("animated "+e),t.one("animationend",function(){t.removeClass("animated "+e),void 0!==o&&o()})}function c(t,e,o){t.addClass("animated "+e),t.one("animationend",function(){t.hide().removeClass("animated "+e),void 0!==o&&o()})}}(jQuery,window,document);
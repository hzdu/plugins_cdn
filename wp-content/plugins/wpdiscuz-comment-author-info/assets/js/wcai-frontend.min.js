jQuery(document).ready(function(r){function a(t,e){e.append("action","wcaiGetInfo"),wpdiscuzAjaxObj.getAjaxObj(!0,!0,e).done(function(e){t.addClass("wcai-not-clicked"),e&&(r("#wcaiInfo").html(e),r("#wcaiInfo ul.wcai-list .wcai-list-item:first-child").addClass("wcai-active"),r("#wcaiInfo div.wcai-content .wcai-content-item:first-child").addClass("wcai-active"),r("#wcaiInfo").is(":visible")||r("#wcaiInfoAnchor").trigger("click")),r("#wpdiscuz-loading-bar").hide()})}r(document).on("click","body",function(e){var t=r("#wcaiInfoShort");t.is(":visible")&&(t.is(e.target)||0!==t.has(e.target).length||(t.fadeOut(300),r("#wcaiInfoShort").html("")))}),r(document).on("click",".wcai-list-item",function(){var e=r(this).parents(".wcai-wrapper"),t=r(".wcai-info-type",e).val(),i=r("input.wcai-rel",this).val(),n=r(this);r("#wcaiInfo #"+i).html().length?(r("#"+t+" .wcai-list-item").removeClass("wcai-active"),r("#"+t+" .wcai-content-item").removeClass("wcai-active"),r(this).addClass("wcai-active"),r("#"+t+" #"+i).addClass("wcai-active")):((e=new FormData).append("action",n.attr("data-action")),e.append("page",0),e.append("commentId",r("#wcaiInfo .wcai-wrapper .wcai-comment-id").val()),wpdiscuzAjaxObj.getAjaxObj(!0,!0,e).done(function(e){e&&(r("#"+t+" .wcai-list-item").removeClass("wcai-active"),r("#"+t+" .wcai-content-item").removeClass("wcai-active"),n.addClass("wcai-active"),r("#"+t+" #"+i).addClass("wcai-active"),r("#wcaiInfo #"+i).html(e)),r("#wpdiscuz-loading-bar").hide()}))}),r(document).on("mouseover",".wcai-short-info.wcai-not-clicked",function(e){e.preventDefault();var t,i,n,a=r(this),o=a.parents(".wpd-comment").attr("id"),e=o.substring(o.lastIndexOf("-")+1,o.lastIndexOf("_")),o=r(".wcai-comment-id","#wcaiInfoShort").val(),c=null!=document.dir?document.dir:document.getElementsByTagName("html")[0].getAttribute("dir");return e!=o&&(t=a.offset(),i=a.outerWidth(),n=a.outerHeight(),a.removeClass("wcai-not-clicked"),(o=new FormData).append("action","wcaiGetShortInfo"),o.append("commentId",e),wpdiscuzAjaxObj.getAjaxObj(!0,!0,o).done(function(e){a.addClass("wcai-not-clicked"),e&&(r("#wcaiInfoShort").html(e),r("#wcaiInfoShort").fadeIn(300),r("#wcaiInfoShort").css("top",t.top-.08*n),"rtl"==c?r("#wcaiInfoShort").css("left",t.left-210):r("#wcaiInfoShort").css("left",t.left+i)),r("#wpdiscuz-loading-bar").hide()})),!1}),r(document).on("click",".wcai-uname-info.wcai-not-clicked",function(e){if(e.preventDefault(),!r(e.target).hasClass("wpd-user-nicename")){var t=r(this);t.removeClass("wcai-not-clicked");var i=t.parents(".wpd-comment-right").attr("id"),e=i.substring(i.lastIndexOf("-")+1),i=new FormData;return i.append("commentId",e),a(t,i),!1}}),r(document).on("click",".wcai-info.wcai-not-clicked",function(e){var t=r(this);t.removeClass("wcai-not-clicked");var i=t.attr("id"),n=i.substring(i.lastIndexOf("_")+1),i=new FormData;return i.append("commentId",n),a(t,i),e.preventDefault(),!1}),r(document).on("click",".wcai-finfo.wcai-not-clicked",function(e){var t=r(this);t.removeClass("wcai-not-clicked");var i=r("#wcaiInfoShort .wcai-wrapper .wcai-comment-id").val();r("#wcaiInfoShort").html(""),r("#wcaiInfoShort").hide("");var n=new FormData;return n.append("commentId",i),a(t,n),e.preventDefault(),!1}),r(document).on("click",".wcai-page-link.wcai-not-clicked",function(e){e.preventDefault();var t=r(this);t.removeClass("wcai-not-clicked");var i=t.data("wcai-page"),n=r("#wcaiInfo .wcai-wrapper .wcai-comment-id").val(),a=r(".wcai-active .wcai-pagination .wcai-action").val(),e=new FormData;e.append("action",a),e.append("commentId",n),e.append("page",i),wpdiscuzAjaxObj.getAjaxObj(!0,!0,e).done(function(e){t.addClass("wcai-not-clicked"),e&&r(".wcai-content-item.wcai-active").html(e),r("#wpdiscuz-loading-bar").hide()})}),r(document).on("click",".wcai-unsubscribe.wcai-not-clicked",function(e){e.preventDefault();var t=r(this).data("wcai-sid"),i=r("#wcaiInfo .wcai-wrapper .wcai-comment-id").val(),n=r(".wcai-wrapper .wcai-page-number").val();1==r(".wcai-content-item.wcai-active").children(".wcai-item").length&&0<n&&--n;e=new FormData;e.append("action","wcaiUnsubscribe"),e.append("sId",t),e.append("commentId",i),e.append("page",n),wpdiscuzAjaxObj.getAjaxObj(!0,!0,e).done(function(e){r(".wcai-content-item.wcai-active").html(e),r("#wpdiscuz-loading-bar").hide()})}),r(document).on("click",".wcai-unfollow.wcai-not-clicked",function(e){e.preventDefault();var t=r(this).data("wcai-fid"),i=r("#wcaiInfo .wcai-wrapper .wcai-comment-id").val(),n=r(".wcai-wrapper .wcai-page-number").val();1==r(".wcai-content-item.wcai-active").children(".wcai-item").length&&0<n&&--n;e=new FormData;e.append("action","wcaiUnfollow"),e.append("fId",t),e.append("commentId",i),e.append("page",n),wpdiscuzAjaxObj.getAjaxObj(!0,!0,e).done(function(e){r(".wcai-content-item.wcai-active").html(e),r("#wpdiscuz-loading-bar").hide()})})}),function(t,i){"function"==typeof define&&define.amd?define(["jquery"],function(e){return i(t,e)}):"object"==typeof module&&"object"==typeof module.exports?module.exports=i(t,require("jquery")):t.lity=i(t,t.jQuery||t.Zepto)}("undefined"!=typeof window?window:this,function(e,m){"use strict";var v=e.document,h=m(e),g=m.Deferred,y=m("html"),b=[],x="aria-hidden",I="lity-"+x,n='a[href],area[href],input:not([disabled]),select:not([disabled]),textarea:not([disabled]),button:not([disabled]),iframe,object,embed,[contenteditable],[tabindex]:not([tabindex^="-"])',k={handler:null,handlers:{image:u,inline:function(e,t){var i,n,a;try{i=m(e)}catch(e){return!1}return!!i.length&&(n=m('<i style="display:none !important"/>'),a=i.hasClass("lity-hide"),t.element().one("lity:remove",function(){n.before(i).remove(),a&&!i.closest(".lity-content").length&&i.addClass("lity-hide")}),i.removeClass("lity-hide").after(n))},youtube:function(e){var t=i.exec(e);return!!t&&f(s(e,l("https://www.youtube"+(t[2]||"")+".com/embed/"+t[4],m.extend({autoplay:1},d(t[5]||"")))))},vimeo:function(e){var t=a.exec(e);return!!t&&f(s(e,l("https://player.vimeo.com/video/"+t[3],m.extend({autoplay:1},d(t[4]||"")))))},googlemaps:function(e){var t=o.exec(e);return!!t&&f(s(e,l("https://www.google."+t[3]+"/maps?"+t[6],{output:0<t[6].indexOf("layer=c")?"svembed":"embed"})))},facebookvideo:function(e){var t=c.exec(e);if(!t)return!1;0!==e.indexOf("http")&&(e="https:"+e);return f(s(e,l("https://www.facebook.com/plugins/video.php?href="+e,m.extend({autoplay:1},d(t[4]||"")))))},iframe:f},template:'<div class="lity" role="dialog" aria-label="Dialog Window (Press escape to close)" tabindex="-1"><div class="lity-wrap" data-lity-close role="document"><div class="lity-loader" aria-hidden="true">Loading...</div><div class="lity-container"><div class="lity-content"></div><button class="lity-close" type="button" aria-label="Close (Press escape to close)" data-lity-close>&times;</button></div></div></div>'},t=/(^data:image\/)|(\.(png|jpe?g|gif|svg|webp|bmp|ico|tiff?)(\?\S*)?$)/i,i=/(youtube(-nocookie)?\.com|youtu\.be)\/(watch\?v=|v\/|u\/|embed\/?)?([\w-]{11})(.*)?/i,a=/(vimeo(pro)?.com)\/(?:[^\d]+)?(\d+)\??(.*)?$/,o=/((maps|www)\.)?google\.([^\/\?]+)\/?((maps\/?)?\?)(.*)/i,c=/(facebook\.com)\/([a-z0-9_-]*)\/videos\/([0-9]*)(.*)?$/i,r=function(){var e,t=v.createElement("div"),i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(e in i)if(void 0!==t.style[e])return i[e];return!1}();function j(e){var t=g();return r&&e.length?(e.one(r,t.resolve),setTimeout(t.resolve,500)):t.resolve(),t.promise()}function C(e,t,i){if(1===arguments.length)return m.extend({},e);if("string"==typeof t){if(void 0===i)return void 0===e[t]?null:e[t];e[t]=i}else m.extend(e,t);return this}function d(e){for(var t,i=decodeURI(e.split("#")[0]).split("&"),n={},a=0,o=i.length;a<o;a++)i[a]&&(n[(t=i[a].split("="))[0]]=t[1]);return n}function l(e,t){return e+(-1<e.indexOf("?")?"&":"?")+m.param(t)}function s(e,t){var i=e.indexOf("#");return-1===i?t:(0<i&&(e=e.substr(i)),t+e)}function u(e,t){function i(){a.reject(m('<span class="lity-error"/>').append("Failed loading image"))}var t=t.opener()&&t.opener().data("lity-desc")||"Image with no description",n=m('<img src="'+e+'" alt="'+t+'"/>'),a=g();return n.on("load",function(){return 0===this.naturalWidth?i():void a.resolve(n)}).on("error",i),a.promise()}function f(e){return'<div class="lity-iframe-container"><iframe frameborder="0" allowfullscreen src="'+e+'"/></div>'}function D(){return v.documentElement.clientHeight||Math.round(h.height())}function O(e){var t,i=p();i&&(27===e.keyCode&&i.close(),9===e.keyCode&&(t=e,e=(i=(e=i).element().find(n)).index(v.activeElement),t.shiftKey&&e<=0?(i.get(i.length-1).trigger("focus"),t.preventDefault()):t.shiftKey||e!==i.length-1||(i.get(0).trigger("focus"),t.preventDefault())))}function z(){m.each(b,function(e,t){t.resize()})}function p(){return 0===b.length?null:b[0]}function w(e,t,i,n){var a,o,c,r,d,l,s,u,f=this,p=!1,w=!1;t=m.extend({},k,t),a=m(t.template),f.element=function(){return a},f.opener=function(){return i},f.options=m.proxy(C,f,t),f.handlers=m.proxy(C,f,t.handlers),f.resize=function(){p&&!w&&o.css("max-height",D()-60+"px").trigger("lity:resize",[f])},f.close=function(){if(p&&!w){var t;w=!0,(t=f).element().attr(x,"true"),1===b.length&&(y.removeClass("lity-active"),h.off({resize:z,keydown:O})),((b=m.grep(b,function(e){return t!==e})).length?b[0].element():m(".lity-hidden")).removeClass("lity-hidden").each(function(){var e=m(this),t=e.data(I);t?e.attr(x,t):e.removeAttr(x),e.removeData(I)});var e=g();if(n&&(v.activeElement===a[0]||m.contains(a[0],v.activeElement)))try{n.trigger("focus")}catch(e){}return o.trigger("lity:close",[f]),a.removeClass("lity-opened").addClass("lity-closed"),j(o.add(a)).always(function(){o.trigger("lity:remove",[f]),a.remove(),a=void 0,e.resolve()}),e.promise()}},c=e,r=f,d=t.handlers,e=t.handler,s="inline",u=m.extend({},d),e&&u[e]?(l=u[e](c,r),s=e):(m.each(["inline","iframe"],function(e,t){delete u[t],u[t]=d[t]}),m.each(u,function(e,t){return!t||(!(!t.test||t.test(c,r))||(!1!==(l=t(c,r))?(s=e,!1):void 0))})),t={handler:s,content:l||""},a.attr(x,"false").addClass("lity-loading lity-opened lity-"+t.handler).appendTo("body").trigger("focus").on("click","[data-lity-close]",function(e){m(e.target).is("[data-lity-close]")&&f.close()}).trigger("lity:open",[f]),e=f,1===b.unshift(e)&&(y.addClass("lity-active"),h.on({resize:z,keydown:O})),m("body > *").not(e.element()).addClass("lity-hidden").each(function(){var e=m(this);void 0===e.data(I)&&e.data(I,e.attr(x)||null)}).attr(x,"true"),m.when(t.content).always(function(e){o=m(e).css("max-height",D()-60+"px"),a.find(".lity-loader").each(function(){var e=m(this);j(e).always(function(){e.remove()})}),a.removeClass("lity-loading").find(".lity-content").empty().append(o),p=!0,o.trigger("lity:ready",[f])})}function A(e,t,i){e.preventDefault?(e.preventDefault(),e=(i=m(this)).data("lity-target")||i.attr("href")||i.attr("rel")||i.attr("src")):i=m(i);i=new w(e,m.extend({},i.data("lity-options")||i.data("lity"),t),i,v.activeElement);if(!e.preventDefault)return i}return u.test=function(e){return t.test(e)},A.version="2.2.2",A.options=m.proxy(C,A,k),A.handlers=m.proxy(C,A,k.handlers),A.current=p,m(v).on("click.lity","[data-wcai-lity]",A),A});
!function(e){var t={};function a(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=1)}([,function(e,t,a){"use strict";function n(e){var t;e.icon&&(t=React.createElement("span",{className:"dashicons dashicons-"+e.icon}));var a="publishpress-calendar-button "+(e.className||"");return React.createElement("a",{href:e.href||"#",className:a,onClick:e.onClick},t,e.label)}function r(e){return React.createElement("div",{className:"publishpress-calendar-navigation-bar"},React.createElement(n,{icon:"update-alt",onClick:e.refreshOnClickCallback}),React.createElement(n,{label:"«",onClick:e.backPageOnClickCallback}),React.createElement(n,{label:"‹",onClick:e.backOnClickCallback}),React.createElement(n,{label:e.strings.today,onClick:e.todayOnClickCallback}),React.createElement(n,{label:"›",onClick:e.forwardOnClickCallback}),React.createElement(n,{label:"»",onClick:e.forwardPageOnClickCallback}))}function l(e){for(var t=[e.strings.weekDaySun,e.strings.weekDayMon,e.strings.weekDayTue,e.strings.weekDayWed,e.strings.weekDayThu,e.strings.weekDayFri,e.strings.weekDaySat],a=[],n=(e.weekStartsOnSunday?0:1)-1,r=0;r<7;r++)n++,6!==r||e.weekStartsOnSunday||(n=0),a.push({key:n.toString(),label:t[n]});return React.createElement(React.Fragment,null,a.map((function(e){return React.createElement("th",{key:e.key.toString()},e.label)})))}function s(e){var t=e.showSpinner||!1,a=e.message||"";return React.createElement("div",{className:"publishpress-calendar-message-bar"},t&&React.createElement("span",{className:"dashicons dashicons-update-alt publishpress-spinner"}),React.createElement("span",null,a))}function i(e,t,a,n,r,l,s){try{var i=e[l](s),c=i.value}catch(e){return void a(e)}i.done?t(c):Promise.resolve(c).then(n,r)}function c(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var l=e.apply(t,a);function s(e){i(l,n,r,s,c,"next",e)}function c(e){i(l,n,r,s,c,"throw",e)}s(void 0)}))}}function o(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=new Date(t,0,1+7*(e-1)),r=n.getDay(),l=n;return r<=4?l.setDate(n.getDate()-n.getDay()+1):l.setDate(n.getDate()+8-n.getDay()),a&&l.setDate(l.getDate()-1),l}function u(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),n=a.getDay();a.setDate(a.getDate()+4-(a.getDay()||7));var r=new Date(a.getFullYear(),0,1),l=Math.round(((a-r)/864e5+1)/7);return t&&0===n&&l++,[a.getFullYear(),l]}function p(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=u(e,t);return o(a[1],a[0],t)}function d(e){return e.getFullYear()+"-"+(e.getMonth()+1).toString().padStart(2,"0")+"-"+e.getDate().toString().padStart(2,"0")}function m(e,t){return e.url?React.createElement("a",{href:e.url},e.label):e.action?React.createElement("a",{href:"javascript:void(0);",onClick:function(a){return t(a,e)}},e.label):void 0}function h(e,t,a){return f.apply(this,arguments)}function f(){return(f=c(regeneratorRuntime.mark((function e(t,a,n){var r,l,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n+"?action="+t,e.t0=regeneratorRuntime.keys(a);case 2:if((e.t1=e.t0()).done){e.next=9;break}if(l=e.t1.value,a.hasOwnProperty(l)){e.next=6;break}return e.abrupt("continue",2);case 6:r+="&"+l+"="+a[l],e.next=2;break;case 9:return e.next=11,fetch(r);case 11:return s=e.sent,e.next=14,s.json();case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=c(regeneratorRuntime.mark((function e(t,a,n,r){var l,s,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l=n+"?action="+t,e.t0=regeneratorRuntime.keys(a);case 2:if((e.t1=e.t0()).done){e.next=9;break}if(s=e.t1.value,a.hasOwnProperty(s)){e.next=6;break}return e.abrupt("continue",2);case 6:l+="&"+s+"="+a[s],e.next=2;break;case 9:return e.next=11,fetch(l,{method:"post",body:r});case 11:return i=e.sent,e.next=14,i.json();case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return new Date(String(e).replace(/-/g,"/"))}function b(e){return e.isEditing?React.createElement("input",{type:"text",id:e.id,value:e.value,onChange:function(t){e.onChange&&e.onChange(t,t.target.value)}}):React.createElement("time",{dateTime:e.value,title:e.value,id:e.id},e.valueString||e.value)}a.r(t);var y=jQuery;function E(e){var t,a=React.useRef(null);React.useEffect((function(){var t={placeholder:e.placeholder||!1,tags:!0,allowClear:void 0===e.allowClear||null===e.allowClear||e.allowClear};return e.ajaxUrl&&(t.ajax={delay:250,url:e.ajaxUrl,dataType:"json",data:function(t){var a={q:t.term,action:e.ajaxAction,nonce:e.nonce};if(e.ajaxArgs)for(var n in e.ajaxArgs)e.ajaxArgs.hasOwnProperty(n)&&(a[n]=e.ajaxArgs[n]);return a},processResults:function(e){return{results:e}}}),y(a.current).pp_select2(t).on("select2:select",(function(t){"function"==typeof e.onSelect&&e.onSelect(t,a.current,y(a.current).pp_select2("data"))})).on("select2:clear",(function(t){"function"==typeof e.onClear&&e.onClear(t,a.current)})),function(){y(a.current).pp_select2("destroy")}}),[]),e.options&&(t=e.options.map((function(t){return React.createElement("option",{value:t.value,selected:t.value===e.value},t.text)})));var n="pp_select2";return e.className&&(n+=" "+e.className),React.createElement("select",{className:n,id:e.id,multiple:e.multiple,ref:a},e.placeholder?React.createElement("option",{value:""},e.placeholder):React.createElement(React.Fragment,null),t)}function R(e){return e.isEditing?React.createElement(E,{ajaxUrl:e.ajaxUrl,nonce:e.nonce,multiple:e.multiple,ajaxAction:"publishpress_calendar_search_authors",value:e.value,name:e.name,id:e.id,onSelect:e.onSelect,onClear:e.onClear}):React.createElement("span",{id:e.id},e.value.join(", "))}function C(e){return e.isEditing?React.createElement("input",{type:"text",value:e.value}):React.createElement("span",null,e.value)}function k(e){return e.isEditing?React.createElement(E,{options:e.options,id:e.id,value:e.value,allowClear:e.allowClear,onSelect:e.onSelect,onClear:e.onClear}):React.createElement("span",{id:e.id},e.value)}function w(e){return e.isEditing?React.createElement(E,{placeholder:e.placeholder,id:e.id,ajaxUrl:e.ajaxUrl,nonce:e.nonce,ajaxAction:"publishpress_calendar_search_terms",ajaxArgs:{taxonomy:e.taxonomy},options:e.options,value:e.value,multiple:e.multiple,onSelect:e.onSelect,onClear:e.onClear,className:e.className}):void 0===e.value||0===e.value.length?React.createElement("span",{id:e.id,className:"publishpress-calendar-empty-value"},publishpressCalendarParams.strings.noTerms):React.createElement("span",{id:e.id},e.value.join(", "))}function S(e){return e.isEditing?React.createElement("input",{type:"checkbox",id:e.id,value:"1",checked:"Yes"===e.value}):"Yes"===e.value?React.createElement("span",{id:e.id,className:"dashicons dashicons-yes-alt"}):React.createElement("span",{id:e.id,className:"dashicons dashicons-no-alt"})}function x(e){return e.isEditing?React.createElement("input",{type:"location",id:e.id,value:e.value,onChange:function(t){e.onChange&&e.onChange(t,t.target.value)}}):React.createElement("span",{id:e.id},e.value)}function D(e){return e.isEditing?React.createElement("textarea",{id:e.id,onChange:function(t){e.onChange&&e.onChange(t,t.target.value)}},e.value):React.createElement("div",{id:e.id},e.value)}function j(e){return e.isEditing?React.createElement("input",{type:"text",id:e.id,value:e.value,onChange:function(t){e.onChange&&e.onChange(t,t.target.value)}}):React.createElement("span",{id:e.id},e.value)}function F(e){return e.isEditing?React.createElement("input",{type:"text",id:e.id,value:e.value}):React.createElement("span",{id:e.id},e.value)}function _(e){var t;return e.isEditing?React.createElement("input",{type:"number",value:e.value,id:e.id,onChange:function(t){e.onChange&&e.onChange(t,t.target.value)}}):(t=0===e.value?"publishpress-calendar-empty-value":"",React.createElement("span",{id:e.id,className:t},e.value))}function T(e){return React.useEffect((function(){var t="#"+e.id,a={regex:"^([0][0-9]|[1][0-9]|[2][0-3]):[0-5][0-9]$",showMaskOnHover:!1,staticDefinitionSymbol:"*"};e.placeholder&&(a.placeholder=e.placeholder),jQuery(t).inputmask(a),jQuery(t).on("change",(function(t){e.onChange&&e.onChange(t,t.target.value)}))})),e.isEditing?React.createElement("input",{type:"text",id:e.id,placeholder:e.placeholder||null,value:e.value}):React.createElement("span",{id:e.id},e.value)}var O=jQuery;function A(e){if(!e.data)return React.createElement(React.Fragment,null);if(!e.target.current)return React.createElement(React.Fragment,null);var t=O(e.target.current).position(),a=O(e.target.current).offset(),n=O(e.target.current).width(),r=t.top,l=a.left+380+10+180>=O(document).width()?t.left-25-380:t.left+n+10,s=function(t,a){t.preventDefault(),h(a.action,a.args,e.ajaxUrl).then((function(t){e.onItemActionClickCallback(a.action,e.id,t)}))};return React.createElement("div",{className:"publishpress-calendar-popup",style:{top:r,left:l}},React.createElement("div",{className:"publishpress-calendar-popup-title",style:{backgroundColor:e.color}},e.icon&&React.createElement("span",{className:"dashicons "+e.icon+" publishpress-calendar-icon"}),React.createElement("span",{dangerouslySetInnerHTML:{__html:e.title}}),React.createElement("span",{className:"dashicons dashicons-no publishpress-calendar-popup-close",title:e.strings.close,onClick:function(){O(document).trigger("publishpress_calendar:close_popup")}})),React.createElement("table",null,React.createElement("tbody",null,function(){var t,a,n=[];for(var r in e.data.fields)if(e.data.fields.hasOwnProperty(r)){switch((t=e.data.fields[r]).type){case"date":a=React.createElement(b,{value:t.value,valueString:t.valueString||null,isEditing:!1});break;case"time":a=React.createElement(T,{value:t.value,isEditing:!1});break;case"authors":a=React.createElement(R,{value:t.value,isEditing:!1});break;case"type":a=React.createElement(C,{value:t.value,isEditing:!1});break;case"status":a=React.createElement(k,{value:t.value,isEditing:!1});break;case"taxonomy":a=React.createElement(w,{value:t.value,isEditing:!1});break;case"checkbox":a=React.createElement(S,{value:t.value,isEditing:!1});break;case"location":a=React.createElement(x,{value:t.value,isEditing:!1});break;case"paragraph":a=React.createElement(D,{value:t.value,isEditing:!1});break;case"text":a=React.createElement(j,{value:t.value,isEditing:!1});break;case"user":a=React.createElement(F,{value:t.value,isEditing:!1});break;case"number":a=React.createElement(_,{value:t.value,isEditing:!1});break;default:a=null}n.push(React.createElement("tr",null,React.createElement("th",null,t.label,":"),React.createElement("td",null,a)))}return n}())),React.createElement("hr",null),React.createElement("div",{className:"publishpress-calendar-popup-links"},function(){var t,a=[];for(var n in e.data.links)e.data.links.hasOwnProperty(n)&&((t=e.data.links[n]).url?a.push(React.createElement("a",{href:t.url},t.label)):t.action&&a.push(React.createElement("a",{href:"javascript:void(0);",onClick:function(e){return s(e,t)}},t.label)),a.push(React.createElement("span",null,"|")));return a.pop(),a}()))}var P=jQuery;function I(e){var t,a=e.strings.untitled,n=React.useRef(null),r=e.showIcon&&e.icon?React.createElement("span",{className:"dashicons "+e.icon}," "):null,l=e.showTime?React.createElement("time",{className:"publishpress-calendar-item-time",dateTime:e.timestamp,title:e.timestamp},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ga",a=e.getHours();return"ga"===t||"ha"===t?0===a?a="12am":a<12?("ha"===t&&(a=a.toString().padStart(2,"0")),a+="am"):(a>12&&(a-=12),"ha"===t&&(a=a.toString().padStart(2,"0")),a+="pm"):a=a.toString().padStart(2,"0"),a}(v(e.timestamp),e.timeFormat||"g:i a")):null,s=e.label||a;return React.createElement("li",{ref:n,className:(t="publishpress-calendar-item",e.isPopupOpened&&(t+=" publishpress-calendar-item-opened-popup"),e.canMove&&(t+=" publishpress-calendar-item-movable"),t),style:{backgroundColor:e.color},"data-index":e.index,"data-id":e.id,"data-datetime":e.timestamp,onClick:function(t){var a;(a=t.target,P(a).hasClass("publishpress-calendar-popup")||P(a).parents(".publishpress-calendar-popup").length>0)||e.onClickItemCallback(e.id)}},r,l,React.createElement("span",{dangerouslySetInnerHTML:{__html:s}}),e.isPopupOpened&&React.createElement(A,{target:n,id:e.id,title:s,icon:e.icon,timestamp:e.timestamp,color:e.color,data:e.isPopupOpened?e.getPopupItemDataCallback():null,onItemActionClickCallback:e.onItemActionClickCallback,ajaxUrl:e.ajaxUrl,strings:e.strings}))}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,l=[],s=!0,i=!1;try{for(a=a.call(e);!(s=(n=a.next()).done)&&(l.push(n.value),!t||l.length!==t);s=!0);}catch(e){i=!0,r=e}finally{try{s||null==a.return||a.return()}finally{if(i)throw r}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return U(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return U(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function q(e){var t,a,n,r,l,s=N(React.useState(!1),2),i=s[0],c=s[1],o=0,u=function(){c(!i)},p=i||-1===e.maxVisibleItems?e.items:e.items.slice(0,e.maxVisibleItems);return React.createElement("td",{className:(n=e.date,r=e.todayDate,l=[1,2,3,4,5].indexOf(n.getDay())>=0?"business-day":"weekend-day",r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()&&r.getDate()===n.getDate()&&(l+=" publishpress-calendar-today"),e.isLoading&&(l+=" publishpress-calendar-loading"),i&&(l+=" publishpress-calendar-uncollapse"),1===n.getDate()&&(l+=" publishpress-calendar-first-day-of-month"),e.isHovering&&(l+=" publishpress-calendar-hovering"),"publishpress-calendar-"+l),"data-year":e.date.getFullYear(),"data-month":e.date.getMonth()+1,"data-day":e.date.getDate()},React.createElement("div",null,React.createElement("div",{className:"publishpress-calendar-cell-header"},e.shouldDisplayMonthName&&React.createElement("span",{className:"publishpress-calendar-month-name"},(t=e.date.getMonth(),[(a=publishpressCalendarParams.strings).monthJan,a.monthFeb,a.monthMar,a.monthApr,a.monthMay,a.monthJun,a.monthJul,a.monthAug,a.monthSep,a.monthOct,a.monthNov,a.monthDec][t])),React.createElement("span",{className:"publishpress-calendar-date"},e.date.getDate()),e.isHovering&&React.createElement("span",{className:"publishpress-calendar-cell-click-to-add"},e.strings.clickToAdd)),React.createElement("ul",{className:"publishpress-calendar-day-items"},p.map((function(t){var a=t.id===e.openedItemId;return React.createElement(I,{key:"item-"+t.id+"-"+e.date.getTime(),icon:t.icon,color:t.color,label:t.label,id:t.id,timestamp:t.timestamp,timeFormat:e.timeFormat,showTime:t.showTime,showIcon:!0,index:o++,canMove:t.canEdit,isPopupOpened:a,getPopupItemDataCallback:e.getOpenedItemDataCallback,onClickItemCallback:e.onClickItemCallback,onItemActionClickCallback:e.onItemActionClickCallback,ajaxUrl:e.ajaxUrl,strings:e.strings})}))),function(){if(-1===e.maxVisibleItems)return React.createElement(React.Fragment,null);if(e.items.length>e.maxVisibleItems){var t=e.items.length-e.maxVisibleItems,a=i?"Hide the "+t+" last items":"Show "+t+" more",n=i?"publishpress-calendar-hide-items":"publishpress-calendar-show-more",r=i?"hidden":"visibility";return React.createElement("a",{href:"javascript:void(0);",className:n,onClick:u},React.createElement("span",{className:"dashicons dashicons-"+r})," ",a)}return React.createElement(React.Fragment,null)}()))}var M=wp.i18n._n;function G(e){for(var t=function(t,a){var n=a?a[0].id:null;e.onChange(t,n)},a=function(e,a,n){t("status",n)},n=function(e,a,n){t("category",n)},r=function(e,a,n){t("tag",n)},l=function(e,a,n){t("author",n)},s=function(e,a,n){t("postType",n)},i=function(e,a,n){t("weeks",n)},c=function(t){return M(e.strings.xWeek,e.strings.xWeeks,t,"publishpress").replace("%d",t)},o=c(e.numberOfWeeksToDisplay),u=[],p=1;p<=12;p++)u.push({value:p,text:c(p)});var d=e.requestFilter.post_status?e.requestFilter.post_status:"",m=e.requestFilter.post_type?e.requestFilter.post_type:"",h=e.requestFilter.weeks?e.requestFilter.weeks:"",f=[],g="";e.requestFilter.category&&e.requestFilter.category.value&&(f=[e.requestFilter.category],g=e.requestFilter.category.value);var v=[],b="";e.requestFilter.post_tag&&e.requestFilter.post_tag.value&&(v=[e.requestFilter.post_tag],b=e.requestFilter.post_tag.value);var y=[],R="";return e.requestFilter.post_author&&e.requestFilter.post_author.value&&(y=[e.requestFilter.post_author],R=e.requestFilter.post_author.value),React.createElement("div",{className:"publishpress-calendar-filter-bar"},React.createElement(E,{placeholder:e.strings.allStatuses,options:e.statuses,value:d,onSelect:a,onClear:a}),React.createElement(w,{placeholder:e.strings.allCategories,isEditing:!0,ajaxUrl:e.ajaxUrl,nonce:e.nonce,options:f,value:g,taxonomy:"category",onSelect:n,onClear:n,multiple:!1,className:"publishpress-calendar-category-filter"}),React.createElement(w,{placeholder:e.strings.allTags,isEditing:!0,ajaxUrl:e.ajaxUrl,nonce:e.nonce,options:v,value:b,taxonomy:"post_tag",onSelect:r,onClear:r,multiple:!1,className:"publishpress-calendar-tag-filter"}),React.createElement(E,{placeholder:e.strings.allAuthors,ajaxUrl:e.ajaxUrl,nonce:e.nonce,options:y,value:R,ajaxAction:"publishpress_calendar_search_authors",onSelect:l,onClear:l}),React.createElement(E,{placeholder:e.strings.allTypes,options:e.postTypes,value:m,onSelect:s,onClear:s}),React.createElement(E,{placeholder:o,options:u,value:h,onSelect:i,onClear:i}))}function H(e){return e.isEditing?React.createElement(E,{ajaxUrl:e.ajaxUrl,nonce:e.nonce,multiple:e.multiple,ajaxAction:e.ajaxAction,options:e.options,value:e.value,name:e.name,id:e.id,onSelect:e.onSelect,onClear:e.onClear}):React.createElement("span",{id:e.id},e.value.join(", "))}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,l=[],s=!0,i=!1;try{for(a=a.call(e);!(s=(n=a.next()).done)&&(l.push(n.value),!t||l.length!==t);s=!0);}catch(e){i=!0,r=e}finally{try{s||null==a.return||a.return()}finally{if(i)throw r}}return l}(e,t)||W(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){if(e){if("string"==typeof e)return V(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?V(e,t):void 0}}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var Y=jQuery;function Q(e){var t=L(React.useState(e.postTypes[0].value),2),a=t[0],n=t[1],r=L(React.useState([]),2),l=r[0],s=r[1],i=L(React.useState(!1),2),c=i[0],o=i[1],u=L(React.useState(!1),2),p=u[0],f=u[1],v=L(React.useState(),2),y=v[0],C=v[1],O=function(){P(),U()},A=function(){Y("#wpwrap").css("overflow","hidden")},P=function(){Y("#wpwrap").css("overflow","auto")},I=function(){q("post_type",e.postTypes[0].value),q("status","draft")},N=function(e){return void 0===window.publishpressCalendarGlobalData&&(window.publishpressCalendarGlobalData={}),void 0===window.publishpressCalendarGlobalData.formFieldsData&&(window.publishpressCalendarGlobalData.formFieldsData={}),window.publishpressCalendarGlobalData.formFieldsData.hasOwnProperty(e)?window.publishpressCalendarGlobalData.formFieldsData[e]:null},U=function(){void 0!==window.publishpressCalendarGlobalData&&void 0!==window.publishpressCalendarGlobalData.formFieldsData&&(window.publishpressCalendarGlobalData.formFieldsData=[])},q=function(e,t){!function(e,t){N(e),window.publishpressCalendarGlobalData.formFieldsData[e]=t}(e,t)},M=function(t,a){t.preventDefault(),o(!0),f(a.id),C(null),function(e,t,a,n){return g.apply(this,arguments)}(a.action,a.args,e.ajaxUrl,function(){var t=new FormData;for(var a in t.append("date",d(e.date)),t.append("nonce",e.nonce),window.publishpressCalendarGlobalData.formFieldsData)window.publishpressCalendarGlobalData.formFieldsData.hasOwnProperty(a)&&t.append(a,window.publishpressCalendarGlobalData.formFieldsData[a]);return t}()).then((function(t){"create"===a.id?(o(!1),f(null),"success"===t.status?e.onCloseCallback&&e.onCloseCallback():C(t.message)):"edit"===a.id&&("success"===t.status?window.location.href=t.data.link:(o(!1),f(null),C(t.message)))}))},G=function(){setTimeout((function(){Y(".publishpress-calendar-popup-form input").first().focus()}),500)};React.useEffect((function(){return U(),n(e.postTypes[0].value),I(),A(),O}),[]),React.useEffect((function(){o(!0);var t={nonce:e.nonce,postType:N("post_type"),date:d(e.date)};s(null),h(e.actionGetPostTypeFields,t,e.ajaxUrl).then((function(e){s(e.fields)})).then((function(){G(),o(!1)}))}),[a]);var V=function(){var t,a,n,r,s=[],i=function(i){if(!l.hasOwnProperty(i))return"continue";switch(n="publishpress-calendar-field-"+i,t=l[i],r=t.placeholder?t.placeholder:null,t.type){case"date":a=React.createElement(b,{value:t.value,isEditing:!0,id:n,onChange:function(e,t){q(i,t)}});break;case"authors":a=React.createElement(R,{value:t.value,isEditing:!0,name:i,id:n,nonce:e.nonce,ajaxUrl:e.ajaxUrl,multiple:e.allowAddingMultipleAuthors,onSelect:function(e,t,a){for(var n=[],r=0;r<a.length;r++)n.push(a[r].id);q(i,n)},onClear:function(e,t){q(i,null)}});break;case"select":a=React.createElement(H,{value:t.value,isEditing:!0,name:i,id:n,nonce:e.nonce,ajaxUrl:e.ajaxUrl,ajaxAction:t.ajaxAction,multiple:t.multiple,onSelect:function(e,t,a){for(var n=[],r=0;r<a.length;r++)n.push(a[r].id);q(i,n)},onClear:function(e,t){q(i,null)}});break;case"status":a=React.createElement(k,{value:t.value,isEditing:!0,id:n,options:t.options,onSelect:function(e,t,a){var n=null;a.length>0&&(n=a[0].id),q(i,n)},onClear:function(e,t){q(i,null)}});break;case"taxonomy":a=React.createElement(w,{value:t.value,isEditing:!0,id:n,taxonomy:t.taxonomy,nonce:e.nonce,ajaxUrl:e.ajaxUrl,multiple:!0,onSelect:function(e,t,a){for(var n=[],r=0;r<a.length;r++)n.push(a[r].id);q(i,n)},onClear:function(e,t){q(i,null)}});break;case"checkbox":a=React.createElement(S,{isEditing:!0,id:n,value:t.value});break;case"location":a=React.createElement(x,{value:t.value,isEditing:!0,id:n,onChange:function(e,t){q(i,t)}});break;case"html":a=React.createElement(D,{value:t.value,isEditing:!0,id:n,onChange:function(e,t){q(i,t)}});break;case"text":a=React.createElement(j,{value:t.value,isEditing:!0,id:n,placeholder:r,onChange:function(e,t){q(i,t)}});break;case"user":a=React.createElement(F,{value:t.value,isEditing:!0,id:n});break;case"number":a=React.createElement(_,{value:t.value,isEditing:!0,id:n,onChange:function(e,t){q(i,t)}});break;case"time":a=React.createElement(T,{value:t.value,isEditing:!0,id:n,placeholder:r,onChange:function(e,t){q(i,t)}});break;default:a=null}s.push(React.createElement("tr",null,React.createElement("th",null,React.createElement("label",{htmlFor:n},t.label,":")),React.createElement("td",null,a)))};for(var c in l)i(c);return s}();return React.createElement(React.Fragment,null,React.createElement("div",{className:"publishpress-calendar-popup-screen-lock"}),React.createElement("div",{className:"publishpress-calendar-popup publishpress-calendar-popup-form"},React.createElement("div",{className:"publishpress-calendar-popup-title"},e.postId?"":e.strings.addContentFor.replace("%s",date_i18n(e.dateFormat,e.date)),React.createElement("span",{className:"dashicons dashicons-no publishpress-calendar-popup-close",title:e.strings.close,onClick:e.onCloseCallback})),React.createElement("hr",null),React.createElement("table",null,React.createElement("tbody",null,e.postTypes.length>1&&React.createElement("tr",null,React.createElement("th",null,React.createElement("label",null,e.strings.postType)),React.createElement("td",null,React.createElement(E,{options:e.postTypes,allowClear:!1,onSelect:function(e){var t=Y(e.target).pp_select2("data")[0].id;n(t),q("post_type",t)}}))),1===e.postTypes.length&&React.createElement("tr",null,React.createElement("th",null,React.createElement("label",null,e.strings.postType)),React.createElement("td",null,function(t){var a,n=function(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=W(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,s=!0,i=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){i=!0,l=e},f:function(){try{s||null==a.return||a.return()}finally{if(i)throw l}}}}(e.postTypes);try{for(n.s();!(a=n.n()).done;){var r=a.value;if(r.value===t)return r.text}}catch(e){n.e(e)}finally{n.f()}return e.strings.postTypeNotFound}(a))),V.length>0&&V)),0===V.length&&React.createElement("div",{className:"publishpress-calendar-popup-loading-fields"},e.strings.pleaseWaitLoadingFormFields),y&&React.createElement("div",{className:"publishpress-calendar-popup-error-message"},React.createElement("span",{className:"dashicons dashicons-warning"}),y),React.createElement("hr",{className:"publishpress-calendar-popup-links-hr"}),React.createElement("div",{className:"publishpress-calendar-popup-links"},function(){var t,a=[{id:"create",label:e.strings.save,labelLoading:e.strings.saving,action:"publishpress_calendar_create_item"},{id:"edit",label:e.strings.saveAndEdit,labelLoading:e.strings.saving,action:"publishpress_calendar_create_item"}],n=[];for(var r in a)a.hasOwnProperty(r)&&(t=a[r],p===t.id?n.push(React.createElement("span",null,t.labelLoading)):n.push(m(t,M)),n.push(React.createElement("span",null,"|")));return n.pop(),n}(),c&&React.createElement("span",{className:"dashicons dashicons-update-alt publishpress-spinner"}))))}function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,l=[],s=!0,i=!1;try{for(a=a.call(e);!(s=(n=a.next()).done)&&(l.push(n.value),!t||l.length!==t);s=!0);}catch(e){i=!0,r=e}finally{try{s||null==a.return||a.return()}finally{if(i)throw r}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return z(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var J=jQuery;function B(e){var t=e.theme||"light",a=e.requestFilter.post_status?e.requestFilter.post_status:"",n=e.requestFilter.post_type?e.requestFilter.post_type:"",i=e.requestFilter.weeks?e.requestFilter.weeks:e.numberOfWeeksToDisplay,c="";e.requestFilter.category&&e.requestFilter.category.value&&(c=e.requestFilter.category.value);var o="";e.requestFilter.post_tag&&e.requestFilter.post_tag.value&&(o=e.requestFilter.post_tag.value);var u="";e.requestFilter.post_author&&e.requestFilter.post_author.value&&(u=e.requestFilter.post_author.value);var m=$(React.useState(p(e.firstDateToDisplay,e.weekStartsOnSunday)),2),h=m[0],f=m[1],g=$(React.useState(i),2),b=g[0],y=g[1],E=$(React.useState(e.items),2),R=E[0],C=E[1],k=$(React.useState(!1),2),w=k[0],S=k[1],x=$(React.useState(!1),2),D=x[0],j=x[1],F=$(React.useState(),2),_=F[0],T=F[1],O=$(React.useState(a),2),A=O[0],P=O[1],I=$(React.useState(c),2),N=I[0],U=I[1],M=$(React.useState(o),2),H=M[0],L=M[1],W=$(React.useState(u),2),V=W[0],Y=W[1],z=$(React.useState(n),2),B=z[0],K=z[1],X=$(React.useState(i),2),Z=X[0],ee=X[1],te=$(React.useState(),2),ae=te[0],ne=te[1],re=$(React.useState([]),2),le=re[0],se=re[1],ie=$(React.useState(0),2),ce=ie[0],oe=ie[1],ue=$(React.useState(0),2),pe=ue[0],de=ue[1],me=$(React.useState(),2),he=me[0],fe=me[1],ge=$(React.useState(),2),ve=ge[0],be=ge[1],ye=function(t,a){return a||(a=""),e.ajaxUrl+"?action="+t+"&nonce="+e.nonce+a},Ee=function(){document.removeEventListener("keydown",Te),J(".publishpress-calendar tbody > tr > td").off("mouseenter")},Re=function(){J(".publishpress-calendar-day-hover").removeClass("publishpress-calendar-day-hover"),J(".publishpress-calendar-loading").removeClass("publishpress-calendar-loading")},Ce=function(e){f(new Date(h.getTime()+7*e*24*60*60*1e3))},ke=function(t,a){var n=J(t.target),r=J(a.draggable[0]),l=d(v(r.data("datetime")));J(t.target).addClass("publishpress-calendar-loading"),function(t,a,n,r,l){var s=R[t][a];S(!0),T(e.strings.movingTheItem);var i=ye(e.actionMoveItem),c=new FormData;c.append("id",s.id),c.append("year",n),c.append("month",r),c.append("day",l),fetch(i,{method:"POST",body:c}).then((function(e){return e.json()})).then((function(){de(pe+1)}))}(l,r.data("index"),n.data("year"),n.data("month"),n.data("day"))},we=function(e,t){Re(),J(e.target).addClass("publishpress-calendar-day-hover")},Se=function(e){var t=J(e);return t.is("td.publishpress-calendar-business-day, td.publishpress-calendar-weekend-day")?t:t.is(".publishpress-calendar-cell-header, .publishpress-calendar-date, .publishpress-calendar-cell-click-to-add, .publishpress-calendar-month-name")?t.parents("td"):null},xe=function(e){var t=v(e.data("year")+"-"+e.data("month")+"-"+e.data("day"));return t.getHours()>0&&t.setTime(t.getTime()+6e4*t.getTimezoneOffset()),t},De=function(){var e;J(".publishpress-calendar tbody > tr > td").on("mouseover",(function(t){t.preventDefault(),t.stopPropagation();var a=Se(t.target);if(a){if(function(e){return J(e).hasClass("publishpress-calendar-day-hover")}(a))return;fe(xe(a)),e=xe(a)}})).on("mouseout",(function(t){t.stopPropagation(),t.preventDefault(),Se(t.relatedTarget)||(fe(null),e=null)})).on("click",(function(t){Se(t.target)&&(ne(null),be(e))}))},je=function(){ne(null),se(null),be(null)},Fe=function(e){se(null),fe(null),be(null),ne(e)},_e=function(e,t,a){oe(ce+1)},Te=function(e){"Escape"===e.key&&je()},Oe=function(){return le},Ae=function(){ne(null)};React.useEffect((function(){return document.addEventListener("keydown",Te),J(document).on("publishpress_calendar:close_popup",Ae),e.userCanAddPosts&&De(),Ee}),[]),React.useEffect((function(){J(".publishpress-calendar-day-items li").draggable({zIndex:99999,helper:"clone",containment:".publishpress-calendar table",start:function(e,t){return J(e.target).data("id")!==ae&&(!!J(e.target).hasClass("publishpress-calendar-item-movable")&&(J(e.target).addClass("ui-draggable-target"),je(),void j(!0)))},stop:function(e,t){J(".ui-draggable-target").removeClass("ui-draggable-target"),j(!1)}}),J(".publishpress-calendar tbody > tr > td").droppable({drop:ke,over:we})})),e.userCanAddPosts&&React.useEffect(De,[h,b,Z,V,H,N,A,B,pe]),React.useEffect((function(){S(!0),T(e.strings.loading);var t=ye(e.actionGetData,"&start_date="+d(p(h,e.weekStartsOnSunday))+"&number_of_weeks="+b);A&&(t+="&post_status="+A),N&&(t+="&category="+N),H&&(t+="&post_tag="+H),V&&(t+="&post_author="+V),B&&(t+="&post_type="+B),Z&&(t+="&weeks="+Z),fetch(t).then((function(e){return e.json()})).then((function(e){C(e),S(!1),T(null),Re()}))}),[h,b,Z,V,H,N,A,B,pe]),React.useEffect((function(){if(ae){S(!0),T(e.strings.loadingItem);var t=e.ajaxUrl+"?action=publishpress_calendar_get_post_data&nonce="+e.nonce+"&id="+ae;fetch(t).then((function(e){return e.json()})).then((function(e){S(!1),T(null),se(e)}))}}),[ae,ce]);var Pe=["publishpress-calendar","publishpress-calendar-theme-"+t];return e.userCanAddPosts&&Pe.push("user-can-add-posts"),React.createElement("div",{className:Pe.join(" ")},React.createElement(G,{statuses:e.statuses,postTypes:e.postTypes,numberOfWeeksToDisplay:b,ajaxUrl:e.ajaxUrl,nonce:e.nonce,onChange:function(t,a){"status"===t&&P(a),"category"===t&&U(a),"tag"===t&&L(a),"author"===t&&Y(a),"postType"===t&&K(a),"weeks"===t&&((0===(a=parseInt(a))||isNaN(a))&&(a=e.numberOfWeeksToDisplay),ee(a),y(a))},requestFilter:e.requestFilter,strings:e.strings}),React.createElement(r,{refreshOnClickCallback:function(e){e.preventDefault(),de(pe+1)},backPageOnClickCallback:function(e){e.preventDefault(),Ce(-1*b)},backOnClickCallback:function(e){e.preventDefault(),Ce(-1)},forwardOnClickCallback:function(e){e.preventDefault(),Ce(1)},forwardPageOnClickCallback:function(e){e.preventDefault(),Ce(b)},todayOnClickCallback:function(t){t.preventDefault(),f(p(e.todayDate,e.weekStartsOnSunday))},strings:e.strings}),React.createElement("table",null,React.createElement("thead",null,React.createElement("tr",null,React.createElement(l,{weekStartsOnSunday:e.weekStartsOnSunday,strings:e.strings}))),React.createElement("tbody",null,function(){for(var t,a,n=7*b,r=p(h,e.weekStartsOnSunday),l=[],s=[],i=0,c=r.getMonth(),o=0;o<n;o++)0===i&&(s=[]),(t=new Date(r)).setDate(t.getDate()+o),a=d(t),s.push(React.createElement(q,{key:"day-"+t.getTime(),date:t,shouldDisplayMonthName:c!==t.getMonth()||0===o,todayDate:e.todayDate,isLoading:!1,isHovering:!D&&he&&he.getTime()===t.getTime()&&!ve,items:R[a]||[],maxVisibleItems:parseInt(e.maxVisibleItems),timeFormat:e.timeFormat,openedItemId:ae,getOpenedItemDataCallback:Oe,ajaxUrl:e.ajaxUrl,onClickItemCallback:Fe,onItemActionClickCallback:_e,strings:e.strings})),7===++i&&(i=0,l.push(React.createElement("tr",null,s))),c=t.getMonth();return l}())),ve&&React.createElement(Q,{date:ve,ajaxUrl:e.ajaxUrl,dateFormat:e.dateFormat,postTypes:e.postTypesCanCreate,statuses:e.statuses,actionGetPostTypeFields:e.actionGetPostTypeFields,nonce:e.nonce,onCloseCallback:function(){de(pe+1),be(null)},allowAddingMultipleAuthors:e.allowAddingMultipleAuthors,strings:e.strings}),React.createElement(s,{showSpinner:w,message:_}))}jQuery((function(){var e,t,a;ReactDOM.render(React.createElement(B,{firstDateToDisplay:(e=publishpressCalendarParams.firstDateToDisplay,t=new Date(e),a=6e4*t.getTimezoneOffset(),new Date(t.getTime()+a)),weekStartsOnSunday:1===parseInt(publishpressCalendarParams.weekStartsOnSunday),numberOfWeeksToDisplay:publishpressCalendarParams.numberOfWeeksToDisplay,todayDate:v(publishpressCalendarParams.todayDate),dateFormat:publishpressCalendarParams.dateFormat,timeFormat:publishpressCalendarParams.timeFormat,theme:publishpressCalendarParams.theme,statusesToDisplayTime:publishpressCalendarParams.statusesToDisplayTime,maxVisibleItems:publishpressCalendarParams.maxVisibleItems,ajaxUrl:publishpressCalendarParams.ajaxUrl,actionGetData:"publishpress_calendar_get_data",actionMoveItem:"publishpress_calendar_move_item",actionGetPostTypeFields:"publishpress_calendar_get_post_type_fields",nonce:publishpressCalendarParams.nonce,statuses:publishpressCalendarParams.statuses,postTypes:publishpressCalendarParams.postTypes,postTypesCanCreate:publishpressCalendarParams.postTypesCanCreate,userCanAddPosts:publishpressCalendarParams.userCanAddPosts,items:publishpressCalendarParams.items,allowAddingMultipleAuthors:publishpressCalendarParams.allowAddingMultipleAuthors,requestFilter:publishpressCalendarParams.requestFilter,strings:publishpressCalendarParams.strings}),document.getElementById("publishpress-calendar-wrap"))}))}]);
/*! woocommerce-ultimate-points-and-rewards 06-05-2018 */
!function(a){a(document).ready(function(){a(".mwb_wpr_common_table").css("display","none"),a(".mwb_wpr_custom_coupon").click(function(){var b=a(this).data("id"),c=a("#mwb_custom_point_num").val(),d="",e="";if(a("#mwb_wpr_points_notification").html(""),c=parseFloat(c),c>0&&a.isNumeric(c)){jQuery("#mwb_wpr_loader").show();var f={action:"mwb_wpr_generate_custom_coupon",points:c,user_id:b,mwb_nonce:mwb_wpr.mwb_wpr_nonce};a.ajax({url:mwb_wpr.ajaxurl,type:"POST",data:f,dataType:"json",success:function(b){if(jQuery("#mwb_wpr_loader").hide(),1==b.result){a(".points_log").css("display","block"),a(".points_log").html(b.html),a("#mwb_wpr_points_only").html(b.points),d=b.message,e='<b style="color:green;">'+d+"</b>",a(".mwb_current_points").html(b.points);var c=mwb_wpr.minimum_points;b.points<c&&a("#points_form").html(mwb_wpr.minimum_points_text)}else d=b.message,e='<b style="color:red;">'+d+"</b>";a("#mwb_wpr_points_notification").html(e)}})}else e='<b style="color:red;">'+mwb_wpr.message+"</b>",a("#mwb_wpr_points_notification").html(e)}),a(".mwb_wpr_generate_coupon").click(function(){var b=a(this).data("id"),c="",d="";a("#mwb_wpr_points_notification").html(""),jQuery("#mwb_wpr_loader").show();var e={action:"mwb_wpr_generate_original_coupon",user_id:b,mwb_nonce:mwb_wpr.mwb_wpr_nonce};a.ajax({url:mwb_wpr.ajaxurl,type:"POST",data:e,dataType:"json",success:function(b){if(jQuery("#mwb_wpr_loader").hide(),1==b.result){a(".points_log").css("display","block"),a(".points_log").html(b.html),a("#mwb_wpr_points_only").html(b.points),c=b.message,d='<b style="color:green;">'+c+"</b>",a(".mwb_current_points").html(b.points);var e=mwb_wpr.minimum_points;b.points<e&&a("#points_form").hide()}else c=b.message,d='<b style="color:red;">'+c+"</b>";a("#mwb_wpr_points_notification").html(d)}})}),a("#mwb_wpr_upgrade_level").click(function(){a("#mwb_wpr_membership_roles").val();return confirm(mwb_wpr.confirmation_msg)?void a(this).closest("form#mwb_wpr_membership").submit():!1}),a(".mwb_wpr_level_benefits").click(function(){var b=a(this).data("id");jQuery("#mwb_wpr_popup_wrapper_"+b).css("display","block"),jQuery(".mwb_wpr_close").click(function(){jQuery("#mwb_wpr_popup_wrapper_"+b).css("display","none")})});var c=document.querySelectorAll("button"),e=(new Clipboard(c),""),f="";a("#mwb_wpr_share_point").click(function(){var b=a(this).data("id"),c=a("#mwb_wpr_enter_point").val(),d=a("#mwb_wpr_enter_email").val();if(a("#mwb_wpr_shared_points_notification").html(""),c>0){jQuery("#mwb_wpr_loader").show();var g={action:"mwb_wpr_sharing_point_to_other",shared_point:c,user_id:b,email_id:d,mwb_nonce:mwb_wpr.mwb_wpr_nonce};a.ajax({url:mwb_wpr.ajaxurl,type:"POST",data:g,dataType:"json",success:function(b){jQuery("#mwb_wpr_loader").hide(),null!==b&&1==b.result?(a("#mwb_wpr_points_only").html(b.available_points),e=b.message,f='<b style="color:green;">'+e+"</b>"):(e=b.message,f='<b style="color:red;">'+e+"</b>"),a("#mwb_wpr_shared_points_notification").html(f)}})}else f='<b style="color:red;">'+mwb_wpr.message+"</b>",a("#mwb_wpr_shared_points_notification").html(f)}),a(document).on("change","#mwb_wpr_pro_cost_to_points",function(){if(1==a(this).prop("checked")){a("#mwb_wpr_some_custom_points").val();a(".mwb_wpr_enter_some_points").css("display","block")}else a(".mwb_wpr_enter_some_points").css("display","none")}),a(document).on("change","#mwb_wpr_some_custom_points",function(){var b=a("#mwb_wpr_some_custom_points").val();if(null!=mwb_wpr_pro_cost_to_points){var c=a(".mwb_wpr_hidden_points").val();if(b>c){'<b style="color:red">'+mwb_wpr.mwb_wpr_custom_notice+"</b>"}a("#mwb_wpr_pro_cost_to_points").val(b)}else a("#mwb_wpr_pro_cost_to_points").val("")});var g="";a(document).on("change",".variation_id",function(c){c.preventDefault();var e=a(this).val();if(null!=e&&e>0&&g!==e){g=e,b(a(".summary.entry-summary"));var f={action:"mwb_wpr_append_variable_point",variation_id:g,mwb_nonce:mwb_wpr.mwb_wpr_nonce};a.ajax({url:mwb_wpr.ajaxurl,type:"POST",data:f,dataType:"json",success:function(b){1==b.result&&b.variable_points>0&&(a(".mwb_wpr_variable_points").html(b.variable_points),a(".mwb_wpr_product_point").css("display","block")),"html"==b.result_price&&null!=b.variable_price_html&&a(".woocommerce-variation-price").html(b.variable_price_html),"product_purchased_using_point"==b.result_point&&null!=b.variable_points_cal_html&&(a(".mwb_wpr_variable_pro_pur_using_point").html(b.variable_points_cal_html),a(".mwb_wpr_variable_pro_pur_using_point").css("display","block"))},complete:function(){d(a(".summary.entry-summary"))}})}}),1==a('input[id="mwb_wpr_pro_cost_to_points"]').prop("checked")?a(".mwb_wpr_enter_some_points").css("display","block"):a(".mwb_wpr_enter_some_points").css("display","none"),a(document).on("change","#mwb_wgm_price",function(){var b=a(this).val();null!=b&&(a(".mwb_wpr_when_variable_pro").html(b),a("#mwb_wpr_some_custom_points").val(b),a("#mwb_wpr_pro_cost_to_points").val(b))}),a(document).on("click",".mwb_wpr_common_slider",function(){a(this).siblings(".mwb_wpr_common_table").slideToggle("fast"),a(this).children(".mwb_wpr_open_toggle").toggleClass("mwb_wpr_plus_icon")}),a("#mwb_cart_points_apply").click(function(){var c=a(this).data("id"),e=a(this).data("point"),f="",g="",h=(mwb_wpr.mwb_wpr_cart_points_rate,mwb_wpr.mwb_wpr_cart_price_rate,a("#mwb_cart_points").val());if(a("#mwb_wpr_cart_points_notice").html(""),a("mwb_wpr_cart_points_success").html(""),"undefined"!==h&&""!==h&&null!==h&&h>0)if(null!==e&&e>0&&e>=h){b(a(".woocommerce-cart-form"));var i={action:"mwb_wpr_apply_fee_on_cart_subtotal",user_id:c,mwb_cart_points:h,mwb_nonce:mwb_wpr.mwb_wpr_nonce};a.ajax({url:mwb_wpr.ajaxurl,type:"POST",data:i,dataType:"json",success:function(b){1==b.result?(f=b.message,g=f,a("#mwb_wpr_cart_points_success").html(g),a("#mwb_wpr_cart_points_success").show()):(f=b.message,g=f,a("#mwb_wpr_cart_points_notice").html(g),a("#mwb_wpr_cart_points_notice").show())},complete:function(){d(a(".woocommerce-cart-form")),location.reload()}})}else f=mwb_wpr.not_allowed,g=f,a("#mwb_wpr_cart_points_notice").html(g),a("#mwb_wpr_cart_points_notice").show();else f=mwb_wpr.not_allowed,g=f,a("#mwb_wpr_cart_points_notice").html(g),a("#mwb_wpr_cart_points_notice").show()}),a("#mwb_wpr_remove_cart_point").click(function(){b(a(".woocommerce-cart-form"));var c={action:"mwb_wpr_remove_cart_point",mwb_nonce:mwb_wpr.mwb_wpr_nonce};a.ajax({url:mwb_wpr.ajaxurl,type:"POST",data:c,dataType:"json",success:function(b){1==b.result&&a("#mwb_cart_points").val("")},complete:function(){d(a(".woocommerce-cart-form")),location.reload()}})})});var b=function(a){c(a)||a.addClass("processing").block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},c=function(a){return a.is(".processing")||a.parents(".processing").length},d=function(a){a.removeClass("processing").unblock()}}(jQuery);
!function(p){function w(){p(".woocommerce-checkout-review-order-table, .wcf-product-option-wrap, .wcf-bump-order-wrap").block({message:null,overlayCSS:{background:"#fff",opacity:.6}})}function m(t){!cartflows.wcf_refresh_checkout&&jQuery(".wc_payment_methods").length?t.hasOwnProperty("cart_total")&&(t.hasOwnProperty("fragments")&&p.each(t.fragments,function(t,e){if("#place_order"===t){const c=p(".wc_payment_methods input[name='payment_method']:checked");0<c.length&&(p(t).replaceWith(e),"ppcp-gateway"===c.val()&&p(t).css("display","none"),c.trigger("click"))}else p(t).replaceWith(e)}),0<parseFloat(t.cart_total)?p("body").trigger("cartflows_update_checkout"):p("body").trigger("update_checkout"),p(".woocommerce-checkout-review-order-table, .wcf-product-option-wrap, .wcf-bump-order-wrap").unblock()):(p("body").trigger("update_checkout"),p(".woocommerce-checkout-review-order-table, .wcf-product-option-wrap, .wcf-bump-order-wrap").unblock())}function e(){p(".wcf-qty-row").on("click",function(t){if(!p(t.target).is(".wcf-multiple-sel, .wcf-single-sel, .wcf-qty, .wcf-qty-selection, .wcf-variable-item-popup-text, .wcf-qty-selection-btn, .wcf-qty-increment-icon, .wcf-qty-decrement-icon")){const e=p(this).find(".wcf-single-sel"),c=p(this).find(".wcf-multiple-sel");0<e.length?e.trigger("click"):0<c.length&&c.trigger("click")}}),p(document).on("change",".wcf-single-sel",function(){const t=p(this),e=t.closest(".wcf-qty-options"),c=t.closest(".wcf-qty-row"),o=c.data("options"),i=c.find(".wcf-qty input");let a=parseInt(i.val());var r=p("._wcf_checkout_id").val(),r=((a<=0||isNaN(a))&&(i.val(1),a=1),o.input_quantity=a,o.checkout_id=r,p("form.checkout").serialize());w(),e.addClass("wcf-loading"),p.ajax({url:cartflows.ajax_url,data:{action:"wcf_single_selection",option:o,post_data:r,security:cartflows.wcf_single_selection_nonce},dataType:"json",type:"POST",success(t){t.hasOwnProperty("cartflows_data")&&(c.find(".wcf-display-quantity").html(t.cartflows_data.display_quantity),c.find(".wcf-display-price").html(t.cartflows_data.display_price),c.find(".wcf-display-discount-value").html(t.cartflows_data.display_discount_value),c.find(".wcf-display-discount-percent").html(t.cartflows_data.display_discount_percent),c.find(".wcf_subscription_price").html(t.cartflows_data.subscription_price),c.find(".wcf_subscription_fee").html(t.cartflows_data.sign_up_fee)),m(t),e.removeClass("wcf-loading"),o.cart_item_key=t.cart_item_key,c.attr("data-options",JSON.stringify(o)),p(document.body).trigger("updated_cart_totals")},error(){p(".woocommerce-checkout-review-order-table").unblock()}})}),p(document).on("change",".wcf-multiple-sel",function(){const t=p(".wcf-multiple-sel:checked"),e=p(this),c=e.closest(".wcf-qty-row"),o=c.find(".wcf-qty input");let i=parseInt(o.val());if((i<=0||isNaN(i))&&(o.val(1),i=1),0===t.length)return e.prop("checked",!0),void e.prop("disabled",!0);1===t.length?t.prop("disabled",!0):t.removeAttr("disabled");const a=c.data("options");var r=p("._wcf_checkout_id").val(),r=(a.checkout_id=r,a.input_quantity=i,a.checked="no",p("form.checkout").serialize());e.is(":checked")&&(a.checked="yes"),w(),p(".wcf-qty-options").addClass("wcf-loading"),p.ajax({url:cartflows.ajax_url,data:{action:"wcf_multiple_selection",option:a,post_data:r,security:cartflows.wcf_multiple_selection_nonce},dataType:"json",type:"POST",success(t){t.hasOwnProperty("cartflows_data")&&(c.find(".wcf-display-quantity").html(t.cartflows_data.display_quantity),c.find(".wcf-display-price").html(t.cartflows_data.display_price),c.find(".wcf-display-discount-value").html(t.cartflows_data.display_discount_value),c.find(".wcf-display-discount-percent").html(t.cartflows_data.display_discount_percent),c.find(".wcf_subscription_price").html(t.cartflows_data.subscription_price),c.find(".wcf_subscription_fee").html(t.cartflows_data.sign_up_fee)),m(t),p(".wcf-qty-options").removeClass("wcf-loading"),a.cart_item_key=t.cart_item_key,c.attr("data-options",JSON.stringify(a)),p(document.body).trigger("updated_cart_totals")},error(){p(".woocommerce-checkout-review-order-table").unblock()}})}),p(document).on("change",".wcf-var-sel",function(){const t=p(this),e=t.closest(".wcf-qty-row"),c=e.find(".wcf-qty input"),o=e.data("options");var i=parseInt(c.val()),a=p("._wcf_checkout_id").val();o.checkout_id=a,o.input_quantity=i,w(),p(".wcf-qty-options").addClass("wcf-loading"),p.ajax({url:cartflows.ajax_url,data:{action:"wcf_variation_selection",option:o,security:cartflows.wcf_variation_selection_nonce},dataType:"json",type:"POST",success(t){t.hasOwnProperty("cartflows_data")&&(e.find(".wcf-display-quantity").html(t.cartflows_data.display_quantity),e.find(".wcf-display-price").html(t.cartflows_data.display_price),e.find(".wcf-display-discount-value").html(t.cartflows_data.display_discount_value),e.find(".wcf-display-discount-percent").html(t.cartflows_data.display_discount_percent),e.find(".wcf_subscription_price").html(t.cartflows_data.subscription_price),e.find(".wcf_subscription_fee").html(t.cartflows_data.sign_up_fee)),m(t),p(".wcf-qty-options").removeClass("wcf-loading"),p(document.body).trigger("updated_cart_totals")},error(){p(".woocommerce-checkout-review-order-table").unblock()}})}),p(document).on("change",".wcf-qty-selection",function(){const t=p(this),e=t.closest(".wcf-qty-row"),c=e.find(".wcf-item-selector");if(0<c.length){const s=c.find("input");if(0<s.length&&!s.is(":checked"))return}const o=e.data("options"),i=p("._wcf_checkout_id").val();let a=parseInt(t.val());(a<=0||isNaN(a))&&(t.val(1),a=1),o.input_quantity=a,o.checkout_id=i;var r=p("form.checkout").serialize();"undefined"!=typeof data&&(o.cart_item_key=data.cart_item_key),w(),p(".wcf-qty-options").addClass("wcf-loading"),p.ajax({url:cartflows.ajax_url,data:{action:"wcf_quantity_update",option:o,post_data:r,security:cartflows.wcf_quantity_update_nonce},dataType:"json",type:"POST",success(t){t.hasOwnProperty("cartflows_data")&&(e.find(".wcf-display-quantity").html(t.cartflows_data.display_quantity),e.find(".wcf-display-price").html(t.cartflows_data.display_price),e.find(".wcf-display-discount-value").html(t.cartflows_data.display_discount_value),e.find(".wcf-display-discount-percent").html(t.cartflows_data.display_discount_percent),e.find(".wcf_subscription_price").html(t.cartflows_data.subscription_price),e.find(".wcf_subscription_fee").html(t.cartflows_data.sign_up_fee)),m(t),p(".wcf-qty-options").removeClass("wcf-loading"),p(document.body).trigger("updated_cart_totals")},error(){p(".woocommerce-checkout-review-order-table").unblock()}})}),p("form.woocommerce-checkout").on("checkout_place_order",function(t){var e=p(".wcf-select-variation-attribute.wcf-invalid-variation");if(0<e.length)return t.preventDefault(),_(e),!1}),p(".wcf-select-variation-attribute").on("click",function(t){t.preventDefault();const e=p(this).closest(".wcf-qty-row");e.find(".wcf-item-choose-options a").trigger("click")});{const t=p(".wcf-item-choose-options a"),u=p(".wcf-quick-view-wrapper"),o=(u.appendTo(document.body),u.find(".wcf-quick-view-bg")),a=u.find("#wcf-quick-view-modal"),r=a.find("#wcf-quick-view-content"),c=a.find("#wcf-quick-view-close"),i=a.find(".wcf-content-main-wrapper"),s=(t.off("click").on("click",function(t){t.preventDefault();const e=p(this),c=e.closest(".wcf-item");c.find(".wcf-item-selector input").is(":checked")||c.find(".wcf-item-selector input").trigger("click");t=e.data("product");e.addClass("wcf-variation-popup-open"),a.hasClass("loading")||a.addClass("loading"),o.hasClass("wcf-quick-view-bg-ready")||o.addClass("wcf-quick-view-bg-ready"),p(document).trigger("wcf_quick_view_loading"),s(e,t)}),function(t,e){a.css("opacity",0),p.ajax({url:cartflows.ajax_url,data:{action:"wcf_woo_quick_view",product_id:e},dataType:"html",type:"POST",success(t){r.html(t),n()}})}),n=function(){const t=r.find(".variations_form");if(t.trigger("check_variations"),t.trigger("reset_image"),!a.hasClass("open")){a.removeClass("loading").addClass("open");var e=f();const o=p("html");o.css("margin-right",e),o.addClass("wcf-quick-view-is-open")}0<t.length&&"function"==typeof t.wc_variation_form&&(t.wc_variation_form(),t.find("select").trigger("change"));const c=a.find(".wcf-qv-image-slider");1<c.find("li").length?c.flexslider({animation:"slide",start(){setTimeout(function(){d(!0)},300)}}):setTimeout(function(){d(!0)},300),p(document).on("woocommerce_gallery_reset_slide_position",function(){c.flexslider(0)}),p(document).trigger("wcf_quick_view_loader_stop")},e=function(){i.on("click",function(t){this===t.target&&e()}),p(document).on("keyup",function(t){27===t.keyCode&&e()}),c.on("click",function(t){t.preventDefault(),e()});const e=function(){o.removeClass("wcf-quick-view-bg-ready"),a.removeClass("open").removeClass("loading"),p("html").removeClass("wcf-quick-view-is-open"),p("html").css("margin-right",""),t.removeClass("wcf-variation-popup-open"),setTimeout(function(){r.html("")},600)}},d=function(t){const e=r,c=e.find(".product .wcf-qv-image-slider").first().height(),o=e.find(".product .summary.entry-summary"),i=o.css("content");void 0!==i&&544===i.replace(/[^0-9]/g,"")&&0!==c&&null!==c?o.css("height",c):o.css("height",""),!0===t&&a.css("opacity",1)},f=function(){const t=p('<div style="width:50px;height:50px;overflow:hidden;position:absolute;top:-200px;left:-200px;"><div style="height:100px;"></div>');p("body").append(t);var e=p("div",t).innerWidth(),c=(t.css("overflow-y","scroll"),p("div",t).innerWidth());return p(t).remove(),e-c},l=(e(),window.addEventListener("resize",function(){d()}),function(){u.off("click","#wcf-quick-view-content .single_add_to_cart_button").off("wcf_added_to_cart").on("click","#wcf-quick-view-content .single_add_to_cart_button",this.onAddToCart).on("wcf_added_to_cart",this.updateButton)});l.prototype.onAddToCart=function(t){t.preventDefault();const e=p(this).closest("form");if(!e[0].checkValidity())return e[0].reportValidity(),!1;const o=p(this),c=e.find('input[name="product_id"]').val()||"",i=e.find('input[name="variation_id"]').val()||"",a=p(".wcf-variation-popup-open"),r=a.closest(".wcf-qty-row"),s=r.find(".wcf-qty-selection"),n=s.val()||1,d=r.data("options"),f=p("._wcf_checkout_id").val(),l=r.find(".wcf-item-wrap");d.input_quantity=n,d.checkout_id=f,o.is(".single_add_to_cart_button")&&(o.removeClass("added"),o.addClass("loading"),""!==i&&jQuery.ajax({url:cartflows.ajax_url,type:"POST",data:{action:"wcf_add_cart_single_product",form_data:e.serialize(),product_id:c,variation_id:i,quantity:n,option:d,security:cartflows.wcf_quick_view_add_cart_nonce},dataType:"json",success(t){if(t.hasOwnProperty("cartflows_data")&&"yes"===t.cartflows_data.added_to_cart){var t=t.cartflows_data,e=(a.closest(".wcf-item").find(".wcf-display-attributes").html(t.display_attr),a.closest(".wcf-item").find(".wcf-item-image").html(t.variation_image),a.attr("data-variation",t.variation_id),d.variation_id=t.variation_id,d.original_price=t.original_price,d.discounted_price=t.discounted_price,d.subscription_price=t.subscription_price,d.sign_up_fee=t.signup_fee,r.attr("data-options",JSON.stringify(d)),r.find(".wcf-item-selector"));if(0<e.length){const c=r.data("options");c.variation_id=t.variation_id,r.attr("data-options",JSON.stringify(c))}r.find(".wcf-display-quantity").html(t.display_quantity),r.find(".wcf-display-price").html(t.display_price),r.find(".wcf-display-discount-value").html(t.display_discount_value),r.find(".wcf-display-discount-percent").html(t.display_discount_percent),l.find(".wcf_subscription_price").html(t.display_subscription_price),l.find(".wcf_subscription_period").html(t.display_subscription_details),l.find(".wcf_subscription_fee").html(t.display_signup_fee),l.find(".wcf_subscription_free_trial").html(t.trial_period_string)}p(document.body).trigger("wc_fragment_refresh"),u.trigger("wcf_added_to_cart",[o])}}))},l.prototype.updateButton=function(){p("body").trigger("update_checkout"),c.trigger("click")},new l}}function c(){o(),p(".wcf-embed-checkout-form-two-step .woocommerce").addClass("step-one"),p(".wcf-embed-checkout-form-two-step .wcf-embed-checkout-form-steps a").on("click",function(t){t.preventDefault(),o()}),p(".wcf-embed-checkout-form-two-step .wcf-embed-checkout-form-nav-btns a").on("click",function(t){{var e;t.preventDefault(),a()&&(p(".wcf-embed-checkout-form-two-step .wcf-embed-checkout-form-steps div.wcf-current").removeClass("wcf-current"),"#customer_details"===(e=p(".wcf-embed-checkout-form-two-step .wcf-embed-checkout-form-nav-btns a").attr("href"))?(_(p(".wcf-embed-checkout-form-nav")),p(".wcf-embed-checkout-form-two-step .woocommerce").removeClass("step-two"),p(".wcf-embed-checkout-form-two-step .woocommerce").addClass("step-one"),p(".wcf-embed-checkout-form-two-step").find(".step-one").addClass("wcf-current")):"#wcf-order-wrap"===e&&(_(p(".wcf-embed-checkout-form-nav")),p(".wcf-embed-checkout-form-two-step .woocommerce").removeClass("step-one"),p(".wcf-embed-checkout-form-two-step .woocommerce").addClass("step-two"),p(".wcf-embed-checkout-form-two-step").find(".step-two").addClass("wcf-current")))}})}function o(){p(".wcf-embed-checkout-form-two-step .wcf-embed-checkout-form-steps a").on("click",function(t){if(t.preventDefault(),a()){const e=p(this),c=e.closest(".wcf-embed-checkout-form-two-step .wcf-embed-checkout-form-steps div");p(".wcf-embed-checkout-form-two-step .wcf-embed-checkout-form-steps div.wcf-current").removeClass("wcf-current"),c.addClass("wcf-current");t=e.closest(".wcf-embed-checkout-form-two-step .wcf-embed-checkout-form-steps div a").attr("href");"#customer_details"===t?(p(".wcf-embed-checkout-form-two-step .woocommerce").removeClass("step-two"),p(".wcf-embed-checkout-form-two-step .woocommerce").addClass("step-one")):"#wcf-order-wrap"===t&&(p(".wcf-embed-checkout-form-two-step .woocommerce").removeClass("step-one"),p(".wcf-embed-checkout-form-two-step .woocommerce").addClass("step-two"))}})}const i={vars:{originalTitle:document.title,interval:null},On(t,e){const c=this;c.vars.interval=setInterval(function(){document.title=c.vars.originalTitle===document.title?t:c.vars.originalTitle},e||1e3)},Off(){clearInterval(this.vars.interval),document.title=this.vars.originalTitle}},_=function(t){t.length&&(event.preventDefault(),p("html, body").stop().animate({scrollTop:t.offset().top-50},100))},a=function(){var t=p(".wcf-embed-checkout-form-two-step form.woocommerce-checkout .woocommerce-billing-fields, .wcf-embed-checkout-form-two-step form.woocommerce-checkout .woocommerce-account-fields").find('input[type="text"], input[type="tel"], input[type="email"], input[type="password"]'),e=p(".wcf-embed-checkout-form-two-step form.woocommerce-checkout .woocommerce-billing-fields, .wcf-embed-checkout-form-two-step form.woocommerce-checkout .woocommerce-account-fields").find('input[type="checkbox"]'),c=p(".wcf-embed-checkout-form-two-step form.woocommerce-checkout .woocommerce-billing-fields").find(".select2"),o=p(".wcf-embed-checkout-form-two-step form.woocommerce-checkout .woocommerce-shipping-fields").find('input[type="text"], input[type="tel"], input[type="email"], input[type="password"]'),i=p(".wcf-embed-checkout-form-two-step form.woocommerce-checkout .woocommerce-shipping-fields .woocommerce-shipping-fields__field-wrapper").find('input[type="checkbox"]'),a=p(".wcf-embed-checkout-form-two-step form.woocommerce-checkout .woocommerce-shipping-fields").find(".select2"),r=p(".wcf-embed-checkout-form-two-step form.woocommerce-checkout").find('h3#ship-to-different-address input[type="checkbox"]:checked').val();let s=!0,n="";return Array.from(t).forEach(function(t){const e=t.type,c=t.name,o=t.closest(".form-row"),i=p.trim(t.value);let a=o.classList.contains("validate-required");var r;"account_password"!==c&&"account_username"!==c||(r=document.getElementById("createaccount"),a=!r||!!p(r).is(":checked")),a&&""===i?(t.classList.add("field-required"),s=!1,""===n&&(n=t)):("email"===e&&!1===/^([a-zA-Z0-9_\+\-\.]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-Z]{2,14})$/.test(i)&&(t.classList.add("field-required"),s=!1,""===n&&(n=t)),t.classList.remove("field-required"))}),Array.from(e).forEach(function(t){const e=t.closest(".form-row"),c=e.classList.contains("validate-required");let o=!1;p(t).is(":checked")&&(o=!0),c&&!1===o?(t.classList.add("field-required"),s=!1,""===n&&(n=t)):t.classList.remove("field-required")}),Array.from(c).forEach(function(t){const e=t.closest(".form-row"),c=e.classList.contains("validate-required"),o=p.trim(e.querySelector(".select2-selection__rendered[title]"));name=e.querySelector("select").name,c&&""===o?(t.classList.add("field-required"),s=!1,""===n&&(n=t)):t.classList.remove("field-required")}),"1"===r&&(Array.from(o).forEach(function(t){const e=t.type,c=t.closest(".form-row"),o=c.classList.contains("validate-required"),i=p.trim(t.value);o&&""===i?(t.classList.add("field-required"),s=!1,""===n&&(n=t)):("email"===e&&!1===/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(i)&&(t.classList.add("field-required"),s=!1,""===n&&(n=t)),t.classList.remove("field-required"))}),Array.from(a).forEach(function(t){const e=t.closest(".form-row"),c=e.classList.contains("validate-required"),o=p.trim(e.querySelector(".select2-selection__rendered[title]"));name=e.querySelector("select").name,c&&""===o?(t.classList.add("field-required"),s=!1,""===n&&(n=t)):t.classList.remove("field-required")}),Array.from(i).forEach(function(t){const e=t.closest(".form-row"),c=e.classList.contains("validate-required");let o=!1;p(t).is(":checked")&&(o=!0),c&&!1===o?(t.classList.add("field-required"),s=!1,""===n&&(n=t)):t.classList.remove("field-required")})),""!==n&&n.focus(),s};p(function(){if(p(document).on("cartflows_remove_product",function(t,e){jQuery('.wcf-multiple-sel[value="'+e+'"]').prop("checked",!1),jQuery('.wcf-single-sel[value="'+e+'"]').prop("checked",!1)}),"yes"===cartflows_animate_tab_fields.enabled&&(p(window).blur(function(){i.On(cartflows_animate_tab_fields.title)}),p(window).on("focus",function(){i.Off()})),"yes"===cartflows.allow_autocomplete_zipcode){let i;p(document.body).on("textInput input change keypress paste","#billing_postcode, #shipping_postcode",function(){const t=p(this),e=t.attr("id").split("_")[0],c=p("#"+e+"_country").val();if(""!==c){const o=t.val().trim();""!==o&&(clearTimeout(i),i=setTimeout(function(){-1===["GB","CA"].indexOf(c)&&a(e,c,o)},800))}});const a=function(e,t,c){p.ajax({url:"https://api.zippopotam.us/"+t+"/"+c,cache:!0,dataType:"json",type:"GET",success(t){p.each(t.places,function(){return p("#"+e+"_city").val(this["place name"]).trigger("change"),p('[name="'+e+'_state"]:visible').val(this["state abbreviation"]).trigger("change"),!1})},error(){}})}}e();{const t=p(".wcf-multiple-sel:checked");1===t.length&&(t.prop("checked",!0),t.prop("disabled",!0))}{let f=!1;p(document).on("change",".wcf-bump-order-cb",function(){if(!0===f)return!1;f=!0;const e=p(this),c=e.data("ob_data").product_id;var t=p("[name=_wcf_checkout_id]").val();const o=e.attr("data-ob_data"),i=e.data("ob_data").ob_id,a=e.closest(".wcf-bump-order-field-wrap").find(".wcf-bump-order-cb-button"),r=e.closest(".wcf-bump-order-wrap");let s="";const n={security:cartflows.wcf_bump_order_process_nonce,_wcf_checkout_id:t,_wcf_product_id:c,_bump_offer_data:o||"",action:"wcf_bump_order_process"};let d=p("[name=_wcf_bump_products]").val();return d=""===d?{}:JSON.parse(d),s=e.is(":checked")?(n._wcf_bump_product_action="add_bump_product",!0):!(n._wcf_bump_product_action="remove_bump_product"),r.block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),p.ajax({url:cartflows.ajax_url,data:n,dataType:"json",type:"POST",success(t){m(t),0<a.length&&(s?(a.toggleClass("wcf-bump-add-to-cart wcf-bump-remove-from-cart"),a.text(e.data("remove"))):(a.toggleClass("wcf-bump-remove-from-cart wcf-bump-add-to-cart"),a.text(e.data("add")))),e.is(":checked")?d[i]={id:c,price:t.cartflows_data.total_product_price}:delete d[i],p("[name=_wcf_bump_products]").val(JSON.stringify(d))},error(){p(".woocommerce-checkout-review-order-table").unblock()}}),f=!1})}p(document).on("click",".wcf-bump-order-cb-button",function(){const t=p(this),e=t.closest(".wcf-bump-order-action"),c=e.find('input[type="checkbox"]');t.hasClass("wcf-bump-add-to-cart")?(c.attr("checked",!0),t.text(t.data("adding"))):(c.attr("checked",!1),t.text(t.data("removing"))),e.find(".wcf-bump-order-cb").trigger("change")}),0<p(".wcf-embed-checkout-form-two-step").length&&c(),p(document).on("wcf_cart_data_restored",function(t,e){"yes"===cartflows.is_product_options&&e&&p(".wcf-qty-row").each(function(){const t=p(this).data("options");t&&t.unique_id in e&&(t.cart_item_key=e[t.unique_id],p(this).attr("data-options",JSON.stringify(t)))})}),p(".wcf-qty-selection-btn").click(function(t){t.preventDefault();const e=p(this).parents(".wcf-qty").find(".wcf-qty-selection"),c=e.attr("min");var o=parseInt(e.val(),10);p(t.target).hasClass("wcf-qty-increment")?e.val(o+1):e.val(o<=c?c:o-1),p(".wcf-qty-selection").trigger("change")})})}(jQuery);
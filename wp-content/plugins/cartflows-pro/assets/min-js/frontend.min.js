!function(b){function e(){b('a[href*="wcf-up-offer-yes"]').each(function(e){const t=b(this);0===e?t.attr("id","wcf-upsell-offer"):t.attr("id","wcf-upsell-offer-"+e)}),b('a[href*="wcf-down-offer-yes"]').each(function(e){const t=b(this);0===e?t.attr("id","wcf-downsell-offer"):t.attr("id","wcf-downsell-offer-"+e)}),b(document).on("click",'a[href*="wcf-up-offer"], a[href*="wcf-down-offer"]',function(e){e.preventDefault();const t=b(this),a=!!t.attr("disabled");if(a)return!1;t.attr("disabled",!0);const r=t.attr("href"),o=cartflows_offer.step_id,n=cartflows_offer.product_id,c=cartflows_offer.order_id,i=cartflows_offer.order_key,_=cartflows.current_flow;let s="yes",f="upsell",d=0,l=0;if(-1!==r.indexOf("wcf-up-offer")&&(f="upsell",s=-1!==r.indexOf("wcf-up-offer-yes")?"yes":"no"),-1!==r.indexOf("wcf-down-offer")&&(f="downsell",s=-1!==r.indexOf("wcf-down-offer-yes")?"yes":"no"),"yes"===s){const m=b(".wcf-offer-product-variation");if(0<m.length){const u=m.find(".variations_form"),y=u.find("input.variation_id");if(d=parseInt(y.val()),0<b(".var_not_selected").length||""===d||0===d)return u.find(".variations select").each(function(){0===b(this).val().length&&b(this).addClass("var_not_selected")}),b([document.documentElement,document.body]).animate({scrollTop:u.find(".variations select").offset().top-100},1e3),!1}}if("yes"!==cartflows_offer.skip_offer||"yes"!==s){b("body").trigger("wcf-show-loader",s),action="yes"===s?"wcf_"+f+"_accepted":"wcf_"+f+"_rejected";const g=b(".wcf-offer-product-quantity");if(0<g.length){const v=g.find('input[name="quantity"]');e=parseInt(v.val());0<e&&(l=e)}const h={action:"",offer_action:s,offer_type:f,step_id:o,product_id:n,variation_id:d,input_qty:l,order_id:c,order_key:i,flow_id:_,stripe_sca_payment:!1,stripe_intent_id:"",_nonce:""};if("yes"===s)if("stripe"===cartflows_offer.payment_method)h.action="wcf_stripe_sca_check",h._nonce=cartflows_offer.wcf_stripe_sca_check_nonce,b.ajax({url:cartflows.ajax_url,data:h,dataType:"json",type:"POST",success(e){if(e.hasOwnProperty("intent_secret")){const t=Stripe(e.stripe_pk);t.handleCardPayment(e.intent_secret).then(function(e){if(e.error)throw e.error;"requires_capture"!==e.paymentIntent.status&&"succeeded"!==e.paymentIntent.status||(h.action=action,h.stripe_sca_payment=!0,h.stripe_intent_id=e.paymentIntent.id,j(h))}).catch(function(){window.location.reload()})}else h.action=action,j(h)}});else if("mollie_wc_gateway_creditcard"===cartflows_offer.payment_method||"mollie_wc_gateway_ideal"===cartflows_offer.payment_method){var w=h,e=cartflows_offer.payment_method;if("mollie_wc_gateway_creditcard"===e){w.action="wcf_mollie_creditcard_process";w._nonce=cartflows_offer.wcf_mollie_creditcard_process_nonce}if("mollie_wc_gateway_ideal"===e){w.action="wcf_mollie_ideal_process";w._nonce=cartflows_offer.wcf_mollie_ideal_process_nonce}b.ajax({url:cartflows.ajax_url,data:w,dataType:"json",type:"POST",success(e){console.log(e);if("success"===e.result)window.location.href=e.redirect;else{w.action=action;j(w)}}})}else"ppcp-gateway"===cartflows_offer.payment_method?(p=h,cartflows_offer.payment_method,p.action="wcf_create_paypal_payments_order",p._nonce=cartflows_offer.wcf_create_paypal_order_nonce,b.ajax({url:cartflows.ajax_url,data:p,dataType:"json",type:"POST",success(e){"success"===e.status?window.location.href=e.redirect:(p.action="wcf_"+p.offer_type+"_accepted",j(p))}})):"cpsw_stripe"===cartflows_offer.payment_method?(h.action="wcf_cpsw_create_payment_intent",h._nonce=cartflows_offer.wcf_cpsw_create_payment_intent_nonce,b.ajax({url:cartflows.ajax_url,data:h,dataType:"json",type:"POST",success(e){if(e.hasOwnProperty("client_secret")&&""!==e.client_secret){const t=Stripe(e.cpsw_pk);t.confirmCardPayment(e.client_secret).then(function(e){if(e.error)throw e.error;"requires_capture"!==e.paymentIntent.status&&"succeeded"!==e.paymentIntent.status||(h.action=action,h.cpsw_intent_id=e.paymentIntent.id,h.cpsw_payment_method=e.paymentIntent.payment_method,j(h))}).catch(function(){window.location.reload()})}else h.action=action,j(h)}})):"woocommerce_payments"===cartflows_offer.payment_method?(h.action="wcf_woop_create_payment_intent",h.wcf_wc_payment_nonce=cartflows_offer.wcf_woop_create_payment_intent_nonce,b.ajax({url:cartflows.ajax_url,data:h,dataType:"json",type:"POST",success(e){if(e.hasOwnProperty("client_secret")&&""!==e.client_secret&&"succeeded"!==e.status){const t=Stripe(e.client_public);t.confirmCardPayment(e.client_secret).then(function(e){if(e.error)throw e.error;"requires_capture"!==e.paymentIntent.status&&"succeeded"!==e.paymentIntent.status||(h.action=action,h.woop_intent_id=e.paymentIntent.id,h.woop_payment_method=e.paymentIntent.payment_method,j(h))}).catch(function(){window.location.reload()})}else h.action=action,h.woop_intent_id=e.client_intend,j(h)}})):(h.action=action,j(h));else h.action=action,j(h);var p;return!1}})}function t(){const e=jQuery(".woocommerce-product-gallery");if(0<e.length&&1<=e.find(".woocommerce-product-gallery__image").length){const t=jQuery(".woocommerce-product-gallery").flexslider({animation:"slide",animationLoop:!1,controlNav:"thumbnails",selector:".slides .woocommerce-product-gallery__image",directionNav:!1}),s=(b(window).on("load",function(){t.trigger("resize")}),b(".variations_form"));if(0<s.length){const a=function(n){const e=s,t=b(".woocommerce-product-gallery"),a=t.find(".flex-control-nav");if(n&&n.image&&n.image.src&&1<n.image.src.length){0<a.find('li img[data-o_src="'+n.image.gallery_thumbnail_src+'"]').length&&f();const r=a.find('li img[src="'+n.image.gallery_thumbnail_src+'"]');if(0<r.length)return r.trigger("click"),e.attr("current-image",n.image_id),void window.setTimeout(function(){b(window).trigger("resize"),t.trigger("woocommerce_gallery_init_zoom")},20);const o=t.find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),c=o.find(".wp-post-image"),i=o.find("a").eq(0),_=(c.wc_set_variation_attr("src",n.image.src),c.wc_set_variation_attr("height",n.image.src_h),c.wc_set_variation_attr("width",n.image.src_w),c.wc_set_variation_attr("srcset",n.image.srcset),c.wc_set_variation_attr("sizes",n.image.sizes),c.wc_set_variation_attr("title",n.image.title),c.wc_set_variation_attr("data-caption",n.image.caption),c.wc_set_variation_attr("alt",n.image.alt),c.wc_set_variation_attr("data-src",n.image.full_src),c.wc_set_variation_attr("data-large_image",n.image.full_src),c.wc_set_variation_attr("data-large_image_width",n.image.full_src_w),c.wc_set_variation_attr("data-large_image_height",n.image.full_src_h),o.wc_set_variation_attr("data-thumb",n.image.src),a.find("li:eq(0) img"));_.wc_set_variation_attr("src",n.image.gallery_thumbnail_src),i.wc_set_variation_attr("href",n.image.full_src)}else f();window.setTimeout(function(){b(window).trigger("resize");{var t=n;const a=s,r=b(".woocommerce-product-gallery"),o=t&&t.image_id?t.image_id:"";let e=!1;return a.attr("current-image")!==o&&(e=!0),a.attr("current-image",o),void(e&&r.flexslider(0))}},20)},f=function(){const e=b(".woocommerce-product-gallery"),t=e.find(".flex-control-nav"),a=t.find("li:eq(0) img"),r=e.find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),o=r.find(".wp-post-image"),n=r.find("a").eq(0);o.wc_reset_variation_attr("src"),o.wc_reset_variation_attr("width"),o.wc_reset_variation_attr("height"),o.wc_reset_variation_attr("srcset"),o.wc_reset_variation_attr("sizes"),o.wc_reset_variation_attr("title"),o.wc_reset_variation_attr("data-caption"),o.wc_reset_variation_attr("alt"),o.wc_reset_variation_attr("data-src"),o.wc_reset_variation_attr("data-large_image"),o.wc_reset_variation_attr("data-large_image_width"),o.wc_reset_variation_attr("data-large_image_height"),r.wc_reset_variation_attr("data-thumb"),a.wc_reset_variation_attr("src"),n.wc_reset_variation_attr("href")};b(".variations_form").on("found_variation",function(e,t){a(t)})}}}function r(){0<b(".wcf-offer-product-quantity").length&&b(".wcf-offer-product-quantity .qty").on("change",function(){var e=b(this).val();b(".wcf-offer-product-quantity .qty").val(e)}),0<b(".wcf-offer-product-variation .variations select").length?(b(".wcf-variable-price-range").show().siblings().remove(),b(".wcf-offer-product-variation .variations select").on("change",function(){const e=b(this);var t=e.data("attribute_name");if(0!==e.length){const a=e.val();b('.wcf-offer-product-variation [data-attribute_name ="'+t+'"]').each(function(){b(this).val(a),""===a||0===a?b(this).addClass("var_not_selected"):b(this).removeClass("var_not_selected")})}}),b(".variations_form").on("found_variation",function(e,t){const a=cartflows_offer.discount_type,r=cartflows_offer.discount_value,o=cartflows_offer.currency_symbol,n=t.display_price;let c=t.display_price,i=(0<r&&("discount_percent"===a?c-=c*r/100:"discount_price"===a&&(c-=r)),'<span class="wcf-single-variation-price">');i=n!==c?(i=(i=(i+='<span class="wcf-regular-price del">')+(o+n.toFixed(2)))+'</span><span class="wcf-discount-price">')+(o+c.toFixed(2))+"</span>":(i+='<span class="wcf-regular-price">')+(o+n.toFixed(2))+"</span>",i+="</span>",b(".wcf-offer-price").html(i)})):(b(".wcf-variable-price-range").remove(),b(".wcf-offer-price-inner").show()),t()}const o={getUrlParameter(e){const t=decodeURIComponent(window.location.search.substring(1)),a=t.split("&");let r,o;for(o=0;o<a.length;o++)if((r=a[o].split("="))[0]===e)return void 0===r[1]||r[1]},is_doing_offer_ajax:!1},n=function(e){var t;e.offer_action&&(t={action:e.action,flow_id:e.flow_id,input_qty:e.input_qty,offer_action:e.offer_action,offer_type:e.offer_type,order_id:e.order_id,product_id:e.product_id,step_id:e.step_id,variation_id:e.variation_id},document.dispatchEvent(new CustomEvent(e.action,{bubbles:!0,detail:t})))},j=function(r){r._nonce=cartflows_offer[r.action+"_nonce"],o.is_doing_offer_ajax||(o.is_doing_offer_ajax=!0,b.ajax({url:cartflows.ajax_url,data:r,dataType:"json",type:"POST",success(e){var t=e.message,a="wcf-payment-"+e.status;n(r),b("body").trigger("wcf-update-msg",[t,a]),o.is_doing_offer_ajax=!1,setTimeout(function(){window.location.href=e.redirect},600)}}))};b(window).on("elementor/frontend/init",function(){elementorFrontend.hooks.addAction("frontend/element_ready/offer-product-image.default",t)});b(function(){if(b("body").on("wcf-show-loader",function(e,t){"no"===t&&(jQuery(".wcf-note-yes").hide(),jQuery(".wcf-note-no").show(),jQuery(".wcf-process-msg").hide()),b(".wcf-loader-bg").addClass("show")}),b("body").on("wcf-hide-loader",function(){b(".wcf-loader-bg").removeClass("show")}),b("body").on("wcf-update-msg",function(e,t,a){b(".wcf-order-msg .wcf-process-msg").text(t).addClass(a).show()}),e(),r(),"1"!==cartflows.is_pb_preview&&(jQuery(document).ajaxComplete(function(e,t){if(t.hasOwnProperty("responseJSON")){const a=t.responseJSON.hasOwnProperty("fragments")?t.responseJSON.fragments:null;a&&a.hasOwnProperty("added_to_cart_data")&&fbq("track","AddToCart",a.added_to_cart_data.added_to_cart),"enable"===cartflows.fb_setting.facebook_pixel_add_payment_info&&a&&a.hasOwnProperty("fb_add_payment_info_data")&&(cartflows.fb_add_payment_info_data=a.fb_add_payment_info_data)}}),jQuery(document).ajaxComplete(function(e,t,a){if(t.hasOwnProperty("responseJSON")){var r=cartflows.ga_setting,o=r.enable_add_to_cart,r=r.enable_add_payment_info;if(cartflows.is_checkout_page){const n=t.responseJSON.hasOwnProperty("fragments")?t.responseJSON.fragments:null;a.hasOwnProperty("data")&&-1!==a.data.indexOf("action=wcf_bump_order_process")&&("enable"===o&&(n&&n.hasOwnProperty("ga_added_to_cart_data")&&gtag("event","add_to_cart",JSON.parse(n.ga_added_to_cart_data.add_to_cart)),n&&n.hasOwnProperty("ga_remove_to_cart_data")&&gtag("event","remove_from_cart",JSON.parse(n.ga_remove_to_cart_data.remove_from_cart))),"enable"===r&&n&&n.hasOwnProperty("ga_add_payment_info_data")&&(cartflows.add_payment_info_data=n.ga_add_payment_info_data))}}})),"undefined"!=typeof cartflows_offer){let e="";o.getUrlParameter("wcf-mollie-return")&&("mollie_wc_gateway_creditcard"===cartflows_offer.payment_method&&(e=cartflows_offer.wcf_mollie_creditcard_process_nonce),"mollie_wc_gateway_ideal"===cartflows_offer.payment_method&&(e=cartflows_offer.wcf_mollie_ideal_process_nonce),a={action:"wcf_"+(a=cartflows_offer.offer_type)+"_accepted",offer_action:"yes",offer_type:a,step_id:cartflows_offer.step_id,product_id:cartflows_offer.product_id,order_id:cartflows_offer.order_id,order_key:cartflows_offer.order_key,flow_id:cartflows.current_flow,stripe_sca_payment:!1,stripe_intent_id:"",_nonce:e},j(a))}if("undefined"!=typeof cartflows_offer){var a=o.getUrlParameter("wcf-ppcp-return");let t;a&&(t=cartflows_offer.wcf_capture_paypal_order_nonce,a={action:"wcf_capture_paypal_order",step_id:cartflows_offer.step_id,order_id:cartflows_offer.order_id,_nonce:t},b("body").trigger("wcf-show-loader","yes"),b.ajax({url:cartflows.ajax_url,data:a,dataType:"json",type:"POST",success(e){if("success"===e.status){e=cartflows_offer.offer_type;const data={action:"wcf_"+e+"_accepted",offer_action:"yes",offer_type:e,step_id:cartflows_offer.step_id,product_id:cartflows_offer.product_id,order_id:cartflows_offer.order_id,order_key:cartflows_offer.order_key,flow_id:cartflows.current_flow,stripe_sca_payment:!1,stripe_intent_id:"",_nonce:t};j(data)}else data.action=data.action="wcf_"+data.offer_type+"_accepted",j(data)}}))}})}(jQuery);
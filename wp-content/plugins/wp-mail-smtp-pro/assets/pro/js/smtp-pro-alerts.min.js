"use strict";var WPMailSMTP=window.WPMailSMTP||{};WPMailSMTP.Admin=WPMailSMTP.Admin||{},WPMailSMTP.Admin.Alerts=WPMailSMTP.Admin.Alerts||function(t,o){var a={init:function(){o(a.ready)},ready:function(){a.bindActions(),a.insertRemoveConnectionButtons(),a.toggleTestAlertsButton()},bindActions:function(){o(".wp-mail-smtp-tab-alerts").on("click",".js-wp-mail-smtp-setting-alert-add-connection",a.addConnection).on("click",".js-wp-mail-smtp-setting-alert-remove-connection",a.removeConnection).on("change",".js-wp-mail-smtp-setting-alert-enabled",a.toggleAlertSettings).on("change",".js-wp-mail-smtp-setting-alert-enabled",a.toggleTestAlertsButton).on("click","#js-wp-mail-smtp-btn-test-alerts",a.submitTestAlerts)},toggleAlertSettings:function(){var t=o(this).closest(".wp-mail-smtp-setting-row-alert").find(".wp-mail-smtp-setting-row-alert-options"),n=t.find(".wp-mail-smtp-setting-field input");o(this).is(":checked")?(t.show(),n.prop("required",!0)):(t.hide(),n.prop("required",!1))},addConnection:function(t){t.preventDefault();var n=o(this).closest(".wp-mail-smtp-setting-row-alert-options"),e=o(this).closest(".wp-mail-smtp-setting-row"),i=o(this).data("provider"),s=n.find(".wp-mail-smtp-setting-row-alert-connection-options").length,t=wp_mail_smtp_alerts.providers[i].connection_options_tmpl,i=wp_mail_smtp_alerts.providers[i].max_connections_count,t=o(t.replaceAll("%%index%%",s));1===s&&a.insertRemoveConnectionButton(n.find(".wp-mail-smtp-setting-row-alert-connection-options")),a.insertRemoveConnectionButton(t),e.before(t),s+1===i&&o(this).prop("disabled",!0)},removeConnection:function(){var t=o(this).closest(".wp-mail-smtp-setting-row-alert-options"),n=t.find(".js-wp-mail-smtp-setting-alert-add-connection"),e=n.data("provider"),i=wp_mail_smtp_alerts.providers[e].max_connections_count;o(this).closest(".wp-mail-smtp-setting-row-alert-connection-options").remove();e=t.find(".wp-mail-smtp-setting-row-alert-connection-options").length;1===e&&t.find(".js-wp-mail-smtp-setting-alert-remove-connection").remove(),e<i&&n.prop("disabled",!1)},insertRemoveConnectionButton:function(t){t.find(".wp-mail-smtp-setting-field").first().append('<i class="js-wp-mail-smtp-setting-alert-remove-connection dashicons dashicons-trash"></i>')},insertRemoveConnectionButtons:function(){o(".wp-mail-smtp-setting-row-alert-options").each(function(){var t=o(this).find(".wp-mail-smtp-setting-row-alert-connection-options");1<t.length&&t.each(function(){a.insertRemoveConnectionButton(o(this))})})},toggleTestAlertsButton:function(){var t=o(".wp-mail-smtp-tab-alerts .js-wp-mail-smtp-setting-alert-enabled:checked").length,n=o("#js-wp-mail-smtp-btn-test-alerts");0<t?n.prop("disabled",!1):n.prop("disabled",!0)},submitTestAlerts:function(){WPMailSMTP.Admin.Settings.pluginSettingsChanged?o.confirm({backgroundDismiss:!0,escapeKey:!0,animationBounce:1,closeIcon:!0,type:"blue",icon:a.getModalIcon("info-circle-blue"),title:wp_mail_smtp_alerts.texts.alert_title,content:wp_mail_smtp_alerts.texts.alert_content,buttons:{confirm:{text:wp_mail_smtp_alerts.texts.ok,btnClass:"btn-confirm",keys:["enter"]}}}):o.post(ajaxurl,{action:"wp_mail_smtp_ajax",nonce:wp_mail_smtp.nonce,task:"test_alerts"}).then(function(){t.location.replace(t.location.href)})},getModalIcon:function(t){return'"></i><img src="'+wp_mail_smtp_alerts.plugin_url+"/assets/images/font-awesome/"+t+'.svg" style="width: 40px; height: 40px;" alt=""><i class="'}};return a}((document,window),jQuery),WPMailSMTP.Admin.Alerts.init();
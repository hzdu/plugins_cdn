!function(e){var a=revslider_mousetrap_addon.bricks,t={},s=!1,l="revslider-mousetrap-addon";function o(e){if(e||i(RVS.selLayers[0])){var a={calcShrink:!1,key:"x",index:"v",uid:RVS.selLayers[0],iii:!0,number:!0,shrink:!0};RVS.F.iUHelp(jQuery.extend(!0,{l:RVS.L[RVS.selLayers[0]].addOns[l].offset.x,p:RVS.selLayers[0]+".addOns."+l+".offset.x."},a)),RVS.F.iUHelp(jQuery.extend(!0,{l:RVS.L[RVS.selLayers[0]].addOns[l].offset.y,p:RVS.selLayers[0]+".addOns."+l+".offset.y."},a)),RVS.F.iUHelp(jQuery.extend(!0,{l:RVS.L[RVS.selLayers[0]].addOns[l].follow.radius,p:RVS.selLayers[0]+".addOns."+l+".follow.radius."},a))}}function i(e){return"#form_layer_revslider-mousetrap-addon"===RVS.eMode.menu&&"layer"===RVS.eMode.top&&void 0!==e&&void 0!==RVS.L[e].addOns[l]&&"disabled"!==RVS.L[e].addOns[l].follow.mode}function r(){t.forms.origin.detach(),i(RVS.selLayers[0])&&(RVS.H[RVS.selLayers[0]].w.append(t.forms.origin),n(!0))}function n(e,a){(e||i(RVS.selLayers[0]))&&(t.forms.origin[0].style.left=parseInt(RVS.L[RVS.selLayers[0]].addOns[l].offset.x[RVS.screen].v,0)+"px",t.forms.origin[0].style.top=parseInt(RVS.L[RVS.selLayers[0]].addOns[l].offset.y[RVS.screen].v,0)+"px",!0!==a&&o(!0))}function d(e,a){return void 0===e?a:e}function p(e){if(null!=RVS.L[e]){RVS.L[e].addOns[l]=d(RVS.L[e].addOns[l],{}),RVS.L[e].addOns[l].follow=d(RVS.L[e].addOns[l].follow,{mode:"disabled",olayer:[99999,99999,99999,99999,99999],delay:0,ease:"none",pointer:!0,radius:RVS.F.cToResp({default:0}),blockx:!1,blocky:!1}),"disabled"===RVS.L[e].addOns[l].follow&&(RVS.L[e].addOns[l].follow={mode:"disabled",olayer:[99999,99999,99999,99999,99999],delay:0,ease:"none",pointer:!0,radius:RVS.F.cToResp({default:0}),blockx:!1,blocky:!1}),RVS.L[e].addOns[l].follow.olayer=d(RVS.L[e].addOns[l].follow.olayer,[]),"object"!=typeof RVS.L[e].addOns[l].follow.olayer&&(RVS.L[e].addOns[l].follow.olayer=[RVS.L[e].addOns[l].follow.olayer,99999,99999,99999,99999]),RVS.L[e].addOns[l].revert=d(RVS.L[e].addOns[l].revert,{use:!1,speed:0,ease:"none"}),RVS.L[e].addOns[l].offset=d(RVS.L[e].addOns[l].offset,{x:RVS.F.cToResp({default:0}),y:RVS.F.cToResp({default:0})}),RVS.L[e].addOns[l].follow.radius=d(RVS.L[e].addOns[l].follow.radius,RVS.F.cToResp({default:0})),RVS.L[e].addOns[l].rules=d(RVS.L[e].addOns[l].rules,{speed:400,ease:"none",rx:{min:0,max:0,axis:"none",calc:"distance",offset:"0%"},ry:{min:0,max:0,axis:"none",calc:"distance",offset:"0%"},rz:{min:0,max:0,axis:"none",calc:"distance",offset:"0%"},sx:{min:0,max:0,axis:"none",calc:"distance",offset:"0%"},sy:{min:0,max:0,axis:"none",calc:"distance",offset:"0%"},op:{min:0,max:0,axis:"none",calc:"distance",offset:"0%"}});var s='<option value="99999">'+a.notused+"</option>";for(var o in RVS.L){if(!RVS.L.hasOwnProperty(o)||"top"===o||"bottom"==o||"middle"===o||e==o)continue;s+='<option value="'+o+'">'+RVS.L[o].alias+"</option>"}for(o=0;o<5;o++)t.forms.olayerlist[o][0].innerHTML=s,t.forms.olayerlist[o][0].val=RVS.L[e].addOns[l].follow.olayer[o],t.forms.olayerlist[o].ddTP({placeholder:"Select From List"})}}RVS.DOC=void 0===RVS.DOC?e(document):RVS.DOC,RVS.DOC.on("extendLayerActionGroups",(function(){if(!s&&!RVS.S.ovMode){document.getElementById("layer_action_extension_wrap").innerHTML+="",e("#layer_action_extension_wrap .input_with_presets").each((function(){RVS.F.prepareOneInputWithPresets(this)})),RVS.F.createActionGroup({icon:"my_location",id:"layeraction_group_layer",actions:[{val:"mtrap_follow",alias:a.mousetrap_start,inputs:"#la_settings_layertarget",layerTarget:!0},{val:"mtrap_unfollow",alias:a.mousetrap_end,inputs:"#la_settings_layertarget",layerTarget:!0}]}),s=!0}})),RVS.DOC.on(l+"_init",(function(){t.isActive=RVS.SLIDER.settings.addOns[l].enable,t.isActive&&function(){var e=RVS.SLIDER.slideIDs;for(var a in e){if(e.hasOwnProperty(a))e[a].toString().search("static")}}(),!t.initialised&&t.isActive&&(RVS.DOC.on("SceneUpdatedAfterRestore.mousetrap",(function(){n()})),RVS.DOC.on("sliderSizeChanged",(function(){n(void 0,!0)})),RVS.DOC.on("selectLayersDone.mousetrap",(function(){p(RVS.selLayers[0]),r()})),RVS.DOC.on("click","#mousetrap_customs",(function(){RVS.F.RSDialog.create({modalid:"rbm_mousetrap",bgopacity:.6}),RVS.F.updateEasyInputs({container:jQuery("#rbm_mousetrap"),path:RVS.S.slideId+".layers.",trigger:"init",multiselection:!0})})),RVS.DOC.on("click","#rbm_mousetrap .rbm_close",(function(){RVS.F.RSDialog.close()})),RVS.F.addOnContainer.create({slug:l,icon:"my_location",title:a.mousetrap,alias:a.mousetrap,slider:!1,slide:!1,layer:!0}),t.forms={slidergeneral:e("#form_slidergeneral_"+l),slidegeneral:e("#form_slidegeneral_"+l),layergeneral:e("#form_layerinner_"+l),module:e("#form_module_"+l),layer:e("#form_layer_"+l),slide:e("form_slide_"),layericon:e("#gst_layer_"+l),origin:jQuery('<div id="mousetrap_origin_cross"><i class="material-icons">my_location</i></div>')},function(){var s,o;s='<div class="form_inner_header"><i class="material-icons">my_location</i>'+a.mousesettings+"</div>",s+='<div class="collapsable" style="display:block !important">',s+="\t\t<label_a>"+a.listener+'</label_a><select id="mousetrap_follow" class="layerinput tos2 nosearchbox easyinit"  data-show=".mousetrap_layer_*val*" data-hide=".mousetrap_layer_form" data-r="addOns.'+l+'.follow.mode">',s+='\t\t\t<option value="disabled">'+a.disabled+"</option>",s+='\t\t\t<option value="slider">'+a.onslider+"</option>",s+='\t\t\t<option value="self">'+a.self+"</option>",s+='\t\t\t<option value="olayer">'+a.onotherlayer+"</option>",s+='\t\t\t<option value="events">'+a.events+"</option>",s+="\t\t</select>",s+='\t\t<div class="mousetrap_layer_form mousetrap_layer_olayer">';for(var i=0;i<5;i++)s+="\t\t\t<label_a>"+a.sensorlayer+'</label_a><select id="mousetrap_olayer_'+i+'" class="layerinput tos2 nosearchbox easyinit" data-r="addOns.'+l+".follow.olayer."+i+'"></select>';s+='\t\t\t<div class="div15"></div>',s+="\t\t</div>",s+='\t\t<div class="mousetrap_layer_form mousetrap_layer_slider mousetrap_layer_ranges mousetrap_layer_events mousetrap_layer_olayer mousetrap_layer_self">',s+='\t\t\t<longoption><label_icon class="ui_x"></label_icon><label_a>'+a.origins+'</label_a><input class="layerinput valueduekeyboard  easyinit callEvent" data-evt="updateMouseTrapOrigin" data-allowed="px" data-responsive="true" data-numeric="true" data-r="addOns.'+l+'.offset.x.#size#.v" data-min="-3000" data-max="3000" type="text" id="mousetrack_offset_x"></longoption>',s+='\t\t\t<longoption><label_icon class="ui_y"></label_icon><label_a>'+a.origins+'</label_a><input class="layerinput valueduekeyboard  easyinit callEvent" data-evt="updateMouseTrapOrigin" data-allowed="px" data-responsive="true" data-numeric="true" data-r="addOns.'+l+'.offset.y.#size#.v" data-min="-3000" data-max="3000" type="text" id="mousetrack_offset_y"></longoption>',s+="\t\t</div>",s+="</div>",s+='<div class="mousetrap_layer_form mousetrap_layer_slider mousetrap_layer_ranges mousetrap_layer_events mousetrap_layer_olayer">',s+='\t<div class="form_inner_header"><i class="material-icons">settings_ethernet</i>'+a.limitations+"</div>",s+='\t<div class="collapsable" style="display:block !important">',s+='\t\t<longoption><label_icon class="ui_selectable"></label_icon><label_a>'+a.hidemouse+'</label_a><input type="checkbox" class="layerinput easyinit" data-r="addOns.'+l+'.follow.pointer"></longoption>',s+='\t\t<longoption><label_icon class="ui_x"></label_icon><label_a>'+a.blockx+'</label_a><input type="checkbox" class="layerinput easyinit" data-r="addOns.'+l+'.follow.blockx"></longoption>',s+='\t\t<longoption><label_icon class="ui_y"></label_icon><label_a>'+a.blocky+'</label_a><input type="checkbox" class="layerinput easyinit" data-r="addOns.'+l+'.follow.blocky"></longoption>',s+='\t\t<longoption><label_icon class="ui_fit"></label_icon><label_a>'+a.moveradius+'</label_a><input type="text" class="layerinput easyinit callEvent" id="mousetrap_follow_radius" data-evt="updateMouseTrapRadius" data-numeric="true" data-allowed="px" data-min="0" data-max="10000" data-r="addOns.'+l+'.follow.radius.#size#.v"></longoption>',s+="\t</div>",s+="</div>",s+='<div class="mousetrap_layer_form mousetrap_layer_slider mousetrap_layer_ranges mousetrap_layer_events mousetrap_layer_olayer mousetrap_layer_self">',s+='\t<div class="form_inner_header"><i class="material-icons">all_out</i>'+a.animation+"</div>",s+='\t<div class="collapsable" style="display:block !important">',s+="\t\t<label_a>"+a.delay+'</label_a><input type="text" class="layerinput easyinit" data-numeric="true" data-allowed="ms" data-min="0" data-max="10000" data-r="addOns.'+l+'.follow.delay">',s+="\t\t<label_a>"+a.easing+'</label_a><select id="mousetrap_layer_delay_ease" class="layerinput tos2 nosearchbox easyinit easingSelect" data-r="addOns.'+l+'.follow.ease"></select>',s+='\t\t<div class="div15"></div>',s+='\t\t<div class="basic_action_button fullbutton" id="mousetrap_customs"><i class="material-icons">settings</i>'+a.customsettings+"</div>",s+="\t</div>",s+='\t<div class="form_inner_header"><i class="material-icons">settings_backup_restore</i>'+a.revertit+"</div>",s+='\t<div class="collapsable" style="display:block !important">',s+="\t\t\t<label_a>"+a.revert+'</label_a><input type="checkbox" class="layerinput easyinit" data-r="addOns.'+l+'.revert.use" data-showhide="#mousetrap_revert_details" data-showhidedep="true"><span class="linebreak"></span>',s+='\t\t\t<div id="mousetrap_revert_details">',s+="\t\t\t\t<label_a>"+a.speed+'</label_a><input type="text" class="layerinput easyinit" data-numeric="true" data-allowed="ms" data-min="0" data-max="10000" data-r="addOns.'+l+'.revert.speed">',s+="\t\t\t\t<label_a>"+a.easing+'</label_a><select id="mousetrap_layer_revert_ease" class="layerinput tos2 nosearchbox easyinit easingSelect" data-r="addOns.'+l+'.revert.ease"></select>',s+="\t\t\t</div>",s+="\t</div>",s+="</div>",t.forms.layergeneral.append(e(s)),o='<div class="_TPRB_ rb-modal-wrapper" data-modal="rbm_mousetrap">',o+='\t<div class="rb-modal-inner">',o+='\t\t<div class="rb-modal-content">',o+='\t\t\t<div id="rbm_mousetrap" class="rb_modal form_inner">',o+='\t\t\t\t<div class="rbm_header"><i class="rbm_symbol material-icons">settings</i><span class="rbm_title">'+a.customsettings+'</span><i class="rbm_close material-icons">close</i></div>',o+='\t\t\t\t<div class="rbm_content">',o+='\t\t\t\t\t<div id="mousetrap_rules">',o+="<label_a>"+a.speed+'</label_a><input type="text" style="width:145px" class="layerinput easyinit" data-numeric="true" data-allowed="ms" data-min="0" data-max="10000" data-r="addOns.'+l+'.rules.speed">',o+="<label_a>"+a.easing+'</label_a><select id="mousetrap_layer_rotate_ease" class="layerinput tos2 nosearchbox easyinit easingSelect" data-r="addOns.'+l+'.rules.ease"></select><div class="div25"></div>',o+='\t\t\t\t\t<div style="width:142px;margin-right:10px;margin-left:100px" class="modal_fields_title">'+a.dependonaxis+'</div><div style="width:100px;margin-right:15px;" class="modal_fields_title">'+a.min+'</div><div style="width:100px;margin-right:15px;" class="modal_fields_title">'+a.max+'</div><div style="width:145px;margin-right:10px;" class="modal_fields_title">'+a.calcvaule+'</div><div style="width:100px;margin-right:15px;" class="modal_fields_title">'+a.offset+"</div>";var r={rx:"Rotation X",ry:"Rotation Y",rz:"Rotation Z",sx:"Scale X",sy:"Scale Y",op:"Opacity"};for(var i in r)o+='<div id="mousetrap_rule_'+i+'">',o+="<label_a>"+r[i]+"</label_a>",o+='<select class="layerinput tos2 nosearchbox easyinit" data-r="addOns.'+l+".rules."+i+'.axis" data-show=".mousetrap_rules_'+i+'_*val*" data-hide=".mousetrap_rules_all_'+i+'"><option value="none">'+a.none+"</option>"+("rz"===i?'<option value="both">'+a.both+'</option><option value="center">'+a.center+"</option>":"")+'<option value="horizontal">'+a.horizontal+'</option><option value="vertical">'+a.vertical+"</option></select>",o+='<div style="display:inline-block" class="mousetrap_rules_all_'+i+" mousetrap_rules_"+i+"_horizontal mousetrap_rules_"+i+'_vertical">',o+='<input type="text" style="width:100px; margin-left:15px;margin-right:15px" class="layerinput easyinit" data-numeric="true" data-allowed="" data-min="-10000" data-max="10000" data-r="addOns.'+l+".rules."+i+'.min">',o+='<input type="text" style="width:100px; margin-right:15px" class="layerinput easyinit" data-numeric="true" data-allowed="" data-min="-10000" data-max="10000" data-r="addOns.'+l+".rules."+i+'.max">',o+='<select class="layerinput tos2 nosearchbox easyinit" data-r="addOns.'+l+".rules."+i+'.calc"><option value="distance">'+a.distance+'</option><option value="direction">'+a.direction+"</option></select>",o+='<input type="text" style="width:100px; margin-left:15px;margin-right:15px" class="layerinput easyinit" data-numeric="true" data-allowed="%" data-min="0" data-max="100" data-r="addOns.'+l+".rules."+i+'.offset">',o+="</div>",o+="</div>";for(o+="\t\t\t\t\t</div>",o+="\t\t\t\t</div>",o+="\t\t\t</div>",o+="\t\t</div>",o+="\t</div>",o+="</div>",jQuery("#rb_tlw").append(e(o)),t.forms.mousetrap_rules=jQuery("#mousetrap_rules"),t.forms.olayerlist=[5],i=0;i<5;i++)t.forms.olayerlist[i]=jQuery("#mousetrap_olayer_"+i);t.forms.radius=jQuery("#mousetrap_follow_radius"),t.forms.ofx=jQuery("#mousetrack_offset_x"),t.forms.ofy=jQuery("#mousetrack_offset_y"),t.forms.layergeneral.find(".tos2.nosearchbox").ddTP({placeholder:"Select From List"}),t.forms.mousetrap_rules.find(".tos2.nosearchbox").ddTP({placeholder:"Select From List"}),t.forms.mousetrap_rules.find(".tos2.easingSelect").each((function(){RVS.F.createEaseOptions(this)})),t.forms.layergeneral.find(".tos2.easingSelect").each((function(){RVS.F.createEaseOptions(this)})),RVS.F.initOnOff()}(),RVS.DOC.on("editorViewModeChange.mousetrap",r),RVS.DOC.on("updateMouseTrapOrigin",(function(){n(!0)})),RVS.DOC.on("updateMouseTrapRadius",(function(){o(!0)})),t.forms.origin.draggable({start:function(e,a){t.forms.oldX=t.forms.ofx.val(),t.forms.oldY=t.forms.ofy.val()},drag:function(e,a){t.forms.ofx.val(a.position.left+"px"),t.forms.ofy.val(a.position.top+"px")},stop:function(e,a){RVS.F.openBackupGroup({id:"mouseTrapOrigin",txt:"MouseTrap Position",icon:"my_location"}),RVS.L[RVS.selLayers[0]].addOns[l].offset.x[RVS.screen].v=a.position.left,RVS.L[RVS.selLayers[0]].addOns[l].offset.y[RVS.screen].v=a.position.top,RVS.F.backup({path:RVS.S.slideId+".layers."+RVS.selLayers[0]+".addOns."+l+".offset.x.#size#.v",lastkey:"v",val:a.position.left,old:t.forms.oldX}),RVS.F.backup({path:RVS.S.slideId+".layers."+RVS.selLayers[0]+".addOns."+l+".offset.y.#size#.v",lastkey:"v",val:a.position.top,old:t.forms.oldY}),RVS.F.closeBackupGroup({id:"mouseTrapOrigin"}),RVS.L[RVS.selLayers[0]].addOns[l].offset.x[RVS.screen].v=a.position.left,RVS.L[RVS.selLayers[0]].addOns[l].offset.y[RVS.screen].v=a.position.top,RVS.L[RVS.selLayers[0]].addOns[l].offset.x[RVS.screen].e=!0,RVS.L[RVS.selLayers[0]].addOns[l].offset.y[RVS.screen].e=!0,o(!0)}}),function(){if("undefined"!=typeof HelpGuide&&revslider_mousetrap_addon.hasOwnProperty("help")){var a={slug:"mousetrap_addon"};e.extend(!0,a,revslider_mousetrap_addon.help),HelpGuide.add(a)}}(),t.initialised=!0),t.isActive?(e("body").addClass("mousetrap-addon-active"),function(){for(var e in RVS.L)void 0!==RVS.L[e].timeline&&p(e)}(),punchgs.TweenLite.set(t.forms.layericon,{display:"inline-block"}),"undefined"!=typeof HelpGuide&&HelpGuide.activate("mousetrap_addon")):(e("body").removeClass("mousetrap-addon-active"),punchgs.TweenLite.set(t.forms.layericon,{display:"none"}),e(t.forms.layericon).removeClass("selected"),t.forms.module.addClass("collapsed"),t.forms.layer.addClass("collapsed"),t.forms.slide.addClass("collapsed"),"undefined"!=typeof HelpGuide&&HelpGuide.deactivate("mousetrap_addon"))}))}(jQuery);
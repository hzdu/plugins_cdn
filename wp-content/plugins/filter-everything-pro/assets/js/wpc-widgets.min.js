!function($){"use strict";let a=wpcWidgets.wpcItemNum;function b(){$(".wpc-sorting-list").sortable({items:"> div.wpc-sorting-item-wrapper",delay:75,placeholder:"wpc-filter-item-shadow",refreshPositions:!0,cursor:"move",handle:".wpc-sorting-item-handle",axis:"y",update:function(b,a){c(a.item.parent(".wpc-sorting-list"))},start:function(e,b){let c=b.item,a=b.item.children(".wpc-sorting-item-top"),d=a.height()+2;a.hasClass("wpc-opened")&&(a.removeClass("wpc-opened"),c.css("max-height",d+"px"),$(this).sortable("refreshPositions"))},stop:function(b,a){a.item.css("max-height","none")}})}function c(c){let b=c.find(".wpc-sorting-item-label"),d="",e="",f=new RegExp("^"+a+"[\\d]{1,100}$");b.length>0&&b.each(function(c,b){e=(d=$(b).val()).replace(f,a+(c+1)),$(b).val(e).trigger("change")})}$(document).ready(function(){$(document).on("click",".wpc-sorting-item-title",function(){$(this).parent(".wpc-sorting-item-top").toggleClass("wpc-opened")}),$(document).on("click",".wpc-sorting-item-remove",function(){let a=$(this),b=a.parents("div.wpc-sorting-list");if(b.find(".wpc-sorting-item-wrapper").length<2)return;let d=a.parents("div.widget"),e=d.children(".widget-inside"),f=e.find(".widget-control-save"),g=e.find(".widget-id").val(),h=a.parents(".wpc-sorting-item-wrapper");h.remove(),c(b),window.wpWidgets.dirtyWidgets[g]=!0,d.addClass("widget-dirty"),f.prop("disabled",!1).val(wp.i18n.__("Save"))}),$(document).on("change",".wpc-orderby-select",function(c){let a=$(this),b=a.parents(".wpc-sorting-item-inside").find(".wpc-sorting-item-meta-key-wrapper");return"m"===a.val()||"n"===a.val()?b.addClass("wpc-opened"):b.removeClass("wpc-opened"),!0}),$(document).on("input change",".wpc-sorting-item-label",function(){let a=$(this),b=a.parents(".wpc-sorting-item-wrapper");b.parents(".wpc-sorting-list");let c=b.find(".wpc-sorting-item-title");if(""===a.val()){let d=b.index();c.text(c.data("title")+(d+1))}else(function(a,b){b.text(a.val())})(a,c)}),$(document).on("widget-added widget-updated",function(){b(),$(".wpc-help-tip").tipTip({attribute:"data-tip",fadeIn:50,fadeOut:50,delay:200,keepAlive:!0,maxWidth:"220px"})}),$(document).on("focus",".wpc-sorting-item-label",function(){let b=$(this).val(),c=new RegExp("^"+a+"[\\d]{1,100}$"),d=b.replace(c,"");$(this).val(d)}),$(document).on("click",".wpc-add-sorting-item",function(g){g.preventDefault();let d=$(this).parents(".wpc-add-sorting-item-wrapper").parent(),e=d.find(".wpc-sorting-list"),a=$(d.find(".wpc-new-sorting-item").html()),f=a.find(".wpc-sorting-item-title"),c="wpc_new_id",h=e.find(".wpc-sorting-item-wrapper").length+1,b=function(b,a){return a.replace(c,h)};a.find('[id*="'+c+'"]').attr("id",b),a.find('[for*="'+c+'"]').attr("for",b),a.find('[name*="'+c+'"]').attr("name",b),a.find('[value*="'+c+'"]').attr("value",b),f.text(f.data("title")+h),a.attr("class",b),a.find(".wpc-sorting-item-top").addClass("wpc-opened"),$("input.wpc-ballast").trigger("change"),e.append(a)}),"undefined"!=typeof elementor&&elementor.hooks.addAction("panel/widgets/wp-widget-wpc_sorting_widget/controls/wp_widget/loaded",function(a){setTimeout(function(){b(),$("input.wpc-ballast").trigger("change")},500)}),b()})}(jQuery)
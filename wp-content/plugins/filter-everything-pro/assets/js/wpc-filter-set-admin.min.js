!function($){"use strict";let a=!1;function b(a){a.fadeTo(100,0,function(){a.slideUp(100,function(){a.remove()})})}function c(b,c){let a=$("#"+b);void 0!==a&&a.before('<div class="wpc-field-notice wpc-field-notice-error"><p>'+c+"</p></div>")}function d(b){let a=b.find(".wpc-filter-head"),c=a.next(".wpc-filter-body");a.addClass("wpc-opened"),c.slideDown({duration:200,complete:function(){c.addClass("wpc-opened")}})}function e(a,d){var b,e;let h="",c,f,g,i=(b=$(".wpc-field-entity"),e=a,c=[],f="",g=["post_meta","post_meta_num","post_meta_exists"],b.length>0&&(b.each(function(){f=$(this).val(),$(this).attr("id")==e.attr("id")||g.includes(f)||c.push($(this).val())}),c)),j=function(){if(void 0!==wpcSetVars.postTypesTaxList){let a=$("#wpc_set_fields-post_type").val(),c=[],b=[];return void 0!==wpcSetVars.postTypesTaxList[a]&&$.each(wpcSetVars.postTypesTaxList[a],function(b,a){c.push(a.name)}),$.each(wpcSetVars.postTypesTaxList,function(d,e){d!==a&&$.each(e,function(d,a){!1===c.includes(a.name)&&b.push(a.name)})}),b}return[]}();return a.find("option").each(function(){"post_meta_exists"===(h=$(this).val())&&wpcSetVars.filtersPro<1||(i.includes(h)||j.includes(h)?$(this).attr("disabled","disabled"):$(this).removeAttr("disabled"))}),"disabled"!==a.find("option:selected").attr("disabled")||d||a.find("option:not([disabled]):first").prop("selected",!0).trigger("change"),!0}function f(a){let b=0;$(".wpc-new-filter-item .wpc-field-entity").each(function(){let a=$(this),c=!1;$(this).attr("id")==a.attr("id")&&(c=!0),setTimeout(function(){e(a,c)},b),b+=100})}function g(a){let b=a;return a.includes("taxonomy_")?"taxonomy_"===a.slice(0,9)&&(b=a.slice(9)):a.includes("author_")&&"author_"===a.slice(0,7)&&(b=a.slice(7)),b}function h(c){if(wpcSetVars.filtersPro<1||""===c)return!0;b($(".wpc-field-notice"));let e=$(".wpc_set_fields-wp_filter_query-wrap").children(".spinner"),d=$("#wpc_set_fields-post_type").val(),a={};a._wpnonce=$("#wpc_set_nonce").val(),a.wpPageType=$("#wpc_set_fields-wp_page_type").val(),a.postType=d,a.postId=$("#post_ID").val(),a.action="wpc_get_wp_queries",$.ajax({method:"POST",data:a,url:c,dataType:"html",beforeSend:function(){e.addClass("is-active"),$(".wpc-location-preview").attr("href",c)},complete:function(){e.removeClass("is-active")},success:function(b){let a=$(b).find("#wpc_set_fields-wp_filter_query"),c=$(b).find("#wpc_query_vars");""!==a&&a.length>0&&$("#"+wpcSetVars.wPQuerySelectId).replaceWith(a),c.length>0&&$("#wpc_query_vars").replaceWith(c)},error:function(a){}})}function i(d){let e=$(".wpc_set_fields-post_name-wrap").children(".spinner");e.addClass("is-active"),b($(".wpc-field-notice"));let f=$("#wpc_set_fields-post_type").val(),a={};a._wpnonce=$("#wpc_set_nonce").val(),a.wpPageType=d,a.postType=f,a.postId=$("#post_ID").val(),wp.ajax.post("wpc-get-set-location-terms",a).always(function(){e.removeClass("is-active")}).done(function(b){let c=$(b.html).find("#wpc_set_fields-post_name");$("#wpc_set_fields-post_name").replaceWith(c);let a=$("option:selected",$("#wpc_set_fields-post_name")).data("link");void 0!==a&&h(a)}).fail(function(a){void 0!==a&&c("wpc_set_fields-post_name",a.message)})}function j(b,c){let a;a=b.val(),c.text(a)}function k(){$(".wpc-filter-item").each(function(c,a){var b=c+1;$(a).find(".wpc-menu-order-field").attr("value",b),$(a).find(".wpc-filter-order").attr("title",b)})}function l(){$(".wpc-filter-item:not(#wpc-filter-id-apply-button)").length>0?$(".wpc-no-filters").hide():$(".wpc-no-filters").show()}function m(b){let a=b.val(),d=b.parents(".wpc-filter-item").data("fid"),c="";a.startsWith("taxonomy_pa_")&&(c=" taxonomy-product-attribute"),-1!==a.indexOf("taxonomy")&&(a="taxonomy"),$("#wpc-filter-id-"+d+" .wpc-form-fields-table").attr("class","wpc-form-fields-table wpc-filter-"+a+c)}function n(a){let b=a.val(),c=a.parents(".wpc-filter-item").data("fid");if(void 0!==wpcSetVars.filterSlugs[b]){let d=wpcSetVars.filterSlugs[b];$("#wpc_filter_fields-"+c+"-slug").val(d).attr("readonly","readonly").trigger("input")}else $("#wpc_filter_fields-"+c+"-slug").val("").removeAttr("readonly").trigger("input")}function o(b){let c=b.val(),a=b.parents(".wpc-filter-item").data("fid");c.includes("taxonomy_pa")?($("#wpc_filter_fields-"+a+'-orderby option[value="menuasc"]').removeAttr("disabled"),$("#wpc_filter_fields-"+a+'-orderby option[value="menudesc"]').removeAttr("disabled")):($("#wpc_filter_fields-"+a+'-orderby option[value="menuasc"]').attr("disabled","disabled"),$("#wpc_filter_fields-"+a+'-orderby option[value="menudesc"]').attr("disabled","disabled"))}function p(b){let c=b.val(),a=b.parents(".wpc-filter-item").data("fid");"post_meta_num"===c?($("#wpc_filter_fields-"+a+'-view option:not([value="range"])').attr("disabled","disabled"),$("#wpc_filter_fields-"+a+'-view option[value="range"]').removeAttr("disabled").prop("selected",!0)):($("#wpc_filter_fields-"+a+"-view option").removeAttr("disabled"),$("#wpc_filter_fields-"+a+"-view option:not([disabled]):first").prop("selected",!0),$("#wpc_filter_fields-"+a+'-view option[value="range"]').attr("disabled","disabled"))}function q(a){let b=a.val(),c=a.parents(".wpc-filter-item").data("fid");$("#wpc-filters-list").attr("data-posttype"),-1!==b.indexOf("taxonomy")&&$.each(wpcSetVars.postTypesTaxList,function(d,a){$.each(a,function(d,a){a.name===b&&(a.hierarchical?$("#wpc-filter-id-"+c+" .wpc-field-hierarchy-tr").show():$("#wpc-filter-id-"+c+" .wpc-field-hierarchy-tr").hide())})})}function r(c){let a=c.val(),b=c.parents(".wpc-filter-item").data("fid");"post_meta"===a||"post_meta_num"===a||"post_meta_exists"===a?$("#wpc_filter_fields-"+b+"-e_name").val("").removeAttr("readonly").parents(".wpc-field-ename-tr").show():$("#wpc_filter_fields-"+b+"-e_name").parents(".wpc-field-ename-tr").hide(),"post_meta_num"===a?$("#wpc_filter_fields-"+b+"-in_path").prop("checked",!1):$("#wpc_filter_fields-"+b+"-in_path").prop("checked",!0)}function s(e,c,d){b($(".wpc-field-notice"));let a={},f=$("#wpc_filter_fields-"+c+"-exclude");a._wpnonce=$("#wpc_set_nonce").val(),a.fid=c,a.entity=e,void 0!==d&&(a.ename=d);let g=f.parent(".wpc-after-spinner-container").prev(".spinner");g.addClass("is-active"),wp.ajax.post("wpc-load-exclude-terms",a).always(function(){g.removeClass("is-active")}).done(function(a){void 0!==a.fid&&(f.select2("destroy"),f.html(""),f.select2({width:"100%",placeholder:wpcSetVars.excludePlaceholder,data:a.terms,disabled:!1}))}).fail(function(a){})}function t(h,e,f){var d=(e=e.replace("[]","[%%index%%]")).match(/([^\[\]])+/g);if(d)for(var g=d.length,a=h,c=0;c<g;c++){var b=String(d[c]);c==g-1?"%%index%%"===b?a.push(f):a[b]=f:("%%index%%"===d[c+1]?u(a[b])||(a[b]=[]):v(a[b])||(a[b]={}),a=a[b])}}function u(a){return Array.isArray(a)}function v(a){return"object"==typeof a}$(document).ready(function(){$("form#post").on("submit",function(j){var k,f;b($(".wpc-field-notice")),b($("#message"));let g,h;if(h=(g=$(".wpc-filter-item").find(".wpc-filter-head")).next(".wpc-filter-body"),g.removeClass("wpc-opened"),h.slideUp({duration:200,complete:function(){h.removeClass("wpc-opened")}}),!a){j.preventDefault();let i,e;f=$(this),i=$("#publishing-action .spinner"),e={},i.addClass("is-active"),e.validateData=function(d){for(var c={},b=d.find("select, textarea, input").serializeArray(),a=0;a<b.length;a++)t(c,b[a].name,b[a].value);return c}(f),wp.ajax.post("wpc-validate-filters",e).always(function(){i.removeClass("is-active")}).done(function(b){a=!0,f.submit()}).fail(function(e){var f;let a=[],h="",b,g;void 0!==e.errors&&($.each(e.errors,function(e,b){void 0!==b.id?(c(b.id,b.message),h=$("#"+b.id).parents(".wpc-filter-item"),d(h),$("#"+b.id).parents(".wpc-filter-additional-fields").length>0&&function(a){a.find(".wpc-filter-additional-fields").slideDown({duration:200,complete:function(){$(this).addClass("wpc-opened")}})}(h)):a.push(b.message)}),a.length<1&&a.push("Error: Set was not saved."),f=a,b=$("form#post"),g="",$.each(f,function(b,a){g+="<p>"+a+"</p>"}),void 0!==b&&($("#message").length>0&&$("#message").remove(),b.before('<div id="message" class="error notice notice-error is-dismissible">'+g+'<button type="button" class="notice-dismiss"><span class="screen-reader-text">Dismiss this notice.</span></button></div>')))})}}),$(".wpc-add-filter").on("click",function(t){t.preventDefault();let u=$("#wpc-new-filter").html(),a=$(u),c="wpc_new_id",i=uniqId("filter_"),f=function(b,a){return a.replace(c,i)},j=$("#wpc_set_fields-apply_button_menu_order").val(),s=$("#wpc-filters-list"),v=s.find(".wpc-filter-item").length.toString(),w=$("#wpc-filter-id-apply-button");a.find('[id*="'+c+'"]').attr("id",f),a.find('[for*="'+c+'"]').attr("for",f),a.find('[name*="'+c+'"]').attr("name",f),a.data("fid",i),a.attr("id","wpc-filter-id-"+i),j===v||"-1"===j?w.before(a):s.append(a);let b=a.find(".wpc-field-entity"),h,x,y,z,A,B,C;n(b),r(b),m(b),p(b),o(b),e(b),q(b),a.find(".wpc-field-exclude").select2({width:"100%",placeholder:wpcSetVars.excludePlaceholder}),1===$(".wpc-filter-item:not(.wpc-filter-item-apply-button)").length&&b.trigger("change"),$(".wpc-help-tip").tipTip({attribute:"data-tip",fadeIn:50,fadeOut:50,delay:200,keepAlive:!0,maxWidth:"220px"}),d(a),k(),l(),h={},x=0,y="",z="",A=!1,B=!1,C=!1,$(".wpc-filter-item:not(.wpc-filter-item-apply-button)").each(function(a,b){x=$(this).data("fid"),y=$("#wpc_filter_fields-"+x+"-label").val(),y||(y=wpcSetVars.newFilter),z=$("#wpc_filter_fields-"+x+"-entity").val(),h[x]={id:x.toString(),title:y,ename:z}}),Object.keys(h).length<2||$.each(h,function(b,a){(A=$("#wpc_filter_fields-"+a.id+"-parent_filter > option[value='no']")).length>0&&(A.val("-1"),A.text(wpcSetVars.selectFilter)),$.each(h,function(b,c){a.id!==b&&(B=$("#wpc_filter_fields-"+a.id+"-parent_filter > option[value='"+b+"']")).length<1&&(C=$("<option>",{value:b,text:c.title+" ("+g(c.ename)+")"}),"post_meta_num"===c.ename&&C.attr("disabled","disabled"),$("#wpc_filter_fields-"+a.id+"-parent_filter").append(C))})})}),$(".wpc-form-fields-table:not(.wpc-filter-post_meta_num) .wpc-field-exclude, .wpc-form-fields-table:not(.wpc-filter-post_meta_exists) .wpc-field-exclude").select2({width:"100%",placeholder:wpcSetVars.excludePlaceholder}),$("body").on("click",".notice-dismiss",function(a){a.preventDefault(),b($("#message"))}),$("body").on("click",".wpc-button-link-delete",function(a){a.preventDefault(),$(this).parents(".wpc-filter-label-td").next(".wpc-filter-field-td").children(".wpc-filter-delete-wrapper").css("visibility","visible")}),$("body").on("click",".wpc-filter-delete-cancel",function(a){a.preventDefault(),b($(".wpc-field-notice")),$(this).parents(".wpc-filter-delete-wrapper").css("visibility","hidden")}),$("body").on("click",".wpc-done-action",function(a){$(this).parents(".wpc-filter-body").slideToggle(200).toggleClass("wpc-opened").children(".wpc-filter-additional-fields").removeClass("wpc-additional-opened").hide(),$(this).parents(".wpc-filter-body").prev(".wpc-filter-head").toggleClass("wpc-opened"),$(this).parents(".wpc-filter-field-td").next(".wpc-filter-field-td").find(".wpc-filter-delete-wrapper").css("visibility","hidden")}),$("body").on("click",".wpc-title-action",function(d){let b=$(this).parent(".wpc-filter-head"),a=b.next(".wpc-filter-body");b.toggleClass("wpc-opened"),a.slideToggle(200).toggleClass("wpc-opened").children(".wpc-filter-additional-fields").removeClass("wpc-additional-opened").hide(),a.find(".wpc-filter-delete-wrapper").css("visibility","hidden");let c=a.find(".wpc-more-options-toggle");c.hasClass("wpc-opened")&&c.trigger("click")}),$("body").on("click",".wpc-more-options-toggle",function(a){a.preventDefault(),$(this).text()===wpcSetVars.moreOptions?$(this).text(wpcSetVars.lessOptions):$(this).text(wpcSetVars.moreOptions),$(this).toggleClass("wpc-opened"),$(this).parents(".wpc-filter-body").find(".wpc-filter-additional-fields").slideToggle(200).toggleClass("wpc-additional-opened")}),$("body").on("change",".wpc-field-entity",function(l){var h;let a=$(this),i="",c,b;f(a),n(a),r(a),c=(h=a).val(),b=h.parents(".wpc-filter-item").data("fid"),"author_author"===c||"post_meta_exists"===c?($("#wpc_filter_fields-"+b+'-logic option[value="and"]').attr("disabled","disabled"),$("#wpc_filter_fields-"+b+'-logic option[value="or"]').prop("selected",!0)):"post_meta_num"===c?($("#wpc_filter_fields-"+b+'-logic option[value="or"]').attr("disabled","disabled"),$("#wpc_filter_fields-"+b+'-logic option[value="and"]').prop("selected",!0)):($("#wpc_filter_fields-"+b+'-logic option[value="and"]').removeAttr("disabled"),$("#wpc_filter_fields-"+b+'-logic option[value="or"]').removeAttr("disabled")),m(a),p(a),o(a),q(a);let d=$(this).val(),e=$(this).parents(".wpc-filter-item").data("fid");"post_meta"===d||"post_meta_num"===d||"post_meta_exists"===d?$("#wpc_filter_fields-"+e+"-exclude").select2({disabled:!0,width:"100%"}):s(d,e);let j=$(this).find("option:selected").text(),k=$(this).parents(".wpc-filter-item").find(".wpc-filter-head li.wpc-filter-entity");k.text(j),(i=$("#wpc_filter_fields-"+e+"-label").val())||(i=wpcSetVars.newFilter),$(".wpc-field-parent-filter option[value='"+e+"'").each(function(a,b){$(this).text(i+" ("+g(d)+")"),"post_meta_num"===d?$(this).attr("disabled","disabled"):$(this).removeAttr("disabled")})}),$("body").on("input change",".wpc-field-ename",function(){let b=$(this).val(),a=$(this).parents(".wpc-filter-item").data("fid"),c=$("#wpc_filter_fields-"+a+"-entity").val(),d="",e=wpcSetVars.filterSlugs;void 0!==e[d="post_meta_num"===c?"post_meta_num_"+b:"post_meta_exists"===c?"post_meta_exists_"+b:"post_meta_"+b]?($("#wpc_filter_fields-"+a+"-slug").val(e[d]).trigger("input"),"post_meta_num"!==c&&s(c,a,b)):($("#wpc_filter_fields-"+a+"-slug").val("").trigger("input"),$("#wpc_filter_fields-"+a+"-exclude").select2({disabled:!0,width:"100%"}))}),$("body").on("input",".wpc-field-value-step",function(){$(this).val($(this).val().replace(/,/g,".")),$(this).val($(this).val().replace(/[^\d\.]/g,""))}),$("body").on("input keydown","#wpc_set_fields-apply_button_text",function(){let a=$("#wpc-filter-id-apply-button").find(".wpc-button-apply");j($(this),a)}),$("body").on("input keydown","#wpc_set_fields-reset_button_text",function(){let a=$("#wpc-filter-id-apply-button").find(".wpc-button-reset");j($(this),a)}),$("body").on("input keydown",".wpc-field-slug",function(){let a=$(this).parents(".wpc-filter-item").find(".wpc-filter-head li.wpc-filter-slug");j($(this),a)}),$("body").on("input keydown",".wpc-field-label",function(){let c=$(this).parents(".wpc-filter-item").find(".wpc-filter-head li.wpc-filter-label");j($(this),c);let a=$(this).parents(".wpc-filter-item").data("fid"),b=$("#wpc_filter_fields-"+a+"-entity").val();b=g(b);let d=$(this).val();$(".wpc-field-parent-filter option[value='"+a+"'").each(function(a,c){$(this).text(d+" ("+b+")")})}),$("body").on("change",".wpc-field-view",function(){let b=$(this).find("option:selected").text(),c=$(this).find("option:selected").val(),a=$(this).parents(".wpc-filter-item"),d=a.find(".wpc-filter-head li.wpc-filter-view");d.text(b),["checkboxes","radio","labels"].includes(c)?a.find(".wpc-field-search-tr").show():a.find(".wpc-field-search-tr").hide()}),$(".wpc-filter-set-wrapper .wpc-filters-list").sortable({items:"> div.wpc-filter-item",delay:150,placeholder:"wpc-filter-item-shadow",refreshPositions:!0,cursor:"move",handle:".wpc-filter-order",axis:"y",update:function(a,b){k()},start:function(d,a){$(this);var b=a.item.children(".wpc-filter-head"),c=a.item.children(".wpc-filter-body");c.hasClass("wpc-opened")&&(c.removeClass("wpc-opened").hide(),b.removeClass("wpc-opened"),$(this).sortable("refreshPositions")),$(".wpc-filter-item-shadow").css("min-height",b.height()+"px")}}),$(".wpc-filter-set-wrapper .wpc-filters-list").keydown(function(a){65==a.keyCode&&(a.ctrlKey||a.metaKey)&&a.target.select()}),$(".wpc-filters-list").disableSelection(),$("body").on("click",".wpc-filter-delete",function(){b($(".wpc-field-notice"));let d=$(this).prev(".spinner");d.addClass("is-active");let a={};a._wpnonce=$("#wpc_set_nonce").val(),a.fid=$(this).data("fid"),"wpc_new_id"===a.fid&&$(this).parents(".wpc-filter-item").slideUp({duration:200,complete:function(){$(this).remove(),k(),l()}});(function(a){let b=!1;$(".wpc-field-parent-filter option[value='"+a+"'").each(function(c,d){let a=(b=$(this)).parents("select");b.is(":selected")&&a.val(a.find("option:first").val()),b.remove(),1===a.find("option").length&&((b=a.find("option:first")).val("no"),b.text(wpcSetVars.addFilter),a.val("no"))})})($(this).parents(".wpc-filter-item").data("fid")),wp.ajax.post("wpc-delete-filter",a).always(function(){d.removeClass("is-active")}).done(function(a){void 0!==a&& void 0!==a.fid&&$("#wpc-filter-id-"+a.fid).slideUp({duration:200,complete:function(){$(this).remove(),k(),l(),f()}})}).fail(function(a){void 0!==a&&c("wpc-filter-delete-wrapper-"+a.fid,a.message)})}),$("body").on("change","#wpc_set_fields-post_type",function(){if($("#wpc-filters-list").attr("data-posttype",$(this).val()),wpcSetVars.filtersPro<1)return!0;e($(".wpc-new-filter-item .wpc-field-entity")),b($(".wpc-field-notice"));let a=$("#wpc_set_fields-wp_page_type").val();void 0!==a&&i(a)}),$("body").on("change","#wpc_set_fields-wp_page_type",function(){i($(this).val())}),$("body").on("change","#wpc_set_fields-apply_button_page_type",function(){var d;let e,f,a;d=$(this).val(),e=$(".wpc_set_fields-apply_button_post_name-wrap").children(".spinner"),e.addClass("is-active"),b($(".wpc-field-notice")),f=$("#wpc_set_fields-post_type").val(),a={},a._wpnonce=$("#wpc_set_nonce").val(),a.wpPageType=d,a.postType=f,a.postId=$("#post_ID").val(),a.fieldKey="apply_button_post_name",wp.ajax.post("wpc-get-set-location-terms",a).always(function(){e.removeClass("is-active")}).done(function(a){let b=$(a.html).find("#wpc_set_fields-apply_button_post_name");$("#wpc_set_fields-apply_button_post_name").replaceWith(b)}).fail(function(a){void 0!==a&&c("wpc_set_fields-apply_button_post_name",a.message)})}),$("body").on("change","#wpc_set_fields-post_name",function(b){let a=$("option:selected",this).data("link");void 0!==a&&h(a)}),$("body").on("change",".wpc-field-parent-filter",function(){let b=$(this).val(),c=$(this).parents(".wpc-filter-item").data("fid"),a=$("#wpc-filter-id-"+c+" .wpc-field-hide-until-parent-tr");["no","-1"].includes(b)?a.removeClass("wpc-opened"):a.addClass("wpc-opened")}),$("body").on("click","#wpc_set_fields-use_apply_button",function(){$(this).prop("checked")?($("#wpc-filter-id-apply-button").addClass("wpc-opened"),$(".wpc-field-apply-button-text-tr").addClass("wpc-opened"),$(".wpc-field-apply-button-page-type-tr").addClass("wpc-opened"),$(".wpc-field-reset-button-text-tr").addClass("wpc-opened"),$(".wpc-no-filters").hide()):($("#wpc-filter-id-apply-button").removeClass("wpc-opened"),$(".wpc-field-apply-button-text-tr").removeClass("wpc-opened"),$(".wpc-field-apply-button-page-type-tr").removeClass("wpc-opened"),$(".wpc-field-reset-button-text-tr").removeClass("wpc-opened"),$(".wpc-filter-item:not(#wpc-filter-id-apply-button)").length<1&&$(".wpc-no-filters").show())});let u=$("option:selected",$("#wpc_set_fields-post_name")).data("link");if(void 0!==u&&u&&h(u),"-1"===$("#wpc_set_fields-apply_button_menu_order").val()){let v=$("#wpc-filters-list").find(".wpc-filter-item").length.toString();$("#wpc_set_fields-apply_button_menu_order").val(v)}})}(jQuery);function uniqId(c,f){void 0===c&&(c="");var b,e=function(a,b){return b<(a=parseInt(a,10).toString(16)).length?a.slice(a.length-b):b>a.length?Array(1+(b-a.length)).join("0")+a:a},d="undefined"!=typeof window?window:global;d.$locutus=d.$locutus||{};var a=d.$locutus;return a.php=a.php||{},a.php.uniqidSeed||(a.php.uniqidSeed=Math.floor(123456789*Math.random())),a.php.uniqidSeed++,b=c,b+=e(parseInt(new Date().getTime()/1e3,10),8),b+=e(a.php.uniqidSeed,5),f&&(b+=(10*Math.random()).toFixed(8).toString()),b}
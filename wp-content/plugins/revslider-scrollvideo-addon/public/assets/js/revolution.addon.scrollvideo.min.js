/**
 * @preserve
 * @name REVOLUTION 6.3+ EXTENSION - VIDEO SCROLL
 * @version: 3.0.0 (23.02.2021)
 * @requires jquery.themepunch.revolution.js
 * @author ThemePunch
 */
!function(o){var e;jQuery.fn.revolution=jQuery.fn.revolution||{},window.RevSliderScrollvideo=function(o,i){void 0!==(e=jQuery.fn.revolution)&&void 0!==o&&void 0!==o[0].id?l(o[0].id,i):o.one("revolution.slide.onloaded",(function(){void 0!==(e=jQuery.fn.revolution)&&void 0!==o&&void 0!==o[0].id&&l(o[0].id,i)}))};var l=function(o,i){e[o].scrollvideo=void 0===e[o].scrollvideo?{params:i}:e[o].scrollvideo,e[o].initEnded?(e[o].scrollvideo.video=function(o){var l;if(void 0!==e[o].layers)for(var i in e[o].layers.static)e[o].layers.static.hasOwnProperty(i)&&void 0===l&&i.indexOf("scrollvideo")>=0&&(l={index:i,layer:e[o].layers.static[i]});return l}(o),void 0!==e[o].scrollvideo.video?void 0!==e[o].scrollvideo.params&&function(o){1==e[o].slayers.length&&-1===e[o].slayers[0].className.indexOf("rs-stl-back")&&(e[o].slayers[0].className+=" rs-stl-back");e[o].scrollvideo.range={first:1,last:e[o].scrollvideo.params.last},e[o].scrollvideo.range.len=e[o].scrollvideo.range.last-e[o].scrollvideo.range.first,e[o].scrollvideo.loadedImageAmount=0,e[o].scrollvideo.currentLoadingImageAmount=0,e[o].scrollvideo.loadPrioList=[],e[o].scrollvideo.frames={},e[o].scrollvideo.imgs=[],e[o].scrollvideo.canvas=document.createElement("canvas"),e[o].scrollvideo.canvas.style.width="100%",e[o].scrollvideo.canvas.style.height="100%",e[o].scrollvideo.ctx=e[o].scrollvideo.canvas.getContext("2d"),e[o].scrollvideo.video.layer.appendChild(e[o].scrollvideo.canvas),e[o].scrollvideo.params.winoffset=void 0===e[o].scrollvideo.params.winoffset?"0%":e[o].scrollvideo.params.winoffset,e[o].scrollvideo.params.winoffsetend=void 0===e[o].scrollvideo.params.winoffsetend?"50%":e[o].scrollvideo.params.winoffsetend,e[o].scrollvideo.params.winoffset_type=(""+e[o].scrollvideo.params.winoffset).indexOf("%")>=0?"%":"px",e[o].scrollvideo.params.winoffsetend_type=(""+e[o].scrollvideo.params.winoffsetend).indexOf("%")>=0?"%":"px",e[o].scrollvideo.params.winoffset=parseInt(e[o].scrollvideo.params.winoffset,0)/("%"===e[o].scrollvideo.params.winoffset_type?100:1),e[o].scrollvideo.params.winoffsetend=parseInt(e[o].scrollvideo.params.winoffsetend,0)/("%"===e[o].scrollvideo.params.winoffsetend_type?100:1),e[o].scrollvideo.params.ver=void 0===e[o].scrollvideo.params.ver?"6.3.0":e[o].scrollvideo.params.ver,t(o),e[o].scrollvideo.framesource=void 0===e[o].scrollvideo.params.dir&&void 0!==e[o].scrollvideo.params.mp4?"video":"images",window.addEventListener("resize",(function(){clearTimeout(e[o].scrollvideo.resizetimer),e[o].scrollvideo.resizetimer=setTimeout((function(){t(o),a(o,void 0,!0)}),100)})),e[o].c.on("timeline_scroll_processed",(function(l,i){var r="%"===e[o].scrollvideo.params.winoffset_type?e.lastwindowheight*e[o].scrollvideo.params.winoffset:e[o].scrollvideo.params.winoffset,s="%"===e[o].scrollvideo.params.winoffset_type?e.lastwindowheight*e[o].scrollvideo.params.winoffsetend:e[o].scrollvideo.params.winoffsetend,d=0-(e[o].scrollProgBasics.top-r),t=e[o].scrollProgBasics.height+e.lastwindowheight-(e.lastwindowheight+s)-(e[o].module.height-(e[o].module.height>e.lastwindowheight?e[o].module.height-e.lastwindowheight:0)),c=Math.min(1,Math.max(0,d/t)),n=Math.round(e[o].scrollvideo.range.len*c)+e[o].scrollvideo.range.first;a(o,n)})),r(o),a(o,1)}(o):setTimeout((function(){l(o)}),100)):setTimeout((function(){l(o)}),100)};function i(o,l){e[o].scrollvideo.params.spinner&&window.requestAnimationFrame((function(){"show"===l&&!0!==e[o].loaderVisible&&void 0!==e[o].loader&&null!==e[o].loader[0]?(e[o].loader[0].style.display="block",e[o].loaderVisible=!0):"hide"===l&&!0===e[o].loaderVisible&&void 0!==e[o].loader&&null!==e[o].loader[0]&&(e[o].loader[0].style.display="none",e[o].loaderVisible=!1)}))}function r(o){if(e[o].scrollvideo.loadedImageAmount<e[o].scrollvideo.range.len){if(e[o].scrollvideo.currentLoadingImageAmount<10&&e[o].scrollvideo.loadPrioList.length>0){var l=e[o].scrollvideo.loadPrioList.shift();e[o].scrollvideo.frames[l]=void 0===e[o].scrollvideo.frames[l]?{status:"empty",img:new Image,src:e[o].scrollvideo.params.dir+"/"+s(l,e[o].scrollvideo.params.fps,10*parseFloat(e[o].scrollvideo.params.quality))+"?ver="+e[o].scrollvideo.params.ver}:e[o].scrollvideo.frames[l],("video"===e[o].scrollvideo.framesource&&void 0!==e[o].scrollvideo.imgs[l]||"images"===e[o].scrollvideo.framesource&&void 0!==e[o].scrollvideo.frames[l])&&(i(o,"show"),e[o].scrollvideo.params.scroll&&!0!==e[o].scrollvideo.blockScroll&&e[o].fixedScrollOnState&&(e[o].scrollvideo.blockScroll=!0,window.addEventListener("wheel",d,{passive:!1})),"empty"===e[o].scrollvideo.frames[l].status&&(e[o].scrollvideo.frames[l].img.onload=function(){e[o].scrollvideo.frames[l].status="loaded",e[o].scrollvideo.frames[l].ratio=e[o].scrollvideo.frames[l].img.naturalHeight/e[o].scrollvideo.frames[l].img.naturalWidth,e[o].scrollvideo.frames[l].width=e[o].scrollvideo.frames[l].img.naturalWidth,e[o].scrollvideo.frames[l].height=e[o].scrollvideo.frames[l].img.naturalHeight,a(o),e[o].scrollvideo.currentLoadingImageAmount--,e[o].scrollvideo.loadedImageAmount++,r(o)},"images"===e[o].scrollvideo.framesource?e[o].scrollvideo.frames[l].img.src=e[o].scrollvideo.frames[l].src:e[o].scrollvideo.frames[l].img.src=e[o].scrollvideo.imgs[l],e[o].scrollvideo.currentLoadingImageAmount++))}setTimeout((function(){r(o)}),50)}else i(o,"hide"),e[o].scrollvideo.params.scroll&&!0===e[o].scrollvideo.blockScroll&&(e[o].scrollvideo.blockScroll=!1,window.removeEventListener("wheel",d,{passive:!1}))}function s(o,e,l){return e=""+e,l=""+l,o=(o=1==(o=""+o).length?"00"+o:2==o.length?"0"+o:o)+"_f"+(e=1==e.length?"0"+e:e)+"_q"+(l=1==l.length?"0"+l:l)+".jpg"}function d(o){o.preventDefault()}function a(o,l,i){void 0!==l?e[o].scrollvideo.requestedFrame=l:l=e[o].scrollvideo.requestedFrame,void 0===e[o].scrollvideo.frames[l]?function(o,l){e[o].scrollvideo.loadPrioList=[],e[o].scrollvideo.loadPrioList.push(l);for(var i=l;i>1&&e[o].scrollvideo.loadPrioList.length<10;)i--,void 0===e[o].scrollvideo.frames[i]&&e[o].scrollvideo.loadPrioList.push(i);for(i=l;i<e[o].scrollvideo.range.last&&e[o].scrollvideo.loadPrioList.length<25;)i++,void 0===e[o].scrollvideo.frames[i]&&e[o].scrollvideo.loadPrioList.push(i);for(var r=e[o].scrollvideo.range.first;r<=e[o].scrollvideo.range.last;r++)void 0===e[o].scrollvideo.frames[r]&&-1==jQuery.inArray(r,e[o].scrollvideo.loadPrioList)&&e[o].scrollvideo.loadPrioList.push(r)}(o,l):"loaded"!==e[o].scrollvideo.frames[l].status||e[o].scrollvideo.lastShownFrame===l&&!i||(e[o].scrollvideo.lastShownFrame=l,function(o,l,i,r){var s=e[o].module.height/e[o].module.width;if(i<=s&&"contain"===r||(o=>s&&"cover"===r)){var d=e[o].module.width*i;e[o].scrollvideo.ctx.drawImage(l,0,(e[o].module.height-d)/2,e[o].module.width,d)}if(i>s&&"contain"===r||i<s&&"cover"===r){var a=e[o].module.width*s/i;e[o].scrollvideo.ctx.drawImage(l,(e[o].module.width-a)/2,0,a,e[o].module.height)}}(o,e[o].scrollvideo.frames[l].img,e[o].scrollvideo.frames[l].ratio,"cover"))}function t(o){e[o].scrollvideo.canvas.width=e[o].module.width,e[o].scrollvideo.canvas.height=e[o].module.height}window.RS_MODULES=window.RS_MODULES||{},window.RS_MODULES.scrollvideo={loaded:!0,version:"3.0.0"},window.RS_MODULES.checkMinimal&&window.RS_MODULES.checkMinimal()}(jQuery);
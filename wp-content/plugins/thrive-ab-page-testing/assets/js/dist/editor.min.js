!function(a){"use strict";var b,c,d,e,f,g={".js":[],".json":[],".css":[],".html":[]},h="function"==typeof require?require:null;return e=function(a){var b=new Error("Could not find module '"+a+"'");return b.code="MODULE_NOT_FOUND",b},f=function(a,b,c){var d,e;if("function"==typeof a[b+c])return b+c;for(d=0;e=g[c][d];++d)if("function"==typeof a[b+e])return b+e;return null},b=function(a,d,g,h,i,j){var k,l,m,n,o,p;for(g=g.split("/"),k=g.pop(),"."!==k&&".."!==k||(g.push(k),k="");null!=(l=g.shift());)if(l&&"."!==l&&(".."===l?(a=d.pop(),j=j.slice(0,j.lastIndexOf("/"))):(d.push(a),a=a[l],j+="/"+l),!a))throw e(h);if(k&&"function"!=typeof a[k]&&(p=f(a,k,".js"),p||(p=f(a,k,".json")),p||(p=f(a,k,".css")),p||(p=f(a,k,".html")),p?k=p:2!==i&&"object"==typeof a[k]&&(d.push(a),a=a[k],j+="/"+k,k="")),!k)return 1!==i&&a[":mainpath:"]?b(a,d,a[":mainpath:"],h,1,j):b(a,d,"index",h,2,j);if(!(o=a[k]))throw e(h);return o.hasOwnProperty("module")?o.module.exports:(m={},o.module=n={exports:m,id:j+"/"+k},o.call(m,m,n,c(a,d,j)),n.exports)},d=function(c,d,f,g){var i,j=f,k=f.charAt(0),l=0;if("/"===k){if(j=j.slice(1),!(c=a["/"])){if(h)return h(f);throw e(f)}g="/",d=[]}else if("."!==k){if(i=j.split("/",1)[0],!(c=a[i])){if(h)return h(f);throw e(f)}g=i,d=[],j=j.slice(i.length+1),j||(j=c[":mainpath:"],j?l=1:(j="index",l=2))}return b(c,d,j,f,l,g)},(c=function(a,b,c){return function(e){return d(a,[].concat(b),e,c)}})(a,[],"")}({"ab-page-testing":{assets:{js:{"editor.js":function(exports,module,require){eval("( function ( $ ) {\n\tTVE.ResetStatsModal = require( './modals/reset-stats' );\n\tvar ThriveAB = {\n\t\tselector: 'body',\n\t\tiframe_srcs: [],\n\t\tinit: function () {\n\t\t\tvar self = this;\n\t\t\tif ( TVE.CONST.ajax.thrive_ab.running_test ) {\n\t\t\t\tTVE.add_filter( 'validate_saved_content', $.proxy( this.validate_saved_content_filter, this ) );\n\t\t\t} else {\n\t\t\t\tTVE.main.on( 'tve.save_post.success', $.proxy( this.on_save, this ) );\n\t\t\t}\n\n\t\t\t/* disable \"CREATE NEW A/B TEST\" button when an element enters edit mode */\n\t\t\tTVE.add_filter( 'tcb.edit_mode.disabled_buttons', function ( $buttons ) {\n\t\t\t\treturn $buttons.add( TVE.main.$( '#thrive-ab-create-test' ) );\n\t\t\t} );\n\t\t},\n\t\tvalidate_saved_content_filter: function ( valid, callback ) {\n\t\t\tvar self = this;\n\t\t\tself.save_callback = callback;\n\t\t\tif ( typeof TVE.CONST.reset_stats === 'undefined' ) {\n\n\t\t\t\tvar ResetStatsModal = TVE.ResetStatsModal.get_instance( TVE.modal.get_element( 'reset-stats' ) );\n\n\t\t\t\tResetStatsModal.open( {\n\t\t\t\t\ttop: '20%'\n\t\t\t\t} );\n\t\t\t\tdelete TVE.KEEP_OVERLAY;\n\t\t\t\tTVE.main.overlay( 'close' );\n\t\t\t\tResetStatsModal.on( 'reset_stats', self.save_with_reset_stats, self );\n\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif ( ! TVE.CONST.reset_stats ) {\n\t\t\t\tdelete TVE.CONST.reset_stats;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\t\tsave_with_reset_stats: function ( running_test ) {\n\t\t\tTVE.main.overlay();\n\t\t\tTVE.CONST.reset_stats = running_test;\n\t\t\tthis.on_save();\n\t\t},\n\n\t\ton_save: function () {\n\t\t\tif ( ! TVE.PreventPreviewImageGenerate ) {\n\t\t\t\tvar $element = TVE.inner_$( this.selector );\n\t\t\t\tTVE.generateElementPreview( $element, this.save.bind( this ), {\n\t\t\t\t\tbgcolor: 'white',\n\t\t\t\t\tstyle: {\n\t\t\t\t\t\tpadding: 0,\n\t\t\t\t\t\tmargin: 0,\n\t\t\t\t\t\toutline: 'none',\n\t\t\t\t\t\t'overflow-y': 'hidden'\n\t\t\t\t\t},\n\t\t\t\t\twidth: $element.width(),\n\t\t\t\t\theight: 1000,\n\t\t\t\t\timageTypeCallback: 'toJpeg'\n\t\t\t\t}, true );\n\t\t\t}\n\t\t},\n\n\t\tsave: function ( data_source ) {\n\t\t\tvar form = new FormData();\n\n\t\t\tif ( data_source ) {\n\t\t\t\tform.append( 'preview_file', TVE.base64ToBlob( data_source ), TVE.CONST.post_id + '.png' );\n\t\t\t}\n\n\t\t\tform.append( 'custom', 'save_variation_thumb' );\n\t\t\tform.append( 'action', TVE.CONST.ajax.thrive_ab.action );\n\t\t\tform.append( 'post_id', TVE.CONST.post_id );\n\n\t\t\tif ( typeof TVE.CONST.reset_stats !== 'undefined' ) {\n\t\t\t\tform.append( 'reset_data', TVE.CONST.reset_stats );\n\t\t\t}\n\n\t\t\t$.ajax( {\n\t\t\t\ttype: 'POST',\n\t\t\t\turl: TVE.CONST.ajax_url,\n\t\t\t\tdata: form,\n\t\t\t\tprocessData: false,\n\t\t\t\tcontentType: false,\n\t\t\t} );\n\t\t\tif ( typeof TVE.CONST.reset_stats !== 'undefined' ) {\n\t\t\t\tTVE.main.editor_settings.save( null, null, this.save_callback );\n\t\t\t}\n\t\t}\n\t};\n\n\tfunction check_editor() {\n\n\t\tif ( TVE.inner === undefined ) {\n\t\t\treturn setTimeout( check_editor, 100 );\n\t\t}\n\t\tThriveAB.init();\n\t}\n\n\tcheck_editor();\n\n} )( jQuery );\n//# sourceURL=ab-page-testing/assets/js/editor.js")},modals:{"reset-stats.js":function(exports,module,require){eval("var _instance = null;\n\nmodule.exports = TVE.modal.base.extend( {\n\tevents: function () {\n\t\treturn _.extend( {}, TVE.modal.base.prototype.events(), {\n\t\t\t'click .tcb-modal-save': 'reset_stats'\n\t\t} );\n\t},\n\treset_stats: function () {\n\t\tthis.running_test = false;\n\n\t\tif ( this.$( '#thrive-ab-reset-stats' ).is( ':checked' ) ) {\n\t\t\tthis.running_test = TVE.CONST.ajax.thrive_ab.running_test;\n\t\t}\n\n\t\tthis.trigger('reset_stats', this.running_test );\n\t\tTVE.main.overlay();\n\t\tthis.close();\n\t},\n\tafter_initialize: function () {\n\t\tthis.$el.addClass( 'medium' );\n\t}\n}, {\n\t/**\n\t * \"Singleton\" implementation for modal instance\n\t *\n\t * @param el\n\t */\n\tget_instance: function ( el ) {\n\t\tif ( ! _instance ) {\n\t\t\t_instance = new TVE.ResetStatsModal( {\n\t\t\t\tel: el\n\t\t\t} );\n\t\t}\n\n\t\treturn _instance;\n\t}\n} );\n//# sourceURL=ab-page-testing/assets/js/modals/reset-stats.js")}}}}}})("ab-page-testing/assets/js/editor");
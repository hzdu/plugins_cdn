(()=>{var t={3534:t=>{var e=null;t.exports=TVE.modal.base.extend({events:function(){return _.extend({},TVE.modal.base.prototype.events(),{"click .tcb-modal-save":"reset_stats"})},reset_stats:function(){this.running_test=!1,this.$("#thrive-ab-reset-stats").is(":checked")&&(this.running_test=TVE.CONST.ajax.thrive_ab.running_test),this.trigger("reset_stats",this.running_test),TVE.main.overlay(),this.close()},after_initialize:function(){this.$el.addClass("medium")}},{get_instance:function(t){return e||(e=new TVE.ResetStatsModal({el:t})),e}})}},e={};function s(a){var n=e[a];if(void 0!==n)return n.exports;var i=e[a]={exports:{}};return t[a](i,i.exports,s),i.exports}!function(t){TVE.ResetStatsModal=s(3534);var e={selector:"body",iframe_srcs:[],init:function(){TVE.CONST.ajax.thrive_ab.running_test?TVE.add_filter("validate_saved_content",t.proxy(this.validate_saved_content_filter,this)):TVE.main.on("tve.save_post.success",t.proxy(this.on_save,this)),TVE.add_filter("tcb.edit_mode.disabled_buttons",(function(t){return t.add(TVE.main.$("#thrive-ab-create-test"))}))},validate_saved_content_filter:function(t,e){var s=this;if(s.save_callback=e,void 0===TVE.CONST.reset_stats){var a=TVE.ResetStatsModal.get_instance(TVE.modal.get_element("reset-stats"));return a.open({top:"20%"}),delete TVE.KEEP_OVERLAY,TVE.main.overlay("close"),a.on("reset_stats",s.save_with_reset_stats,s),!1}return TVE.CONST.reset_stats||delete TVE.CONST.reset_stats,!0},save_with_reset_stats:function(t){TVE.main.overlay(),TVE.CONST.reset_stats=t,this.on_save()},on_save:function(){if(!TVE.PreventPreviewImageGenerate){var t=TVE.inner_$(this.selector);TVE.generateElementPreview(t,this.save.bind(this),{bgcolor:"white",style:{padding:0,margin:0,outline:"none","overflow-y":"hidden"},width:t.width(),height:1e3,imageTypeCallback:"toJpeg"},!0)}},save:function(e){var s=new FormData;e&&s.append("preview_file",TVE.base64ToBlob(e),TVE.CONST.post_id+".png"),s.append("custom","save_variation_thumb"),s.append("action",TVE.CONST.ajax.thrive_ab.action),s.append("post_id",TVE.CONST.post_id),void 0!==TVE.CONST.reset_stats&&s.append("reset_data",TVE.CONST.reset_stats),t.ajax({type:"POST",url:TVE.CONST.ajax_url,data:s,processData:!1,contentType:!1}),void 0!==TVE.CONST.reset_stats&&TVE.main.editor_settings.save(null,null,this.save_callback)}};!function t(){if(void 0===TVE.inner)return setTimeout(t,100);e.init()}()}(jQuery)})();
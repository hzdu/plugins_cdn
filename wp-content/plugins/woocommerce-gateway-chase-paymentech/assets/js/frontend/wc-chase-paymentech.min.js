"use strict";function cancelCREPayment(){location.href=wc_chase_paymentech_params.cancel_url}function whatCVV2(){0<jQuery(".woocommerce-message-cvv").length||(jQuery("form.pay-page-checkout, form#add_payment_method").prepend('<ul class="woocommerce-message woocommerce-message-cvv"><img src="'+wc_chase_paymentech_params.what_is_csc_image_url+'" style="float:left;" /><p style="margin:0px 0px 0px 70px;">'+wc_chase_paymentech_params.what_is_csc+"</p></ul>"),jQuery("html, body").animate({scrollTop:jQuery(".woocommerce-message-cvv").offset().top-100},1e3))}function startCREPayment(){jQuery("form.pay-page-checkout, form#add_payment_method").block({message:null,overlayCSS:{background:"#fff",opacity:.6}})}function creHandleErrors(e){creHandleDetailErrors(e,"","")}function creHandleDetailErrors(e,a,c){e.replace(/\|$/,"").split("|");var o=[];jQuery.get(wc_chase_paymentech_params.ajaxurl,{action:"wc_payment_gateway_chase_paymentech_handle_error",orderId:wc_chase_paymentech_params.order_id,errorCode:e,gatewayCode:a,gatewayMessage:c},function(e){var a;wc_chase_paymentech_params.is_certification_mode?location.href=wc_chase_paymentech_params.return_url:(jQuery("form.pay-page-checkout, form#add_payment_method").unblock(),0===(a=e.data).length&&a.push(wc_chase_paymentech_params.general_error),jQuery(".woocommerce-error, .woocommerce-message").remove(),e="",0<a.length&&(jQuery("form.pay-page-checkout, form#add_payment_method").prepend('<ul class="woocommerce-error"><li>'+a.join("</li><li>")+"</li></ul>"),e="woocommerce-error"),0<o.length&&(jQuery("form.pay-page-checkout, form#add_payment_method").prepend('<ul class="woocommerce-message"><li>'+o.join("</li><li>")+"</li></ul>"),e="woocommerce-message"),jQuery("html, body").animate({scrollTop:jQuery("."+e).offset().top-100},1e3))})}function completeCREPayment(e){location.href=wc_chase_paymentech_params.return_url}jQuery(function(t){var a;function e(){window.wc_chase_paymenttech_selected_payment_method=c(),t("input.js-wc-chase-paymentech-payment-token").change(function(){var e=t("input.js-wc-chase-paymentech-payment-token:checked").val(),a=t("div.js-wc-chase-paymentech-new-payment-method-form");if(c()!==window.wc_chase_paymenttech_selected_payment_method)return window.wc_chase_paymenttech_selected_payment_method=c(),void o();e?(a.slideUp(200),t("#place_order").show()):(a.slideDown(200),t("#place_order").hide())}).change()}function c(){var e=t("input.js-wc-chase-paymentech-payment-token:checked").val();return""===e?0:e}function o(){a&&a.abort(),t("form.pay-page-checkout").block({message:null,overlayCSS:{background:"#fff url("+wc_chase_paymentech_params.ajax_loader_url+") no-repeat center",backgroundSize:"16px 16px",opacity:.6}});var e={action:"wc-chase-paymentech-update-checkout",security:wc_chase_paymentech_params.update_checkout_nonce,order_id:wc_chase_paymentech_params.order_id,should_tokenize:t(".js-wc-chase-paymentech-tokenize-payment-method").is(":checked")?"yes":"no",tokenized_payment_method_selected:c()};a=t.ajax({type:"POST",url:wc_chase_paymentech_params.ajaxurl,data:e,success:function(e){e&&(e=t(e),t("form.pay-page-checkout").html(e.html()),t("body").trigger("updated_pay_page_checkout"))}})}e(),t("body").bind("updated_pay_page_checkout",function(){e()}),t("form.pay-page-checkout").on("change",".js-wc-chase-paymentech-tokenize-payment-method",function(){o()}),t("form.pay-page-checkout").submit(function(){clearTimeout(void 0);var o=t(this);if(o.is(".processing"))return!1;o.addClass("processing"),1!==o.data()["blockUI.isBlocked"]&&o.block({message:null,overlayCSS:{background:"#fff url("+wc_chase_paymentech_params.ajax_loader_url+") no-repeat center",backgroundSize:"16px 16px",opacity:.6}});var e=o.serialize();return t.ajax({type:"POST",url:wc_chase_paymentech_params.checkout_url,order_id:wc_chase_paymentech_params.order_id,data:e,success:function(a){var c="";try{if(0<=a.indexOf("\x3c!--WC_START--\x3e")&&(a=a.split("\x3c!--WC_START--\x3e")[1]),0<=a.indexOf("\x3c!--WC_END--\x3e")&&(a=a.split("\x3c!--WC_END--\x3e")[0]),"success"!==(c=t.parseJSON(a)).result)throw"failure"===c.result?"Result failure":"Invalid response";window.location=decodeURI(c.redirect)}catch(e){t(".woocommerce-error, .woocommerce-message").remove(),void 0!==c.messages?o.prepend(c.messages):o.prepend(a),o.removeClass("processing").unblock(),o.find(".input-text, select").blur(),t("html, body").animate({scrollTop:t("form.pay-page-checkout").offset().top-100},1e3)}},dataType:"html"}),!1}),t("#add_payment_method #payment_method_chase_paymentech").is(":checked")&&t("#add_payment_method #place_order").hide(),t('form#add_payment_method [name="payment_method"]').change(function(e){"chase_paymentech"===t(this).val()?t("#add_payment_method #place_order").hide():t("#add_payment_method #place_order").show()})});
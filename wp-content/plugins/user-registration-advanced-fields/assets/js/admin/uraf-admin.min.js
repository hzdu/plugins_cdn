!function(s){var i={init:function(){s('.ur-input-type-select2 .ur-field[data-field-key="select2"] select, .ur-input-type-multi-select2 .ur-field[data-field-key="multi_select2"] select').selectWoo(),s(document).on("click",".ur-selected-item",function(){i.init_settings()}),s(document).on("mousedown",".ur-field-requirements-needed",function(e){e.preventDefault();e=s(this).text();s(this).data("plan");Swal.fire({title:'<i class="dashicons dashicons-lock"></i><span class="user-registration-swal2-modal__title"> GD Library is disabled !!</span>',html:" Enable GD library from your hosting provider to use <strong>"+e+"</strong> field.",customClass:"user-registration-swal2-modal user-registration-swal2-modal--centered",showCloseButton:!0}).then(function(e){})}),i.load_init()},load_init:function(){i.add_phone_mask_templates(),s(document.body).on("ur_new_field_created",i.add_phone_mask_templates)},init_settings:function(){var e=s(".ur-general-setting-field");s.each(e,function(){var e=s(this);switch(e.attr("data-field")){case"default_value":e.on("change",function(){s(this).closest(".ur-general-setting-block").hasClass("ur-general-setting-select2")&&i.render_select_box(s(this)),s(this).closest(".ur-general-setting-block").hasClass("ur-general-setting-multi_select2")&&i.render_multiple_select_box(s(this))});break;case"options":e.on("keyup",function(){s(this).closest(".ur-general-setting-block").hasClass("ur-general-setting-select2")&&s(this).siblings('input[data-field="default_value"]').is(":checked")&&i.render_select_box(s(this)),s(this).closest(".ur-general-setting-block").hasClass("ur-general-setting-multi_select2")&&s(this).siblings('input[data-field="default_value"]').is(":checked")&&i.render_multiple_select_box(s(this))});break;case"header_attribute":e.on("change",function(){i.render_section_title_heading(s(this))});break;case"phone_format":"smart"===e.closest(".ur-general-setting-block").find('select[data-field="phone_format"]').val()?e.closest(".ur-general-setting-block").find(".ur-general-setting-input-mask").hide():e.closest(".ur-general-setting-block").find(".ur-general-setting-input-mask").show(),e.on("change",function(){i.render_phone_format(s(this))});break;case"label":e.on("keyup",function(){i.render_section_title_label(s(this))});break;case"input_mask":i.validate_input_mask(this),e.on("input",function(){i.validate_input_mask(this)})}});e=s(".ur_advance_setting");s.each(e,function(){var e=s(this);switch(e.attr("data-advance-field")){case"enable_payment_slider":e.on("change",function(){i.enable_payment_slider_change_handler(e)});break;case"enable_prefix_postfix":i.render_prefix_postfix_div(e),e.on("change",function(){i.display_range_prefix_postfix(),i.render_prefix_postfix_div(s(this)),i.render_range_field(e)});break;case"enable_text_prefix_postfix":i.render_prefix_postfix_div(e),i.render_range_field(e),e.on("change",function(){i.render_prefix_postfix_div(s(this)),i.render_range_field(s(this))});break;case"range_min":i.render_range_field(e),e.on("change",function(){i.render_range_field(s(this));var e=s(this).closest(".ur-advance-setting-block").find('input[data-advance-field="range_max"]'),t=parseInt(s(this).val(),10);""===e.val()&&e.val(t+1).trigger("change"),e.attr("min",t+1)});break;case"range_max":i.render_range_field(e),e.on("change",function(){i.render_range_field(s(this));var e=parseInt(s(this).val(),10),t=parseInt(s(this).closest(".ur-advance-setting-block").find('input[data-advance-field="range_min"]').val(),10);(""===s(this).val()||e<t)&&s(this).val(t+1)});break;case"range_prefix":case"range_postfix":e.on("keyup",function(){i.render_range_field(s(this))})}})},render_select_box:function(e){var t=s.trim(e.val()),n=s(".ur-selected-item.ur-item-active"),i=e.closest("li").index(),e=n.find(".ur-field").find("select");e.html(""),e.append("<option value='"+t+"'>"+t+"</option>"),n.find(".ur-general-setting-options > ul.ur-options-list > li").each(function(e,t){t=s(t).find('[data-field="default_value"]');e===i?t.prop("checked",!0):t.prop("checked",!1)})},render_multiple_select_box:function(e){var t=s(".ur-selected-item.ur-item-active"),n=e.closest("li").index(),i=t.find(".ur-field").find("select"),a=e.closest("ul").find("li");i.html(""),s.each(a,function(){var e=s(this).find('input[data-field="default_value"]');e.is(":checked")&&i.append("<option value='"+e.val()+"' selected>"+e.val()+"</option>")}),e.is(":checked")?t.find(".ur-general-setting-options li:nth("+n+') input[data-field="default_value"]').prop("checked",!0):t.find(".ur-general-setting-options li:nth("+n+') input[data-field="default_value"]').prop("checked",!1)},render_section_title_heading:function(e){var t=s(".ur-selected-item.ur-item-active"),n=s.trim(e.val()),e=t.find(".ur-general-setting-label input").val();t.find(".ur-general-setting-select-header select option").prop("selected",!1),t.find('.ur-general-setting-select-header select option[value="'+n+'"]').prop("selected",!0),t.find(".ur-label").html("<"+n+">"+e+"</"+n+">")},render_phone_format:function(e){var t=s(".ur-selected-item.ur-item-active");e.closest("#ur-setting-form").find("[data-field='field_name']").val()===t.find("[data-field='field_name']").val()&&("smart"===(e=e.val().trim())?s(".ur-general-setting-input-mask").hide():s(".ur-general-setting-input-mask").show(),t.find(".ur-general-setting-select-format select option").prop("selected",!1),t.find('.ur-general-setting-select-format select option[value="'+e+'"]').prop("selected",!0))},render_section_title_label:function(e){var t=s(".ur-selected-item.ur-item-active");t.find("[data-field-key='section_title']").length<1||(e=s.trim(e.val()),heading=t.find(".ur-general-setting-select-header select").val(),t.find(".ur-label").html("<"+heading+">"+e+"</"+heading+">"))},enable_payment_slider_change_handler:function(e){var t=s(".ur-selected-item.ur-item-active");e.is(":checked")?(t.find("span.ur-payment-slider-label").show(),t.find(".ur-input-type-range").addClass("ur-payment-enabled-slider")):(t.find("span.ur-payment-slider-label").hide(),t.find(".ur-input-type-range").removeClass("ur-payment-enabled-slider")),t.find(".ur_advance_setting.ur-settings-enable-payment-slider").val(e.is(":checked"))},display_range_prefix_postfix:function(){s(".ur-selected-item.ur-item-active").find("span.ur-range-slider-label").toggle()},take_snapshot_display:function(e){e=e.val();""===e||e.includes("image/jpeg")?s(".wp_uraf_take_snapshot").show():s(".wp_uraf_take_snapshot").hide()},render_prefix_postfix_div:function(e){e.closest(".ur-advance-setting-block").find(".ur-settings-enable-prefix-postfix").is(":checked")?(e.closest(".ur-advance-setting-block").find(".ur-advance-enable_text_prefix_postfix").show(),e.closest(".ur-advance-setting-block").find(".ur-settings-enable-text-prefix-postfix").is(":checked")?e.closest(".ur-advance-setting-block").find(".ur-advance-range_prefix, .ur-advance-range_postfix").show():e.closest(".ur-advance-setting-block").find(".ur-advance-range_prefix, .ur-advance-range_postfix").hide()):(e.closest(".ur-advance-setting-block").find(".ur-advance-enable_text_prefix_postfix").hide(),e.closest(".ur-advance-setting-block").find(".ur-advance-range_prefix, .ur-advance-range_postfix").hide())},render_range_field:function(e){var t=s(".ur-selected-item.ur-item-active"),n="",i="";e.closest("#ur-setting-form").find("[data-field='field_name']").val()===t.find("[data-field='field_name']").val()&&(e.closest(".ur-advance-setting-block").find(".ur-settings-enable-prefix-postfix").is(":checked")&&(i=e.closest(".ur-advance-setting-block").find(".ur-settings-enable-text-prefix-postfix").is(":checked")?(n=e.closest(".ur-advance-setting-block").find('input[data-advance-field="range_prefix"]').val(),e.closest(".ur-advance-setting-block").find('input[data-advance-field="range_postfix"]').val()):(n=""!==e.closest(".ur-advance-setting-block").find('input[data-advance-field="range_min"]').val()?e.closest(".ur-advance-setting-block").find('input[data-advance-field="range_min"]').val():"0",""!==e.closest(".ur-advance-setting-block").find('input[data-advance-field="range_max"]').val()?e.closest(".ur-advance-setting-block").find('input[data-advance-field="range_max"]').val():"10"),t.find(".ur-settings-enable-text-prefix-postfix").val(e.closest(".ur-advance-setting-block").find(".ur-settings-enable-text-prefix-postfix").is(":checked"))),t.find(".ur-settings-enable-prefix-postfix").val(e.closest(".ur-advance-setting-block").find(".ur-settings-enable-prefix-postfix :selected").is(":checked"))),n&&t.find("span.ur-range-slider-prefix").text(n),i&&t.find("span.ur-range-slider-postfix").text(i)},validate_input_mask:function(e){var t=s(e).val(),n=!1;try{s(e).clone().inputmask(t)}catch(i){n=!0}s(e).siblings(".input-mask-error-message").remove(),n&&s(e).after('<label style="color: red" class="input-mask-error-message">Your input mask is not valid! If you save as it is, it will not work in the frontend.</label>')},add_phone_mask_templates:function(){var e={blank:["-- Custom Mask --",""],us_canadian:["US/Canadian Phone Number","(999) 999-9999"],us_canadian_int:["US/Canadian Phone Number (International)","+1 (999) 999-9999"]},a=s("<select id='user_registration_templates_container'></select>");for(key in e){var t=e[key],n=s("<option></option>");n.html(t[0]),n.val(t[1]),a.append(n)}a.hide(),s(".ur-general-setting-phone input[data-field='input_mask']").each(function(e,t){if(!s(t).parent().find("#user_registration_templates_container").length){var n=a.clone();s(t).after(n);const i=n.find('option[value="'+s(t).val()+'"]');i.length&&i.attr("selected","selected")}}),i.init_phone_mask_triggers()},init_phone_mask_triggers:function(){var n=!0;s(document).on("click focus","input[data-field='input_mask'], #user_registration_templates_container",function(){n=!0,s(this).parent().find("#user_registration_templates_container").show()}),s(document).on("blur","input[data-field='input_mask'], #user_registration_templates_container",function(){var e,t=s(this).parent().find("#user_registration_templates_container");e=t,n=!1,setTimeout(function(){n||e.hide()},100)}),s(document).on("change","#user_registration_templates_container",function(){var e=s(this),t=e.siblings("input").first(),n=e.find(":selected").first(),i=s(".ur-selected-item.ur-item-active").find("input[data-field='input_mask']"),e=i.parent().find("#user_registration_templates_container");t.val(n.val()),i.val(n.val()),e.find("option:selected").removeAttr("selected","selected"),e.find('option[value="'+s(i).val()+'"]').attr("selected","selected")}),s(document).on("change","input[data-field='input_mask']",function(e){var t=s(e.target),e=t.parent().find("#user_registration_templates_container");e.find("option:selected").removeAttr("selected"),e.find('option[value="'+t.val()+'"]').length?e.val(t.val()):e.find("option").first().attr("selected","selected")})}};s(document).ready(function(){i.init()})}(jQuery);
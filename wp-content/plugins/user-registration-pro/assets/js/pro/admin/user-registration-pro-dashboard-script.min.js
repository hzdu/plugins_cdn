jQuery(function(r){function e(r){"login"===r.val()?r.closest("#mainform").find("select[name='user_registration_pro_popup_registration_form']").closest(".user-registration-global-settings").hide():r.closest("#mainform").find("select[name='user_registration_pro_popup_registration_form']").closest(".user-registration-global-settings").show()}var a={init:function(){this.dashboard_load_event()},dashboard_load_event:function(){r(document).ready(function(){r(".user-registration-pro-dashboard-select-form").trigger("change"),r(".user-registration-pro-date-switcher").on("click",function(){if(!r(this).hasClass("is-active")){r(this).addClass("is-active");var e=r(this).attr("class").split(" ")[3];r(".user-registration-pro-date-switcher:not(."+e+")").removeClass("is-active"),r("#date-range-selector").val(""),r(".user-registration-pro-dashboard-select-form").trigger("change")}});var e={};r(".user-registration-pro-date-range-selector").on("click",function(){var a=r(this).data("id"),t=e[a];t||(t=r(this).flatpickr({mode:"range",disableMobile:!0,dateFormat:"Y-m-d","static":!0,onClose:function(e,a,t){0!==e.length&&(r(".user-registration-pro-date-switcher").removeClass("is-active"),a!==r(".user-registration-pro-date-checker").val()&&(r(".user-registration-pro-date-checker").val(a),r(".user-registration-pro-dashboard-select-form").trigger("change")))}}),e[a]=t),t&&t.open()})}),r(".user-registration-pro-dashboard-select-form").on("change",function(){var e="Week";r(".user-registration-pro-date-switcher").each(function(){var a=r("#date-range-selector").val();""!==a?e=a:r(this).hasClass("is-active")&&(e=r(this).html())});var t=r(this).val(),s={action:"user_registration_pro_dashboard_analytics",form_id:t,selected_date:e};r(".user-registration-pro-dashboard__body").html('<div class="user-registration-card ur-text-center"><div class="user-registration-card__body"><span class="ur-spinner"></span></div></div>'),r.ajax({url:user_registration_pro_dashboard_script_data.ajax_url,data:s,type:"POST",success:function(e){var s=e.data.message,i=e.data.user_report,o=i.weekly_data.daily_data;r(".user-registration-pro-dashboard__body").html(s),"all"===t&&a.specific_registration_source_chart(i);var n=r("#user-registration-pro-registration-overview-chart-report-area"),l=Object.keys(o),d=[],c=[],u=[],p=[];l.forEach(function(r){d.push(o[r].new_registration_in_a_day),c.push(o[r].approved_users_in_a_day),u.push(o[r].pending_users_in_a_day),p.push(o[r].denied_users_in_a_day)});var g={datasets:[{label:"New User Registration",fill:!1,borderColor:"red",data:d},{label:"Approved Users",fill:!1,borderColor:"blue",data:c},{label:"Pending Users",fill:!1,borderColor:"#800020",data:u}],labels:l},h=new Chart(n,{type:"line",data:g,options:{responsive:!0,legend:{display:!1},scales:{xAxes:[{ticks:{maxTicksLimit:10}}]},legendCallback:function(r){var e=[];e.push('<ul class="user-registration-pro-legend-'+r.id+' ur-d-flex ur-flex-wrap ur-mt-3 ur-mb-0">');for(var a=0;a<3;a++)e.push('<li><span class="user-registration-pro-color-tag" style="background-color:'+r.data.datasets[a].borderColor+'"></span>'),r.data.datasets[a].label&&e.push(r.data.datasets[a].label),e.push("</li>");return e.push("</ul>"),e.join("")}}});r(".user-registration-total-registration-chart").find(".user-registration-pro-registration-overview-chart-report-legends").html(h.setDatasetVisibility(1,!0))}})})},specific_registration_source_chart:function(e){var t=e,s=r("#user-registration-pro-specific-form-registration-overview-chart-report-area"),i=Object.keys(t.specific_form_registration).sort(),o=[],n=[];i.forEach(function(r){o.push(t.specific_form_registration),n.push(t.specific_form_registration[r])});for(var l=[],d=0;d<i.length;d++)l.push(a.getRandomColor());var c={datasets:[{backgroundColor:l,data:n}],labels:i},u=new Chart(s,{type:"doughnut",data:c,options:{responsive:!0,legend:{display:!1},legendCallback:function(r){var e=[];e.push('<ul class="user-registration-pro-legend-'+r.id+' ur-d-flex ur-flex-wrap ur-mt-3 ur-mb-0">');for(var a=0;a<r.data.labels.length;a++)e.push('<li><span class="user-registration-pro-color-tag" style="background-color:'+r.data.datasets[0].backgroundColor[a]+'"></span>'),r.data.labels[a]&&e.push(r.data.labels[a]),e.push("</li>");return e.push("</ul>"),e.join("")}}});r(".user-registration-specific-registration-chart").find(".user-registration-pro-specific-form-registration-overview-chart-report-legends").html(u.setDatasetVisibility(1,!0))},getRandomColor:function(){for(var r="#",e=0;e<6;e++)r+="0123456789ABCDEF"[Math.floor(16*Math.random())];return r}};a.init(),e(r(".user-registration-pro-select-popup-type")),r("select[name='user_registration_pro_popup_type']").on("change",function(){e(r(this))})});
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){e.fn.xlAjaxChosen=function(t,a,l){var s,o,n,d;return null==t&&(t={}),null==l&&(l={}),o={minTermLength:3,afterTypeDelay:500,jsonTermKey:"term",keepTypingMsg:"Keep typing...",lookingForMsg:"Looking for"},d=this,s=null,n=e.extend({},o,e(d).data(),t),this.xlChosen(l||{}),this.each(function(){return e(this).next(".chosen-container").find(".search-field > input, .chosen-search > input").bind("keyup",function(){var l,o,r,c;if(cmb2_select_last_interact=e(this).parents(".chosen-container").prev("select"),r=e(this).val(),o=(c=e.trim(e(this).val())).length<n.minTermLength?n.keepTypingMsg:n.lookingForMsg+" '"+c+"'",d.next(".chosen-container").find(".no-results").text(o),0!==c.length)return c!==e(this).data("prevVal")&&(e(this).data("prevVal",c),this.timer&&clearTimeout(this.timer),!(c.length<n.minTermLength)&&(l=e(this),null==n.data&&(n.data={}),n.data[n.jsonTermKey]=c,null!=n.dataCallback&&(n.data=n.dataCallback(n.data)),n.success,n.success=function(i){var s,o,n;if(d=cmb2_select_last_interact,null!=i)return n=[],d.find("option").each(function(){return e(this).is(":selected")?n.push(e(this).val()+"-"+e(this).text()):e(this).remove()}),d.find("optgroup:empty").each(function(){return e(this).remove()}),s=null!=a?a(i,l):i,o=0,e.each(s,function(t,a){var i,l,s;return o++,a.group?((i=d.find("optgroup[label='"+a.text+"']")).size()||(i=e("<optgroup />")),i.attr("label",a.text).appendTo(d),e.each(a.items,function(t,a){var l,s;if(l="string"==typeof a?(s=t,a):(s=a.value,a.text),-1===e.inArray(s+"-"+l,n))return e("<option />").attr("value",s).html(l).appendTo(i)})):(l="string"==typeof a?(s=t,a):(s=a.value,a.text),-1===e.inArray(s+"-"+l,n)?e("<option />").attr("value",s).html(l).appendTo(d):void 0)}),o?d.trigger("chosen:updated"):(d.data().chosen.no_results_clear(),d.data().chosen.no_results(l.val())),null!=t.success&&t.success(i),l.val(r)},this.timer=setTimeout(function(){return s&&s.abort(),s=e.ajax(n)},n.afterTypeDelay)));selected_values_pre=[],d.find("option").each(function(){return e(this).is(":selected")?selected_values_pre.push(e(this).val()+"-"+e(this).text()):e(this).remove()});var _=[];return void 0!==d.attr("data-pre-data")&&(_=JSON.parse(d.attr("data-pre-data"))),e.each(_,function(t,a){if(text="string"==typeof a?(value=i,a):(value=a.value,a.text),-1===e.inArray(value+"-"+text,selected_values_pre))return e("<option />").attr("value",value).html(text).appendTo(d)}),d.trigger("chosen:updated"),!1})})}}(jQuery),window.wfacp=function(e){return{ajax:function(t,a,i){var l=this,s=null,o={},n="wfacp_";function d(t,a,i,s,o,n){a.length>0&&a.prop("disabled",!1),i.remove(),e(".bwf_ajax_btn_bottom_container").removeClass("ajax_loader_show"),!0===l.hasOwnProperty(t)&&"function"==typeof l[t]&&l[t](s,a,i,o,n)}return this.action=null,this.data=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e},this.before_send=function(e){},this.async=function(e){return e},this.method=function(e){return e},this.success=function(e,t,a,i,l){},this.complete=function(e,t,a,i,l){},this.error=function(e,t,a,i,l){wfacp_localization.error.hasOwnProperty(e.status)&&wfacp.swal(wfacp_localization.error[e.status]),wfacp.hide_spinner()},this.action=function(e){return e},this.ajax=function(t,a){"object"===_typeof(a)?a.action=t:a={action:t},a.action=n+t,l.before_send(document.body,t),a.wfacp_nonce=wfacp_secure.nonce;var i={url:ajaxurl,async:l.async(!0),method:l.method("POST"),data:a,success:function(e,a,i){l.success(e,a,i,t)},complete:function(e,a,i){l.complete(e,a,i,t)},error:function(e,a,i){l.error(e,a,i,t)}};o.hasOwnProperty(t)?clearTimeout(o[t]):o[t]=null,o[t]=setTimeout(function(t){e.ajax(t)},200,i)},!0===a?(function(t){e(t).length>0&&(e(t).on("submit",function(t){t.preventDefault();var a=e(this).data("bwf-action");"undefined"!==a&&(a=(a=n+a).trim(),s=this,l.action=a,function(t){var a=s,i=null,n=new FormData(a);n.append("action",t),n.append("wfacp_nonce",wfacp_secure.nonce),e(a).attr("method"),0===e(a).find("."+t+"_ajax_loader").length?(e(a).find(".bwf_form_submit").prepend("<span class='"+t+"_ajax_loader spinner'></span>"),i=e(a).find("."+t+"_ajax_loader")):i=e(a).find("."+t+"_ajax_loader");var r=e(".bwf_ajax_btn_bottom_container");i.addClass("ajax_loader_show"),r.addClass("ajax_loader_show");var c=e(a).find("fieldset");c.length>0&&c.prop("disabled",!0),l.before_send(a,t);var _=l.data(n,a),p={url:ajaxurl,async:l.async(!0),method:l.method("POST"),data:_,processData:!1,contentType:!1,success:function(e,a,s){d(t+"_ajax_success",c,i,e,a,s),l.success(e,a,s,c,i)},complete:function(e,a,s){d(t+"_ajax_complete",c,i,e,a,s),l.complete(e,a,s,c,i)},error:function(e,a,s){d(t+"_ajax_error",c,i,e,a,s),l.error(e,a,s,c,i)}};o.hasOwnProperty(t)?clearTimeout(o[t]):o[t]=null,o[t]=setTimeout(function(t){e.ajax(t)},200,p)}(a))}),"function"==typeof i&&i(l))}(t),this):!1===a?(function(t){e(t).length>0&&(e(t).on("click",function(t){t.preventDefault();var a=e(this).data("bwf-action");"undefined"!==a&&(a=(a=n+a).trim(),s=this,l.action=a,function(t){var a=s,i=l.data({},a);"object"===_typeof(i)?i.action=t:i={action:t},l.before_send(a,t),i.wfacp_nonce=wfacp_secure.nonce;var n={url:ajaxurl,async:l.async(!0),method:l.method("POST"),data:i,success:function(e,t,a){l.success(e,t,a,s)},complete:function(e,t,a){l.complete(e,t,a,s)},error:function(e,t,a){l.error(e,t,a,s)}};o.hasOwnProperty(t)?clearTimeout(o[t]):o[t]=null,o[t]=setTimeout(function(t){e.ajax(t)},200,n)}(a))}),"function"==typeof i&&i(l))}(t),this):this},hooks:{hooks:{action:{},filter:{}},addAction:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";this.addHook("action",e,t,a,i)},addFilter:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";this.addHook("filter",e,t,a,i)},doAction:function(e){this.doHook("action",e,arguments)},applyFilters:function(e){return this.doHook("filter",e,arguments)},removeAction:function(e,t){this.removeHook("action",e,t)},removeFilter:function(e,t,a){this.removeHook("filter",e,t,a)},addHook:function(e,t,a,i,l){void 0==this.hooks[e][t]&&(this.hooks[e][t]=[]);var s=this.hooks[e][t];void 0==l&&(l=t+"_"+s.length),void 0==i&&(i=10),this.hooks[e][t].push({tag:l,callable:a,priority:i})},doHook:function(e,t,a){if(a=Array.prototype.slice.call(a,1),void 0!=this.hooks[e][t]){var i,l=this.hooks[e][t];l.sort(function(e,t){return e.priority-t.priority});for(var s=0;s<l.length;s++)"function"!=typeof(i=l[s].callable)&&(i=window[i]),"action"==e?i.apply(null,a):a[0]=i.apply(null,a)}if("filter"==e)return a[0]},removeHook:function(e,t,a,i){if(void 0!=this.hooks[e][t])for(var l=this.hooks[e][t],s=l.length-1;s>=0;s--)void 0!=i&&i!=l[s].tag||void 0!=a&&a!=l[s].priority||l.splice(s,1)}},tools:{ol:function(e){var t=0;return null!=e&&"object"===_typeof(e)&&(t=Object.keys(e).length),t},isEmpty:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},hp:function(e,t){var a=!1;return"object"===_typeof(e)&&void 0!==t&&(a=e.hasOwnProperty(t)),a},jsp:function(e){if("object"===_typeof(e)){var t=JSON.stringify(e);return t=JSON.parse(t)}return e},kys:function(e){return"object"===_typeof(e)&&null!=e&&this.ol(e)>0?Object.keys(e):[]},values:function(e){return"object"===_typeof(e)&&null!=e&&this.ol(e)>0?Object.values(e):[]},ucfirst:function(e){return e.replace(/^\w/,function(e){return e.toUpperCase()})},stripHTML:function(t){return e("<div>"+t+"</div>").text()},string_to_bool:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return""!==e&&"false"!=e&&("boolean"==typeof e?e:"yes"===e||1===e||"true"===e||"1"===e)},is_object:function(e){return null!=e&&"object"===_typeof(e)},is_bool:function(e){return"boolean"==typeof(e=wfacp.tools.string_to_bool(e))},timestamp:function(){return(new Date).getTime()}},swal:function(t){return wfacp_swal(e.extend({title:"",text:"",type:"warning",showCancelButton:!0,confirmButtonColor:"#0073aa",cancelButtonColor:"#e33b3b",confirmButtonText:""},t))},model:{add_product:function(){var t=e("#modal-add-product");t.length>0&&t.iziModal({title:"Add Product",headerColor:"#6dbe45",background:"#efefef",borderBottom:!1,width:600,radius:6,overlayColor:"rgba(0, 0, 0, 0.35)",transitionIn:"fadeInDown",transitionOut:"fadeOutDown",navigateArrows:"false",onOpening:function(e){e.startLoading()},onOpened:function(e){e.stopLoading()},onClosed:function(e){}})}},sortable:function(t,a,i,l){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:".wfacp_item_drag",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:".ui-state-disabled",n=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},r=e(t);if(0!==r.length){r.off("sortable");var c={connectWith:t,start:function(e,t){a(e,t)},stop:function(e,t){i(e,t)},over:function(e,t){l("in",e,t)},out:function(e,t){l("out",e,t)},cursor:"move"};if(wfacp.tools.ol(d)>0)for(var _ in d)c[_]=d[_];var p=".wfacp_item_drag";""!==s&&(p=s),""!==o&&(p+=":not("+o+")"),c.items=p,""!==n&&(c.placeholder=n),r.sortable(c),r.disableSelection()}},addClass:function(t,a){e(t).addClass(a)},removeClass:function(t,a){e(t).removeClass(a)},show_spinner:function(){var t=e(".wfacp_spinner.spinner");t.length>0&&t.css("visibility","visible")},hide_spinner:function(){var t=e(".wfacp_spinner.spinner");t.length>0&&t.css("visibility","hidden")},show_data_save_model:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";""!==e&&(wfacp.show_saved_model.iziModal("setTitle",e),wfacp.show_saved_model.iziModal("open"))},show_data_error_model:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";""!==e&&(wfacp.show_saved_model.iziModal("setTitle",e),wfacp.show_saved_model.iziModal("open"))},is_global_checkout:function(){return wfacp.tools.hp(wfacp_data,"global_settings")&&wfacp.tools.hp(wfacp_data.global_settings,"override_checkout_page_id")&&wfacp_data.global_settings.override_checkout_page_id==wfacp_data.id},editorConfig:{tinymce:{theme:"modern",skin:"lightgray",language:"en",formats:{alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"}},{selector:"img,table,dl.wp-caption",classes:"alignleft"}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"}},{selector:"img,table,dl.wp-caption",classes:"aligncenter"}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"}},{selector:"img,table,dl.wp-caption",classes:"alignright"}],strikethrough:{inline:"del"}},relative_urls:!1,remove_script_host:!1,convert_urls:!1,browser_spellcheck:!0,fix_list_elements:!0,entities:"38,amp,60,lt,62,gt",entity_encoding:"raw",keep_styles:!1,cache_suffix:"wp-mce-4800-20180716",resize:"vertical",menubar:!1,branding:!1,preview_styles:"font-family font-size font-weight font-style text-decoration text-transform",end_container_on_empty_block:!0,wpeditimage_html5_captions:!0,wp_lang_attr:"en-US",wp_keep_scroll_position:!1,wp_shortcut_labels:{"Heading 1":"access1","Heading 2":"access2","Heading 3":"access3","Heading 4":"access4","Heading 5":"access5","Heading 6":"access6",Paragraph:"access7",Blockquote:"accessQ",Underline:"metaU",Strikethrough:"accessD",Bold:"metaB",Italic:"metaI",Code:"accessX","Align center":"accessC","Align right":"accessR","Align left":"accessL",Justify:"accessJ",Cut:"metaX",Copy:"metaC",Paste:"metaV","Select all":"metaA",Undo:"metaZ",Redo:"metaY","Bullet list":"accessU","Numbered list":"accessO","Insert/edit image":"accessM","Remove link":"accessS","Toolbar Toggle":"accessZ","Insert Read More tag":"accessT","Insert Page Break tag":"accessP","Distraction-free writing mode":"accessW","Add Media":"accessM","Keyboard Shortcuts":"accessH"},toolbar1:"bold,italic,bullist,numlist,link",wpautop:!1,indent:!0,elementpath:!1,plugins:"charmap,colorpicker,hr,lists,paste,tabfocus,textcolor,fullscreen,wordpress,wpautoresize,wpeditimage,wpemoji,wpgallery,wplink,wptextpattern"},quicktags:{buttons:"strong,em,link,ul,ol,li,code"}}}}(jQuery),function(e){var t=function(){function t(e){_classCallCheck(this,t),null!==document.getElementById("wfacp_product_container")&&this.init(e)}return _createClass(t,[{key:"init",value:function(e){this.search_timeout=null,this.search_model_open=null,this.show_saved_model=null,this.id=e.id,this.name=e.name,this.wfacp_id=e.id,this.currency=e.currency,this.products=e.products,this.add_to_cart_setting=e.products_settings.add_to_cart_setting,this.last_active_product="",this.addProductModel(),this.main()}},{key:"main",value:function(){var t=this;return this.product_vue=new Vue({el:"#wfacp_product_container",created:function(){wfacp.hooks.doAction("wfacp_product_ui_created",this),this.sortable()},methods:{sortable:function(){var t=this;setTimeout(function(){e(".wfacp_product_table_sortable").sortable({items:"tr",cursor:"move",axis:"y",handle:"td.wfacp_product_drag_handle .wfacp_drag_handle",scrollSensitivity:40,stop:function(e,a){t.StopSortable(e,a)}})},800)},StopSortable:function(e,t){},isEmpty:function(){return 0===wfacp.tools.ol(this.products)},addProduct:function(t,a){e(".wfacp-preview").show(),e(".wfacp_s_menu_rules").removeClass("wfacp_stop_navigation"),null===this.products&&(this.products={}),Vue.set(this.products,t,a),this.save_products()},removeProduct:function(a){wfacp.swal({html:'<div class="wf_delete_modal_content">'.concat(wfacp_localization.global.remove_product.text,"</div>"),type:"error",confirmButtonText:wfacp_localization.global.remove_product.confirmButtonText,reverseButtons:!0,showCloseButton:!0,onOpen:function(){document.querySelector(".swal2-header").insertAdjacentHTML("beforebegin",'<div class="wffn-swal-modal-title">'+wfacp_localization.global.remove_product.modal_title+"</div>")},preConfirm:function(){return e("button.swal2-cancel.swal2-styled").removeAttr("disabled"),new Promise(function(e){t.removeProduct(a,function(a){t.formHasChanges=!0,e(a)})})}}).catch(function(e){console.log("Remove product error",e)})},set_product_data:function(e,a,i){if(null!=i.target){t.formHasChanges=!0;var l=i.target.value?i.target.value:"";if(this.last_active_product=e,"discount_amount"===a){var s=this.products[e].discount_type;"percent_discount_sale"!==s&&"percent_discount_reg"!==s||l>100&&(l=100)}else if("discount_type"===a){var o=this.products[e].discount_amount;"percent_discount_sale"!==l&&"percent_discount_reg"!==l||(o=0,Vue.set(this.products[e],"discount_amount",o))}Vue.set(this.products[e],a,l)}},remove_non_required_keys:function(e){if(wfacp.tools.ol(e)>0)for(var t in e=wfacp.tools.jsp(e))delete e[t].price,delete e[t].regular_price,delete e[t].sale_price,delete e[t].image;return e},save_products:function(){var a=this,i=new wfacp.ajax,l=this.remove_non_required_keys(this.products),s={},o=e(".wfacp-product-row");0===o.length?s=l:o.each(function(){var t=e(this).attr("id");s[t]=l[t]});var n={products:s,wfacp_id:t.id,settings:{add_to_cart_setting:this.add_to_cart_setting},last_active_product:this.last_active_product};i.ajax("save_products",n),e(".wfacp_save_btn_style").addClass("is_busy"),i.success=function(t){e(".wfacp_save_btn_style").removeClass("is_busy"),wfacp.show_data_save_model(t.msg),a.sortable()}}},data:{have_variable:!1,name:this.name,currency:this.currency,products:this.products,add_to_cart_setting:this.add_to_cart_setting,last_active_product:this.last_active_product}}),this.product_vue}},{key:"addProducts",value:function(e){if(wfacp.tools.hp(e,"products")&&wfacp.tools.ol(e.products)>0){var t=e.products;for(var a in t)this.product_vue.addProduct(a,t[a])}}},{key:"removeProduct",value:function(t,a){var i=this,l=e("#"+t);l.length>0&&l.find(".wfacp_overlay_active").removeClass("wfacp_overlay_none_here");var s=new wfacp.ajax;s.ajax("remove_product",{product_key:t,wfacp_id:this.id}),s.complete=function(l){wfacp.tools.ol(l)>0&&(Vue.delete(i.product_vue.products,t),0===wfacp.tools.ol(i.product_vue.products)?(e(".wfacp-preview").hide(),e(".wfacp_s_menu_rules").addClass("wfacp_stop_navigation")):e(".wfacp_overlay_active").addClass("wfacp_overlay_none_here")),"function"==typeof a&&a(l)}}},{key:"addProductVue",value:function(t){if(!0!==this.search_model_open){this.search_model_open=!0;var a=this;return this.add_product_vue=new Vue({el:"#modal-add-product-form",components:{Multiselect:window.VueMultiselect.default},data:{modal:t,isLoading:!1,products:[],is_single:"",include_variations:!1,selectedProducts:[]},methods:{onSubmit:function(){var t=new wfacp.ajax,i=this;if(a.add_product_vue.$el){var l=a.add_product_vue.$el.querySelector(".wfacp_btn.wfacp_btn_primary");e(l).addClass("is_busy")}var s=[],o=this.selectedProducts;if(wfacp.tools.ol(this.selectedProducts)>0)for(var n in o)s.push(o[n].id);var d={products:s,wfacp_id:a.id};t.ajax("add_product",d),t.success=function(t){wfacp.tools.ol(t)>0&&a.addProducts(t),e("#modal-add-product").iziModal("close")},t.complete=function(){if(i.clearAll(),a.add_product_vue.$el){var t=a.add_product_vue.$el.querySelector(".wfacp_btn.wfacp_btn_primary");e(t).removeClass("is_busy")}}},asyncFind:function(e){var t=this;this.isLoading=!0,""!==e?(clearTimeout(a.search_timeout),a.search_timeout=setTimeout(function(e){var a=new wfacp.ajax,i={term:e,variations:t.include_variations};a.ajax("product_search",i),a.success=function(e){t.products=e,t.isLoading=!1},a.complete=function(){t.isLoading=!1}},1e3,e)):this.isLoading=!1},clearAll:function(){this.products=[],this.selectedProducts=[],this.isLoading=!1}}}),this.add_product_vue}}},{key:"addProductModel",value:function(){var t=this,a=e("#modal-add-product");a.length>0&&a.iziModal({title:wfacp_localization.global.add_product_popup,headerColor:"#6dbe45",background:"#efefef",borderBottom:!1,width:600,radius:6,overlayColor:"rgba(0, 0, 0, 0.35)",transitionIn:"fadeInUp",transitionOut:"fadeOut",navigateArrows:"false",onOpening:function(e){t.addProductVue(e)}})}}]),t}(),a=function(){function t(e){var a=this;_classCallCheck(this,t),this.add_field_model_open=!1,this.add_section_model_open=!1,this.edit_field_model_open=!1,this.step_name="single_step",this.current_edit_field={},this.field_index=null,null!=document.getElementById("wfacp_layout_container")&&(this.builder=e,this.id=e.id,this.steps=e.layout.steps,this.input_fields=e.layout.input_fields,this.available_fields=e.layout.available_fields,this.fieldsets=e.layout.fieldsets,this.available_steps=["single_step","two_step","third_step"],this.model(),this.main(),this.editFieldVue(),wfacp.hooks.addFilter("wfacp_field_data_merge_with_model",function(e,t){return a.field_data_merge_with_model(e,t)}),wfacp.hooks.addFilter("wfacp_before_field_save",function(e,t){return a.wfacp_before_field_save(e,t)}))}return _createClass(t,[{key:"main",value:function(){var t=this;return this.layout_vue=new Vue({el:"#wfacp_layout_container",created:function(){this.enableSortable(),wfacp.hooks.doAction("wfacp_layout_created",this),this.enableTabs(),this.validateDependency()},methods:{enableTabs:function(){var t=this;setTimeout(function(){e(document).on("click",".wfacp_template_tabs",function(){if(!e(this).hasClass("wfacp_active_tabs")){var a=e(this).data("slug");t.show_template_frame(a)}})},1500)},addNewStep:function(){t.available_steps.indexOf(this.current_step)>-1&&("single_step"===this.current_step?(this.set_template("two_step"),Vue.set(this.steps.two_step,"active","yes")):"two_step"===this.current_step&&(this.set_template("third_step"),Vue.set(this.steps.third_step,"active","yes")))},deleteStep:function(e){t.available_steps.indexOf(e)>-1&&("two_step"===e?(this.moveStepField("two_step"),this.set_template("single_step"),Vue.set(this.steps.two_step,"active","no")):"third_step"===e&&(this.moveStepField("third_step"),this.set_template("two_step"),Vue.set(this.steps.third_step,"active","no")))},set_template:function(e){Vue.set(this,"current_step",e),this.enableSortable(),this.show_template_frame(e)},show_template_frame:function(t){setTimeout(function(){var a=e(".single_step_template[data-slug='"+t+"']"),i=e(".wfacp_template_tabs[data-slug='"+t+"']");a.length>0&&(e(".wfacp_template_tabs").removeClass("wfacp_active_tabs"),e(".single_step_template").hide(),i.addClass("wfacp_active_tabs"),a.show())},0,t)},enableSortable:function(){var e=this;setTimeout(function(){wfacp.sortable(".template_field_container",e.StartSortable,e.StopSortable,e.hoverDrag,"","","wfacp_save_btn_style ui-sortable-placeholder ui-state-highlight"),wfacp.sortable(".wfacp_sections_holder.single_step",e.StartSectionSortable,e.StopSectionSortable,function(){},".wfacp_field_container","","",{axis:"y"}),wfacp.sortable(".wfacp_sections_holder.two_step",e.StartSectionSortable,e.StopSectionSortable,function(){},".wfacp_field_container"),wfacp.sortable(".wfacp_sections_holder.third_step",e.StartSectionSortable,e.StopSectionSortable,function(){},".wfacp_field_container")},300)},StartSectionSortable:function(t,a){var i=this.getToElement(t,a);e(i).parents(".wfacp_field_container").addClass("highlight_field_container")},StopSectionSortable:function(t,a){var i=this.getToElement(t,a);e(i).parents(".wfacp_field_container").removeClass("highlight_field_container")},hoverDrag:function(t,a,i){var l=this.getToElement(a,i),s=e(a.target).find(".template_field_placeholder_tbl");"in"===t?e(l).parents(".wfacp_field_container")[0]!==e(a.target).parents(".wfacp_field_container")[0]&&(e(a.target).parents(".wfacp_field_container").addClass("highlight_field_container"),s.length>0&&s.hide()):(s.length>0&&s.show(),e(a.target).parents(".wfacp_field_container").removeClass("highlight_field_container"))},StartSortable:function(t,a){var i=e(".wfacp_save_btn_style.ui-sortable-placeholder.ui-state-highlight");e(a.item[0]).length>0&&i.length>0&&(i.width(e(a.item[0]).width()),i.html("<span class='wfacp_placeholder_text_here'>placeholder</span>")),wfacp.addClass(".wfacp_field_container","activate_dragging_field")},getToElement:function(e,t){var a=e.toElement;return void 0==e.toElement&&t.hasOwnProperty("item")&&t.item.length>0&&(a=t.item[0]),a},StopSortable:function(t,a){var i=this.getToElement(t,a);e(".wfacp_field_container").removeClass("activate_dragging_field highlight_field_container");var l,s=e(i).parents(".wfacp_field_container"),o=e(t.target),n=e(i);"span"===i.localName&&(n=e(i).parent("div")),l=n.attr("data-id");var d=s.attr("step-name"),r=o.attr("step-name"),c=s.attr("field-index"),_=o.attr("field-index");d!==r?(n.remove(),this.parentSwitching(r,d,_,c,l)):c!==_&&(n.remove(),this.updateInput(d,_,c,l))},elementSorting:function(e,t){},dragStart:function(e){t.dragStart(e)},allowDrop:function(e){t.allowDrop(e)},dragEnd:function(e){t.dragEnd(e)},dragEnter:function(e){t.dragEnter(e)},dragLeave:function(e){t.dragLeave(e)},drop:function(e,a,i){var l=t.drop(e);if(!1===l)return null;var s=l[0],o=l[1];if(""===o)return null;this.addInput(a,i,s,o)},addInput:function(t,a,i,l){var s,o=!0,n=e(".single_step").find(".wfacp_field_container[field-index="+a+"]");(n.length>0&&n.find(".wfacp_item_drag[data-id="+i+"]").length>0&&(o=!1),o)&&((s=wfacp.tools.jsp(this.input_fields[l][i])).id=i,s.field_type=l,this.pushFieldInStep(t,a,s),Vue.delete(this.input_fields[l],i),this.validateDependency(),e(".wfacp_field_container").removeClass("highlight_field_container"),e(".wfacp_field_container").removeClass("highlight_field_container activate_dragging_field"))},getFieldFromSection:function(e,t,a){var i=this.findFieldIndex(e,t,a);if(null==i)return null;var l=wfacp.tools.jsp(this.fieldsets[e][t].fields[i]);return wfacp.tools.hp(this.fieldsets[e][t],"fields")||Vue.set(this.fieldsets[e][t],"fields",[]),l},pushFieldInStep:function(e,t,a){wfacp.tools.hp(this.fieldsets[e][t],"fields")||Vue.set(this.fieldsets[e][t],"fields",[]);var i=wfacp.tools.jsp(this.fieldsets[e][t].fields);i.push(a),Vue.set(this.fieldsets[e][t],"fields",i),this.hideFieldContainerPlaceholder(e,t)},parentSwitching:function(e,t,a,i,l){var s=this.getFieldFromSection(e,a,l);if(null!==s){this.pushFieldInStep(t,i,s);var o=wfacp.tools.jsp(this.fieldsets[e][a].fields);Vue.set(this.fieldsets[e][a],"fields",o)}},updateInput:function(e,t,a,i){var l=this.getFieldFromSection(e,t,i);null!=l&&this.pushFieldInStep(e,a,l)},moveStepField:function(e){wfacp.hooks.doAction("manage_step_field",wfacp.tools.jsp(e),this);var t=wfacp.tools.jsp(this.fieldsets[e]);if(void 0!==t&&0!==wfacp.tools.ol(t))for(var a in t)if(0!==wfacp.tools.ol(t[a].fields)){for(var i=t[a].fields,l=0;l<i.length;l++){var s=i[l].id,o=i[l].field_type;Vue.set(this.input_fields[o],s,i[l])}Vue.set(this.fieldsets[e][a],"fields",[])}},removeField:function(e,t,a,i,l){l.stopPropagation();var s=this.findFieldIndex(e,i,t);if(null==s)return null;var o=wfacp.tools.jsp(this.fieldsets[e][i].fields),n=o[s];return o.splice(s,1),Vue.set(this.fieldsets[e][i],"fields",o),wfacp.tools.ol(n)>0&&Vue.set(this.input_fields[a],t,n),this.showFieldContainerPlaceholder(e,i),this.validateDependency(),!0},findFieldIndex:function(e,t,a){if(!wfacp.tools.hp(this.fieldsets[e][t],"fields"))return this.fieldsets[e][t].fields=[],null;var i=wfacp.tools.jsp(this.fieldsets[e][t].fields);if(0===i.length)return null;for(var l=0;l<i.length;l++)if(i[l].id===a)return l;return null},prepareErrorMsg:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=[];for(var i in e)a.push(e[i]);return a.join(t)},getRequiredField:function(){return wfacp.tools.jsp(wfacp_localization.fields.input_field_error)},getEmptySteps:function(){return wfacp.tools.jsp(wfacp_localization.fields.steps_error_msgs)},getSortedElement:function(){var t=this,a=this.getRequiredField(),i=this.getEmptySteps(),l={},s=!1,o=!1,n=0,d=1,r="no",c=!1,_=!1,p=e(".single_step_template"),f={single_step:[],two_step:[],third_step:[]},u=["order_summary","order_coupon","product_switching","shipping_calculator"];if(p.length>0){var h=1;p.each(function(){var p=0,w=e(this).attr("data-slug");if(0!==e(this).find(".wfacp_item_drag").length)if(wfacp.tools.hp(t.fieldsets,w)){var m=wfacp.tools.jsp(t.fieldsets[w]);if(0!==m.length){var v=e(this).find(".wfacp_field_container");v.length>0&&v.each(function(i,l){var v=e(this),g=v.attr("field-index"),b=v[0].querySelectorAll(".wfacp_item_drag");if(!1===wfacp.tools.hp(f,w)&&(f[w]=wfacp.tools.jsp(m)),0!==b.length){f[w][p]=wfacp.tools.jsp(m[g]),f[w][p].fields=[],f[w][p].html_fields={};var y=wfacp.tools.jsp(m[g].fields);b.forEach(function(e,i){var l=e.getAttribute("data-id");"address"===l&&(s=!0,n=h),"shipping-address"===l&&(o=!0,d=h),"product_switching"===l&&(r="yes"),"order_coupon"===l&&(c=!0),"shipping_calculator"===l&&(_=!0),u.indexOf(l)>-1&&(f[w][p].html_fields[l]=!0),wfacp.tools.hp(a,l)&&delete a[l];var m=t.findFieldIndex(w,g,l);if(null!==m){var v=y[m];f[w][p].fields.push(v)}h++}),p++}})}else l[w]=i[w]}else l[w]=i[w];else l[w]=i[w]})}return{fieldsets:f,required:a,empty_steps:l,have_billing_address:s,have_shipping_address:o,have_billing_address_index:n,have_shipping_address_index:d,enabled_product_switching:r,have_shipping_method:_,have_coupon_field:c}},showStepsError:function(e){var t=e;wfacp_localization.global.confirm_button_text;0!==Object.keys(t).length&&t.hasOwnProperty("third_step")&&(delete t.third_step,wfacp_localization.global.confirm_button_text_ok);var a=this.prepareErrorMsg(t," and ");return a+=" "+wfacp_localization.fields.empty_step_error,wfacp.swal({text:a,title:wfacp_localization.fields.validation_error,type:"error",confirmButtonText:wfacp_localization.importer.close_prompt_text,showCloseButton:!0,showCancelButton:!1}),!1},save_template:function(){var a=this.getSortedElement(),i=a.empty_steps,l=wfacp.tools.ol(i);if(l>0){if(1!==l)return this.showStepsError(i),!1;var s=e(".wfacp_step_heading .wfacp_template_tabs:last").data("slug");if(!wfacp.tools.hp(i,s))return this.showStepsError(i),!1}var o=a.required;if(wfacp.tools.ol(o)>0){var n=this.prepareErrorMsg(o);return wfacp.swal({text:n,title:"Validation Error",type:"error",confirmButtonText:wfacp_localization.global.confirm_button_text,showCancelButton:!1,actions:"bwf-swal-single-cta"}),!1}var d=t.editFieldVue(),r=new wfacp.ajax,c={steps:wfacp.tools.jsp(this.steps),fieldsets:a.fieldsets,products:d.products,address_order:d.addressOrder,default_products:d.default_products,product_settings:d.product_settings,wfacp_id:t.id,have_coupon_field:a.have_coupon_field,have_billing_address:a.have_billing_address,have_shipping_address:a.have_shipping_address,have_billing_address_index:a.have_billing_address_index,have_shipping_address_index:a.have_shipping_address_index,enabled_product_switching:a.enabled_product_switching,have_shipping_method:a.have_shipping_method,current_step:this.current_step};r.ajax("save_layout",c),e("#wfacp_save_form_layout").addClass("is_busy"),this.validateDependency(),r.success=function(t){wfacp.show_data_save_model(t.msg),e("#wfacp_save_form_layout").removeClass("is_busy")}},addField:function(){t.modal_add_field.iziModal("open")},editField:function(a,i,l,s){var o=t.editFieldVue(),n=wfacp.tools.jsp(this.fieldsets[a][i].fields[l]);o.current_field_id=n.id,t.current_edit_field={step_name:a,index:l,section:i,field:n};if(e.inArray(n.id,["address","shipping-address","product_switching","shipping-address","wysiwyg_editor"])>-1||e.inArray(n.type,[])>-1)o.model_sub_title="",o.edit_model_field_label="",o.model_field_type="";else{"advanced"===n.field_type&&" | "+wfacp_localization.fields.field_types_label+" : "+n.type,o.edit_model_field_label=n.data_label,"wfacp_wysiwyg"!=n.type?o.model_sub_title=wfacp_localization.fields.field_id_slug+" : "+n.id:o.model_sub_title=wfacp_localization.fields.field_types_label+" : "+n.type}o.setData()},deleteCustomFieldAjax:function(a,i,l,s,o){if(!l)return!1;Vue.delete(s.input_fields[a],i),Vue.delete(s.available_fields[a],i);var n=new wfacp.ajax,d={section:a,index:i,wfacp_id:t.id};n.ajax("delete_custom_field",d),e(".swal2-confirm.swal2-styled").addClass("is_busy"),n.success=function(a){e(".swal2-confirm.swal2-styled").addClass("is_busy"),!0===a.status&&(t.addField(a.data),wfacp.show_data_save_model(a.msg)),"function"==typeof o&&o(a)}},deleteCustomField:function(t,a,i){var l=wfacp_localization.fields.delete_c_field_sub_heading.replace("{{field_name}}","<strong>".concat(i,"</strong>")),s=this;wfacp.swal({html:'<div class="wf_delete_modal_content">'.concat(l,"</div>"),type:"",confirmButtonText:wfacp_localization.fields.yes_delete_the_field,cancelButtonText:wfacp_localization.global.cancel_button_text,showCancelButton:!0,reverseButtons:!0,showCloseButton:!0,onOpen:function(){document.querySelector(".swal2-header").insertAdjacentHTML("beforebegin",'<div class="wffn-swal-modal-title">'+wfacp_localization.fields.delete_modal+"</div>")},preConfirm:function(i){return e("button.swal2-cancel.swal2-styled").removeAttr("disabled"),new Promise(function(e){s.deleteCustomFieldAjax(t,a,i,s,function(t){e(t)})})}}).catch(function(e){console.log("Delete Custom Field Error:",e)})},addSection:function(e){t.step_name=e,t.field_index=null,t.modal_add_section.iziModal("setTitle","Add Section"),t.modal_add_section.iziModal("open")},editSection:function(e,a){t.step_name=e,t.field_index=a,t.modal_add_section.iziModal("setTitle","Edit Section"),t.modal_add_section.iziModal("open")},deleteSection:function(e,t){var a=this,i=wfacp.tools.jsp(this.fieldsets[e][t]),l=i.name,s=wfacp_localization.fields.section.delete.replace("{{section_name}}","<strong>".concat(l,"</strong>")),o=wfacp.swal({type:"error",html:'<div class="wf_delete_modal_content">'.concat(s,"</div>"),confirmButtonText:wfacp_localization.global.confirm_button_text,reverseButtons:!0,showCloseButton:!0,onOpen:function(){document.querySelector(".swal2-header").insertAdjacentHTML("beforebegin",'<div class="wffn-swal-modal-title">'+wfacp_localization.fields.section.modal_title+"</div>")}});o.then(function(l){if(!wfacp.tools.hp(l,"value"))return!1;if(wfacp.tools.hp(i,"fields")&&wfacp.tools.ol(i.fields)>0)for(var s=i.fields,o=0;o<s.length;o++){var n=s[o],d=n.id,r=n.field_type;Vue.set(a.input_fields[r],d,n)}Vue.delete(a.fieldsets[e],t),a.validateDependency()}),o.catch(function(e){})},showFieldContainerPlaceholder:function(t,a){var i=e(".template_field_container."+t+"[field-index="+a+"]");i.length>0&&(0===i.find(".wfacp_item_drag").length&&i.find(".template_field_placeholder_tbl").show())},hideFieldContainerPlaceholder:function(t,a){var i=e(".template_field_container."+t+"[field-index="+a+"]");i.length>0&&i.find(".template_field_placeholder_tbl").hide()},showHideGlobalDependency:function(e){var a=this.global_dependency_messages;if(wfacp.tools.ol(a)>0)for(var i in a){var l=a[i],s=!!wfacp.tools.hp(l,"reverse_check"),o=wfacp.tools.hp(l,"call_back")?l.call_back:"",n="yes",d="no";if(s&&(n="no",d="yes"),wfacp.tools.hp(l,"id"))wfacp.tools.hp(e,l.id)?a[i].show=d:a[i].show=n;else if(wfacp.tools.hp(l,"ids")){for(var r=l.ids,c=[],_=0;_<r.length;_++)wfacp.tools.hp(e,r[_])&&c.push(r[_]);0===c.length?a[i].show=n:a[i].show=d}else""!==o&&window.hasOwnProperty(o)&&window[o](l,i,a,t)}wfacp.hooks.doAction("show_hide_global_dependency",a)},remove_dependency_messages:function(e){var a=this,i=new wfacp.ajax,l=this.global_dependency_messages[e],s="self";wfacp.tools.hp(l,"is_global")&&wfacp.tools.string_to_bool(l.is_global)&&(s="global");var o={index:e,wfacp_id:t.id,message_type:s};i.ajax("hide_notification",o),i.success=function(t){Vue.delete(a.global_dependency_messages,e)}},validateDependency:function(){var e=this;setTimeout(function(){var t=wfacp.tools.jsp(e.fieldsets),a={};for(var i in t){var l=t[i];if(0!==l.length)for(var s in l){var o=l[s].fields;if(0!==o.length)for(var n=0;n<o.length;n++){a[o[n].id]=1}}}e.showHideGlobalDependency(a)})}},data:{current_step:this.builder.layout.current_step,steps:this.steps,fieldsets:this.fieldsets,input_fields:this.input_fields,available_fields:this.available_fields,required_fields:wfacp_localization.fields.input_field_error,error:[],noofstep:1,error_msg:{},global_dependency_messages:this.builder.global_dependency_messages}}),this.layout_vue}},{key:"defaultStepObj",value:function(e){return{name:"Step",slug:"step_"+e,friendly_name:"Step "+e,active:"yes"}}},{key:"dragStart",value:function(e){wfacp.addClass(".wfacp_field_container","activate_dragging_field"),e.dataTransfer.setData("unique_id",e.target.id),e.dataTransfer.setData("section_name",e.target.getAttribute("data-input-section"))}},{key:"dragEnd",value:function(e){wfacp.removeClass(".wfacp_field_container","activate_dragging_field"),wfacp.removeClass(".wfacp_field_container","highlight_field_container")}},{key:"drop",value:function(e){e.preventDefault();var t=e.dataTransfer.getData("unique_id");if(t===e.target.id)return!1;var a=e.dataTransfer.getData("section_name");return this.layout_vue.enableSortable(),[t,a]}},{key:"allowDrop",value:function(e){e.preventDefault()}},{key:"dragEnter",value:function(t){e(t.target).parents(".wfacp_field_container").removeClass(t.target,"activate_dragging_field"),e(t.target).parents(".wfacp_field_container").addClass("highlight_field_container")}},{key:"dragLeave",value:function(t){e(t.target).parents(".wfacp_field_container").addClass(t.target,"activate_dragging_field"),e(t.target).parents(".wfacp_field_container").removeClass("highlight_field_container")}},{key:"getSection",value:function(e,t){return wfacp.tools.hp(this.layout_vue.fieldsets,e)&&wfacp.tools.hp(this.layout_vue.fieldsets[e],t)?wfacp.tools.jsp(this.layout_vue.fieldsets[e][t]):null}},{key:"addSection",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0===wfacp.tools.ol(t))return!1;!1===wfacp.tools.hp(this.layout_vue.fieldsets,this.step_name)&&Vue.set(this.layout_vue.fieldsets,this.step_name,[]);var a=wfacp.tools.jsp(this.layout_vue.fieldsets[this.step_name]);a.push({name:t.name,class:t.class,sub_heading:t.sub_heading,fields:[]}),Vue.set(this.layout_vue.fieldsets,this.step_name,a),this.layout_vue.enableSortable()}},{key:"updateSection",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(0===wfacp.tools.ol(a))return!1;if(wfacp.tools.hp(this.layout_vue.fieldsets,e)&&wfacp.tools.hp(this.layout_vue.fieldsets[e],t)){var i=wfacp.tools.jsp(this.layout_vue.fieldsets[e][t]);return i.name=a.name,i.class=a.class,i.sub_heading=a.sub_heading,Vue.set(this.layout_vue.fieldsets[e],t,i),!0}return!1}},{key:"addField",value:function(e){if(wfacp.tools.ol(e)>0){var t=e.unique_id,a=e.field_type;Vue.set(this.layout_vue.input_fields[a],t,e),Vue.set(this.layout_vue.available_fields[a],t,e)}}},{key:"getAddressFields",value:function(){var e=[{type:"label",label:wfacp_localization.fields.show_field_label1,styleClasses:"wfacp_show_field_lable",visible:function(e){return!0===e.is_address}},{type:"label",label:wfacp_localization.fields.show_field_label2,styleClasses:"wfacp_show_field_lable",visible:function(e){return!0===e.is_address}},{type:"label",label:wfacp_localization.fields.show_field_label3,styleClasses:"wfacp_show_field_lable",visible:function(e){return!0===e.is_address}},{type:"switch",label:wfacp_localization.fields.address.first_name,model:"first_name",hint:"",textOn:wfacp_localization.global.active,textOff:wfacp_localization.global.inactive,styleClasses:["wfacp_first_name"],visible:function(e){return!0===e.is_address}},{type:"input",inputType:"text",label:wfacp_localization.fields.address.label,model:"first_name_label",hint:wfacp_localization.fields.address.billing_address_last_name_hint,placeholder:wfacp_localization.fields.first_name_label,visible:function(e){return!0===e.is_address&&"address"===e.id},validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.fields.address.label,model:"first_name_label",placeholder:wfacp_localization.fields.first_name_label,visible:function(e){return!0===e.is_address&&"shipping-address"===e.id},validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.fields.placeholder_field_label,model:"first_name_placeholder",placeholder:"First Name",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"switch",label:wfacp_localization.fields.address.last_name,model:"last_name",hint:"",textOn:wfacp_localization.global.active,textOff:wfacp_localization.global.inactive,styleClasses:["wfacp_last_name"],visible:function(e){return!0===e.is_address}},{type:"input",inputType:"text",label:wfacp_localization.fields.address.label,model:"last_name_label",hint:wfacp_localization.fields.address.billing_address_last_name_hint,placeholder:"",visible:function(e){return!0===e.is_address&&"address"===e.id},validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.fields.address.label,model:"last_name_label",placeholder:"",visible:function(e){return!0===e.is_address&&"shipping-address"===e.id},validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.fields.address.placeholder,model:"last_name_placeholder",placeholder:"",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"switch",label:wfacp_localization.fields.address.company,model:"company",hint:"",styleClasses:["wfacp_company"],textOn:wfacp_localization.global.active,textOff:wfacp_localization.global.inactive,visible:function(e){return!0===e.is_address}},{type:"input",inputType:"text",label:wfacp_localization.fields.address.label,model:"company_label",placeholder:"",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.fields.address.placeholder,model:"company_placeholder",placeholder:"",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"switch",label:wfacp_localization.fields.address.street_address1,model:"street_address1",hint:"",styleClasses:["wfacp_address_1"],textOn:wfacp_localization.global.active,textOff:wfacp_localization.global.inactive,visible:function(e){return!0===e.is_address}},{type:"input",inputType:"text",label:wfacp_localization.fields.address.label,model:"street_address_1_label",placeholder:"",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.fields.address.placeholder,model:"street_address_1_placeholder",placeholder:"",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"switch",label:wfacp_localization.fields.address.street_address2,model:"street_address2",hint:"",styleClasses:["wfacp_address_2"],textOn:wfacp_localization.global.active,textOff:wfacp_localization.global.inactive,visible:function(e){return!0===e.is_address}},{type:"input",inputType:"text",label:wfacp_localization.fields.address.label,model:"street_address_2_label",placeholder:"",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.fields.address.placeholder,model:"street_address_2_placeholder",placeholder:"",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"switch",label:wfacp_localization.fields.address.city,hint:"",model:"address_city",styleClasses:["wfacp_city"],textOn:wfacp_localization.global.active,textOff:wfacp_localization.global.inactive,visible:function(e){return!0===e.is_address}},{type:"input",inputType:"text",label:wfacp_localization.fields.address.label,model:"address_city_label",placeholder:"City",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.fields.address.placeholder,model:"address_city_placeholder",placeholder:"City",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"switch",label:wfacp_localization.fields.address.state,model:"address_state",styleClasses:["wfacp_state"],hint:"",textOn:wfacp_localization.global.active,textOff:wfacp_localization.global.inactive,visible:function(e){return!0===e.is_address}},{type:"input",inputType:"text",label:wfacp_localization.fields.address.label,model:"address_state_label",placeholder:"State",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.fields.address.placeholder,model:"address_state_placeholder",placeholder:"State",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"switch",label:wfacp_localization.fields.address.zip,model:"address_postcode",hint:"",styleClasses:["wfacp_postcode"],textOn:wfacp_localization.global.active,textOff:wfacp_localization.global.inactive,visible:function(e){return!0===e.is_address}},{type:"input",inputType:"text",label:wfacp_localization.fields.address.label,model:"address_postcode_label",placeholder:"Postcode",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.fields.address.placeholder,model:"address_postcode_placeholder",placeholder:"Postcode",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"switch",label:wfacp_localization.fields.address.country,model:"address_country",hint:"",styleClasses:["wfacp_country"],textOn:wfacp_localization.global.active,textOff:wfacp_localization.global.inactive,visible:function(e){return!0===e.is_address}},{type:"input",inputType:"text",label:wfacp_localization.fields.address.lable,model:"address_country_label",placeholder:"USA",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.fields.address.placeholder,model:"address_country_placeholder",placeholder:"USA",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"switch",label:wfacp_localization.fields.same_as_billing,model:"same_as_billing",textOn:wfacp_localization.global.active,textOff:wfacp_localization.global.inactive,styleClasses:"wfacp_full_width_fields",visible:function(e){return!0===e.is_address&&"shipping-address"===e.id}},{type:"input",inputType:"text",label:wfacp_localization.fields.address.lable,model:"same_as_billing_label",hint:wfacp_localization.fields.same_as_billing_label_hint,styleClasses:"wfacp_full_width_input",placeholder:"USA",visible:function(e){return!0===e.is_address&&"shipping-address"===e.id},validator:VueFormGenerator.validators.string},{type:"switch",label:wfacp_localization.fields.same_as_shipping,model:"same_as_shipping",textOn:wfacp_localization.global.active,textOff:wfacp_localization.global.inactive,styleClasses:"wfacp_full_width_fields",visible:function(e){return!0===e.is_address&&"address"===e.id}},{type:"input",inputType:"text",label:wfacp_localization.fields.address.lable,model:"same_as_shipping_label",hint:wfacp_localization.fields.same_as_shipping_label_hint,styleClasses:"wfacp_full_width_input",placeholder:"USA",visible:function(e){return!0===e.is_address&&"address"===e.id},validator:VueFormGenerator.validators.string}];return wfacp.hooks.applyFilters("wfacp_address_fields",e)}},{key:"getEditableFields",value:function(){var t=[{type:"input",inputType:"text",label:wfacp_localization.fields.label_field_label,model:"label",required:!1,validator:VueFormGenerator.validators.string},{type:"checkbox",label:wfacp_localization.fields.order_summary_allow_delete,model:"allow_delete",hint:wfacp_localization.fields.order_summary_allow_delete_hint,styleClasses:"",visible:function(e){return"order_summary"===e.id}},{type:"checkbox",label:wfacp_localization.fields.order_total_breakup_label,model:"default",hint:wfacp_localization.fields.order_total_breakup_hint,styleClasses:"wfacp_required_cls",visible:function(e){return"order_total"===e.id}},{type:"input",inputType:"text",label:wfacp_localization.fields.options_field_label,model:"options",required:!0,validator:VueFormGenerator.validators.string,visible:function(t){return e.inArray(t.field_type,["select","wfacp_radio","multiselect","select2"])>-1}},{type:"input",inputType:"text",label:wfacp_localization.fields.shipping_field_placeholder,hint:wfacp_localization.fields.shipping_field_placeholder_hint,model:"default",validator:VueFormGenerator.validators.string,visible:function(e){return"shipping_calculator"===e.id}},{type:"input",inputType:"text",label:wfacp_localization.fields.multiselect_maximum_selection,model:"multiselect_maximum",validator:VueFormGenerator.validators.string,visible:function(e){return"multiselect"===e.field_type}},{type:"input",inputType:"text",label:wfacp_localization.fields.multiselect_maximum_error_field_label,model:"multiselect_maximum_error",validator:VueFormGenerator.validators.string,visible:function(e){return"multiselect"===e.field_type}},{type:"input",inputType:"text",label:wfacp_localization.fields.placeholder_field_label,model:"placeholder",validator:VueFormGenerator.validators.string,visible:function(t){return!(e.inArray(t.field_type,["select","wfacp_radio","checkbox","hidden","date","address","product","wfacp_html","multiselect","wfacp_dob"])>-1||!0===t.is_address)}},{type:"input",inputType:"text",label:wfacp_localization.fields.default_field_label,model:"default",validator:VueFormGenerator.validators.string,visible:function(e){return e.is_wfacp_field}},{type:"input",inputType:"text",label:wfacp_localization.settings.product_switching.you_save_text,model:"default",hint:wfacp_localization.fields.product_you_save_merge_tags,validator:VueFormGenerator.validators.string,visible:function(e){return"product"===e.field_type}},{type:"select",inputType:"select",label:wfacp_localization.fields.default_field_label,model:"default",selectOptions:{hideNoneSelectedText:!0},values:function(){return wfacp.tools.jsp(wfacp_localization.fields.default_field_checkbox_options)},visible:function(e){return"checkbox"===e.field_type}},{type:"input",inputType:"text",label:wfacp_localization.settings.coupon.success_message_heading,model:"coupon_success_message_heading",hint:wfacp_localization.settings.coupon.success_message_heading_hint,validator:VueFormGenerator.validators.string,visible:function(e){return"order_coupon"===e.id}},{type:"checkbox",label:wfacp_localization.settings.coupon.style_heading,model:"coupon_style",styleClasses:"wfacp_required_cls",visible:function(e){return"order_coupon"===e.id}},{type:"checkbox",label:wfacp_localization.fields.show_on_thankyou,model:"show_custom_field_at_thankyou",styleClasses:"wfacp_required_cls",visible:function(e){return e.is_wfacp_field}},{type:"checkbox",label:wfacp_localization.fields.show_in_email,model:"show_custom_field_at_email",styleClasses:"wfacp_required_cls",visible:function(e){return e.is_wfacp_field}}];t=wfacp.hooks.applyFilters("wfacp_editable_fields",t);var a={type:"checkbox",label:wfacp_localization.fields.required_field_label,model:"required",styleClasses:"wfacp_required_cls",default:!0,visible:function(t){return t.hasOwnProperty("show_required_field")&&t.show_required_field||"hidden"!==t.field_type&&!0!==t.is_address&&e.inArray(t.field_type,["product","wfacp_html"])<0}};t.push(a);return t.push({type:"checkbox",label:"wfacp_initiator_field",model:"temp_required",styleClasses:"wfacp_initiator_field",default:!0}),t}},{key:"updateField",value:function(e){if(0===wfacp.tools.ol(e))return!1;if(wfacp.tools.hp(this.layout_vue.fieldsets,e.step_name)&&wfacp.tools.hp(this.layout_vue.fieldsets[e.step_name][e.section],"fields")){var t={},a=wfacp.tools.jsp(e.field.options);if(wfacp.tools.ol(a)>0){for(var i in a){var l=a[i];t[l=l.trim()]=l}e.field.options=t}Vue.set(this.layout_vue.fieldsets[e.step_name][e.section].fields,e.index,e.field)}}},{key:"addFieldVue",value:function(t){if(!0!==this.add_field_model_open){this.add_field_model_open=!0;var a=this;return this.add_field_vue=new Vue({el:"#add-field-form",components:{"vue-form-generator":VueFormGenerator.component},methods:{defaultModel:function(){return{label:"",placeholder:"",name:"",cssready:"",field_type:"text",section_type:"advanced",options:"",default:"",enable_time:!1,preferred_time_format:"12",allow_delete:!1,multiselect_maximum:wfacp_localization.fields.multiselect_maximum_selection_default_count,multiselect_maximum_error:wfacp_localization.fields.multiselect_maximum_error,show_custom_field_at_thankyou:!1,show_custom_field_at_email:!1,show_required_field:!1,required:!0}},onSubmit:function(){var t=this;if(a.add_field_vue.$el){var i=a.add_field_vue.$el.querySelector(".wfacp_btn.wfacp_btn_primary");e(i).addClass("is_busy")}var l=new wfacp.ajax;if("wfacp_wysiwyg"===this.model.field_type){var s=new Date;this.model.name=s.getTime()}"multiselect"!==this.model.field_type&&(delete this.model.multiselect_maximum,delete this.model.multiselect_maximum_error);var o={fields:wfacp.tools.jsp(this.model),section:"billing",wfacp_id:a.id};l.ajax("add_field",o),l.success=function(e){!0===e.status&&a.addField(e.data)},l.complete=function(){if(a.add_field_vue.$el){var i=a.add_field_vue.$el.querySelector(".wfacp_btn.wfacp_btn_primary");e(i).removeClass("is_busy")}e("#modal-saved-data-success").iziModal("setTitle",wfacp_localization.global.changes_saved),e("#modal-saved-data-success").iziModal("open"),a.modal_add_field.iziModal("close"),t.model=t.defaultModel()}}},data:{modal:t,isLoading:!1,wfacp_id:a.builder.id,model:{label:"",placeholder:"",name:"",cssready:"",field_type:"text",section_type:"advanced",options:"",default:"",enable_time:!1,preferred_time_format:"12",allow_delete:!1,show_custom_field_at_thankyou:!1,show_custom_field_at_email:!1,show_required_field:!1,multiselect_maximum:wfacp_localization.fields.multiselect_maximum_selection_default_count,multiselect_maximum_error:wfacp_localization.fields.multiselect_maximum_error,required:!0},schema:{fields:[{type:"select",label:wfacp_localization.fields.field_types_label,model:"field_type",values:function(){return wfacp.tools.jsp(wfacp_localization.fields.field_types)},selectOptions:{hideNoneSelectedText:!0}},{type:"input",inputType:"text",label:wfacp_localization.fields.label_field_label,model:"label",required:!0,validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.fields.name_field_label,hint:wfacp_localization.fields.name_field_label_hint,model:"name",required:!0,visible:function(e){return"wfacp_wysiwyg"!==e.field_type},validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.fields.options_field_label,model:"options",required:!0,visible:function(t){return e.inArray(t.field_type,["select","wfacp_radio","multiselect","select2"])>-1},validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.fields.multiselect_maximum_selection,model:"multiselect_maximum",visible:function(e){return"multiselect"===e.field_type}},{type:"input",inputType:"text",label:wfacp_localization.fields.multiselect_maximum_error_field_label,model:"multiselect_maximum_error",visible:function(e){return"multiselect"===e.field_type}},{type:"input",inputType:"text",label:wfacp_localization.fields.default_field_label,model:"default",validator:VueFormGenerator.validators.string,visible:function(t){return!(e.inArray(t.field_type,["checkbox","wfacp_wysiwyg"])>-1)}},{type:"select",label:wfacp_localization.fields.default_field_label,model:"default",validator:VueFormGenerator.validators.string,values:function(){return wfacp.tools.jsp(wfacp_localization.fields.default_field_checkbox_options)},visible:function(e){return"checkbox"===e.field_type},selectOptions:{hideNoneSelectedText:!0}},{type:"input",inputType:"text",label:wfacp_localization.fields.placeholder_field_label,model:"placeholder",validator:VueFormGenerator.validators.string,visible:function(t){return e.inArray(t.field_type,["select","wfacp_radio","checkbox","hidden","date","wfacp_wysiwyg","multiselect","wfacp_dob"])<0}},{type:"checkbox",label:wfacp_localization.fields.show_on_thankyou,model:"show_custom_field_at_thankyou",styleClasses:"wfacp_required_cls"},{type:"checkbox",label:wfacp_localization.fields.show_in_email,model:"show_custom_field_at_email",styleClasses:"wfacp_required_cls"},{type:"checkbox",label:wfacp_localization.fields.required_field_label,model:"required",styleClasses:["wfacp_required_cls","wfacp_full_width_fields"],visible:function(e){return"hidden"!==e.field_type&&"wfacp_wysiwyg"!==e.field_type}}]},formOptions:{validateAfterChanged:!0}}}),this.add_field_vue}}},{key:"editFieldVue",value:function(){if(!0===this.edit_field_model_open)return this.edit_field_vue;this.edit_field_model_open=!0;var t=this,a={};for(var i in wfacp_data.product_switcher_data.settings)e.inArray(wfacp_data.product_switcher_data.settings[i],["false","true",!1,!0])>-1?a[i]=wfacp.tools.string_to_bool(wfacp_data.product_switcher_data.settings[i]):a[i]=wfacp_data.product_switcher_data.settings[i];for(var l in wfacp_data.product_switcher_data.products)wfacp_data.product_switcher_data.products[l].enable_delete=wfacp.tools.string_to_bool(wfacp_data.product_switcher_data.products[l].enable_delete);return this.edit_field_vue=new Vue({el:"#edit-field-form",components:{"vue-form-generator":VueFormGenerator.component},methods:{defaultModel:function(){return{field_type:"text",section_type:"billing",label:"",placeholder:"",cssready:"",options:"",is_address:!1,id:"",default:"",is_wfacp_field:!1,show_required_field:!1,allow_delete:!1,required:!0}},enableAddressSortable:function(){var t=this;setTimeout(function(){e(".wfacp_address_sortable_area").sortable({items:"div.wfacp_sortable_address_field",cursor:"move",axis:"y",handle:".wfacp_drag_address_icon",scrollSensitivity:40,stop:function(e,a){t.AddressSortableStop(e,a)}}),e(document.body).off("click",".wfacp_drag_address_field_enable"),e(document.body).on("click",".wfacp_drag_address_field_enable",function(){e(this).hasClass("dashicons-visibility")?(e(this).removeClass("dashicons-visibility"),e(this).addClass("dashicons-hidden")):(e(this).removeClass("dashicons-hidden"),e(this).addClass("dashicons-visibility"))}),e(document.body).off("click",".wfacp_address_open_accordian"),e(document.body).on("click",".wfacp_address_open_accordian",function(){var t=e(this).parents(".wfacp_address_field").children(".wfacp_billing_accordion_content");e(this).hasClass("dashicons-arrow-up")?(t.slideUp(),e(this).removeClass("dashicons-arrow-up")):(t.slideDown(),e(this).addClass("dashicons-arrow-up"))}),e(document.body).on("change",".wfacp_address_type",function(){var t=e(this).parents(".wfacp_billing_accordion_content");e(this).is(":checked")?"radio"===e(this).val()?t.find(".wfacp_address_type_radio_container").addClass("wfacp_address_radio_container_show"):t.find(".wfacp_address_type_radio_container").removeClass("wfacp_address_radio_container_show"):t.find(".wfacp_address_type_radio_container").removeClass("wfacp_address_radio_container_show")})},800)},AddressSortableStop:function(e,t){},setData:function(){var e=this,a=t.current_edit_field;if(0===wfacp.tools.ol(a))return!0;this.model.label=a.field.label,this.model.placeholder=void 0!==a.field.placeholder?a.field.placeholder:"",wfacp.tools.hp(a.field,"cssready")?this.model.cssready=a.field.cssready.join(","):this.model.cssready="",this.model.section_type=a.field.field_type,this.model.field_type=a.field.type,"multiselect"==this.model.field_type&&(this.model.multiselect_maximum=a.field.multiselect_maximum,this.model.multiselect_maximum_error=a.field.multiselect_maximum_error),this.model.is_wfacp_field=!!wfacp.tools.hp(a.field,"is_wfacp_field"),wfacp.tools.ol(a.field.options)>0?this.model.options=wfacp.tools.values(a.field.options).join("|"):this.model.options="",this.model.default=a.field.default,this.model.required=wfacp.tools.string_to_bool(a.field.required),this.model.id=a.field.id,"product_switching"===this.model.id?(this.products=wfacp.tools.jsp(this.products_updated),this.default_products=wfacp.tools.jsp(this.default_products_updated),this.product_settings=wfacp.tools.jsp(this.product_settings_updated)):"order_summary"==this.model.id&&(this.model.allow_delete=!!wfacp.tools.hp(a.field,"allow_delete")&&wfacp.tools.string_to_bool(a.field.allow_delete)),"wfacp_wysiwyg"===this.model.field_type&&(this.model.required=!1),a.field.hasOwnProperty("show_required_field")&&(this.model.show_required_field=wfacp.tools.string_to_bool(a.field.show_required_field)),this.model=wfacp.hooks.applyFilters("wfacp_field_data_merge_with_model",this.model,a);var i=document.getElementById("wfacp-initiator-field");null!==i&&i.click(),setTimeout(function(){t.modal_edit_field.WoofunnelModal("open"),e.setAddressOrder()},100)},setAddressOrder:function(){if(wfacp.tools.hp(wfacp_data.address_order,this.model.id)){var t=wfacp_data.address_order[this.model.id],a=this.address_order_html[this.model.id];""!==a&&e("#wfacp_address_field_"+this.model.id).html(a),setTimeout(function(t){for(var a=0;a<t.length;a++){var i=t[a].key,l=t[a].status,s=t[a].label,o=e('.wfacp_address_field[data-key="'+i+'"]');if(o.length>0){var n=o.find(".wfacp_drag_address_field_enable");1==l||"true"==l?(n.removeClass("dashicons-hidden"),n.addClass('dashicons-visibility"')):(n.removeClass("dashicons-visibility"),n.addClass("dashicons-hidden")),o.find(".wfacp_label").val(s);var d=o.find(".wfacp_placeholder");d.length>0&&d.val(t[a].placeholder);var r=o.find(".wfacp_required");r.length>0&&(1==t[a].required||"true"==t[a].required?r.prop("checked",!0):r.prop("checked",!1))}}},200,t)}},saveAddressOrder:function(t){var a=this;return new Promise(function(i){if("address"===t.field.id||"shipping-address"===t.field.id){var l=e("#wfacp_address_field_"+t.field.id);if(l.length>0){var s=[],o=l.find(".wfacp_address_field"),n=a;o.each(function(){var a={key:e(this).data("key"),status:!1,label:e(this).find(".wfacp_label").val()},i=e(this).find(".wfacp_address_type:checked").val();n.addressOrder["display_type_"+t.field.id]=i;var l=e(this).find(".wfacp_label_2");l.length>0&&"radio"==i&&(a.label_2=l.val()),e(this).find(".wfacp_drag_address_field_enable").hasClass("dashicons-visibility")&&(a.status=!0);var o=e(this).find(".wfacp_placeholder");o.length>0&&(a.placeholder=o.val());var d=e(this).find(".wfacp_required");d.length>0&&(d.is(":checked")?a.required=!0:a.required=!1),s.push(a)}),n.addressOrder[t.field.id]=s,e(".wfacp_address_open_accordian").removeClass("dashicons-arrow-up"),e(".wfacp_billing_accordion_content").hide(),i(s)}}else i({})})},onSubmit:function(){var a=wfacp.tools.jsp(this.model),i=t.current_edit_field;i.field.label=a.label,i.field.placeholder=a.placeholder,i.field.cssready=a.cssready.split(","),i.field.type=a.field_type,i.field.field_type=a.section_type,i.field.options=a.options.split("|"),"multiselect"==i.field.type&&(i.field.multiselect_maximum=a.multiselect_maximum,i.field.multiselect_maximum_error=a.multiselect_maximum_error),"order_summary"==i.field.id&&(i.field.allow_delete=a.allow_delete),i.field.default="",wfacp.tools.hp(a,"default")&&(i.field.default=a.default),i.field.required=a.required,i=wfacp.hooks.applyFilters("wfacp_before_field_save",i,a),i=wfacp.tools.jsp(i),wfacp.tools.hp(i.field,"is_wfacp_field")&&"hidden"==i.field.type&&(i.field.required=!1),t.updateField(i),"product_switching"===i.field.id&&(this.products_updated=wfacp.tools.jsp(this.products),this.default_products_updated=wfacp.tools.jsp(this.default_products),this.product_settings_updated=wfacp.tools.jsp(this.product_settings)),"address"!==i.field.id&&"shipping-address"!==i.field.id||(this.address_order_html[i.field.id]=e("#wfacp_address_field_"+i.field.id).html()),this.model=this.defaultModel(),this.saveAddressOrder(i).finally(function(){document.getElementById("wfacp_save_form_layout").click(),t.modal_edit_field.WoofunnelModal("close")})}},data:{product_switcher_updated:!1,wfacp_id:t.builder.id,current_field_id:"default",products:wfacp.tools.jsp(wfacp_data.product_switcher_data.products),products_updated:wfacp.tools.jsp(wfacp_data.product_switcher_data.products),is_hide_additional_information_updated:wfacp.tools.jsp(wfacp_data.product_switcher_data.is_hide_additional_information),is_hide_additional_information:wfacp.tools.jsp(wfacp_data.product_switcher_data.is_hide_additional_information),additional_information_title_updated:wfacp.tools.jsp(wfacp_data.product_switcher_data.additional_information_title),additional_information_title:wfacp.tools.jsp(wfacp_data.product_switcher_data.additional_information_title),default_products:[],default_products_updated:wfacp.tools.jsp(wfacp_data.product_switcher_data.default_products),product_settings:wfacp.tools.jsp(a),product_settings_updated:wfacp.tools.jsp(a),model_title:wfacp_localization.fields.add_field,addressOrder:wfacp_data.address_order,address_order_html:{address:"","shipping-address":""},model_sub_title:"",edit_model_field_label:"",model_field_type:"",model:{field_type:"text",section_type:"billing",options:"",default:"",label:"",placeholder:"",cssready:"",is_address:!1,is_wfacp_field:!1,allow_delete:!1,show_required_field:!1,required:!0},schema:{groups:[{fields:t.getEditableFields()},{fields:t.getAddressFields()}]},formOptions:{validateAfterChanged:!0}}}),this.edit_field_vue}},{key:"addSectionVue",value:function(e){if(!0!==this.add_section_model_open){this.add_section_model_open=!0;var t=this;return this.add_section_vue=new Vue({el:"#add-section-form",components:{"vue-form-generator":VueFormGenerator.component},methods:{defaultModel:function(){return{name:"",classes:wfacp_localization.fields.section.default_classes,sub_heading:""}},clearData:function(){this.model=this.defaultModel()},setData:function(){var e=t.getSection(t.step_name,t.field_index);null!==e?(this.btn_name=wfacp_localization.global.update_btn,this.model.name=e.name,this.model.classes=e.class,this.model.sub_heading=e.sub_heading):this.btn_name=wfacp_localization.fields.add_new_btn},onSubmit:function(){var e=wfacp.tools.jsp(this.model);null==t.field_index?t.addSection(t.step_name,{name:e.name,class:e.classes,sub_heading:e.sub_heading}):t.updateSection(t.step_name,t.field_index,{name:e.name,class:e.classes,sub_heading:e.sub_heading}),this.model=this.defaultModel(),t.modal_add_section.iziModal("close")}},data:{modal:e,isLoading:!1,step_name:"single_step",btn_name:wfacp_localization.fields.section.add_heading,wfacp_id:t.builder.id,model:{name:"",classes:wfacp_localization.fields.section.default_classes,sub_heading:""},schema:{fields:[{type:"input",inputType:"text",label:wfacp_localization.fields.section.fields.heading,model:"name",required:!1,validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.fields.section.fields.sub_heading,model:"sub_heading",validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.fields.section.fields.classes,model:"classes"}]},formOptions:{validateAfterChanged:!0}}}),this.add_section_vue}}},{key:"model",value:function(){var t=this;this.modal_add_field=e("#modal-add-field"),this.modal_add_field.length>0&&this.modal_add_field.iziModal({title:wfacp_localization.fields.add_field,headerColor:"#6dbe45",background:"#efefef",borderBottom:!1,radius:6,width:640,overlayColor:"rgba(0, 0, 0, 0.35)",transitionIn:"fadeInUp",transitionOut:"fadeOut",navigateArrows:"false",onOpening:function(e){t.addFieldVue(e)}}),this.modal_edit_field=e("#modal-edit-field"),this.modal_edit_field.length>0&&(this.modal_edit_field.WoofunnelModal(),this.modal_edit_field.on("onopend",function(){var e=t.current_edit_field.field.id;"address"!==e&&"shipping-address"!==e||t.editFieldVue().enableAddressSortable()}),this.modal_edit_field.on("onopend",function(){setTimeout(function(){var a=e("#product_switching");a.length>0&&a.find(".wfacp_tabs .wfacp_tab_link").on("click",function(t){t.preventDefault(),e(".wfacp_tab_link").removeClass("activelink"),e(this).addClass("activelink");var a=e(this).data("tag");e(".wfacp_tab_container").removeClass("wfacp_tab_active").addClass("wfacp_tab_hide"),e(a).addClass("wfacp_tab_active").removeClass("wfacp_tab_hide")});var i=t.editFieldVue();wfacp.tools.ol(i.products)>0&&wfacp.tools.kys(i.products).forEach(function(e,a){var i="whats_included_"+e;wp.editor.remove(i);var l=wfacp.tools.jsp(wfacp.editorConfig);l.tinymce.init_instance_callback=function(e){e.on("Change",function(a){var i=e.targetElm.getAttribute("product_id");t.editFieldVue().products[i].whats_included=e.getContent()})},wp.editor.initialize(i,l)})},600),setTimeout(function(){if(e("#wfacp_wysiwyg_editor").length>0){wp.editor.remove("wfacp_wysiwyg_editor");var a=wfacp.tools.jsp(wfacp.editorConfig);a.tinymce.init_instance_callback=function(e){e.on("Change",function(a){var i=t.editFieldVue();Vue.set(i.model,"default",e.getContent())})},wp.editor.initialize("wfacp_wysiwyg_editor",a)}})}),this.modal_edit_field.on("onclosed",function(){var a=t.editFieldVue();if(a.products=a.products_updated,e("#wfacp_wysiwyg_editor").length>0){wp.editor.remove("wfacp_wysiwyg_editor")}})),this.modal_add_section=e("#modal-add-section"),this.modal_add_section.length>0&&this.modal_add_section.iziModal({headerColor:"#6dbe45",background:"#efefef",borderBottom:!1,width:600,radius:6,overlayColor:"rgba(0, 0, 0, 0.35)",transitionIn:"fadeInUp",transitionOut:"fadeOut",navigateArrows:"false",onOpening:function(e){t.addSectionVue(e),t.add_section_vue.setData()},onClosed:function(e){t.add_section_vue.clearData()}})}},{key:"field_data_merge_with_model",value:function(e,t){return wfacp.tools.hp(e,"id")&&"order_coupon"===e.id&&(e.coupon_success_message_heading=t.field.coupon_success_message_heading,e.coupon_remove_message_heading=t.field.coupon_remove_message_heading,e.coupon_style=wfacp.tools.string_to_bool(t.field.coupon_style)),wfacp.tools.hp(e,"is_wfacp_field")&&1==e.is_wfacp_field&&(e.enable_time=wfacp.tools.string_to_bool(t.field.enable_time),e.preferred_time_format=t.field.preferred_time_format,e.show_custom_field_at_thankyou=wfacp.tools.string_to_bool(t.field.show_custom_field_at_thankyou),e.show_custom_field_at_email=wfacp.tools.string_to_bool(t.field.show_custom_field_at_email)),e}},{key:"wfacp_before_field_save",value:function(e,t){return wfacp.tools.hp(t,"id")&&"order_coupon"===t.id&&(e.field.coupon_success_message_heading=t.coupon_success_message_heading,e.field.coupon_remove_message_heading=t.coupon_remove_message_heading,e.field.coupon_style=wfacp.tools.string_to_bool(t.coupon_style)),wfacp.tools.hp(t,"is_wfacp_field")&&1==t.is_wfacp_field&&(e.field.enable_time=t.enable_time,e.field.preferred_time_format=t.preferred_time_format,e.field.show_custom_field_at_thankyou=t.show_custom_field_at_thankyou,e.field.show_custom_field_at_email=t.show_custom_field_at_email),e}}]),t}(),i=function(){function t(e){_classCallCheck(this,t),null!=document.getElementById("wfacp_design_container")&&(this.id=e.id,this.selected=e.design.selected,this.selected_type=e.design.selected_type,this.designs=e.design.designs,this.design_types=e.design.design_types,this.description="",this.template_active=e.design.template_active,this.selected_template=this.designs[this.selected_type][this.selected],this.main(),this.model()),this.jQuery()}return _createClass(t,[{key:"main",value:function(){var t=this;return wfacp.tools.hp(this.designs,this.selected_type)&&wfacp.tools.hp(this.designs[this.selected_type],this.selected)||(this.selected_type="pre_built",this.selected="shopcheckout"),this.main=new Vue({el:"#wfacp_design_container",methods:{get_page_title:function(){return wfacp_data.name},get_edit_link:function(){var a=wfacp_data.template_edit_url[this.selected_type].url;if("oxy"===this.selected_type&&"oxy_1"===this.selected){var i={url:a,id:t.id},l=new wfacp.ajax;l.ajax("update_edit_url",i),l.success=function(t){"string"==typeof t&&(t=JSON.parse(t)),!0===t.status&&e("a.wfacp_funnel_btn_temp_alter.wfacp_funnel_btn_white_temp").attr("href",t.url)}}return a},get_button_text:function(){return wfacp_data.template_edit_url[this.selected_type].button_text},setTemplateType:function(e){Vue.set(this,"current_template_type",e),this.hide_tempate_dropdown()},setTemplate:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return Vue.set(this,"selected",e),Vue.set(this,"selected_type",t),wfacp.hooks.doAction("wfacp_set_template",e,t),this.template_active="yes",this.save("yes",a)},show_template_dropdown:function(e){var t=e.target.closest(".wfacp_field_select_dropdown");t.classList.toggle("active"),t.querySelector(".wfacp_field_dropdown").classList.toggle("wfacp-hide")},hide_tempate_dropdown:function(){var e=document.querySelector(".wfacp_template_editor");null!=e&&(e.querySelector(".wfacp_field_select_dropdown").classList.remove("active"),e.querySelector(".wfacp_field_dropdown").classList.add("wfacp-hide"))},removeDesign:function(e){var a=new wfacp.ajax,i={wfacp_id:t.id};a.ajax("remove_design",i),wfacp.show_spinner(),a.success=function(t){wfacp_data.layout.current_step="single_step","function"==typeof e&&e(t)},a.error=function(e){}},showFailedImport:function(e){wfacp.swal({html:e,title:wfacp_localization.importer.failed_import,text:wfacp_localization.importer.failed_import_sub_heading,type:"warning",allowEscapeKey:!0,showCancelButton:!1,showCloseButton:!0,confirmButtonText:wfacp_localization.importer.close_prompt_text})},importTemplate:function(a,i,l){var s=this,o=new wfacp.ajax,n={builder:i,template:a.slug,wfacp_id:t.id,is_multi:"yes"===a.multistep?"yes":"no"};o.ajax("import_template",n),wfacp.show_spinner(),o.success=function(t){!0===t.status?""!==a.thumbnail?(s.setTemplate(a.slug,i),setTimeout(function(){if(void 0!==a.thumbnail){var i=e(".wfacp_template_preview_container");i.find(".wfacp_template_importing_loader").show();var s=new Image;s.src=a.thumbnail,s.onload=function(){setTimeout(function(e){i.find(".wfacp_template_importing_loader").hide()},1e3,t)}}l(t)},300)):l(t):(setTimeout(function(e){s.showFailedImport(e)},200,t.msg),l(t))}},get_remove_template:function(){var t=this;wfacp.swal({allowEscapeKey:!1,confirmButtonText:wfacp_localization.importer.remove_template.button_text,html:'<div class="wf_delete_modal_content">'.concat(wfacp_localization.importer.remove_template.sub_heading,"</div>"),showLoaderOnConfirm:!1,reverseButtons:!0,showCloseButton:!0,preConfirm:function(){return e("button.swal2-cancel.swal2-styled").removeAttr("disabled"),new Promise(function(e){t.removeDesign(function(a){t.template_active="no",t.selected_template="",e(a)})})},onOpen:function(){document.querySelector(".swal2-header").insertAdjacentHTML("beforebegin",'<div class="wffn-swal-modal-title">'+wfacp_localization.importer.remove_template.modal_title+"</div>")}})},maybeInstallPlugin:function(t,a,i){var l=this;this.cb=i,this.selected_template=t;var s=builder.pageBuildersOptions[this.current_template_type].plugins,o=0;e.each(s,function(e,t){"install"===t.status&&(o++,window.wp.updates.queue.push({action:"install-plugin",data:{slug:t.slug}}))}),window.wp.updates.queueChecker(),0===o&&e.each(s,function(e,t){"activate"===t.status&&l.activatePlugin(t.init)})},afterInstall:function(t,a){var i=this,l=builder.pageBuildersOptions[this.current_template_type].plugins;e.each(l,function(e,t){"install"===t.status&&a.slug===t.slug&&i.activatePlugin(t.init)})},swalLoadingText:function(t){0===e(".swal2-actions.swal2-loading .loading-text").length&&e(".swal2-actions.swal2-loading").append("<div class='loading-text'></div>"),e(".swal2-actions.swal2-loading .loading-text").text(t)},activatePlugin:function(t){var a=new wfacp.ajax,i=this,l={plugin_init:t};a.ajax("activate_plugin",l),wfacp.show_spinner(),a.success=function(t){i.importTemplate(i.selected_template,i.current_template_type,i.cb);var a=builder.pageBuildersOptions[i.current_template_type].plugins;e.each(a,function(e,a){a.init===t.init&&("install"!==a.status&&"activate"!==a.status||(builder.pageBuildersOptions[i.current_template_type].plugins[e].status=null))})},a.error=function(e){}},triggerPreview:function(t,a,i){this.is_previewing={slug:a,type:i},e("body").addClass("hide_bscroll"),setTimeout(function(){e(".wfacp_global_loader").hide()},600),setTimeout(function(){e(".wfacp_template_preview_sidebar .wfacp_template_page_options").removeClass("active_preview"),e(".wfacp_template_preview_sidebar .wfacp_template_page_options[ pre_slug="+a+"]").addClass("active_preview");var t=e(".wfacp_template_page_options.active_preview"),i=e(".wfacp_template_preview_sidebar"),l=t.offset().top-i.offset().top+i.scrollTop();i.animate({scrollTop:l})},100)},previewClosed:function(){this.is_previewing=!1,e("body").removeClass("hide_bscroll")},setViewport:function(t,a){var i=e(a.currentTarget);e(".wfacp_template_viewport .wfacp_viewport_icons").removeClass("active"),e(i).addClass("active"),e(".wfacp_template_preview_wrap .wfacp_template_preview_frame").removeClass("desktop tablet mobile"),e(".wfacp_template_preview_wrap .wfacp_template_preview_frame").addClass(t)},ShouldPreview:function(e,t){return!1!==this.is_previewing&&(this.is_previewing.slug===e&&this.is_previewing.type===t)},getPreviewUrl:function(e,t){return"oxy"===t&&(t="oxygen"),("customizer"===t||"embed_forms"===t||"pre_built"===t||"wc_checkout"===t&&"wp_editor"===t)&&(t="elementor"),"https://templates-"+t+".funnelswp.com/checkouts/"+e+"/"},triggerImport:function(t,a,i,l){var s=this,o=!0;if(!_.isUndefined(builder.pageBuildersOptions[this.current_template_type])){var n=builder.pageBuildersOptions[this.current_template_type].plugins;e.each(n,function(e,t){o&&("install"!==t.status&&"activate"!==t.status||(o=!1))}),"gutenberg"===this.current_template_type&&wfacp.tools.hp(t,"build_from_scratch")&&(o=!0)}if(!1===o){var d=!0;return"no"===builder.pageBuildersTexts[this.current_template_type].show_cancel_btn&&(d=!1),void wfacp.swal({allowEscapeKey:!1,showConfirmButton:d,confirmButtonText:builder.pageBuildersTexts[this.current_template_type].ButtonText,showCancelButton:d,cancelButtonText:builder.pageBuildersTexts[this.current_template_type].close_btn,allowOutsideClick:!1,cancelButtonColor:"#e33b3b",reverseButtons:!0,showCloseButton:!0,html:'<div class="wf_delete_modal_content">'.concat(builder.pageBuildersTexts[this.current_template_type].text,"</div>"),showLoaderOnConfirm:!1,onOpen:function(e){e.closest(".swal2-container")&&e.closest(".swal2-container").classList.add("bwf-modal-zindex"),document.querySelector(".swal2-header").insertAdjacentHTML("beforebegin",'<div class="wffn-swal-modal-title">'+builder.pageBuildersTexts[s.current_template_type].title+"</div>")},preConfirm:function(){if(e("button.swal2-cancel.swal2-styled").removeAttr("disabled"),"no"===builder.pageBuildersTexts[s.current_template_type].noInstall)return new Promise(function(e){s.maybeInstallPlugin(t,i,e)});"yes"===builder.pageBuildersTexts[s.current_template_type].noInstall&&"install"===builder.pageBuildersTexts[s.current_template_type].plugin_status&&window.open(builder.pageBuildersTexts[s.current_template_type].builder_link,"_blank")}})}e(".wfacp_steps_btn_green").hide();var r=e(l.target),c=e(l.currentTarget);if(r.closest(".wfacp_temp_middle_align, .wfacp-preview-overlay").find(".wfacp_import_template").show(),r.closest(".wfacp_template_sec").hasClass("wfacp_template_importing"))return this.previewClosed(),void console.log("Importer already running");var p=r.closest(".wfacp_template_sec");p.addClass("wfacp_template_importing"),c.addClass("is_busy");var f=function(t){p.removeClass("wfacp_template_importing"),c.removeClass("is_busy"),e(".wfacp_steps_btn_green").show()};!t.hasOwnProperty("build_from_scratch")||!0!==t.build_from_scratch&&"yes"!==t.build_from_scratch?this.importTemplate(t,i,f):this.setTemplate(a,i,f)},save:function(){var a=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"yes",l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=new wfacp.ajax,o={selected_type:this.current_template_type,selected:this.selected,wfacp_id:t.id,template_active:i};s.ajax("save_design",o);var n=this.designs[this.current_template_type][this.selected];void 0!==n.build_from_scratch&&!0===n.build_from_scratch&&(this.selected_template=n),wfacp.show_spinner(),s.success=function(t){var i=a;wfacp.show_data_save_model(t.msg),a.selected_type=a.current_template_type,a.selected_template=a.designs[a.selected_type][a.selected],e("#wfacp_control > .wfacp_p20_noside").show(),i.previewClosed(),"2"==a.selected_template.no_steps?wfacp_data.layout.current_step="two_step":"3"==a.selected_template.no_steps?wfacp_data.layout.current_step="third_step":wfacp_data.layout.current_step="single_step","function"==typeof l&&l(t)},s.error=function(){inst.previewClosed()}}},mounted:function(){var t=this;e(document.body).click(function(a){"wfacp_editor_label wfacp_field_select_label"!==e(a.target).attr("class")&&"wfacp_editor_label wfacp_field_select_label"!==e(a.target).parents().attr("class")&&"wfacp_dropdown_header_label"!==e(a.target).attr("class")&&e(".wfacp_field_select_dropdown").hasClass("active")&&t.hide_tempate_dropdown()})},data:{current_template_type:this.selected_type,selected_type:this.selected_type,designs:this.designs,design_types:this.design_types,selected:this.selected,selected_template:this.selected_template,template_active:this.template_active,temp_template_type:"",temp_template_slug:"",description:this.description,is_previewing:!1}}),this.main}},{key:"model",value:function(){e(document.body).on("click",".wfacp_embed_form_tab",function(){var t=e(this).attr("aria-controls");e(".wfacp_embed_form_tab").removeClass("wfacp-active"),e(this).addClass("wfacp-active"),e(".wfacp_embed_fieldset").hide(),e(".wfacp_embed_fieldset."+t).show()})}},{key:"jQuery",value:function(){var t=this;e(document).on("wp-plugin-install-success",function(e,a){t.main.afterInstall(e,a)}),e(document).on("click",".wfacp_filter_container_inner",function(){e(".wfacp_filter_container_inner").removeClass("wfacp_selected_filter");var t=e(this).data("filter-type"),a=e(".wfacp_temp_card");(e(this).addClass("wfacp_selected_filter"),0!=t)?(a.hide(),e(".wfacp_temp_card[data-steps="+t+"]").show()):a.show()})}}]),t}(),l=function(){function t(e){_classCallCheck(this,t),null!=document.getElementById("modal-checkout-page")&&(this.add_new_model_open=!1,this.id=wfacp.tools.hp(e,"id")?e.id:0,this.name=wfacp.tools.hp(e,"name")?e.name:"",this.post_name=wfacp.tools.hp(e,"post_name")?e.post_name:"",this.post_content=wfacp.tools.hp(e,"post_content")?e.post_content:"",this.base_url=wfacp.tools.hp(e,"base_url")?e.base_url:"",this.model())}return _createClass(t,[{key:"main",value:function(t){if(!1===this.add_new_model_open){var a=this;return this.add_new_model_open=!0,this.add_new=new Vue({el:"#add-new-form",components:{"vue-form-generator":VueFormGenerator.component},methods:{defaultModel:function(){return{name:"",post_content:""}},clearData:function(){this.model=this.defaultModel()},sanitiseTitle:function(e){return e.replace(/[^a-zA-Z0-9 ]/g,"").replace(/\s+/g,"-")},permalinkSanitiseTitle:function(e){return e.toLowerCase().replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")},onSubmit:function(){var t=this,i=this.model.name,l=new wfacp.ajax,s={wfacp_name:i,wfacp_id:a.id,post_name:this.model.post_name,post_content:this.model.post_content};if(l.ajax("add_checkout_page",s),a.add_new.$el){var o=a.add_new.$el.querySelector(".wfacp_btn.wfacp_btn_primary");e(o).addClass("is_busy")}l.success=function(i){if(!0===i.status&&"#"!==i.redirect_url&&(t.modal.stopLoading(),e("#add-new-form").hide(),e(".wfacp-funnel-create-success-wrap").show(),setTimeout(function(){window.location.href=i.redirect_url},1e3)),a.id>0){if(e("#modal-saved-data-success").iziModal("setTitle",wfacp_localization.global.changes_saved),e("#modal-saved-data-success").iziModal("open"),a.add_new.$el){var l=a.add_new.$el.querySelector(".wfacp_btn.wfacp_btn_primary");e(l).removeClass("is_busy")}a.add_new_page_model.iziModal("close"),wfacp_data.name=t.model.name,e(".wfacp_page_title").text(t.model.name),e(".bwf_breadcrumb > span:last-of-type").text(t.model.name),e(".bwfan_page_header .bwfan_page_title").text(t.model.name),e(".wfacp-preview").attr("href",i.new_url)}}}},data:{modal:t,btn_name:this.id>0?wfacp_localization.global.update_btn:wfacp_localization.global.add_checkout_btn,model:{id:this.id,name:a.name,post_name:a.post_name,post_url:a.post_url,base_url:a.base_url,post_content:a.post_content},schema:{fields:[{type:"input",inputType:"text",label:wfacp_localization.global.add_checkout.heading,model:"name",required:!0,validator:VueFormGenerator.validators.string},{type:"textArea",label:wfacp_localization.global.add_checkout.post_content,model:"post_content",validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.global.add_checkout.checkout_url_slug,model:"post_name",required:!0,validator:VueFormGenerator.validators.string,visible:function(e){return e.id>0}}]},formOptions:{validateAfterChanged:!0}}}),this.add_new}}},{key:"model",value:function(){var t,a,i,l=this;t=/([^&=]+)=?([^&]*)/g,a=/\+/g,i=function(e){return decodeURIComponent(e.replace(a," "))},jQuery.parseParams=function(e){for(var a,l={};a=t.exec(e);){var s=i(a[1]),o=i(a[2]);"[]"===s.substring(s.length-2)?(l[s=s.substring(0,s.length-2)]||(l[s]=[])).push(o):l[s]=o}return l},e(".woofunnels_page_wfacp .icl_translations a").on("click",function(t){if(e(this).find(".otgs-ico-add").length>0){var a=e(this).attr("href");if(a=a.replace("post-new.php?",""),t.preventDefault(),"object"==_typeof(a=e.parseParams(a))&&wfacp.tools.ol(a)>0){t.preventDefault();var i=new wfacp.ajax;i.ajax("make_wpml_duplicate",a),i.success=function(e){1==e.status?window.location.href=e.redirect_url:alert(e.msg)}}}}),this.add_new_page_model=e("#modal-checkout-page"),this.add_new_page_model.length>0&&this.add_new_page_model.iziModal({title:this.id>0?wfacp_localization.global.edit_checkout_page:wfacp_localization.global.add_checkout_page,headerColor:"#6dbe45",background:"#efefef",borderBottom:!1,radius:8,width:600,overlayColor:"rgba(0, 0, 0, 0.35)",transitionIn:"fadeInUp",transitionOut:"fadeOut",navigateArrows:"false",onOpening:function(e){l.main(e)}})}}]),t}(),s=function(){function t(e){_classCallCheck(this,t),this.id=e.id,this.settings=e.settings,null!=document.getElementById("wfacp_setting_container")&&this.main()}return _createClass(t,[{key:"getFields",value:function(){var e=[{fields:[{type:"label",label:wfacp_localization.settings.analytics.heading,hint:wfacp_localization.settings.analytics.hint,styleClasses:"wfacp_setting_heading"},{type:"radios",inputType:"text",label:wfacp_localization.settings.analytics.override,default:"false",model:"override_global_track_event",values:function(){return wfacp_localization.settings.radio_fields}},{type:"label",label:wfacp_localization.settings.analytics.pixel.heading,styleClasses:["wfacp_setting_heading","wfacp_setting_child_heading"],visible:function(e){return"true"==e.override_global_track_event}},{type:"radios",inputType:"text",label:wfacp_localization.settings.analytics.events.page_view,default:"false",styleClasses:["wfacp_checkbox_wrap"],model:"pixel_is_page_view",values:function(){return wfacp_localization.settings.radio_fields},visible:function(e){return"true"==e.override_global_track_event}},{type:"radios",inputType:"text",label:wfacp_localization.settings.analytics.events.add_to_cart,default:"false",styleClasses:["wfacp_checkbox_wrap"],model:"pixel_add_to_cart_event",values:function(){return wfacp_localization.settings.radio_fields},visible:function(e){return"true"==e.override_global_track_event}},{type:"select",styleClasses:"group-one-class wfacp_track_option_dropdown",label:wfacp_localization.settings.analytics.options_label,default:"load",values:wfacp_localization.settings.analytics.track_event_options,model:"pixel_add_to_cart_event_position",selectOptions:{hideNoneSelectedText:!0},visible:function(e){return"true"==e.pixel_add_to_cart_event&&"true"==e.override_global_track_event}},{type:"radios",inputType:"text",label:wfacp_localization.settings.analytics.events.checkout,default:"false",styleClasses:["wfacp_checkbox_wrap"],model:"pixel_initiate_checkout_event",values:function(){return wfacp_localization.settings.radio_fields},visible:function(e){return"true"==e.override_global_track_event}},{type:"select",styleClasses:"group-one-class wfacp_track_option_dropdown",label:wfacp_localization.settings.analytics.options_label,default:"load",values:wfacp_localization.settings.analytics.track_event_options,model:"pixel_initiate_checkout_event_position",selectOptions:{hideNoneSelectedText:!0},visible:function(e){return"true"==e.pixel_initiate_checkout_event&&"true"==e.override_global_track_event}},{type:"radios",inputType:"text",label:wfacp_localization.settings.analytics.events.payment,default:"false",styleClasses:["wfacp_checkbox_wrap"],model:"pixel_add_payment_info_event",values:function(){return wfacp_localization.settings.radio_fields},visible:function(e){return"true"==e.override_global_track_event}},{type:"label",label:wfacp_localization.settings.analytics.google.heading,styleClasses:["wfacp_setting_heading","wfacp_setting_child_heading"],visible:function(e){return"true"==e.override_global_track_event}},{type:"radios",inputType:"text",label:wfacp_localization.settings.analytics.events.page_view,default:"false",styleClasses:["wfacp_checkbox_wrap"],model:"google_ua_is_page_view",values:function(){return wfacp_localization.settings.radio_fields},visible:function(e){return"true"==e.override_global_track_event}},{type:"radios",inputType:"text",label:wfacp_localization.settings.analytics.events.add_to_cart,default:"false",styleClasses:["wfacp_checkbox_wrap"],model:"google_ua_add_to_cart_event",values:function(){return wfacp_localization.settings.radio_fields},visible:function(e){return"true"==e.override_global_track_event}},{type:"select",styleClasses:"group-one-class wfacp_track_option_dropdown",label:wfacp_localization.settings.analytics.options_label,default:"load",values:wfacp_localization.settings.analytics.track_event_options,model:"google_ua_add_to_cart_event_position",selectOptions:{hideNoneSelectedText:!0},visible:function(e){return"true"==e.google_ua_add_to_cart_event&&"true"==e.override_global_track_event}},{type:"radios",inputType:"text",label:wfacp_localization.settings.analytics.events.begin_checkout,default:"false",styleClasses:["wfacp_checkbox_wrap"],model:"google_ua_initiate_checkout_event",values:function(){return wfacp_localization.settings.radio_fields},visible:function(e){return"true"==e.override_global_track_event}},{type:"select",styleClasses:"group-one-class wfacp_track_option_dropdown",label:wfacp_localization.settings.analytics.options_label,default:"0",values:wfacp_localization.settings.analytics.track_event_options,model:"google_ua_initiate_checkout_event_position",selectOptions:{hideNoneSelectedText:!0},visible:function(e){return"true"==e.google_ua_initiate_checkout_event&&"true"==e.override_global_track_event}},{type:"radios",inputType:"text",label:wfacp_localization.settings.analytics.events.payment,default:"false",styleClasses:["wfacp_checkbox_wrap"],model:"google_ua_add_payment_info_event",values:function(){return wfacp_localization.settings.radio_fields},visible:function(e){return"true"==e.override_global_track_event}},{type:"label",label:wfacp_localization.settings.analytics.google_ads.heading,styleClasses:["wfacp_setting_heading","wfacp_setting_child_heading"],visible:function(e){return"true"==e.override_global_track_event}},{type:"radios",inputType:"text",label:wfacp_localization.settings.analytics.events.page_view,default:"false",styleClasses:["wfacp_checkbox_wrap"],model:"google_ads_is_page_view",values:function(){return wfacp_localization.settings.radio_fields},visible:function(e){return"true"==e.override_global_track_event}},{type:"radios",inputType:"text",label:wfacp_localization.settings.analytics.events.add_to_cart,default:"false",styleClasses:["wfacp_checkbox_wrap"],model:"google_ads_add_to_cart_event",values:function(){return wfacp_localization.settings.radio_fields},visible:function(e){return"true"==e.override_global_track_event}},{type:"select",styleClasses:"group-one-class wfacp_track_option_dropdown",label:wfacp_localization.settings.analytics.options_label,default:"load",values:wfacp_localization.settings.analytics.track_event_options,model:"google_ads_add_to_cart_event_position",selectOptions:{hideNoneSelectedText:!0},visible:function(e){return"true"==e.google_ads_add_to_cart_event&&"true"==e.override_global_track_event}},{type:"label",label:wfacp_localization.settings.analytics.pint.heading,styleClasses:["wfacp_setting_heading","wfacp_setting_child_heading"],visible:function(e){return"true"==e.override_global_track_event}},{type:"radios",inputType:"text",label:wfacp_localization.settings.analytics.events.page_view,default:"false",styleClasses:["wfacp_checkbox_wrap"],model:"pint_is_page_view",values:function(){return wfacp_localization.settings.radio_fields},visible:function(e){return"true"==e.override_global_track_event}},{type:"radios",inputType:"text",label:wfacp_localization.settings.analytics.events.add_to_cart,default:"false",styleClasses:["wfacp_checkbox_wrap"],model:"pint_add_to_cart_event",values:function(){return wfacp_localization.settings.radio_fields},visible:function(e){return"true"==e.override_global_track_event}},{type:"select",styleClasses:"group-one-class wfacp_track_option_dropdown",label:wfacp_localization.settings.analytics.options_label,default:"load",values:wfacp_localization.settings.analytics.track_event_options,model:"pint_add_to_cart_event_position",selectOptions:{hideNoneSelectedText:!0},visible:function(e){return"true"==e.pint_add_to_cart_event&&"true"==e.override_global_track_event}},{type:"radios",inputType:"text",label:wfacp_localization.settings.analytics.events.checkout,default:"false",styleClasses:["wfacp_checkbox_wrap"],model:"pint_initiate_checkout_event",values:function(){return wfacp_localization.settings.radio_fields},visible:function(e){return"true"==e.override_global_track_event}},{type:"label",label:wfacp_localization.settings.analytics.tiktok.heading,styleClasses:["wfacp_setting_heading","wfacp_setting_child_heading"],visible:function(e){return"true"==e.override_global_track_event}},{type:"radios",inputType:"text",label:wfacp_localization.settings.analytics.events.page_view,default:"false",styleClasses:["wfacp_checkbox_wrap"],model:"tiktok_is_page_view",values:function(){return wfacp_localization.settings.radio_fields},visible:function(e){return"true"==e.override_global_track_event}},{type:"radios",inputType:"text",label:wfacp_localization.settings.analytics.events.add_to_cart,default:"false",styleClasses:["wfacp_checkbox_wrap"],model:"tiktok_add_to_cart_event",values:function(){return wfacp_localization.settings.radio_fields},visible:function(e){return"true"==e.override_global_track_event}},{type:"select",styleClasses:"group-one-class wfacp_track_option_dropdown",label:wfacp_localization.settings.analytics.options_label,default:"load",values:wfacp_localization.settings.analytics.track_event_options,model:"tiktok_add_to_cart_event_position",selectOptions:{hideNoneSelectedText:!0},visible:function(e){return"true"==e.tiktok_add_to_cart_event&&"true"==e.override_global_track_event}},{type:"radios",inputType:"text",label:wfacp_localization.settings.analytics.events.checkout,default:"false",styleClasses:["wfacp_checkbox_wrap"],model:"tiktok_initiate_checkout_event",values:function(){return wfacp_localization.settings.radio_fields},visible:function(e){return"true"==e.override_global_track_event}},{type:"select",styleClasses:"group-one-class wfacp_track_option_dropdown",label:wfacp_localization.settings.analytics.options_label,default:"0",values:wfacp_localization.settings.analytics.track_event_options,model:"tiktok_initiate_checkout_event_position",selectOptions:{hideNoneSelectedText:!0},visible:function(e){return"true"==e.tiktok_initiate_checkout_event&&"true"==e.override_global_track_event}},{type:"label",label:wfacp_localization.settings.analytics.snapchat.heading,styleClasses:["wfacp_setting_heading","wfacp_setting_child_heading"],visible:function(e){return"true"==e.override_global_track_event}},{type:"radios",inputType:"text",label:wfacp_localization.settings.analytics.events.page_view,default:"false",styleClasses:["wfacp_checkbox_wrap"],model:"snapchat_is_page_view",values:function(){return wfacp_localization.settings.radio_fields},visible:function(e){return"true"==e.override_global_track_event}},{type:"radios",inputType:"text",label:wfacp_localization.settings.analytics.events.add_to_cart,default:"false",styleClasses:["wfacp_checkbox_wrap"],model:"snapchat_add_to_cart_event",values:function(){return wfacp_localization.settings.radio_fields},visible:function(e){return"true"==e.override_global_track_event}},{type:"select",styleClasses:"group-one-class wfacp_track_option_dropdown",label:wfacp_localization.settings.analytics.options_label,default:"load",values:wfacp_localization.settings.analytics.track_event_options,model:"snapchat_add_to_cart_event_position",selectOptions:{hideNoneSelectedText:!0},visible:function(e){return"true"==e.snapchat_add_to_cart_event&&"true"==e.override_global_track_event}},{type:"radios",inputType:"text",label:wfacp_localization.settings.analytics.events.checkout,default:"false",styleClasses:["wfacp_checkbox_wrap"],model:"snapchat_initiate_checkout_event",values:function(){return wfacp_localization.settings.radio_fields},visible:function(e){return"true"==e.override_global_track_event}},{type:"select",styleClasses:"group-one-class wfacp_track_option_dropdown",label:wfacp_localization.settings.analytics.options_label,default:"0",values:wfacp_localization.settings.analytics.track_event_options,model:"snapchat_initiate_checkout_event_position",selectOptions:{hideNoneSelectedText:!0},visible:function(e){return"true"==e.snapchat_initiate_checkout_event&&"true"==e.override_global_track_event}}]},{fields:[{type:"label",label:wfacp_localization.settings.scripts.heading,hint:wfacp_localization.settings.scripts.sub_heading,styleClasses:"wfacp_setting_heading"},{type:"textArea",label:wfacp_localization.settings.scripts.header_heading,placeholder:wfacp_localization.settings.scripts.header_script_placeholder,model:"header_script",rows:4,validator:VueFormGenerator.validators.string},{type:"textArea",label:wfacp_localization.settings.scripts.footer_heading,placeholder:wfacp_localization.settings.scripts.footer_script_placeholder,model:"footer_script",rows:4,validator:VueFormGenerator.validators.string}]},{fields:[{type:"label",label:wfacp_localization.settings.style.heading,hint:wfacp_localization.settings.style.sub_heading,styleClasses:"wfacp_setting_heading"},{type:"textArea",label:wfacp_localization.settings.style.header_heading,placeholder:wfacp_localization.settings.style.header_style_placeholder,model:"header_css",rows:4,validator:VueFormGenerator.validators.string}]}];return wfacp.hooks.applyFilters("wfacp_settings_fields",e,this)}},{key:"getModels",value:function(){var e=wfacp.tools.jsp(this.settings);return e=wfacp.hooks.applyFilters("wfacp_settings_data_model",e,this)}},{key:"main",value:function(){var t=this;return this.settings_vue=new Vue({el:"#wfacp_setting_container",components:{"vue-form-generator":VueFormGenerator.component,Multiselect:window.VueMultiselect.default},methods:{changed:function(){setTimeout(function(){e(".wfacp_date_field .form-control").attr("type","date")},100)},save:function(){var a=new wfacp.ajax,i=wfacp.tools.jsp(this.model);""!==i.close_checkout_on&&i.close_checkout_on>0&&(i.close_checkout_on=parseInt(i.close_checkout_on/1e3));var l={wfacp_id:t.id,settings:i};l=wfacp.hooks.applyFilters("wfacp_before_settings_data_saved",l,this),a.ajax("save_settings",l),e(".wfacp_save_btn_style").addClass("is_busy"),a.success=function(t){wfacp.show_data_save_model(t.msg),e(".wfacp_save_btn_style").removeClass("is_busy")}}},data:{search_timeout:!1,isLoading:!1,model:this.getModels(),formOptions:{},schema:{groups:this.getFields()}}}),this.settings_vue}}]),t}(),o=function(){function t(e){_classCallCheck(this,t),null!=document.getElementById("wfacp_optimization_container")&&(this.settings=e.settings,this.id=e.id,this.preview_field(),this.collapsible_optional_field(),this.main())}return _createClass(t,[{key:"collapsible_optional_field",value:function(){if(0!=wfacp.tools.hp(wfacp_data,"optional_checkout_fields")){var e=wfacp_data.optional_checkout_fields;wfacp.hooks.addFilter("wfacp_optimization_collapsible_optional_fields",function(t){var a={type:"label",label:wfacp_localization.optimizations.collapsible_optional_field.heading,hint:wfacp_localization.optimizations.collapsible_optional_field.sub_heading,styleClasses:"wfacp_setting_heading wfacp_collapsible_sec"};for(var i in t.push(a),e){var l="";"true"==e[i].disable&&(l=wfacp_localization.optimizations.collapsible_optional_field.collapsible_optional_field_text_hint),l=wfacp_localization.optimizations.collapsible_optional_field.collapsible_optional_field_text_hint,console.log("hint_text",l),t.push({type:"checkbox",label:""!==e[i].label?e[i].label:e[i].data_label,model:"collapsible_optional_"+i,id:i,styleClasses:"wfacp_collapsible_fields wfacp_preview_fields",disabled:e[i].disable,hint:l})}if(t.length>1){var s={type:"input",inputType:"text",label:wfacp_localization.optimizations.collapsible_optional_field.collapsable_link_text,model:"collapsible_optional_link_text",styleClasses:"preview_section_heading_wrap wfaco_preview_top_spacing",validator:VueFormGenerator.validators.string,hint:wfacp_localization.optimizations.collapsible_optional_field.collapsable_hint_text};t.push(s)}return t}),wfacp.hooks.addFilter("wfacp_optimizations_data_model",function(t,a){for(var i in e){var l=i,s="collapsible_optional_"+l;wfacp.tools.hp(a.settings.collapsible_optional_fields,l)&&"true"==a.settings.collapsible_optional_fields[l]?t[s]=!0:"collapsible_optional_link_text"!=s&&(t[s]=!1)}return wfacp.tools.hp(a.settings,"collapsible_optional_link_text")?t.collapsible_optional_link_text=a.settings.collapsible_optional_link_text:t.collapsible_optional_link_text=wfacp_localization.optimizations.collapsible_optional_field.collapsible_optional_link_text,t}),wfacp.hooks.addFilter("wfacp_before_optimization_data_saved",function(e,t){var a=wfacp_data.optional_checkout_fields;for(var i in e.settings.collapsible_optional_fields={},a){var l=i,s="collapsible_optional_"+l;e.settings.collapsible_optional_fields[l]=e.settings[s],delete e.settings[s]}return e})}}},{key:"preview_field",value:function(){if(0!=wfacp.tools.hp(wfacp_data,"layout")){var e=wfacp_data.layout,t={single_step:[],two_step:[],third_step:[]},a=["product","wfacp_html","wfacp_end_divider","password","wfacp_start_divider"],i=[];"two_step"===wfacp_data.layout.current_step?i=["single_step"]:"third_step"===wfacp_data.layout.current_step&&(i=["single_step","two_step"]),wfacp.hooks.addFilter("wfacp_optimization_preview_fields",function(t){if(0===i.length){var a={type:"label",label:wfacp_localization.settings.preview_field_admin_heading,hint:wfacp_localization.settings.preview_field_admin_heading_hint,styleClasses:"wfacp_setting_heading wfacp_admin_preview_feilds_wrap"},s={type:"label",hint:wfacp_localization.settings.preview_field_admin_note,styleClasses:"wfacp_setting_heading wfacp_preview_note"};return t.push(a),t.push(s),t}var o={type:"label",label:wfacp_localization.settings.preview_field_admin_heading,hint:wfacp_localization.settings.preview_field_admin_heading_hint,styleClasses:"wfacp_setting_heading preview_heading_wrap"};t.push(o);for(var n=0;n<i.length;n++)for(var d=i[n],r=e.fieldsets[d],c=0;c<r.length>0;c++){var _=r[c].fields;for(var p in _){var f=_[p];l(f)||t.push({type:"checkbox",label:""!==f.label?f.label:f.data_label,model:f.id,styleClasses:"wfacp_preview_fields"})}}if(t.length>1){var u={type:"input",inputType:"text",label:wfacp_localization.settings.preview_section_heading,model:"preview_section_heading",styleClasses:"preview_section_heading_wrap wfaco_preview_top_spacing",validator:VueFormGenerator.validators.string},h={type:"input",inputType:"text",label:wfacp_localization.settings.preview_section_subheading,model:"preview_section_subheading",styleClasses:"preview_section_subheading_wrap",validator:VueFormGenerator.validators.string},w={type:"input",inputType:"text",label:wfacp_localization.settings.preview_field_preview_text,model:"preview_field_preview_text",styleClasses:"preview_section_subheading_wrap",validator:VueFormGenerator.validators.string};t.push(u),t.push(h),t.push(w)}return t}),wfacp.hooks.addFilter("wfacp_optimizations_data_model",function(a,s){if(0===i.length)return a;for(var o=0;o<i.length;o++)for(var n=i[o],d=e.fieldsets[n],r=0;r<d.length>0;r++){var c=d[r].fields;for(var _ in c){var p=c[_];l(p)||(wfacp.tools.hp(s.settings.show_on_next_step[n],p.id)&&"true"==s.settings.show_on_next_step[n][p.id]?a[p.id]=!0:a[p.id]=!1,t[n].push(p.id))}}return wfacp.tools.hp(s.settings,"preview_section_heading")&&(a.preview_section_heading=s.settings.preview_section_heading),wfacp.tools.hp(s.settings,"preview_section_subheading")&&(a.preview_section_subheading=s.settings.preview_section_subheading),a}),wfacp.hooks.addFilter("wfacp_before_optimization_data_saved",function(e,a){for(var i in e.settings.show_on_next_step={},t)if(0!==t[i].length){e.settings.show_on_next_step[i]={};for(var l=t[i],s=0;s<l.length;s++){var o=l[s];wfacp.tools.hp(e.settings,o)&&(e.settings.show_on_next_step[i][o]=e.settings[o],delete e.settings[o])}}return e})}function l(e){return a.indexOf(e.type)>-1&&"shipping_calculator"!==e.id}}},{key:"getFields",value:function(){var e=wfacp.hooks.applyFilters("wfacp_optimization_preview_fields",[],this),t=wfacp.hooks.applyFilters("wfacp_optimization_collapsible_optional_fields",[],this),a=[{fields:[{type:"label",label:wfacp_localization.google_autocomplete.heading,hint:wfacp_localization.google_autocomplete.sub_heading,styleClasses:"wfacp_setting_heading"},{type:"radios",label:wfacp_localization.global.enable,model:"enable_google_autocomplete",values:function(){return wfacp_localization.settings.radio_fields}},{type:"vueMultiSelect",model:"disallow_autocomplete_countries",label:wfacp_localization.google_autocomplete.country_label,required:!1,selectOptions:{multiple:!0,trackBy:"id",label:"name"},values:wfacp_data.available_countries,visible:function(e){return"true"===e.enable_google_autocomplete}}]},{fields:[{type:"label",label:wfacp_localization.settings.coupons.heading,hint:wfacp_localization.settings.coupons.sub_heading,styleClasses:"wfacp_setting_heading"},{type:"radios",label:wfacp_localization.settings.coupons.auto_add_coupon_heading,model:"enable_coupon",values:function(){return wfacp_localization.settings.radio_fields}},{type:"input",inputType:"text",model:"coupons",label:wfacp_localization.settings.coupons.coupon_heading,placeholder:wfacp_localization.settings.coupons.search_placeholder,required:!0,validator:VueFormGenerator.validators.string,visible:function(e){return"true"===e.enable_coupon}},{type:"radios",label:wfacp_localization.settings.coupons.disable_coupon,model:"disable_coupon",values:function(){return wfacp_localization.settings.radio_fields}}]},{fields:[{type:"label",label:wfacp_localization.optimizations.smart_buttons.heading,hint:wfacp_localization.optimizations.smart_buttons.sub_heading,styleClasses:"wfacp_setting_heading"},{type:"radios",label:wfacp_localization.global.enable,model:"enable_smart_buttons",values:function(){return wfacp_localization.settings.radio_fields}},{type:"vueMultiSelect",model:"smart_button_position",label:wfacp_localization.optimizations.smart_buttons.position_heading,required:!0,selectOptions:{selectedValue:"wfacp_before_product_switching_field",multiple:!1,trackBy:"id",label:"name"},values:wfacp_localization.optimizations.smart_buttons.positions,visible:function(e){return"true"==e.enable_smart_buttons}}]},{fields:e},{fields:[{type:"label",label:wfacp_localization.optimizations.preferred_country.heading,hint:wfacp_localization.optimizations.preferred_country.sub_heading,styleClasses:"wfacp_setting_heading"},{type:"radios",label:wfacp_localization.global.enable,model:"preferred_countries_enable",values:function(){return wfacp_localization.settings.radio_fields}},{type:"vueMultiSelect",model:"preferred_countries",label:wfacp_localization.optimizations.preferred_country.label,required:!0,selectOptions:{multiple:!0,trackBy:"id",label:"name"},values:wfacp_data.available_countries,visible:function(e){return"true"===e.preferred_countries_enable}}]},{fields:[{type:"label",label:wfacp_localization.settings.advanced.heading,hint:wfacp_localization.settings.advanced.sub_heading,styleClasses:"wfacp_setting_heading"},{type:"radios",label:wfacp_localization.settings.advanced.close_after,model:"close_after_x_purchase",values:function(){return wfacp_localization.settings.radio_fields}},{type:"input",inputType:"text",model:"total_purchased_allowed",label:wfacp_localization.settings.advanced.total_purchased_allowed,hint:wfacp_localization.settings.advanced.total_purchased_allowed_hint,placeholder:"100",required:!0,validator:VueFormGenerator.validators.string,visible:function(e){return"true"===e.close_after_x_purchase}},{type:"input",inputType:"URL",model:"total_purchased_redirect_url",label:wfacp_localization.settings.advanced.total_purchased_redirect_url,hint:wfacp_localization.settings.advanced.total_purchased_redirect_url_hint,placeholder:"http://",required:!0,validator:VueFormGenerator.validators.string,visible:function(e){return"true"===e.close_after_x_purchase}},{type:"radios",label:wfacp_localization.settings.advanced.close_checkout_after_date,model:"close_checkout_after_date",values:function(){return wfacp_localization.settings.radio_fields}},{type:"input",inputType:"text",label:wfacp_localization.settings.advanced.close_checkout_on,model:"close_checkout_on",styleClasses:"wfacp_date_field",hint:wfacp_localization.settings.advanced.close_checkout_on_hint,validator:VueFormGenerator.validators.date,required:!0,visible:function(e){return"true"===e.close_checkout_after_date}},{type:"input",inputType:"URL",model:"close_checkout_redirect_url",label:wfacp_localization.settings.advanced.close_checkout_redirect_url,hint:wfacp_localization.settings.advanced.close_checkout_redirect_url_hint,placeholder:"http://",required:!0,validator:VueFormGenerator.validators.string,visible:function(e){return"true"===e.close_checkout_after_date}}]},{fields:[{type:"label",label:wfacp_localization.settings.autopopulate_fields.heading,hint:wfacp_localization.settings.autopopulate_fields.sub_heading,styleClasses:"wfacp_setting_heading"},{type:"radios",label:wfacp_localization.global.enable,model:"enable_autopopulate_fields",values:function(){return wfacp_localization.settings.radio_fields}}]},{fields:[{type:"label",label:wfacp_localization.settings.autopopulate_state.heading,hint:wfacp_localization.settings.autopopulate_state.sub_heading,styleClasses:"wfacp_setting_heading"},{type:"radios",label:wfacp_localization.global.enable,model:"enable_autopopulate_state",values:function(){return wfacp_localization.settings.radio_fields}}]},{fields:[{type:"label",label:wfacp_localization.settings.auto_fill_url.heading,hint:wfacp_localization.settings.auto_fill_url.sub_heading,styleClasses:"wfacp_setting_heading"},{type:"input",inputType:"text",label:wfacp_localization.settings.auto_fill_url.product_ids,model:"auto_fill_url_product_ids",hint:wfacp_localization.settings.auto_fill_url.product_ids_hint},{type:"input",inputType:"text",label:wfacp_localization.settings.auto_fill_url.quantity,model:"auto_fill_url_product_qty",hint:wfacp_localization.settings.auto_fill_url.quantity_hint},{type:"input",inputType:"text",label:wfacp_localization.settings.auto_fill_url.coupon,model:"auto_fill_url_coupon",hint:wfacp_localization.settings.auto_fill_url.coupon_hint},{type:"select",model:"auto_fill_url_autoresponder",label:wfacp_localization.settings.auto_fill_url.auto_responder_label,selectOptions:{hideNoneSelectedText:!0},values:function(){return Object.values(wfacp_localization.settings.auto_fill_url.auto_responder_options)}},{type:"checklist",label:wfacp_localization.settings.auto_fill_url.fields_label,model:"auto_fill_url_fields_options",listBox:!0,values:function(){return wfacp_localization.settings.auto_fill_url.fields_options},visible:function(e){return"select_email_provider"!==e.auto_fill_url_autoresponder}},{type:"textArea",label:wfacp_localization.settings.auto_fill_url.perfill_url,model:"auto_fill_url_product_qty_url",styleClasses:"auto_fill_url_product_qty_url",readonly:!0}]},{fields:[{type:"label",label:wfacp_localization.settings.intl.heading,hint:wfacp_localization.settings.intl.sub_heading,styleClasses:"wfacp_setting_heading"},{type:"radios",label:wfacp_localization.settings.intl.enable_phone_flag,model:"enable_phone_flag",values:function(){return wfacp_localization.settings.radio_fields}},{type:"radios",label:wfacp_localization.settings.intl.enable_phone_validation,hint:wfacp_localization.settings.intl.enable_phone_validation_hint,styleClasses:"wfacp_setting_checkbox_field",model:"enable_phone_validation",values:function(){return wfacp_localization.settings.radio_fields},visible:function(e){return"true"===e.enable_phone_flag}},{type:"radios",label:wfacp_localization.settings.intl.enable_save_phone_number,styleClasses:"wfacp_setting_checkbox_field wfacp_intl_saving_option",model:"save_phone_number_type",values:function(){return wfacp_localization.settings.intl.saving_options},visible:function(e){return"true"===e.enable_phone_flag}},{type:"input",inputType:"text",label:wfacp_localization.settings.intl.phone_helping_text,hint:wfacp_localization.settings.intl.phone_helping_text_hint,model:"phone_helping_text",visible:function(e){return"true"===e.enable_phone_flag}}]},{fields:[{type:"label",label:wfacp_localization.optimizations.live_validation.heading,hint:wfacp_localization.optimizations.live_validation.sub_heading,styleClasses:"wfacp_setting_heading"},{type:"radios",label:wfacp_localization.optimizations.live_validation.enable_live_validation,model:"enable_live_validation",values:function(){return wfacp_localization.settings.radio_fields}}]},{fields:t}];return wfacp.hooks.applyFilters("wfacp_optimization_fields",a,this)}},{key:"getModels",value:function(){var e=wfacp.tools.jsp(this.settings);return e=wfacp.hooks.applyFilters("wfacp_optimizations_data_model",e,this)}},{key:"main",value:function(){var t=this;this.settings_vue=new Vue({el:"#wfacp_optimization_container",components:{"vue-form-generator":VueFormGenerator.component},created:function(){setTimeout(function(){e(".wfacp_date_field .form-control").attr("type","date"),e(".auto_fill_url_product_qty_url  textarea").prop("readonly",!0)},100)},methods:{changed:function(){setTimeout(function(){e(".wfacp_date_field .form-control").attr("type","date")},100),this.prefil_url()},prefil_url:function(){var a=[],i=t.settings_vue.model,l=i.auto_fill_url_product_ids,s=i.auto_fill_url_product_qty,o=i.auto_fill_url_coupon;void 0!==l&&""!==l&&(a.push(wfacp_data.parameters.add_to_checkout+"="+l),void 0!==s&&""!==s&&a.push(wfacp_data.parameters.qty+"="+s)),void 0!==o&&""!==o&&a.push(wfacp_data.parameters.coupons+"="+o);var n=i.auto_fill_url_fields_options,d=wfacp.tools.jsp(wfacp_data.post_url);if(void 0!==i.auto_fill_url_autoresponder){var r=i.auto_fill_url_autoresponder,c=wfacp.tools.jsp(wfacp_localization.settings.auto_fill_url.auto_responder_options[r].merge_tags);if(void 0!==n&&n.length>0&&void 0!==c&&wfacp.tools.ol(c)>0)for(var _ in c)n.indexOf(_)>-1&&a.push(_+"="+c[_])}a.length>0&&(d.indexOf("?")>-1?d+="&"+a.join("&"):d+="?"+a.join("&"),t.settings_vue.model.auto_fill_url_product_qty_url=d,e(".auto_fill_url_product_qty_url textarea").val(d))},save:function(){if(!1===this.$refs.update_optimize_ref.validate()){var a=e(".wfacp_optimise_global_setting .vue-form-generator").find(".form-group.error.required > label span").text();return wfacp.show_data_error_model(wfacp_localization.field_validate_error+a+" "),void console.log("Validation Error")}var i=wfacp.tools.jsp(this.model),l=new wfacp.ajax,s={wfacp_id:t.id,settings:i};s=wfacp.hooks.applyFilters("wfacp_before_optimization_data_saved",s,this),l.ajax("save_settings",s),e(".wfacp_save_btn_style").addClass("is_busy"),l.success=function(t){e(".wfacp_save_btn_style").removeClass("is_busy"),wfacp.show_data_save_model(t.msg)}}},data:{model:this.getModels(),formOptions:{},schema:{groups:this.getFields()}}})}}]),t}(),n=function(){function t(e){_classCallCheck(this,t),this.id=e.id,this.schema=e.global_settings.schema,this.model=e.global_settings.model,null!=document.getElementById("wfacp_global_settings")&&(this.main(),this.jquery())}return _createClass(t,[{key:"main",value:function(){var t=this;var a=this;for(var i in this.model)"true"===this.model[i]?this.model[i]=!0:"false"===this.model[i]&&(this.model[i]=!1);return this.settings_vue=new Vue({el:"#wfacp_global_settings",components:{"vue-form-generator":VueFormGenerator.component,Multiselect:window.VueMultiselect.default},created:function(){setTimeout(function(){e(".form-group.field-checkbox").each(function(){var t=e(this).find("label"),a=t.text();t.remove(),e(this).find(".field-wrap").append(a)});for(var a=0;a<t.schema.groups.length;a++)for(var i=t.schema.groups[a].fields,l=0;l<i.length;l++)wfacp.tools.hp(i[l],"hint")&&wfacp.tools.hp(i[l],"styleClasses")&&i[l].styleClasses.indexOf("wfacp_html_hint")>-1&&e("."+i[l].styleClasses.join(".")).find(".hint").html(i[l].hint)},1e3)},methods:{onSubmit:function(){var t=new wfacp.ajax,i={wfacp_id:a.id,settings:this.model};this.model.rewrite_slug!==wfacp_data.checkout_page_slug?(t.ajax("save_global_settings",i),e(".wfacp_save_btn_style").addClass("is_busy"),t.success=function(t){e(".wfacp_save_btn_style").removeClass("is_busy"),wfacp.show_data_save_model(t.msg)}):alert(wfacp_data.checkout_page_slug_error)}},data:{model:this.model,search_timeout:!1,isLoading:!1,schema:this.schema,formOptions:{}}}),this.settings_vue}},{key:"jquery",value:function(){e(document.body).on("change",".wfacp_checkout_google_ua_enable_dynamic_ads input",function(){e(this).is(":checked")?e(".google_ua_dynamic_ads").show():e(".google_ua_dynamic_ads").hide()})}}]),t}(),d=function(){function d(e){_classCallCheck(this,d),this.el="#wfacp_control",this.setupData(e),this.initializeVue(),this.model()}return _createClass(d,[{key:"setupData",value:function(e){if(wfacp.tools.ol(e)>0)for(var t in e)this[t]=e[t];wfacp.hooks.doAction("after_setup_data",this,e)}},{key:"initializeVue",value:function(){wfacp.products=new t(this),wfacp.fields=new a(this),wfacp.design=new i(this),wfacp.add_new_page=new l(this),wfacp.settings=new s(this),wfacp.optimization=new o(this),wfacp.global_settings=new n(this),this.jQuery_events(),wfacp.hooks.doAction("wfacp_loaded",this)}},{key:"getData",value:function(){return this.data}},{key:"jQuery_events",value:function(){if(e(".wfacp_checkout_page_status").on("change",function(t){var a=!1;e(this).is(":checked")&&(a=!0);var i=e(".wfacp_head_funnel_state_on"),l=e(".wfacp_head_funnel_state_off");a?(i.show(),l.hide()):(i.hide(),l.show());var s=e(this).data("id"),o=new wfacp.ajax;o.ajax("update_page_status",{post_status:a,id:s});var n=this.closest(".wffn-ellipsis-menu");n&&(this.checked?(e(n).find(".bwfan-tag-rounded").removeClass("clr-orange").addClass("clr-green"),e(n).find(".bwfan-funnel-status").text("Published"),e(n).find(".bwfan-status-toggle").text("Draft")):(e(n).find(".bwfan-tag-rounded").removeClass("clr-green").addClass("clr-orange"),e(n).find(".bwfan-funnel-status").text("Draft"),e(n).find(".bwfan-status-toggle").text("Publish"))),o.success=function(){e("#modal-saved-data-success").iziModal("setTitle",wfacp_localization.global.changes_saved),e("#modal-saved-data-success").iziModal("open")}}),e("#the-list .wfacp_funnels .wfacp-preview").on("click",function(){var t=this,a=e(this).attr("data-id"),i=e(this);if(i.addClass("disabled"),a>0){var l=new wfacp.ajax;l.ajax("preview_details",{wfacp_id:a}),l.success=function(a){!0===a.status&&e(t).WCBackboneModal({template:"wfacp-page-popup",variable:a}),i.removeClass("disabled")}}return!1}),e(".wfacp-product-widget-tabs").length>0){var t=e(".wfacp-product-widget-tabs .wfacp-tab-title");t.on("click",function(){var t=e(this).closest(".wfacp-product-widget-tabs"),a=e(this).attr("data-tab");t.find(".wfacp-tab-title").removeClass("wfacp-active"),t.find(".wfacp-tab-title[data-tab="+a+"]").addClass("wfacp-active"),e(t).find(".wfacp-tab-content").removeClass("wfacp-activeTab");var i=e(t).find(".wfacp_forms_global_settings .vue-form-generator fieldset");i.hide(),i.eq(a-1).addClass("wfacp-activeTab"),i.eq(a-1).show()}),t.eq(0).trigger("click")}if(e(".wfacp-product-widget-tabs").length>0){var a=e("#wfacp_setting_container .wfacp-tab-title, #wfacp_optimization_container .wfacp-tab-title");a.on("click",function(){var t=e(this).closest(".wfacp-product-widget-tabs"),a=e(this).attr("data-tab");t.find(".wfacp-tab-title").removeClass("wfacp-active"),t.find(".wfacp-tab-title[data-tab="+a+"]").addClass("wfacp-active"),e(t).find(".wfacp-tab-content").removeClass("wfacp-activeTab");var i=e(".wfacp_global_container .vue-form-generator fieldset");i.hide(),i.eq(a-1).addClass("wfacp-activeTab"),i.eq(a-1).show()}),a.eq(0).trigger("click")}e(".wfacp_delete_checkout_page").on("click",function(t){t.preventDefault();var a=e(this).attr("href"),i=wfacp.swal({text:wfacp_localization.global.delete_checkout_page,title:"",confirmButtonText:wfacp_localization.global.delete_checkout_page_btn,cancelButtonText:wfacp_localization.global.cancel_button_text,reverseButtons:!0,onOpen:function(){document.querySelector(".swal2-header").insertAdjacentHTML("beforebegin",'<div class="wffn-swal-modal-title">'+wfacp_localization.global.delete_checkout_modal_title+"</div>")}});i.then(function(e){wfacp.tools.hp(e,"value")&&(window.location.href=a)}),i.catch(function(){})}),e(document).on("click",".wfacp_copy_text",function(){var t=e(this).siblings(".wfacp_description");t.length>0&&(t.find("input").select(),document.execCommand("copy"),wfacp.show_data_save_model(wfacp_localization.global.shortcode_copy_message))})}},{key:"model",value:function(){wfacp.show_saved_model=e("#modal-saved-data-success"),0!==wfacp.show_saved_model.length&&wfacp.show_saved_model.iziModal({title:wfacp_localization.global.data_saving,icon:"icon-check",headerColor:"#6dbe45",background:"#6dbe45",borderBottom:!1,width:600,timeout:4e3,timeoutProgressbar:!0,transitionIn:"fadeInUp",transitionOut:"fadeOut",bottom:0,loop:!0,pauseOnHover:!0,overlay:!1,onOpening:function(t){var a=e(".wfacp_spinner.spinner");a.length>0&&a.css("visibility","hidden")},onClosed:function(){wfacp.show_saved_model.iziModal("setTitle",wfacp_localization.global.data_saving);var t=e(".wfacp_spinner.spinner");t.is(":visible")&&t.css("visibility","hidden")}})}}]),d}();e(window).on("load",function(){Vue.component("multiselect",window.VueMultiselect.default),window.dispatchEvent(new Event("wfacp_checkout_admin_event_loaded")),window.builder=new d(wfacp_data),setTimeout(function(){e(".wfacp_loader").hide()},600),e(".wfacp_allow_panel_close .hndle").on("click",function(){e(this).parents(".wfacp_allow_panel_close").toggleClass("closed")});var t=e("a[data-original-link]");t.length>0&&t.each(function(){var t=e(this).data("original-link");e(this).attr("href",t)})});var r={init:function(t){var a=this,i=e(this);setTimeout(function(t){t.find(".iziModal-button-close").on("click",function(){e(this).trigger("onclosed"),e("html").removeClass("iziModal-isAttached"),e(".wfacp_overlay").removeClass("wfacp_overlay_active"),t.fadeOut()}),e(a).trigger("oninit")},300,i)},open:function(){var t=this,a=e(this);a.css("top","50px"),a.css("bottom","auto"),setTimeout(function(){a.fadeIn(),a.addClass("hasScroll");var i=e(window).height(),l=parseInt(.9*i),s=parseInt(e(".iziModal-header").outerHeight()),o=parseInt(e(t).find(".iziModal-content").height()),n=parseInt((i-(s+o))/2)+"px";s+o<l?(a.height(s+o),a.find(".iziModal-wrap").height(o),a.css("top",n)):(a.height(l),a.find(".iziModal-wrap").height(l-s)),e("html").addClass("iziModal-isAttached"),e(".wfacp_overlay").addClass("wfacp_overlay_active")},150),e(this).trigger("onopend")},close:function(){e(this).trigger("onclosed"),e("html").removeClass("iziModal-isAttached"),e(".wfacp_overlay").removeClass("wfacp_overlay_active"),e(this).fadeOut()},setSubtitle:function(e){}};e.fn.WoofunnelModal=function(t){return r[t]?r[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!==_typeof(t)&&t?void e.error("Method "+t+" does not exist on jQuery.tooltip"):r.init.apply(this,arguments)},window.wfacp_duplicate_billing_first_and_last_name=function(t,a,i,l){if("object"==_typeof(l)){var s=l.editFieldVue();if(wfacp.tools.hp(s,"addressOrder")&&wfacp.tools.hp(s.addressOrder,"address")){var o=e('.wfacp_field_container div[data-id="billing_first_name"]'),n=e('.wfacp_field_container div[data-id="billing_last_name"]');if(o.length>0||n.length>0){for(var d=s.addressOrder.address,r=!1,c=0;c<d.length;c++){if("first_name"===d[c].key&&wfacp.tools.string_to_bool(d[c].status)){r=!0;break}if("last_name"===d[c].key&&wfacp.tools.string_to_bool(d[c].status)){r=!0;break}}i[a].show=!0===r?"yes":"no"}else i[a].show="no"}}},e(document).on("click",".bwf-ellipsis-menu.bwf-ellipsis--alter-alter .bwf-ellipsis-menu__toggle",function(){e(this).parents(".bwf-ellipsis--alter-alter").toggleClass("show-menu")}),e(document).on("click",function(t){e(".bwf-ellipsis-menu.bwf-ellipsis--alter-alter").length&&(t.target.matches(".bwf-ellipsis-menu__toggle")||t.target.closest(".bwf-ellipsis-menu__toggle")||e(".bwf-ellipsis-menu.bwf-ellipsis--alter-alter").removeClass("show-menu")),t.target.matches(".wffn-ellipsis-menu")?e(t.target).toggleClass("is-opened"):t.target.closest(".wffn-ellipsis-menu")?t.target.closest(".wffn-ellipsis-menu-dropdown")?e(t.target.closest(".wffn-ellipsis-menu")).removeClass("is-opened"):e(t.target.closest(".wffn-ellipsis-menu")).toggleClass("is-opened"):e(".wffn-ellipsis-menu").length&&e(".wffn-ellipsis-menu").removeClass("is-opened")}),e(window).on("load",function(){e("#screen-meta-links").length>0&&e(".bwfan_header").length>0&&e("#screen-meta-links").insertAfter(".bwfan_header")}),e(document).ready(function(){e("#e-admin-top-bar-root").length>0&&e("#e-admin-top-bar-root").addClass("e-admin-top-bar--inactive"),e(document).on("click",".wfacp-add-polylang",function(){var t=e(this);e("body").css("cursor","progress");var a=t.data("wfacpid"),i=t.data("lang");t.addClass("spinner");var l=new wfacp.ajax;l.ajax("add_pll_language",{from_post_id:a,new_lang:i}),l.success=function(e){!0===e.language_added?location.reload():t.removeClass("spinner")}})})}(jQuery);
!function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(o,a,function(t){return e[t]}.bind(null,a));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=336)}({120:function(e,t,n){var o=n(8),a=TVE.$.extend(!0,{},TVE.PostList.EditMode,{subElementCategory:"Lesson List Elements",identifier:o.courseIdentifier,isInsideCourseEditMode:function(){return TVE.main.EditMode&&TVE.main.EditMode.element()&&TVE.main.EditMode.element().is(TVE.identifier("course"))},isInternalDrag:function(){return void 0!==TVE.FLAGS.$dragged_element&&!TVE.FLAGS.$dragged_element.static_element},toggleElements:function(){var e=this;TVE.PostList.EditMode.afterEditModeEnter.call(this);TVE.main.sidebar_toggle_elements(_.map(_.filter(TVE.Elements,(function(t){return function(t){return t.is_sub_element&&t.category!==e.subElementCategory}(t)})),(function(e){return e.tag})),!1)},toggleOnlyListElements:function(e){}});e.exports=a},121:function(e,t,n){var o=n(198),a=n(32),r=n(9),s={checkForCourseListSync:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=o.getClosestCourseListItem(e),a=n.length>0&&!s.isSyncing();return a&&t&&(s.startSync(),s.sync(n),s.endSync()),a},startSync:a.startSync,endSync:a.endSync,isSyncing:a.isSyncing,sync:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];a.beforeSyncActions(e);var n=e.closest(r.identifier);t.length&&o.generateList(e,t),TVE.froala.disable(e),n.find(r.itemIdentifier).each((function(t,n){requestAnimationFrame((function(){return s.syncItem(TVE.inner_$(n),e)}))})),a.afterSyncActions(),TVE.do_action("tva.course_list.after_sync",n)},syncItem:function(e,t){if(!t.is(e)){var n=this.getCourseData(parseInt(e.attr("data-id"))),o=t.clone();n&&(s.syncInlineShortcodes(o,n),s.syncTopicIcon(o,n),s.syncCourseTypeIcon(o,n),s.syncDynamicImages(o,n)),a.itemCleanUp(o),o.find("style.tva-course-list-dynamic-variables").replaceWith(e.find("style.tva-course-list-dynamic-variables")),e.html(o.html()),TVE.Editor_Page.content_manager.cleanup_froala(e),o.remove()}},syncInlineShortcodes:function(e,t){e.find(".thrive-shortcode-content").each((function(e,n){var o=TVE.inner_$(n),a=o.attr("data-shortcode");if(a&&a.includes("tva_course_list_item_")){var r=t[s.getShortcodeType(o)];void 0===r?o.empty():(o.find("a").length>0&&(o=o.find("a")),o.html(""===r?o.attr("data-shortcode-name"):r))}}))},syncTopicIcon:function(e,t){e.find(r.topicIconIdentifier).each((function(e,n){var o=TVE.inner_$(n),a="";a=t.topic_icon.includes("<svg")?t.topic_icon.replace("<svg",'<svg style="fill:'.concat(t.topic_icon_color,";color:").concat(t.topic_icon_color,';"')):'<div class="tva-course-list-item-topic-icon-bg" style="background-image: url(\''.concat(t.topic_icon,"');\"></div>"),o.html(a)}))},syncCourseTypeIcon:function(e,t){e.find(r.typeIconIdentifier).each((function(e,n){TVE.inner_$(n).html(t.type_icon)}))},syncDynamicImages:function(e,t){e.find("".concat(TVE.identifier("image"),"[data-dynamic]")).each((function(e,n){var o=TVE.inner_$(n),a=o.find(".tve_image"),r=o.attr("data-dynamic");a.attr({src:TVE.Components.image.controls.ImagePicker.picker.clean_url(t.dynamic_images[r]),title:t.name,alt:t.name,"data-d-f":r})}))},getShortcodeType:function(e){return e.attr("data-shortcode").replace("tva_course_list_item_","")},getCourseData:function(e){return TVA.courses[e]}};e.exports=s},122:function(e,t,n){var o=n(9),a=TVE.$.extend(!0,{},TVE.PostList.EditMode,{identifier:o.identifier,subElementCategory:"Course List Elements",getExtraListElementsTags:function(){return["divider","icon","social","styledlist","responsivevideo","audio"]},enterEditMode:function(e){this.beforeEditModeEnter(e),TVE.main.EditMode.enter(!1,{body_class:"edit-mode-active course-list-edit-mode",blur:!0,element_selectable:!1,show_overlay:!0,show_default_message:!0,can_insert_elements:!0,states:[],callbacks:{before_exit:TVE.Views.Controls.DropPanel.close_all}}),this.afterEditModeEnter()},afterEditModeEnter:function(){var e=this;TVE.PostList.EditMode.afterEditModeEnter.call(this);TVE.main.sidebar_toggle_elements(_.map(_.filter(TVE.Elements,(function(t){return function(t){return t.is_sub_element&&t.category!==e.subElementCategory}(t)})),(function(e){return e.tag})),!1)},exitEditMode:function(e){this.beforeEditModeExit(e),setTimeout((function(){TVE.ElementEditIcons.show_icons(e)}),50)},isInternalDrag:function(){return void 0!==TVE.FLAGS.$dragged_element&&!TVE.FLAGS.$dragged_element.static_element},toggleOnlyListElements:function(e){}});e.exports=a},197:function(e,t){var n={pseudoSelectorsRegex:function(){return new RegExp([":hover",":active",":after",":focus","::after",":before","::before","::placeholder"].join("|"),"gi")},doSelectorCleanUp:function(e){return(e=(e=e.replace(/([ ]{2,})/g," ")).trimStart()).includes(TVE.CONST.global_css_prefix)&&(e=TVE.CONST.global_css_prefix+" "+e.replace(TVE.CONST.global_css_prefix,"")),e}};e.exports=n},198:function(e,t,n){var o=n(9),a=n(197),r=[o.identifier.replace(".",""),"thrv_wrapper","tcb-selector-no_save","tve-draggable","tve-droppable","edit_mode","tve_post_grid_masonry","tve-loader-square"],s={saveList:function(e){e.find(o.identifier).each((function(t,n){var a=TVE.inner_$(n).removeClass("tva-empty-list"),i="";TVE.PostList.content.parsePaginationShortcode(a,e),_.each(TVE.PostList.utils.elementAttributes(a,["data-class","data-id"],!0,!0),(function(e,t){-1===e.indexOf('"')?i+=" ".concat(t,'="').concat(e,'"'):i+=" ".concat(t,"='").concat(e,"'")}));var c="";a[0].classList.forEach((function(e){r.includes(e)||c.includes(e)||(c+="".concat(e," "))})),i+=c?" class='".concat(c.trimEnd(),"'"):"",a.attr("id")&&(i+=" id='".concat(a.attr("id"),"'")),a.find(o.itemIdentifier).not(":first").remove(),TVE.PostList.content.setElementClasses(e,o.itemIdentifier),s.saveItem(a),a.replaceWith("[tva_course_list".concat(i,"]").concat(a.html().trim(),"[/tva_course_list]"))}))},saveItem:function(e){var t=e.find(o.itemIdentifier);if(0!==t.length){t.find("style.tva-course-list-dynamic-variables").replaceWith("[tva_course_list_dynamic_variables]"),t.find(o.topicIconIdentifier).html("[tva_course_list_item_topic_icon]"),t.find(o.typeIconIdentifier).html("[tva_course_list_item_type_icon]"),t.find(".tcb-dynamic-field-source img").each((function(e,t){var n=TVE.inner_$(t),o=n.parent().parent(),a=' class="'.concat(t.getAttribute("class")||"",'" css="').concat(t.getAttribute("data-css")||"",'"');o.attr("data-tcb-events",n.attr("data-tcb-events")),t.outerHTML='[tva_course_list_item_dynamic_image type="'.concat(t.getAttribute("data-d-f"),'"').concat(a,"]")})),t.find(".tva-course-list-item-label").each((function(e,t){t.outerHTML='[tva_course_list_item_label class="'.concat(t.getAttribute("class")||"",'" css="').concat(t.getAttribute("data-css")||"",'"]')}));var n=TVE.PostList.utils.elementAttributes(t,["data-shortcode","data-selector"],!0,!0),a="";n&&_.each(n,(function(e,t){a+=" ".concat(t,"='").concat(e,"'")})),t.replaceWith("[tva_course_list_item".concat(a,"]").concat(t.html().trim(),"[/tva_course_list_item]"))}},generateList:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.closest(o.identifier);n.empty();var a=e.prop("tagName").toLowerCase();t.forEach((function(t){var o={"data-id":t.id,class:e.attr("class"),"data-selector":".tva-course-list-item"};n.append(TVE.inner_$("<".concat(a,">"),o).append(TVE.inner_$("<style>",{class:"tva-course-list-dynamic-variables",type:"text/css"}).html(t.variables)))}))},saveDropdown:function(e){e.find(o.dropdownIdentifier).each((function(e,t){var n=TVE.inner_$(t),o="";_.each(TVE.PostList.utils.elementAttributes(n,["data-class"],!0,!0),(function(e,t){-1===e.indexOf('"')?o+=" ".concat(t,'="').concat(e,'"'):o+=" ".concat(t,"='").concat(e,"'")})),n.replaceWith("[tva_course_list_dropdown".concat(o,"][/tva_course_list_dropdown]"))}))},getPrefixedCourseListSelector:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=TVE.CSS_Rule_Cache.uniq_id(t),s="".concat(o.identifier,'[data-css="').concat(r,'"]');return n="".concat(s," ").concat(n),n=a.doSelectorCleanUp(n)},getClosestCourseListItem:function(e){return e.closest("".concat(o.itemIdentifier))}};e.exports=s},265:function(e,t){e.exports={elementIdentifier:"tva-lesson-resources",elementSelectorInsideTemplate:'.tva-lesson-resources[data-inside-template="1"]',editable:"tva-resource-editable",buttonIdentifier:"tva-resource-button",textIdentifier:"tva-resource-text",dataSelectors:[".tva-res-download",".tva-res-open",".tva-res-download .tcb-button-text",".tva-res-open .tcb-button-text",".tva-res-download .tcb-secondary-text",".tva-res-open .tcb-secondary-text",".tva-resource-icon",".tva-res-download .thrv_icon",".tva-resource-title",".tva-resource-description",".tva-resource-label",".tva-resource-item",".tva-resource-details",".tva-resource-get"]}},272:function(e,t,n){var o=n(265),a={getElementAttributes:function(e){var t="";return Array.prototype.slice.call(e.attributes).filter((function(e){return!["draggable"].includes(e)})).forEach((function(e){t+=" ".concat(e.name,'="').concat(e.value||"",'"')})),t},setDataSelectors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:TVE.ActiveElement,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.attr("id"),r=n;n&&!t||(r=TVE.CSS_Rule_Cache.generate_id("tva-res-")),e.attr("id",r),o.dataSelectors.forEach((function(t){return a.handleElementDataSelectors(e,t)})),t&&TVE.head_css_copy(n,r)},handleElementDataSelectors:function(e,t){e.find(t).each((function(){this.dataset.selector="#".concat(e.attr("id")," ").concat(t)}))},whitelistRule:function(e,t){if(!e&&null!=t&&t.includes("#tva-res-")){var n=t.match(/#tva-res-(.+?)\s/);n&&n[0]&&(e=!!TVE.inner_$(n[0].trim()).length)}return e}};e.exports=a},273:function(e,t){e.exports=TVE.renderers.baseModel.extend({render_default:function(e){var t,n=this,o=this.getShortcodeName(e),a=this.getShortcodeValue(e);_.each(TVE.CONST.inline_shortcodes,(function(e,o){t||(t=e.find((function(e){return e.value===n.key})))})),""===a&&(a=t.option);var r='<span class="thrive-shortcode-content" data-shortcode="'.concat(o,'" data-shortcode-name="').concat(t.option||"",'" contenteditable="false" data-extra_key="">').concat(a,"</span>"),s='<p><span class="thrive-inline-shortcode" contenteditable="false">'.concat(r,"</span></p>"),i=TVE.inner_$('<div class="thrv_wrapper thrv_text_element">'.concat(s,"</div>"));return this.alterElement(i,e),i},getShortcodeName:function(){return this.key},getShortcodeValue:function(){return""},alterElement:function(){return jQuery.noop}})},31:function(e,t,n){function o(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var r=n(8),s=n(197),i=["tva-course","thrv_wrapper","tcb-selector-no_save","tve-draggable","tve-droppable","edit_mode",r.courseTextWarningClass],c=r.stateDatasetKey,l={getIdentifier:function(e){return".tva-course-".concat(e)},getDropzoneIdentifier:function(e){return".tva-course-".concat("course"===e?"item":"".concat(e),"-dropzone")},getListIdentifier:function(e){return".tva-course-".concat(e,"-list")},getShortcode:function(e){return"tva_course_".concat(e,"_list")},getStateShortcode:function(e){return"tva_course_".concat(e,"_state")},getTypeIconShortcode:function(e){return"tva_course_".concat(e,"_type_icon")},getDropzoneShortcode:function(e){return"tva_course_".concat("course"===e?"":"".concat(e,"_"),"begin")},getLabel:function(e){return TVE.ucFirst(e)},saveCourse:function(e){e.find(TVE.identifier("course")).each((function(t,n){var o=e.find(n),a="";o.find(r.courseSubElementSelectors["course-state-selector"]).removeAttr("style"),_.each(TVE.PostList.utils.elementAttributes(o,["data-class","data-id"],!0,!0),(function(e,t){a+=" ".concat(t,"='").concat(e,"'")}));var s="";o[0].classList.forEach((function(e){i.includes(e)||s.includes(e)||(s+="".concat(e," "))})),a+=s?" class='".concat(s.trimEnd(),"'"):"",o.attr("data-id")&&(a+=" id='".concat(o.attr("data-id"),"'")),o.hasClass(r.courseTextWarningClass)&&o.empty(),l.normalizeCourseBeforeSave(o),r.elements.forEach((function(e){var t=l.getIdentifier(e),n=l.getShortcode(e),a=o.find(t);a.length>1&&a.not(":first").remove(),l["save".concat(l.getLabel(e))](o,t,n,e)})),l.saveCourseDropzone(o),o.replaceWith("[tva_course".concat(a,"]").concat(o.html(),"[/tva_course]"))}))},normalizeCourseBeforeSave:function(e){var t=e.find(l.getListIdentifier("chapter")).first(),n=l.getListIdentifier("lesson");if(t.length>0){var o=t.find(n).html();void 0!==o&&0===o.length&&t.find(n).html(e.find(n).filter((function(){return TVE.$(this).html().length>0})).html()),e.find(n).each((function(e,n){var o=TVE.inner_$(n);if(0===o.closest(l.getListIdentifier("chapter")).length){var a=t.clone();o.replaceWith(a.wrap("<div></div>").parent().html())}}))}var a=e.find(l.getListIdentifier("module")).first();if(a.length>0){var r=a.find(n).html();if(void 0!==r&&0===r.length){var s=e.find(n).filter((function(){return TVE.$(this).html().length>0})).html();a.find(n).html(s)}}},saveCourseDropzone:function(e){var t=e.find(l.getDropzoneIdentifier("course")),n=l.getDropzoneShortcode("course");t.length?t.replaceWith("[".concat(n,"]").concat(t.html(),"[/").concat(n,"]")):e.prepend("[".concat(n,"][/").concat(n,"]"))},saveStates:function(e,t){if(e.length){var n=l.getStateShortcode(t),o=l.getTypeIconShortcode(t);e.find(r.courseSubElementSelectors["course-type-icon"]).each((function(e,t){var n="";_.each(TVE.PostList.utils.elementAttributes(t,["data-class","data-id"],!0,!0),(function(e,t){n+=" ".concat(t,"='").concat(e,"'")})),TVE.inner_$(t).replaceWith("[".concat(o," ").concat(n," ][/").concat(o,"]"))})),e.find(r.courseSubElementSelectors["course-state-selector"]).each((function(e,t){var o=TVE.inner_$(t),a="";_.each(TVE.PostList.utils.elementAttributes(t,["data-class","data-id"],!0,!0),(function(e,t){a+=" ".concat(t,"='").concat(e,"'")})),a+=" class='".concat(t.getAttribute("class"),"'"),o.replaceWith("[".concat(n," ").concat(a," ]").concat(o.html(),"[/").concat(n,"]"))}))}return e},saveLesson:function(e,t,n,o){var a=e.find(t),r=a.closest(".tva-course-lesson-list");if(r.length)r.replaceWith("[".concat(n,"]").concat(l.saveStates(a,o).html(),"[/").concat(n,"]"));else{var s="[".concat(n,"][/").concat(n,"]"),i=e.find(l.getDropzoneIdentifier("chapter"));i.length||(i=e.find(l.getDropzoneIdentifier("module"))).length||(i=e.find(l.getDropzoneIdentifier("course"))),i.length?i.after(s):e.prepend(s)}},saveChapter:function(e,t,n,o){var a=e.find(t),r=l.getDropzoneShortcode("chapter");if(a.length){var s=a.closest(l.getListIdentifier("chapter")),i=a.find(l.getDropzoneIdentifier("chapter"));i.replaceWith("[".concat(r,"]").concat(i.html(),"[/").concat(r,"]")),s.replaceWith("[".concat(n,"]").concat(l.saveStates(a,o).html(),"[/").concat(n,"]"))}else{var c="[".concat(n,"][").concat(r,"][/").concat(r,"]"),u=e.find(l.getDropzoneIdentifier("module"));u.length||(u=e.find(l.getDropzoneIdentifier("course"))),u.length?(u.after(c),u.parent().append("[/".concat(n,"]"))):(e.prepend(c),e.append("[/".concat(n,"]")))}},saveModule:function(e,t,n,o){var a=e.find(t),r=l.getDropzoneShortcode("module");if(a.length){var s=a.closest(l.getListIdentifier("module")),i=a.find(l.getDropzoneIdentifier("module"));i.replaceWith("[".concat(r,"]").concat(i.html(),"[/").concat(r,"]")),s.replaceWith("[".concat(n,"]").concat(l.saveStates(a,o).html(),"[/").concat(n,"]"))}else{var c=e.find(l.getDropzoneIdentifier("course")),u="[".concat(n,"][").concat(r,"][/").concat(r,"]");c.length?c.after(u):e.prepend(u),e.append("[/".concat(n,"]"))}},initCourseSubElements:function(e){Object.values(tcb_main_const.elements).forEach((function(t){Object.keys(r.courseSubElementSelectors).includes(t.tag)&&l.initSubElement(t.identifier,e)}))},initSubElement:function(e,t){var n=t.find(e);n.length&&n.addClass("thrv_wrapper").attr("data-selector",e)},getClosestCourseItem:function(e){return e.closest("".concat(TVE.identifier("course-lesson"),", ").concat(TVE.identifier("course-chapter"),", ").concat(TVE.identifier("course-module")))},getActiveState:function(e){var t=e.closest("[".concat(c,"]"));return t.length>0?t.attr(c):""},getActiveStateSelector:function(e){var t=l.getActiveState(e),n=t.length&&0!==parseInt(t)?"[".concat(c,'="').concat(t,'"]'):"";return n.length&&!e.attr(c)&&(n="".concat(n," ")),n},getPrefixedSelector:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=TVE.CSS_Rule_Cache.uniq_id(t),a="".concat(r.courseIdentifier,'[data-css="').concat(o,'"]'),i=l.getActiveStateSelector(e),c=e.parents(".tve-state-expanded").length>0;return n="".concat(a).concat(c?" .tve-state-expanded":""," ").concat(i.length?"".concat(i):"").concat(n),n=s.doSelectorCleanUp(n)},isLesson:function(e){return e.is(r.courseSubElementSelectors["course-lesson"])},isCourseItem:function(e){return e.is(r.courseSubElementSelectors["course-dropzone"])},transferCourseContent:function(e,t){var n=[r.courseSubElementSelectors["course-dropzone"],r.courseSubElementSelectors["course-module-dropzone"],r.courseSubElementSelectors["course-chapter-dropzone"],r.courseSubElementSelectors["course-lesson"]],a=[];return n.forEach((function(n){var r=e.find(n).first(),s=t.find(n).first();r.length&&(a=[].concat(o(a),o(r.find("[data-css]").toArray())),s.length&&r.html(s.html()))})),a}};e.exports=l},32:function(e,t,n){var o=n(8),a=n(76),r=n(31),s={checkForCourseSync:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=r.getClosestCourseItem(e),o=n.length>0&&!s.isSyncing();return o&&t&&(s.startSync(),s.sync(n),s.endSync()),o},startSync:function(){TVE.FLAGS.SYNC=!0},endSync:function(){TVE.FLAGS.SYNC=!1},isSyncing:function(){return TVE.FLAGS.SYNC},beforeSyncActions:function(e){e.find(".tve-dropped").removeClass("tve-dropped")},sync:function(e){this.beforeSyncActions(e);var t=e.parents(TVE.identifier("course"));TVE.froala.disable(e),t.find(TVE.identifier(TVE._type(e))).each((function(n,o){var a=TVE.inner_$(o),r=s.getItemData(parseInt(o.dataset.id),t.attr("data-id"));s.syncStructureItem(a,e,r)})),this.afterSyncActions(e)},afterSyncActions:function(){TVE.drag.editorActions()},syncStructureItem:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:TVE.FLAGS.SYNC_NEW_CONTENT;if(!t.is(e)||a){var i=t.attr("data-type");if(!r.isLesson(t)){var c=r.getDropzoneIdentifier(i);e=e.find(c),t=t.find(c)}var l=t.clone();n&&(l.find(".thrive-shortcode-content").each((function(e,t){s.syncInlineShortcode(TVE.inner_$(t),n,i)})),l.find(o.courseSubElementSelectors["course-type-icon"]).each((function(e,t){TVE.inner_$(t).html(n.tva_course_type_svg)}))),this.itemCleanUp(l),e.html(l.html()),TVE.Editor_Page.content_manager.cleanup_froala(e),l.remove()}},itemCleanUp:function(e){e.find(".edit_mode, .tve-element-overlay").removeClass("edit_mode tve-element-overlay")},syncInlineShortcode:function(e,t,n){var o=s.getShortcodeType(e,n),a=t["tva_course_".concat(o)];void 0!==a?(e.find("a").length>0&&(e=e.find("a")),e.html(""!==a?a:e.attr("data-shortcode-name"))):e.empty()},getItemData:function(e,t){return e?s.getCourseData(parseInt(t)).content.find((function(t){return parseInt(t.ID)===parseInt(e)})):{}},getCourseData:function(e){return e=a.parseCourseID(e),TVA.courses[e]},getShortcodeType:function(e,t){return e.attr("data-shortcode").replace(t?"tva_course_".concat(t,"_"):"tva_course_","")},syncCourse:function(e){[o.courseSubElementSelectors["course-module-dropzone"],o.courseSubElementSelectors["course-chapter-dropzone"],o.courseSubElementSelectors["course-lesson"]].forEach((function(t){s.checkForCourseSync(e.find(t).first())}));var t=s.getCourseData(parseInt(e.attr("data-id")));e.find("".concat(o.courseSubElementSelectors["course-dropzone"]," .thrive-shortcode-content")).each((function(e,n){s.syncInlineShortcode(TVE.inner_$(n),t,"")}))}};e.exports=s},33:function(e,t,n){var o=n(77),a={allowApprenticeShortcodes:function(e){return TVE.CONST.apprentice&&TVE.CONST.apprentice.dynamic_data&&e&&e.includes("tva_content_")},getSanitizedShortcodeKey:function(e){return e.replace("tva_content_","")},isCoursePage:function(){return void 0!==TVE.CONST.apprentice&&void 0!==TVE.CONST.apprentice.course},isGeneralNoAccessPage:function(){return TVE.Theme.template.secondary()===o.templates.generalNoAccess}};e.exports=a},336:function(e,t,n){var o;(o=jQuery)(window).on("tcb_main_ready",(function(){o.extend(!0,TVE,n(337)),n(355),n(363),n(372),n(375),TVE.CONST.is_certificate_validation_page&&o('a[data-fn="open_templates_picker"]').hide()})).on("tcb.register-hooks",(function(){var e={colors:n(376),progressBar:n(380)},t={"tcb.page_color_prefix":100,"tcb.global_colors_templates":100};_.each(e,(function(e){TVE.addHooks(e,t)}))}))},337:function(e,t,n){e.exports={Views:{Components:{Course:n(338),CourseStructureItem:n(340),CourseList:n(341),CourseListDropdown:n(343),CourseListItemTopicIcon:n(344),Resources:n(345),ResourcesLabel:n(347),CertificateVerification:n(348),CertificateFormInput:n(349)}},renderers:n(350)}},338:function(e,t,n){function o(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c,l,u,d,p,f,h,v,m,g;c=jQuery,l=n(339),u=n(31),d=n(8),p=n(32),f=n(120),h=n(76),v=n(33),m=d.states.not_completed,g=d.courseSubElementSelectors["course-state-selector"],e.exports=TVE.Views.Base.component.extend({placeholderPanel:null,courseObject:{},before_update:function(){this.setCourseElement(),this.setNotPublishWarning()},setNotPublishWarning:function(){this.$courseMessageWrapper.empty(),"publish"!==this.courseObject.status&&this.$courseMessageWrapper.html(TVE.tpl("unpublish-course-warning")()).find("a").attr("href",this.courseObject.admin_edit_url)},showLoadingOverlay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:TVE.ActiveElement;e.empty().addClass("tcb-elem-placeholder tcb-block-placeholder"),this.placeholderPanel.hide()},after_init:function(){var e=this;this.$courseMessageWrapper=this.$("#tva-course-message"),this.placeholderPanel=new l({minWidth:250,no_buttons:!0}),d.expandCollapseSubSelectors.forEach((function(t){TVE.add_action("tve.icons.expanded.".concat(t),e.toggleExpandCollapse.bind(e)),TVE.add_action("tve.icons.collapse.".concat(t),e.toggleExpandCollapse.bind(e)),TVE.add_action("tcb.state.change.".concat(t),e.toggleStateManagerChange.bind(e)),TVE.add_action("tcb.focus_".concat(t,".before"),e.changeStateBeforeFocus.bind(e)),TVE.add_filter("tcb.".concat(t,".has_states_dropdown"),e.enableStateDropdown.bind(e))})),TVE.add_action("tve.lazyload.done",(function(t){t.tva_courses&&(c.extend(!0,TVA.courses,t.tva_courses),TVE.ActiveElement&&TVE.ActiveElement.is(d.courseIdentifier)&&(e.controls.displayLevel.update(TVE.ActiveElement),e.toggleHideModuleHeader(TVE.ActiveElement)))})),TVE.main.on("insert-course",(function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";t?wp.apiRequest({type:"GET",url:"".concat(TVA.routes.course,"/html"),data:{post_id:TVE.CONST.post_id,id:t,display_level:n,template_id:o,hide_module:a},beforeSend:function(t){e.showLoadingOverlay()}}).done(e.applyDefaultTemplate).fail((function(e){console.warn("There was an error in fetching the course",e)})):console.warn("Course ID is missing")}))},applyDefaultTemplate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},n=parseInt(e.id),o=parseInt(e.level),a=h.parseCourseID(n),r=TVE.inner_$(e.html).addClass("tcb-local-vars-root").attr("data-id",n);-1===o&&r.attr({"data-display-level":-1,"data-deny-collapse-module":1}),e.data.content.forEach((function(e){e.tva_course_index=r.find('.thrv_wrapper[data-id="'.concat(e.ID,'"]')).attr("data-index")})),TVA.courses[a]=s(s({},TVA.courses[a]),e.data),TVE.ActiveElement.replaceWith(r);var i=r.find("[data-css]");(i=i.add(r.filter("[data-css]"))).each((function(){this.dataset.css&&(void 0===t[this.dataset.css]?t[this.dataset.css]=TVE.CSS_Rule_Cache.uniq_id(this,!0):this.dataset.css=t[this.dataset.css])})),TVE.drag.bind_element(r);var l=e.css||"";c.each(t,(function(e,t){l=l.replace(new RegExp("("+e+")","g"),t)})),TVE.Editor_Page.content_manager.insert_head_css(l).done((function(){TVE.do_action("tcb_after_cloud_template",r),TVE.froala.handleEmptyShortcodes(r),TVE.Editor_Page.focus_element(r),TVE.ActiveElement=TVE.inner_$(TVE.ActiveElement),u.initCourseSubElements(TVE.ActiveElement)}))},changeCourseAjaxCallback:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=c(e.html),o=parseInt(e.id),a=h.parseCourseID(o);e.data.content.forEach((function(e){e.tva_course_index=n.find('.thrv_wrapper[data-id="'.concat(e.ID,'"]')).attr("data-index")})),TVA.courses[a]=s(s({},TVA.courses[a]),e.data);var r=u.transferCourseContent(n,t),i={};r.forEach((function(e){e.dataset.css&&(void 0===i[e.dataset.css]?i[e.dataset.css]=TVE.CSS_Rule_Cache.uniq_id(e,!0):e.dataset.css=i[e.dataset.css])}));var l=e.css||"";c.each(i,(function(e,t){l=l.replace(new RegExp("("+e+")","g"),t)})),TVE.FLAGS.SYNC_NEW_CONTENT=!0,p.syncCourse(n),u.initCourseSubElements(n),TVE.ActiveElement.attr({"data-id":o,class:n.attr("class")}).html(n.html()),TVE.Editor_Page.content_manager.insert_head_css(l).done((function(){TVE.ActiveElement.find(".thrive-shortcode-content").removeAttr("data-css"),TVE.do_action("tcb_after_cloud_template",TVE.ActiveElement),TVE.froala.handleEmptyShortcodes(TVE.ActiveElement),TVE.FLAGS.SYNC_NEW_CONTENT=!1,TVE.drag.bind_element(TVE.ActiveElement),requestAnimationFrame((function(){TVE.ActiveElement.removeClass("tcb-elem-placeholder tcb-block-placeholder")}))}))},controls_init:function(){var e=this,t=this;this.controls.AllowCollapsed.update=function(e){var t=this,n=this.get_buttons().map((function(e){return e.value})),a=1===parseInt(e.attr("data-hide-module"));this.toggleDisabled("module",a),o(n).forEach((function(o){t.removeActive(o),e.attr("data-deny-collapse-".concat(o))&&n.splice(n.indexOf(o),1)})),n.forEach((function(e){t.setActive(e)})),this.component.$("#tva-apprentice-lesson-list-module-info-tooltip")[a?"show":"hide"](),this.component.$(".default-state-toggle")[0===n.length?"hide":"show"]()},this.controls.AllowCollapsed.input=function(e,t){var n=this,o=this.get_buttons().map((function(e){return e.value})),a=0;o.forEach((function(t){n.isActive(t)?e.removeAttr("data-deny-collapse-".concat(t)):(e.attr("data-deny-collapse-".concat(t),1),a++)})),a===o.length?(this.component.controls.DefaultState.$('[data-value="expanded"]').click(),this.component.$(".default-state-toggle").hide()):this.component.$(".default-state-toggle").show()},this.controls.DefaultState.update=function(e){var t=e.attr("data-default-state")||"expanded";this.setActive(t)},this.controls.DefaultState.input=function(e,t){var n=this.getValue();"expanded"!==n?e.attr("data-default-state",n):e.removeAttr("data-default-state"),this.component.collapseExpandCallback(e)},this.controls.AutoCollapse.update=function(e){var t=!!e.attr("data-autocollapse");this.setChecked(t)},this.controls.AutoCollapse.input=function(e,t){t.checked?e.attr("data-autocollapse","1"):e.removeAttr("data-autocollapse")},this.controls.AutoCourseStructure.update=function(e){var t=void 0===e.attr("data-display-level");this.component.$(".tva-auto-course-structure-notice").toggle(!t),this.setChecked(t)},this.controls.AutoCourseStructure.input=function(t,n){var o=0;n.checked?t.removeAttr("data-display-level"):(o=-1,t.attr("data-display-level",o)),e.$(".tva-auto-course-structure-notice").toggle(!n.checked),e.changeCourse(-1,o).done((function(){e.before_update()}))},this.controls.changeCourse.update=function(e){var t=[],n=parseInt(e.attr("data-id"));h.allowAutoDetectCourse()&&t.push({value:-1,name:"Auto detect current course"}),Object.values(TVA.courses).reverse().forEach((function(e){t.push({value:e.id,name:e.name})})),this.build_options(t),this.setValue(n),this.component.toggleDisplayLevelControls(-1===n)},this.controls.changeCourse.input=function(t,n){var o=parseInt(n.value);e.toggleDisplayLevelControls(-1===o),t.removeAttr("data-display-level"),e.changeCourse(o).done((function(){e.before_update(),e.controls.displayLevel.update(t),h.allowAutoDetectCourse()&&e.allowAutoDetectCourseStructure()&&e.controls.AutoCourseStructure.update(t)}))},this.controls.displayLevel.update=function(e){if(Array.isArray(t.courseObject.structure)){var n=[{value:"",name:"Course"}];t.courseObject.structure.length&&(n=[].concat(o(n),o(t.buildDisplayLevelOptions(t.courseObject.structure)))),this.build_options(n)}this.setValue(e.attr("data-display-level")||"")},this.controls.displayLevel.input=function(t,n){n.value?t.attr("data-display-level",n.value):t.removeAttr("data-display-level"),e.changeCourse(parseInt(t.attr("data-id")),t.attr("data-display-level"))},this.controls.ToggleModule.update=function(e){this.setChecked(e.attr("data-hide-module")),this.component.toggleHideModuleHeader(e)},this.controls.ToggleModule.change=function(t,n){n.checked?t.attr({"data-hide-module":1,"data-deny-collapse-module":1}):t.removeAttr("data-hide-module"),e.controls.AllowCollapsed.update(t)},f.toggleListElements(!1,!0)},toggleHideModuleHeader:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$courseElement,t=parseInt(e.attr("data-display-level")),n=-1===t;if(!n&&Array.isArray(this.courseObject.structure)&&_.isNumber(t)){var o=this.courseObject.structure.find((function(e){return e.ID===t}));o&&"tva_module"===o.post_type&&(n=!0)}this.controls.ToggleModule.toggle(n)},resetToggleModuleControl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$courseElement;this.controls.ToggleModule.change(e,{checked:!1}),this.controls.ToggleModule.update(e)},buildDisplayLevelOptions:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"- ",a=[];return t.forEach((function(t){"tva_lesson"!==t.post_type&&(a.push({name:n+t.post_title,value:t.ID}),Array.isArray(t.structure)&&t.structure.length&&(a=[].concat(o(a),o(e.buildDisplayLevelOptions(t.structure,"-- ")))))})),a},placeholder_action:function(){h.allowAutoDetectCourse()?TVE.main.trigger("insert-course",-1,this.allowAutoDetectCourseStructure()?-1:0,69027,this.allowAutoDetectCourseStructure()?1:0):this.placeholderPanel.open(TVE.ActiveElement,TVE.ActiveElement.find(".tcb-inline-placeholder-action"))},editCourse:function(e,t){this.enterEditMode(),TVE.main.EditMode.enter(this.$courseElement,{blur:!0,body_class:"edit-mode-active course-edit-mode",can_insert_elements:!0,show_default_message:!0,restore_state:!0,element_selectable:!1,states:this.getStates(),callbacks:{exit:_.bind(this.exitEditMode,this),before_exit:TVE.Views.Controls.DropPanel.close_all,state_change:_.bind(this.stateChange,this)}}),this.$courseElement&&0!==this.$courseElement.length||this.setCourseElement()},getStates:function(){return[{label:"Not Completed",value:m},{label:"No Access",value:d.states.no_access},{label:"Completed",value:d.states.completed},{label:"In Progress",value:d.states.in_progress},{label:"Locked",value:d.states.locked}]},stateChange:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];switch(parseInt(e)){case d.states.in_progress:this.$courseElement.attr(d.progressStateEnabled,1);break;case d.states.locked:this.$courseElement.attr(d.lockedStateEnabled,1)}this.$courseElement.find(g).each((function(t,n){var o=c(n);o.closest(".tva-course-item-dropzone").length||(o.parent().find("[".concat(d.stateDatasetKey,'="').concat(e,'"]')).length||o.parent().append(o.clone().attr(d.stateDatasetKey,e)),o.parent().find(g).hide().filter("[".concat(d.stateDatasetKey,'="').concat(e,'"]')).show())})),this.$courseElement.find(d.courseSubElementSelectors["course-content-selectors"]).attr(d.stateDatasetKey,e),t&&TVE.Editor_Page.blur()},changeCourse:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=c.Deferred();if(this.resetToggleModuleControl(),e){var a=TVE.ActiveElement.clone(),r=TVE.ActiveElement.attr("data-ct");return wp.apiRequest({type:"GET",url:"".concat(TVA.routes.course,"/html"),data:{id:e,post_id:TVE.CONST.post_id,display_level:n,template_id:r?r.replace("".concat(TVE._type(TVE.ActiveElement),"-"),""):""},beforeSend:function(e){t.showLoadingOverlay()}}).done((function(e){t.changeCourseAjaxCallback(e,a),o.resolve()})).fail((function(e){console.warn("There was an error in changing the course",e)})),o.promise()}console.warn("Course ID is missing")},exitEditMode:function(){f.beforeEditModeExit(this.$courseElement),this.stateChange(m,!1),this.collapseExpandCallback(),TVE.Editor_Page.focus_element(this.$courseElement)},collapseExpandCallback:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$courseElement,n=t.attr("data-default-state"),o=":not(.tcb-permanently-hidden)",a={collapse:{selectors:[],method:"addClass"},expand:{selectors:[],method:"removeClass"}};if(n){var r=t.attr("data-deny-collapse-module"),s=t.attr("data-deny-collapse-chapter");r?a.expand.selectors.push(d.courseSubElementSelectors["course-module-dropzone"]):a.collapse.selectors.push(d.courseSubElementSelectors["course-module-dropzone"]),s?a.expand.selectors.push(d.courseSubElementSelectors["course-chapter-dropzone"]):a.collapse.selectors.push(d.courseSubElementSelectors["course-chapter-dropzone"])}else a.expand.selectors.push(d.courseSubElementSelectors["course-module-dropzone"]),a.expand.selectors.push(d.courseSubElementSelectors["course-chapter-dropzone"]);Object.values(a).forEach((function(a){if(a.selectors.length){var r;if(a.selectors=a.selectors.map((function(e){return e+o})),!n&&e.allowSmartAutoCollapse(t)){var s=a.selectors.join(",").replaceAll("-dropzone","");r=e.getSmartAutoCollapseLeaf(t).closest(s).find(a.selectors.join(","))}else r=t.find(a.selectors.join(","));TVE.inner.window.TCB_Front.course.toggleItem(r,a.method)}}))},allowSmartAutoCollapse:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$courseElement;return v.isCoursePage()&&1===parseInt(e.attr("data-autocollapse"))&&this.getSmartAutoCollapseLeaf(e).length>0},getSmartAutoCollapseLeaf:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$courseElement;return e.find('[data-id="'.concat(TVE.CONST.post_id,'"]'))},enterEditMode:function(){var e=this;this.$courseElement.find("[draggable]").removeAttr("draggable"),this.$courseElement.find(".tve-draggable").removeClass("tve-draggable"),this.$courseElement.find(".tve-droppable").removeClass("tve-droppable"),f.toggleElements();var t=this.courseObject.id;_.isEmpty(TVA.courses[t].content)&&wp.apiRequest({type:"GET",url:"".concat(TVA.routes.course,"/structure"),data:{id:t,post_id:TVE.CONST.post_id}}).done((function(n){n.content.forEach((function(t){t.tva_course_index=e.$courseElement.find('.thrv_wrapper[data-id="'.concat(t.ID,'"]')).attr("data-index")})),TVA.courses[t]=s(s({},TVA.courses[t]),n)})).fail((function(){console.log("error")}))},setCourseElement:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:TVE.ActiveElement,t=h.parseCourseID(parseInt(e.attr("data-id")));this.$courseElement=e,this.courseObject=Object.values(TVA.courses).find((function(e){return e.id===t}))},toggleExpandCollapse:function(e){TVE.Editor_Page.blur(),TVE.inner.window.TCB_Front.course.toggleItem(e);var t=e.hasClass(TVE.inner.window.TCB_Front.course.collapseClass)?"expanded":"default";TVE.state_manager.change(t,!0),TVE.main.states_dropdown.s=t,TVE.Editor_Page.focus_element(e.removeClass("edit_mode"))},toggleStateManagerChange:function(e){TVE.inner.window.TCB_Front.course.toggleItem(TVE.ActiveElement,"expanded"===e?"addClass":"removeClass"),TVE.Editor_Page.focus_element(TVE.ActiveElement.removeClass("edit_mode"))},changeStateBeforeFocus:function(e){var t=e.hasClass(TVE.inner.window.TCB_Front.course.collapseClass)?"expanded":"default";TVE.state_manager.get_state()!==t&&requestAnimationFrame((function(){return TVE.state_manager.change(t,!0)}))},allowAutoDetectCourseStructure:function(){return!["tva_lesson","tva_course_overview"].includes(TVE.CONST.post_type)},toggleDisplayLevelControls:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$(".tva-display-level-wrapper").toggle(!e),this.$("#tva-apprentice-lesson-list-default-state-info-tooltip")[e?"show":"hide"](),this.allowAutoDetectCourseStructure()&&this.$(".tva-autodetect-course-structure-wrapper").toggle(e)},enableStateDropdown:function(){return!0}})},339:function(e,t){var n;n=jQuery,e.exports=TVE.Views.InlinePanel.extend({template:TVE.tpl("inline/content-templates"),after_initialize:function(){this.$(".drop-panel").addClass("small-pad tcb-autocomplete"),this.autocomplete()},autocomplete:function(){var e=this,t=Object.values(TVA.courses).reverse();t.forEach((function(e,n){t[n].label=e.name})),this.$input=this.$(".tcb-search").autocomplete({minLength:0,source:function(e,o){o(n.ui.autocomplete.filter(t,e.term))},appendTo:this.$(".popup-content"),select:function(e,t){return TVE.main.trigger("insert-course",t.item.id),e.stopPropagation(),!1},open:function(t,n){e.$(".ui-menu-item-wrapper").removeClass("ui-menu-item-wrapper ui-state-active")}}),this.$input.data("ui-autocomplete")._renderItem=function(e,t){e.addClass("tcb-suggest");var o=new RegExp(this.term,"i");return n("<li></li>").data("item.autocomplete",t).append('<a href="#" class="tcb-truncate">'.concat(t.name.replace(o,'<span class="highlight">'.concat(this.term,"</span>")),"</a>")).appendTo(e)}},hide:function(){TVE.Views.InlinePanel.prototype.hide.call(this,this.$element,null)},onOpen:function(){this.$input.val("").autocomplete("search"),this.$input[0].focus()}})},34:function(e,t,n){var o=n(121),a=n(9),r={getCourseID:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:TVE.ActiveElement;return e?parseInt(e.closest(a.itemIdentifier).attr("data-id")):0},getCourse:function(e){var t=e||this.getCourseID();return TVA.courses[t]},readQueryFromElement:function(e){void 0===e&&(e=TVE.ActiveElement);var t=e.attr("data-query");try{t=JSON.parse(t.replace(/'/g,'"'))}catch(e){t={}}return t},applyQuery:function(e,t){t||(t=this.readQueryFromElement(e));var n=JSON.parse(JSON.stringify(t));TVE.Components.course_list_dropdown.refreshOptions(this.getDropdownFilterForList(e),n),this.fetchCourses(n).then((function(n){var r=n.courses;e.toggleClass("tva-empty-list",0===r.length),Array.isArray(r)&&r.length&&o.sync(e.find(a.itemIdentifier),r),e.attr("data-query",JSON.stringify(t).replace(/"/g,"'"))}))},fetchCourses:function(e){var t=this,n=TVE.ActiveElement;return new Promise((function(o,a){wp.apiRequest({type:"POST",url:"".concat(TVA.routes.course_list,"/html"),data:{query:e},beforeSend:function(){return n.addClass("tve-loader-square")}}).done((function(e){t.extendCoursesLocalization(e.courses),n.removeClass("tve-loader-square"),o(e)})).fail(a)}))},countCourses:function(e){return new Promise((function(t,n){wp.apiRequest({type:"GET",url:"".concat(TVA.routes.course_list,"/count"),data:{query:e}}).done(t).fail(n)}))},extendCoursesLocalization:function(e){var t=this,n={};Array.isArray(e)&&e.length&&(e.forEach((function(e){n[e.id]=t.prepareCourseForLocalize(e)})),TVE.$.extend(!0,TVA.courses,n))},prepareCourseForLocalize:function(e){return e.description&&(e.description=TVE.$("<div>".concat(e.description,"</div>")).text()),e},getSearchFormForList:function(e){var t=TVE.CSS_Rule_Cache.uniq_id(e);return TVE.Editor_Page.editor.find('.thrv-search-form[data-list="'.concat(t,'"], .tcb-elem-placeholder[data-list="').concat(t,'"]'))},getDropdownFilterForList:function(e){var t=TVE.CSS_Rule_Cache.uniq_id(e);return TVE.Editor_Page.editor.find('.tva-course-list-dropdown[data-list="'.concat(t,'"]'))},getListForDropdown:function(e){var t=e.attr("data-list");return TVE.Editor_Page.editor.find('.tva-course-list[data-css="'.concat(t,'"]'))},prepareSearchFormForList:function(e){var t=TVE.CSS_Rule_Cache.uniq_id(e),n=TVE.inner_$(TVE.main.static_element("search_form").html().trim());n.addClass("tcb-no-clone tcb-no-save").attr("data-list",t);var o=new TVE.CloudTemplatesModal;return o.selected="56234",o.$$type="search_form",o.applyTo=n,TVE.main.overlay(),o.save().done((function(){TVE.ActiveElement.addClass("tcb-no-clone tcb-no-save").find('input[type="search"]').attr("placeholder","Search courses..."),TVE.ActiveElement.head_css({float:"none","min-width":"100%","margin-left":"auto !important","margin-right":"auto !important"})})).always((function(){TVE.main.overlay(!0)})),n},prepareDropdownFilterForList:function(e){var t=TVE.CSS_Rule_Cache.uniq_id(e),n=TVE.$(TVE.main.static_element("course_list_dropdown").html().trim()),o=TVE.CSS_Rule_Cache.uniq_id(n),a=TVE.CSS_Rule_Cache.uniq_id(n,!0);return[n.find(".tve-lg-dropdown-list"),n.find(".tve-dynamic-dropdown-option")].forEach((function(e){var t=e.attr("data-selector").replace(o,a);e.attr("data-selector",t)})),n.attr("data-list",t),n},prepareFilterColumnsElement:function(){var e=TVE.inner_$('<div class="thrv_wrapper thrv-columns tve-draggable"><div class="tcb-flex-row v-2"><div class="tcb-flex-col"><div class="tcb-col"></div></div><div class="tcb-flex-col"><div class="tcb-col"></div></div></div></div>'),t=e.find(".tcb-flex-row");return e.head_css({"margin-top":"2px !important","margin-bottom":"2px !important"}),t.head_css({"padding-top":"2px !important","padding-bottom":"2px !important"}),t.head_css({"min-height":"1px","justify-content":"center"},null," > .tcb-flex-col > .tcb-col"),e},getFilterColumnsElement:function(e){var t=e.prev();return t.is(".thrv-columns")?t:TVE.$()},allowApprenticeShortcodes:function(e){return e&&e.includes("tva_course_list_item_")},getSanitizedShortcodeKey:function(e){return e.replace("tva_course_list_item_","")}};e.exports=r},340:function(e,t,n){var o=n(8),a=n(31),r=n(32),s=o.courseSubElementSelectors["course-state-selector"],i=o.courseSubElementSelectors["course-type-icon"];function c(e){var t=a.getActiveState(e);return e.filter(".edit_mode").find("".concat(s,"[").concat(o.stateDatasetKey,'="').concat(t,'"]'))}e.exports=TVE.Views.Base.component.extend({controls_init:function(e){e.ToggleIcon.change=function(t,n){var a=c(t),s=a.find(".".concat(o.structureItemIconClass)),i=n.checked;if(s.length>0)s.head_css({display:i?"block":"none"});else if(i){var l=TVE.inner_$(TVE.tpl("course-structure-item-icon")());a.prepend(l),l.head_css({"font-size":"60px",width:"60px",height:"60px","margin-top":0,"margin-bottom":0})}TVE.Editor_Page.reposition_icons(),r.checkForCourseSync(t),e.VerticalPosition.update(t)},e.ToggleIcon.update=function(e){if(a.isCourseItem(e))this.$el.hide();else{var t=c(e).find(".".concat(o.structureItemIconClass));this.setChecked(t.length>0&&"none"!==t.head_css("display")),this.$el.show()}},e.ToggleTypeIcon.before_update=function(e){this.$el.toggle(a.isLesson(e))},e.ToggleTypeIcon.change=function(e,t){var n=c(e),a=n.find("".concat(i));if(t.checked){var s=r.getItemData(e.attr("data-id"),e.closest(o.courseIdentifier).attr("data-id")).tva_course_type_svg;s&&s.length>0&&(a=TVE.inner_$('<div class="thrv_wrapper '.concat(i.replace(".",""),' tve-auxiliary-icon-element">').concat(s,"</div>")),n.find(".tva-course-state-content").append(a),a.head_css({"font-size":"22px",width:"22px",height:"22px","margin-top":0,"margin-bottom":0,"margin-left":"auto","margin-right":"auto"}))}else a.remove();r.checkForCourseSync(e)},e.ToggleTypeIcon.update=function(e){var t=c(e).find("".concat(i));this.setChecked(t.length>0&&"none"!==t.head_css("display"))},e.ToggleExpandCollapse.change=function(t,n){var a=c(t),s=a.find(".".concat(o.toggleExpandCollapseIconClass)),i=n.checked;if(s.length>0)s.head_css({display:i?"block":"none"});else if(i){var l=TVE.inner_$(TVE.tpl("course-structure-item-toggle-icon")());a.append(l),l.head_css({"font-size":"22px",width:"22px",height:"22px","margin-top":0,"margin-bottom":0})}TVE.Editor_Page.reposition_icons(),r.checkForCourseSync(t),e.VerticalPosition.update(t)},e.ToggleExpandCollapse.before_update=function(e){this.$el.toggle(!a.isLesson(e)&&!a.isCourseItem(e))},e.ToggleExpandCollapse.update=function(e){var t=c(e).find(".".concat(o.toggleExpandCollapseIconClass));this.setChecked(t.length>0&&"none"!==t.head_css("display"))},e.Height.input=function(e,t){this.applyElementCss({"min-height":"".concat(t.value).concat(this.getUM()," !important")},e,this.config.css_suffix,"")},e.Height.update=function(e){var t=(e=e.filter(":visible")).head_css("min-height");t||(t=e.height()),this.setValue(t)},e.VerticalPosition.before_update=function(e){this.$el.toggle(!a.isCourseItem(e))},e.VerticalPosition.input=function(e,t){this.applyElementCss({"align-items":t.getAttribute("data-value")},c(e),"","")},e.VerticalPosition.update=function(t){this.$el[e.ToggleIcon.isChecked()||e.ToggleExpandCollapse.isChecked()?"show":"hide"]();var n=c(t);this.setActive(n.head_css("align-items")||"")}}})},341:function(e,t,n){var o,a,r,s;o=jQuery,r=n(9),s=n(34),e.exports=TVE.Views.Components.post_list.extend({after_update:o.noop,after_init:function(){this.$noCoursesMessageTextArea=this.$("#tva-course-list-no-courses-message"),TVE.CONST.dismissed_tooltips.includes("course-list-element")||(this.elementTemplatesTooltip=new TVE.Views.other.Tooltip({icon:"course-list",title:"Apprentice Course List",info:"Images, icons and text available in this element are managed in Thrive Apprentice and will update when you make changes to your courses.",learnMoreLink:"https://help.thrivethemes.com/en/articles/4965707-why-can-t-i-change-certain-elements-from-the-course-list-element",type:"course-list-element"}),this.$el.append(this.elementTemplatesTooltip.$el)),(a=n(122)).toggleListElements(!1,!0)},before_update:function(){this.$noCoursesMessageTextArea.text(TVE.ActiveElement.attr("data-no_posts_text"))},controls_init:function(e){var t=this;TVE.Views.Components.post_list.prototype.controls_init.call(this,e),TVE.add_action("tcb.element.selected.course_list",(function(){if(t.elementTemplatesTooltip&&t.elementTemplatesTooltip.display(130),!t.qModal){var e=t.$('[data-fn="filterPosts"]');e.addClass("tve-loader-square tva-fc-disabled").attr("disabled",1),wp.apiRequest({type:"GET",url:"".concat(TVA.routes.course_list,"/query_data"),data:{}}).done((function(o){t.qModal=new(n(342))({el:TVE.modal.get_element("course-list-query")}),s.extendCoursesLocalization(o.courses),t.qModal.setData(o),e.removeClass("tve-loader-square tva-fc-disabled").removeAttr("disabled")}))}})),this.controls.CourseSearch.change=function(e,t){var n=s.getSearchFormForList(e);t.checked&&0===n.length?this.component.insertFilterElement(s.prepareSearchFormForList(e),1,e):this.component.removeFilterElement(n),TVE.ElementEditIcons.reposition_icons(e)},this.controls.CourseSearch.update=function(e){var t=s.getSearchFormForList(e);this.setChecked(t.length>0)},this.controls.TopicFilter.change=function(e,t){var n=s.getDropdownFilterForList(e);t.checked&&0===n.length?this.component.insertFilterElement(s.prepareDropdownFilterForList(e),0,e):this.component.removeFilterElement(n),TVE.ElementEditIcons.reposition_icons(e)},this.controls.TopicFilter.update=function(e){var t=s.getDropdownFilterForList(e);this.setChecked(t.length>0)},this.controls.Linker.change=function(e,t){e.attr("data-disabled-links",t.checked?1:0)},this.controls.NumberOfItems.input=function(e,t){e.attr("data-posts_per_page",t.value)},this.controls.NumberOfItems.change=function(e,t){var n=s.readQueryFromElement(e);n.posts_per_page=t.value,s.applyQuery(e,n)},this.controls.NumberOfItems.up=o.noop,this.controls.NumberOfItems.down=o.noop,this.controls.NumberOfItems.update=function(e){this.setValue(e.attr("data-posts_per_page")||e.find(r.itemIdentifier).length)},this.controls.MessageColor.update=function(){this.setValue(TVE.ActiveElement.attr("data-no_posts_text_color"))},this.controls.MessageColor.input=o.noop,this.controls.MessageColor.change=function(e){e=e?e.toString():"",TVE.ActiveElement.attr("data-no_posts_text_color",e).head_css({color:e},null,"::after")}},removeFilterElement:function(e){e.parent().hasClass("tcb-clear")&&(e=e.parent());var t=e.closest(".tcb-col");t.length&&1===t.children().length?TVE.drag.removeColumn(t.parent()):e.remove()},insertFilterElement:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:TVE.ActiveElement,o=".tcb-col:eq(".concat(t,")"),a=s.getFilterColumnsElement(n);if(a.length>0&&a.find(o).is(":empty"))a.find(o).append(e);else if(a.length>0&&1===a.children(".tcb--cols--1").length&&a.find(".thrv-search-form, .tva-course-list-dropdown").length>0){var r=a.find(".thrv-search-form, .tva-course-list-dropdown").first(),i=r.hasClass("thrv-search-form")?"left":"right";TVE.drag.insertNear(e,r,i)}else(a=s.prepareFilterColumnsElement(n)).insertBefore(n).find(o).append(e);TVE.drag.bind_element(a)},filterPosts:function(){this.qModal.open()},courseListEditMode:function(){a.enterEditMode(TVE.ActiveElement)},changeNoCoursesMessage:function(e,t){TVE.ActiveElement.attr("data-no_posts_text",t.value)}})},342:function(e,t,n){var o=n(34);function a(e){return'\n\t<span class="tva-select2-bg" style="background-color: '.concat(e.color,'">\n\t\t<span class="tva-select2-option-resource">').concat(e.icon,"</span> ").concat(e.text,"\n\t</span>")}function r(e){return'\n\t<span class="tva-select2-col">\n\t\t<span style="color: '.concat(e.color,'" class="tva-select2-option-resource">').concat(e.icon,"</span> ").concat(e.text,"\n\t</span>")}function s(e){return'\n\t<span class="tva-select2-option-resource">\n\t\t<svg class="icon-c-filter icon-'.concat(e.icon,'">\n\t\t\t<use xlink:href="#icon-').concat(e.icon,'"></use>\n\t\t</svg>\n\t<span> ').concat(e.text)}e.exports=TVE.modal.base.extend({checkboxItemTpl:TVE.tpl("course-list-filter-checkbox"),query:{},courseData:[],authorData:[],topicsData:[],selectDropdownClass:"tva-course-list-filter-dropdown",selectContainerClass:"tva-course-list-filter-container",after_initialize:function(){this.$counter=this.$("#tva-course-filtered-counter"),this.$courseSelection=this.$("#tva-course-list-course-selection"),this.$authorSelection=this.$("#tva-course-list-author-selection"),this.$topicsSelection=this.$("#tva-course-list-topics-selection"),this.$checkboxWrapper=this.$(".tva-course-list-checkbox-wrapper")},setData:function(e){var t=this;Array.isArray(e.bundles)&&e.bundles.length&&e.bundles.forEach((function(e){0!==e.products.length&&t.courseData.push({text:e.name,id:"bundle_"+e.id,icon:"bundle"})})),Array.isArray(e.courses)&&e.courses.length&&e.courses.forEach((function(e){t.courseData.push({text:e.name,id:e.id,icon:"course"}),t.authorData.some((function(t){return t.id===e.author.ID}))||t.authorData.push({text:e.author.name,id:e.author.ID})})),Array.isArray(e.topics)&&e.topics.length&&e.topics.forEach((function(e){(t.topicsData.push({text:e.title,id:e.id,icon:"svg_icon"===e.icon_type?e.svg_icon:'<img src="'.concat(e.icon,'" />'),color:e.color}),"icon"===e.icon_type)&&((new Image).src=e.icon)})),this.renderFilters(e)},selectCallback:function(e){var t=TVE.$(e.currentTarget),n=t.val();t.parent().find(".tva-filter-clear").toggleClass("tva-filter-clear-show",Array.isArray(n)&&n.length>0)},filterCourseChange:function(e){var t=TVE.$(e.currentTarget),n=t.val(),o=n.findIndex((function(e){return e.includes("bundle")})),a=e.params.data.id;a.includes("bundle")?t.val([a]).trigger("change"):o>=0&&(n.splice(o,1),t.val(n).trigger("change"))},resetSelectFilter:function(e,t){TVE.$(t).parent().find("select").val([]).trigger("change").trigger("select2:select")},renderFilters:function(e){var t=this;this.$courseSelection.select2({placeholder:"All courses",cache:!1,multiple:!0,data:this.courseData,templateResult:s,templateSelection:s,escapeMarkup:function(e){return e}}).on("change",(function(e){return t.selectCallback(e)})).on("select2:select",(function(e){return t.filterCourseChange(e)})),this.$authorSelection.select2({placeholder:"All authors",cache:!1,multiple:!0,data:this.authorData}).on("change",(function(e){return t.selectCallback(e)})),this.$topicsSelection.select2({placeholder:"All topics",cache:!1,multiple:!0,data:this.topicsData,templateResult:r,templateSelection:a,escapeMarkup:function(e){return e}}).on("change",(function(e){return t.selectCallback(e)})),[this.$courseSelection,this.$topicsSelection,this.$authorSelection].forEach((function(e){e.data("select2").$dropdown.addClass("".concat(t.selectDropdownClass)),e.data("select2").$container.addClass("".concat(t.selectContainerClass)),e.on("select2:select",(function(){t.query[e.attr("data-tva-field")]=e.val(),t.refreshQueryCount()})).on("select2:unselect",(function(){t.query[e.attr("data-tva-field")]=e.val(),t.refreshQueryCount()}))})),this.$checkboxWrapper.each((function(n,o){var a=o.getAttribute("data-source"),r=e[a];if(Array.isArray(r)&&r.length){var s=TVE.$(o);r.forEach((function(e){e.label=e.name||e.title||"",s.append(t.addCheckbox(a,e))}))}}))},addCheckbox:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.checkboxItemTpl({source:e,data:t})},before_open:function(){var e=this;this.query=o.readQueryFromElement(),this.$courseSelection.val(this.query.terms||[]).trigger("change"),this.$authorSelection.val(this.query.authors||[]).trigger("change"),this.$topicsSelection.val(this.query.topics||[]).trigger("change"),this.$checkboxWrapper.each((function(t,n){var o=n.getAttribute("data-source"),a=TVE.$(n);!e.query[o]||Array.isArray(e.query[o])&&0===e.query[o].length?(a.find('[data-source="'.concat(o,'"]')).prop("checked",!0),"function"==typeof e["".concat(o,"CheckboxClicked")]&&e["".concat(o,"CheckboxClicked")](),e.toggleDisabledForALlValues(o)):e.query[o].forEach((function(e){a.find('[data-source="'.concat(o,'"][value="').concat(e,'"]')).prop("checked",!0)}))})),this.refreshQueryCount()},refreshQueryCount:_.debounce((function(){var e=this;this.$counter.html("Searching&hellip;").removeClass("c-red").addClass("tva-counter-loading"),this.$checkboxWrapper.filter("[data-no-count]").each((function(t,n){delete e.query[n.getAttribute("data-source")]})),o.countCourses(this.query).then((function(t){e.$counter.html("".concat(t," matching results")).removeClass("tva-counter-loading").toggleClass("c-red",0===t)}))}),3e3),filterCheckboxClicked:function(e,t){var n=t.getAttribute("data-source"),o=t.getAttribute("value"),a=this.$checkboxWrapper.filter('[data-source="'.concat(n,'"]')),r=a.find('[value="all"]');"all"===o?(a.find("input").prop("checked",!0),r.prop("checked",!0).attr("disabled","disabled")):(r.prop("checked",!1).removeAttr("disabled"),"progress-has-access"===o&&a.find('input[value="0"], input[value="1"], input[value="2"]').prop("checked",t.checked),"function"==typeof this["".concat(n,"CheckboxClicked")]&&this["".concat(n,"CheckboxClicked")](),t.checked&&this.toggleDisabledForALlValues(n)),a.attr("data-no-count")||(this.query[n]=this.getCheckedValues(n),this.refreshQueryCount())},progressCheckboxClicked:function(){var e=!0;this.$checkboxWrapper.filter('[data-source="progress"]').find('input[value="0"], input[value="1"], input[value="2"]').each((function(t,n){n.checked||(e=!1)})),this.$checkboxWrapper.filter('[data-source="progress"]').find('input[value="progress-has-access"]').prop("checked",e)},toggleDisabledForALlValues:function(e){var t=this.$checkboxWrapper.filter('[data-source="'.concat(e,'"]')),n=t.find('[value="all"]'),o=!0;t.find("input").each((function(e,t){if("all"!==t.value)return t.checked?void 0:(o=!1,!1)})),o?n.prop("checked",!0).attr("disabled","disabled"):n.prop("checked",!1).removeAttr("disabled")},getCheckedValues:function(e){var t=[],n=this.$checkboxWrapper.filter('[data-source="'.concat(e,'"]'));return n.find('[value="all"]')[0].checked||n.find("input:checked").each((function(e,n){isNaN(n.value)||t.push(n.value)})),t},save:function(){var e=this;this.query.terms=this.$courseSelection.val(),this.query.authors=this.$authorSelection.val(),this.query.topics=this.$topicsSelection.val(),this.$checkboxWrapper.each((function(t,n){var o=n.getAttribute("data-source");e.query[o]=e.getCheckedValues(o)})),o.applyQuery(TVE.ActiveElement,this.query),this.query={},this.close()}})},343:function(e,t,n){var o,a;o=jQuery,a=n(34),e.exports=TVE.Views.Components.DynamicDropdown.extend({after_init:function(){TVE.add_action("tve.icons.expanded.course_list_dropdown",(function(e){TVE.Editor_Page.focus_element(e),TVE.state_manager.change("expanded",!0),TVE.ElementEditIcons.show_icons(TVE.ClickedElement)})),TVE.add_action("tve.icons.collapse.course_list_dropdown",(function(e){TVE.Editor_Page.focus_element(e),TVE.state_manager.change("default",!0),TVE.ElementEditIcons.show_icons(TVE.ClickedElement)})),TVE.add_action("tcb.focus_course_list_dropdown.before",(function(e){e.hasClass("tve-state-expanded")&&(TVE.state_manager.change("expanded",!0,{skip_update:!0}),e.find(".tve-state-expanded").removeClass("tve-state-expanded"))})),TVE.add_action("tcb.focus_element.before",(function(e){0===e.closest(".tva-course-list-dropdown").length&&TVE.Editor_Page.editor.find(".tva-course-list-dropdown.tve-state-expanded").removeClass("tve-state-expanded")}))},controls_init:function(e){var t=this;TVE.Views.Components.DynamicDropdown.prototype.controls_init.call(this,e),e.FilterTopics.change=function(e,n){e.attr("data-filter-topics",Number(n.checked)),t.refreshOptions(e),t.toggleFilters(e)},e.FilterTopics.update=function(e){this.setChecked(1===parseInt(e.attr("data-filter-topics")))},e.FilterTopicsSubheading.change=function(e,n){var o=n.value.trim();e.attr("data-topics-subheading",o).find(".tva-filter-topics-subheading strong").text(o),t.refreshOptions(e)},e.FilterTopicsSubheading.update=function(e){this.setValue(e.attr("data-topics-subheading")||"")},e.FilterRestrictions.change=function(e,n){e.attr("data-filter-restrictions",Number(n.checked)),t.refreshOptions(e),t.toggleFilters(e)},e.FilterRestrictions.update=function(e){this.setChecked(1===parseInt(e.attr("data-filter-restrictions")))},e.FilterRestrictionsSubheading.change=function(e,n){var o=n.value.trim();e.attr("data-restrictions-subheading",o).find(".tva-filter-restrictions-subheading strong").text(o),t.refreshOptions(e)},e.FilterRestrictionsSubheading.update=function(e){this.setValue(e.attr("data-restrictions-subheading")||"")},e.FilterProgress.change=function(e,n){e.attr("data-filter-progress",Number(n.checked)),t.refreshOptions(e),t.toggleFilters(e)},e.FilterProgress.update=function(e){this.setChecked(1===parseInt(e.attr("data-filter-progress")))},e.FilterProgressSubheading.change=function(e,n){var o=n.value.trim();e.attr("data-progress-subheading",o).find(".tva-filter-progress-subheading strong").text(o),t.refreshOptions(e)},e.FilterProgressSubheading.update=function(e){this.setValue(e.attr("data-progress-subheading")||"")},e.RowsWhenOpen.change=function(e,n){TVE.add_filter("tcb_head_css_suffix",t.removeStateSuffix),e.head_css({"--rows":n.value,"--row-height":"".concat(e.find(".tve-dynamic-dropdown-option").outerHeight(!0),"px")},null,""),TVE.remove_filter("tcb_head_css_suffix",t.removeStateSuffix)},e.RowsWhenOpen.input=o.noop,e.RowsWhenOpen.prepareValue=function(e){return e=parseInt(e),(isNaN(e)||e<this.model.config.min)&&(e=this.model.config.min),e>this.model.config.max&&(e=this.model.config.max),Math.max(1,e)},e.RowsWhenOpen.update=function(e){this.setValue(TVE.getComputedStyle(e,"--rows",!0))}},removeStateSuffix:function(e){return e.replace(/.tve-state-expanded|.tve-state-hover/g,"")},getWidthVariable:function(){return"--tve-input-max-width"},refreshOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:TVE.ActiveElement,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0!==e.length){var n=parseInt(e.attr("data-filter-progress"));if(n){var o=e.attr("data-progress-subheading");e.find('.tve-dynamic-dropdown-option[data-type="progress"]').show(),o&&0!==o.length||e.find(".tva-filter-progress-subheading").hide()}else e.find('.tve-dynamic-dropdown-option[data-type="progress"]').hide();var r=parseInt(e.attr("data-filter-topics"));if(r){var s=e.attr("data-topics-subheading");e.find('.tve-dynamic-dropdown-option[data-type="topics"]').show(),s&&0!==s.length||e.find(".tva-filter-topics-subheading").hide()}else e.find('.tve-dynamic-dropdown-option[data-type="topics"]').hide();var i=parseInt(e.attr("data-filter-restrictions"));if(i){e.find('.tve-dynamic-dropdown-option[data-type="labels"]').show();var c=e.attr("data-restrictions-subheading");c&&0!==c.length||e.find(".tva-filter-restrictions-subheading").hide()}else e.find('.tve-dynamic-dropdown-option[data-type="labels"]').hide();0===Object.values(t).length&&(t=a.readQueryFromElement(a.getListForDropdown(e)),t=JSON.parse(JSON.stringify(t))),["topics","labels","progress"].forEach((function(n){Array.isArray(t[n])&&t[n].length>0&&e.find('li[data-value^="'.concat(n,'_"]')).each((function(e,o){var a=o.getAttribute("data-value").replace("".concat(n,"_"),"");t[n].includes(a)||(o.style.display="none")}))}))}},toggleFilters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:TVE.ActiveElement;this.controls.FilterTopics.enable(),this.controls.FilterRestrictions.enable(),this.controls.FilterProgress.enable();var t=1===parseInt(e.attr("data-filter-topics")),n=1===parseInt(e.attr("data-filter-restrictions")),o=1===parseInt(e.attr("data-filter-progress"));this.controls.FilterTopicsSubheading.toggle(t),this.controls.FilterRestrictionsSubheading.toggle(n),this.controls.FilterProgressSubheading.toggle(o),t&&n||(t&&this.controls.FilterTopics.disable(),n&&this.controls.FilterRestrictions.disable())},before_update:function(){this.toggleFilters()}})},344:function(e,t){jQuery,e.exports=TVE.Views.Base.component.extend({controls_init:function(){this.controls.Slider.update=function(e){this.setValue(e.head_css("font-size",!1,"",!0,this.config.css_prefix))},this.controls.Slider.getCssProps=function(){return["font-size","width","height","--tve-icon-size"]},this.controls.Slider.input=function(e,t){var n=this,o=Number(t.value);(isNaN(o)||o<=0)&&(o=1,this.setValue(o));var a={};this.getCssProps().forEach((function(e){return a[e]=o+n.getUM()})),this.applyElementCss(a,e,this.config.css_suffix,this.config.css_prefix)}}})},345:function(e,t,n){function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=n(346),i=n(272),c=n(33),l=TVE.Views.Base.control.extend({template:TVE.tpl("source-control"),tabsControl:null,after_initialize:function(){var e=this,t=TVE.Views.Controls.Tabs.extend({after_render:function(){TVE.Views.Controls.Tabs.prototype.after_render.apply(this,arguments),this.$courses=this.$target.find(".tva-resource-courses"),this.$lessons=this.$target.find(".tva-resource-lessons")},renderCourses:function(){return this.$el.find("option:not(.tva-option-placeholder)").remove(),this.$courses.append(e.component.getCourseOptions()),this},selectCourse:function(t,n){this.$lessons.find("option:not(.tva-option-placeholder)").remove(),this.$lessons.append(e.component.getLessonOptions(n.value)),this.$lessons.val("")},selectLesson:function(){var t=this.$lessons.val(),n=this.$courses.val();t&&n&&e.component.fetchData(t,n)},setData:function(e,t){this.$courses.val(e),this.selectCourse(null,{value:e}),this.$lessons.val(t)},change:function(t,n){if("dynamic"===n.dataset.value)return t.attr("data-dynamic",1);t.removeAttr("data-dynamic"),e.component.updatePreview()}});this.tabsControl=new t({component:this.component,el:this.$el.find(".tve-link-tabs")[0],model:this.tabsConfig()}),this.tabsControl.toggleDisabled("dynamic","tva_lesson"===TVE.CONST.post.post_type)},update:function(e){this.tabsControl.setActive(e.attr("data-dynamic")?"dynamic":"static")},selectCourse:function(e,t){this.tabsControl.selectCourse(e,t)},selectLesson:function(e,t){this.tabsControl.selectLesson(e,t)},tabsConfig:function(){return{config:{target:".tve-link-boxes",buttons:[{icon:"link",value:"static",tooltip:TVE.t.linkType.static,tooltip_side:"top"},{icon:"database-regular",value:"dynamic",tooltip:TVE.t.linkType.dynamic,tooltip_side:"top"}]}}}});e.exports=TVE.Views.Base.component.extend({before_update:function(){this.updatePreview()},controls_init:function(e){TVE.BLOCK_ELEMENTS+=", .tva-resource-text",e.showLabel.update=function(t){e.showLabel.setValue(t.tcbCss("--tva-res-heading-display").includes("block"))},e.showLabel.change=function(e,t){e.head_css({"--tva-res-heading-display":"".concat(t.checked?"block":"none")})},e.showIcons.update=function(t){var n=t.tcbCss("--tva-res-icons-display").includes("flex");e.IconAlign.$el.toggle(n),e.showIcons.setValue(n)},e.showIcons.change=function(t,n){e.IconAlign.$el.toggle(n.checked),t.head_css({"--tva-res-icons-display":"".concat(n.checked?"flex":"none")})},e.showDescriptions.update=function(t){e.showDescriptions.setValue(t.tcbCss("--tva-res-description-display").includes("block"))},e.showDescriptions.change=function(e,t){e.head_css({"--tva-res-description-display":"".concat(t.checked?"block":"none")})},e.showDownload.update=function(t){e.showDownload.setValue(t.tcbCss("--tva-res-download-display").includes("table"))},e.showDownload.change=function(e,t){e.head_css({"--tva-res-download-display":"".concat(t.checked?"table":"none")})},e.IconAlign.applyStyles=function(e,t){this.applyElementCss({"--tva-icon-align":"".concat(t.getAttribute("data-value"))},e,"","")},e.IconAlign.update=function(e){this.setActive(e.tcbCss("--tva-icon-align").trim())},e.ButtonAlign.applyStyles=function(e,t){this.applyElementCss({"--tva-button-align":"".concat(t.getAttribute("data-value"))},e,"","")},e.ButtonAlign.update=function(e){this.setActive(e.tcbCss("--tva-button-align").trim())},e.SourseControl=new l({el:this.$(".btn-link")[0],model:{config:{label:"Course & Lesson",class:"thrv-button",keep_links:!0}},component:this})},initPanels:function(){this.placeholderPanel=new s({component:this,minWidth:300,no_buttons:!0}),this.controls.SourseControl.tabsControl.renderCourses(),this.updatePreview()},placeholder_action:function(){var e=this;if(c.isCoursePage())this.fetchData(TVE.CONST.post_id,TVE.CONST.apprentice.course.id,!0,1);else{var t=function(){var t;null==e||null===(t=e.placeholderPanel)||void 0===t||t.open(TVE.ActiveElement,TVE.ActiveElement.find(".tcb-inline-placeholder-action"))};TVE.inner.window.TCB_Front.isInViewport(TVE.ActiveElement[0],200)?t():TVE.inner_$("html").stop().animate({scrollTop:TVE.ActiveElement.offset().top-100},{duration:400,complete:t})}},applyCloudTemplate:function(e){var t={"data-ct-name":e.name,"data-ct":"".concat(e.type,"-").concat(e.id)};if(-1===Number(e.id))TVE.Components.resources.fetchData(TVE.ActiveElement.attr("data-lesson"),TVE.ActiveElement.attr("data-course"),!0);else{var n=TVE.inner_$(e.content),o=TVE.ActiveElement.attr("data-lesson"),r=TVE.ActiveElement,s=TVE.CSS_Rule_Cache.generate_id(),c=e.head_css,l=n.html();t=a(a({},t),{"data-css":s,"data-course":r.attr("data-course")}),c=c.replace(new RegExp("(".concat(n.attr("data-css"),")"),"g"),s),l=/data-lesson="(\d)+"/g.test(l)?l.replace(/data-lesson="(\d)+"/g,'data-lesson="'.concat(o,'"')):l.replace("[tva_lesson_resources",'[tva_lesson_resources data-lesson="'.concat(o,'"')),TVE.Editor_Page.content_manager.insert_head_css(c).done((function(){wp.apiRequest({type:"POST",url:"".concat(TVA.routes.resources,"/shortcode"),data:{shortcode:l},beforeSend:function(){return r.addClass("tve-loader-square")}}).done((function(e){if((null==e?void 0:e.html.length)>0){var n=TVE.inner_$(e.html);n.addClass("tcb-local-vars-root").attr(t),r.replaceWith(n),i.setDataSelectors(n,!0),TVE.Editor_Page.selection_manager.select_element(n.removeClass("edit_mode"))}}))}))}},fetchData:function(e,t){var n=this,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=TVE.ActiveElement,s={"data-lesson":e,"data-course":t};wp.apiRequest({type:"POST",url:"".concat(TVA.routes.resources,"/html"),data:{id:Number(e),dynamic:a},beforeSend:function(){return r.addClass("tve-loader-square")}}).done((function(e){if((null==e?void 0:e.html.length)>0){var t=TVE.inner_$(e.html),a=r;if(o)t.attr(s),r.replaceWith(t),a=t;else{var i=["tva-no-resources","tva-course-unpublished","tva-lesson-unpublished"];r.removeClass("".concat(i.join(" "))).attr(s).html(t.html()),i.forEach((function(e){t.hasClass(e)&&r.addClass(e)})),n.updatePreview()}n.applyButtonStyles(),TVE.Editor_Page.selection_manager.select_element(a.removeClass("edit_mode"))}})).always((function(){r.removeClass("tve-loader-square")}))},getCourseOptions:function(){var e=this,t=Object.keys(null==this?void 0:this.courses),n="";return t.length&&t.forEach((function(t){var o;null!=e&&null!==(o=e.courses[t])&&void 0!==o&&o.lessons.length&&(n+='<option value="'.concat(t,'">').concat(null==e?void 0:e.courses[t].name,"</option>"))})),n},getLessonOptions:function(e){var t,n,o="";return null===(t=this.courses)||void 0===t||null===(n=t[e])||void 0===n||n.lessons.forEach((function(e){return o+='<option value="'.concat(e.ID,'">').concat(e.post_title,"</option>")})),o},updatePreview:function(){if(TVE.ActiveElement){var e=TVE.ActiveElement.attr("data-course"),t=TVE.ActiveElement.attr("data-lesson");this.$(".course-unpublished").toggle(TVE.ActiveElement.hasClass("tva-course-unpublished")),this.$(".lesson-unpublished").toggle(TVE.ActiveElement.hasClass("tva-lesson-unpublished")),this.$(".no-resources").toggle(TVE.ActiveElement.hasClass("tva-no-resources")),this.controls.SourseControl.tabsControl.setData(e,t)}},applyButtonStyles:function(){TVE.Components.button.controls.ButtonPalettes.matchGlobal(TVE.inner_$('.tva-lesson-resources[data-ct="resources--1"] .tva-resource-button'))}})},346:function(e,t){e.exports=TVE.Views.InlinePanel.extend({template:TVE.tpl("resources-inline"),after_render:function(){this.$courses=this.$(".tva-resource-courses"),this.$lessons=this.$(".tva-resource-lessons"),this.renderCourses()},renderCourses:function(){this.$el.find("option:not(.tva-option-placeholder)").remove(),this.$courses.append(this.component.getCourseOptions())},selectCourse:function(e,t){this.$lessons.find("option:not(.tva-option-placeholder)").remove(),this.$lessons.append(this.component.getLessonOptions(t.value)),this.$lessons.val("").show()},selectLesson:function(e,t){this.hide(),this.component.fetchData(t.value,this.$courses.val(),!0)},onOpen:function(){this.$courses.val(""),this.$lessons.val("").hide()},position:function(){this.base_offset=TVE.main.$container.offset(),this.offset=this.$target.offset(),this.offset.left+=this.base_offset.left,this.offset.top+=this.base_offset.top+this.$target.outerHeight();var e=this.__drop_panel_height+this.$target.outerHeight();e-TVE.inner.$window.scrollTop()>TVE.inner.$window.height()?(this.offset.top-=e,this.$(".tcb-panel-arrow").addClass("arrow-bottom")):(this.$(".tcb-panel-arrow").removeClass("arrow-bottom"),this.offset.top-=this.$target.outerHeight()),this.$el.css({left:this.offset.left+this.$target.outerWidth()/2-this.$el.outerWidth()/2+"px",top:this.offset.top-TVE.inner.$window.scrollTop()+"px"})}})},347:function(e,t){e.exports=TVE.Views.Components.Typography.extend({controls_init:function(e){TVE.Views.Components.Typography.prototype.controls_init.call(this,e)}})},348:function(e,t){var n,o;n=jQuery,o="tcb-permanently-hidden",e.exports=TVE.Views.Base.component.extend({$element:null,before_update:function(){this.$element=TVE.ActiveElement},controls_init:function(){this.controls.LabelText.update=function(e){this.setValue(e.attr("data-message"))},this.controls.LabelText.input=function(e,t){e.attr("data-message",n(t).val())}},editCertificate:function(){var e=this;TVE.add_filter("constrain_drop",this.getDropzoneTarget),TVE.main.EditMode.enter(this.$element,{can_insert_elements:!0,show_default_message:!0,restore_state:!0,states:this.getStates(),hidden_elements:["certificate_verification"],callbacks:{exit:function(){TVE.Editor_Page.focus_element(e.$element),e.$element.find(".tve_editor_main_content").removeClass("tve_editor_main_content"),TVE.remove_filter("constrain_drop",e.getDropzoneTarget),e.showDefaultState(e.$element)},state_change:function(t){e.$element.find(".tva-certificate-state").addClass(o).removeClass("tve_editor_main_content"),e.$element.find('.tva-certificate-state[data-state="'+t+'"]').addClass("tve_editor_main_content").removeClass(o).trigger("click")}}})},getDropzoneTarget:function(e){return e+=", .tve-form-drop-zone"},getStates:function(){return[{label:"Valid Certificate",value:"valid",default:!0},{label:"Certificate Verification Form",value:"form",default:!1}]},showDefaultState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:TVE.ActiveElement,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"valid";e.find("[data-state]").addClass(o),e.find('[data-state="'.concat(t,'"]')).removeClass(o).addClass("tcb-active-state"),requestAnimationFrame((function(){return TVE.Editor_Page.reposition_icons()}))}})},349:function(e,t){var n;n=jQuery,e.exports=TVE.Views.Base.component.extend({controls_init:function(){this.controls.placeholder.update=function(e){this.setValue(e.find("input").attr("placeholder"))},this.controls.placeholder.input=function(e,t){e.find("input").attr("placeholder",n(t).val())}}})},350:function(e,t,n){var o=n(351),a=n(352),r=n(353);e.exports={course_title:new o({key:"tva_course_title"}),course_description:new o({key:"tva_course_description"}),course_list_item_name:new a({key:"tva_course_list_item_name"}),course_list_item_description:new a({key:"tva_course_list_item_description"}),course_list_item_type:new a({key:"tva_course_list_item_type"}),course_list_item_topic_title:new a({key:"tva_course_list_item_topic_title"}),course_list_item_lessons_number:new a({key:"tva_course_list_item_lessons_number"}),course_list_item_difficulty_name:new a({key:"tva_course_list_item_difficulty_name"}),course_list_item_label_title:new r({key:"tva_course_list_item_label_title",className:"tva-course-list-item-label"}),course_list_item_progress:new a({key:"tva_course_list_item_progress"}),course_list_item_topic_icon:new r({key:"tva_course_list_item_topic_icon",className:"tva-course-list-item-topic-icon tve-auxiliary-icon-element"}),course_list_item_type_icon:new r({key:"tva_course_list_item_type_icon",className:"tva-course-list-item-type-icon tve-auxiliary-icon-element"}),course_list_item_cover_image:new r({key:"tva_course_list_item_cover_image",className:"tve_image_caption tcb-dynamic-field-source"}),course_list_item_author_image:new r({key:"tva_course_list_item_author_image",className:"tve_image_caption tcb-dynamic-field-source"}),course_list_item_action_button:new r({key:"tva_course_list_item_action_button",className:"thrv-button thrv-button-v2 tcb-local-vars-root"})}},351:function(e,t,n){var o=n(8),a=n(76);e.exports=n(273).extend({getShortcodeName:function(e){var t=e.closest(o.courseSubElementSelectors["course-content-selectors"]),n=TVE._type(t);return this.key.replace("course",n.replace("-","_"))},getShortcodeValue:function(e){var t=a.parseCourseID(parseInt(e.closest(o.courseIdentifier).attr("data-id"))),n=e.closest(o.courseSubElementSelectors["course-content-selectors"]),r=parseInt(n.attr("data-id")),s=TVA.courses[t],i="";if(t===r)i=s[this.key];else if(Array.isArray(s.content)){i=s.content.find((function(e){return e.ID===r}))[this.key]}return i}})},352:function(e,t,n){var o=n(34);e.exports=n(273).extend({getShortcodeValue:function(e){var t=o.getCourse(o.getCourseID(e)),n=o.getSanitizedShortcodeKey(this.key);return void 0!==t[n]?t[n]:""},getShortcodeName:function(){return this.key},alterElement:function(e){if("topic_title"===o.getSanitizedShortcodeKey(this.key)){var t="var(--tcb-dynamic-color-topic-color,var(--tcb-dynamic-color-topic-color-default,rgb(0, 0, 0)))";e.find('[data-shortcode="'.concat(this.key,'"]')).head_css({color:t,"--tve-applied-color":t})}}})},353:function(e,t,n){var o=n(34);e.exports=n(354).extend({getHTML:function(e){var t=o.getCourse(o.getCourseID(e)),n=o.getSanitizedShortcodeKey(this.key),a=t[n];return"function"==typeof this[n]&&(a=this[n](a,t)),a},topic_icon:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=e.includes("<svg")?e.replace("<svg",'<svg style="fill:'.concat(t.topic_icon_color,";color:").concat(t.topic_icon_color,';"')):'<div class="tva-course-list-item-topic-icon-bg" style="background-image: url(\''.concat(e,"');\"></div>")},cover_image:function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=TVE.Components.image.controls.ImagePicker.picker.clean_url(e.dynamic_images.featured);return'<span class="tve_image_frame"><img class="tve_image" src="'.concat(t,'" title="').concat(e.name,'" alt="').concat(e.name,'" data-d-f="featured" loading="lazy" /></span>')},author_image:function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=TVE.Components.image.controls.ImagePicker.picker.clean_url(e.dynamic_images.author);return'<span class="tve_image_frame"><img class="tve_image" src="'.concat(t,'" title="').concat(e.name,'" alt="').concat(e.name,'" data-d-f="author" loading="lazy" /></span>')},label_title:function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t='<span class="thrive-shortcode-content" data-shortcode="tva_course_list_item_label_title" data-shortcode-name="Course Label" contenteditable="false" data-extra_key="">'.concat(e.label_title,"</span>"),n='<p><span class="thrive-inline-shortcode" contenteditable="false">'.concat(t,"</span></p>");return'<div class="thrv_wrapper thrv_text_element">'.concat(n,"</div>")},action_button:function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=TVE.$(TVE.main.static_element("button").html());t.find("a").addClass("tve-dynamic-link").attr({target:"","data-shortcode-id":"tva_course_list_item_permalink","data-dynamic-link":"tva_course_list_item_permalink"});var n='<span class="thrive-shortcode-content" data-shortcode="tva_course_list_item_action_label" data-shortcode-name="Course Action label" contenteditable="false" data-extra_key="">'.concat(e.action_label,"</span>"),o='<span class="thrive-inline-shortcode" contenteditable="false">'.concat(n,"</span>");return t.find(".tcb-button-text").html(o),t.html()},alterElement:function(e){e.is(".tva-course-list-item-topic-icon, .tva-course-list-item-type-icon")&&e.head_css({"font-size":"60px",width:"60px",height:"60px","margin-left":"auto","margin-right":"auto"}),"tva_course_list_item_cover_image"===this.key?(e.attr({"data-dynamic":"featured"}),TVE.ActiveElement=TVE.ClickedElement=e):"tva_course_list_item_author_image"===this.key&&(e.attr({"data-dynamic":"author"}),TVE.ActiveElement=TVE.ClickedElement=e)}})},354:function(e,t){e.exports=TVE.renderers.baseModel.extend({render_default:function(e){var t=TVE.inner_$('<div class="thrv_wrapper '.concat(this.getClassName(),'">').concat(this.getHTML(e),"</div>"));return this.alterElement(t,e),t},getClassName:function(){return this.attributes.className||""},getHTML:function(e){return""},alterElement:function(e,t){}})},355:function(e,t,n){var o={general:n(356),css:n(357),sync:n(358),shortcodes:n(359),cloud:n(360),links:n(361),drag:n(362)},a={tcb_head_css_prefix:9};_.each(o,(function(e){TVE.addHooks(e,a)}))},356:function(e,t,n){var o=n(31),a=n(8),r=n(76),s=n(120),i=a.elements.map((function(e){return"".concat(o.getDropzoneIdentifier(e))})).join(", ")+",".concat(o.getDropzoneIdentifier("course")),c=a.elements.map((function(e){return"".concat(o.getIdentifier(e),", ").concat(o.getListIdentifier(e))})).join(", ")+",.".concat(a.structureItemIconClass,",.").concat(a.toggleExpandCollapseIconClass),l={actions:{tcb_after_cloud_template:function(e){e.is(a.courseIdentifier)&&o.initCourseSubElements(e)}},filters:{"tcb.custom-fields.main-dropdown-values":function(e,t){return s.isInsideCourseEditMode()&&"image"===t&&(e={}),e},"tcb.image_picker.allow_picker_dynamic_source":function(e){return s.isInsideCourseEditMode()&&(e=!1),e},"tcb.cloud_template.course.allow_cache":function(e){return!1,!1},"tcb.cloud_templates.element_name":function(e,t){return"course"===t&&(e="Apprentice Lesson List"),e},"tcb.content.tcb_cls_pat":function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.push("tva-"),e},before_editor_events:function(){TVE.inner.$body.find(a.courseIdentifier).each((function(e,t){o.initCourseSubElements(TVE.inner_$(t))}))},tcb_filter_html_before_save:function(e,t){return t.is(TVE.identifier("contentbox"))||o.saveCourse(e),e},"tcb.compat.not_wrappable":function(e){return e.push("".concat(a.courseIdentifier," *")),e},selectors_no_save:function(e){return s.isInsideCourseEditMode()&&(e+=", ".concat(a.courseIdentifier," *")),e},selectors_no_icons:function(e){return s.isInsideCourseEditMode()&&(e+=", "+c),e},selectors_no_expand:function(e){return s.isInsideCourseEditMode()&&(e+=":not(".concat(o.getDropzoneIdentifier("module"),".tve-state-expanded,").concat(o.getDropzoneIdentifier("chapter"),".tve-state-expanded)")),e},selectors_no_collapse:function(e){return s.isInsideCourseEditMode()&&(e+=":not(".concat(o.getDropzoneIdentifier("module"),":not(.tve-state-expanded),").concat(o.getDropzoneIdentifier("chapter"),":not(.tve-state-expanded))")),e},selectors_no_delete:function(e){return s.isInsideCourseEditMode()&&(e+=", ".concat(i)),e},selectors_no_clone:function(e){return s.isInsideCourseEditMode()&&(e+=", ".concat(i,", ").concat(a.courseSubElementSelectors["course-type-icon"])),e},"tcb.components.expanded_key":function(e){return s.isInsideCourseEditMode()&&e&&e.includes("course-")&&(e="course-type-icon"===e?"icon":"course-structure-item"),e},"tcb.icon.default_size":function(e,t){if(t.hasClass(a.toggleExpandCollapseIconClass)||t.hasClass(a.structureItemIconClass)){var n=o.getActiveState(t);if(n.length&&0!==parseInt(n)||t.closest(".tve-state-expanded").length>0){var r=t.css("font-size");void 0!==r&&(e=r)}}return e},"tcb.lazyload.data":function(e){var t=TVE.inner.$body.find(a.courseIdentifier),n=_.uniq(t.map((function(e,t){return r.parseCourseID(parseInt(t.dataset.id))})));return Array.isArray(n)&&n.length&&(e.structure_course_ids=n),e}}};e.exports=l},357:function(e,t,n){var o=n(8),a=n(32),r=n(197),s=n(31),i=function(e,t){var n=t.parents(o.courseIdentifier);return n.length&&(e=s.getPrefixedSelector(t,n,e)),e},c=function(e,t){if(t.includes(TVE.identifier("course"))&&t.includes("[".concat(o.stateDatasetKey))){var n=t.replace(/\[data-course-state="\d"\]/,"").replace(/([ ]{2,})/g," ");e=TVE.inner_$(n).length>0}return e},l={fn:{},actions:{"tcb.write_css":function(e,t){if(e=e.replace(r.pseudoSelectorsRegex(),""),!TVE.FLAGS.drag&&e.includes(TVE.identifier("course"))){var n=TVE.inner.$document.find(e),o=s.getClosestCourseItem(n);if(o.length){var i=TVE.state_manager.get_parent(),c=!1;i&&1===TVE.inner.$body.find('[data-css="'.concat(i.attr("data-css"),'"]')).length&&(c=!0),n.is(o)||!c&&1!==TVE.inner.$body.find('[data-css="'.concat(n.attr("data-css"),'"]')).length||a.checkForCourseSync(o)}}}},filters:{css_rules_before_insert:function(e){if(TVE.FLAGS.SYNC_NEW_CONTENT){for(var t='.tva-course[data-css="'.concat(TVE.ActiveElement.attr("data-css"),'"]'),n=0;n<e.length;n++)switch(e[n].type){case CSSRule.MEDIA_RULE:for(var o=0;o<e[n].cssRules.length;o++){var a=e[n].cssRules[o],r=a.cssText,s=a.selectorText;if(s.includes(".tva-course")){var i=s.replace(/.tva-course\[data-css="[A=Za-z-0-9]+"\]/gi,t),c=TVE.Editor_Page.editor.find(i.replace(/::after|::hover|:not\(#tve\)/g,"").trim());c.length&&!c.attr("data-selector")&&(e[n].deleteRule(o),e[n].insertRule(r.replace(s,i),o))}}}TVE.FLAGS.SYNC_NEW_CONTENT=!1}return e},tcb_head_css_prefix:i,"tve.css_variable.selector":i,regenerate_css_id:function(e,t){var n='[data-css="'.concat(t,'"]'),o=TVE.inner.$body.find(n);if(o.length){var a=s.getClosestCourseItem(1===o.length?o:o.first());a.length&&1===a.find(n).length&&(e=!1)}return e},"tcb.head_css_new_id":function(e){var t=TVE.inner.$body.find('[data-css="'.concat(e,'"]')),n=s.getClosestCourseItem(t);return 1===t.length&&n.length>0&&!TVE.FLAGS.drag&&a.checkForCourseSync(t),e},"tcb.css.save.whitelist_rule":c,"ttb.css.save.whitelist_rule":c}};e.exports=l},358:function(e,t,n){var o=n(31),a=n(32),r=function(e){return a.checkForCourseSync(e)};TVE.PostList.constants.htmlChangeActions.forEach((function(e){return TVE.add_action(e,r)}));var s={actions:{"tcb.after-insert":function(e){TVE.Elements[TVE._type(e)]?e.closest("".concat(TVE.identifier("course-lesson"),", ").concat(TVE.identifier("course-chapter"),", ").concat(TVE.identifier("course-module"))).length&&r(e):console.warn("Corresponding element not found inside TVE.Elements for:"+e)},"tcb.element.focus":function(e){var t=e.closest(TVE.identifier("course"));if(t.length){var n=e.closest("".concat(TVE.identifier("course-lesson"),", ").concat(TVE.identifier("course-chapter"),", ").concat(TVE.identifier("course-module")));if(n.length){var o=TVE.identifier(TVE._type(e)),a=n.find(o).addBack(o).index(e);if(-1!==a){var r=TVE.identifier(TVE._type(n));e.closest(".tve-state-expanded").length>0&&(r="".concat(r," ").concat(".tve-state-expanded")),t.find(r).each((function(e,t){TVE.inner_$(t).find(o).addBack(o).eq(a).addClass("tcb_similar_edit")}))}}else{var s=e.closest(".tva-course-item-dropzone");s.length>0&&s.find(".tva-course-state-content:empty").length>0&&TVE.toggleEnabledComponents({"course-structure-item":TVE.Components["course-structure-item"]},!1,"This cannot be changed if the container is empty, try adding something to the container first.")}}},"tcb.focus.clear":function(){TVE.inner.$body.find("tcb_similar_edit").removeClass("tcb_similar_edit")},"tcb.element.duplicate":function(e,t){e.parents(TVE.identifier("course")).length>0&&r(e)},"tcb.element.remove":function(e){TVA.$courseItemToSync&&(r(TVA.$courseItemToSync),delete TVA.$courseItemToSync)},"tcb.froala.blur":function(e,t){void 0!==TVE.ActiveElement&&TVE.ActiveElement.is(TVE.TEXT_ALL)&&r(t.$el)},"tcb.columns.resized":function(e){TVE.inner.$body.find('[data-css="'.concat(e.left_column.data("css"),'"]')).length&&r(e.left_column)},"tcb.columns.render":r},filters:{allow_remove:function(e,t){var n=o.getClosestCourseItem(t[0]);return n.length&&(TVA.$courseItemToSync=n),e}}};e.exports=s},359:function(e,t,n){var o=n(8),a=n(32),r=n(120),s=n(76),i=function(e,t,n){e.find('option[value="'.concat(t,'"]')).html(n)},c={actions:{"tcb.froala.before_shortcode_popup":function(e,t,n){e.find("#fr-dropdown-categories-list").find('option[value="'.concat("Apprentice fields",'"]')).toggle(!!r.isInsideCourseEditMode())},"tcb.froala.after_shortcode_select":function(e){var t=TVE._type(TVE.ActiveElement.closest(o.courseSubElementSelectors["course-content-selectors"]));"course-chapter"===t&&e.find(".tve-custom-input-container").empty()}},filters:{"tve.shortcode.options.html":function(e,t){if("Apprentice fields"===t&&r.isInsideCourseEditMode()){var n=TVE.ActiveElement.closest(o.courseSubElementSelectors["course-content-selectors"]),a=parseInt(n.attr(o.stateDatasetKey)),s=TVE._type(n),c=TVE.$(e),l=TVE.CONST.inline_shortcodes["Apprentice fields"],u=l.filter((function(e){return Array.isArray(e.only_for)&&!e.only_for.includes(s)}));switch(a!==o.states.no_access&&u.push(l.find((function(e){return"tva_course_restriction_label"===e.value}))),s){case"course":i(c,"tva_course_title","Course title"),i(c,"tva_course_description","Course description"),i(c,"tva_course_type","Course Type");break;case"course-module":i(c,"tva_course_title","Module title"),i(c,"tva_course_description","Module description"),i(c,"tva_course_index","Module number"),i(c,"tva_course_children_count_with_label","Chapter/Lesson count with label");break;case"course-chapter":i(c,"tva_course_title","Chapter title"),i(c,"tva_course_description","Chapter description"),i(c,"tva_course_index","Chapter number"),i(c,"tva_course_children_count_with_label","Lesson count with label");break;case"course-lesson":i(c,"tva_course_title","Lesson title"),i(c,"tva_course_description","Lesson description"),i(c,"tva_course_status","Lesson status"),i(c,"tva_course_index","Lesson number"),i(c,"tva_course_type","Lesson type label");break;default:i(c,"tva_course_title","Title"),i(c,"tva_course_description","Description"),i(c,"tva_course_status","Status"),i(c,"tva_course_type","Course Type"),i(c,"tva_course_children_count_with_label","Lesson count with label")}u.forEach((function(e){c.find('option[value="'.concat(e.value,'"]')).remove()})),e=c[0].outerHTML}return e},"tcb.froala.display_existing_shortcode_data":function(e){return r.isInsideCourseEditMode()&&s.allowApprenticeShortcodes(e.key)&&(e.key=e.key.replace(/tva_course_(module_|chapter_|lesson_)/,"tva_course_")),e},"tcb.inline_shortcodes.shortcode_group":function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.push("Apprentice fields"),e},"tcb.inline_shortcodes.afterInsert":function(e,t){if(r.isInsideCourseEditMode()&&s.allowApprenticeShortcodes(t.key)){var n=TVE._type(e.closest(o.courseSubElementSelectors["course-content-selectors"])),i=e.find(".thrive-shortcode-content");if(i.attr({"data-shortcode":t.key.replace("course",n.replace("-","_"))}),parseInt(i.attr("data-attr-link"))){var c=s.parseCourseID(parseInt(e.closest(o.courseIdentifier).attr("data-id"))),l=parseInt(e.closest(o.courseSubElementSelectors["course-content-selectors"]).attr("data-id")),u=TVA.courses[c],d=TVE.$("<a></a>");d.attr({href:c===l?u.tva_permalink:u.content.find((function(e){return e.ID===l})).tva_permalink,target:parseInt(i.attr("data-attr-target"))?"_blank":"",rel:parseInt(i.attr("data-attr-rel"))?"nofollow":""}).text(i.text()),i.html(d)}a.checkForCourseSync(e)}return e},"tcb.inline_shortcodes.shortcode_value":function(e,t){if(r.isInsideCourseEditMode()&&s.allowApprenticeShortcodes(t.key)){var n=s.parseCourseID(parseInt(TVE.ActiveElement.closest(o.courseIdentifier).attr("data-id"))),a=parseInt(TVE.ActiveElement.closest(o.courseSubElementSelectors["course-content-selectors"]).attr("data-id")),i=TVA.courses[n];if(n===a)e=i[t.key];else if(Array.isArray(i.content)){e=i.content.find((function(e){return e.ID===a}))[t.key]}}return e}}};e.exports=c},360:function(e,t,n){var o=n(8),a={actions:{"tcb.cloud_template.course.after_apply":function(e,t){TVE.froala.handleEmptyShortcodes(t)}},filters:{"tcb.cloud_templates.change_main_wrapper_data_css":function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.push("course"),e},"tcb.cloud_template_download_params":function(e){return TVE.ActiveElement&&TVE.ActiveElement.is(o.courseIdentifier)&&(e.data.course_id=TVE.ActiveElement.attr("data-id"),e.data.display_level=TVE.ActiveElement.attr("data-display-level")||""),e}}};e.exports=a},361:function(e,t,n){var o=n(120),a=n(76),r=n(8),s=n(32),i=function(e){if(o.isInsideCourseEditMode()&&a.allowApprenticeShortcodes(e.attr("data-shortcode-id"))){var t=a.parseCourseID(parseInt(e.closest(r.courseIdentifier).attr("data-id"))),n=parseInt(e.closest(r.courseSubElementSelectors["course-content-selectors"]).attr("data-id")),i=TVE._type(e.closest(r.courseSubElementSelectors["course-content-selectors"])),c=TVA.courses[t],l={"data-dynamic-link":e.attr("data-dynamic-link").replace("course_content",i.replace("-","_"))};if(t===n)l.href=c.tva_permalink;else{var u=c.content.find((function(e){return e.ID===n}));l.href=u.tva_permalink}e.attr(l),s.checkForCourseSync(e)}};e.exports={actions:{tcb_set_dynamic_link:function(e,t){0===t.length&&(t=e.parent()),i(t)},"tcb.froala.dynamic_link_after_insert":function(e){i(e)},"tcb.froala.link.tab.dynamic":function(e){var t=e.find("#fr-dynamic-category-list"),n=TVE._type(TVE.ActiveElement.closest(r.courseSubElementSelectors["course-content-selectors"]));t.find('option[value="'.concat("Apprentice course links",'"]')).toggle(o.isInsideCourseEditMode()&&"course-chapter"!==n)}},filters:{"tcb.update_dynamic_popup_shortcode":function(e){return o.isInsideCourseEditMode()&&a.allowApprenticeShortcodes(e)&&(e="tva_course_content_url"),e},"tcb.render_dynamic_categories":function(e){var t=TVE._type(TVE.ActiveElement.closest(r.courseSubElementSelectors["course-content-selectors"]));if(!o.isInsideCourseEditMode()||"course-chapter"===t){var n=e.indexOf("Apprentice course links");n>-1&&e.splice(n,1)}return e}}}},362:function(e,t,n){var o=n(120),a=n(8),r=(n(31),{actions:{"tcb.dragstart":function(e){o.isInsideCourseEditMode()&&(TVE.main.EditMode.element().find(a.courseSubElementSelectors["course-dropzones"]).addClass("tve-no-drop-inside"),e.closest(a.courseSubElementSelectors["course-dropzones"]).removeClass("tve-no-drop-inside"))}},filters:{non_draggable:function(e){return o.isInsideCourseEditMode()&&(e+=",.".concat(a.structureItemIconClass,",.").concat(a.toggleExpandCollapseIconClass)),e},allow_dragenter:function(e,t){return o.isInsideCourseEditMode()&&t.is(".".concat(a.structureItemIconClass,",.").concat(a.toggleExpandCollapseIconClass))&&(e=!1),e},dropzone_elements:function(e){return o.isInsideCourseEditMode()&&(o.isInternalDrag()?TVE.FLAGS.$dragged_element.is(".tva-course-no-drag")&&(e="#nothing-can-be-dragged"):e+=", ".concat(a.courseSubElementSelectors["course-dropzones"])),e},constrain_drop:function(e){return o.isInsideCourseEditMode()&&o.isInternalDrag()&&(e+=",".concat(a.courseSubElementSelectors["course-dropzones"])),e},only_inner_drop:function(e){return o.isInsideCourseEditMode()&&(e+=",".concat(a.courseSubElementSelectors["course-dropzones"])),e},"tcb.get_dropzone_target":function(e){if(o.isInsideCourseEditMode()){var t=TVE.main.EditMode.element().find(a.courseSubElementSelectors["course-dropzones"]).filter(":visible").not(":empty").first();e=t.length?t.children().last():e}return e}}});e.exports=r},363:function(e,t,n){var o={cloud:n(364),general:n(365),layout:n(366),drag:n(367),css:n(368),sync:n(369),shortcodes:n(370),dynamic:n(371)},a={tcb_filter_html_before_save:9,tcb_head_css_prefix:9};_.each(o,(function(e){TVE.addHooks(e,a)}))},364:function(e,t,n){var o=n(9);function a(e,t){return e.filter(t).length?e.filter(t):e.find(t)}function r(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r={},s=this.applyTo.hasClass("tcb-elem-placeholder"),i=TVE.inner_$(n.content),c=1===i.length&&i.is(o.identifier)?i:i.filter(o.identifier),l=i.find(o.dropdownIdentifier),u=i.find(o.searchIdentifier),d=s?a(i,o.dropdownIdentifier):TVE.Editor_Page.editor.find("".concat(o.dropdownIdentifier,'[data-list="').concat(this.applyTo.attr("data-css"),'"]')),p=s?a(i,o.searchIdentifier):TVE.Editor_Page.editor.find("".concat(o.searchIdentifier,'[data-list="').concat(this.applyTo.attr("data-css"),'"]'));if(c.length){var f=s?i:c;this.applyTo.parent().is(".tcb-clear")?this.applyTo.parent().replaceWith(f):this.applyTo.replaceWith(f),this.applyTo=c}TVE.ActiveElement=this.applyTo,this.applyTo.data("tcb-elem-type","").attr({"data-ct-name":n.name,"data-ct":n.type+"-"+n.id,"data-element-name":TVE.t.elements[this.$$type]});var h=c.find("[data-css]").addBack("[data-css]");if(h.each((function(){this.dataset.css&&(void 0===r[this.dataset.css]?r[this.dataset.css]=TVE.CSS_Rule_Cache.uniq_id(this,!0):this.dataset.css=r[this.dataset.css])})),l.length&&d.length){var v=l.attr("data-css"),m=TVE.CSS_Rule_Cache.uniq_id(d,!0);r[v]=m,[d.find(".tve-lg-dropdown-list"),d.find(".tve-dynamic-dropdown-option")].forEach((function(e){var t=e.attr("data-selector").replace(v,m);e.attr("data-selector",t)}))}return u.length&&p.length&&(r[TVE.CSS_Rule_Cache.uniq_id(u)]=TVE.CSS_Rule_Cache.uniq_id(p,!0),r[TVE.CSS_Rule_Cache.uniq_id(u.find(".thrv-sf-submit"))]=TVE.CSS_Rule_Cache.uniq_id(p.find(".thrv-sf-submit"),!0),r[TVE.CSS_Rule_Cache.uniq_id(u.find(".thrv-sf-input"))]=TVE.CSS_Rule_Cache.uniq_id(p.find(".thrv-sf-input"),!0)),TVE.drag.bind_element(d.closest(".thrv-columns")),TVE.drag.bind_element(p.closest(".thrv-columns")),TVE.drag.bind_element(this.applyTo),TVE.Editor_Page.reposition_icons(),e=n.head_css,TVE.$.each(r,(function(t,n){e=e.replace(new RegExp("(".concat(t,")"),"g"),n)})),TVE.inner.window.TCB_Front.resizePageSection(),TVE.do_action("tcb_after_cloud_template",this.applyTo,"cloud-template"),d.attr("data-list",this.applyTo.attr("data-css")),p.attr("data-list",this.applyTo.attr("data-css")),TVE.Editor_Page.content_manager.insert_head_css(e).done((function(){TVE.do_action("tcb_after_cloud_template_css_inserted",t.applyTo),TVE.Editor_Page.focus_element(t.applyTo)})),n}e.exports={actions:{},filters:{"tcb.cloud_templates.apply_callback":function(e,t){return t&&t.length&&(t.is(o.identifier)||t.is(".tcb-elem-placeholder")&&t.find(".tcb-icon-course-list").length)&&(TVE.PostList.utils.getPaginationForList(t).remove(),e=r),e},"tcb.cloud_template_download_params":function(e){return TVE.ActiveElement&&TVE.ActiveElement.is(o.identifier)&&(e.data.query=(TVE.ActiveElement.attr("data-query")||"").split("[").join("|{|").split("]").join("|}|"),e.data.pagination_type=TVE.ActiveElement.attr("data-pagination-type")||"",e.data.posts_per_page=TVE.ActiveElement.attr("data-posts_per_page")||"",e.data.no_posts_text=TVE.ActiveElement.attr("data-no_posts_text")||""),e}}}},365:function(e,t,n){var o=n(198),a=n(9),r=n(122),s={actions:{"tcb.cloud_template.search_form.before_apply":function(e,t){var n=t.attr("data-list");n&&(e.content=TVE.$(e.content).attr("data-list",n).wrapAll("<div></div>").parent().html())},"tcb.edit_mode.exit":function(e){e.is(a.identifier)&&r.exitEditMode(e)}},filters:{"tcb.cloud_template.search_form.allow_cache":function(e){return TVE.ActiveElement&&TVE.ActiveElement.is(a.identifier)&&(e=!1),e},thrive_list_items_identifiers:function(e){return e+=", ".concat(a.itemIdentifier)},tcb_filter_html_before_save:function(e,t){return t.is(TVE.identifier("contentbox"))||(o.saveList(e),o.saveDropdown(e)),e},"tcb.list.identifier":function(e,t){return t.is(a.identifier)&&(e=a.identifier),e},"tcb.hidden_controls.search_form.search_form":function(e,t,n,o){return TVE.ActiveElement.attr("data-list")&&(e.push("PostTypes"),e.push(".add-post-type-control")),e},selectors_no_expand:function(e){return e+=":not(.tva-course-list-dropdown:not(.tve-state-expanded))"},selectors_no_collapse:function(e){return e+=":not(.tva-course-list-dropdown.tve-state-expanded)"},"tcb.components.expanded_key":function(e,t){return"course_list_item_type_icon"===e&&(e="icon"),e},selectors_no_icons:function(e){return r.isInsideEditMode()&&(e+=", ".concat(a.itemIdentifier)),e},"tcb.is_list_edit_mode":function(e){return r.isInsideEditMode()&&(e=!0),e},"tcb.list_item_identifier":function(e){return r.isInsideEditMode()&&(e=a.itemIdentifier),e}}};e.exports=s},366:function(e,t,n){var o=n(9),a={actions:{},filters:{"tcb.post_list.layout.getListIdentifier":function(e,t){return t&&t.closest(o.identifier).length>0&&(e=o.identifier),e},"tcb.post_list.layout.getItemIdentifier":function(e,t){return t&&t.closest(o.identifier).length>0&&(e=o.itemIdentifier),e}}};e.exports=a},367:function(e,t,n){var o=n(122),a=n(9);e.exports={actions:{"tcb.dragstart":function(e){o.isInsideEditMode()&&(TVE.main.EditMode.element().find(a.itemIdentifier).addClass("tve-no-drop-inside"),e.closest(a.itemIdentifier).removeClass("tve-no-drop-inside"))}},filters:{only_inner_drop:function(e){return o.isInsideEditMode()&&(e+=",".concat(a.itemIdentifier)),e},constrain_drop:function(e){return o.isInsideEditMode()&&o.isInternalDrag()&&(e+=",".concat(a.itemIdentifier)),e},"tcb.get_dropzone_target":function(e){if(o.isInsideEditMode()){var t=TVE.main.EditMode.element().find(a.itemIdentifier).first();e=t.length?t.children().last():e}return e}}}},368:function(e,t,n){var o=n(9),a=n(198),r=n(121),s=n(197),i=function(e,t){var n=t.parents(o.identifier);return n.length&&(e=a.getPrefixedCourseListSelector(t,n,e)),e},c={actions:{"tcb.write_css":function(e,t){if(e=e.replace(s.pseudoSelectorsRegex(),""),!TVE.FLAGS.drag&&e.includes(o.identifier)){var n=TVE.inner.$document.find(e),i=a.getClosestCourseListItem(n);if(i.length){var c=TVE.state_manager.get_parent(),l=!1;c&&1===TVE.inner.$body.find('[data-css="'.concat(c.attr("data-css"),'"]')).length&&(l=!0),n.is(i)||!l&&1!==TVE.inner.$body.find('[data-css="'.concat(n.attr("data-css"),'"]')).length||r.checkForCourseListSync(i)}}}},filters:{tcb_head_css_prefix:i,"tve.css_variable.selector":i,regenerate_css_id:function(e,t){var n='[data-css="'.concat(t,'"]'),o=TVE.inner.$body.find(n);if(o.length){var r=a.getClosestCourseListItem(1===o.length?o:o.first());r.length&&1===r.find(n).length&&(e=!1)}return e},"tcb.head_css_new_id":function(e){var t=TVE.inner.$body.find('[data-css="'.concat(e,'"]')),n=a.getClosestCourseListItem(t);return 1===t.length&&n.length>0&&!TVE.FLAGS.drag&&r.checkForCourseListSync(t),e},"tcb.css.save.whitelist_rule":function(e,t){return t.includes(o.identifier)&&t.includes(":nth-child")&&(t=(t=t.replace(/:not\((:nth-child\(.*\))\)/g,"")).replace(/(:nth-child\(.*\))/g,""),TVE.inner.$body.find(t).length&&(e=!0)),e}}};e.exports=c},369:function(e,t,n){var o=n(198),a=n(9),r=n(121),s=function(e){return r.checkForCourseListSync(e)};TVE.PostList.constants.htmlChangeActions.forEach((function(e){return TVE.add_action(e,s)}));var i={actions:{"tcb.after-insert":function(e){TVE.Elements[TVE._type(e)]?o.getClosestCourseListItem(e).length&&s(e):console.warn("Corresponding element not found inside TVE.Elements for:"+e)},"tcb.element.focus":function(e){var t=e.closest(a.itemIdentifier);if(t.length){var n=TVE.identifier(TVE._type(e)),o=t.find(n).index(e);if(-1!==o)t.closest(a.identifier).find(a.itemIdentifier).each((function(e,t){TVE.inner_$(t).find(n).eq(o).addClass(TVE.PostList.constants.SIMILAR_EDIT_CLASS)}))}},"tcb.focus.clear":function(){TVE.inner.$body.find("tcb_similar_edit").removeClass("tcb_similar_edit")},"tcb.element.duplicate":function(e,t){e.parents(a.identifier).length>0&&s(e)},"tcb.element.remove":function(e){if(TVA.$courseListItemToSync&&(s(TVA.$courseListItemToSync),delete TVA.$courseListItemToSync),e.is(a.identifier)){var t=TVE.CSS_Rule_Cache.uniq_id(e);TVE.Editor_Page.editor.find('[data-list="'.concat(t,'"]')).each((function(e,t){TVE.Components.course_list.removeFilterElement(TVE.inner_$(t))}))}},"tcb.froala.blur":function(e,t){void 0!==TVE.ActiveElement&&TVE.ActiveElement.is(TVE.TEXT_ALL)&&s(t.$el)},"tcb.columns.resized":function(e){TVE.inner.$body.find('[data-css="'.concat(e.left_column.data("css"),'"]')).length&&s(e.left_column)},"tcb.columns.render":s,"tva.course_list.after_sync":function(e){"masonry"===TVE.PostList.utils.readValue(e,"type")&&setTimeout((function(){TVE.PostList.layout.applyLayout(e)}),100)},"tcb.animations.after_apply":function(){var e=TVE.ActiveElement;e.is(a.itemIdentifier)?TVE.PostList.content.itemEventSync(e,e.closest(a.identifier),!0):s(e)},"tcb.animations.after_remove":function(){var e=TVE.ActiveElement;e.is(a.itemIdentifier)?TVE.PostList.content.itemEventSync(e,e.closest(a.identifier),!1):s(e)}},filters:{allow_remove:function(e,t){var n=o.getClosestCourseListItem(t[0]);return n.length&&(TVA.$courseListItemToSync=n),e}}};e.exports=i},370:function(e,t,n){var o=n(122),a=n(34),r=n(121),s={actions:{"tcb.froala.before_shortcode_popup":function(e,t,n){var a=e.find("#fr-dropdown-categories-list"),r=!!o.isInsideEditMode();a.find('option[value="'.concat("Apprentice course data",'"]')).toggle(r),r&&t.closest(".thrv-button").length>0&&a.find('option[value="Global fields"], option[value="Custom fields"], option[value="User data"], option[value="Request data"]').hide()},"tcb.froala.after_shortcode_select":function(e,t){o.isInsideEditMode()&&TVE.ActiveElement.closest(".thrv-button").length>0&&a.allowApprenticeShortcodes(t.selectedData.key)&&e.find(".tve-custom-input-container").empty()}},filters:{"tcb.inline_shortcodes.shortcode_group":function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.push("Apprentice course data"),e},"tcb.inline_shortcodes.afterInsert":function(e,t){if(o.isInsideEditMode()){if(a.allowApprenticeShortcodes(t.key)){var n=e.find(".thrive-shortcode-content");if(parseInt(n.attr("data-attr-link"))){var s=a.getCourse(),i=TVE.$("<a></a>");i.attr({href:s.permalink,target:parseInt(n.attr("data-attr-target"))?"_blank":"",rel:parseInt(n.attr("data-attr-rel"))?"nofollow":""}).text(n.text()),n.html(i)}}r.checkForCourseListSync(e)}return e},"tcb.inline_shortcodes.shortcode_value":function(e,t){if(o.isInsideEditMode()&&a.allowApprenticeShortcodes(t.key)){var n=a.getSanitizedShortcodeKey(t.key);e=a.getCourse()[n]}return e}}};e.exports=s},371:function(e,t,n){var o=n(9),a=n(122),r=n(34),s=n(121),i=function(e){var t=r.getCourse();t&&(TVE.ActiveElement.attr({"data-dynamic":e}).find(".tve_image").attr({src:TVE.Components.image.controls.ImagePicker.picker.clean_url(t.dynamic_images[e]),title:t.name,alt:t.name,"data-d-f":e}).removeAttr("srcset"),s.checkForCourseListSync(TVE.ActiveElement))};e.exports={actions:{"tcb.froala.link.tab.dynamic":function(e){e.find('#fr-dynamic-category-list option[value="'.concat("Apprentice Course List",'"]')).toggle(a.isInsideEditMode())},"tcb.froala.dynamic_link_after_insert":function(e){!function(e){if(a.isInsideEditMode()&&r.allowApprenticeShortcodes(e.attr("data-shortcode-id"))){var t=r.getCourse();e.attr({href:t.permalink})}}(e)}},filters:{"tcb.get_dynamic_colors":function(e){if(a.isInsideEditMode()){var t=r.getCourse();t&&((e=[]).push({color:t.label_color,name:"Label: ".concat(t.label_title),label:"Label: ".concat(t.label_title),id:"label-color",custom_name:1,active:1}),e.push({color:t.topic_color,name:"Topic: ".concat(t.topic_title),label:"Topic: ".concat(t.topic_title),id:"topic-color",custom_name:1,active:1}))}return e},"tcb.dynamic_image.show_tab":function(e){return a.isInsideEditMode()&&(e=!0),e},"tcb.dynamic_image_input.callback":function(e){return a.isInsideEditMode()&&(e=i),e},"tcb.custom-fields.main-dropdown-values":function(e,t){return a.isInsideEditMode()&&"image"===t&&((e=_.pick(e,["","author","featured"])).featured=o.courseImageLabel,e.author=o.authorImageLabel),e},"tcb.dynamic_image.show_sizes_select":function(e){return a.isInsideEditMode()&&(e=!1),e},"tcb.dynamic_image.change_type":function(e,t){return a.isInsideEditMode()&&(e=t.includes("course-author")?"author":"featured"),e},"tcb.dynamic_image.change_url":function(e,t){return a.isInsideEditMode()&&(e="var(".concat(TVE.CONST.dynamic_background_url_prefix,"course-").concat("featured"===t?"image":"author",")")),e},"tcb.dynamic_image.options":function(e){return a.isInsideEditMode()&&(e.featured.label=o.courseImageLabel,e.author.label=o.authorImageLabel),e},"tcb.froala.options":function(e,t,n){return a.isInsideEditMode()&&t.closest(".thrv-button").length&&t.closest(".tva-course-list").length&&(e.toolbarButtons=n.inline_shortcode),e},"tcb.image_picker.dynamic_source":function(e){if(a.isInsideEditMode()){var t=r.getCourse();t&&(TVE.ActiveElement.attr({"data-dynamic":"featured"}),e.url=TVE.Components.image.controls.ImagePicker.picker.clean_url(t.dynamic_images.featured),e.title=t.name,e.alt=t.name)}return e},"tcb.render_dynamic_categories":function(e){if(!a.isInsideEditMode()){var t=e.indexOf("Apprentice Course List");t>-1&&e.splice(t,1)}return e}}}},372:function(e,t,n){var o={general:n(373),froala:n(374)},a={"tcb.symbol.before_save_logic":9999999};_.each(o,(function(e){TVE.addHooks(e,a)}))},373:function(e,t,n){var o=n(265),a=n(272),r={actions:{"tcb.element.selected.resources":function(e){a.setDataSelectors(e)},"tcb.element.selected.resources_label":function(e){a.setDataSelectors(e.closest(".tva-lesson-resources"))},"tcb.element.selected.resources_button":function(e){a.setDataSelectors(e.closest(".tva-lesson-resources"))},"tcb.element.selected.resources_container":function(e){a.setDataSelectors(e.closest(".tva-lesson-resources"))},"tcb.element.selected.resources_icon":function(e){a.setDataSelectors(e.closest(".tva-lesson-resources"))},"tcb.element.selected.resources_item":function(e){a.setDataSelectors(e.closest(".tva-lesson-resources"))},"tcb.element.duplicate":function(e,t){var n=t.closest(".".concat(o.elementIdentifier));n.length&&a.setDataSelectors(n)},"tcb.button_secondary_text.change":function(e){var t=e.closest(".".concat(o.elementIdentifier));t.length&&a.setDataSelectors(t)},"tve.lazyload.done":function(){var e,t;null!==(e=TVE)&&void 0!==e&&null!==(t=e.Components)&&void 0!==t&&t.resources&&wp.apiRequest({url:"".concat(TVA.routes.resources,"/get_data")}).done((function(e){Object.keys(null==e?void 0:e.courses).length>0&&(TVE.Components.resources.courses=e.courses,TVE.Components.resources.initPanels())}))},"tcb.symbol.before_save_logic":function(e){e||(e=TVE.ActiveElement),a.setDataSelectors(e.find(".".concat(o.elementIdentifier)))},"tcb.element.remove":function(e){"tva_lesson"===TVE.CONST.post.post_type&&e.hasClass(o.elementIdentifier)&&0===TVE.Editor_Page.editor.find(".".concat(o.elementIdentifier)).length&&TVE.inner_$(".tva-template-lesson-resources,".concat(o.elementSelectorInsideTemplate)).removeClass("tcb-permanently-hidden")}},filters:{allow_dragenter:function(e,t){return t.is(".".concat(o.elementIdentifier," *"))&&(e=!1),e},non_draggable:function(e){return"".concat(e,", .").concat(o.elementIdentifier," *")},element_drop:function(e){return e.hasClass(o.elementIdentifier)&&"tva_lesson"===TVE.CONST.post.post_type&&TVE.inner_$(".tva-template-lesson-resources,".concat(o.elementSelectorInsideTemplate)).addClass("tcb-permanently-hidden"),e},selectors_editable:function(e){return"".concat(e,", .").concat(o.editable)},selectors_mouseover:function(e){return"".concat(e,", .").concat(o.editable)},selectors_no_icons:function(e){return"".concat(e,", .").concat(o.editable,", .").concat(o.elementIdentifier," .thrv_text_element")},selectors_no_save:function(e){return"".concat(e,", .").concat(o.elementIdentifier)},"tcb.shared_style.element_type":function(e,t){return t.hasClass(o.buttonIdentifier)&&(e="button"),e},"tcb.cloud_templates.apply_callback":function(e,t){return null!=t&&t.length&&t.is(TVE.identifier("resources"))&&(e=TVE.Components.resources.applyCloudTemplate),e},"tcb.state.hide.button.resources_button":function(e,t){return"hover"===t},"tcb.group.editing.change.icons.for":function(e){return e+", .".concat(o.buttonIdentifier)},tcb_filter_html_before_save:function(e){if(TVE.apply_filters("tva.resources_element.save_shortcode",!0)){var t,n,r=e.find(".".concat(o.elementIdentifier,":not(.tcb-elem-placeholder)"));"tva_lesson"===(null===(t=TVE.CONST)||void 0===t||null===(n=t.post)||void 0===n?void 0:n.post_type)&&wp.apiRequest({type:"POST",url:"".concat(TVA.routes.resources,"/hide_default"),data:{id:Number(TVE.CONST.post.ID),value:Number(r.length>0)}}),r.each((function(e,t){var n=TVE.inner_$(t),o=n.find(".tva-resource-label"),r=o.parent(),s=n.find(".tva-resource-item");n.removeClass("tcb-group-editing tva-lesson-not-available tva-no-resources tva-course-unpublished tva-lesson-unpublished"),n.find(".tva-resource-warning").remove();var i=r.hasClass("tcb-clear")?r[0].outerHTML:o[0].outerHTML;s.find(".tva-resource-icon").html("[tva_resource_icon]"),s.find(".tva-resource-title-text").replaceWith("[tva_resource_title]"),s.find(".tva-resource-description-text").replaceWith("[tva_resource_description]"),s.find(".tva-res-open a").attr("href","{{tva_resource_open}}"),s.find(".tva-res-download a").attr("href","{{tva_resource_download}}"),i+="[tva_resource_item ".concat(a.getElementAttributes(s[0]),"]").concat(s[0].innerHTML,"[/tva_resource_item]");var c=TVE.apply_filters("tva.resources_element.attributes",a.getElementAttributes(t));n.replaceWith("[tva_lesson_resources ".concat(c,"]").concat(i,"[/tva_lesson_resources]"))}))}return e},"tcb.collect_head_css.whitelist_rule":function(e,t){return a.whitelistRule(e,t)},"tcb.css.should_save_rule":function(e,t){return a.whitelistRule(e,null==t?void 0:t.selectorText)},"ttb.css.save.whitelist_rule":function(e,t){return a.whitelistRule(e,t)},"tve.button.cloud_template.align":function(e){return TVE.ActiveElement.hasClass("tva-resource-button")&&(e=!1),e},"tcb.button.default_icon":function(e){return TVE.ActiveElement.hasClass("tva-res-download")?e='<span class="tcb-button-icon"><div class="thrv_wrapper thrv_icon tve_no_drag tve_no_icons tcb-icon-inherit-style"><svg class="tcb-icon" viewBox="0 0 512 512" data-id="icon-download-solid" data-name=""><path d="M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"></path></svg></div></span>':TVE.ActiveElement.hasClass("tva-res-open")&&(e='<span class="tcb-button-icon"><div class="thrv_wrapper thrv_icon tve_no_drag tve_no_icons tcb-icon-inherit-style"><svg class="tcb-icon" viewBox="0 0 448 512" data-id="icon-external-link-square-solid" data-name=""><path d="M448 80v352c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V80c0-26.51 21.49-48 48-48h352c26.51 0 48 21.49 48 48zm-64 47.111C384 109.929 370.071 96 352.889 96H220.667c-12.887 0-23.333 10.447-23.333 23.334v14.904c0 13.138 10.843 23.686 23.976 23.324l56.002-1.588L69.908 361.908c-7.858 7.802-7.88 20.504-.05 28.334l19.899 19.899c7.83 7.83 20.532 7.808 28.334-.05l205.935-207.404-1.588 56.003c-.362 13.133 10.186 23.976 23.324 23.976h14.904c12.887 0 23.334-10.447 23.334-23.333V127.111z"></path></svg></div></span>'),e},"tcb.cloud_templates.resources":function(e){return e.unshift({id:"-1",name:"Default",local:!0,thumb:"".concat(TVA.plugin_url,"img/resources_default.png"),thumb_size:{w:814,h:709},v:1}),e},"tcb.cloud_template.resources":function(e,t){return t<0&&{content:"",custom_css:"",head_css:"",id:"-1",name:"Default",type:"resources",v:1}}}};e.exports=r},374:function(e,t,n){var o=n(265),a={actions:{"tcb.froala.typing_ended":function(e){if(e){var t=e.closest(".tva-resource-button");if(t.length){var n=e.hasClass("tcb-secondary-text"),o=t.attr("class").match(/tva-res-(download|open)/g)[0],a=e.closest(".tva-lesson-resources"),r=e.text();a.find(".".concat(o)).not(t).find("".concat(n?".tcb-secondary-text":".tcb-button-text")).each((function(e,t){TVE.inner_$(t).text(r).removeData("froala.editor")}))}}},"tve.froala.align.after_apply":function(){TVE.froala.editor.$oel.find("br").remove()}},filters:{"tcb.compat.not_wrappable":function(e){return e.push(".".concat(o.elementIdentifier," *")),e},"tve.froala.align.get_blocks":function(e){var t;if(null!==(t=TVE.froala.editor)&&void 0!==t&&t.$oel[0].classList.contains(o.textIdentifier)){var n=TVE.froala.editor.$oel.attr("class").match(/tva-resource-(title|description)/g),a=TVE.froala.editor.$oel;n&&(a=a.closest(".".concat(o.elementIdentifier)).find(".".concat(n[0]))),e=[a]}return e}}};e.exports=a},375:function(e,t){var n={actions:{"tcb.show_icons":function(e,t,n){var o=e.find(".tva-certificate-form-item, .thrv-button").length>0;e.is(".thrv-columns")&&o&&n.$delete.hide();var a=TVE.Editor_Page.editor.find(".tva-certificate-verification-element").length,r=!!TVE.CONST.is_certificate_validation_page,s=!1==!!TVE.CONST.tva_allow_more&&r&&1===a;e.is(".tva-certificate-verification-element")&&s&&n.$delete.hide()}},filters:{"tcb.inline_shortcodes.shortcode_group":function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.push("Apprentice Certificate Verification"),e},tcb_filter_html_before_save:function(e){return e.find(".tva-certificate-verification-element > .tve-form-state").each((function(e,t){"valid"===t.dataset.state?jQuery(t).addClass("tcb-permanently-hidden"):"form"===t.dataset.state&&jQuery(t).removeClass("tcb-permanently-hidden")})),e}}};TVE.addHooks(n)},376:function(e,t,n){var o=function(){return parseInt(TVE.CONST.apprentice.skin_id)>0&&"tva"===TVE.CONST.external_palettes};e.exports={actions:{"tcb.favorite_colors.after_render":function(e){if(o()&&TVE.CONST.apprentice.palette_colors&&e.color_picker.options.showGlobals&&!e.$el.find(".tcb-tva-skin-toggle-content").length){var t=n(377);e.$el.append(TVE.tpl("skin-colors")()),e.tva_skin_color_view=new t({el:e.$("#tcb-tva-skin-color-details")[0],favorites_view:e}),e.variableViews.tva_skin=e.tva_skin_color_view}},"tcb.favorite_colors.reset_html":function(e){if(o()&&TVE.CONST.apprentice.palette_colors){var t=Object.values(TVE.CONST.apprentice.palette_colors);if(t.length&&e.color_picker.options.showGlobals){var n="";t.forEach((function(t){n+=e.global_thumb({var_type:"tva_skin",global_prefix:"--tva-skin-color-",css_prop:"background-color",color:TVE.getCssVariableValue("--tva-skin-color-"+t.id),name:t.name,id:t.id,synced_var:"",custom_name:t.custom_name})})),e.$(".tcb-tva-skin-colors-container").html(n.split("p-thumb-inner").join("p-thumb-inner tcb-tpl-var"))}}}},filters:{tcb_color_css_variable_regex:function(e){return e+="(--tva-skin-color-[0-9]*)|"},"tcb.page_color_prefix":function(e){return o()&&(e="--tva-skin-color-"),e},"tcb.global_colors_templates":function(e){var t;o()&&(e=Object.values((null===(t=TVE.CONST.apprentice)||void 0===t?void 0:t.palette_colors)||{}));return e},tcb_central_style_panel_view:function(e,t){var a;return o()&&Object.values((null===(a=TVE.CONST.apprentice)||void 0===a?void 0:a.palette_colors)||{}).length&&(e=new(n(378))({el:t.dom.central_style_panel,sidebar:t})),e}}}},377:function(e,t){e.exports=TVE.GlobalColors.extend({after_initialize:function(){this.enable_remove_color=!1,this.enable_edit_color=!1,this.unlink_label="Unlink Apprentice Color",this.color_type="apprentice"},getColorMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"title"===e.message?TVE.ucFirst(this.color_type)+" color":"edit"===e.message?"Edit color":"unlink"===e.message?"Unlink color":void 0}})},378:function(e,t,n){var o=this;e.exports=TVE.Views.Base.base_view.extend({after_initialize:function(e){o.sidebar=e.sidebar,o.$el=TVE.$(e.el),o.sections={},o.sidebar.on("drawer_opened",(function(e){"central_style_panel"===e&&(o.sections.palettes||(o.sections.palettes=new(n(379))({el:o.$el.find('.c-s-p-section[data-section="vars"]'),sidebar:o.sidebar})),o.sections.palettes.render_list().$el.show())}))}})},379:function(e,t){function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function o(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach((function(t){a(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r,s;r=jQuery,s=TVE.Views.Controls.CentralStylePanel.Vars,e.exports=s.extend({configPaletteSelect:{paletteData:TVE.CONST.apprentice.palettes,masterVariablePrefix:"--tva-skin-color-"},show_locate_control:!1,controls_init:function(e){var t=this;s.prototype.controls_init.call(this,e),this.controls.color.reset=function(e){this.model=e,this.changed=!1},this.controls.color.onOpen=function(){var e;this.model.get("master")?(e={h:parseInt(TVE.getCssVariableValue("--tva-main-master-h")),s:parseInt(TVE.getCssVariableValue("--tva-main-master-s")),l:parseInt(TVE.getCssVariableValue("--tva-main-master-l"))},this.color.colorPicker.spectrum("set",TVE.TinyColor.fromRatio(e))):(e=TVE.getCssVariableValue("".concat("--tva-skin-color-").concat(this.model.get("index"))),this.color.colorPicker.spectrum("set",e)),this.model.set("initial_value",e)},this.controls.color.color.input=_.debounce((function(e){if(t.controls.color.changed=!0,t.controls.color.model.get("master")){var n=e.toHsl();0===n.h&&0===n.s&&(n.h=t.controls.color.model.get("initial_value").h),t.changeMasterVariable(n),t.masterColorInput(t.controls.color.model.get("raw_css_variable"),e.toRgbString())}else TVE.changeCssVariableValue("".concat("--tva-skin-color-").concat(t.controls.color.model.get("index")),e.toRgbString())})),this.controls.color.cancel=function(){var e=t.controls.color.model.get("initial_value");t.controls.color.model.get("master")?(e.s=e.s/100,e.l=e.l/100,t.changeMasterVariable(e),t.masterColorInput(t.controls.color.model.get("raw_css_variable"),TVE.hslToRgb(e.h,e.s,e.l))):TVE.changeCssVariableValue("".concat("--tva-skin-color-").concat(t.controls.color.model.get("index")),e)},this.controls.color.apply=function(){if(t.controls.color.changed){var e=t.controls.color.color.colorPicker.spectrum("get"),n=TVE.CONST.apprentice.palettes.active_id;if(t.controls.color.model.get("master")){var a=e.toHsl();0===a.h&&0===a.s&&(a.h=t.controls.color.model.get("initial_value").h);var r={h:parseInt(a.h),s:TVE.functions.toFixed(a.s,2),l:TVE.functions.toFixed(a.l,2)};TVE.CONST.apprentice.palettes.palettes[n].modified_hsl=o(o({},TVE.CONST.apprentice.palettes.palettes[n].modified_hsl),r),wp.apiRequest({url:"".concat(TVE.CONST.apprentice.routes.palette,"/").concat(TVE.CONST.apprentice.skin_id),type:"POST",data:{hsl:TVE.CONST.apprentice.palettes.palettes[n].modified_hsl}})}else wp.apiRequest({url:"".concat(TVE.CONST.apprentice.routes.palette,"/").concat(TVE.CONST.apprentice.skin_id,"/update_auxiliary_variable"),type:"POST",data:{id:parseInt(t.controls.color.model.get("index")),color:e.toRgbString()}})}},_.each(this.controls,(function(e){e.executeAjax=r.noop}))},render_list:function(){return this.list_rendered||(Array.isArray(TVE.CONST.apprentice.palettes.palettes)&&TVE.CONST.apprentice.palettes.palettes.length&&(this.$el.append(TVE.tpl("central-style-panel/master-variables-header")()),this.$el.append(TVE.tpl("central-style-panel/palettes")()),this.buildPalettesSelect(),this.buildMasterVariable()),this.list_rendered=!0),this},buildPalettesSelect:function(){var e=this.$("#c-s-p-palettes-select");e.data("select2")&&(e.off("select2:open"),e.off("select2:close"),e.select2("destroy")),e.select2({cache:!1,minimumResultsForSearch:-1,data:this.getSelectList(),templateResult:function(e){return e.id?r("<div"+(e.selected?' class="active"':"")+' data-tooltip="'+e.text+'" data-side="top">'+e.preview+"</div>"):e.text},templateSelection:function(e){return r("<div>".concat(e.preview,'<span class="c-s-p-palette-title">').concat(e.text,"</span></div>"))}}).on("select2:open",(function(){TVE.Views.Controls.DropPanel.close_all()})).on("select2:close",(function(){TVE.tooltips.hide()})).data("select2").$dropdown.addClass("tcb-palette-dropdown c-s-p-palettes")},buildMasterVariable:function(){var e=this,t=this.getPalette(TVE.CONST.apprentice.palettes.active_id),n=this.buildHslString(t.modified_hsl,!0),o=this.getOtherVariables();if(this.$el.append(this.variable_template({name:t.name,css_variable:"".concat("--tva-skin-color-").concat(this.getMainVariable().id),bg:"linear-gradient(".concat(n,", ").concat(n,")"),index:"master",wrapper_class:"master_variable",show_locate_control:this.show_locate_control})),o.length){this.$el.append(TVE.tpl("central-style-panel/other-variables-header")());var a="";o.forEach((function(t){a+=e.variable_template({name:t.name,css_variable:"".concat("--tva-skin-color-").concat(t.id),bg:"linear-gradient(var(".concat("--tva-skin-color-").concat(t.id,"), var(").concat("--tva-skin-color-").concat(t.id,"))"),index:t.id,wrapper_class:"other_variable",show_locate_control:e.show_locate_control})})),this.$el.append('<div class="c-s-p-other-vars">'.concat(a,"</div>"))}},getSelectList:function(){var e=this,t=[];return TVE.CONST.apprentice.palettes.palettes.forEach((function(n,o){var a=o===TVE.CONST.apprentice.palettes.active_id;t.push({id:o,text:n.name,preview:e.getPalettePreview(n,a),selected:a})})),t},getPalettePreview:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return'<div class="c-s-p-palette"><div class="c-s-p-palette-item" style="background-color: '.concat(this.buildHslString(e.modified_hsl,t),'"></div></div>')},getPalette:function(e){return TVE.CONST.apprentice.palettes.palettes[e]},getOtherVariables:function(){return Object.values(TVE.CONST.apprentice.palette_colors).filter((function(e){return!e.hsla_code}))},getMainVariable:function(){return Object.values(TVE.CONST.apprentice.palette_colors).find((function(e){return-1===e.parent}))},buildHslString:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t?"var(--tva-main-master-h)":e.h,o=t?"var(--tva-main-master-s)":"".concat(100*e.s,"%"),a=t?"var(--tva-main-master-l)":"".concat(100*e.l,"%");return"hsl(".concat(n,",").concat(o,",").concat(a,")")},dom_edit_css_variable:function(e,t){return t.classList.contains("variable-name")&&(t=t.parentElement.getElementsByClassName("sp-transparent")[0]),this.controls.color.isOpen()?(this.controls.color.onCancel(),!1):(this.controls.color.reset(new Backbone.Model({master:"master"===t.getAttribute("data-index"),raw_css_variable:t.getAttribute("data-var"),index:t.getAttribute("data-index")})),this.controls.color.open(null,t),!1)},dom_change_palette:function(e,t){var n=parseInt(t.value),o=parseInt(TVE.CONST.apprentice.palettes.active_id);if(o!==n){var a=this.getPalette(n);this.changeMasterVariable(a.modified_hsl),TVE.CONST.apprentice.palettes.active_id=n,this.buildPalettesSelect(),this.afterPaletteChange(),wp.apiRequest({url:"".concat(TVE.CONST.apprentice.routes.skins,"/").concat(TVE.CONST.apprentice.skin_id,"/change_palette"),type:"POST",data:{previous_id:o,active_id:n}}).fail((function(e){e.responseJSON&&TTD.utils.message(e.responseJSON.message,"error")}))}},domResetActivePalette:function(){if(confirm("Are you sure you want to reset this palette?")){var e=this.getPalette(TVE.CONST.apprentice.palettes.active_id);this.changeMasterVariable(e.original_hsl),TVE.CONST.apprentice.palettes.palettes[TVE.CONST.apprentice.palettes.active_id].modified_hsl=_.clone(e.original_hsl),this.afterPaletteChange(),wp.apiRequest({url:"".concat(TVE.CONST.apprentice.routes.palette,"/").concat(TVE.CONST.apprentice.skin_id),type:"POST",data:{hsl:e.original_hsl}})}},masterColorInput:function(e,t){TVE.do_action("tcb.change.main.css.variable",e,t,TVE.ActiveElement,!0)},afterPaletteChange:function(){TVE.do_action("tve.skin.palette_changed")},changeMasterVariable:function(e){var t=parseInt(e.h),n="".concat(parseInt(100*e.s),"%"),o="".concat(parseInt(100*e.l),"%");TVE.changeCssVariableValue("--tva-main-master-h",t),TVE.changeCssVariableValue("--tva-main-master-s",n),TVE.changeCssVariableValue("--tva-main-master-l",o),TVE.changeCssVariableValue("--tcb-main-master-h",t),TVE.changeCssVariableValue("--tcb-main-master-s",n),TVE.changeCssVariableValue("--tcb-main-master-l",o)}})},380:function(e,t){var n={actions:{"tve.progress.after_template_css_applied":function(e){var t=TVE.main.EditMode.in_edit(),n=t&&TVE.main.EditMode.element().is(TVE.identifier("course_list")),o=t&&TVE.main.EditMode.element().is(TVE.identifier("course")),a=["tva_lesson","tva_course_overview","tva_module"].includes(TVE.CONST.post_type);if(n||o||a){var r={};n?r["data-context"]="course-list":o&&(r["data-context"]="lesson-list",void 0===e.attr("data-hide-full")&&(r["data-hide-full"]=1)),e.removeClass("with-dual-progress"),void 0===e.attr("data-hide-empty")&&(r["data-hide-empty"]=1),r["data-default-state"]="dynamic",e.attr(r)}},"tve.progress.withdualprogress.update":function(e,t){TVE.main.EditMode.in_edit()&&TVE.main.EditMode.element().is(TVE.identifier("course_list"))?(e.addClass("tcb-disabled"),t.removeClass("with-dual-progress")):e.removeClass("tcb-disabled")}},filters:{"tve.fields_data.option_types":function(e,t){var n=TVE.main.EditMode.in_edit(),o=n&&TVE.main.EditMode.element().is(TVE.identifier("course_list")),a=n&&TVE.main.EditMode.element().is(TVE.identifier("course")),r=["tva_lesson","tva_course_overview","tva_module"].includes(TVE.CONST.post_type);return"nodes"!==t.component.controls.Type.getValue()&&"data-field"===t.fieldAttr&&(o||a||r)&&(e.push({value:"apprentice",name:"Thrive Apprentice"}),t.fieldType.model.config.default="apprentice"),e},tcb_filter_html_before_save:function(e){return e.find('.tve-progress-bar-wrapper[data-field="apprentice"]').each((function(e,t){var n="parent=".concat(t.dataset.fd);"course-list"===t.getAttribute("data-context")?n="context=course-list":"lesson-list"===t.getAttribute("data-context")&&(n="context=lesson-list parent=".concat(t.dataset.fd)),t.setAttribute("data-value-shortcode","[tva_post_progress ".concat(n,"]"))})),e},"tve.progress.complete.options":function(e){return e.getDataOptionsApprentice=function(){var e=[],t=TVE.main.EditMode.in_edit()&&TVE.main.EditMode.element().is(TVE.identifier("course_list")),n=TVE.main.EditMode.in_edit()&&TVE.main.EditMode.element().is(TVE.identifier("course")),o=n&&TVE.ActiveElement.closest(".tva-course-module-list").length,a=o&&TVE.ActiveElement.closest(".tva-course-chapter-list").length,r=n&&TVE.ActiveElement.closest(".tva-course-chapter-list").length,s=o&&!TVE.ActiveElement.closest(".tva-course-chapter-list").length,i=(a||s||n&&!o)&&TVE.ActiveElement.closest(".tva-course-lesson-list").length,c=TVE.CONST.post_parent?TVE.CONST.post_parent.post_type:null;return(t||n||TVE.CONST.post_type.match(/(tva_course|tva_module|tva_lesson)/g))&&(this.dataType.model.config.default="course",e.push({value:"course",name:"Course progress",default:!0}),(o||"tva_module"===TVE.CONST.post_type||"tva_lesson"===TVE.CONST.post_type&&"tva_module"===c)&&(this.dataType.model.config.default="module",e.push({value:"module",name:"Module progress",default:!0})),(a||r||"tva_lesson"===TVE.CONST.post_type&&"tva_chapter"===c)&&(this.dataType.model.config.default="chapter",e.push({value:"chapter",name:"Chapter progress",default:!0})),(i||"tva_lesson"===TVE.CONST.post_type)&&(this.dataType.model.config.default="course")),e},e.getApplyAttributesApprentice=function(e){return e[this.defaultValueAttr]=this.DynamicDefaultValue.getValue(),e},e},"tve.progress.second_complete.options":function(e){return e.disabledNotice="Dual progress will indicate the percentage increased when completing a lesson",e.isDisabled=function(e){return"apprentice"===e.attr("data-field")},e}}};e.exports=n},76:function(e,t){var n={allowApprenticeShortcodes:function(e){return e&&e.includes("tva_course_")},allowAutoDetectCourse:function(){return void 0!==TVE.CONST.apprentice&&void 0!==TVE.CONST.apprentice.course&&parseInt(TVE.CONST.apprentice.course.id)>0},parseCourseID:function(e){return-1===e&&n.allowAutoDetectCourse()&&(e=TVE.CONST.apprentice.course.id),parseInt(e)}};e.exports=n},77:function(e,t){e.exports={typeIconIdentifier:".tva-course-type-icon",topicIconIdentifier:".tva-course-topic-icon",dynamicLabelIdentifier:".tva-course-label-title",dynamicButtonElement:".thrv-button[data-tva-dynamic-element]",templates:{generalNoAccess:"tva_post_no_access",noAccess:"tva_no_access",courseCompleted:"tva_course_completed",certificateValidation:"tva_post_certificate_validation"}}},8:function(e,t){var n={courseIdentifier:".tva-course",elements:["lesson","chapter","module"],expandCollapseSubSelectors:["course-module-dropzone","course-chapter-dropzone"],courseSubElementSelectors:{"course-dropzone":".tva-course-item-dropzone","course-module":".tva-course-module","course-module-dropzone":".tva-course-module-dropzone","course-module-list":".tva-course-module-list","course-chapter":".tva-course-chapter","course-chapter-dropzone":".tva-course-chapter-dropzone","course-chapter-list":".tva-course-chapter-list","course-lesson":".tva-course-lesson","course-lesson-list":".tva-course-lesson-list","course-dropzones":".tva-course-dropzone > .tva-course-state > .tva-course-state-content, .tva-course-lesson > .tva-course-state > .tva-course-state-content","course-content-selectors":".tva-course-lesson, .tva-course-chapter, .tva-course-module, ".concat(".tva-course"),"course-state-selector":".tva-course-state","course-type-icon":".tva-course-type-icon"},stateDatasetKey:"data-course-state",states:{not_completed:0,no_access:1,completed:2,in_progress:3,locked:4},progressStateEnabled:"data-progress-state-enabled",lockedStateEnabled:"data-locked-state-enabled",courseTextWarningClass:"tva-course-warning-text",toggleExpandCollapseIconClass:"tva-structure-toggle-icon",structureItemIconClass:"tva-structure-icon"};e.exports=n},9:function(e,t){var n={identifier:".tva-course-list",itemIdentifier:".tva-course-list-item",dropdownIdentifier:".tva-course-list-dropdown",searchIdentifier:".thrv-search-form",topicIconIdentifier:".tva-course-list-item-topic-icon",typeIconIdentifier:".tva-course-list-item-type-icon",authorImageLabel:"Course author image",courseImageLabel:"Course cover image"};e.exports=n}});
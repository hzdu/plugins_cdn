!function(){var e,t={7212:function(e,t,s){e.exports={Views:{Components:{Course:s(4856),CourseStructureItem:s(9144),CourseList:s(3465),CourseListDropdown:s(4965),CourseListItemTopicIcon:s(3273),Resources:s(2242),ResourcesLabel:s(4e3),CertificateVerification:s(2672),CertificateFormInput:s(9555)}},renderers:s(8761)}},7896:function(){const e={actions:{"tcb.show_icons":(e,t,s)=>{const o=e.find(".tva-certificate-form-item, .thrv-button").length>0;e.is(".thrv-columns")&&o&&s.$delete.hide();const n=TVE.Editor_Page.editor.find(".tva-certificate-verification-element").length,i=!!TVE.CONST.is_certificate_validation_page,a=0==!!TVE.CONST.tva_allow_more&&i&&1===n;e.is(".tva-certificate-verification-element")&&a&&s.$delete.hide()}},filters:{"tcb.inline_shortcodes.shortcode_group":(e=[])=>(e.push("Apprentice Certificate Verification"),e),tcb_filter_html_before_save:e=>(e.find(".tva-certificate-verification-element > .tve-form-state").each(((e,t)=>{"valid"===t.dataset.state?jQuery(t).addClass("tcb-permanently-hidden"):"form"===t.dataset.state&&jQuery(t).removeClass("tcb-permanently-hidden")})),e)}};TVE.addHooks(e)},2672:function(e){!function(t){const s="tcb-permanently-hidden";e.exports=TVE.Views.Base.component.extend({$element:null,before_update:function(){this.$element=TVE.ActiveElement},controls_init:function(){this.controls.LabelText.update=function(e){this.setValue(e.attr("data-message"))},this.controls.LabelText.input=function(e,s){e.attr("data-message",t(s).val())}},editCertificate:function(){TVE.add_filter("constrain_drop",this.getDropzoneTarget),TVE.main.EditMode.enter(this.$element,{can_insert_elements:!0,show_default_message:!0,restore_state:!0,states:this.getStates(),hidden_elements:["certificate_verification"],callbacks:{exit:()=>{TVE.Editor_Page.focus_element(this.$element),this.$element.find(".tve_editor_main_content").removeClass("tve_editor_main_content"),TVE.remove_filter("constrain_drop",this.getDropzoneTarget),this.showDefaultState(this.$element)},state_change:e=>{this.$element.find(".tva-certificate-state").addClass(s).removeClass("tve_editor_main_content"),this.$element.find('.tva-certificate-state[data-state="'+e+'"]').addClass("tve_editor_main_content").removeClass(s).trigger("click")}}})},getDropzoneTarget:function(e){return e+", .tve-form-drop-zone"},getStates:function(){return[{label:"Valid Certificate",value:"valid",default:!0},{label:"Certificate Verification Form",value:"form",default:!1}]},showDefaultState:function(e=TVE.ActiveElement,t="valid"){e.find("[data-state]").addClass(s),e.find(`[data-state="${t}"]`).removeClass(s).addClass("tcb-active-state"),requestAnimationFrame((()=>TVE.Editor_Page.reposition_icons()))}})}(jQuery)},9555:function(e){var t;t=jQuery,e.exports=TVE.Views.Base.component.extend({controls_init:function(){this.controls.placeholder.update=function(e){this.setValue(e.find("input").attr("placeholder"))},this.controls.placeholder.input=function(e,s){e.find("input").attr("placeholder",t(s).val())}}})},4965:function(e,t,s){!function(t){const o=s(4103);e.exports=TVE.Views.Components.DynamicDropdown.extend({after_init:function(){TVE.add_action("tve.icons.expanded.course_list_dropdown",(e=>{TVE.Editor_Page.focus_element(e),TVE.state_manager.change("expanded",!0),TVE.ElementEditIcons.show_icons(TVE.ClickedElement)})),TVE.add_action("tve.icons.collapse.course_list_dropdown",(e=>{TVE.Editor_Page.focus_element(e),TVE.state_manager.change("default",!0),TVE.ElementEditIcons.show_icons(TVE.ClickedElement)})),TVE.add_action("tcb.focus_course_list_dropdown.before",(e=>{e.hasClass("tve-state-expanded")&&(TVE.state_manager.change("expanded",!0,{skip_update:!0}),e.find(".tve-state-expanded").removeClass("tve-state-expanded"))})),TVE.add_action("tcb.focus_element.before",(e=>{0===e.closest(".tva-course-list-dropdown").length&&TVE.Editor_Page.editor.find(".tva-course-list-dropdown.tve-state-expanded").removeClass("tve-state-expanded")}))},controls_init:function(e){TVE.Views.Components.DynamicDropdown.prototype.controls_init.call(this,e),e.FilterTopics.change=(e,t)=>{e.attr("data-filter-topics",Number(t.checked)),this.refreshOptions(e),this.toggleFilters(e)},e.FilterTopics.update=function(e){this.setChecked(1===parseInt(e.attr("data-filter-topics")))},e.FilterTopicsSubheading.change=(e,t)=>{const s=t.value.trim();e.attr("data-topics-subheading",s).find(".tva-filter-topics-subheading strong").text(s),this.refreshOptions(e)},e.FilterTopicsSubheading.update=function(e){this.setValue(e.attr("data-topics-subheading")||"")},e.FilterRestrictions.change=(e,t)=>{e.attr("data-filter-restrictions",Number(t.checked)),this.refreshOptions(e),this.toggleFilters(e)},e.FilterRestrictions.update=function(e){this.setChecked(1===parseInt(e.attr("data-filter-restrictions")))},e.FilterRestrictionsSubheading.change=(e,t)=>{const s=t.value.trim();e.attr("data-restrictions-subheading",s).find(".tva-filter-restrictions-subheading strong").text(s),this.refreshOptions(e)},e.FilterRestrictionsSubheading.update=function(e){this.setValue(e.attr("data-restrictions-subheading")||"")},e.FilterProgress.change=(e,t)=>{e.attr("data-filter-progress",Number(t.checked)),this.refreshOptions(e),this.toggleFilters(e)},e.FilterProgress.update=function(e){this.setChecked(1===parseInt(e.attr("data-filter-progress")))},e.FilterProgressSubheading.change=(e,t)=>{const s=t.value.trim();e.attr("data-progress-subheading",s).find(".tva-filter-progress-subheading strong").text(s),this.refreshOptions(e)},e.FilterProgressSubheading.update=function(e){this.setValue(e.attr("data-progress-subheading")||"")},e.RowsWhenOpen.change=(e,t)=>{TVE.add_filter("tcb_head_css_suffix",this.removeStateSuffix),e.head_css({"--rows":t.value,"--row-height":`${e.find(".tve-dynamic-dropdown-option").outerHeight(!0)}px`},null,""),TVE.remove_filter("tcb_head_css_suffix",this.removeStateSuffix)},e.RowsWhenOpen.input=t.noop,e.RowsWhenOpen.prepareValue=function(e){return e=parseInt(e),(isNaN(e)||e<this.model.config.min)&&(e=this.model.config.min),e>this.model.config.max&&(e=this.model.config.max),Math.max(1,e)},e.RowsWhenOpen.update=function(e){this.setValue(TVE.getComputedStyle(e,"--rows",!0))}},removeStateSuffix:function(e){return e.replace(/.tve-state-expanded|.tve-state-hover/g,"")},getWidthVariable:function(){return"--tve-input-max-width"},refreshOptions:function(e=TVE.ActiveElement,t={}){if(0!==e.length){if(parseInt(e.attr("data-filter-progress"))){const t=e.attr("data-progress-subheading");e.find('.tve-dynamic-dropdown-option[data-type="progress"]').show(),t&&0!==t.length||e.find(".tva-filter-progress-subheading").hide()}else e.find('.tve-dynamic-dropdown-option[data-type="progress"]').hide();if(parseInt(e.attr("data-filter-topics"))){const t=e.attr("data-topics-subheading");e.find('.tve-dynamic-dropdown-option[data-type="topics"]').show(),t&&0!==t.length||e.find(".tva-filter-topics-subheading").hide()}else e.find('.tve-dynamic-dropdown-option[data-type="topics"]').hide();if(parseInt(e.attr("data-filter-restrictions"))){e.find('.tve-dynamic-dropdown-option[data-type="labels"]').show();const t=e.attr("data-restrictions-subheading");t&&0!==t.length||e.find(".tva-filter-restrictions-subheading").hide()}else e.find('.tve-dynamic-dropdown-option[data-type="labels"]').hide();0===Object.values(t).length&&(t=o.readQueryFromElement(o.getListForDropdown(e)),t=JSON.parse(JSON.stringify(t))),["topics","labels","progress"].forEach((s=>{Array.isArray(t[s])&&t[s].length>0&&e.find(`li[data-value^="${s}_"]`).each(((e,o)=>{const n=o.getAttribute("data-value").replace(`${s}_`,"");t[s].includes(n)||(o.style.display="none")}))}))}},toggleFilters:function(e=TVE.ActiveElement){this.controls.FilterTopics.enable(),this.controls.FilterRestrictions.enable(),this.controls.FilterProgress.enable();const t=1===parseInt(e.attr("data-filter-topics")),s=1===parseInt(e.attr("data-filter-restrictions")),o=1===parseInt(e.attr("data-filter-progress"));this.controls.FilterTopicsSubheading.toggle(t),this.controls.FilterRestrictionsSubheading.toggle(s),this.controls.FilterProgressSubheading.toggle(o),t&&s||(t&&this.controls.FilterTopics.disable(),s&&this.controls.FilterRestrictions.disable())},before_update:function(){this.toggleFilters()}})}(jQuery)},3273:function(e){jQuery,e.exports=TVE.Views.Base.component.extend({controls_init:function(){this.controls.Slider.update=function(e){this.setValue(e.head_css("font-size",!1,"",!0,this.config.css_prefix))},this.controls.Slider.getCssProps=()=>["font-size","width","height","--tve-icon-size"],this.controls.Slider.input=function(e,t){let s=Number(t.value);(isNaN(s)||s<=0)&&(s=1,this.setValue(s));const o={};this.getCssProps().forEach((e=>o[e]=s+this.getUM())),this.applyElementCss(o,e,this.config.css_suffix,this.config.css_prefix)}}})},3465:function(e,t,s){!function(t){const o=s(8753),n=s(4103);let i;e.exports=TVE.Views.Components.post_list.extend({after_update:t.noop,after_init:function(){this.$noCoursesMessageTextArea=this.$("#tva-course-list-no-courses-message");const e="course-list-element";TVE.CONST.dismissed_tooltips.includes(e)||(this.elementTemplatesTooltip=new TVE.Views.other.Tooltip({icon:"course-list",title:"Apprentice Course List",info:"Images, icons and text available in this element are managed in Thrive Apprentice and will update when you make changes to your courses.",learnMoreLink:"https://help.thrivethemes.com/en/articles/4965707-why-can-t-i-change-certain-elements-from-the-course-list-element",type:e}),this.$el.append(this.elementTemplatesTooltip.$el)),i=s(1113),i.toggleListElements(!1,!0),this.displayTypeTooltip||TVE.CONST.dismissed_tooltips.includes("displayTypeCourseList")||(this.displayTypeTooltip=new TVE.Views.other.WarningTooltip({template:TVE.tpl("util/carousel-display-type-tooltip"),type:"displayTypeCourseList",className:"tcb-tooltip-container tcb-display-type-tooltip",identifier:`${TVE.identifier("course_list")}${TVE.Models.CarouselManager.carouselSelector}`,control:this.controls.Type,afterApplyChange:()=>{this.controls.Type.setActive(this.potentialDisplayType,!0)}}),this.$el.find('[data-view="Type"] .tve-btn-group').append(this.displayTypeTooltip.$el))},before_update:function(){this.$noCoursesMessageTextArea.text(TVE.ActiveElement.attr("data-no_posts_text"))},controls_init:function(e){TVE.main.on("after_device_change",(()=>{TVE.inner_$(TVE.identifier("course_list")+'[data-type="carousel"]').each(((e,t)=>{setTimeout((()=>{TVE.PostList.layout.applyLayout(TVE.inner_$(t))}),100)}))})),TVE.Views.Components.post_list.prototype.controls_init.call(this,e),TVE.add_action("tcb.element.selected.course_list",(()=>{if(this.elementTemplatesTooltip&&this.elementTemplatesTooltip.display(130),!this.qModal){const e=this.$('[data-fn="filterPosts"]');e.addClass("tve-loader-square tva-fc-disabled").attr("disabled",1),wp.apiRequest({type:"GET",url:`${TVA.routes.course_list}/query_data`,data:{}}).done((t=>{this.qModal=new(s(7110))({el:TVE.modal.get_element("course-list-query")}),n.extendCoursesLocalization(t.courses),this.qModal.setData(t),e.removeClass("tve-loader-square tva-fc-disabled").removeAttr("disabled")}))}})),this.controls.CourseSearch.change=function(e,t){const s=n.getSearchFormForList(e);t.checked&&0===s.length?this.component.insertFilterElement(n.prepareSearchFormForList(e),1,e):this.component.removeFilterElement(s),TVE.ElementEditIcons.reposition_icons(e)},this.controls.CourseSearch.update=function(e){const t=n.getSearchFormForList(e);this.setChecked(t.length>0)},this.controls.TopicFilter.change=function(e,t){const s=n.getDropdownFilterForList(e);t.checked&&0===s.length?this.component.insertFilterElement(n.prepareDropdownFilterForList(e),0,e):this.component.removeFilterElement(s),TVE.ElementEditIcons.reposition_icons(e)},this.controls.TopicFilter.update=function(e){const t=n.getDropdownFilterForList(e);this.setChecked(t.length>0)},this.controls.Linker.change=function(e,t){e.attr("data-disabled-links",t.checked?1:0)},this.controls.NumberOfItems.input=function(e,t){e.attr("data-posts_per_page",t.value)},this.controls.NumberOfItems.change=function(e,t){const s=n.readQueryFromElement(e);s.posts_per_page=t.value,n.applyQuery(e,s)},this.controls.NumberOfItems.up=t.noop,this.controls.NumberOfItems.down=t.noop,this.controls.NumberOfItems.update=function(e){this.setValue(e.attr("data-posts_per_page")||e.find(o.itemIdentifier).length)},this.controls.MessageColor.update=function(){this.setValue(TVE.ActiveElement.attr("data-no_posts_text_color"))},this.controls.MessageColor.input=t.noop,this.controls.MessageColor.change=function(e){e=e?e.toString():"",TVE.ActiveElement.attr("data-no_posts_text_color",e).head_css({color:e},null,"::after")}},removeFilterElement:function(e){e.parent().hasClass("tcb-clear")&&(e=e.parent());const t=e.closest(".tcb-col");t.length&&1===t.children().length?TVE.drag.removeColumn(t.parent()):e.remove()},insertFilterElement:function(e,t=0,s=TVE.ActiveElement){const o=`.tcb-col:eq(${t})`;let i=n.getFilterColumnsElement(s);if(i.length>0&&i.find(o).is(":empty"))i.find(o).append(e);else if(i.length>0&&1===i.children(".tcb--cols--1").length&&i.find(".thrv-search-form, .tva-course-list-dropdown").length>0){const t=i.find(".thrv-search-form, .tva-course-list-dropdown").first(),s=t.hasClass("thrv-search-form")?"left":"right";TVE.drag.insertNear(e,t,s)}else i=n.prepareFilterColumnsElement(s),i.insertBefore(s).find(o).append(e);TVE.drag.bind_element(i)},filterPosts:function(){this.qModal.open()},courseListEditMode:function(){i.enterEditMode(TVE.ActiveElement)},changeNoCoursesMessage:function(e,t){TVE.ActiveElement.attr("data-no_posts_text",t.value)}})}(jQuery)},9144:function(e,t,s){const o=s(3694),n=s(6447),i=s(3868),a=o.courseSubElementSelectors["course-state-selector"],r=o.courseSubElementSelectors["course-type-icon"];function c(e){const t=n.getActiveState(e);return e.filter(".edit_mode").find(`${a}[${o.stateDatasetKey}="${t}"]`)}e.exports=TVE.Views.Base.component.extend({controls_init:function(e){e.ToggleIcon.change=function(t,s){const n=c(t),a=n.find(`.${o.structureItemIconClass}`),r=s.checked;if(a.length>0)a.head_css({display:r?"block":"none"});else if(r){const e=TVE.inner_$(TVE.tpl("course-structure-item-icon")());n.prepend(e),e.head_css({"font-size":"60px",width:"60px",height:"60px","margin-top":0,"margin-bottom":0})}TVE.Editor_Page.reposition_icons(),i.checkForCourseSync(t),e.VerticalPosition.update(t)},e.ToggleIcon.update=function(e){if(n.isCourseItem(e))this.$el.hide();else{const t=c(e).find(`.${o.structureItemIconClass}`);this.setChecked(t.length>0&&"none"!==t.head_css("display")),this.$el.show()}},e.ToggleTypeIcon.before_update=function(e){this.$el.toggle(n.isLesson(e))},e.ToggleTypeIcon.change=function(e,t){const s=c(e);let n=s.find(`${r}`);if(t.checked){const t=i.getItemData(e.attr("data-id"),e.closest(o.courseIdentifier).attr("data-id")).tva_course_type_svg;t&&t.length>0&&(n=TVE.inner_$(`<div class="thrv_wrapper ${r.replace(".","")} tve-auxiliary-icon-element">${t}</div>`),s.find(".tva-course-state-content").append(n),n.head_css({"font-size":"22px",width:"22px",height:"22px","margin-top":0,"margin-bottom":0,"margin-left":"auto","margin-right":"auto"}))}else n.remove();i.checkForCourseSync(e)},e.ToggleTypeIcon.update=function(e){const t=c(e).find(`${r}`);this.setChecked(t.length>0&&"none"!==t.head_css("display"))},e.ToggleExpandCollapse.change=function(t,s){const n=c(t),a=n.find(`.${o.toggleExpandCollapseIconClass}`),r=s.checked;if(a.length>0)a.head_css({display:r?"block":"none"});else if(r){const e=TVE.inner_$(TVE.tpl("course-structure-item-toggle-icon")());n.append(e),e.head_css({"font-size":"22px",width:"22px",height:"22px","margin-top":0,"margin-bottom":0})}TVE.Editor_Page.reposition_icons(),i.checkForCourseSync(t),e.VerticalPosition.update(t)},e.ToggleExpandCollapse.before_update=function(e){this.$el.toggle(!n.isLesson(e)&&!n.isCourseItem(e))},e.ToggleExpandCollapse.update=function(e){const t=c(e).find(`.${o.toggleExpandCollapseIconClass}`);this.setChecked(t.length>0&&"none"!==t.head_css("display"))},e.Height.input=function(e,t){this.applyElementCss({"min-height":`${t.value}${this.getUM()} !important`},e,this.config.css_suffix,"")},e.Height.update=function(e){let t=(e=e.filter(":visible")).head_css("min-height");t||(t=e.height()),this.setValue(t)},e.VerticalPosition.before_update=function(e){this.$el.toggle(!n.isCourseItem(e))},e.VerticalPosition.input=function(e,t){this.applyElementCss({"align-items":t.getAttribute("data-value")},c(e),"","")},e.VerticalPosition.update=function(t){this.$el[e.ToggleIcon.isChecked()||e.ToggleExpandCollapse.isChecked()?"show":"hide"]();const s=c(t);this.setActive(s.head_css("align-items")||"")}}})},4856:function(e,t,s){function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,o)}return s}function n(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}!function(t){const o=s(5914),i=s(6447),a=s(3694),r=s(3868),c=s(484),l=s(6726),d=s(3332),u=a.states.not_completed,p=a.courseSubElementSelectors["course-state-selector"];e.exports=TVE.Views.Base.component.extend({placeholderPanel:null,courseObject:{},before_update:function(){this.setCourseElement(),this.setNotPublishWarning()},setNotPublishWarning:function(){this.$courseMessageWrapper.empty(),"publish"!==this.courseObject.status&&this.$courseMessageWrapper.html(TVE.tpl("unpublish-course-warning")()).find("a").attr("href",this.courseObject.admin_edit_url)},showLoadingOverlay:function(e=TVE.ActiveElement){e.empty().addClass("tcb-elem-placeholder tcb-block-placeholder"),this.placeholderPanel.hide()},after_init:function(){this.$courseMessageWrapper=this.$("#tva-course-message"),this.placeholderPanel=new o({minWidth:250,no_buttons:!0}),a.expandCollapseSubSelectors.forEach((e=>{TVE.add_action(`tve.icons.expanded.${e}`,this.toggleExpandCollapse.bind(this)),TVE.add_action(`tve.icons.collapse.${e}`,this.toggleExpandCollapse.bind(this)),TVE.add_action(`tcb.state.change.${e}`,this.toggleStateManagerChange.bind(this)),TVE.add_action(`tcb.focus_${e}.before`,this.changeStateBeforeFocus.bind(this)),TVE.add_filter(`tcb.${e}.has_states_dropdown`,this.enableStateDropdown.bind(this))})),TVE.add_action("tve.lazyload.done",(e=>{e.tva_courses&&(t.extend(!0,TVA.courses,e.tva_courses),TVE.ActiveElement&&TVE.ActiveElement.is(a.courseIdentifier)&&(this.controls.displayLevel.update(TVE.ActiveElement),this.toggleHideModuleHeader(TVE.ActiveElement)))})),TVE.main.on("insert-course",((e,t=0,s="",o="")=>{e?wp.apiRequest({type:"GET",url:`${TVA.routes.course}/html`,data:{post_id:TVE.CONST.post_id,id:e,display_level:t,template_id:s,hide_module:o},beforeSend:e=>{this.showLoadingOverlay()}}).done(this.applyDefaultTemplate).fail((e=>{console.warn("There was an error in fetching the course",e)})):console.warn("Course ID is missing")}))},applyDefaultTemplate:function(e={},s,o){const a={},r=parseInt(e.id),c=parseInt(e.level),d=l.parseCourseID(r),u=TVE.inner_$(e.html).addClass("tcb-local-vars-root").attr("data-id",r);-1===c&&u.attr({"data-display-level":-1,"data-deny-collapse-module":1}),e.data.content.forEach((e=>{e.tva_course_index=u.find(`.thrv_wrapper[data-id="${e.ID}"]`).attr("data-index")})),TVA.courses[d]=n(n({},TVA.courses[d]),e.data),TVE.ActiveElement.replaceWith(u);let p=u.find("[data-css]");p=p.add(u.filter("[data-css]")),p.each((function(){this.dataset.css&&(void 0===a[this.dataset.css]?a[this.dataset.css]=TVE.CSS_Rule_Cache.uniq_id(this,!0):this.dataset.css=a[this.dataset.css])})),TVE.drag.bind_element(u);let h=e.css||"";t.each(a,(function(e,t){h=h.replace(new RegExp("("+e+")","g"),t)})),TVE.Editor_Page.content_manager.insert_head_css(h).done((()=>{TVE.do_action("tcb_after_cloud_template",u),TVE.froala.handleEmptyShortcodes(u),TVE.Editor_Page.focus_element(u),TVE.ActiveElement=TVE.inner_$(TVE.ActiveElement),i.initCourseSubElements(TVE.ActiveElement)}))},changeCourseAjaxCallback:function(e={},s){const o=t(e.html),a=parseInt(e.id),c=l.parseCourseID(a);e.data.content.forEach((e=>{e.tva_course_index=o.find(`.thrv_wrapper[data-id="${e.ID}"]`).attr("data-index")})),TVA.courses[c]=n(n({},TVA.courses[c]),e.data);const d=i.transferCourseContent(o,s),u={};d.forEach((e=>{e.dataset.css&&(void 0===u[e.dataset.css]?u[e.dataset.css]=TVE.CSS_Rule_Cache.uniq_id(e,!0):e.dataset.css=u[e.dataset.css])}));let p=e.css||"";t.each(u,(function(e,t){p=p.replace(new RegExp("("+e+")","g"),t)})),TVE.FLAGS.SYNC_NEW_CONTENT=!0,r.syncCourse(o),i.initCourseSubElements(o),TVE.ActiveElement.attr({"data-id":a,class:o.attr("class")}).html(o.html()),TVE.Editor_Page.content_manager.insert_head_css(p).done((()=>{TVE.ActiveElement.find(".thrive-shortcode-content").removeAttr("data-css"),TVE.do_action("tcb_after_cloud_template",TVE.ActiveElement),TVE.froala.handleEmptyShortcodes(TVE.ActiveElement),TVE.FLAGS.SYNC_NEW_CONTENT=!1,TVE.drag.bind_element(TVE.ActiveElement),requestAnimationFrame((()=>{TVE.ActiveElement.removeClass("tcb-elem-placeholder tcb-block-placeholder")}))}))},controls_init:function(){const e=this;this.controls.AllowCollapsed.update=function(e){const t=this.get_buttons().map((e=>e.value)),s=1===parseInt(e.attr("data-hide-module"));this.toggleDisabled("module",s),[...t].forEach((s=>{this.removeActive(s),e.attr(`data-deny-collapse-${s}`)&&t.splice(t.indexOf(s),1)})),t.forEach((e=>{this.setActive(e)})),this.component.$("#tva-apprentice-lesson-list-module-info-tooltip")[s?"show":"hide"](),this.component.$(".default-state-toggle")[0===t.length?"hide":"show"]()},this.controls.AllowCollapsed.input=function(e,t){const s=this.get_buttons().map((e=>e.value));let o=0;s.forEach((t=>{this.isActive(t)?e.removeAttr(`data-deny-collapse-${t}`):(e.attr(`data-deny-collapse-${t}`,1),o++)})),o===s.length?(this.component.controls.DefaultState.$('[data-value="expanded"]').click(),this.component.$(".default-state-toggle").hide()):this.component.$(".default-state-toggle").show()},this.controls.DefaultState.update=function(e){const t=e.attr("data-default-state")||"expanded";this.setActive(t)},this.controls.DefaultState.input=function(e,t){const s=this.getValue();"expanded"!==s?e.attr("data-default-state",s):e.removeAttr("data-default-state"),this.component.collapseExpandCallback(e)},this.controls.AutoCollapse.update=function(e){const t=!!e.attr("data-autocollapse");this.setChecked(t)},this.controls.AutoCollapse.input=function(e,t){t.checked?e.attr("data-autocollapse","1"):e.removeAttr("data-autocollapse")},this.controls.AutoCourseStructure.update=function(e){const t=void 0===e.attr("data-display-level");this.component.$(".tva-auto-course-structure-notice").toggle(!t),this.setChecked(t)},this.controls.AutoCourseStructure.input=(e,t)=>{let s=0;t.checked?e.removeAttr("data-display-level"):(s=-1,e.attr("data-display-level",s)),this.$(".tva-auto-course-structure-notice").toggle(!t.checked),this.changeCourse(-1,s).done((()=>{this.before_update()}))},this.controls.changeCourse.update=function(e){const t=[],s=parseInt(e.attr("data-id"));l.allowAutoDetectCourse()&&t.push({value:-1,name:"Auto detect current course"}),Object.values(TVA.courses).reverse().forEach((e=>{t.push({value:e.id,name:e.name})})),this.build_options(t),this.setValue(s),this.component.toggleDisplayLevelControls(-1===s)},this.controls.changeCourse.input=(e,t)=>{const s=parseInt(t.value);this.toggleDisplayLevelControls(-1===s),e.removeAttr("data-display-level"),this.changeCourse(s).done((()=>{this.before_update(),this.controls.displayLevel.update(e),l.allowAutoDetectCourse()&&this.allowAutoDetectCourseStructure()&&this.controls.AutoCourseStructure.update(e)}))},this.controls.displayLevel.update=function(t){if(Array.isArray(e.courseObject.structure)){let t=[{value:"",name:"Course"}];e.courseObject.structure.length&&(t=[...t,...e.buildDisplayLevelOptions(e.courseObject.structure)]),this.build_options(t)}this.setValue(t.attr("data-display-level")||"")},this.controls.displayLevel.input=(e,t)=>{t.value?e.attr("data-display-level",t.value):e.removeAttr("data-display-level"),this.changeCourse(parseInt(e.attr("data-id")),e.attr("data-display-level"))},this.controls.ToggleModule.update=function(e){this.setChecked(e.attr("data-hide-module")),this.component.toggleHideModuleHeader(e)},this.controls.ToggleModule.change=(e,t)=>{t.checked?e.attr({"data-hide-module":1,"data-deny-collapse-module":1}):e.removeAttr("data-hide-module"),this.controls.AllowCollapsed.update(e)},c.toggleListElements(!1,!0)},toggleHideModuleHeader:function(e=this.$courseElement){const t=parseInt(e.attr("data-display-level"));let s=-1===t;if(!s&&Array.isArray(this.courseObject.structure)&&_.isNumber(t)){const e=this.courseObject.structure.find((e=>e.ID===t));e&&"tva_module"===e.post_type&&(s=!0)}this.controls.ToggleModule.toggle(s)},resetToggleModuleControl:function(e=this.$courseElement){this.controls.ToggleModule.change(e,{checked:!1}),this.controls.ToggleModule.update(e)},buildDisplayLevelOptions:function(e=[],t="- "){let s=[];return e.forEach((e=>{"tva_lesson"!==e.post_type&&(s.push({name:t+e.post_title,value:e.ID}),Array.isArray(e.structure)&&e.structure.length&&(s=[...s,...this.buildDisplayLevelOptions(e.structure,"-- ")]))})),s},placeholder_action:function(){l.allowAutoDetectCourse()?TVE.main.trigger("insert-course",-1,this.allowAutoDetectCourseStructure()?-1:0,69027,this.allowAutoDetectCourseStructure()?1:0):this.placeholderPanel.open(TVE.ActiveElement,TVE.ActiveElement.find(".tcb-inline-placeholder-action"))},editCourse:function(e,t){this.enterEditMode(),TVE.main.EditMode.enter(this.$courseElement,{blur:!0,body_class:"edit-mode-active course-edit-mode",can_insert_elements:!0,show_default_message:!0,restore_state:!0,element_selectable:!1,states:this.getStates(),callbacks:{exit:_.bind(this.exitEditMode,this),before_exit:TVE.Views.Controls.DropPanel.close_all,state_change:_.bind(this.stateChange,this)}}),this.$courseElement&&0!==this.$courseElement.length||this.setCourseElement()},getStates:function(){return[{label:"Not Completed",value:u},{label:"No Access",value:a.states.no_access},{label:"Completed",value:a.states.completed},{label:"In Progress",value:a.states.in_progress},{label:"Locked",value:a.states.locked}]},stateChange:function(e,s=!0){switch(parseInt(e)){case a.states.in_progress:this.$courseElement.attr(a.progressStateEnabled,1);break;case a.states.locked:this.$courseElement.attr(a.lockedStateEnabled,1)}this.$courseElement.find(p).each(((s,o)=>{const n=t(o);n.closest(".tva-course-item-dropzone").length||(n.parent().find(`[${a.stateDatasetKey}="${e}"]`).length||n.parent().append(n.clone().attr(a.stateDatasetKey,e)),n.parent().find(p).hide().filter(`[${a.stateDatasetKey}="${e}"]`).show())})),this.$courseElement.find(a.courseSubElementSelectors["course-content-selectors"]).attr(a.stateDatasetKey,e),s&&TVE.Editor_Page.blur()},changeCourse:function(e,s=0){const o=t.Deferred();if(this.resetToggleModuleControl(),!e)return void console.warn("Course ID is missing");const n=TVE.ActiveElement.clone(),i=TVE.ActiveElement.attr("data-ct");return wp.apiRequest({type:"GET",url:`${TVA.routes.course}/html`,data:{id:e,post_id:TVE.CONST.post_id,display_level:s,template_id:i?i.replace(`${TVE._type(TVE.ActiveElement)}-`,""):""},beforeSend:e=>{this.showLoadingOverlay()}}).done((e=>{this.changeCourseAjaxCallback(e,n),o.resolve()})).fail((e=>{console.warn("There was an error in changing the course",e)})),o.promise()},exitEditMode:function(){c.beforeEditModeExit(this.$courseElement),this.stateChange(u,!1),this.collapseExpandCallback(),TVE.Editor_Page.focus_element(this.$courseElement)},collapseExpandCallback:function(e=this.$courseElement){const t=e.attr("data-default-state"),s={collapse:{selectors:[],method:"addClass"},expand:{selectors:[],method:"removeClass"}};if(t){const t=e.attr("data-deny-collapse-module"),o=e.attr("data-deny-collapse-chapter");t?s.expand.selectors.push(a.courseSubElementSelectors["course-module-dropzone"]):s.collapse.selectors.push(a.courseSubElementSelectors["course-module-dropzone"]),o?s.expand.selectors.push(a.courseSubElementSelectors["course-chapter-dropzone"]):s.collapse.selectors.push(a.courseSubElementSelectors["course-chapter-dropzone"])}else s.expand.selectors.push(a.courseSubElementSelectors["course-module-dropzone"]),s.expand.selectors.push(a.courseSubElementSelectors["course-chapter-dropzone"]);Object.values(s).forEach((s=>{if(s.selectors.length){let o;if(s.selectors=s.selectors.map((e=>e+":not(.tcb-permanently-hidden)")),!t&&this.allowSmartAutoCollapse(e)){const t=s.selectors.join(",").replaceAll("-dropzone","");o=this.getSmartAutoCollapseLeaf(e).closest(t).find(s.selectors.join(","))}else o=e.find(s.selectors.join(","));TVE.inner.window.TCB_Front.course.toggleItem(o,s.method)}}))},allowSmartAutoCollapse:function(e=this.$courseElement){return d.isCoursePage()&&1===parseInt(e.attr("data-autocollapse"))&&this.getSmartAutoCollapseLeaf(e).length>0},getSmartAutoCollapseLeaf:function(e=this.$courseElement){return e.find(`[data-id="${TVE.CONST.post_id}"]`)},enterEditMode:function(){this.$courseElement.find("[draggable]").removeAttr("draggable"),this.$courseElement.find(".tve-draggable").removeClass("tve-draggable"),this.$courseElement.find(".tve-droppable").removeClass("tve-droppable"),c.toggleElements();const e=this.courseObject.id;_.isEmpty(TVA.courses[e].content)&&wp.apiRequest({type:"GET",url:`${TVA.routes.course}/structure`,data:{id:e,post_id:TVE.CONST.post_id}}).done((t=>{t.content.forEach((e=>{e.tva_course_index=this.$courseElement.find(`.thrv_wrapper[data-id="${e.ID}"]`).attr("data-index")})),TVA.courses[e]=n(n({},TVA.courses[e]),t)})).fail((()=>{console.log("error")}))},setCourseElement:function(e=TVE.ActiveElement){const t=l.parseCourseID(parseInt(e.attr("data-id")));this.$courseElement=e,this.courseObject=Object.values(TVA.courses).find((e=>e.id===t))},toggleExpandCollapse:function(e){TVE.Editor_Page.blur(),TVE.inner.window.TCB_Front.course.toggleItem(e);const t=e.hasClass(TVE.inner.window.TCB_Front.course.collapseClass)?"expanded":"default";TVE.state_manager.change(t,!0),TVE.main.states_dropdown.s=t,TVE.Editor_Page.focus_element(e.removeClass("edit_mode"))},toggleStateManagerChange:function(e){TVE.inner.window.TCB_Front.course.toggleItem(TVE.ActiveElement,"expanded"===e?"addClass":"removeClass"),TVE.Editor_Page.focus_element(TVE.ActiveElement.removeClass("edit_mode"))},changeStateBeforeFocus:function(e){const t=e.hasClass(TVE.inner.window.TCB_Front.course.collapseClass)?"expanded":"default";TVE.state_manager.get_state()!==t&&requestAnimationFrame((()=>TVE.state_manager.change(t,!0)))},allowAutoDetectCourseStructure:function(){return!["tva_lesson","tva_course_overview"].includes(TVE.CONST.post_type)},toggleDisplayLevelControls:function(e=!1){this.$(".tva-display-level-wrapper").toggle(!e),this.$("#tva-apprentice-lesson-list-default-state-info-tooltip")[e?"show":"hide"](),this.allowAutoDetectCourseStructure()&&this.$(".tva-autodetect-course-structure-wrapper").toggle(e)},enableStateDropdown:function(){return!0}})}(jQuery)},2242:function(e,t,s){function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,o)}return s}function n(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const a=s(6350),r=s(5839),c=s(3332),l=TVE.Views.Base.control.extend({template:TVE.tpl("source-control"),tabsControl:null,after_initialize:function(){const e=this,t=TVE.Views.Controls.Tabs.extend({after_render:function(){TVE.Views.Controls.Tabs.prototype.after_render.apply(this,arguments),this.$courses=this.$target.find(".tva-resource-courses"),this.$lessons=this.$target.find(".tva-resource-lessons")},renderCourses:function(){return this.$el.find("option:not(.tva-option-placeholder)").remove(),this.$courses.append(e.component.getCourseOptions()),this},selectCourse:function(t,s){this.$lessons.find("option:not(.tva-option-placeholder)").remove(),this.$lessons.append(e.component.getLessonOptions(s.value)),this.$lessons.val("")},selectLesson:function(){const t=this.$lessons.val(),s=this.$courses.val();t&&s&&e.component.fetchData(t,s)},setData:function(e,t){this.$courses.val(e),this.selectCourse(null,{value:e}),this.$lessons.val(t)},change:function(t,s){if("dynamic"===s.dataset.value)return t.attr("data-dynamic",1);t.removeAttr("data-dynamic"),e.component.updatePreview()}});this.tabsControl=new t({component:this.component,el:this.$el.find(".tve-link-tabs")[0],model:this.tabsConfig()}),this.tabsControl.toggleDisabled("dynamic","tva_lesson"===TVE.CONST.post.post_type)},update:function(e){this.tabsControl.setActive(e.attr("data-dynamic")?"dynamic":"static")},selectCourse:function(e,t){this.tabsControl.selectCourse(e,t)},selectLesson:function(e,t){this.tabsControl.selectLesson(e,t)},tabsConfig:function(){return{config:{target:".tve-link-boxes",buttons:[{icon:"link",value:"static",tooltip:TVE.t.linkType.static,tooltip_side:"top"},{icon:"database-regular",value:"dynamic",tooltip:TVE.t.linkType.dynamic,tooltip_side:"top"}]}}}});e.exports=TVE.Views.Base.component.extend({before_update:function(){this.updatePreview()},controls_init:function(e){TVE.BLOCK_ELEMENTS+=", .tva-resource-text",e.showLabel.update=t=>{e.showLabel.setValue(t.tcbCss("--tva-res-heading-display").includes("block"))},e.showLabel.change=(e,t)=>{e.head_css({"--tva-res-heading-display":t.checked?"block":"none"})},e.showIcons.update=t=>{const s=t.tcbCss("--tva-res-icons-display").includes("flex");e.IconAlign.$el.toggle(s),e.showIcons.setValue(s)},e.showIcons.change=(t,s)=>{e.IconAlign.$el.toggle(s.checked),t.head_css({"--tva-res-icons-display":s.checked?"flex":"none"})},e.showDescriptions.update=t=>{e.showDescriptions.setValue(t.tcbCss("--tva-res-description-display").includes("block"))},e.showDescriptions.change=(e,t)=>{e.head_css({"--tva-res-description-display":t.checked?"block":"none"})},e.showDownload.update=t=>{e.showDownload.setValue(t.tcbCss("--tva-res-download-display").includes("table"))},e.showDownload.change=(e,t)=>{e.head_css({"--tva-res-download-display":t.checked?"table":"none"})},e.IconAlign.applyStyles=function(e,t){this.applyElementCss({"--tva-icon-align":`${t.getAttribute("data-value")}`},e,"","")},e.IconAlign.update=function(e){this.setActive(e.tcbCss("--tva-icon-align").trim())},e.ButtonAlign.applyStyles=function(e,t){this.applyElementCss({"--tva-button-align":`${t.getAttribute("data-value")}`},e,"","")},e.ButtonAlign.update=function(e){this.setActive(e.tcbCss("--tva-button-align").trim())},e.SourseControl=new l({el:this.$(".btn-link")[0],model:{config:{label:"Course & Lesson",class:"thrv-button",keep_links:!0}},component:this})},initPanels:function(){this.placeholderPanel=new a({component:this,minWidth:300,no_buttons:!0}),this.controls.SourseControl.tabsControl.renderCourses(),this.updatePreview()},placeholder_action:function(){if(c.isCoursePage())this.fetchData(TVE.CONST.post_id,TVE.CONST.apprentice.course.id,!0,1);else{const e=()=>{var e;null==this||null===(e=this.placeholderPanel)||void 0===e||e.open(TVE.ActiveElement,TVE.ActiveElement.find(".tcb-inline-placeholder-action"))};TVE.inner.window.TCB_Front.isInViewport(TVE.ActiveElement[0],200)?e():TVE.inner_$("html").stop().animate({scrollTop:TVE.ActiveElement.offset().top-100},{duration:400,complete:e})}},applyCloudTemplate:function(e){let t={"data-ct-name":e.name,"data-ct":`${e.type}-${e.id}`};if(-1===Number(e.id))TVE.Components.resources.fetchData(TVE.ActiveElement.attr("data-lesson"),TVE.ActiveElement.attr("data-course"),!0);else{const s=TVE.inner_$(e.content),o=TVE.ActiveElement.attr("data-lesson"),i=TVE.ActiveElement,a=TVE.CSS_Rule_Cache.generate_id();let c=e.head_css,l=s.html();t=n(n({},t),{"data-css":a,"data-course":i.attr("data-course")}),c=c.replace(new RegExp(`(${s.attr("data-css")})`,"g"),a),l=/data-lesson="(\d)+"/g.test(l)?l.replace(/data-lesson="(\d)+"/g,`data-lesson="${o}"`):l.replace("[tva_lesson_resources",`[tva_lesson_resources data-lesson="${o}"`),TVE.Editor_Page.content_manager.insert_head_css(c).done((()=>{wp.apiRequest({type:"POST",url:`${TVA.routes.resources}/shortcode`,data:{shortcode:l},beforeSend:()=>i.addClass("tve-loader-square")}).done((e=>{if((null==e?void 0:e.html.length)>0){const s=TVE.inner_$(e.html);s.addClass("tcb-local-vars-root").attr(t),i.replaceWith(s),r.setDataSelectors(s,!0),TVE.Editor_Page.selection_manager.select_element(s.removeClass("edit_mode"))}}))}))}},fetchData:function(e,t,s=!1,o=0){const n=TVE.ActiveElement,i={"data-lesson":e,"data-course":t};wp.apiRequest({type:"POST",url:`${TVA.routes.resources}/html`,data:{id:Number(e),dynamic:o},beforeSend:()=>n.addClass("tve-loader-square")}).done((e=>{if((null==e?void 0:e.html.length)>0){const t=TVE.inner_$(e.html);let o=n;if(s)t.attr(i),n.replaceWith(t),o=t;else{const e=["tva-no-resources","tva-course-unpublished","tva-lesson-unpublished"];n.removeClass(`${e.join(" ")}`).attr(i).html(t.html()),e.forEach((e=>{t.hasClass(e)&&n.addClass(e)})),this.updatePreview()}this.applyButtonStyles(),TVE.Editor_Page.selection_manager.select_element(o.removeClass("edit_mode"))}})).always((()=>{n.removeClass("tve-loader-square")}))},getCourseOptions:function(){const e=Object.keys(null==this?void 0:this.courses);let t="";return e.length&&e.forEach((e=>{var s;(null==this||null===(s=this.courses[e])||void 0===s?void 0:s.lessons.length)&&(t+=`<option value="${e}">${null==this?void 0:this.courses[e].name}</option>`)})),t},getLessonOptions:function(e){var t,s;let o="";return null===(t=this.courses)||void 0===t||null===(s=t[e])||void 0===s||s.lessons.forEach((e=>o+=`<option value="${e.ID}">${e.post_title}</option>`)),o},updatePreview:function(){if(!TVE.ActiveElement)return;const e=TVE.ActiveElement.attr("data-course"),t=TVE.ActiveElement.attr("data-lesson");this.$(".course-unpublished").toggle(TVE.ActiveElement.hasClass("tva-course-unpublished")),this.$(".lesson-unpublished").toggle(TVE.ActiveElement.hasClass("tva-lesson-unpublished")),this.$(".no-resources").toggle(TVE.ActiveElement.hasClass("tva-no-resources")),this.controls.SourseControl.tabsControl.setData(e,t)},applyButtonStyles:function(){TVE.Components.button.controls.ButtonPalettes.matchGlobal(TVE.inner_$('.tva-lesson-resources[data-ct="resources--1"] .tva-resource-button'))}})},6350:function(e){e.exports=TVE.Views.InlinePanel.extend({template:TVE.tpl("resources-inline"),after_render:function(){this.$courses=this.$(".tva-resource-courses"),this.$lessons=this.$(".tva-resource-lessons"),this.renderCourses()},renderCourses:function(){this.$el.find("option:not(.tva-option-placeholder)").remove(),this.$courses.append(this.component.getCourseOptions())},selectCourse:function(e,t){this.$lessons.find("option:not(.tva-option-placeholder)").remove(),this.$lessons.append(this.component.getLessonOptions(t.value)),this.$lessons.val("").show()},selectLesson:function(e,t){this.hide(),this.component.fetchData(t.value,this.$courses.val(),!0)},onOpen:function(){this.$courses.val(""),this.$lessons.val("").hide()},position:function(){this.base_offset=TVE.main.$container.offset(),this.offset=this.$target.offset(),this.offset.left+=this.base_offset.left,this.offset.top+=this.base_offset.top+this.$target.outerHeight();const e=this.__drop_panel_height+this.$target.outerHeight();e-TVE.inner.$window.scrollTop()>TVE.inner.$window.height()?(this.offset.top-=e,this.$(".tcb-panel-arrow").addClass("arrow-bottom")):(this.$(".tcb-panel-arrow").removeClass("arrow-bottom"),this.offset.top-=this.$target.outerHeight()),this.$el.css({left:this.offset.left+this.$target.outerWidth()/2-this.$el.outerWidth()/2+"px",top:this.offset.top-TVE.inner.$window.scrollTop()+"px"})}})},4e3:function(e){e.exports=TVE.Views.Components.Typography.extend({controls_init:function(e){TVE.Views.Components.Typography.prototype.controls_init.call(this,e)}})},8753:function(e){e.exports={identifier:".tva-course-list",itemIdentifier:".tva-course-list-item",dropdownIdentifier:".tva-course-list-dropdown",searchIdentifier:".thrv-search-form",topicIconIdentifier:".tva-course-list-item-topic-icon",typeIconIdentifier:".tva-course-list-item-type-icon",authorImageLabel:"Course author image",courseImageLabel:"Course cover image"}},7702:function(e,t,s){const o=s(8753),n=s(3017),i=[o.identifier.replace(".",""),"thrv_wrapper","tcb-selector-no_save","tve-draggable","tve-droppable","edit_mode","tve_post_grid_masonry","tve-loader-square"],a={saveList:function(e){e.find(o.identifier).each(((t,s)=>{const n=TVE.inner_$(s).removeClass("tva-empty-list");let r="";TVE.PostList.content.parsePaginationShortcode(n,e);const c=TVE.PostList.utils.elementAttributes(n,["data-class","data-id"],!0,!0),l=n.find(".tcb-carousel-container");l.length>0&&(TVE.Models.CarouselManager.prepareForPostListSave(l,c),l.find(TVE.apply_filters("tcb.carousel.slides_selector","")).unwrap()),_.each(c,((e,t)=>{e="number"==typeof e||e.includes('"')?`'${e}'`:`"${e}"`,r+=` ${t}=${e}`}));let d="";n[0].classList.forEach((e=>{i.includes(e)||d.includes(e)||(d+=`${e} `)})),r+=d?` class='${d.trimEnd()}'`:"",n.attr("id")&&(r+=` id='${n.attr("id")}'`),n.find(o.itemIdentifier).not(":first").remove(),TVE.PostList.content.setElementClasses(e,o.itemIdentifier),a.saveItem(n),n.replaceWith(`[tva_course_list${r}]${n.html().trim()}[/tva_course_list]`)}))},saveItem:function(e){const t=e.find(o.itemIdentifier);if(0===t.length)return;t.find("style.tva-course-list-dynamic-variables").replaceWith("[tva_course_list_dynamic_variables]"),t.find(o.topicIconIdentifier).html("[tva_course_list_item_topic_icon]"),t.find(o.typeIconIdentifier).html("[tva_course_list_item_type_icon]"),t.find(".tcb-dynamic-field-source img").each(((e,t)=>{const s=TVE.inner_$(t),o=s.parent().parent(),n=` class="${t.getAttribute("class")||""}" css="${t.getAttribute("data-css")||""}"`;o.attr("data-tcb-events",s.attr("data-tcb-events")),t.outerHTML=`[tva_course_list_item_dynamic_image type="${t.getAttribute("data-d-f")}"${n}]`})),t.find(".tva-course-list-item-label").each(((e,t)=>{t.outerHTML=`[tva_course_list_item_label class="${t.getAttribute("class")||""}" css="${t.getAttribute("data-css")||""}"]`}));const s=TVE.PostList.utils.elementAttributes(t,["data-shortcode","data-selector"],!0,!0);let n="";s&&_.each(s,((e,t)=>{n+=` ${t}='${e}'`})),t.replaceWith(`[tva_course_list_item${n}]${t.html().trim()}[/tva_course_list_item]`)},generateList:function(e,t=[]){const s=e.closest(o.identifier);s.empty();const n=e.prop("tagName").toLowerCase();t.forEach((t=>{const o={"data-id":t.id,class:e.attr("class"),"data-selector":".tva-course-list-item"};s.append(TVE.inner_$(`<${n}>`,o).append(TVE.inner_$("<style>",{class:"tva-course-list-dynamic-variables",type:"text/css"}).html(t.variables)))}))},saveDropdown:function(e){e.find(o.dropdownIdentifier).each(((e,t)=>{const s=TVE.inner_$(t);let o="";_.each(TVE.PostList.utils.elementAttributes(s,["data-class"],!0,!0),((e,t)=>{-1===e.indexOf('"')?o+=` ${t}="${e}"`:o+=` ${t}='${e}'`})),s.replaceWith(`[tva_course_list_dropdown${o}][/tva_course_list_dropdown]`)}))},getPrefixedCourseListSelector:(e,t,s="")=>{const i=TVE.CSS_Rule_Cache.uniq_id(t);return s=`${o.identifier}[data-css="${i}"] ${s}`,n.doSelectorCleanUp(s)},getClosestCourseListItem:e=>e.closest(`${o.itemIdentifier}`)};e.exports=a},1113:function(e,t,s){const o=s(8753),n=TVE.$.extend(!0,{},TVE.PostList.EditMode,{identifier:o.identifier,subElementCategory:"Course List Elements",getExtraListElementsTags:()=>["divider","icon","social","styledlist","responsivevideo","audio"],enterEditMode:function(e){this.beforeEditModeEnter(e),TVE.main.EditMode.enter(!1,{body_class:"edit-mode-active course-list-edit-mode",blur:!0,element_selectable:!1,show_overlay:!0,show_default_message:!0,can_insert_elements:!0,states:[],callbacks:{before_exit:TVE.Views.Controls.DropPanel.close_all}}),this.afterEditModeEnter()},afterEditModeEnter:function(){TVE.PostList.EditMode.afterEditModeEnter.call(this);const e=e=>e.is_sub_element&&e.category!==this.subElementCategory;TVE.main.sidebar_toggle_elements(_.map(_.filter(TVE.Elements,(t=>e(t))),(e=>e.tag)),!1)},exitEditMode:function(e){this.beforeEditModeExit(e),setTimeout((()=>{TVE.ElementEditIcons.show_icons(e)}),50)},isInternalDrag:()=>void 0!==TVE.FLAGS.$dragged_element&&!TVE.FLAGS.$dragged_element.static_element,toggleOnlyListElements:function(e){}});e.exports=n},4447:function(e,t,s){const o=s(8753);function n(e,t){return e.filter(t).length?e.filter(t):e.find(t)}function i(e={}){const t={},s=this.applyTo.hasClass("tcb-elem-placeholder"),i=TVE.inner_$(e.content),a=1===i.length&&i.is(o.identifier)?i:i.filter(o.identifier),r=TVE.Models.CarouselManager.getCarouselContainerElements(a),c=i.find(o.dropdownIdentifier),l=i.find(o.searchIdentifier),d=s?n(i,o.dropdownIdentifier):TVE.Editor_Page.editor.find(`${o.dropdownIdentifier}[data-list="${this.applyTo.attr("data-css")}"]`),u=s?n(i,o.searchIdentifier):TVE.Editor_Page.editor.find(`${o.searchIdentifier}[data-list="${this.applyTo.attr("data-css")}"]`);let p;if(a.length){const e=s?i:a;this.applyTo.parent().is(".tcb-clear")?this.applyTo.parent().replaceWith(e):this.applyTo.replaceWith(e),this.applyTo=a}if(TVE.ActiveElement=this.applyTo,this.applyTo.data("tcb-elem-type","").attr({"data-ct-name":e.name,"data-ct":e.type+"-"+e.id,"data-element-name":TVE.t.elements[this.$$type]}),a.find("[data-css]").addBack("[data-css]").each((function(){this.dataset.css&&(void 0===t[this.dataset.css]?t[this.dataset.css]=TVE.CSS_Rule_Cache.uniq_id(this,!0):this.dataset.css=t[this.dataset.css])})),c.length&&d.length){const e=c.attr("data-css"),s=TVE.CSS_Rule_Cache.uniq_id(d,!0);t[e]=s,[d.find(".tve-lg-dropdown-list"),d.find(".tve-dynamic-dropdown-option")].forEach((t=>{const o=t.attr("data-selector").replace(e,s);t.attr("data-selector",o)}))}return l.length&&u.length&&(t[TVE.CSS_Rule_Cache.uniq_id(l)]=TVE.CSS_Rule_Cache.uniq_id(u,!0),t[TVE.CSS_Rule_Cache.uniq_id(l.find(".thrv-sf-submit"))]=TVE.CSS_Rule_Cache.uniq_id(u.find(".thrv-sf-submit"),!0),t[TVE.CSS_Rule_Cache.uniq_id(l.find(".thrv-sf-input"))]=TVE.CSS_Rule_Cache.uniq_id(u.find(".thrv-sf-input"),!0)),TVE.drag.bind_element(d.closest(".thrv-columns")),TVE.drag.bind_element(u.closest(".thrv-columns")),TVE.drag.bind_element(this.applyTo),TVE.Editor_Page.reposition_icons(),p=e.head_css,TVE.$.each(t,((e,t)=>{p=p.replace(new RegExp(`(${e})`,"g"),t)})),TVE.inner.window.TCB_Front.resizePageSection(),TVE.do_action("tcb_after_cloud_template",this.applyTo,"cloud-template"),d.attr("data-list",this.applyTo.attr("data-css")),u.attr("data-list",this.applyTo.attr("data-css")),TVE.Editor_Page.content_manager.insert_head_css(p).done((()=>{TVE.do_action("tcb_after_cloud_template_css_inserted",this.applyTo),r.length&&(r.attr("data-carousel-settings",decodeURI(r.attr("data-carousel-settings"))),TVE.PostList.layout.applyLayout(a)),TVE.Editor_Page.focus_element(this.applyTo)})),e}e.exports={actions:{},filters:{"tcb.cloud_templates.apply_callback":(e,t)=>(t&&t.length&&(t.is(o.identifier)||t.is(".tcb-elem-placeholder")&&t.find(".tcb-icon-course-list").length)&&(TVE.PostList.utils.getPaginationForList(t).remove(),e=i),e),"tcb.cloud_template_download_params":e=>(TVE.ActiveElement&&TVE.ActiveElement.is(o.identifier)&&(e.data.query=(TVE.ActiveElement.attr("data-query")||"").split("[").join("|{|").split("]").join("|}|"),e.data.pagination_type=TVE.ActiveElement.attr("data-pagination-type")||"",e.data.posts_per_page=TVE.ActiveElement.attr("data-posts_per_page")||"",e.data.no_posts_text=TVE.ActiveElement.attr("data-no_posts_text")||""),e)}}},835:function(e,t,s){const o=s(8753),n=s(7702),i=s(2099),a=s(3017),r=(e,t)=>{const s=t.parents(o.identifier);return s.length&&(e=n.getPrefixedCourseListSelector(t,s,e)),e},c={actions:{"tcb.write_css":(e,t)=>{if(e=e.replace(a.pseudoSelectorsRegex(),""),!TVE.FLAGS.drag&&e.includes(o.identifier)){const t=TVE.inner.$document.find(e),s=n.getClosestCourseListItem(t);if(s.length){const e=TVE.state_manager.get_parent();let o=!1;e&&1===TVE.inner.$body.find(`[data-css="${e.attr("data-css")}"]`).length&&(o=!0),t.is(s)||!o&&1!==TVE.inner.$body.find(`[data-css="${t.attr("data-css")}"]`).length||i.checkForCourseListSync(s)}}}},filters:{tcb_head_css_prefix:r,"tve.css_variable.selector":r,regenerate_css_id:(e,t)=>{const s=`[data-css="${t}"]`,o=TVE.inner.$body.find(s);if(o.length){const t=n.getClosestCourseListItem(1===o.length?o:o.first());t.length&&1===t.find(s).length&&(e=!1)}return e},"tcb.head_css_new_id":e=>{const t=TVE.inner.$body.find(`[data-css="${e}"]`),s=n.getClosestCourseListItem(t);return 1===t.length&&s.length>0&&!TVE.FLAGS.drag&&i.checkForCourseListSync(t),e},"tcb.css.save.whitelist_rule":(e,t)=>(t.includes(o.identifier)&&t.includes(":nth-child")&&(t=(t=t.replace(/:not\((:nth-child\(.*\))\)/g,"")).replace(/(:nth-child\(.*\))/g,""),TVE.inner.$body.find(t).length&&(e=!0)),e)}};e.exports=c},6770:function(e,t,s){const o=s(1113),n=s(8753);e.exports={actions:{"tcb.dragstart":e=>{o.isInsideEditMode()&&(TVE.main.EditMode.element().find(n.itemIdentifier).addClass("tve-no-drop-inside"),e.closest(n.itemIdentifier).removeClass("tve-no-drop-inside"))}},filters:{only_inner_drop:e=>(o.isInsideEditMode()&&(e+=`,${n.itemIdentifier}`),e),constrain_drop:e=>(o.isInsideEditMode()&&o.isInternalDrag()&&(e+=`,${n.itemIdentifier}`),e),"tcb.get_dropzone_target":e=>{if(o.isInsideEditMode()){const t=TVE.main.EditMode.element().find(n.itemIdentifier).first();e=t.length?t.children().last():e}return e}}}},7170:function(e,t,s){const o="Apprentice Course List",n=s(8753),i=s(1113),a=s(4103),r=s(2099),c=e=>{const t=a.getCourse();t&&(TVE.ActiveElement.attr({"data-dynamic":e}).find(".tve_image").attr({src:TVE.Components.image.controls.ImagePicker.picker.clean_url(t.dynamic_images[e]),title:t.name,alt:t.name,"data-d-f":e}).removeAttr("srcset"),r.checkForCourseListSync(TVE.ActiveElement))};e.exports={actions:{"tcb.froala.link.tab.dynamic":e=>{e.find(`#fr-dynamic-category-list option[value="${o}"]`).toggle(i.isInsideEditMode())},"tcb.froala.dynamic_link_after_insert":e=>{(e=>{if(i.isInsideEditMode()&&a.allowApprenticeShortcodes(e.attr("data-shortcode-id"))){const t=a.getCourse();e.attr({href:t.permalink})}})(e)}},filters:{"tcb.get_dynamic_colors":e=>{if(i.isInsideEditMode()){const t=a.getCourse();t&&((e=[]).push({color:t.label_color,name:`Label: ${t.label_title}`,label:`Label: ${t.label_title}`,id:"label-color",custom_name:1,active:1}),e.push({color:t.topic_color,name:`Topic: ${t.topic_title}`,label:`Topic: ${t.topic_title}`,id:"topic-color",custom_name:1,active:1}))}return e},"tcb.dynamic_image.show_tab":e=>(i.isInsideEditMode()&&(e=!0),e),"tcb.dynamic_image_input.callback":e=>(i.isInsideEditMode()&&(e=c),e),"tcb.custom-fields.main-dropdown-values":(e,t)=>(i.isInsideEditMode()&&"image"===t&&((e=_.pick(e,["","author","featured"])).featured=n.courseImageLabel,e.author=n.authorImageLabel),e),"tcb.dynamic_image.show_sizes_select":e=>(i.isInsideEditMode()&&(e=!1),e),"tcb.dynamic_image.change_type":(e,t)=>(i.isInsideEditMode()&&(e=t.includes("course-author")?"author":"featured"),e),"tcb.dynamic_image.change_url":(e,t)=>(i.isInsideEditMode()&&(e=`var(${TVE.CONST.dynamic_background_url_prefix}course-${"featured"===t?"image":"author"})`),e),"tcb.dynamic_image.options":e=>(i.isInsideEditMode()&&(e.featured.label=n.courseImageLabel,e.author.label=n.authorImageLabel),e),"tcb.froala.options":(e,t,s)=>(i.isInsideEditMode()&&t.closest(".thrv-button").length&&t.closest(".tva-course-list").length&&(e.toolbarButtons=s.inline_shortcode),e),"tcb.image_picker.dynamic_source":e=>{if(i.isInsideEditMode()){const t=a.getCourse();t&&(TVE.ActiveElement.attr({"data-dynamic":"featured"}),e.url=TVE.Components.image.controls.ImagePicker.picker.clean_url(t.dynamic_images.featured),e.title=t.name,e.alt=t.name)}return e},"tcb.render_dynamic_categories":e=>{if(!i.isInsideEditMode()){const t=e.indexOf(o);t>-1&&e.splice(t,1)}return e}}}},5377:function(e,t,s){const o=s(7702),n=s(8753),i=s(1113),a={actions:{"tcb.cloud_template.search_form.before_apply":(e,t)=>{const s=t.attr("data-list");s&&(e.content=TVE.$(e.content).attr("data-list",s).wrapAll("<div></div>").parent().html())},"tcb.edit_mode.exit":e=>{e.is(n.identifier)&&i.exitEditMode(e)}},filters:{"tve.get_stripped_content.selectors":e=>e+`, ${n.identifier}`,"tve.get_stripped_content":e=>e.replace(/\[[^\[]*tva_course_list_dropdown[^\]]*\]/gi,""),"tve.get_stripped_content":e=>e.replace(/\[[^\[]*tva_course_list[^\]]*\]/gi,""),"tcb.cloud_template.search_form.allow_cache":e=>(TVE.ActiveElement&&TVE.ActiveElement.is(n.identifier)&&(e=!1),e),thrive_list_items_identifiers:e=>e+`, ${n.itemIdentifier}`,tcb_filter_html_before_save:(e,t)=>(t.is(TVE.identifier("contentbox"))||(o.saveList(e),o.saveDropdown(e)),e),"tcb.list.identifier":(e,t)=>(t.is(n.identifier)&&(e=n.identifier),e),"tcb.hidden_controls.search_form.search_form":(e,t,s,o)=>(TVE.ActiveElement.attr("data-list")&&(e.push("PostTypes"),e.push(".add-post-type-control")),e),selectors_no_expand:e=>e+":not(.tva-course-list-dropdown:not(.tve-state-expanded))",selectors_no_collapse:e=>e+":not(.tva-course-list-dropdown.tve-state-expanded)","tcb.components.expanded_key":(e,t)=>("course_list_item_type_icon"===e&&(e="icon"),e),selectors_no_icons:e=>(i.isInsideEditMode()&&(e+=`, ${n.itemIdentifier}`),e),"tcb.is_list_edit_mode":e=>(i.isInsideEditMode()&&(e=!0),e),"tcb.list_item_identifier":e=>(i.isInsideEditMode()&&(e=n.itemIdentifier),e),"tcb.carousel.slides_selector":e=>(e.length&&(e+=","),`${e} .tva-course-list-item`),"tcb.carousel_manager.element_instance.course_list":(e,t)=>new TVE.inner.window.TCB_Front.PostList(t,!0)}};e.exports=a},9159:function(e,t,s){const o=s(1113),n=s(4103),i=s(2099),a={actions:{"tcb.froala.before_shortcode_popup":(e,t,s)=>{const n=e.find("#fr-dropdown-categories-list"),i=!!o.isInsideEditMode();n.find('option[value="Apprentice course data"]').toggle(i),i&&t.closest(".thrv-button").length>0&&n.find('option[value="Global fields"], option[value="Custom fields"], option[value="User data"], option[value="Request data"]').hide()},"tcb.froala.after_shortcode_select":(e,t)=>{o.isInsideEditMode()&&TVE.ActiveElement.closest(".thrv-button").length>0&&n.allowApprenticeShortcodes(t.selectedData.key)&&e.find(".tve-custom-input-container").empty()}},filters:{"tcb.inline_shortcodes.shortcode_group":(e=[])=>(e.push("Apprentice course data"),e),"tcb.inline_shortcodes.afterInsert":(e,t)=>{if(o.isInsideEditMode()){if(n.allowApprenticeShortcodes(t.key)){const t=e.find(".thrive-shortcode-content");if(parseInt(t.attr("data-attr-link"))){const e=n.getCourse(),s=TVE.$("<a></a>");s.attr({href:e.permalink,target:parseInt(t.attr("data-attr-target"))?"_blank":"",rel:parseInt(t.attr("data-attr-rel"))?"nofollow":""}).text(t.text()),t.html(s)}}i.checkForCourseListSync(e)}return e},"tcb.inline_shortcodes.shortcode_value":(e,t)=>{if(o.isInsideEditMode()&&n.allowApprenticeShortcodes(t.key)){const s=n.getSanitizedShortcodeKey(t.key);e=n.getCourse()[s]}return e}}};e.exports=a},1626:function(e,t,s){const o=s(8753),n={actions:{},filters:{"tcb.post_list.layout.getListIdentifier":(e,t)=>(t&&t.closest(o.identifier).length>0&&(e=o.identifier),e),"tcb.post_list.layout.getItemIdentifier":(e,t)=>(t&&t.closest(o.identifier).length>0&&(e=o.itemIdentifier),e)}};e.exports=n},2757:function(e,t,s){const o="tcb_similar_edit",n=s(7702),i=s(8753),a=s(2099),r=e=>a.checkForCourseListSync(e);TVE.PostList.constants.htmlChangeActions.forEach((e=>TVE.add_action(e,r)));const c={actions:{"tcb.after-insert":e=>{TVE.Elements[TVE._type(e)]?n.getClosestCourseListItem(e).length&&r(e):console.warn("Corresponding element not found inside TVE.Elements for:"+e)},"tcb.element.focus":e=>{const t=e.closest(i.itemIdentifier);if(t.length){const s=TVE.identifier(TVE._type(e)),o=t.find(s).index(e);-1!==o&&t.closest(i.identifier).find(i.itemIdentifier).each(((e,t)=>{TVE.inner_$(t).find(s).eq(o).addClass(TVE.PostList.constants.SIMILAR_EDIT_CLASS)}))}},"tcb.focus.clear":()=>{TVE.inner.$body.find(o).removeClass(o)},"tcb.element.duplicate":(e,t)=>{e.parents(i.identifier).length>0&&r(e)},"tcb.element.remove":e=>{if(TVA.$courseListItemToSync&&(r(TVA.$courseListItemToSync),delete TVA.$courseListItemToSync),e.is(i.identifier)){const t=TVE.CSS_Rule_Cache.uniq_id(e);TVE.Editor_Page.editor.find(`[data-list="${t}"]`).each(((e,t)=>{TVE.Components.course_list.removeFilterElement(TVE.inner_$(t))}))}},"tcb.froala.blur":(e,t)=>{void 0!==TVE.ActiveElement&&TVE.ActiveElement.is(TVE.TEXT_ALL)&&r(t.$el)},"tcb.columns.resized":e=>{TVE.inner.$body.find(`[data-css="${e.left_column.data("css")}"]`).length&&r(e.left_column)},"tcb.columns.render":r,"tva.course_list.after_sync":e=>{"masonry"===TVE.PostList.utils.readValue(e,"type")&&setTimeout((()=>{TVE.PostList.layout.applyLayout(e)}),100)},"tcb.animations.after_apply":()=>{const e=TVE.ActiveElement;e.is(i.itemIdentifier)?TVE.PostList.content.itemEventSync(e,e.closest(i.identifier),!0):r(e)},"tcb.animations.after_remove":()=>{const e=TVE.ActiveElement;e.is(i.itemIdentifier)?TVE.PostList.content.itemEventSync(e,e.closest(i.identifier),!1):r(e)}},filters:{allow_remove:(e,t)=>{const s=n.getClosestCourseListItem(t[0]);return s.length&&(TVA.$courseListItemToSync=s),e}}};e.exports=c},57:function(e,t,s){const o={cloud:s(4447),general:s(5377),layout:s(1626),drag:s(6770),css:s(835),sync:s(2757),shortcodes:s(9159),dynamic:s(7170)},n={tcb_filter_html_before_save:9,tcb_head_css_prefix:9};_.each(o,(e=>{TVE.addHooks(e,n)}))},7110:function(e,t,s){const o=s(4103);function n(e){return`\n\t<span class="tva-select2-bg" style="background-color: ${e.color}">\n\t\t<span class="tva-select2-option-resource">${e.icon}</span> ${e.text}\n\t</span>`}function i(e){return`\n\t<span class="tva-select2-col">\n\t\t<span style="color: ${e.color}" class="tva-select2-option-resource">${e.icon}</span> ${e.text}\n\t</span>`}function a(e){return`\n\t<span class="tva-select2-option-resource">\n\t\t<svg class="icon-c-filter icon-${e.icon}">\n\t\t\t<use xlink:href="#icon-${e.icon}"></use>\n\t\t</svg>\n\t<span> ${e.text}`}e.exports=TVE.modal.base.extend({checkboxItemTpl:TVE.tpl("course-list-filter-checkbox"),query:{},courseData:[],authorData:[],topicsData:[],selectDropdownClass:"tva-course-list-filter-dropdown",selectContainerClass:"tva-course-list-filter-container",after_initialize:function(){this.$counter=this.$("#tva-course-filtered-counter"),this.$courseSelection=this.$("#tva-course-list-course-selection"),this.$authorSelection=this.$("#tva-course-list-author-selection"),this.$topicsSelection=this.$("#tva-course-list-topics-selection"),this.$checkboxWrapper=this.$(".tva-course-list-checkbox-wrapper")},setData:function(e){Array.isArray(e.bundles)&&e.bundles.length&&e.bundles.forEach((e=>{0!==e.products.length&&this.courseData.push({text:e.name,id:"bundle_"+e.id,icon:"bundle"})})),Array.isArray(e.courses)&&e.courses.length&&e.courses.forEach((e=>{this.courseData.push({text:e.name,id:e.id,icon:"course"}),this.authorData.some((t=>t.id===e.author.ID))||this.authorData.push({text:e.author.name,id:e.author.ID})})),Array.isArray(e.topics)&&e.topics.length&&e.topics.forEach((e=>{this.topicsData.push({text:e.title,id:e.id,icon:"svg_icon"===e.icon_type?e.svg_icon:`<img src="${e.icon}" />`,color:e.color}),"icon"===e.icon_type&&((new Image).src=e.icon)})),this.renderFilters(e)},selectCallback:function(e){const t=TVE.$(e.currentTarget),s=t.val();t.parent().find(".tva-filter-clear").toggleClass("tva-filter-clear-show",Array.isArray(s)&&s.length>0)},filterCourseChange:function(e){const t=TVE.$(e.currentTarget),s=t.val(),o=s.findIndex((e=>e.includes("bundle"))),n=e.params.data.id;n.includes("bundle")?t.val([n]).trigger("change"):o>=0&&(s.splice(o,1),t.val(s).trigger("change"))},resetSelectFilter:function(e,t){TVE.$(t).parent().find("select").val([]).trigger("change").trigger("select2:select")},renderFilters:function(e){this.$courseSelection.select2({placeholder:"All courses",cache:!1,multiple:!0,data:this.courseData,templateResult:a,templateSelection:a,escapeMarkup:function(e){return e}}).on("change",(e=>this.selectCallback(e))).on("select2:select",(e=>this.filterCourseChange(e))),this.$authorSelection.select2({placeholder:"All authors",cache:!1,multiple:!0,data:this.authorData}).on("change",(e=>this.selectCallback(e))),this.$topicsSelection.select2({placeholder:"All topics",cache:!1,multiple:!0,data:this.topicsData,templateResult:i,templateSelection:n,escapeMarkup:function(e){return e}}).on("change",(e=>this.selectCallback(e))),[this.$courseSelection,this.$topicsSelection,this.$authorSelection].forEach((e=>{e.data("select2").$dropdown.addClass(`${this.selectDropdownClass}`),e.data("select2").$container.addClass(`${this.selectContainerClass}`),e.on("select2:select",(()=>{this.query[e.attr("data-tva-field")]=e.val(),this.refreshQueryCount()})).on("select2:unselect",(()=>{this.query[e.attr("data-tva-field")]=e.val(),this.refreshQueryCount()}))})),this.$checkboxWrapper.each(((t,s)=>{const o=s.getAttribute("data-source"),n=e[o];if(Array.isArray(n)&&n.length){const e=TVE.$(s);n.forEach((t=>{t.label=t.name||t.title||"",e.append(this.addCheckbox(o,t))}))}}))},addCheckbox:function(e="",t={}){return this.checkboxItemTpl({source:e,data:t})},before_open:function(){this.query=o.readQueryFromElement(),this.$courseSelection.val(this.query.terms||[]).trigger("change"),this.$authorSelection.val(this.query.authors||[]).trigger("change"),this.$topicsSelection.val(this.query.topics||[]).trigger("change"),this.$checkboxWrapper.each(((e,t)=>{const s=t.getAttribute("data-source"),o=TVE.$(t);!this.query[s]||Array.isArray(this.query[s])&&0===this.query[s].length?(o.find(`[data-source="${s}"]`).prop("checked",!0),"function"==typeof this[`${s}CheckboxClicked`]&&this[`${s}CheckboxClicked`](),this.toggleDisabledForALlValues(s)):this.query[s].forEach((e=>{o.find(`[data-source="${s}"][value="${e}"]`).prop("checked",!0)}))})),this.refreshQueryCount()},refreshQueryCount:_.debounce((function(){this.$counter.html("Searching&hellip;").removeClass("c-red").addClass("tva-counter-loading"),this.$checkboxWrapper.filter("[data-no-count]").each(((e,t)=>{delete this.query[t.getAttribute("data-source")]})),o.countCourses(this.query).then((e=>{this.$counter.html(`${e} matching results`).removeClass("tva-counter-loading").toggleClass("c-red",0===e)}))}),3e3),filterCheckboxClicked:function(e,t){const s=t.getAttribute("data-source"),o=t.getAttribute("value"),n=this.$checkboxWrapper.filter(`[data-source="${s}"]`),i=n.find('[value="all"]');"all"===o?(n.find("input").prop("checked",!0),i.prop("checked",!0).attr("disabled","disabled")):(i.prop("checked",!1).removeAttr("disabled"),"progress-has-access"===o&&n.find('input[value="0"], input[value="1"], input[value="2"]').prop("checked",t.checked),"function"==typeof this[`${s}CheckboxClicked`]&&this[`${s}CheckboxClicked`](),t.checked&&this.toggleDisabledForALlValues(s)),n.attr("data-no-count")||(this.query[s]=this.getCheckedValues(s),this.refreshQueryCount())},progressCheckboxClicked:function(){let e=!0;this.$checkboxWrapper.filter('[data-source="progress"]').find('input[value="0"], input[value="1"], input[value="2"]').each(((t,s)=>{s.checked||(e=!1)})),this.$checkboxWrapper.filter('[data-source="progress"]').find('input[value="progress-has-access"]').prop("checked",e)},toggleDisabledForALlValues:function(e){const t=this.$checkboxWrapper.filter(`[data-source="${e}"]`),s=t.find('[value="all"]');let o=!0;t.find("input").each(((e,t)=>{if("all"!==t.value)return t.checked?void 0:(o=!1,!1)})),o?s.prop("checked",!0).attr("disabled","disabled"):s.prop("checked",!1).removeAttr("disabled")},getCheckedValues:function(e){const t=[],s=this.$checkboxWrapper.filter(`[data-source="${e}"]`);return s.find('[value="all"]')[0].checked||s.find("input:checked").each((function(e,s){isNaN(s.value)||t.push(s.value)})),t},save:function(){this.query.terms=this.$courseSelection.val(),this.query.authors=this.$authorSelection.val(),this.query.topics=this.$topicsSelection.val(),this.$checkboxWrapper.each(((e,t)=>{const s=t.getAttribute("data-source");this.query[s]=this.getCheckedValues(s)})),o.applyQuery(TVE.ActiveElement,this.query),this.query={},this.close()}})},2099:function(e,t,s){const o=s(7702),n=s(3868),i=s(8753),a={checkForCourseListSync:function(e,t=!0){const s=o.getClosestCourseListItem(e),n=s.length>0&&!a.isSyncing();return n&&t&&(a.startSync(),a.sync(s),a.endSync()),n},startSync:n.startSync,endSync:n.endSync,isSyncing:n.isSyncing,sync:function(e,t=[]){n.beforeSyncActions(e);const s=e.closest(i.identifier);t.length&&o.generateList(e,t),TVE.froala.disable(e),s.find(i.itemIdentifier).each(((t,s)=>{requestAnimationFrame((()=>a.syncItem(TVE.inner_$(s),e)))})),n.afterSyncActions(),TVE.do_action("tva.course_list.after_sync",s)},syncItem:function(e,t){if(t.is(e))return;const s=this.getCourseData(parseInt(e.attr("data-id"))),o=t.clone();s&&(a.syncInlineShortcodes(o,s),a.syncTopicIcon(o,s),a.syncCourseTypeIcon(o,s),a.syncDynamicImages(o,s)),n.itemCleanUp(o),o.find("style.tva-course-list-dynamic-variables").replaceWith(e.find("style.tva-course-list-dynamic-variables")),e.html(o.html()),TVE.Editor_Page.content_manager.cleanup_froala(e),o.remove()},syncInlineShortcodes:function(e,t){e.find(".thrive-shortcode-content").each(((e,s)=>{let o=TVE.inner_$(s);const n=o.attr("data-shortcode");if(n&&n.includes("tva_course_list_item_")){const e=t[a.getShortcodeType(o)];void 0===e?o.empty():(o.find("a").length>0&&(o=o.find("a")),o.html(""===e?o.attr("data-shortcode-name"):e))}}))},syncTopicIcon:function(e,t){e.find(i.topicIconIdentifier).each(((e,s)=>{const o=TVE.inner_$(s);let n="";n=t.topic_icon.includes("<svg")?t.topic_icon.replace("<svg",`<svg style="fill:${t.topic_icon_color};color:${t.topic_icon_color};"`):`<div class="tva-course-list-item-topic-icon-bg" style="background-image: url('${t.topic_icon}');"></div>`,o.html(n)}))},syncCourseTypeIcon:function(e,t){e.find(i.typeIconIdentifier).each(((e,s)=>{TVE.inner_$(s).html(t.type_icon)}))},syncDynamicImages:function(e,t){e.find(`${TVE.identifier("image")}[data-dynamic]`).each(((e,s)=>{const o=TVE.inner_$(s),n=o.find(".tve_image"),i=o.attr("data-dynamic");n.attr({src:TVE.Components.image.controls.ImagePicker.picker.clean_url(t.dynamic_images[i]),title:t.name,alt:t.name,"data-d-f":i})}))},getShortcodeType:e=>e.attr("data-shortcode").replace("tva_course_list_item_",""),getCourseData:function(e){return TVA.courses[e]}};e.exports=a},4103:function(e,t,s){const o=s(2099),n=s(8753),i={getCourseID:function(e=TVE.ActiveElement){return e?parseInt(e.closest(n.itemIdentifier).attr("data-id")):0},getCourse:function(e){const t=e||this.getCourseID();return TVA.courses[t]},readQueryFromElement:function(e){void 0===e&&(e=TVE.ActiveElement);let t=e.attr("data-query");try{t=JSON.parse(t.replace(/'/g,'"'))}catch(e){t={}}return t},applyQuery:function(e,t){t||(t=this.readQueryFromElement(e));const s=JSON.parse(JSON.stringify(t));TVE.Components.course_list_dropdown.refreshOptions(this.getDropdownFilterForList(e),s),this.fetchCourses(s).then((s=>{const i=s.courses;e.toggleClass("tva-empty-list",0===i.length),Array.isArray(i)&&i.length&&o.sync(e.find(n.itemIdentifier),i),e.attr("data-query",JSON.stringify(t).replace(/"/g,"'"))}))},fetchCourses:function(e){const t=TVE.ActiveElement;return new Promise(((s,o)=>{wp.apiRequest({type:"POST",url:`${TVA.routes.course_list}/html`,data:{query:e},beforeSend:()=>t.addClass("tve-loader-square")}).done((e=>{this.extendCoursesLocalization(e.courses),t.removeClass("tve-loader-square"),s(e)})).fail(o)}))},countCourses:function(e){return new Promise((function(t,s){wp.apiRequest({type:"GET",url:`${TVA.routes.course_list}/count`,data:{query:e}}).done(t).fail(s)}))},extendCoursesLocalization:function(e){const t={};Array.isArray(e)&&e.length&&(e.forEach((e=>{t[e.id]=this.prepareCourseForLocalize(e)})),TVE.$.extend(!0,TVA.courses,t))},prepareCourseForLocalize:function(e){return e.description&&(e.description=TVE.$(`<div>${e.description}</div>`).text()),e},getSearchFormForList:function(e){const t=TVE.CSS_Rule_Cache.uniq_id(e);return TVE.Editor_Page.editor.find(`.thrv-search-form[data-list="${t}"], .tcb-elem-placeholder[data-list="${t}"]`)},getDropdownFilterForList:function(e){const t=TVE.CSS_Rule_Cache.uniq_id(e);return TVE.Editor_Page.editor.find(`.tva-course-list-dropdown[data-list="${t}"]`)},getListForDropdown:function(e){const t=e.attr("data-list");return TVE.Editor_Page.editor.find(`.tva-course-list[data-css="${t}"]`)},prepareSearchFormForList:function(e){const t=TVE.CSS_Rule_Cache.uniq_id(e),s=TVE.inner_$(TVE.main.static_element("search_form").html().trim());s.addClass("tcb-no-clone tcb-no-save").attr("data-list",t);const o=new TVE.CloudTemplatesModal;return o.selected="56234",o.$$type="search_form",o.applyTo=s,TVE.main.overlay(),o.save().done((()=>{TVE.ActiveElement.addClass("tcb-no-clone tcb-no-save").find('input[type="search"]').attr("placeholder","Search courses..."),TVE.ActiveElement.head_css({float:"none","min-width":"100%","margin-left":"auto !important","margin-right":"auto !important"})})).always((()=>{TVE.main.overlay(!0)})),s},prepareDropdownFilterForList:function(e){const t=TVE.CSS_Rule_Cache.uniq_id(e),s=TVE.$(TVE.main.static_element("course_list_dropdown").html().trim()),o=TVE.CSS_Rule_Cache.uniq_id(s),n=TVE.CSS_Rule_Cache.uniq_id(s,!0);return[s.find(".tve-lg-dropdown-list"),s.find(".tve-dynamic-dropdown-option")].forEach((e=>{const t=e.attr("data-selector").replace(o,n);e.attr("data-selector",t)})),s.attr("data-list",t),s},prepareFilterColumnsElement:function(){const e=TVE.inner_$('<div class="thrv_wrapper thrv-columns tve-draggable"><div class="tcb-flex-row v-2"><div class="tcb-flex-col"><div class="tcb-col"></div></div><div class="tcb-flex-col"><div class="tcb-col"></div></div></div></div>'),t=e.find(".tcb-flex-row");return e.head_css({"margin-top":"2px !important","margin-bottom":"2px !important"}),t.head_css({"padding-top":"2px !important","padding-bottom":"2px !important"}),t.head_css({"min-height":"1px","justify-content":"center"},null," > .tcb-flex-col > .tcb-col"),e},getFilterColumnsElement:function(e){const t=e.prev();return t.is(".thrv-columns")?t:TVE.$()},allowApprenticeShortcodes:function(e){return e&&e.includes("tva_course_list_item_")},getSanitizedShortcodeKey:function(e){return e.replace("tva_course_list_item_","")}};e.exports=i},1828:function(e,t,s){const o=s(4103);e.exports=s(1967).extend({getHTML:function(e){const t=o.getCourse(o.getCourseID(e)),s=o.getSanitizedShortcodeKey(this.key);let n=t[s];return"function"==typeof this[s]&&(n=this[s](n,t)),n},topic_icon:function(e="",t={}){return e.includes("<svg")?e.replace("<svg",`<svg style="fill:${t.topic_icon_color};color:${t.topic_icon_color};"`):`<div class="tva-course-list-item-topic-icon-bg" style="background-image: url('${e}');"></div>`},cover_image:function(e="",t={}){return`<span class="tve_image_frame"><img class="tve_image" src="${TVE.Components.image.controls.ImagePicker.picker.clean_url(t.dynamic_images.featured)}" title="${t.name}" alt="${t.name}" data-d-f="featured" loading="lazy" /></span>`},author_image:function(e="",t={}){return`<span class="tve_image_frame"><img class="tve_image" src="${TVE.Components.image.controls.ImagePicker.picker.clean_url(t.dynamic_images.author)}" title="${t.name}" alt="${t.name}" data-d-f="author" loading="lazy" /></span>`},label_title:function(e="",t={}){return`<div class="thrv_wrapper thrv_text_element"><p><span class="thrive-inline-shortcode" contenteditable="false"><span class="thrive-shortcode-content" data-shortcode="tva_course_list_item_label_title" data-shortcode-name="Course Label" contenteditable="false" data-extra_key="">${t.label_title}</span></span></p></div>`},action_button:function(e="",t={}){const s=TVE.$(TVE.main.static_element("button").html());s.find("a").addClass("tve-dynamic-link").attr({target:"","data-shortcode-id":"tva_course_list_item_permalink","data-dynamic-link":"tva_course_list_item_permalink"});const o=`<span class="thrive-inline-shortcode" contenteditable="false"><span class="thrive-shortcode-content" data-shortcode="tva_course_list_item_action_label" data-shortcode-name="Course Action label" contenteditable="false" data-extra_key="">${t.action_label}</span></span>`;return s.find(".tcb-button-text").html(o),s.html()},alterElement:function(e){e.is(".tva-course-list-item-topic-icon, .tva-course-list-item-type-icon")&&e.head_css({"font-size":"60px",width:"60px",height:"60px","margin-left":"auto","margin-right":"auto"}),"tva_course_list_item_cover_image"===this.key?(e.attr({"data-dynamic":"featured"}),TVE.ActiveElement=TVE.ClickedElement=e):"tva_course_list_item_author_image"===this.key&&(e.attr({"data-dynamic":"author"}),TVE.ActiveElement=TVE.ClickedElement=e)}})},8456:function(e,t,s){const o=s(4103);e.exports=s(497).extend({getShortcodeValue:function(e){const t=o.getCourse(o.getCourseID(e)),s=o.getSanitizedShortcodeKey(this.key);return void 0!==t[s]?t[s]:""},getShortcodeName:function(){return this.key},alterElement:function(e){if("topic_title"===o.getSanitizedShortcodeKey(this.key)){const t="var(--tcb-dynamic-color-topic-color,var(--tcb-dynamic-color-topic-color-default,rgb(0, 0, 0)))";e.find(`[data-shortcode="${this.key}"]`).head_css({color:t,"--tve-applied-color":t})}}})},3694:function(e){const t={courseIdentifier:".tva-course",elements:["lesson","chapter","module"],expandCollapseSubSelectors:["course-module-dropzone","course-chapter-dropzone"],courseSubElementSelectors:{"course-dropzone":".tva-course-item-dropzone","course-module":".tva-course-module","course-module-dropzone":".tva-course-module-dropzone","course-module-list":".tva-course-module-list","course-chapter":".tva-course-chapter","course-chapter-dropzone":".tva-course-chapter-dropzone","course-chapter-list":".tva-course-chapter-list","course-lesson":".tva-course-lesson","course-lesson-list":".tva-course-lesson-list","course-dropzones":".tva-course-dropzone > .tva-course-state > .tva-course-state-content, .tva-course-lesson > .tva-course-state > .tva-course-state-content","course-content-selectors":".tva-course-lesson, .tva-course-chapter, .tva-course-module, .tva-course","course-state-selector":".tva-course-state","course-type-icon":".tva-course-type-icon"},stateDatasetKey:"data-course-state",states:{not_completed:0,no_access:1,completed:2,in_progress:3,locked:4},progressStateEnabled:"data-progress-state-enabled",lockedStateEnabled:"data-locked-state-enabled",courseTextWarningClass:"tva-course-warning-text",toggleExpandCollapseIconClass:"tva-structure-toggle-icon",structureItemIconClass:"tva-structure-icon"};e.exports=t},6447:function(e,t,s){const o=s(3694),n=s(3017),i=["tva-course","thrv_wrapper","tcb-selector-no_save","tve-draggable","tve-droppable","edit_mode",o.courseTextWarningClass],a=o.stateDatasetKey,r={getIdentifier:e=>`.tva-course-${e}`,getDropzoneIdentifier:e=>`.tva-course-${"course"===e?"item":`${e}`}-dropzone`,getListIdentifier:e=>`.tva-course-${e}-list`,getShortcode:e=>`tva_course_${e}_list`,getStateShortcode:e=>`tva_course_${e}_state`,getTypeIconShortcode:e=>`tva_course_${e}_type_icon`,getDropzoneShortcode:e=>`tva_course_${"course"===e?"":`${e}_`}begin`,getLabel:e=>TVE.ucFirst(e),saveCourse:function(e){e.find(TVE.identifier("course")).each(((t,s)=>{const n=e.find(s);let a="";n.find(o.courseSubElementSelectors["course-state-selector"]).removeAttr("style"),_.each(TVE.PostList.utils.elementAttributes(n,["data-class","data-id"],!0,!0),((e,t)=>{a+=` ${t}='${e}'`}));let c="";n[0].classList.forEach((e=>{i.includes(e)||c.includes(e)||(c+=`${e} `)})),a+=c?` class='${c.trimEnd()}'`:"",n.attr("data-id")&&(a+=` id='${n.attr("data-id")}'`),n.hasClass(o.courseTextWarningClass)&&n.empty(),r.normalizeCourseBeforeSave(n),o.elements.forEach((e=>{const t=r.getIdentifier(e),s=r.getShortcode(e),o=n.find(t);o.length>1&&o.not(":first").remove(),r[`save${r.getLabel(e)}`](n,t,s,e)})),r.saveCourseDropzone(n),n.replaceWith(`[tva_course${a}]${n.html()}[/tva_course]`)}))},normalizeCourseBeforeSave:function(e){const t=e.find(r.getListIdentifier("chapter")).first(),s=r.getListIdentifier("lesson");if(t.length>0){const o=t.find(s).html();void 0!==o&&0===o.length&&t.find(s).html(e.find(s).filter((function(){return TVE.$(this).html().length>0})).html()),e.find(s).each(((e,s)=>{const o=TVE.inner_$(s);if(0===o.closest(r.getListIdentifier("chapter")).length){const e=t.clone();o.replaceWith(e.wrap("<div></div>").parent().html())}}))}const o=e.find(r.getListIdentifier("module")).first();if(o.length>0){const t=o.find(s).html();if(void 0!==t&&0===t.length){const t=e.find(s).filter((function(){return TVE.$(this).html().length>0})).html();o.find(s).html(t)}}},saveCourseDropzone:function(e){const t=e.find(r.getDropzoneIdentifier("course")),s=r.getDropzoneShortcode("course");t.length?t.replaceWith(`[${s}]${t.html()}[/${s}]`):e.prepend(`[${s}][/${s}]`)},saveStates:function(e,t){if(e.length){const s=r.getStateShortcode(t),n=r.getTypeIconShortcode(t);e.find(o.courseSubElementSelectors["course-type-icon"]).each(((e,t)=>{let s="";_.each(TVE.PostList.utils.elementAttributes(t,["data-class","data-id"],!0,!0),((e,t)=>{s+=` ${t}='${e}'`})),TVE.inner_$(t).replaceWith(`[${n} ${s} ][/${n}]`)})),e.find(o.courseSubElementSelectors["course-state-selector"]).each(((e,t)=>{const o=TVE.inner_$(t);let n="";_.each(TVE.PostList.utils.elementAttributes(t,["data-class","data-id"],!0,!0),((e,t)=>{n+=` ${t}='${e}'`})),n+=` class='${t.getAttribute("class")}'`,o.replaceWith(`[${s} ${n} ]${o.html()}[/${s}]`)}))}return e},saveLesson:function(e,t,s,o){const n=e.find(t),i=n.closest(".tva-course-lesson-list");if(i.length)i.replaceWith(`[${s}]${r.saveStates(n,o).html()}[/${s}]`);else{const t=`[${s}][/${s}]`;let o=e.find(r.getDropzoneIdentifier("chapter"));o.length||(o=e.find(r.getDropzoneIdentifier("module")),o.length||(o=e.find(r.getDropzoneIdentifier("course")))),o.length?o.after(t):e.prepend(t)}},saveChapter:function(e,t,s,o){const n=e.find(t),i=r.getDropzoneShortcode("chapter");if(n.length){const e=n.closest(r.getListIdentifier("chapter")),t=n.find(r.getDropzoneIdentifier("chapter"));t.replaceWith(`[${i}]${t.html()}[/${i}]`),e.replaceWith(`[${s}]${r.saveStates(n,o).html()}[/${s}]`)}else{const t=`[${s}][${i}][/${i}]`;let o=e.find(r.getDropzoneIdentifier("module"));o.length||(o=e.find(r.getDropzoneIdentifier("course"))),o.length?(o.after(t),o.parent().append(`[/${s}]`)):(e.prepend(t),e.append(`[/${s}]`))}},saveModule:function(e,t,s,o){const n=e.find(t),i=r.getDropzoneShortcode("module");if(n.length){const e=n.closest(r.getListIdentifier("module")),t=n.find(r.getDropzoneIdentifier("module"));t.replaceWith(`[${i}]${t.html()}[/${i}]`),e.replaceWith(`[${s}]${r.saveStates(n,o).html()}[/${s}]`)}else{const t=e.find(r.getDropzoneIdentifier("course")),o=`[${s}][${i}][/${i}]`;t.length?t.after(o):e.prepend(o),e.append(`[/${s}]`)}},initCourseSubElements:e=>{Object.values(tcb_main_const.elements).forEach((t=>{Object.keys(o.courseSubElementSelectors).includes(t.tag)&&r.initSubElement(t.identifier,e)}))},initSubElement:(e,t)=>{const s=t.find(e);s.length&&s.addClass("thrv_wrapper").attr("data-selector",e)},getClosestCourseItem:e=>e.closest(`${TVE.identifier("course-lesson")}, ${TVE.identifier("course-chapter")}, ${TVE.identifier("course-module")}`),getActiveState:e=>{const t=e.closest(`[${a}]`);return t.length>0?t.attr(a):""},getActiveStateSelector:e=>{const t=r.getActiveState(e);let s=t.length&&0!==parseInt(t)?`[${a}="${t}"]`:"";return s.length&&!e.attr(a)&&(s=`${s} `),s},getPrefixedSelector:(e,t,s="")=>{const i=TVE.CSS_Rule_Cache.uniq_id(t),a=`${o.courseIdentifier}[data-css="${i}"]`,c=r.getActiveStateSelector(e);return s=`${a}${e.parents(".tve-state-expanded").length>0?" .tve-state-expanded":""} ${c.length?`${c}`:""}${s}`,n.doSelectorCleanUp(s)},isLesson:e=>e.is(o.courseSubElementSelectors["course-lesson"]),isCourseItem:e=>e.is(o.courseSubElementSelectors["course-dropzone"]),transferCourseContent:(e,t)=>{const s=[o.courseSubElementSelectors["course-dropzone"],o.courseSubElementSelectors["course-module-dropzone"],o.courseSubElementSelectors["course-chapter-dropzone"],o.courseSubElementSelectors["course-lesson"]];let n=[];return s.forEach((s=>{const o=e.find(s).first(),i=t.find(s).first();o.length&&(n=[...n,...o.find("[data-css]").toArray()],i.length&&o.html(i.html()))})),n}};e.exports=r},8492:function(e,t,s){const o=s(3694),n={actions:{"tcb.cloud_template.course.after_apply":(e,t)=>{TVE.froala.handleEmptyShortcodes(t)}},filters:{"tcb.cloud_templates.change_main_wrapper_data_css":(e=[])=>(e.push("course"),e),"tcb.cloud_template_download_params":e=>(TVE.ActiveElement&&TVE.ActiveElement.is(o.courseIdentifier)&&(e.data.course_id=TVE.ActiveElement.attr("data-id"),e.data.display_level=TVE.ActiveElement.attr("data-display-level")||""),e)}};e.exports=n},9854:function(e,t,s){const o=s(3694),n=s(3868),i=s(3017),a=s(6447),r=(e,t)=>{const s=t.parents(o.courseIdentifier);return s.length&&(e=a.getPrefixedSelector(t,s,e)),e},c=(e,t)=>{if(t.includes(TVE.identifier("course"))&&t.includes(`[${o.stateDatasetKey}`)){const s=t.replace(/\[data-course-state="\d"\]/,"").replace(/([ ]{2,})/g," ");e=TVE.inner_$(s).length>0}return e},l={fn:{},actions:{"tcb.write_css":(e,t)=>{if(e=e.replace(i.pseudoSelectorsRegex(),""),!TVE.FLAGS.drag&&e.includes(TVE.identifier("course"))){const t=TVE.inner.$document.find(e),s=a.getClosestCourseItem(t);if(s.length){const e=TVE.state_manager.get_parent();let o=!1;e&&1===TVE.inner.$body.find(`[data-css="${e.attr("data-css")}"]`).length&&(o=!0),t.is(s)||!o&&1!==TVE.inner.$body.find(`[data-css="${t.attr("data-css")}"]`).length||n.checkForCourseSync(s)}}}},filters:{css_rules_before_insert:e=>{if(TVE.FLAGS.SYNC_NEW_CONTENT){const t=`.tva-course[data-css="${TVE.ActiveElement.attr("data-css")}"]`;for(let s=0;s<e.length;s++)if(e[s].type===CSSRule.MEDIA_RULE)for(let o=0;o<e[s].cssRules.length;o++){const n=e[s].cssRules[o],i=n.cssText,a=n.selectorText;if(a.includes(".tva-course")){const n=a.replace(/.tva-course\[data-css="[A=Za-z-0-9]+"\]/gi,t),r=TVE.Editor_Page.editor.find(n.replace(/::after|::hover|:not\(#tve\)/g,"").trim());r.length&&!r.attr("data-selector")&&(e[s].deleteRule(o),e[s].insertRule(i.replace(a,n),o))}}TVE.FLAGS.SYNC_NEW_CONTENT=!1}return e},tcb_head_css_prefix:r,"tve.css_variable.selector":r,regenerate_css_id:(e,t)=>{const s=`[data-css="${t}"]`,o=TVE.inner.$body.find(s);if(o.length){const t=a.getClosestCourseItem(1===o.length?o:o.first());t.length&&1===t.find(s).length&&(e=!1)}return e},"tcb.head_css_new_id":e=>{const t=TVE.inner.$body.find(`[data-css="${e}"]`),s=a.getClosestCourseItem(t);return 1===t.length&&s.length>0&&!TVE.FLAGS.drag&&n.checkForCourseSync(t),e},"tcb.css.save.whitelist_rule":c,"ttb.css.save.whitelist_rule":c}};e.exports=l},4135:function(e,t,s){const o=s(484),n=s(3694),i=(s(6447),{actions:{"tcb.dragstart":e=>{o.isInsideCourseEditMode()&&(TVE.main.EditMode.element().find(n.courseSubElementSelectors["course-dropzones"]).addClass("tve-no-drop-inside"),e.closest(n.courseSubElementSelectors["course-dropzones"]).removeClass("tve-no-drop-inside"))}},filters:{non_draggable:e=>(o.isInsideCourseEditMode()&&(e+=`,.${n.structureItemIconClass},.${n.toggleExpandCollapseIconClass}`),e),allow_dragenter:(e,t)=>(o.isInsideCourseEditMode()&&t.is(`.${n.structureItemIconClass},.${n.toggleExpandCollapseIconClass}`)&&(e=!1),e),dropzone_elements:e=>(o.isInsideCourseEditMode()&&(o.isInternalDrag()?TVE.FLAGS.$dragged_element.is(".tva-course-no-drag")&&(e="#nothing-can-be-dragged"):e+=`, ${n.courseSubElementSelectors["course-dropzones"]}`),e),constrain_drop:e=>(o.isInsideCourseEditMode()&&o.isInternalDrag()&&(e+=`,${n.courseSubElementSelectors["course-dropzones"]}`),e),only_inner_drop:e=>(o.isInsideCourseEditMode()&&(e+=`,${n.courseSubElementSelectors["course-dropzones"]}`),e),"tcb.get_dropzone_target":e=>{if(o.isInsideCourseEditMode()){const t=TVE.main.EditMode.element().find(n.courseSubElementSelectors["course-dropzones"]).filter(":visible").not(":empty").first();e=t.length?t.children().last():e}return e}}});e.exports=i},8463:function(e,t,s){const o="Apprentice course links",n=s(484),i=s(6726),a=s(3694),r=s(3868),c=e=>{if(n.isInsideCourseEditMode()&&i.allowApprenticeShortcodes(e.attr("data-shortcode-id"))){const t=i.parseCourseID(parseInt(e.closest(a.courseIdentifier).attr("data-id"))),s=parseInt(e.closest(a.courseSubElementSelectors["course-content-selectors"]).attr("data-id")),o=TVE._type(e.closest(a.courseSubElementSelectors["course-content-selectors"])),n=TVA.courses[t],c={"data-dynamic-link":e.attr("data-dynamic-link").replace("course_content",o.replace("-","_"))};if(t===s)c.href=n.tva_permalink;else{const e=n.content.find((e=>e.ID===s));c.href=e.tva_permalink}e.attr(c),r.checkForCourseSync(e)}};e.exports={actions:{tcb_set_dynamic_link:(e,t)=>{0===t.length&&(t=e.parent()),c(t)},"tcb.froala.dynamic_link_after_insert":e=>{c(e)},"tcb.froala.link.tab.dynamic":e=>{const t=e.find("#fr-dynamic-category-list"),s=TVE._type(TVE.ActiveElement.closest(a.courseSubElementSelectors["course-content-selectors"]));t.find(`option[value="${o}"]`).toggle(n.isInsideCourseEditMode()&&"course-chapter"!==s)}},filters:{"tcb.update_dynamic_popup_shortcode":e=>(n.isInsideCourseEditMode()&&i.allowApprenticeShortcodes(e)&&(e="tva_course_content_url"),e),"tcb.render_dynamic_categories":e=>{const t=TVE._type(TVE.ActiveElement.closest(a.courseSubElementSelectors["course-content-selectors"]));if(!n.isInsideCourseEditMode()||"course-chapter"===t){const t=e.indexOf(o);t>-1&&e.splice(t,1)}return e}}}},4039:function(e,t,s){const o=s(6447),n=s(3694),i=s(6726),a=s(484),r=n.elements.map((e=>`${o.getDropzoneIdentifier(e)}`)).join(", ")+`,${o.getDropzoneIdentifier("course")}`,c=n.elements.map((e=>`${o.getIdentifier(e)}, ${o.getListIdentifier(e)}`)).join(", ")+`,.${n.structureItemIconClass},.${n.toggleExpandCollapseIconClass}`,l={actions:{tcb_after_cloud_template:e=>{e.is(n.courseIdentifier)&&o.initCourseSubElements(e)}},filters:{"tcb.custom-fields.main-dropdown-values":(e,t)=>(a.isInsideCourseEditMode()&&"image"===t&&(e={}),e),"tcb.image_picker.allow_picker_dynamic_source":e=>(a.isInsideCourseEditMode()&&(e=!1),e),"tcb.cloud_template.course.allow_cache":e=>!1,"tcb.cloud_templates.element_name":(e,t)=>("course"===t&&(e="Apprentice Lesson List"),e),"tcb.content.tcb_cls_pat":(e=[])=>(e.push("tva-"),e),before_editor_events:()=>{TVE.inner.$body.find(n.courseIdentifier).each(((e,t)=>{o.initCourseSubElements(TVE.inner_$(t))}))},tcb_filter_html_before_save:(e,t)=>(t.is(TVE.identifier("contentbox"))||o.saveCourse(e),e),"tcb.compat.not_wrappable":e=>(e.push(`${n.courseIdentifier} *`),e),selectors_no_save:e=>(a.isInsideCourseEditMode()&&(e+=`, ${n.courseIdentifier} *`),e),selectors_no_icons:e=>(a.isInsideCourseEditMode()&&(e+=", "+c),e),selectors_no_expand:e=>(a.isInsideCourseEditMode()&&(e+=`:not(${o.getDropzoneIdentifier("module")}.tve-state-expanded,${o.getDropzoneIdentifier("chapter")}.tve-state-expanded)`),e),selectors_no_collapse:e=>(a.isInsideCourseEditMode()&&(e+=`:not(${o.getDropzoneIdentifier("module")}:not(.tve-state-expanded),${o.getDropzoneIdentifier("chapter")}:not(.tve-state-expanded))`),e),selectors_no_delete:e=>(a.isInsideCourseEditMode()&&(e+=`, ${r}`),e),selectors_no_clone:e=>(a.isInsideCourseEditMode()&&(e+=`, ${r}, ${n.courseSubElementSelectors["course-type-icon"]}`),e),"tcb.components.expanded_key":e=>(a.isInsideCourseEditMode()&&e&&e.includes("course-")&&(e="course-type-icon"===e?"icon":"course-structure-item"),e),"tcb.icon.default_size":(e,t)=>{if(t.hasClass(n.toggleExpandCollapseIconClass)||t.hasClass(n.structureItemIconClass)){const s=o.getActiveState(t);if(s.length&&0!==parseInt(s)||t.closest(".tve-state-expanded").length>0){const s=t.css("font-size");void 0!==s&&(e=s)}}return e},"tcb.lazyload.data":e=>{const t=TVE.inner.$body.find(n.courseIdentifier),s=_.uniq(t.map(((e,t)=>i.parseCourseID(parseInt(t.dataset.id)))));return Array.isArray(s)&&s.length&&(e.structure_course_ids=s),e}}};e.exports=l},7832:function(e,t,s){const o="Apprentice fields",n=s(3694),i=s(3868),a=s(484),r=s(6726),c=(e,t,s)=>{e.find(`option[value="${t}"]`).html(s)},l={actions:{"tcb.froala.before_shortcode_popup":(e,t,s)=>{e.find("#fr-dropdown-categories-list").find('option[value="Apprentice fields"]').toggle(!!a.isInsideCourseEditMode())},"tcb.froala.after_shortcode_select":(e,t={})=>{"course-chapter"===TVE._type(TVE.ActiveElement.closest(n.courseSubElementSelectors["course-content-selectors"]))&&e.find(".tve-custom-input-container").empty()}},filters:{"tve.shortcode.options.html":(e,t)=>{if(t===o&&a.isInsideCourseEditMode()){const t=TVE.ActiveElement.closest(n.courseSubElementSelectors["course-content-selectors"]),s=parseInt(t.attr(n.stateDatasetKey)),o=TVE._type(t),i=TVE.$(e),a=TVE.CONST.inline_shortcodes["Apprentice fields"],r=a.filter((e=>Array.isArray(e.only_for)&&!e.only_for.includes(o)));switch(s!==n.states.no_access&&r.push(a.find((e=>"tva_course_restriction_label"===e.value))),o){case"course":c(i,"tva_course_title","Course title"),c(i,"tva_course_description","Course description"),c(i,"tva_course_type","Course Type");break;case"course-module":c(i,"tva_course_title","Module title"),c(i,"tva_course_description","Module description"),c(i,"tva_course_index","Module number"),c(i,"tva_course_children_count_with_label","Chapter/Lesson count with label");break;case"course-chapter":c(i,"tva_course_title","Chapter title"),c(i,"tva_course_description","Chapter description"),c(i,"tva_course_index","Chapter number"),c(i,"tva_course_children_count_with_label","Lesson count with label");break;case"course-lesson":c(i,"tva_course_title","Lesson title"),c(i,"tva_course_description","Lesson description"),c(i,"tva_course_status","Lesson status"),c(i,"tva_course_index","Lesson number"),c(i,"tva_course_type","Lesson type label");break;default:c(i,"tva_course_title","Title"),c(i,"tva_course_description","Description"),c(i,"tva_course_status","Status"),c(i,"tva_course_type","Course Type"),c(i,"tva_course_children_count_with_label","Lesson count with label")}r.forEach((e=>{i.find(`option[value="${e.value}"]`).remove()})),e=i[0].outerHTML}return e},"tcb.froala.display_existing_shortcode_data":e=>(a.isInsideCourseEditMode()&&r.allowApprenticeShortcodes(e.key)&&(e.key=e.key.replace(/tva_course_(module_|chapter_|lesson_)/,"tva_course_")),e),"tcb.inline_shortcodes.shortcode_group":(e=[])=>(e.push(o),e),"tcb.inline_shortcodes.afterInsert":(e,t)=>{if(a.isInsideCourseEditMode()&&r.allowApprenticeShortcodes(t.key)){const s=TVE._type(e.closest(n.courseSubElementSelectors["course-content-selectors"])),o=e.find(".thrive-shortcode-content");if(o.attr({"data-shortcode":t.key.replace("course",s.replace("-","_"))}),parseInt(o.attr("data-attr-link"))){const t=r.parseCourseID(parseInt(e.closest(n.courseIdentifier).attr("data-id"))),s=parseInt(e.closest(n.courseSubElementSelectors["course-content-selectors"]).attr("data-id")),i=TVA.courses[t],a=TVE.$("<a></a>");a.attr({href:t===s?i.tva_permalink:i.content.find((e=>e.ID===s)).tva_permalink,target:parseInt(o.attr("data-attr-target"))?"_blank":"",rel:parseInt(o.attr("data-attr-rel"))?"nofollow":""}).text(o.text()),o.html(a)}i.checkForCourseSync(e)}return e},"tcb.inline_shortcodes.shortcode_value":(e,t)=>{if(a.isInsideCourseEditMode()&&r.allowApprenticeShortcodes(t.key)){const s=r.parseCourseID(parseInt(TVE.ActiveElement.closest(n.courseIdentifier).attr("data-id"))),o=parseInt(TVE.ActiveElement.closest(n.courseSubElementSelectors["course-content-selectors"]).attr("data-id")),i=TVA.courses[s];s===o?e=i[t.key]:Array.isArray(i.content)&&(e=i.content.find((e=>e.ID===o))[t.key])}return e}}};e.exports=l},7403:function(e,t,s){const o="tcb_similar_edit",n=s(6447),i=s(3868),a=e=>i.checkForCourseSync(e);TVE.PostList.constants.htmlChangeActions.forEach((e=>TVE.add_action(e,a)));const r={actions:{"tcb.after-insert":e=>{TVE.Elements[TVE._type(e)]?e.closest(`${TVE.identifier("course-lesson")}, ${TVE.identifier("course-chapter")}, ${TVE.identifier("course-module")}`).length&&a(e):console.warn("Corresponding element not found inside TVE.Elements for:"+e)},"tcb.element.focus":e=>{const t=e.closest(TVE.identifier("course"));if(t.length){const s=e.closest(`${TVE.identifier("course-lesson")}, ${TVE.identifier("course-chapter")}, ${TVE.identifier("course-module")}`);if(s.length){const n=TVE.identifier(TVE._type(e)),i=s.find(n).addBack(n).index(e);if(-1!==i){let a=TVE.identifier(TVE._type(s));e.closest(".tve-state-expanded").length>0&&(a=`${a} .tve-state-expanded`),t.find(a).each(((e,t)=>{TVE.inner_$(t).find(n).addBack(n).eq(i).addClass(o)}))}}else{const t=e.closest(".tva-course-item-dropzone");t.length>0&&t.find(".tva-course-state-content:empty").length>0&&TVE.toggleEnabledComponents({"course-structure-item":TVE.Components["course-structure-item"]},!1,"This cannot be changed if the container is empty, try adding something to the container first.")}}},"tcb.focus.clear":()=>{TVE.inner.$body.find(o).removeClass(o)},"tcb.element.duplicate":(e,t)=>{e.parents(TVE.identifier("course")).length>0&&a(e)},"tcb.element.remove":e=>{TVA.$courseItemToSync&&(a(TVA.$courseItemToSync),delete TVA.$courseItemToSync)},"tcb.froala.blur":(e,t)=>{void 0!==TVE.ActiveElement&&TVE.ActiveElement.is(TVE.TEXT_ALL)&&a(t.$el)},"tcb.columns.resized":e=>{TVE.inner.$body.find(`[data-css="${e.left_column.data("css")}"]`).length&&a(e.left_column)},"tcb.columns.render":a},filters:{allow_remove:(e,t)=>{const s=n.getClosestCourseItem(t[0]);return s.length&&(TVA.$courseItemToSync=s),e}}};e.exports=r},2398:function(e,t,s){const o={general:s(4039),css:s(9854),sync:s(7403),shortcodes:s(7832),cloud:s(8492),links:s(8463),drag:s(4135)},n={tcb_head_css_prefix:9};_.each(o,(e=>{TVE.addHooks(e,n)}))},3868:function(e,t,s){const o=s(3694),n=s(6726),i=s(6447),a={checkForCourseSync:function(e,t=!0){const s=i.getClosestCourseItem(e),o=s.length>0&&!a.isSyncing();return o&&t&&(a.startSync(),a.sync(s),a.endSync()),o},startSync:()=>{TVE.FLAGS.SYNC=!0},endSync:()=>{TVE.FLAGS.SYNC=!1},isSyncing:()=>TVE.FLAGS.SYNC,beforeSyncActions:e=>{e.find(".tve-dropped").removeClass("tve-dropped")},sync:function(e){this.beforeSyncActions(e);const t=e.parents(TVE.identifier("course"));TVE.froala.disable(e),t.find(TVE.identifier(TVE._type(e))).each(((s,o)=>{const n=TVE.inner_$(o),i=a.getItemData(parseInt(o.dataset.id),t.attr("data-id"));a.syncStructureItem(n,e,i)})),this.afterSyncActions(e)},afterSyncActions:()=>{TVE.drag.editorActions()},syncStructureItem:function(e,t,s,n=TVE.FLAGS.SYNC_NEW_CONTENT){if(t.is(e)&&!n)return;const r=t.attr("data-type");if(!i.isLesson(t)){const s=i.getDropzoneIdentifier(r);e=e.find(s),t=t.find(s)}const c=t.clone();s&&(c.find(".thrive-shortcode-content").each(((e,t)=>{a.syncInlineShortcode(TVE.inner_$(t),s,r)})),c.find(o.courseSubElementSelectors["course-type-icon"]).each(((e,t)=>{TVE.inner_$(t).html(s.tva_course_type_svg)}))),this.itemCleanUp(c),e.html(c.html()),TVE.Editor_Page.content_manager.cleanup_froala(e),c.remove()},itemCleanUp:function(e){e.find(".edit_mode, .tve-element-overlay").removeClass("edit_mode tve-element-overlay")},syncInlineShortcode:function(e,t,s){const o=t[`tva_course_${a.getShortcodeType(e,s)}`];void 0!==o?(e.find("a").length>0&&(e=e.find("a")),e.html(""!==o?o:e.attr("data-shortcode-name"))):e.empty()},getItemData:(e,t)=>e?a.getCourseData(parseInt(t)).content.find((t=>parseInt(t.ID)===parseInt(e))):{},getCourseData:e=>(e=n.parseCourseID(e),TVA.courses[e]),getShortcodeType:(e,t)=>e.attr("data-shortcode").replace(t?`tva_course_${t}_`:"tva_course_",""),syncCourse:e=>{[o.courseSubElementSelectors["course-module-dropzone"],o.courseSubElementSelectors["course-chapter-dropzone"],o.courseSubElementSelectors["course-lesson"]].forEach((t=>{a.checkForCourseSync(e.find(t).first())}));const t=a.getCourseData(parseInt(e.attr("data-id")));e.find(`${o.courseSubElementSelectors["course-dropzone"]} .thrive-shortcode-content`).each(((e,s)=>{a.syncInlineShortcode(TVE.inner_$(s),t,"")}))}};e.exports=a},5914:function(e){var t;t=jQuery,e.exports=TVE.Views.InlinePanel.extend({template:TVE.tpl("inline/content-templates"),after_initialize:function(){this.$(".drop-panel").addClass("small-pad tcb-autocomplete"),this.autocomplete()},autocomplete:function(){const e=Object.values(TVA.courses).reverse();e.forEach(((t,s)=>{e[s].label=t.name})),this.$input=this.$(".tcb-search").autocomplete({minLength:0,source:function(s,o){o(t.ui.autocomplete.filter(e,s.term))},appendTo:this.$(".popup-content"),select:(e,t)=>(TVE.main.trigger("insert-course",t.item.id),e.stopPropagation(),!1),open:(e,t)=>{this.$(".ui-menu-item-wrapper").removeClass("ui-menu-item-wrapper ui-state-active")}}),this.$input.data("ui-autocomplete")._renderItem=function(e,s){e.addClass("tcb-suggest");const o=new RegExp(this.term,"i");return t("<li></li>").data("item.autocomplete",s).append(`<a href="#" class="tcb-truncate">${s.name.replace(o,`<span class="highlight">${this.term}</span>`)}</a>`).appendTo(e)}},hide:function(){TVE.Views.InlinePanel.prototype.hide.call(this,this.$element,null)},onOpen:function(){this.$input.val("").autocomplete("search"),this.$input[0].focus()}})},484:function(e,t,s){const o=s(3694),n=TVE.$.extend(!0,{},TVE.PostList.EditMode,{subElementCategory:"Lesson List Elements",identifier:o.courseIdentifier,isInsideCourseEditMode:()=>TVE.main.EditMode&&TVE.main.EditMode.element()&&TVE.main.EditMode.element().is(TVE.identifier("course")),isInternalDrag:()=>void 0!==TVE.FLAGS.$dragged_element&&!TVE.FLAGS.$dragged_element.static_element,toggleElements:function(){TVE.PostList.EditMode.afterEditModeEnter.call(this);const e=e=>e.is_sub_element&&e.category!==this.subElementCategory;TVE.main.sidebar_toggle_elements(_.map(_.filter(TVE.Elements,(t=>e(t))),(e=>e.tag)),!1)},toggleOnlyListElements:function(e){}});e.exports=n},6935:function(e,t,s){const o=s(3694),n=s(6726);e.exports=s(497).extend({getShortcodeName:function(e){const t=e.closest(o.courseSubElementSelectors["course-content-selectors"]),s=TVE._type(t);return this.key.replace("course",s.replace("-","_"))},getShortcodeValue:function(e){const t=n.parseCourseID(parseInt(e.closest(o.courseIdentifier).attr("data-id"))),s=e.closest(o.courseSubElementSelectors["course-content-selectors"]),i=parseInt(s.attr("data-id")),a=TVA.courses[t];let r="";return t===i?r=a[this.key]:Array.isArray(a.content)&&(r=a.content.find((e=>e.ID===i))[this.key]),r}})},6726:function(e){const t={allowApprenticeShortcodes:function(e){return e&&e.includes("tva_course_")},allowAutoDetectCourse:function(){return void 0!==TVE.CONST.apprentice&&void 0!==TVE.CONST.apprentice.course&&parseInt(TVE.CONST.apprentice.course.id)>0},parseCourseID:function(e){return-1===e&&t.allowAutoDetectCourse()&&(e=TVE.CONST.apprentice.course.id),parseInt(e)}};e.exports=t},8761:function(e,t,s){const o=s(6935),n=s(8456),i=s(1828);e.exports={course_title:new o({key:"tva_course_title"}),course_description:new o({key:"tva_course_description"}),course_list_item_name:new n({key:"tva_course_list_item_name"}),course_list_item_description:new n({key:"tva_course_list_item_description"}),course_list_item_type:new n({key:"tva_course_list_item_type"}),course_list_item_topic_title:new n({key:"tva_course_list_item_topic_title"}),course_list_item_lessons_number:new n({key:"tva_course_list_item_lessons_number"}),course_list_item_difficulty_name:new n({key:"tva_course_list_item_difficulty_name"}),course_list_item_label_title:new i({key:"tva_course_list_item_label_title",className:"tva-course-list-item-label"}),course_list_item_progress:new n({key:"tva_course_list_item_progress"}),course_list_item_topic_icon:new i({key:"tva_course_list_item_topic_icon",className:"tva-course-list-item-topic-icon tve-auxiliary-icon-element"}),course_list_item_type_icon:new i({key:"tva_course_list_item_type_icon",className:"tva-course-list-item-type-icon tve-auxiliary-icon-element"}),course_list_item_cover_image:new i({key:"tva_course_list_item_cover_image",className:"tve_image_caption tcb-dynamic-field-source"}),course_list_item_author_image:new i({key:"tva_course_list_item_author_image",className:"tve_image_caption tcb-dynamic-field-source"}),course_list_item_action_button:new i({key:"tva_course_list_item_action_button",className:"thrv-button thrv-button-v2 tcb-local-vars-root"})}},1967:function(e){e.exports=TVE.renderers.baseModel.extend({render_default:function(e){const t=TVE.inner_$(`<div class="thrv_wrapper ${this.getClassName()}">${this.getHTML(e)}</div>`);return this.alterElement(t,e),t},getClassName:function(){return this.attributes.className||""},getHTML:function(e){return""},alterElement:function(e,t){}})},497:function(e){e.exports=TVE.renderers.baseModel.extend({render_default:function(e){const t=this.getShortcodeName(e);let s,o=this.getShortcodeValue(e);_.each(TVE.CONST.inline_shortcodes,((e,t)=>{s||(s=e.find((e=>e.value===this.key)))})),""===o&&(o=s.option);const n=`<p><span class="thrive-inline-shortcode" contenteditable="false"><span class="thrive-shortcode-content" data-shortcode="${t}" data-shortcode-name="${s.option||""}" contenteditable="false" data-extra_key="">${o}</span></span></p>`,i=TVE.inner_$(`<div class="thrv_wrapper thrv_text_element">${n}</div>`);return this.alterElement(i,e),i},getShortcodeName:function(){return this.key},getShortcodeValue:function(){return""},alterElement:function(){return jQuery.noop}})},7591:function(e,t,s){const o="--tva-skin-color-",n=()=>parseInt(TVE.CONST.apprentice.skin_id)>0&&"tva"===TVE.CONST.external_palettes;e.exports={actions:{"tcb.favorite_colors.after_render":e=>{if(n()&&TVE.CONST.apprentice.palette_colors&&e.color_picker.options.showGlobals&&!e.$el.find(".tcb-tva-skin-toggle-content").length){const t=s(8301);e.$el.append(TVE.tpl("skin-colors")()),e.tva_skin_color_view=new t({el:e.$("#tcb-tva-skin-color-details")[0],favorites_view:e}),e.variableViews.tva_skin=e.tva_skin_color_view}},"tcb.favorite_colors.reset_html":e=>{if(n()&&TVE.CONST.apprentice.palette_colors){const t=Object.values(TVE.CONST.apprentice.palette_colors);if(t.length&&e.color_picker.options.showGlobals){let s="";t.forEach((t=>{s+=e.global_thumb({var_type:"tva_skin",global_prefix:o,css_prop:"background-color",color:TVE.getCssVariableValue(o+t.id),name:t.name,id:t.id,synced_var:"",custom_name:t.custom_name})})),e.$(".tcb-tva-skin-colors-container").html(s.split("p-thumb-inner").join("p-thumb-inner tcb-tpl-var"))}}}},filters:{tcb_color_css_variable_regex:e=>e+"(--tva-skin-color-[0-9]*)|","tcb.page_color_prefix":e=>(n()&&(e=o),e),"tcb.global_colors_templates":e=>{var t;return n()&&(e=Object.values((null===(t=TVE.CONST.apprentice)||void 0===t?void 0:t.palette_colors)||{})),e},tcb_central_style_panel_view:(e,t)=>{var o;return n()&&Object.values((null===(o=TVE.CONST.apprentice)||void 0===o?void 0:o.palette_colors)||{}).length&&(e=new(s(9607))({el:t.dom.central_style_panel,sidebar:t})),e}}}},8301:function(e){e.exports=TVE.GlobalColors.extend({after_initialize:function(){this.enable_remove_color=!1,this.enable_edit_color=!1,this.unlink_label="Unlink Apprentice Color",this.color_type="apprentice"},getColorMessage:function(e={}){return"title"===e.message?TVE.ucFirst(this.color_type)+" color":"edit"===e.message?"Edit color":"unlink"===e.message?"Unlink color":void 0}})},2739:function(e){function t(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,o)}return s}function s(e){for(var s=1;s<arguments.length;s++){var n=null!=arguments[s]?arguments[s]:{};s%2?t(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}(t=>{const o=TVE.Views.Controls.CentralStylePanel.Vars;e.exports=o.extend({configPaletteSelect:{paletteData:TVE.CONST.apprentice.palettes,masterVariablePrefix:"--tva-skin-color-"},show_locate_control:!1,controls_init:function(e){o.prototype.controls_init.call(this,e),this.controls.color.reset=function(e){this.model=e,this.changed=!1},this.controls.color.onOpen=function(){let e;this.model.get("master")?(e={h:parseInt(TVE.getCssVariableValue("--tva-main-master-h")),s:parseInt(TVE.getCssVariableValue("--tva-main-master-s")),l:parseInt(TVE.getCssVariableValue("--tva-main-master-l"))},this.color.colorPicker.spectrum("set",TVE.TinyColor.fromRatio(e))):(e=TVE.getCssVariableValue(`--tva-skin-color-${this.model.get("index")}`),this.color.colorPicker.spectrum("set",e)),this.model.set("initial_value",e)},this.controls.color.color.input=_.debounce((e=>{if(this.controls.color.changed=!0,this.controls.color.model.get("master")){const t=e.toHsl();0===t.h&&0===t.s&&(t.h=this.controls.color.model.get("initial_value").h),this.changeMasterVariable(t),this.masterColorInput(this.controls.color.model.get("raw_css_variable"),e.toRgbString())}else TVE.changeCssVariableValue(`--tva-skin-color-${this.controls.color.model.get("index")}`,e.toRgbString())})),this.controls.color.cancel=()=>{const e=this.controls.color.model.get("initial_value");this.controls.color.model.get("master")?(e.s=e.s/100,e.l=e.l/100,this.changeMasterVariable(e),this.masterColorInput(this.controls.color.model.get("raw_css_variable"),TVE.hslToRgb(e.h,e.s,e.l))):TVE.changeCssVariableValue(`--tva-skin-color-${this.controls.color.model.get("index")}`,e)},this.controls.color.apply=()=>{if(!this.controls.color.changed)return;const e=this.controls.color.color.colorPicker.spectrum("get"),t=TVE.CONST.apprentice.palettes.active_id;if(this.controls.color.model.get("master")){const o=e.toHsl();0===o.h&&0===o.s&&(o.h=this.controls.color.model.get("initial_value").h);const n={h:parseInt(o.h),s:TVE.functions.toFixed(o.s,2),l:TVE.functions.toFixed(o.l,2)};TVE.CONST.apprentice.palettes.palettes[t].modified_hsl=s(s({},TVE.CONST.apprentice.palettes.palettes[t].modified_hsl),n),wp.apiRequest({url:`${TVE.CONST.apprentice.routes.palette}/${TVE.CONST.apprentice.skin_id}`,type:"POST",data:{hsl:TVE.CONST.apprentice.palettes.palettes[t].modified_hsl}})}else wp.apiRequest({url:`${TVE.CONST.apprentice.routes.palette}/${TVE.CONST.apprentice.skin_id}/update_auxiliary_variable`,type:"POST",data:{id:parseInt(this.controls.color.model.get("index")),color:e.toRgbString()}})},_.each(this.controls,(e=>{e.executeAjax=t.noop}))},render_list:function(){return this.list_rendered||(Array.isArray(TVE.CONST.apprentice.palettes.palettes)&&TVE.CONST.apprentice.palettes.palettes.length&&(this.$el.append(TVE.tpl("central-style-panel/master-variables-header")()),this.$el.append(TVE.tpl("central-style-panel/palettes")()),this.buildPalettesSelect(),this.buildMasterVariable()),this.list_rendered=!0),this},buildPalettesSelect:function(){const e=this.$("#c-s-p-palettes-select");e.data("select2")&&(e.off("select2:open"),e.off("select2:close"),e.select2("destroy")),e.select2({cache:!1,minimumResultsForSearch:-1,data:this.getSelectList(),templateResult:e=>e.id?t("<div"+(e.selected?' class="active"':"")+' data-tooltip="'+e.text+'" data-side="top">'+e.preview+"</div>"):e.text,templateSelection:e=>t(`<div>${e.preview}<span class="c-s-p-palette-title">${e.text}</span></div>`)}).on("select2:open",(()=>{TVE.Views.Controls.DropPanel.close_all()})).on("select2:close",(()=>{TVE.tooltips.hide()})).data("select2").$dropdown.addClass("tcb-palette-dropdown c-s-p-palettes")},buildMasterVariable:function(){const e=this.getPalette(TVE.CONST.apprentice.palettes.active_id),t=this.buildHslString(e.modified_hsl,!0),s=this.getOtherVariables();if(this.$el.append(this.variable_template({name:e.name,css_variable:`--tva-skin-color-${this.getMainVariable().id}`,bg:`linear-gradient(${t}, ${t})`,index:"master",wrapper_class:"master_variable",show_locate_control:this.show_locate_control})),s.length){this.$el.append(TVE.tpl("central-style-panel/other-variables-header")());let e="";s.forEach((t=>{e+=this.variable_template({name:t.name,css_variable:`--tva-skin-color-${t.id}`,bg:`linear-gradient(var(--tva-skin-color-${t.id}), var(--tva-skin-color-${t.id}))`,index:t.id,wrapper_class:"other_variable",show_locate_control:this.show_locate_control})})),this.$el.append(`<div class="c-s-p-other-vars">${e}</div>`)}},getSelectList:function(){const e=[];return TVE.CONST.apprentice.palettes.palettes.forEach(((t,s)=>{const o=s===TVE.CONST.apprentice.palettes.active_id;e.push({id:s,text:t.name,preview:this.getPalettePreview(t,o),selected:o})})),e},getPalettePreview:function(e={},t=!1){return`<div class="c-s-p-palette"><div class="c-s-p-palette-item" style="background-color: ${this.buildHslString(e.modified_hsl,t)}"></div></div>`},getPalette:function(e){return TVE.CONST.apprentice.palettes.palettes[e]},getOtherVariables:function(){return Object.values(TVE.CONST.apprentice.palette_colors).filter((e=>!e.hsla_code))},getMainVariable:function(){return Object.values(TVE.CONST.apprentice.palette_colors).find((e=>-1===e.parent))},buildHslString:function(e,t=!1){return`hsl(${t?"var(--tva-main-master-h)":e.h},${t?"var(--tva-main-master-s)":100*e.s+"%"},${t?"var(--tva-main-master-l)":100*e.l+"%"})`},dom_edit_css_variable:function(e,t){return t.classList.contains("variable-name")&&(t=t.parentElement.getElementsByClassName("sp-transparent")[0]),this.controls.color.isOpen()?(this.controls.color.onCancel(),!1):(this.controls.color.reset(new Backbone.Model({master:"master"===t.getAttribute("data-index"),raw_css_variable:t.getAttribute("data-var"),index:t.getAttribute("data-index")})),this.controls.color.open(null,t),!1)},dom_change_palette:function(e,t){const s=parseInt(t.value),o=parseInt(TVE.CONST.apprentice.palettes.active_id);if(o===s)return;const n=this.getPalette(s);this.changeMasterVariable(n.modified_hsl),TVE.CONST.apprentice.palettes.active_id=s,this.buildPalettesSelect(),this.afterPaletteChange(),wp.apiRequest({url:`${TVE.CONST.apprentice.routes.skins}/${TVE.CONST.apprentice.skin_id}/change_palette`,type:"POST",data:{previous_id:o,active_id:s}}).fail((e=>{e.responseJSON&&TTD.utils.message(e.responseJSON.message,"error")}))},domResetActivePalette:function(){if(confirm("Are you sure you want to reset this palette?")){const e=this.getPalette(TVE.CONST.apprentice.palettes.active_id);this.changeMasterVariable(e.original_hsl),TVE.CONST.apprentice.palettes.palettes[TVE.CONST.apprentice.palettes.active_id].modified_hsl=_.clone(e.original_hsl),this.afterPaletteChange(),wp.apiRequest({url:`${TVE.CONST.apprentice.routes.palette}/${TVE.CONST.apprentice.skin_id}`,type:"POST",data:{hsl:e.original_hsl}})}},masterColorInput:function(e,t){TVE.do_action("tcb.change.main.css.variable",e,t,TVE.ActiveElement,!0)},afterPaletteChange:function(){TVE.do_action("tve.skin.palette_changed")},changeMasterVariable:function(e){const t=parseInt(e.h),s=`${parseInt(100*e.s)}%`,o=`${parseInt(100*e.l)}%`;TVE.changeCssVariableValue("--tva-main-master-h",t),TVE.changeCssVariableValue("--tva-main-master-s",s),TVE.changeCssVariableValue("--tva-main-master-l",o),TVE.changeCssVariableValue("--tcb-main-master-h",t),TVE.changeCssVariableValue("--tcb-main-master-s",s),TVE.changeCssVariableValue("--tcb-main-master-l",o)}})})(jQuery)},9607:function(e,t,s){e.exports=TVE.Views.Base.base_view.extend({after_initialize:e=>{this.sidebar=e.sidebar,this.$el=TVE.$(e.el),this.sections={},this.sidebar.on("drawer_opened",(e=>{"central_style_panel"===e&&(this.sections.palettes||(this.sections.palettes=new(s(2739))({el:this.$el.find('.c-s-p-section[data-section="vars"]'),sidebar:this.sidebar})),this.sections.palettes.render_list().$el.show())}))}})},5320:function(e){const t={actions:{"tve.progress.after_template_css_applied":e=>{const t=TVE.main.EditMode.in_edit(),s=t&&TVE.main.EditMode.element().is(TVE.identifier("course_list")),o=t&&TVE.main.EditMode.element().is(TVE.identifier("course")),n=["tva_lesson","tva_course_overview","tva_module"].includes(TVE.CONST.post_type);if(s||o||n){const t={};s?t["data-context"]="course-list":o&&(t["data-context"]="lesson-list",void 0===e.attr("data-hide-full")&&(t["data-hide-full"]=1)),e.removeClass("with-dual-progress"),void 0===e.attr("data-hide-empty")&&(t["data-hide-empty"]=1),t["data-default-state"]="dynamic",e.attr(t)}},"tve.progress.withdualprogress.update":(e,t)=>{TVE.main.EditMode.in_edit()&&TVE.main.EditMode.element().is(TVE.identifier("course_list"))?(e.addClass("tcb-disabled"),t.removeClass("with-dual-progress")):e.removeClass("tcb-disabled")}},filters:{"tve.fields_data.option_types":(e,t)=>{const s=TVE.main.EditMode.in_edit(),o=s&&TVE.main.EditMode.element().is(TVE.identifier("course_list")),n=s&&TVE.main.EditMode.element().is(TVE.identifier("course")),i=["tva_lesson","tva_course_overview","tva_module"].includes(TVE.CONST.post_type);return"nodes"!==t.component.controls.Type.getValue()&&"data-field"===t.fieldAttr&&(o||n||i)&&(e.push({value:"apprentice",name:"Thrive Apprentice"}),t.fieldType.model.config.default="apprentice"),e},tcb_filter_html_before_save:e=>(e.find('.tve-progress-bar-wrapper[data-field="apprentice"]').each(((e,t)=>{let s=`parent=${t.dataset.fd}`;"course-list"===t.getAttribute("data-context")?s="context=course-list":"lesson-list"===t.getAttribute("data-context")&&(s=`context=lesson-list parent=${t.dataset.fd}`),t.setAttribute("data-value-shortcode",`[tva_post_progress ${s}]`)})),e),"tve.progress.complete.options":e=>(e.getDataOptionsApprentice=function(){const e=[],t=TVE.main.EditMode.in_edit()&&TVE.main.EditMode.element().is(TVE.identifier("course_list")),s=TVE.main.EditMode.in_edit()&&TVE.main.EditMode.element().is(TVE.identifier("course")),o=s&&TVE.ActiveElement.closest(".tva-course-module-list").length,n=o&&TVE.ActiveElement.closest(".tva-course-chapter-list").length,i=s&&TVE.ActiveElement.closest(".tva-course-chapter-list").length,a=o&&!TVE.ActiveElement.closest(".tva-course-chapter-list").length,r=(n||a||s&&!o)&&TVE.ActiveElement.closest(".tva-course-lesson-list").length,c=TVE.CONST.post_parent?TVE.CONST.post_parent.post_type:null;return(t||s||TVE.CONST.post_type.match(/(tva_course|tva_module|tva_lesson)/g))&&(this.dataType.model.config.default="course",e.push({value:"course",name:"Course progress",default:!0}),(o||"tva_module"===TVE.CONST.post_type||"tva_lesson"===TVE.CONST.post_type&&"tva_module"===c)&&(this.dataType.model.config.default="module",e.push({value:"module",name:"Module progress",default:!0})),(n||i||"tva_lesson"===TVE.CONST.post_type&&"tva_chapter"===c)&&(this.dataType.model.config.default="chapter",e.push({value:"chapter",name:"Chapter progress",default:!0})),(r||"tva_lesson"===TVE.CONST.post_type)&&(this.dataType.model.config.default="course")),e},e.getApplyAttributesApprentice=function(e){return e[this.defaultValueAttr]=this.DynamicDefaultValue.getValue(),e},e),"tve.progress.second_complete.options":e=>(e.disabledNotice="Dual progress will indicate the percentage increased when completing a lesson",e.isDisabled=e=>"apprentice"===e.attr("data-field"),e)}};e.exports=t},4114:function(e){e.exports={shortcodeCategory:"Protected file",select2Placeholder:"Select a file",shortcodeName:"tva_protected_file_link",shortcodeLinkName:"tva_protected_file_dynamic_link",select2DropdownClass:"tva-protected-files-select-dropdown",select2SelectClass:"tva-protected-files-select"}},9446:function(e,t,s){function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,o)}return s}function n(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}!function(t){const o=s(4114),i=TVE.Select2Utils.getDefaultOptions({multiple:!1,placeholder:o.select2Placeholder,templateSelection:function(e){return t(e.element).attr({"data-extra-key":o.shortcodeName,"data-shortcode-id":e.value}),e.text}});e.exports={init:function(e,t){this.$select=e,this.initSelect(),this.updateSelect2(t)},updateSelect2:function(e){if(this.$select.val(null).trigger("change"),e)if(TVE.CONST.protected_files.items[e]){const t=new Option(TVE.CONST.protected_files.items[e],e,!0,!0);this.$select.append(t),this.$select.trigger("change")}else wp.apiRequest({type:"GET",url:`${TVE.CONST.protected_files.route}/${e}`,data:{}}).done((t=>{TVE.CONST.protected_files.items[e]=t.post_title;const s=new Option(t.post_title,t.ID,!0,!0);this.$select.append(s),this.$select.trigger("change")}))},initSelect:function(){const e=n({},i);e.ajax=n(n({},e.ajax),{url:TVE.CONST.protected_files.route,data:function(e){return{search:e.term}},processResults:e=>{const t=[];return e.forEach((e=>{TVE.CONST.protected_files.items[e.value]=e.label,t.push({id:e.value,value:e.value,text:e.label})})),{results:t}}}),e.dropdownParent=TVE.$body,TVE.Select2Utils.initSelect2(this.$select,e,(()=>{TVE.froala.editor&&TVE.froala.editor.popups.get("shortcode.popup")&&TVE.froala.editor.popups.get("shortcode.popup").find('button[data-cmd="shortcodeInsert"]').show()})),this.$select.data("select2").$container.addClass(o.select2SelectClass),this.$select.data("select2").$dropdown.addClass(o.select2DropdownClass)}}}(jQuery)},9512:function(e,t,s){!function(t){const o=s(9446),n=s(4114),i=e=>e&&e.length&&e.attr("data-dynamic-link")===n.shortcodeLinkName&&t.isNumeric(e.attr("data-shortcode-id")),a={actions:{"tcb.froala.dynamic.link.category":(e,t)=>{if(t===n.shortcodeCategory){const t=TVE.$(e.find("#fr-dynamic-link-list"));o.init(t,TVE.ActiveElement.attr("data-shortcode-id"))}},"tcb.element_link.category_select":(e,t,s)=>{if(e===n.shortcodeCategory){const e=TVE.$(s.$el.find("#fr-dynamic-link-list"));o.init(e,TVE.ActiveElement.attr("data-shortcode-id"))}},"tcb.links.before_update":(e,t,s)=>{if(e&&i(t)){const e=TVE.$(s.$el.find("#fr-dynamic-link-list"));o.init(e,t.attr("data-shortcode-id"))}}},filters:{"tcb.render_dynamic_links":e=>{if(void 0!==e[n.shortcodeCategory]&&TVE.ActiveElement){let t=0;if(TVE.ActiveElement.is("a.tve-froala")&&i(TVE.ActiveElement))t=TVE.ActiveElement.attr("data-shortcode-id");else if(!TVE.ActiveElement.is("a.tve-froala")){const e=TVE.getLink(TVE.ActiveElement);i(e)&&(t=e.attr("data-shortcode-id"))}t&&(e[n.shortcodeCategory].links=[[{id:t,label:n.shortcodeLinkName,name:n.shortcodeLinkName,show:!0,url:""}]])}return e}}};e.exports=a}(jQuery)},5617:function(e,t,s){const o=s(9446),n=s(4114),i={actions:{"tcb.froala.after_shortcode_category_select":(e,t)=>{if(e===n.shortcodeCategory){const e=TVE.$(t.find("#fr-dropdown-shortcode-list"));o.init(e,TVE.ActiveElement.closest(".thrive-shortcode-content").attr("data-attr-file-id")),t.find("#fr-dropdown-categories-list").on("click",{},(()=>{TVE.Select2Utils.closeSelect2(e)}))}else TVE.$(`.${n.select2DropdownClass}`).hide()},"tcb.froala.popup_button_click":()=>{TVE.$(`.${n.select2DropdownClass}`).hide()},"tcb.froala.blur":()=>{TVE.$(`.${n.select2DropdownClass}`).hide()}},filters:{"tcb.inline_shortcodes.afterInsert":(e,t)=>{if(t.extra_key===n.shortcodeName){const s=TVE.$("<a></a>");s.attr({href:"#",target:"",rel:""}).text(TVE.CONST.protected_files.items[t.key]||"Protected file"),e.find(".thrive-shortcode-content").attr({"data-shortcode":n.shortcodeName,"data-attr-file-id":t.key}).html(s)}return e},"tcb.inline_shortcodes.shortcode_group":(e=[])=>(e.push(n.shortcodeCategory),e)}};e.exports=i},6888:function(e,t,s){const o={inlineShortcodes:s(5617),dynamicLinks:s(9512)},n={};_.each(o,(e=>{TVE.addHooks(e,n)}))},6822:function(e){e.exports={elementIdentifier:"tva-lesson-resources",elementSelectorInsideTemplate:'.tva-lesson-resources[data-inside-template="1"]',editable:"tva-resource-editable",buttonIdentifier:"tva-resource-button",textIdentifier:"tva-resource-text",dataSelectors:[".tva-res-download",".tva-res-open",".tva-res-download .tcb-button-text",".tva-res-open .tcb-button-text",".tva-res-download .tcb-secondary-text",".tva-res-open .tcb-secondary-text",".tva-resource-icon",".tva-res-download .thrv_icon",".tva-resource-title",".tva-resource-description",".tva-resource-label",".tva-resource-item",".tva-resource-details",".tva-resource-get"]}},6436:function(e,t,s){const o=s(6822),n={actions:{"tcb.froala.typing_ended":e=>{if(e){const t=e.closest(".tva-resource-button");if(t.length){const s=e.hasClass("tcb-secondary-text"),o=t.attr("class").match(/tva-res-(download|open)/g)[0],n=e.closest(".tva-lesson-resources"),i=e.text();n.find(`.${o}`).not(t).find(s?".tcb-secondary-text":".tcb-button-text").each(((e,t)=>{TVE.inner_$(t).text(i).removeData("froala.editor")}))}}},"tve.froala.align.after_apply":()=>{TVE.froala.editor.$oel.find("br").remove()}},filters:{"tcb.compat.not_wrappable":e=>(e.push(`.${o.elementIdentifier} *`),e),"tve.froala.align.get_blocks":e=>{var t;if(null===(t=TVE.froala.editor)||void 0===t?void 0:t.$oel[0].classList.contains(o.textIdentifier)){const t=TVE.froala.editor.$oel.attr("class").match(/tva-resource-(title|description)/g);let s=TVE.froala.editor.$oel;t&&(s=s.closest(`.${o.elementIdentifier}`).find(`.${t[0]}`)),e=[s]}return e}}};e.exports=n},8195:function(e,t,s){const o=s(6822),n=s(5839),i={actions:{"tcb.element.selected.resources":e=>{n.setDataSelectors(e)},"tcb.element.selected.resources_label":e=>{n.setDataSelectors(e.closest(".tva-lesson-resources"))},"tcb.element.selected.resources_button":e=>{n.setDataSelectors(e.closest(".tva-lesson-resources"))},"tcb.element.selected.resources_container":e=>{n.setDataSelectors(e.closest(".tva-lesson-resources"))},"tcb.element.selected.resources_icon":e=>{n.setDataSelectors(e.closest(".tva-lesson-resources"))},"tcb.element.selected.resources_item":e=>{n.setDataSelectors(e.closest(".tva-lesson-resources"))},"tcb.element.duplicate":(e,t)=>{const s=t.closest(`.${o.elementIdentifier}`);s.length&&n.setDataSelectors(s)},"tcb.button_secondary_text.change":e=>{const t=e.closest(`.${o.elementIdentifier}`);t.length&&n.setDataSelectors(t)},"tve.lazyload.done":()=>{var e,t;(null===(e=TVE)||void 0===e||null===(t=e.Components)||void 0===t?void 0:t.resources)&&wp.apiRequest({url:`${TVA.routes.resources}/get_data`}).done((e=>{Object.keys(null==e?void 0:e.courses).length>0&&(TVE.Components.resources.courses=e.courses,TVE.Components.resources.initPanels())}))},"tcb.symbol.before_save_logic":e=>{e||(e=TVE.ActiveElement),n.setDataSelectors(e.find(`.${o.elementIdentifier}`))},"tcb.element.remove":e=>{"tva_lesson"===TVE.CONST.post.post_type&&e.hasClass(o.elementIdentifier)&&0===TVE.Editor_Page.editor.find(`.${o.elementIdentifier}`).length&&TVE.inner_$(`.tva-template-lesson-resources,${o.elementSelectorInsideTemplate}`).removeClass("tcb-permanently-hidden")}},filters:{allow_dragenter:(e,t)=>(t.is(`.${o.elementIdentifier} *`)&&(e=!1),e),non_draggable:e=>`${e}, .${o.elementIdentifier} *`,element_drop:e=>(e.hasClass(o.elementIdentifier)&&"tva_lesson"===TVE.CONST.post.post_type&&TVE.inner_$(`.tva-template-lesson-resources,${o.elementSelectorInsideTemplate}`).addClass("tcb-permanently-hidden"),e),selectors_editable:e=>`${e}, .${o.editable}`,selectors_mouseover:e=>`${e}, .${o.editable}`,selectors_no_icons:e=>`${e}, .${o.editable}, .${o.elementIdentifier} .thrv_text_element`,selectors_no_save:e=>`${e}, .${o.elementIdentifier}`,"tcb.shared_style.element_type":(e,t)=>(t.hasClass(o.buttonIdentifier)&&(e="button"),e),"tcb.cloud_templates.apply_callback":(e,t)=>((null==t?void 0:t.length)&&t.is(TVE.identifier("resources"))&&(e=TVE.Components.resources.applyCloudTemplate),e),"tcb.state.hide.button.resources_button":(e,t)=>"hover"===t,"tcb.group.editing.change.icons.for":e=>e+`, .${o.buttonIdentifier}`,tcb_filter_html_before_save:e=>{if(TVE.apply_filters("tva.resources_element.save_shortcode",!0)){var t,s;const i=e.find(`.${o.elementIdentifier}:not(.tcb-elem-placeholder)`);"tva_lesson"===(null===(t=TVE.CONST)||void 0===t||null===(s=t.post)||void 0===s?void 0:s.post_type)&&wp.apiRequest({type:"POST",url:`${TVA.routes.resources}/hide_default`,data:{id:Number(TVE.CONST.post.ID),value:Number(i.length>0)}}),i.each(((e,t)=>{const s=TVE.inner_$(t),o=s.find(".tva-resource-label"),i=o.parent(),a=s.find(".tva-resource-item");s.removeClass("tcb-group-editing tva-lesson-not-available tva-no-resources tva-course-unpublished tva-lesson-unpublished"),s.find(".tva-resource-warning").remove();let r=i.hasClass("tcb-clear")?i[0].outerHTML:o[0].outerHTML;a.find(".tva-resource-icon").html("[tva_resource_icon]"),a.find(".tva-resource-title-text").replaceWith("[tva_resource_title]"),a.find(".tva-resource-description-text").replaceWith("[tva_resource_description]"),a.find(".tva-res-open a").attr("href","{{tva_resource_open}}"),a.find(".tva-res-download a").attr("href","{{tva_resource_download}}"),r+=`[tva_resource_item ${n.getElementAttributes(a[0])}]${a[0].innerHTML}[/tva_resource_item]`;const c=TVE.apply_filters("tva.resources_element.attributes",n.getElementAttributes(t));s.replaceWith(`[tva_lesson_resources ${c}]${r}[/tva_lesson_resources]`)}))}return e},"tcb.collect_head_css.whitelist_rule":(e,t)=>n.whitelistRule(e,t),"tcb.css.should_save_rule":(e,t)=>n.whitelistRule(e,null==t?void 0:t.selectorText),"ttb.css.save.whitelist_rule":(e,t)=>n.whitelistRule(e,t),"tve.button.cloud_template.align":e=>(TVE.ActiveElement.hasClass("tva-resource-button")&&(e=!1),e),"tcb.button.default_icon":e=>(TVE.ActiveElement.hasClass("tva-res-download")?e='<span class="tcb-button-icon"><div class="thrv_wrapper thrv_icon tve_no_drag tve_no_icons tcb-icon-inherit-style"><svg class="tcb-icon" viewBox="0 0 512 512" data-id="icon-download-solid" data-name=""><path d="M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"></path></svg></div></span>':TVE.ActiveElement.hasClass("tva-res-open")&&(e='<span class="tcb-button-icon"><div class="thrv_wrapper thrv_icon tve_no_drag tve_no_icons tcb-icon-inherit-style"><svg class="tcb-icon" viewBox="0 0 448 512" data-id="icon-external-link-square-solid" data-name=""><path d="M448 80v352c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V80c0-26.51 21.49-48 48-48h352c26.51 0 48 21.49 48 48zm-64 47.111C384 109.929 370.071 96 352.889 96H220.667c-12.887 0-23.333 10.447-23.333 23.334v14.904c0 13.138 10.843 23.686 23.976 23.324l56.002-1.588L69.908 361.908c-7.858 7.802-7.88 20.504-.05 28.334l19.899 19.899c7.83 7.83 20.532 7.808 28.334-.05l205.935-207.404-1.588 56.003c-.362 13.133 10.186 23.976 23.324 23.976h14.904c12.887 0 23.334-10.447 23.334-23.333V127.111z"></path></svg></div></span>'),e),"tcb.cloud_templates.resources":e=>(e.unshift({id:"-1",name:"Default",local:!0,thumb:`${TVA.plugin_url}img/resources_default.png`,thumb_size:{w:814,h:709},v:1}),e),"tcb.cloud_template.resources":(e,t)=>t<0&&{content:"",custom_css:"",head_css:"",id:"-1",name:"Default",type:"resources",v:1}}};e.exports=i},9337:function(e,t,s){const o={general:s(8195),froala:s(6436)},n={"tcb.symbol.before_save_logic":9999999};_.each(o,(e=>{TVE.addHooks(e,n)}))},5839:function(e,t,s){const o=s(6822),n={getElementAttributes:e=>{let t="";return Array.prototype.slice.call(e.attributes).filter((e=>!["draggable"].includes(e))).forEach((e=>{t+=` ${e.name}="${e.value||""}"`})),t},setDataSelectors:(e=TVE.ActiveElement,t=!1)=>{const s=e.attr("id");let i=s;s&&!t||(i=TVE.CSS_Rule_Cache.generate_id("tva-res-")),e.attr("id",i),o.dataSelectors.forEach((t=>n.handleElementDataSelectors(e,t))),t&&TVE.head_css_copy(s,i)},handleElementDataSelectors:(e,t)=>{e.find(t).each((function(){this.dataset.selector=`#${e.attr("id")} ${t}`}))},whitelistRule:(e,t)=>{if(!e&&(null==t?void 0:t.includes("#tva-res-"))){const s=t.match(/#tva-res-(.+?)\s/);s&&s[0]&&(e=!!TVE.inner_$(s[0].trim()).length)}return e}};e.exports=n},3017:function(e){const t={pseudoSelectorsRegex:function(){return new RegExp([":hover",":active",":after",":focus","::after",":before","::before","::placeholder"].join("|"),"gi")},doSelectorCleanUp:function(e){return(e=(e=e.replace(/([ ]{2,})/g," ")).trimStart()).includes(TVE.CONST.global_css_prefix)&&(e=TVE.CONST.global_css_prefix+" "+e.replace(TVE.CONST.global_css_prefix,"")),e}};e.exports=t},1126:function(e){e.exports={typeIconIdentifier:".tva-course-type-icon",topicIconIdentifier:".tva-course-topic-icon",dynamicLabelIdentifier:".tva-course-label-title",dynamicButtonElement:".thrv-button[data-tva-dynamic-element]",templates:{generalNoAccess:"tva_post_no_access",noAccess:"tva_no_access",courseCompleted:"tva_course_completed",certificateValidation:"tva_post_certificate_validation"}}},3332:function(e,t,s){const o=s(1126),n={allowApprenticeShortcodes:function(e){return TVE.CONST.apprentice&&TVE.CONST.apprentice.dynamic_data&&e&&e.includes("tva_content_")},getSanitizedShortcodeKey:function(e){return e.replace("tva_content_","")},isCoursePage:function(){return void 0!==TVE.CONST.apprentice&&void 0!==TVE.CONST.apprentice.course},isGeneralNoAccessPage:function(){return TVE.Theme.template.secondary()===o.templates.generalNoAccess}};e.exports=n}},s={};function o(e){var n=s[e];if(void 0!==n)return n.exports;var i=s[e]={exports:{}};return t[e].call(i.exports,i,i.exports,o),i.exports}(e=jQuery)(window).on("tcb_main_ready",(()=>{e.extend(!0,TVE,o(7212)),o(2398),o(57),o(6888),o(9337),o(7896),TVE.CONST.is_certificate_validation_page&&e('a[data-fn="open_templates_picker"]').hide()})).on("tcb.register-hooks",(()=>{const e={colors:o(7591),progressBar:o(5320)},t={"tcb.page_color_prefix":100,"tcb.global_colors_templates":100};_.each(e,(e=>{TVE.addHooks(e,t)}))}))}();
!function(){var t={825:function(t){var e,i;e=ThriveGlobal.$j,i=TCB_Front,t.exports={init:function(){tve_frontend_options.is_editor_page||this.frontendInit()},frontendInit:function(t=null){(t=t||i.$document).find(".tva-certificate-verification-element").each(((t,i)=>{const r=e(i);this.bindEvents(r,t),this.displayState("form",r),tve_frontend_options.query_vars.certificate_u&&(r.find(".tva-certificate-form-input input").val(tve_frontend_options.query_vars.certificate_u),r.find(".tva-certificate-form .thrv-button").trigger("click"))}))},bindEvents:function(t,i){t.find(".tva-certificate-form .thrv-button").off("click").on("click",(r=>{r.preventDefault();const n=e(r.currentTarget),s=t.find(".tva-certificate-form-input input");n.addClass("tar-disabled tve-loading"),this.searchForCertificate(s.val()).then((r=>{this.certificate=r.certificate;const n=e(r.html).find('.tva-certificate-state[data-state="valid"]');t.find('.tva-certificate-state[data-state="valid"]').html(n[i]),this.bindEvents(t),this.displayState("valid",t)})).catch((e=>{let i="error",r=e.message;"no_certificate_found"===e.code&&(r=t.attr("data-message")||e.message),"no_certificate_found"===e.code&&TCB_Front.notificationElement.isCustomNotification&&(i="warning"),TCB_Front.notificationElement.toggle(r,i)})).finally((()=>{n.removeClass("tar-disabled tve-loading")}))})),t.find('.tve-dynamic-link[data-shortcode-id="form"]').off("click").on("click",(e=>{e.preventDefault(),this.displayState("form",t)})),t.find('.tve-dynamic-link[data-shortcode-id="download_certificate"]').off("click").on("click",(t=>{t.preventDefault();const i=e(t.currentTarget).parent(".thrv-button");i.addClass("tar-disabled tve-loading"),this.downloadCertificate(i)}))},downloadCertificate:function(t){const i=this.certificate.course.name,r=e("body");e.ajax({url:`${ThriveAppFront.routes.certificate}/download`,type:"POST",cache:!1,data:{course_id:this.certificate.course.id,user_id:this.certificate.recipient.ID},beforeSend:function(t){t.setRequestHeader("X-WP-Nonce",ThriveAppFront.nonce)},xhr:function(){const t=new XMLHttpRequest;return t.onreadystatechange=()=>{2===t.readyState&&(t.responseType=200===t.status?"blob":"text")},t},success:function(n){const s=new Blob([n],{type:"application/octetstream"}),o=window.URL||window.webkitURL,a=e("<a />").attr({href:o.createObjectURL(s),download:`${i}.pdf`});r.append(a),a[0].click(),r.remove(a),t.removeClass("tar-disabled tve-loading")},error:function(e){let i="error",r=e.responseJSON.message;t.removeClass("tar-disabled tve-loading"),TCB_Front.notificationElement.isCustomNotification&&(i="warning"),401===e.status&&(r=ThriveAppFront.t.login_required),TCB_Front.notificationElement.toggle(r,i)}})},displayState:function(t,e){if(-1===["valid","form"].indexOf(t))throw new Error(`Invalid state: ${t}`);e.find(".tva-certificate-state").removeClass("tcb-permanently-hidden").hide(),e.find(`.tva-certificate-state[data-state="${t}"]`).show()},searchForCertificate:function(t){return new Promise(((e,i)=>{TCB_Front.Utils.restAjax({type:"GET",route:tve_frontend_options.routes.certificate_search,data:{number:t}}).done((t=>{e(t)})).fail((t=>{i(t.responseJSON)}))}))}}},3467:function(t,e,i){function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function n(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){s(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}t.exports=(t,e)=>{const r=i(9444);class s extends e.PostList{constructor(t){super(t),this.courseProgress={notStarted:0,inProgress:1,finished:2,noAccess:3},this.listIdentifier=".tva-course-list-item",this.uniqueID=t.attr("data-css"),this.query={};try{this.originalQuery=JSON.parse(t.data("query").split("'").join('"'))}catch(t){this.originalQuery={}}}editorInit(){return e.PostList.prototype.editorInit.call(this),this}frontendInit(i){return i=i||e.$document,"undefined"==typeof tva_course_lists?console.warn("Error initializing the course list parameters"):(this.listArgs=tva_course_lists.find((t=>this.$element.is(t.identifier))),this.listArgs&&(this.content=t(`.tcb-course-list-template[data-identifier="${this.listArgs.template}"]`).html()),this.initCoursePermalinks(i),this.frontendMarkupChanges()),this}initCoursePermalinks(e){return e.on("mousedown",'.tva-course-list[data-disabled-links="1"] > .tva-course-list-item',(function(e){let i;switch(e.button){case 0:i="_self";break;case 1:i="_blank"}window.open(t(this).attr("data-permalink"),i)})),this}frontendMarkupChanges(){this.$element.find(".thrive-shortcode-content:empty").each(((e,i)=>{const r=t(i).closest("p");0===r.height()&&r.hide();const n=r.closest(".thrv_wrapper");0===n.height()&&n.hide()}))}renderPagination(){return this.pagination=this.getPaginationInstance(),this.pagination&&(tve_frontend_options.is_editor_page||this.pagination.addLoadListeners(),this.pagination.render()),this}renderSearchFormFilter(){return this.$searchForm=t(`.thrv-search-form[data-list="${this.uniqueID}"]`),this.$searchForm.length&&(this.$searchForm.find("form").submit((t=>{t.preventDefault(),this.filterCourses(t)})),this.$searchForm.find('form input[type="search"]').on("keyup",r.debounce(this.filterCourses.bind(this),300))),this}renderDropdownFilter(){return this.$dropdown=t(`.tva-course-list-dropdown[data-list="${this.uniqueID}"]`),this.$dropdown.length&&(["topics","labels","progress"].forEach((t=>{Array.isArray(this.originalQuery[t])&&this.originalQuery[t].length>0&&this.$dropdown.find(`li[data-value^="${t}_"]`).each(((e,i)=>{const r=i.getAttribute("data-value").replace(`${t}_`,"");this.originalQuery[t].includes(r)||(tve_frontend_options.is_editor_page?i.style.display="none":i.remove())}))})),this.$dropdown.on("tcb.dropdown_value_changed",(()=>this.filterCourses()))),this}filterCourses(t){if(this.query=n({},this.originalQuery),this.$searchForm.length&&(this.query.search=this.$searchForm.find('input[type="search"]').val()),this.$dropdown.length){const t=this.$dropdown.find("input").val();if(t)if(t.indexOf("_")>-1){const e=t.split("_");this.query[e[0]]=[e[1]]}else"progress-all"===t&&(this.query.progress=this.originalQuery.progress&&this.originalQuery.progress.length?[...this.originalQuery.progress.filter((t=>parseInt(t)!==this.courseProgress.noAccess))]:[this.courseProgress.notStarted,this.courseProgress.inProgress,this.courseProgress.finished])}this.listArgs.attr.paged=1,this.getItems((t=>{this.insertItems(t,!0),this.pagination&&"numeric"===this.pagination.type&&this.pagination.$element.is(":visible")&&this.refreshPaginationAfterFilter(t)}))}refreshPaginationAfterFilter(t){this.listArgs.attr.query=this.query,this.pagination.currentPage=1;const e=Math.ceil(t.total/this.listArgs.attr.posts_per_page);this.pagination.lastPage=e,this.pagination.totalPages=e,this.pagination.buttons.$last.attr("data-page",e),this.pagination.render(),this.pagination.disableLoading()}getItems(i,s=this.listArgs){0===Object.keys(this.query).length&&(this.query=n({},this.originalQuery)),t.ajax({url:tve_frontend_options.routes.courses+"/html",method:"POST",headers:{"X-WP-Nonce":tve_frontend_options.nonce},beforeSend:()=>this.$element.addClass("tve-loader-square"),data:{content:r.prepareWordfencePostContent(this.content),args:s,query:this.query,disable_links:Number(s.attr&&1===parseInt(s.attr["disabled-links"])),tva_skin_id:e.queryString.get("tva_skin_id")},success:t=>{"function"==typeof i&&i(t),e.event_triggers(this.$element),this.$element.removeClass("tve-loader-square")},error:()=>{console.warn("There was an error and the content could not be loaded.")}})}insertItems(i,r=!1){if(i.count&&i.html){const n=this.$element.clone().empty();for(const t in i.html)i.html.hasOwnProperty(t)&&n.append(i.html[t]);r?(this.$element.replaceWith(n),this.identifier.includes("tve-u-")?this.$element=t(`[data-css=${this.identifier}]`):this.$element=t(this.identifier),e.postGridLayout()):(this.$element.append(n.html()),this.masonryRedo()),this.frontendMarkupChanges(),e.progressBar&&e.progressBar.init()}this.$element.toggleClass("tva-empty-list",0===parseInt(i.count))}}return{class:s,initCourseLists:()=>{e.$document.ready((function(){setTimeout((function(){t(".tva-course-list").each(((e,i)=>{new s(t(i)).renderPagination().renderSearchFormFilter().renderDropdownFilter()}))}))}))}}}},120:function(t){var e,i;e=ThriveGlobal.$j,i=TCB_Front,t.exports={collapseClass:"tve-state-expanded",init:function(){tve_frontend_options.is_editor_page||this.frontendInit()},frontendInit:function(t){(t=t||i.$document).find(".tva-course").each(((t,i)=>{const r=e(i);r.find(".tva-course-chapter-list, .tva-course-lesson-list").wrap("<div></div>"),this.initializeEmptyContainers(r),this.bindEvents(r),this.handleStates(r)}))},bindEvents:function(t){const i=!t.attr("data-deny-collapse-module"),r=!t.attr("data-deny-collapse-chapter"),n=!!t.attr("data-autocollapse"),s=t.find(".tva-course-module-dropzone"),o=t.find(".tva-course-chapter-dropzone");i&&t.find(".tva-course-module-dropzone").click((t=>{"A"!==t.target.tagName&&(this.toggleItem(e(t.currentTarget)),n&&s.not(t.currentTarget).addClass("tve-state-expanded").siblings().slideUp())})),r&&t.find(".tva-course-chapter-dropzone").click((t=>{"A"!==t.target.tagName&&(this.toggleItem(e(t.currentTarget)),n&&(o.not(t.currentTarget).addClass("tve-state-expanded").siblings().slideUp(),i&&e(t.currentTarget).closest(".tva-course-module").length&&s.not(e(t.currentTarget).closest(".tva-course-module").find(".tva-course-module-dropzone")).addClass("tve-state-expanded").siblings().slideUp()))}))},handleStates:function(t){t.find('[data-tva-remove-state="1"]').remove()},toggleItem:function(t,e="toggleClass"){t[e](this.collapseClass).siblings()[t.hasClass(this.collapseClass)?"slideUp":"slideDown"]()},initializeEmptyContainers:function(t){const e=t.find(".tva-course-item-dropzone");e.find(".tva-course-state-content:empty")&&e.addClass("tva-empty-course-item")}}},9444:function(t){t.exports={debounce:function(t,e,i){let r;return function(){const n=this,s=arguments,o=function(){r=null,i||t.apply(n,s)},a=i&&!r;clearTimeout(r),r=setTimeout(o,e),a&&t.apply(n,s)}},prepareWordfencePostContent:function(t){return t.replace(/(<|<\/)svg/g,"$1_wafsvg_")}}}},e={};function i(r){var n=e[r];if(void 0!==n)return n.exports;var s=e[r]={exports:{}};return t[r](s,s.exports,i),s.exports}window.TCB_Front&&(TCB_Front.course=i(120),TCB_Front.certificate_verification=i(825),TCB_Front.course.init(),TCB_Front.certificate_verification.init(),void 0!==TCB_Front.PostList&&(TCB_Front.courseList=i(3467)(jQuery,TCB_Front),TCB_Front.courseList.initCourseLists()))}();
!function(l){var f={init:function(){f.render_parts(),l(document).on("user_registration_frontend_after_ajax_complete",function(){l(".ur-frontend-form").each(function(){0<l(this).find(".user-registration-form-submission-preview").length&&l(this).find(".user-registration-form-submission-preview").each(function(){l(this).remove()})})}),l(document).on("ur_handle_field_error_messages",function(r,t,i){t=($this=l(t)).find(".user-registration-multi-part-indicator");0<t.length&&""!==i&&(i=$this.find("#"+i).parent().closest(".user-registration-part").attr("class").split(/\s+/)[1].replace("user-registration-part-",""),t.attr("data-current-part",i),f.render_indicator(),f.render_parts(),f.scroll_top($this))}),l(".user-registration-multi-part-nav").on("click",function(r){r.preventDefault(),r.stopImmediatePropagation();var r=l(this),t=r.closest("form"),i=t.find(".user-registration-multi-part-indicator"),r=r.attr("data-action"),e=parseInt(i.attr("data-current-part")),a=parseInt(i.attr("data-total"));t.find(".ur-multipart-preview-loader").remove(),t.find(".user-registration-form-submission-preview").remove(),t.find(".user-registration-form-submission-preview-error").remove(),"next"===r&&e<a?f.check_form_validation(t,e)&&i.attr("data-current-part",++e):"prev"===r&&1<e&&i.attr("data-current-part",--e),f.render_indicator(),f.render_parts(),f.scroll_top(t),l(".ur-multipart-form").trigger("user_registration_multipart_part_changed",[{current_part:e,total_part:a}])})},entry_preview:function(i){i.each(function(r,t){var e=l(t),t=e.find(".user-registration-multi-part-indicator"),t=parseInt(t.attr("data-current-part")),a=(1!==t&&0===e.find(".ur-multipart-preview-loader").length&&"false"!==l(".user-registration-multi-part-previewer").attr("data-part-preview-"+t)&&e.find(".user-registration-multi-part-indicator").after('<div class="ur-multipart-preview-loader"><div class="lds-dual-ring"></div></div>'),e.serializeArray());a.push({name:"action",value:"user_registration_multipart_form_submission_preview"}),a.push({name:"security",value:user_registration_multi_part_params.user_registration_multipart_form_submission_preview_nonce}),a.push({name:"current_part",value:t}),i.find(".field-wysiwyg").each(function(){var t=l(this).find(".wysiwyg.input-text.ur-frontend-field"),r=t.get(0).tagName.toLowerCase(),i=t.get(0).className.split(" ")[0];"textarea"===r&&"wysiwyg"===i&&(tinyMCE.triggerSave(),a=a.map(r=>(r.name===t.attr("id")&&(r.value=t.val()),r)))}),l.ajax({url:user_registration_multi_part_params.ajax_url,type:"POST",data:a}).done(function(r,t,i){0!=r&&("success"===r.data.response||!0===r.success?(0!==e.has(".user-registration-form-submission-preview").length&&e.find(".user-registration-form-submission-preview").remove(),e.find(".user-registration-multi-part-indicator").after(r.data)):0===e.has(".user-registration-form-submission-preview-error").length&&e.find(".user-registration-multi-part-indicator").after('<div class="user-registration-form-submission-preview-error">'+user_registration_multi_part_params.user_registration_multipart_form_submission_preview_error+"</div>"))}).fail(function(){0===e.has(".user-registration-form-submission-preview-error").length&&e.find(".user-registration-multi-part-indicator").after('<div class="user-registration-form-submission-preview-error">'+user_registration_params.error+"</div>")}).always(function(){e.find(".ur-multipart-preview-loader").remove()})})},render_parts:function(){var p=l(".ur-frontend-form form.register");p.each(function(r,t){var t=l(t),i=t.find(".user-registration-multi-part-indicator"),e=t.find(".ur-button-container"),a=e.find("button.user-registration-multi-part-nav-next"),s=e.find("button.user-registration-multi-part-nav-prev"),n=e.find(".ur-submit-button"),e=e.find(".ur-reset-button"),o=t.find("#ur-recaptcha-node"),u=parseInt(i.attr("data-current-part")),d=parseInt(i.attr("data-total"));0!==i.length&&1!==d&&(t.find(".user-registration-part").hide(),t.find(".user-registration-part.user-registration-part-"+u).show(),a.text(a.attr("data-label-part-"+u)),s.text(s.attr("data-label-part-"+u)),1==u?(a.show(),s.hide(),n.hide(),e.hide(),o.hide()):u===d?(a.hide(),s.show(),n.show(),e.show(),o.show()):(a.show(),s.show(),n.hide(),e.hide(),o.hide()),f.entry_preview(p))})},render_indicator:function(){l(".ur-frontend-form form.register").each(function(r,t){var i=l(t).find(".user-registration-multi-part-indicator"),t=i.attr("data-indicator"),e=parseInt(i.attr("data-current-part")),a=parseInt(i.attr("data-total"));switch(t){case"progress":var s=i.find(".user-registration-progressbar-status").find(".user-registration-multi-part-indicator-title"),n=i.find(".user-registration-multi-part-indicator-steps-current"),o=i.find(".user-registration-multi-part-indicator-progress-wrap > .user-registration-multi-part-indicator-progress"),u=e/a*100+"%";s.text(s.attr("data-part-title-"+e)),n.text(e),o.css("width",u);break;case"circle":case"arrow":var d=i.find(".user-registration-multi-part--steps-list");d.find("li.user-registration-multi-part-indicator-title").removeClass("active");for(var p=0;p<e;p++)d.find("li.user-registration-multi-part-indicator-title:nth("+p+")").addClass("active")}})},scroll_top:function(r){var r=r.offset().top,t=l("html, body").scrollTop(),i=0;0!==l("#wpadminbar").length&&(i=l("#wpadminbar").height()),r<t&&l("html, body").animate({scrollTop:r-i-30},500)},check_form_validation:function(r,t){var i,e,a=r.valid();return a&&r.find(".user-registration-password-strength").length&&(e=r.find(".user-registration-password-strength").attr("data-current-strength"),i=r.find(".user-registration-password-strength").attr("data-min-strength"),parseInt(e,0)<parseInt(i,0)&&(""!==r.find("#user_pass").val()&&(e='<label id="user_pass_error" class="user-registration-error" for="user_pass">'+user_registration_params.ursL10n.password_strength_error+".</label>",r.find("#user_pass_error").remove(),r.find(".user-registration-password-hint").after(e),r.find("#user_pass").attr("aria-invalid",!0),r.find("#user_pass").trigger("focus")),a=!1)),a}};l(document).ready(function(){f.init()}),l(window).on("load",function(){f.init()})}(jQuery);
jQuery(document).ready(function(e){"use strict";jQuery(".vi-ui.tabular.menu .item").vi_tab({history:!0,historyType:"hash"});let t=!1,a=e(".wn-modal-generate-name-by-country"),n=e(".wn-all-tmpl-modal"),i=e(".wn-name-by-country-list tbody"),o=a.find(".wn-generate-name-countries").clone().removeClass(),c=faker.locales,s=e(".wn-generate-name-language");for(let r in e("#woocommerce-notification-custom-css").appendTo(document.body),c){let d=c[r];void 0!==d.name&&s.append(`<option value="${r}">${d.title}</option>`)}let l=function(){e(".wn-slider-wrapper").viwn_flexslider({namespace:"wn-slider-",selector:".wn-slider-slides .wn-slider-item",animation:"slide",animationLoop:1,itemWidth:145,itemMargin:30,controlNav:!1,maxItems:3,minItems:1,prevText:"",nextText:"",touch:!0,slideshow:!1,start:function(a){t=a,a.slides.each(function(t,n){if(e(n).find("input:checked").length>0){let i=Math.floor(t/a.move);a.flexAnimate(i)}})}})};function f(){jQuery(".remove-message").unbind(),jQuery(".remove-message").on("click",function(){confirm("Would you want to remove this message?")&&jQuery(".message-purchased tr").length>1&&jQuery(this).closest("tr").remove()})}function u(){jQuery(".generate-message").unbind(),jQuery(".generate-message").on("click",function(){if(confirm("Would you want to generate this message by AI?")){let t=e(this),a=t.parent(),n=a.find(".wrap_gen_text ul"),i=a.find("textarea"),o=a.find("input"),c,s={action:"ai_gemini_generator",type:t.data("type"),lang:t.data("language"),nonce:woocommerce_notification_admin_params.nonce};e.ajax({url:woocommerce_notification_admin_params.ajaxUrl,data:s,type:"POST",success:function(e){let t=function e(t){let a=/"(.*?)"/g,n=[],i;for(;i=a.exec(t);)n.push(i.pop());return n.length>0?n:[t]}(e.content_generator);if(1===t.length)i.text(e.content_generator),o.text(e.content_generator);else if(t.length>1){let a="";t.forEach(function(e,t){a+=`<li>${e}</li>`}),n.html(a)}},error:function(e){console.log(e)}})}return!1})}window.addEventListener("resize",function(){}),-1!==window.location.hash.indexOf("design")?l():window.onhashchange=function(){-1===window.location.hash.indexOf("design")||t||l()},e(".wn-view-all-tmpl").on("click",function(){n.modal("show",function(){e(".content",n).animate({scrollTop:jQuery(".wn-slider-item.active").position().top},250)})}),e(".wn-slider-item",n).on("click",function(){e(this).addClass("active");let a=Math.floor(e(this).index()/t.move);t.flexAnimate(a),e(n).find(".wn-slider-item").not(this).removeClass("active")}),jQuery(".vi-ui.checkbox").checkbox(),jQuery("select.vi-ui.dropdown").dropdown(),jQuery(".product-search").select2({closeOnSelect:!1,placeholder:"Please fill in your  product title",ajax:{url:"admin-ajax.php?action=wcn_search_product",dataType:"json",type:"GET",quietMillis:50,delay:250,data:function(e){return{keyword:e.term}},processResults:function(e){return{results:e}},cache:!0},escapeMarkup:function(e){return e},minimumInputLength:1}),jQuery(".product-search-parent").select2({closeOnSelect:!1,placeholder:"Please fill in your  product title",ajax:{url:"admin-ajax.php?action=wcn_search_product_parent",dataType:"json",type:"GET",quietMillis:50,delay:250,data:function(e){return{keyword:e.term}},processResults:function(e){return{results:e}},cache:!0},escapeMarkup:function(e){return e},minimumInputLength:1}),jQuery(".category-search").select2({closeOnSelect:!1,placeholder:"Please fill in your category title",ajax:{url:"admin-ajax.php?action=wcn_search_cate",dataType:"json",type:"GET",quietMillis:50,delay:250,data:function(e){return{keyword:e.term}},processResults:function(e){return{results:e}},cache:!0},escapeMarkup:function(e){return e},minimumInputLength:1}),jQuery(".wn-submit").one("click",function(){jQuery(this).addClass("loading")}),jQuery('input[type="checkbox"]').unbind().on("change",function(){jQuery(this).prop("checked")?jQuery(this).parent().find('input[type="hidden"]').val("1"):jQuery(this).parent().find('input[type="hidden"]').val("")}),jQuery(".get_from_billing").length>0&&jQuery(".get_from_billing").dependsOn({'select[name="wnotification_params[archive_page]"]':{values:["0"]}}),jQuery(".close_icon_background").length>0&&jQuery(".close_icon_background").dependsOn({'select[name="wnotification_params[close_icon_style]"]':{values:["0"]}}),jQuery(".close_icon_color_default").length>0&&jQuery(".close_icon_color_default").dependsOn({'select[name="wnotification_params[close_icon_style]"]':{values:["0"]}}),jQuery(".close_icon_color_classic").length>0&&jQuery(".close_icon_color_classic").dependsOn({'select[name="wnotification_params[close_icon_style]"]':{values:["1"]}}),jQuery(".show-close-icon").length>0&&jQuery(".show-close-icon").dependsOn({'input[name="wnotification_params[show_close_icon]"]':{checked:!0}}),jQuery(".image_border_radius").length>0&&jQuery(".image_border_radius").dependsOn({'input[name="wnotification_params[rounded_corner]"]':{checked:!1}}),jQuery(".latest-product-select-categories").length>0&&jQuery(".latest-product-select-categories").dependsOn({'select[name="wnotification_params[archive_page]"]':{values:["2","3","4"]}}),jQuery(".select-categories").length>0&&jQuery(".select-categories").dependsOn({'select[name="wnotification_params[archive_page]"]':{values:["3"]}}),jQuery(".select_product").length>0&&jQuery(".select_product").dependsOn({'select[name="wnotification_params[archive_page]"]':{values:["1","2","3","4"]}}),jQuery(".select_only_product").length>0&&jQuery(".select_only_product").dependsOn({'select[name="wnotification_params[archive_page]"]':{values:["1"]}}),jQuery(".exclude_products").length>0&&jQuery(".exclude_products").dependsOn({'select[name="wnotification_params[archive_page]"]':{values:["0"]}}),jQuery(".only_current_product").length>0&&jQuery(".only_current_product").dependsOn({'select[name="wnotification_params[notification_product_show_type]"]':{values:["0"]}}),jQuery(".virtual_address").length>0&&jQuery(".virtual_address").dependsOn({'select[name="wnotification_params[archive_page]"]':{values:["1","2","3","4"]},'select[name="wnotification_params[country]"]':{values:["1"]}}),e(".wn-name-by-country").dependsOn({'select[name="wnotification_params[country]"]':{values:["2"]}}),jQuery('select[name="wnotification_params[archive_page]').length>0&&jQuery('select[name="wnotification_params[archive_page]"]').on("change",function(){0==jQuery(this).val()?jQuery(".virtual_address").hide():jQuery('select[name="wnotification_params[country]"]').val()>0&&jQuery(".virtual_address").show()}),jQuery(".time_loop").length>0&&jQuery(".time_loop").dependsOn({'input[name="wnotification_params[loop]"]':{checked:!0}}),jQuery(".session_time_loop").length>0&&jQuery(".session_time_loop").dependsOn({'input[name="wnotification_params[loop_session]"]':{checked:!0}}),jQuery(".initial_delay_random").length>0&&jQuery(".initial_delay_random").dependsOn({'input[name="wnotification_params[initial_delay_random]"]':{checked:!0}}),jQuery(".save_logs").length>0&&jQuery(".save_logs").dependsOn({'input[name="wnotification_params[save_logs]"]':{checked:!0}}),jQuery(".color-picker").iris({change:function(e,t){jQuery(this).parent().find(".color-picker").css({backgroundColor:t.color.toString()});var a=jQuery(this).data("ele");"highlight"==a?jQuery("#message-purchased").find("a").css({color:t.color.toString()}):"textcolor"==a?jQuery(".message-purchase-main").css({color:t.color.toString()}):"close_icon_color_default"==a?jQuery("#woocommerce-notification-close-icon-color").html("#message-purchased #notify-close.default:before{color:"+t.color.toString()+"}"):"close_icon_color_classic"==a?jQuery("#woocommerce-notification-close-icon-color").html("#message-purchased #notify-close.classic:before{color:"+t.color.toString()+"}"):"close_icon_background"==a?jQuery("#message-purchased #notify-close").css({backgroundColor:t.color.toString()}):jQuery(".message-purchase-main").css({backgroundColor:t.color.toString()})},hide:!0,border:!0}).on("click",function(...e){jQuery(".iris-picker").hide(),jQuery(this).closest(".field").find(".iris-picker").show()}),jQuery("body").on("click",function(){jQuery(".iris-picker").hide()}),jQuery(".color-picker").on("click",function(e){e.stopPropagation()}),jQuery('textarea[name="wnotification_params[custom_css]"]').on("input",function(){jQuery("#woocommerce-notification-custom-css").html(e(this).val())}),jQuery('select[name="wnotification_params[position]"]').on("change",function(){var e=jQuery(this).val();1==e?jQuery("#message-purchased").removeClass("top_left top_right").addClass("bottom_right"):2==e?jQuery("#message-purchased").removeClass("bottom_right top_right").addClass("top_left"):3==e?jQuery("#message-purchased").removeClass("bottom_right top_left").addClass("top_right"):jQuery("#message-purchased").removeClass("bottom_right top_left top_right")}),jQuery('select[name="wnotification_params[image_position]"]').on("change",function(){1==jQuery(this).val()?jQuery("#message-purchased").addClass("img-right"):jQuery("#message-purchased").removeClass("img-right")}),jQuery(".vi-ui.dropdown.selection").has("optgroup").each(function(){var e=jQuery("<div/>").addClass("menu");return jQuery(this).find("optgroup").each(function(){return e.append('<div class="header">'+this.label+'</div><div class="divider"></div>'),jQuery(this).children().each(function(){return e.append('<div class="item" data-value="'+this.value+'">'+this.innerHTML+"</div>")})}),jQuery(this).find(".menu").html(e.html())}),jQuery("#message-purchased").attr("data-effect_display",""),jQuery("#message-purchased").attr("data-effect_hidden",""),jQuery('select[name="wnotification_params[message_display_effect]"]').on("change",function(){var e=jQuery(this).val(),t=jQuery("#message-purchased");switch(e){case"bounceIn":t.attr("data-effect_display","bounceIn");break;case"bounceInDown":t.attr("data-effect_display","bounceInDown");break;case"bounceInLeft":t.attr("data-effect_display","bounceInLeft");break;case"bounceInRight":t.attr("data-effect_display","bounceInRight");break;case"bounceInUp":t.attr("data-effect_display","bounceInUp");break;case"fade-in":t.attr("data-effect_display","fade-in");break;case"fadeInDown":t.attr("data-effect_display","fadeInDown");break;case"fadeInDownBig":t.attr("data-effect_display","fadeInDownBig");break;case"fadeInLeft":t.attr("data-effect_display","fadeInLeft");break;case"fadeInLeftBig":t.attr("data-effect_display","fadeInLeftBig");break;case"fadeInRight":t.attr("data-effect_display","fadeInRight");break;case"fadeInRightBig":t.attr("data-effect_display","fadeInRightBig");break;case"fadeInUp":t.attr("data-effect_display","fadeInUp");break;case"fadeInUpBig":t.attr("data-effect_display","fadeInUpBig");break;case"flipInX":t.attr("data-effect_display","flipInX");break;case"flipInY":t.attr("data-effect_display","flipInY");break;case"lightSpeedIn":t.attr("data-effect_display","lightSpeedIn");break;case"rotateIn":t.attr("data-effect_display","rotateIn");break;case"rotateInDownLeft":t.attr("data-effect_display","rotateInDownLeft");break;case"rotateInDownRight":t.attr("data-effect_display","rotateInDownRight");break;case"rotateInUpLeft":t.attr("data-effect_display","rotateInUpLeft");break;case"rotateInUpRight":t.attr("data-effect_display","rotateInUpRight");break;case"slideInUp":t.attr("data-effect_display","slideInUp");break;case"slideInDown":t.attr("data-effect_display","slideInDown");break;case"slideInLeft":t.attr("data-effect_display","slideInLeft");break;case"slideInRight":t.attr("data-effect_display","slideInRight");break;case"zoomIn":t.attr("data-effect_display","zoomIn");break;case"zoomInDown":t.attr("data-effect_display","zoomInDown");break;case"zoomInLeft":t.attr("data-effect_display","zoomInLeft");break;case"zoomInRight":t.attr("data-effect_display","zoomInRight");break;case"zoomInUp":t.attr("data-effect_display","zoomInUp");break;case"rollIn":t.attr("data-effect_display","rollIn")}}),jQuery('select[name="wnotification_params[message_hidden_effect]"]').on("change",function(){var e=jQuery(this).val(),t=jQuery("#message-purchased");switch(e){case"bounceOut":t.attr("data-effect_hidden","bounceOut");break;case"bounceOutDown":t.attr("data-effect_hidden","bounceOutDown");break;case"bounceOutLeft":t.attr("data-effect_hidden","bounceOutLeft");break;case"bounceOutRight":t.attr("data-effect_hidden","bounceOutRight");break;case"bounceOutUp":t.attr("data-effect_hidden","bounceOutUp");break;case"fade-out":t.attr("data-effect_hidden","fade-out");break;case"fadeOutDown":t.attr("data-effect_hidden","fadeOutDown");break;case"fadeOutDownBig":t.attr("data-effect_hidden","fadeOutDownBig");break;case"fadeOutLeft":t.attr("data-effect_hidden","fadeOutLeft");break;case"fadeOutLeftBig":t.attr("data-effect_hidden","fadeOutLeftBig");break;case"fadeOutRight":t.attr("data-effect_hidden","fadeOutRight");break;case"fadeOutRightBig":t.attr("data-effect_hidden","fadeOutRightBig");break;case"fadeOutUp":t.attr("data-effect_hidden","fadeOutUp");break;case"fadeOutUpBig":t.attr("data-effect_hidden","fadeOutUpBig");break;case"flipOutX":t.attr("data-effect_hidden","flipOutX");break;case"flipOutY":t.attr("data-effect_hidden","flipOutY");break;case"lightSpeedOut":t.attr("data-effect_hidden","lightSpeedOut");break;case"rotateOut":t.attr("data-effect_hidden","rotateOut");break;case"rotateOutDownLeft":t.attr("data-effect_hidden","rotateOutDownLeft");break;case"rotateOutDownRight":t.attr("data-effect_hidden","rotateOutDownRight");break;case"rotateOutUpLeft":t.attr("data-effect_hidden","rotateOutUpLeft");break;case"rotateOutUpRight":t.attr("data-effect_hidden","rotateOutUpRight");break;case"slideOutUp":t.attr("data-effect_hidden","slideOutUp");break;case"slideOutDown":t.attr("data-effect_hidden","slideOutDown");break;case"slideOutLeft":t.attr("data-effect_hidden","slideOutLeft");break;case"slideOutRight":t.attr("data-effect_hidden","slideOutRight");break;case"zoomOut":t.attr("data-effect_hidden","zoomOut");break;case"zoomOutDown":t.attr("data-effect_hidden","zoomOutDown");break;case"zoomOutLeft":t.attr("data-effect_hidden","zoomOutLeft");break;case"zoomOutRight":t.attr("data-effect_hidden","zoomOutRight");break;case"zoomOutUp":t.attr("data-effect_hidden","zoomOutUp");break;case"rollOut":t.attr("data-effect_hidden","rollOut")}}),jQuery(".add-message").on("click",function(){var e=jQuery(".message-purchased").find("tr").last().clone();jQuery(e).appendTo(".message-purchased"),f(),u()}),f(),u(),jQuery('input[name="wnotification_params[border_radius]"]').on("change",function(){jQuery(".message-purchase-main").css({"border-radius":jQuery(this).val()+"px"})}),jQuery('input[name="wnotification_params[image_border_radius]"]').on("change",function(){jQuery(".wn-notification-image").css({"border-radius":jQuery(this).val()+"px"})}),jQuery('input[name="wnotification_params[image_padding]"]').on("change",function(){var e=parseInt(jQuery(this).val()),t=15-e;jQuery(".wn-notification-image-wrapper").css({padding:e+"px"}),jQuery("body").hasClass("rtl")?jQuery(".wn-notification-message-container").css({"padding-right":t+"px"}):jQuery(".wn-notification-message-container").css({"padding-left":t+"px"})}),jQuery('input[name^="wnotification_params[background_image"]').on("change",function(){var t=jQuery(this).val(),a=t;-1!==a.indexOf("_v")&&(a=a.slice(0,-3));var i={black:{hightlight:"#fff",text:"#fff"},red:{hightlight:"#fff",text:"#fff"},pink:{hightlight:"#fff",text:"#fff"},yellow:{hightlight:"#000",text:"#000"},violet:{hightlight:"#fff",text:"#fff"},blue:{hightlight:"#fff",text:"#fff"},spring:{hightlight:"#fff",text:"#fff"},grey:{hightlight:"#000",text:"#000"},autumn:{hightlight:"#fff",text:"#fff"},orange:{hightlight:"#fff",text:"#fff"},summer:{hightlight:"#fff",text:"#fff"},winter:{hightlight:"#3c8b90",text:"#3c8b90"},black_friday:{hightlight:"#fff",text:"#fff"},new_year:{hightlight:"#fff",text:"#fff"},valentine:{hightlight:"#fff",text:"#fff"},halloween:{hightlight:"#fff",text:"#fff"},kids:{hightlight:"#fff",text:"#fff"},father_day:{hightlight:"#fff",text:"#fff"},mother_day:{hightlight:"#fff",text:"#fff"},shoes:{hightlight:"#fff",text:"#fff"},t_shirt:{hightlight:"#fff",text:"#fff"},christmas:{hightlight:"#6bbeaa",text:"#6bbeaa"}};if(0==parseInt(a))jQuery("#message-purchased").removeClass("wn-extended"),jQuery(".message-purchase-main").css({color:"#212121","background-color":"#fff"}),jQuery('input[name="wnotification_params[highlight_color]"]').val("#212121").trigger("change"),jQuery('input[name="wnotification_params[text_color]"]').val("#212121").trigger("change"),jQuery('input[name="wnotification_params[close_icon_color_classic]"]').val("#212121").trigger("change"),jQuery('input[name="wnotification_params[backgroundcolor]"]').val("#ffffff").trigger("change");else{jQuery("#message-purchased").addClass("wn-extended"),jQuery("#woocommerce-notification-background-image").html("#message-purchased .message-purchase-main::before {background-image: url(../wp-content/plugins/woocommerce-notification/images/background/bg_"+t+".png);"),jQuery('input[name="wnotification_params[highlight_color]"]').val(i[a].hightlight).trigger("change"),jQuery('input[name="wnotification_params[text_color]"]').val(i[a].text).trigger("change");let o=jQuery('input[name="wnotification_params[background_color]"]');o.val(o.attr("value")).trigger("change")}e(n).find('.wn-slider-item:has(label[for="background_image_'+t+'"])').trigger("click")});let h=e(".wn-rounded-conner-depending");e('input[name="wnotification_params[rounded_corner]"]').prop("checked")?h.hide():h.show(),e('input[name="wnotification_params[rounded_corner]"]').on("change",function(){let t=e(".wn-rounded-conner-depending"),a=e("#message-purchased");e(this).prop("checked")?(a.addClass("wn-rounded-corner"),t.hide()):(a.removeClass("wn-rounded-corner"),t.show())});let p=e("#notify-close");e('input[name="wnotification_params[show_close_icon]"]').prop("checked")?p.show():p.hide(),e('input[name="wnotification_params[show_close_icon]"]').on("change",function(){e(this).prop("checked")?p.show():p.hide()}),e('select[name="wnotification_params[close_icon_style]"]').on("change",function(){let t=e(this).val(),a;switch(t){case"0":e(p).removeClass().addClass("default"),a=e('input[name="wnotification_params[close_icon_color_default]"]').val(),jQuery("#woocommerce-notification-close-icon-color").html("#message-purchased #notify-close.default:before{color:"+a+"}");break;case"1":e(p).removeClass().addClass("classic"),a=e('input[name="wnotification_params[close_icon_color_classic]"]').val(),jQuery("#woocommerce-notification-close-icon-color").html("#message-purchased #notify-close.classic:before{color:"+a+"}")}}).trigger("change"),e('input[name="wnotification_params[preview_rating]"]').on("change",function(){let t=e(".wn-notification-star-rating");e(this).prop("checked")?t.show():t.hide()}).trigger("change"),e('input[name="wnotification_params[preview_atc]"]').on("change",function(){let t=e(".wn-notification-atc");e(this).prop("checked")?t.show():t.hide()}).trigger("change"),jQuery(".villatheme-get-key-button").one("click",function(e){var t,a=jQuery(this);a.addClass("loading");var n=a.data(),i=n.id,o=n.href,c=window.location.hostname;c=c.toLowerCase(),e.preventDefault(),a.attr("data-download"),t=window.open(o,"myWindow","width=380,height=600"),window.addEventListener("message",function(e){var t=jQuery.parseJSON(e.data),n="",o=t.message,s="",r="";if(t.data.length>0){for(var d=0;d<t.data.length;d++)if(t.data[d].id==i&&(t.data[d].domain==c||""==t.data[d].domain||null==t.data[d].domain)&&(""==n?(n=t.data[d].download_key,s=t.data[d].support_until):s<t.data[d].support_until&&(n=t.data[d].download_key,s=t.data[d].support_until),t.data[d].domain==c)){n=t.data[d].download_key;break}n&&(r=1,jQuery(".villatheme-autoupdate-key-field").val(n))}a.removeClass("loading"),r?(jQuery("<p><strong>"+o+"</strong></p>").insertAfter(".villatheme-autoupdate-key-field"),jQuery(a).closest("form").submit()):jQuery("<p><strong> Your key is not found. Please contact support@villatheme.com </strong></p>").insertAfter(".villatheme-autoupdate-key-field")})}),e("body").on("click",".wn-name-by-country-remove",function(){e(this).closest(".wn-name-by-country-row").remove()}).on("click",".wn-add-name-by-country",function(){a.modal("show")}),e(".wn-do-generate").on("click",function(){let t=a.find(".wn-generate-name-quantity").val(),n=a.find(".wn-generate-name-gender").dropdown("get value"),c=a.find(".wn-generate-name-countries").dropdown("get value"),s=a.find(".wn-generate-name-language").dropdown("get value");if(!t)return;let r=[];faker.locale=s;for(let d=0;d<t;d++)r.push(faker.name.firstName(n));r=r.join("\n");let l=Date.now(),f=e(`<tr class="wn-name-by-country-row">
                        <td><textarea rows="3" name="wnotification_params[name_by_country][${l}][names]">${r}</textarea></td>
                        <td>
                            <select class="wn-name-by-country-row-countries vi-ui dropdown fluid" name="wnotification_params[name_by_country][${l}][countries][]" multiple>
                                ${o.html()}
                            </select>
                        </td>
                        <td><span class="vi-ui icon button mini red wn-name-by-country-remove"><i class="icon x"> </i></span></td>
                    </tr>`);f.find(".wn-name-by-country-row-countries").dropdown("set selected",c),i.append(f)})});
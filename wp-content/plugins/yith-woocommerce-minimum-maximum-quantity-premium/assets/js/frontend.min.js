jQuery(function(o){ywmmq.variations&&o(document).on("found_variation",function(t,i){var a,n,s,e,r,m,t=ywmmq.yith_eop?(a=o(t.target).parent().parent(),n=parseInt(a.data("id"))||parseInt(o(t.target).data("id")),parseInt(i.variation_id)):(n=parseInt(o('.single_variation_wrap .product_id, .single_variation_wrap input[name="product_id"]').val()),parseInt(o('.single_variation_wrap .variation_id, .single_variation_wrap input[name="variation_id"]').val()));isNaN(n)||isNaN(t)||(i=n,n=t,s=a,e=o(".ywmmq-rules-wrapper"),r=o(".single_variation_wrap"),m=o(".add-request-quote-button"),r.is(".processing"))||(r.addClass("processing"),m.addClass("disabled"),r.block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),o.ajax({type:"POST",url:ywmmq.ajax_url,data:{action:"ywmmq_get_rules",product_id:i,variation_id:n},success:function(t){var i;"success"===t.status?(i=ywmmq.yith_eop?s.find(".yith-wceop-quantity-controls__qty"):(e.html(t.rules),o('.single_variation_wrap .quantity input[name="quantity"]')),0!==parseInt(t.limits.max)?i.attr("max",t.limits.max):i.removeAttr("max"),0!==parseInt(t.limits.min)?i.attr("min",t.limits.min).val(t.limits.min):i.attr("min",1).val(1),0!==parseInt(t.limits.step)?i.attr("step",t.limits.step):i.attr("step",1).val(1),o(document).trigger("ywmmq_additional_operations",[t.limits.min])):e.html(),r.removeClass("processing").unblock(),m.removeClass("disabled")},dataType:"json"}))}),o(document).on("yith_wcpb_found_variation_after",function(t,i,a){if(i.is(".processing"))return!1;i.addClass("processing"),i.block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),o.ajax({type:"POST",url:ywmmq.ajax_url,data:{action:"ywmmq_get_rules",product_id:i.data("product_id"),variation_id:i.find(".variation_id").val()},success:function(t){"success"===t.status&&(0!==parseInt(t.limits.max)?i.find(".yith-wcpb-bundled-quantity").attr("max",t.limits.max):i.find(".yith-wcpb-bundled-quantity").removeAttr("max"),0!==parseInt(t.limits.min)?i.find(".yith-wcpb-bundled-quantity").attr("min",t.limits.min).val(t.limits.min):i.find(".yith-wcpb-bundled-quantity").attr("min",1).val(1),0!==parseInt(t.limits.step)?i.find(".yith-wcpb-bundled-quantity").attr("step",t.limits.step):i.find(".yith-wcpb-bundled-quantity").attr("step",1).val(1)),i.removeClass("processing").unblock()},dataType:"json"})})});
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-45e8cbbe"],{"498a":function(t,e,s){"use strict";var a=s("23e7"),o=s("58a8").trim,i=s("c8d2");a({target:"String",proto:!0,forced:i("trim")},{trim:function(){return o(this)}})},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,s){var a=s("e330"),o=s("1d80"),i=s("577e"),n=s("5899"),r=a("".replace),c="["+n+"]",l=RegExp("^"+c+c+"*"),p=RegExp(c+c+"*$"),u=function(t){return function(e){var s=i(o(e));return 1&t&&(s=r(s,l,"")),2&t&&(s=r(s,p,"")),s}};t.exports={start:u(1),end:u(2),trim:u(3)}},a15b:function(t,e,s){"use strict";var a=s("23e7"),o=s("e330"),i=s("44ad"),n=s("fc6a"),r=s("a640"),c=o([].join),l=i!=Object,p=r("join",",");a({target:"Array",proto:!0,forced:l||!p},{join:function(t){return c(n(this),void 0===t?",":t)}})},a434:function(t,e,s){"use strict";var a=s("23e7"),o=s("da84"),i=s("23cb"),n=s("5926"),r=s("07fa"),c=s("7b0b"),l=s("65f0"),p=s("8418"),u=s("1dde"),m=u("splice"),d=o.TypeError,v=Math.max,f=Math.min,_=9007199254740991,b="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!m},{splice:function(t,e){var s,a,o,u,m,g,h=c(this),w=r(h),y=i(t,w),C=arguments.length;if(0===C?s=a=0:1===C?(s=0,a=w-y):(s=C-2,a=f(v(n(e),0),w-y)),w+s-a>_)throw d(b);for(o=l(h,a),u=0;u<a;u++)m=y+u,m in h&&p(o,u,h[m]);if(o.length=a,s<a){for(u=y;u<w-a;u++)m=u+a,g=u+s,m in h?h[g]=h[m]:delete h[g];for(u=w;u>w-a+s;u--)delete h[u-1]}else if(s>a)for(u=w-a;u>y;u--)m=u+a-1,g=u+s-1,m in h?h[g]=h[m]:delete h[g];for(u=0;u<s;u++)h[u+y]=arguments[u+2];return h.length=w-a+s,o}})},c8d2:function(t,e,s){var a=s("5e77").PROPER,o=s("d039"),i=s("5899"),n="​᠎";t.exports=function(t){return o((function(){return!!i[t]()||n[t]()!==n||a&&i[t].name!==t}))}},f654:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wbs-content"},[s("div",{staticClass:"wbs-main"},[t.isLoaded?s("table",{staticClass:"wbs-form-table"},[s("tbody",[s("tr",[s("th",{staticClass:"row w8em"},[t._v("显示名称")]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.opt.name,expression:"opt.name"}],staticClass:"wbs-input",domProps:{value:t.opt.name},on:{input:function(e){e.target.composing||t.$set(t.opt,"name",e.target.value)}}})])])]),t.cnf.multiple?s("tbody",t._l(t.opt.data,(function(e,a){return s("tr",{key:a},[s("th",[t._v(" "+t._s(t.cnf.title+" "+(a+1))+" ")]),s("td",[t._l(Object.keys(e),(function(o){return s("div",{key:o},["img"==o?s("wbs-upload-box",{attrs:{url:e[o]},on:{"get-file":function(t){e[o]=t}}}):t._e(),"img"!=o?s("input",{directives:[{name:"model",rawName:"v-model",value:e[o],expression:"r[key]"}],staticClass:"wbs-input mt",attrs:{placeholder:"label"==o?"备注":t.cnf.title+" "+(a+1)},domProps:{value:e[o]},on:{input:function(s){s.target.composing||t.$set(e,o,s.target.value)}}}):t._e()],1)})),t.opt.data.length>1?s("div",{staticClass:"mt align-right",staticStyle:{position:"relative"}},[s("span",{staticClass:"link",staticStyle:{position:"absolute",right:"-20px",bottom:"10px"},on:{click:function(e){return t.removeItem(a)}}},[s("i",{staticClass:"el-icon-delete"})])]):t._e()],2)])})),0):t._e(),t.cnf.form_fields?s("tbody",[s("tr",[s("th",[t._v("咨询类型")]),s("td",[s("wbs-tags-module",{attrs:{tags:t._f("join")(t.opt.subject_type)},on:{"set-tags":function(e){t.opt.subject_type=e.split(",")}}})],1)]),s("tr",[s("th",[t._v("联系方式")]),s("td",[s("ul",t._l(t.cnf.form_contact_way,(function(e,a){return s("li",{key:a,staticClass:"mt"},[s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.opt.form_contact_ways,expression:"opt.form_contact_ways"}],attrs:{type:"checkbox"},domProps:{value:a,checked:Array.isArray(t.opt.form_contact_ways)?t._i(t.opt.form_contact_ways,a)>-1:t.opt.form_contact_ways},on:{change:function(e){var s=t.opt.form_contact_ways,o=e.target,i=!!o.checked;if(Array.isArray(s)){var n=a,r=t._i(s,n);o.checked?r<0&&t.$set(t.opt,"form_contact_ways",s.concat([n])):r>-1&&t.$set(t.opt,"form_contact_ways",s.slice(0,r).concat(s.slice(r+1)))}else t.$set(t.opt,"form_contact_ways",i)}}}),s("span",[t._v(t._s(e))])])])})),0),s("div",{staticClass:"description mt"},[t._v("* 请至少选择一种联系方式")])])]),s("tr",[s("th",[t._v("提交成功提示语")]),s("td",{staticClass:"info"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.opt.auto_reply_msg,expression:"opt.auto_reply_msg"}],staticClass:"wbs-input",attrs:{placeholder:"输入自动回复的内容。",rows:"2"},domProps:{value:t.opt.auto_reply_msg},on:{input:function(e){e.target.composing||t.$set(t.opt,"auto_reply_msg",e.target.value)}}})])])]):t._e(),t.opt.captcha?s("tbody",[s("tr",[s("th",[t._v("验证码方式")]),s("td",[s("div",{staticClass:"selector-bar"},[s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.opt.captcha.type,expression:"opt.captcha.type"}],attrs:{type:"radio",value:"none"},domProps:{checked:t._q(t.opt.captcha.type,"none")},on:{change:function(e){return t.$set(t.opt.captcha,"type","none")}}}),s("span",[t._v("无")])]),s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.opt.captcha.type,expression:"opt.captcha.type"}],attrs:{type:"radio",value:"base"},domProps:{checked:t._q(t.opt.captcha.type,"base")},on:{change:function(e){return t.$set(t.opt.captcha,"type","base")}}}),s("span",[t._v("一般验证码")])]),s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.opt.captcha.type,expression:"opt.captcha.type"}],attrs:{type:"radio",value:"google"},domProps:{checked:t._q(t.opt.captcha.type,"google")},on:{change:function(e){return t.$set(t.opt.captcha,"type","google")}}}),s("span",[t._v("谷歌reCAPTCHA v3")])])]),"google"==t.opt.captcha.type?s("div",{staticClass:"with-sub-form-table mt"},[s("table",{staticClass:"wbs-form-table-sub"},[s("tr",[s("th",{staticClass:"w8em"},[t._v("网站秘钥")]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.opt.captcha.google.public,expression:"opt.captcha.google.public"}],staticClass:"wbs-input",attrs:{type:"text"},domProps:{value:t.opt.captcha.google.public},on:{input:function(e){e.target.composing||t.$set(t.opt.captcha.google,"public",e.target.value)}}})])]),s("tr",[s("th",[t._v("通讯秘钥")]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.opt.captcha.google.private,expression:"opt.captcha.google.private"}],staticClass:"wbs-input",attrs:{type:"text"},domProps:{value:t.opt.captcha.google.private},on:{input:function(e){e.target.composing||t.$set(t.opt.captcha.google,"private",e.target.value)}}})])]),s("tr",[s("th",[t._v("分数阈值")]),s("td",{staticClass:"info"},[s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.opt.captcha.google.score,expression:"opt.captcha.google.score"}],staticClass:"ib",attrs:{type:"range",step:".1",max:"1",min:"0.1"},domProps:{value:t.opt.captcha.google.score},on:{__r:function(e){return t.$set(t.opt.captcha.google,"score",e.target.value)}}}),s("span",{staticClass:"ib wbs-range-val ml"},[t._v(t._s(t.opt.captcha.google.score))])])])])])]):t._e(),"google"==t.opt.captcha.type?s("div",{staticClass:"description mt"},[t._v(" 注：要启用谷歌reCAPTCHA验证注册，请参照"),s("a",{attrs:{href:"https://www.wbolt.com/how-to-setup-google-recaptcha-v3-recaptcha.html",target:"_blank"}},[t._v("谷歌reCAPTCHA v3申请及配置教程")]),t._v("。 ")]):t._e()])])]):t._e(),t.opt.notice?s("tbody",[s("tr",[s("th",[t._v("留言通知")]),s("td",[s("div",{staticClass:"selector-bar"},[s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.opt.notice,expression:"opt.notice"}],attrs:{type:"checkbox",value:"mail"},domProps:{checked:Array.isArray(t.opt.notice)?t._i(t.opt.notice,"mail")>-1:t.opt.notice},on:{change:function(e){var s=t.opt.notice,a=e.target,o=!!a.checked;if(Array.isArray(s)){var i="mail",n=t._i(s,i);a.checked?n<0&&t.$set(t.opt,"notice",s.concat([i])):n>-1&&t.$set(t.opt,"notice",s.slice(0,n).concat(s.slice(n+1)))}else t.$set(t.opt,"notice",o)}}}),s("span",[t._v("邮件通知")])]),s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.opt.notice,expression:"opt.notice"}],attrs:{type:"checkbox",value:"sms"},domProps:{checked:Array.isArray(t.opt.notice)?t._i(t.opt.notice,"sms")>-1:t.opt.notice},on:{change:function(e){var s=t.opt.notice,a=e.target,o=!!a.checked;if(Array.isArray(s)){var i="sms",n=t._i(s,i);a.checked?n<0&&t.$set(t.opt,"notice",s.concat([i])):n>-1&&t.$set(t.opt,"notice",s.slice(0,n).concat(s.slice(n+1)))}else t.$set(t.opt,"notice",o)}}}),s("span",[t._v("短信通知")])])]),t.opt.notice.length?s("NoticeOptions",{attrs:{opt:t.opt,cnf:t.cnf}}):t._e()],1)])]):t._e()]):t._e(),t.cnf.multiple&&t.opt.data.length<t.maxItem?s("div",{staticClass:"align-right"},[s("el-button",{attrs:{plain:"",size:"mini",icon:"el-icon-circle-plus"},on:{click:t.pushItem}},[t._v("添加")])],1):t._e()]),t.isPro?t._e():s("wbs-more-sources"),s("div",{staticClass:"wbs-footer"},[s("div",{staticClass:"wbsf-inner"},[s("router-link",{staticClass:"wbs-btn-reset",attrs:{to:"/setting-base"}},[t._v("取消")]),s("button",{staticClass:"wbs-btn-primary",attrs:{type:"button"},on:{click:function(e){return t.updateData()}}},[t._v(" 保存 ")])],1)])],1)},o=[],i=(s("4160"),s("d3b7"),s("159b"),s("b64b"),s("e9c4"),s("b0c0"),s("ac1f"),s("1276"),s("a15b"),s("a434"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{staticClass:"wb-tags-ctrl"},[t.taglist.length?s("div",{staticClass:"tag-items"},t._l(t.taglist,(function(e,a){return s("div",{key:a,staticClass:"tag-item"},[s("span",{staticClass:"vam ib",domProps:{innerHTML:t._s(t.displayFormat(e))}}),s("a",{staticClass:"del",attrs:{"data-del-val":e},on:{click:function(e){return t.delItem(a)}}})])})),0):t._e(),s("input",{directives:[{name:"model",rawName:"v-model",value:t.cur_input,expression:"cur_input"}],staticClass:"wb-tag-input",attrs:{type:"text",placeholder:"输入选项值, 回车确认 *"},domProps:{value:t.cur_input},on:{keyup:t.wbTagInput,input:function(e){e.target.composing||(t.cur_input=e.target.value)}}})])}),n=[],r=(s("c975"),s("498a"),{name:"wbsTags",props:{tags:String,format:String},data:function(){return{cur_input:"",taglist:[],keycode:null}},created:function(){this.taglist=this.tags?this.tags.split(","):[]},methods:{wbTagInput:function(t){var e=this,s=t.keyCode;13===s&&e.wbTagPush()},wbTagPush:function(t){var e=this;return""!=e.cur_input&&(e.taglist.indexOf(e.cur_input.trim())>-1?(e.$wbui.toast("已存在"),e.cur_input="",!1):(e.taglist.push(e.cur_input),e.$emit("set-tags",e.taglist.join(",")),e.cur_input="",!1))},delItem:function(t){var e=this;e.$wbui.confirm("确认删除该选项？",(function(){e.taglist.splice(t,1),e.$emit("set-tags",e.taglist.join(",")),e.$wbui.toast("已移除")}))},displayFormat:function(t){var e=t.split(":");return e.length>1?e[1]+'<em class="wk">(别名:'+e[0]+")</em>":t}}}),c=r,l=s("2877"),p=Object(l["a"])(c,i,n,!1,null,null,null),u=p.exports,m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-tabs",{staticClass:"mt",attrs:{type:"border-card"}},[t.opt.notice.indexOf("mail")>-1?s("el-tab-pane",{attrs:{label:"邮局设置"}},[t.$cnf.use_theme_mail?s("table",{staticClass:"wbs-form-table-sub"},[s("tbody",[s("tr",[s("th",{staticClass:"w8em row"},[t._v("通知邮箱")]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.opt.mail.to,expression:"opt.mail.to",modifiers:{trim:!0}}],staticClass:"wbs-input wbs-input-short",domProps:{value:t.opt.mail.to},on:{input:function(e){e.target.composing||t.$set(t.opt.mail,"to",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),s("p",{staticClass:"description"},[t._v("* 多个邮箱用英文逗号(,)分隔")])])]),s("tr",[s("th",{staticClass:"w8em row"},[t._v("邮件服务")]),s("td",[t._v(" 检测到当前正在使用闪电博主题，将使用主题邮件服务设置。 ")])])])]):s("table",{staticClass:"wbs-form-table-sub"},[s("tbody",[s("tr",[s("th",{staticClass:"w8em row"},[t._v("通知邮箱")]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.opt.mail.to,expression:"opt.mail.to",modifiers:{trim:!0}}],staticClass:"wbs-input wbs-input-short",domProps:{value:t.opt.mail.to},on:{input:function(e){e.target.composing||t.$set(t.opt.mail,"to",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),s("p",{staticClass:"description"},[t._v("* 多个邮箱用英文逗号(,)分隔")])])]),s("tr",[s("th",{staticClass:"w8em row"},[t._v("发件邮箱")]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.opt.mail.from,expression:"opt.mail.from",modifiers:{trim:!0}}],staticClass:"wbs-input wbs-input-short",domProps:{value:t.opt.mail.from},on:{input:function(e){e.target.composing||t.$set(t.opt.mail,"from",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),s("p",{staticClass:"description"},[t._v(" * 如果启用SMTP邮局，发件邮箱必须与SMTP邮局邮箱保持一致。 ")])])]),s("tr",[s("th",{staticClass:"row"},[t._v("发件人名称")]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.opt.mail.name,expression:"opt.mail.name",modifiers:{trim:!0}}],staticClass:"wbs-input wbs-input-short",domProps:{value:t.opt.mail.name},on:{input:function(e){e.target.composing||t.$set(t.opt.mail,"name",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),s("tr",[s("th",{staticClass:"row"},[t._v("邮件程序")]),s("td",[s("div",{staticClass:"selector-bar info"},t._l(t.opt.mail.proc,(function(e,a){return s("label",{key:a},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.opt.mail.mailer,expression:"opt.mail.mailer"}],attrs:{type:"radio"},domProps:{value:a,checked:t._q(t.opt.mail.mailer,a)},on:{change:function(e){return t.$set(t.opt.mail,"mailer",a)}}}),t._v(t._s(e.name))])})),0),s("div",{staticClass:"description"},[t._v(" *由于大部分国内服务器禁用了邮局端口，无法通过WP默认邮局发信。建议使用QQ、163或者其他SMTP邮局执行WP发信任务。"),s("a",{attrs:{href:"https://www.wbolt.com/how-to-set-smtp-email.html",target:"_blank"}},[t._v("查看SMTP邮局设置教程")])])])]),t.opt.mail.mailer>0?s("tr",[s("th",{staticClass:"row"},[t._v("SMTP配置")]),s("td",t._l(t.opt.mail.proc,(function(e,a){return s("dl",{directives:[{name:"show",rawName:"v-show",value:t.opt.mail.mailer==a,expression:"opt.mail.mailer == key"}],key:a,staticClass:"info"},[s("dt",{staticClass:"sb-hd"},[t._v("SMTP服务器")]),s("dd",[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.host,expression:"item.host",modifiers:{trim:!0}}],staticClass:"wbs-input wbs-input-short",domProps:{value:e.host},on:{input:function(s){s.target.composing||t.$set(e,"host",s.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),s("dt",{staticClass:"sb-hd mt"},[t._v("加密方式")]),s("dd",{staticClass:"selector-bar"},[s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.secure,expression:"item.secure"}],attrs:{type:"radio",value:""},domProps:{checked:t._q(e.secure,"")},on:{change:[function(s){return t.$set(e,"secure","")},t.setMailSecure]}}),t._v("无")]),s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.secure,expression:"item.secure"}],attrs:{type:"radio",value:"ssl"},domProps:{checked:t._q(e.secure,"ssl")},on:{change:[function(s){return t.$set(e,"secure","ssl")},t.setMailSecure]}}),t._v("SSL")]),s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.secure,expression:"item.secure"}],attrs:{type:"radio",value:"tls"},domProps:{checked:t._q(e.secure,"tls")},on:{change:[function(s){return t.$set(e,"secure","tls")},t.setMailSecure]}}),t._v("TLS")])]),s("dt",{staticClass:"sb-hd mt"},[t._v("端口")]),s("dd",[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.port,expression:"item.port",modifiers:{trim:!0}}],staticClass:"wbs-input wbs-input-short",domProps:{value:e.port},on:{input:function(s){s.target.composing||t.$set(e,"port",s.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),s("dt",{staticClass:"sb-hd mt"},[t._v("SMTP用户名")]),s("dd",[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.user,expression:"item.user",modifiers:{trim:!0}}],staticClass:"wbs-input wbs-input-short",domProps:{value:e.user},on:{input:function(s){s.target.composing||t.$set(e,"user",s.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),s("dt",{staticClass:"sb-hd mt"},[t._v("SMTP密码/授权码")]),s("dd",[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.password,expression:"item.password",modifiers:{trim:!0}}],staticClass:"wbs-input wbs-input-short",domProps:{value:e.password},on:{input:function(s){s.target.composing||t.$set(e,"password",s.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])])})),0)]):t._e(),s("tr",[s("th",{staticClass:"row"},[t._v("发送测试邮件")]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.mail_test.to,expression:"mail_test.to",modifiers:{trim:!0}}],staticClass:"wbs-input wbs-input-short fl",attrs:{placeholder:"收件人"},domProps:{value:t.mail_test.to},on:{input:function(e){e.target.composing||t.$set(t.mail_test,"to",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),s("button",{staticClass:"wbs-btn-primary",attrs:{type:"button"},on:{click:function(e){return t.mail_test_send()}}},[t._v(" 发送 ")]),s("div",{staticClass:"description mt"},[t._v(" * 测试邮件收件人必须与发件人邮箱地址保持一致，否则测试邮件将会发送失败。 ")])])])])])]):t._e(),t.opt.notice.indexOf("sms")>-1?s("el-tab-pane",{attrs:{label:"短信设置"}},[s("table",{staticClass:"wbs-form-table-sub"},[s("tbody",[s("tr",[s("th",{staticClass:"row w8em"},[t._v("通知手机号")]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.opt.sms.to,expression:"opt.sms.to",modifiers:{trim:!0}}],staticClass:"wbs-input wbs-input-short",domProps:{value:t.opt.sms.to},on:{input:function(e){e.target.composing||t.$set(t.opt.sms,"to",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),s("p",{staticClass:"description"},[t._v("* 多个手机用英文逗号(,)分隔")])])]),s("tr",[s("th",{staticClass:"row w8em"},[t._v("服务商")]),s("td",[s("div",{staticClass:"selector-bar"},[s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.opt.sms.vendor,expression:"opt.sms.vendor"}],attrs:{type:"radio",value:"upyun"},domProps:{checked:t._q(t.opt.sms.vendor,"upyun")},on:{click:t.setSmsVendor,change:function(e){return t.$set(t.opt.sms,"vendor","upyun")}}}),s("span",[t._v("又拍云")])]),s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.opt.sms.vendor,expression:"opt.sms.vendor"}],attrs:{type:"radio",value:"aliyun"},domProps:{checked:t._q(t.opt.sms.vendor,"aliyun")},on:{click:t.setSmsVendor,change:function(e){return t.$set(t.opt.sms,"vendor","aliyun")}}}),s("span",[t._v("阿里云")])])])])]),s("tr",[s("th",[t._v("参数")]),s("td",["upyun"==t.opt.sms.vendor?s("div",{staticClass:"with-sub-form-table"},[s("table",{staticClass:"wbs-form-table-sub"},[s("tr",[s("th",{staticClass:"w8em"},[t._v("账号ID")]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.opt.sms.upyun.id,expression:"opt.sms.upyun.id"}],staticClass:"wbs-input",attrs:{type:"text"},domProps:{value:t.opt.sms.upyun.id},on:{input:function(e){e.target.composing||t.$set(t.opt.sms.upyun,"id",e.target.value)}}})])]),s("tr",[s("th",[t._v("Token")]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.opt.sms.upyun.secret,expression:"opt.sms.upyun.secret"}],staticClass:"wbs-input",attrs:{type:"text"},domProps:{value:t.opt.sms.upyun.secret},on:{input:function(e){e.target.composing||t.$set(t.opt.sms.upyun,"secret",e.target.value)}}})])]),s("tr",[s("th",[t._v("模板编号")]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.opt.sms.upyun.tpl,expression:"opt.sms.upyun.tpl"}],staticClass:"wbs-input",attrs:{type:"text"},domProps:{value:t.opt.sms.upyun.tpl},on:{input:function(e){e.target.composing||t.$set(t.opt.sms.upyun,"tpl",e.target.value)}}})])]),s("tr",[s("th",[t._v("短信类型")]),s("td",{staticClass:"info description"},[t._v("行业短信-通用")])]),s("tr",[s("th",[t._v("模板名称")]),s("td",{staticClass:"info description"},[t._v("自定义命名")])]),s("tr",[s("th",[t._v("短信内容")]),s("td",{staticClass:"info description"},[t._v(" 自定义。模板文本变量{$var1}。例如：收到{$var1}的留言。 ")])]),s("tr",[s("th",[t._v("签名")]),s("td",{staticClass:"info description"},[t._v("签名")])]),s("tr",[s("th",[t._v("测试短信")]),s("td",[s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.test_mobile,expression:"test_mobile"}],staticClass:"wbs-input wbs-input-short fl",attrs:{type:"tel",placeholder:"输入手机号",maxlength:"11"},domProps:{value:t.test_mobile},on:{change:t.validate_phone,input:function(e){e.target.composing||(t.test_mobile=e.target.value)}}}),s("button",{staticClass:"wbs-btn-primary",on:{click:t.send_sms}},[t._v(" 发送 ")]),t.test_result?s("div",{staticClass:"description mt"},[t._v(" 测试短信返回结果："+t._s(t.test_result)+" ")]):t._e()])])])])]):t._e(),"aliyun"==t.opt.sms.vendor?s("div",{staticClass:"with-sub-form-table"},[s("table",{staticClass:"wbs-form-table-sub"},[s("tr",[s("th",{staticClass:"w8em"},[t._v("Access Key Id")]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.opt.sms.aliyun.id,expression:"opt.sms.aliyun.id"}],staticClass:"wbs-input",attrs:{type:"text"},domProps:{value:t.opt.sms.aliyun.id},on:{input:function(e){e.target.composing||t.$set(t.opt.sms.aliyun,"id",e.target.value)}}})])]),s("tr",[s("th",[t._v("Access Key Secret")]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.opt.sms.aliyun.secret,expression:"opt.sms.aliyun.secret"}],staticClass:"wbs-input",attrs:{type:"text"},domProps:{value:t.opt.sms.aliyun.secret},on:{input:function(e){e.target.composing||t.$set(t.opt.sms.aliyun,"secret",e.target.value)}}})])]),s("tr",[s("th",[t._v("短信签名")]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.opt.sms.aliyun.sign,expression:"opt.sms.aliyun.sign"}],staticClass:"wbs-input",attrs:{type:"text"},domProps:{value:t.opt.sms.aliyun.sign},on:{input:function(e){e.target.composing||t.$set(t.opt.sms.aliyun,"sign",e.target.value)}}})])]),s("tr",[s("th",[t._v("模板CODE")]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.opt.sms.aliyun.tpl,expression:"opt.sms.aliyun.tpl"}],staticClass:"wbs-input",attrs:{type:"text"},domProps:{value:t.opt.sms.aliyun.tpl},on:{input:function(e){e.target.composing||t.$set(t.opt.sms.aliyun,"tpl",e.target.value)}}})])]),s("tr",[s("th",[t._v("模板类型")]),s("td",{staticClass:"info description"},[t._v("通知短信")])]),s("tr",[s("th",[t._v("模板名称")]),s("td",{staticClass:"info description"},[t._v("自定义命名")])]),s("tr",[s("th",[t._v("模版内容")]),s("td",{staticClass:"info description"},[t._v(" 自定义，建议使用阿里云提供的常用模版库修改。变量${name}。如：收到${name}的留言。 ")])]),s("tr",[s("th",[t._v("申请说明")]),s("td",{staticClass:"info description"},[t._v(" 使用场景：用于xx网站的用户留言及时通知站长；产品链接：您的网站域名地址。 ")])]),s("tr",[s("th",[t._v("测试短信")]),s("td",[s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.test_mobile,expression:"test_mobile"}],staticClass:"wbs-input wbs-input-short fl",attrs:{type:"tel",placeholder:"输入手机号",maxlength:"11"},domProps:{value:t.test_mobile},on:{change:t.validate_phone,input:function(e){e.target.composing||(t.test_mobile=e.target.value)}}}),s("button",{staticClass:"wbs-btn-primary",on:{click:t.send_sms}},[t._v(" 发送 ")]),t.test_result?s("div",{staticClass:"description mt"},[t._v(" 测试短信返回结果："+t._s(t.test_result)+" ")]):t._e()])])])])]):t._e()])])])])]):t._e()],1)},d=[],v=(s("00b4"),{name:"NoticeOptions",props:["cnf","opt"],data:function(){return{test_mobile:"",test_result:"",mail_test:{to:""}}},mounted:function(){},methods:{setSmsVendor:function(){var t=this;t.test_result=""},send_sms:function(){var t=this;return!!t.test_mobile&&(!!/^1\d{10}$/.test(t.test_mobile)&&void t.$api.saveData({action:t.$cnf.action.act,op:"test_sms",mobile:t.test_mobile,opt:t.opt.sms}).then((function(e){e.code?(t.test_result=e,t.$wbui.toast(e.desc)):t.$wbui.toast("短信发送成功")})))},validate_phone:function(t){var e=this,s=t.target.value;if(!/^1\d{10}$/.test(s))return e.$wbui.toast("请确认手机号码格式"),t.target.select(),!1},setMailSecure:function(){var t=this;if(t.opt.mail.mailer>0){var e=t.opt.mail.proc[t.opt.mail.mailer].secure,s=25;"ssl"==e?s=465:"tls"==e&&(s=587),t.opt.mail.proc[t.opt.mail.mailer].port=s}},mail_test_send:function(){var t=this;if(!t.mail_test.to)return t.$wbui.toast("请输入测试收件箱。"),!1;var e=t.opt.mail;t.$api.saveData({action:t.$cnf.action.act,op:"mail_test",to:t.mail_test.to,mail:{mailer:e.mailer,smtp:e.proc[e.mailer],from:e.from,name:e.name}}).then((function(e){t.$wbui.toast(e.desc)}))}}}),f=v,_=Object(l["a"])(f,m,d,!1,null,null,null),b=_.exports,g={name:"EditItem",data:function(){var t=this;return{formChanged:0,isLoaded:0,isPro:t.$cnf.is_pro,opt:{},cnf:{},emptyItem:{},maxItem:3,id:""}},components:{NoticeOptions:b,"wbs-tags-module":u},mounted:function(){var t=this,e=t.$route.query.id;t.id=e,t._getData(e)},methods:{_getData:function(t){var e=this;e.$api.getData({action:e.$cnf.action.act,op:"get_item",id:t}).then((function(t){var s=t["data"]["opt"];e.cnf=t["data"]["cnf"];var a={};e.cnf.fields&&Object.keys(e.cnf.fields).forEach((function(t){e.cnf.fields[t]&&(a[t]="")})),e.emptyItem=JSON.parse(JSON.stringify(a)),s||(s={},s.name=t["data"]["cnf"]["name"],e.cnf.multiple?(s.data=[],s.data[0]=JSON.parse(JSON.stringify(e.emptyItem))):s.data=""),void 0!=s.form_contact_ways&&(s.form_contact_ways=s.form_contact_ways.split(",")||[]),e.opt=s,e.isLoaded=1}))},updateData:function(t){var e=this;if(void 0!=e.opt.form_contact_ways&&(e.opt.form_contact_ways=e.opt.form_contact_ways.join(","),!e.opt.form_contact_ways))return e.opt.form_contact_ways=[],e.$wbui.alert("请至少选择一种联系方式",(function(){return!1})),!1;e.$api.saveData({action:e.$cnf.action.act,op:"set_item",opt:e.opt,id:e.id}).then((function(s){e.$wbui.toast("设置保存成功"),e.formChanged=1,t&&t()}))},pushItem:function(){var t=this;t.opt.data.length>=t.maxItem?t.$wbui.alert("建议至多设定"+t.maxItem+"个选项。"):(t.isLoaded=0,t.opt.data.push(JSON.parse(JSON.stringify(t.emptyItem))),t.isLoaded=1)},removeItem:function(t){var e=this;e.$wbui.confirm("确认删除?",(function(){e.isLoaded=0,e.opt.data.splice(t,1),e.isLoaded=1}))}},filters:{join:function(t){return t=t||[],t.join(",")}},watch:{opt:{handler:function(){this.formChanged++},deep:!0}},beforeRouteLeave:function(t,e,s){var a=this;a.formChanged>1?a.$wbui.open({content:"您修改的设置尚未保存，确定离开此页面吗？",btn:["保存并离开","放弃修改"],yes:function(){return s(!1),a.updateData((function(){s()})),!1},no:function(){return s(),!1}}):s()}},h=g,w=Object(l["a"])(h,a,o,!1,null,null,null);e["default"]=w.exports}}]);
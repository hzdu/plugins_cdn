!function(e){var i=revslider_filmstrip_addon.bricks,t={},s="revslider-filmstrip-addon";function l(e){var i=RVS.SLIDER[RVS.S.slideId].slide.addOns[s].settings;if("objectlibrary"===i[e].type||"objlib"===i[e].type){var t;switch(i[e].size){case"large":t="-75.jpg";break;case"medium":t="-50.jpg";break;case"small":t="-25.jpg";break;case"thumb":t="-10.jpg";break;default:t=".jpg"}i[e].url=i[e].url.replace(/\-75|\-50|\-25|\-10|\.jpg/gi,"")+t,i[e].thumb=i[e].url.replace(/\-75|\-50|\-25|\-10|\.jpg/gi,"")+"-10.jpg"}else i[e].thumb=i[e].url;var l=document.getElementById("filmstrip_previewimage_"+e);null!=l&&(l.style.backgroundImage="url("+i[e].thumb+")"),n(e)}function a(){var i=new Array;return e("#filmstrip_slide_images .filmstrip_slide").each((function(){void 0!==this.dataset.oldindex&&i.push(this.dataset.oldindex)})),i}function d(l){l=void 0===l?0:l,RVS.SLIDER[RVS.S.slideId].slide.addOns[s]=null==RVS.SLIDER[RVS.S.slideId].slide.addOns[s]?{enable:!1,direction:"right-to-left",mobile:!1,times:RVS.F.cToResp({default:40}),settings:[{alt:"",custom:"",ids:"",size:"full",thumb:"",type:"",url:""}]}:RVS.SLIDER[RVS.S.slideId].slide.addOns[s];var d=RVS.SLIDER[RVS.S.slideId].slide.addOns[s].settings,r="";for(var o in d)r+='<li id="filmstrip_slide_'+o+'" data-oldindex="'+o+'" class="filmstrip_slide miniprevimage_wrap '+(0==o||"0"==o?"selected":"")+'"><i class="material-icons">filter_hdr</i>',r+='<div id="filmstrip_previewimage_'+o+'" class="filmstrip_previewimage" data-helpkey="film-strip-preview-image" style="background-image:url('+d[o].thumb+')"></div>',r+="</li>";t.forms.filmstripimages[0].innerHTML=r,"none"!==l?n(l):t.forms.filmstripimagesettings[0].innerHTML="",t.forms.filmstripimages.sortable({items:".filmstrip_slide",start:function(){t.beforesort=a()},stop:function(l,d){!function(t,l){if(t.toString()!==l.toString()){var a=e.extend(!0,{},RVS.SLIDER[RVS.S.slideId].slide.addOns[s].settings);RVS.SLIDER[RVS.S.slideId].slide.addOns[s].settings=new Array;for(var d=0;d<l.length;d++)for(var n=0;n<t.length;n++)l[d]===t[n]&&(RVS.SLIDER[RVS.S.slideId].slide.addOns[s].settings[n]=a[d]);RVS.F.openBackupGroup({id:"filmstrip_reorder",txt:i.sortslide,icon:"sort",lastkey:"settings"}),RVS.F.backup({path:RVS.S.slideId+".slide.addOns."+s+".settings",icon:"sort",txt:i.sortslide,lastkey:"settings",force:!0,val:RVS.SLIDER[RVS.S.slideId].slide.addOns[s].settings,old:a,bckpGrType:"filmstrip_reorder"}),RVS.F.closeBackupGroup({id:"filmstrip_reorder"})}}(a(),t.beforesort)}})}function n(e){if(null===RVS.SLIDER[RVS.S.slideId].slide.addOns[s].settings||0===RVS.SLIDER[RVS.S.slideId].slide.addOns[s].settings.length)return t.forms.filmstripimagesettings[0].innerHTML="",!1;var l=RVS.SLIDER[RVS.S.slideId].slide.addOns[s].settings,a='<div class="tp-clearfix"></div>';if(a+='<div class="div25"></div>',a+='<div class="miniprevimage_wrap"><i class="material-icons">filter_hdr</i>',a+='<div id="filmstrip_previewimage_currentEditing" class="filmstrip_previewimage" data-helpkey="film-strip-preview-image" style="background-image:url('+l[e].thumb+')"></div>',a+="</div>",a+='<div class="miniimage_buttons_wrap">',a+='\t\t<div data-r="#slide#.slide.addOns.'+s+".settings."+e+'.url" data-rid="#slide#.slide.addOns.'+s+".settings."+e+'.ids" data-rty="#slide#.slide.addOns.'+s+".settings."+e+'.type" data-evt="filmstripmediaupdate" data-evtparam="'+e+'" class="getImageFromMediaLibrary basic_action_button longbutton "><i class="material-icons">folder</i>'+i.medialibrary+"</div>",a+='\t\t<div data-r="#slide#.slide.addOns.'+s+".settings."+e+'.url" data-rid="#slide#.slide.addOns.'+s+".settings."+e+'.ids" data-rty="#slide#.slide.addOns.'+s+".settings."+e+'.type" data-evt="filmstripmediaupdate" data-evtparam="'+e+'" class="getImageFromObjectLibrary basic_action_button longbutton"><i class="material-icons">camera_enhance</i>'+i.objectlibrary+"</div>",a+="</div>",a+="<label_a>"+i.url+'</label_a><input id="filmstrip_imageurl_currentEditing" class="slideinput easyinit callEvent" data-evt="filmstripExternalURLChanged" data-evtparam="'+e+'" data-r="addOns.'+s+".settings."+e+'.url" value="'+l[e].url+'" type="text">',a+="<label_a>"+i.ssize+'</label_a><select id="filmstrip_source_size" class="slideinput tos2 nosearchbox easyinit callEvent" data-evt="filmstripExternalURLChanged" data-evtparam="'+e+'"data-r="addOns.'+s+".settings."+e+'.size">',"objectlibrary"!==l[e].type&&"objlib"!==l[e].type)for(var d in RVS.ENV.img_sizes)a+='<option value="'+d+'">'+RVS.ENV.img_sizes[d]+"</option>";else a+='<option value="original">'+i.original+'</option><option value="large">'+i.original+'</option><option value="medium">'+i.medium+'</option><option value="small">'+i.small+'</option><option value="thumb">'+i.thumb+"</option>";a+="</select>",a+="<label_a>"+i.alttext+'</label_a><select id="filmstrip_alt_text" data-theme="dark" data-show="#_*val*_filmstrip_alt"  data-hide=".filmstrip_alt_wrap" class="slideinput tos2 nosearchbox easyinit" data-r="addOns.'+s+".settings."+e+'.alt">',a+='<option value="media_library">'+i.medialibrary+"</option>",a+='<option value="file_name">'+i.filename+"</option>",a+='<option value="custom">'+i.custom+"</option>",a+="</select>",a+='<div id="_custom_filmstrip_alt" class="filmstrip_alt_wrap"><label_a>'+i.custom+'</label_a><input id="filmstrip_imagealt_currentEditing" class="slideinput easyinit"  data-r="addOns.'+s+".settings."+e+'.custom" value="'+l[e].custom+'" type="text"></div>',a+='<div data-evt="removeFSSlide" data-evtparam="'+e+'" class="basic_action_button longbutton callEventButton rightbutton"><i class="material-icons">delete</i>'+i.deleteslide+"</div>",a+='<div class="tp-clearfix"></div>',t.forms.filmstripimagesettings[0].innerHTML=a,t.forms.filmstripimagesettings.find(".tos2.nosearchbox").ddTP("destroy"),t.forms.filmstripimagesettings.find(".tos2.nosearchbox").ddTP("rebuild"),t.forms.filmstripimagesettings.find(".tos2.nosearchbox").ddTP("rebuild"),RVS.F.updateEasyInputs({container:t.forms.filmstripimagesettings,path:RVS.S.slideId+".slide.",trigger:"init"})}RVS.DOC.on(s+"_init",(function(){var a;!t.initialised&&RVS.SLIDER.settings.addOns[s].enable&&(RVS.DOC.on("screenSelectorChanged",(function(){RVS.F.updateEasyInputs({container:e("#filmstrip_inner_settings"),path:RVS.S.slideId+".slide.",trigger:"init"})})),RVS.DOC.on("SceneUpdatedAfterRestore.filmstrip",(function(){d()})),RVS.DOC.on("slideFocusChanged.filmstrip",(function(){d()})),RVS.DOC.on("click",".filmstrip_slide",(function(){e(".filmstrip_slide").removeClass("selected"),this.className+=" selected",n(e(this).index())})),RVS.DOC.on("click","#add_filmstrip_image",(function(){RVS.SLIDER[RVS.S.slideId].slide.addOns[s].settings.push({alt:"",custom:"",ids:"",size:"full",thumb:"",type:"",url:""}),d(RVS.SLIDER[RVS.S.slideId].slide.addOns[s].settings.length-1)})),RVS.DOC.on("FS_enabelDisableKenBurn",(function(i,l){var a=e("#sl_pz_onoff");RVS.SLIDER.settings.addOns[s].enable&&RVS.SLIDER[RVS.S.slideId].slide.addOns[s].enable?(RVS.SLIDER[RVS.S.slideId].slide.panzoom.set=!1,a[0].style.pointerEvents="none",t.forms.disableKenburn.show()):(a[0].style.pointerEvents="",t.forms.disableKenburn.hide()),RVS.F.updateEasyInputs({container:a,path:RVS.S.slideId+".slide."}),RVS.F.updateEasyInputs({container:t.forms.slidegeneral,path:RVS.S.slideId+".slide."})})),RVS.DOC.on("filmstripmediaupdate",(function(e,i){void 0!==i&&setTimeout((function(){l(i)}),50)})),RVS.DOC.on("filmstripExternalURLChanged",(function(e,i){void 0!==i&&void 0!==i.val&&void 0!==i.eventparam&&l(i.eventparam)})),RVS.DOC.on("removeFSSlide",(function(t,l){if(void 0!==l){RVS.SLIDER[RVS.S.slideId].slide.addOns[s].settings=e.map(RVS.SLIDER[RVS.S.slideId].slide.addOns[s].settings,(function(e,i){return e})),RVS.F.openBackupGroup({id:"filmstrip_delete",txt:i.deleteslide,icon:"delete",lastkey:"settings"});var a=e.extend(!0,{},RVS.SLIDER[RVS.S.slideId].slide.addOns[s].settings);RVS.SLIDER[RVS.S.slideId].slide.addOns[s].settings.splice(parseInt(l,0),1),RVS.F.backup({path:RVS.S.slideId+".slide.addOns."+s+".settings",icon:"delete",txt:i.deleteslide,lastkey:"settings",force:!0,val:RVS.SLIDER[RVS.S.slideId].slide.addOns[s].settings,old:a,bckpGrType:"filmstrip_delete"}),RVS.F.closeBackupGroup({id:"filmstrip_delete"}),d("none")}})),RVS.F.addOnContainer.create({slug:s,icon:"local_movies",title:i.filmstrip,alias:i.filmstrip,slider:!1,slide:!0,layer:!1}),t.forms={slidergeneral:e("#form_slidergeneral_"+s),slidegeneral:e("#form_slidegeneral_"+s),layergeneral:e("#form_layerinner_"+s),module:e("#form_module_"+s),layer:e("#form_layer_"+s),slide:e("#form_slide_"+s),kbgeneral:e("#form_slidebg_kenburn")},t.forms.kbgeneral.append('<row id="fs_disable_kenburn" class="direktrow"><labelhalf><i class="material-icons">sms_failed</i></labelhalf><contenthalf><div class="function_info">'+i.cantusekenburn+"</div></contenthalf></row>"),t.forms.disableKenburn=e("#fs_disable_kenburn"),a="",a+='<div  class="form_inner_header"><i class="material-icons">local_movies</i>'+i.filmstrip+"</div>",a+='<div id="filmstrip_inner_settings" class="collapsable" style="display:block !important">',a+="\t\t<label_a>"+i.active+'</label_a><input type="checkbox" class="slideinput easyinit callEvent" data-evt="FS_enabelDisableKenBurn" data-r="addOns.'+s+'.enable" data-showhide=".filmstrip_slide_settings" data-showhidedep="true" value="on">',a+='\t\t<div class="filmstrip_slide_settings">',a+="\t\t\t<label_a>"+i.movefrom+'</label_a><select class="slideinput tos2 nosearchbox easyinit" data-r="addOns.'+s+'.direction"><option value="right-to-left">'+i.rtl+'</option><option value="left-to-right">'+i.ltr+'</option><option value="top-to-bottom">'+i.ttb+'</option><option value="bottom-to-top">'+i.btt+"</option></select>",a+="\t\t\t<row>",a+='\t\t\t\t<onelong><label_icon class="ui_speed"></label_icon><input class="slideinput valueduekeyboard easyinit " data-numeric="true" data-allowed="" data-r="addOns.'+s+'.times.#size#.v" data-min="0" data-max="1000" type="text"></onelong>',a+='\t\t\t\t<oneshort><label_icon class="ui_hide_on_mobile"></label_icon><input type="checkbox" class="slideinput easyinit" data-r="addOns.'+s+'.mobile" value="on"></oneshort>',a+="\t\t\t</row>",a+='\t\t\t<ul id="filmstrip_slide_images"></ul>',a+='\t\t\t<div id="add_filmstrip_image" class="basic_action_button longbutton callEventButton rightbutton"><i class="material-icons">add</i>'+i.addnewslide+"</div>",a+='\t\t\t<div id="filmstrip_slide_image_settings"></div>',a+="\t\t</div>",a+="</div>",t.forms.slidegeneral.append(e(a)),t.forms.filmstripimages=e("#filmstrip_slide_images"),t.forms.filmstripimagesettings=e("#filmstrip_slide_image_settings"),t.forms.slidegeneral.find(".tos2.nosearchbox").ddTP({placeholder:i.placeholder}),RVS.F.initOnOff(),RVS.F.updateEasyInputs({container:t.forms.slidegeneral,path:RVS.S.slideId+".slide.",trigger:"init"}),d(),function(){if(revslider_filmstrip_addon.hasOwnProperty("help")&&"undefined"!=typeof HelpGuide){var i={slug:"filmstrip_addon"};e.extend(!0,i,revslider_filmstrip_addon.help),HelpGuide.add(i)}}(),t.initialised=!0),RVS.SLIDER.settings.addOns[s].enable?(punchgs.TweenLite.set("#gst_slide_"+s,{display:"inline-block"}),RVS.DOC.trigger("FS_enabelDisableKenBurn"),"undefined"!=typeof HelpGuide&&HelpGuide.activate("filmstrip_addon")):(punchgs.TweenLite.set("#gst_slide_"+s,{display:"none"}),e("#gst_slide_"+s).removeClass("selected"),t.forms.module.addClass("collapsed"),t.forms.layer.addClass("collapsed"),t.forms.slide.addClass("collapsed"),RVS.DOC.trigger("FS_enabelDisableKenBurn"),"undefined"!=typeof HelpGuide&&HelpGuide.deactivate("filmstrip_addon"))}))}(jQuery);
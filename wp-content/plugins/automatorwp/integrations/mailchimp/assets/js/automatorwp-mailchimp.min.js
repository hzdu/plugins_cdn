!function(e){var t="automatorwp_mailchimp_";e("body").on("click","#automatorwp_save_mailchimp_oauth",function(a){a.preventDefault();var i=e(this).parent().find("#awp_mailchimp_oauth_status"),o={action:"automatorwp_mailchimp_save_oauth_credentials",nonce:automatorwp_mailchimp.nonce,api_key:e("#"+t+"api_key").val(),server_prefix:e("#"+t+"server_prefix").val()};e.post(ajaxurl,o,function(e){e.success?(i.css("width","fit-content"),i.addClass("automatorwp-notice-success"),i.html("Credentials Saved!"),i.slideDown("fast")):0==o.api_key.length||0==o.server_prefix.length?(i.css("width","fit-content"),i.addClass("automatorwp-notice-error"),i.html("All fields are required to connect with Mailchimp"),i.slideDown("fast")):(i.css("width","fit-content"),i.addClass("automatorwp-notice-error"),i.html("Either Credentials are invalid or Mailchimp API is not accessible"),i.slideDown("fast"))})}),e("body").on("click","#automatorwp_remove_mailchimp_oauth",function(t){t.preventDefault(),e("#awp_mailchimp_oauth_status").text("Removing Credentials...(wait)");var a={action:"automatorwp_mailchimp_delete_oauth_credentials",nonce:automatorwp_mailchimp.nonce};e.post(ajaxurl,a,function(t){e("#awp_mailchimp_oauth_status").text("Credentials Removed! Refresh this page. "),setTimeout(function(){location.reload()},100)})}),e("body").on("change",".automatorwp-action-mailchimp-user-add-tag .cmb2-id-audience select",function(t){var a=e(this).closest(".cmb-row"),i=a.next(".cmb2-id-tags"),o=e(this).val(),s=a.hasClass("is-option-change");if("any"===o||""===o)s?i.hide():i.slideUp("fast");else{var c=i.find("select.select2-hidden-accessible");c.next(".select2").remove(),c.data("table",o),c.removeAttr("data-select2-id"),automatorwp_ajax_selector(c),s?i.show():i.slideDown("fast")}a.removeClass("is-option-change")}),e("body").on("change",".automatorwp-action-mailchimp-contact-add-tag .cmb2-id-audience select",function(t){var a=e(this).closest(".cmb-row"),i=a.next(".cmb2-id-tags"),o=e(this).val(),s=a.hasClass("is-option-change");if("any"===o||""===o)s?i.hide():i.slideUp("fast");else{var c=i.find("select.select2-hidden-accessible");c.next(".select2").remove(),c.data("table",o),c.removeAttr("data-select2-id"),automatorwp_ajax_selector(c),s?i.show():i.slideDown("fast")}a.removeClass("is-option-change")}),e("body").on("change",".automatorwp-action-mailchimp-user-remove-tag .cmb2-id-audience select",function(t){var a=e(this).closest(".cmb-row"),i=a.next(".cmb2-id-tags"),o=e(this).val(),s=a.hasClass("is-option-change");if("any"===o||""===o)s?i.hide():i.slideUp("fast");else{var c=i.find("select.select2-hidden-accessible");c.next(".select2").remove(),c.data("table",o),c.removeAttr("data-select2-id"),automatorwp_ajax_selector(c),s?i.show():i.slideDown("fast")}a.removeClass("is-option-change")}),e("body").on("change",".automatorwp-action-mailchimp-contact-remove-tag .cmb2-id-audience select",function(t){var a=e(this).closest(".cmb-row"),i=a.next(".cmb2-id-tags"),o=e(this).val(),s=a.hasClass("is-option-change");if("any"===o||""===o)s?i.hide():i.slideUp("fast");else{var c=i.find("select.select2-hidden-accessible");c.next(".select2").remove(),c.data("table",o),c.removeAttr("data-select2-id"),automatorwp_ajax_selector(c),s?i.show():i.slideDown("fast")}a.removeClass("is-option-change")}),e("body").on("change",".automatorwp-action-mailchimp-create-send-campaign .cmb2-id-audience select",function(t){var a=e(this).closest(".cmb-row"),i=a.next(".cmb2-id-tags"),o=e(this).val(),s=a.hasClass("is-option-change");if("any"===o||""===o)s?i.hide():i.slideUp("fast");else{var c=i.find("select.select2-hidden-accessible");c.next(".select2").remove(),c.data("table",o),c.removeAttr("data-select2-id"),automatorwp_ajax_selector(c),s?i.show():i.slideDown("fast")}a.removeClass("is-option-change")}),e("body").on("click",".automatorwp-automation-item-label > .automatorwp-option",function(t){var a=e(this).closest(".automatorwp-automation-item"),i=e(this).data("option"),o=a.find('.automatorwp-option-form-container[data-option="'+i+'"]').find(".cmb2-id-list");void 0!==o&&(o.addClass("is-option-change"),o.find("select.select2-hidden-accessible").trigger("change"))})}(jQuery);
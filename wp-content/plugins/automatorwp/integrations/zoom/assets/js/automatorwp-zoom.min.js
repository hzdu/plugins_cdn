(function($){var prefix='automatorwp-zoom-';var _prefix='automatorwp_zoom_';$('body').on('click','.automatorwp_settings #'+_prefix+'meetings_authorize',function(e){e.preventDefault();var button=$(this);var wrapper=button.parent();var platform=button.attr('id').replace(_prefix,'').replace('_authorize','');var box_prefix=_prefix+platform+'_';var client_id=$('#'+box_prefix+'client_id').val();var client_secret=$('#'+box_prefix+'client_secret').val();var response_wrap=wrapper.find('#'+box_prefix+'response');if(!response_wrap.length){wrapper.append('<div id="'+box_prefix+'response" style="display: none; margin-top: 10px;"></div>');response_wrap=wrapper.find('#'+box_prefix+'response')}
if(client_id.length===0||client_secret.length===0){response_wrap.addClass('automatorwp-notice-error');response_wrap.html('All fields are required to connect with Zoom');response_wrap.slideDown('fast');return}
response_wrap.slideUp('fast');response_wrap.attr('class','');wrapper.append('<span class="spinner is-active" style="float: none;"></span>');button.prop('disabled',!0);$.post(ajaxurl,{action:'automatorwp_zoom_authorize',nonce:automatorwp_zoom.nonce,client_id:client_id,client_secret:client_secret,platform:platform,},function(response){response_wrap.addClass('automatorwp-notice-'+(response.success===!0?'success':'error'));response_wrap.html((response.data.message!==undefined?response.data.message:response.data));response_wrap.slideDown('fast');wrapper.find('.spinner').remove();if(response.success===!0&&response.data.redirect_url!==undefined){window.location=response.data.redirect_url;return}
button.prop('disabled',!1)})})})(jQuery)
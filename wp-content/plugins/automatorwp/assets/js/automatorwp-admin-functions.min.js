function automatorwp_selector($this){if($this.closest('#available-widgets').length){return}
var select2_args={theme:'default automatorwp-select2',placeholder:($this.data('placeholder')?$this.data('placeholder'):automatorwp_admin_functions.selector_placeholder),allowClear:!0,multiple:($this[0].hasAttribute('multiple')),};$this.automatorwp_select2(select2_args)}
function automatorwp_post_selector($this){if($this.closest('#available-widgets').length){return}
var post_types=$this.data('post-type').split(',');var select2_args={ajax:{url:ajaxurl,dataType:'json',delay:250,type:'POST',data:function(params){return{q:params.term,page:params.page||1,action:'automatorwp_get_posts',nonce:automatorwp_admin_functions.nonce,post_type:post_types,post_type_cb:$this.data('post-type-cb'),option_none:$this.data('option-none'),option_none_value:$this.data('option-none-value'),option_none_label:$this.data('option-none-label'),option_custom:$this.data('option-custom'),option_custom_value:$this.data('option-custom-value'),option_custom_label:$this.data('option-custom-label'),}},processResults:automatorwp_select2_posts_process_results},escapeMarkup:function(markup){return markup},templateResult:(post_types.length===1?automatorwp_select2_posts_template_result:automatorwp_select2_post_types_template_result),theme:'default automatorwp-select2',placeholder:($this.data('placeholder')?$this.data('placeholder'):automatorwp_admin_functions.post_selector_placeholder),allowClear:!0,multiple:($this[0].hasAttribute('multiple'))};$this.automatorwp_select2(select2_args)}
function automatorwp_term_selector($this){if($this.closest('#available-widgets').length){return}
var select2_args={ajax:{url:ajaxurl,dataType:'json',delay:250,type:'POST',data:function(params){return{q:params.term,page:params.page||1,action:'automatorwp_get_terms',nonce:automatorwp_admin_functions.nonce,taxonomy:$this.data('taxonomy'),option_none:$this.data('option-none'),option_none_value:$this.data('option-none-value'),option_none_label:$this.data('option-none-label'),option_custom:$this.data('option-custom'),option_custom_value:$this.data('option-custom-value'),option_custom_label:$this.data('option-custom-label'),}},processResults:automatorwp_select2_terms_process_results},escapeMarkup:function(markup){return markup},templateResult:automatorwp_select2_terms_template_result,theme:'default automatorwp-select2',placeholder:($this.data('placeholder')?$this.data('placeholder'):automatorwp_admin_functions.term_selector_placeholder),allowClear:!0,multiple:($this[0].hasAttribute('multiple'))};$this.automatorwp_select2(select2_args)}
function automatorwp_user_selector($this){if($this.closest('#available-widgets').length){return}
var select2_args={ajax:{url:ajaxurl,dataType:'json',delay:250,type:'POST',data:function(params){return{q:params.term,page:params.page||1,action:'automatorwp_get_users',nonce:automatorwp_admin_functions.nonce,}},processResults:automatorwp_select2_users_process_results},escapeMarkup:function(markup){return markup},templateResult:automatorwp_select2_users_template_result,theme:'default automatorwp-select2',placeholder:($this.data('placeholder')?$this.data('placeholder'):automatorwp_admin_functions.user_selector_placeholder),allowClear:!0,multiple:($this[0].hasAttribute('multiple'))};$this.automatorwp_select2(select2_args)}
function automatorwp_object_selector($this){if($this.closest('#available-widgets').length){return}
var select2_args={ajax:{url:ajaxurl,dataType:'json',delay:250,type:'POST',data:function(params){return{q:params.term,page:params.page||1,action:'automatorwp_get_objects',nonce:automatorwp_admin_functions.nonce,table:$this.data('table'),option_none:$this.data('option-none'),option_none_value:$this.data('option-none-value'),option_none_label:$this.data('option-none-label'),option_custom:$this.data('option-custom'),option_custom_value:$this.data('option-custom-value'),option_custom_label:$this.data('option-custom-label'),}},processResults:automatorwp_select2_objects_process_results},escapeMarkup:function(markup){return markup},templateResult:automatorwp_select2_objects_template_result,theme:'default automatorwp-select2',placeholder:($this.data('placeholder')?$this.data('placeholder'):automatorwp_admin_functions.object_selector_placeholder),allowClear:!0,multiple:($this[0].hasAttribute('multiple'))};$this.automatorwp_select2(select2_args)}
function automatorwp_ajax_selector($this){if($this.closest('#available-widgets').length){return}
var select2_args={ajax:{url:ajaxurl,dataType:'json',delay:250,type:'POST',data:function(params){var data={q:params.term,page:params.page||1,action:$this.data('action'),nonce:automatorwp_admin_functions.nonce,table:$this.data('table'),option_none:$this.data('option-none'),option_none_value:$this.data('option-none-value'),option_none_label:$this.data('option-none-label'),option_custom:$this.data('option-custom'),option_custom_value:$this.data('option-custom-value'),option_custom_label:$this.data('option-custom-label'),};$this.trigger('automatorwp_ajax_selector_data',[data,$this]);return data},processResults:automatorwp_select2_ajax_process_results},escapeMarkup:function(markup){return markup},templateResult:automatorwp_select2_ajax_template_result,theme:'default automatorwp-select2',placeholder:($this.data('placeholder')?$this.data('placeholder'):''),allowClear:!0,multiple:($this[0].hasAttribute('multiple'))};$this.automatorwp_select2(select2_args)}
function automatorwp_select2_posts_template_result(item){if(item.post_title!==undefined){return item.post_title+(!isNaN(item.ID)?'<span class="result-description align-right">ID: '+item.ID+'</span>':'')}
return item.text+(!isNaN(item.id)?'<span class="result-description align-right">ID: '+item.id+'</span>':'')}
function automatorwp_select2_post_types_template_result(item){if(item.post_type!==undefined){var post_type_label=item.post_type;if(automatorwp_post_type_exists(item.post_type)){post_type_label=automatorwp_get_post_type_label(item.post_type)}
return item.post_title+'<span class="result-description">'+post_type_label+'<span class="align-right">'+'ID: '+item.ID+'</span>'+'</span>'}
return automatorwp_select2_posts_template_result(item)}
function automatorwp_select2_terms_template_result(item){if(item.name!==undefined){return item.name+(!isNaN(item.term_id)?'<span class="result-description align-right">ID: '+item.term_id+'</span>':'')}
return item.text+(!isNaN(item.id)?'<span class="result-description align-right">ID: '+item.id+'</span>':'')}
function automatorwp_select2_posts_process_results(response,params){if(response===null){return{results:[]}}
var formatted_results=[];var results=(response.data.results!==undefined?response.data.results:response.data);results.forEach(function(item){formatted_results.push(jQuery.extend({id:item.ID,text:item.post_title,},item))});return{results:formatted_results,pagination:{more:(response.data.more_results!==undefined?response.data.more_results:!1)}}}
function automatorwp_select2_terms_process_results(response,params){if(response===null){return{results:[]}}
var formatted_results=[];var results=(response.data.results!==undefined?response.data.results:response.data);results.forEach(function(item){formatted_results.push(jQuery.extend({id:item.term_id,text:item.name,},item))});return{results:formatted_results,pagination:{more:(response.data.more_results!==undefined?response.data.more_results:!1)}}}
function automatorwp_select2_users_template_result(item){if(item.display_name!==undefined){return item.display_name+(!isNaN(item.ID)?'<span class="result-description align-right">ID: '+item.ID+'</span>':'')}
return item.text+(!isNaN(item.id)?'<span class="result-description align-right">ID: '+item.id+'</span>':'')}
function automatorwp_select2_users_process_results(response,params){if(response===null){return{results:[]}}
var formatted_results=[];var results=(response.data.results!==undefined?response.data.results:response.data);results.forEach(function(item){formatted_results.push(jQuery.extend({id:item.ID,text:item.user_login,},item))});return{results:formatted_results,pagination:{more:(response.data.more_results!==undefined?response.data.more_results:!1)}}}
function automatorwp_select2_objects_template_result(item){return item.text+(!isNaN(item.id)?'<span class="result-description align-right">ID: '+item.id+'</span>':'')}
function automatorwp_select2_objects_process_results(response,params){if(response===null){return{results:[]}}
var formatted_results=[];var results=(response.data.results!==undefined?response.data.results:response.data);results.forEach(function(item){formatted_results.push(jQuery.extend({id:item.id,text:item.text,},item))});return{results:formatted_results,pagination:{more:(response.data.more_results!==undefined?response.data.more_results:!1)}}}
function automatorwp_select2_ajax_template_result(item){return item.text+(!isNaN(item.id)?'<span class="result-description align-right">ID: '+item.id+'</span>':'')}
function automatorwp_select2_ajax_process_results(response,params){if(response===null){return{results:[]}}
var formatted_results=[];var results=(response.data.results!==undefined?response.data.results:response.data);results.forEach(function(item){formatted_results.push(jQuery.extend({id:item.id,text:item.text,},item))});return{results:formatted_results,pagination:{more:(response.data.more_results!==undefined?response.data.more_results:!1)}}}
function automatorwp_select2_optgroup_matcher(params,data){data.parentText=data.parentText||'';if(params.term===undefined){return data}
if(params.term.trim()===''){return data}
if(data.children&&data.children.length>0){var match=jQuery.extend(!0,{},data);for(var c=data.children.length-1;c>=0;c--){var child=data.children[c];child.parentText+=data.parentText+" "+data.text;var matches=automatorwp_select2_optgroup_matcher(params,child);if(matches==null){match.children.splice(c,1)}}
if(match.children.length>0){return match}
return automatorwp_select2_optgroup_matcher(params,match)}
var original=(data.parentText+' '+data.text).toUpperCase();var term=params.term.toUpperCase();if(original.indexOf(term)>-1){return data}
return null}
function automatorwp_post_type_exists(post_type){return(automatorwp_admin_functions.post_type_labels[post_type]!==undefined)}
function automatorwp_get_post_type_label(post_type){var label='';if(automatorwp_post_type_exists(post_type)){label=automatorwp_admin_functions.post_type_labels[post_type]}
return label}
function automatorwp_taxonomy_exists(taxonomy){return(automatorwp_admin_functions.taxonomy_labels[taxonomy]!==undefined)}
function automatorwp_get_taxonomy_label(taxonomy){var label='';if(automatorwp_taxonomy_exists(taxonomy)){label=automatorwp_admin_functions.taxonomy_labels[taxonomy]}
return label}
function automatorwp_download_csv(data,filename){var csv=automatorwp_object_to_csv(data);automatorwp_download_file(csv,filename,'csv')}
function automatorwp_download_file(content,filename,extension,mime_type='',charset=''){if(mime_type===undefined||mime_type==='')
mime_type='text/'+extension;if(charset===undefined||charset==='')
charset='utf-8';var file=(filename.length?filename+'.'+extension:'file.'+extension);var blob=new Blob([content],{type:mime_type+';charset='+charset+';'});if(navigator.msSaveBlob){navigator.msSaveBlob(blob,file)}else{var link=document.createElement("a");link.style.visibility='hidden';if(link.download!==undefined){var url=URL.createObjectURL(blob);link.setAttribute("href",url);link.setAttribute("download",file);document.body.appendChild(link);link.click();document.body.removeChild(link)}}}
function automatorwp_object_to_csv(obj){var array=typeof obj!=='object'?JSON.parse(obj):obj;var str='';for(var i=0;i<array.length;i++){var line='';for(var index in array[i]){if(line!==''){line+=','}
line+='"'+array[i][index]+'"'}
str+=line+'\r\n'}
return str}
function automatorwp_insert_at_caret(input,content){input.each(function(){if(document.selection){this.focus();var sel=document.selection.createRange();sel.text=content;this.focus()}else if(this.selectionStart||this.selectionStart=='0'){var startPos=this.selectionStart;var endPos=this.selectionEnd;var scrollTop=this.scrollTop;this.value=this.value.substring(0,startPos)+content+this.value.substring(endPos,this.value.length);this.focus();this.selectionStart=startPos+content.length;this.selectionEnd=startPos+content.length;this.scrollTop=scrollTop}else{this.value+=content;this.focus()}})}
function automatorwp_set_caret_at_end(input){input=input[0];var length=input.value.length;if(document.selection){input.focus();var oSel=document.selection.createRange();oSel.moveStart('character',-length);oSel.moveStart('character',length);oSel.moveEnd('character',0);oSel.select()}else if(input.selectionStart||input.selectionStart=='0'){input.selectionStart=length;input.selectionEnd=length;input.focus()}}
function automatorwp_get_url_param(url,param,default_value=!1){var results=new RegExp('[\?&]'+param+'=([^&#]*)').exec(url);return results[1]||default_value}
function automatorwp_is_valid_url(url){var result=url.match(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g);return(result!==null)}
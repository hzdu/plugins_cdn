jQuery((function(a){AutomateWoo.Variables={$meta_box:a("#aw_variables_box"),init(){this.init_clipboard(),a(document.body).on("change keyup",".aw-workflow-variable-parameter",this.update_preview_field),a(document.body).on("keypress","input.aw-workflow-variable-parameter",this.restrict_parameter_chars),this.$meta_box.on("click",".aw-workflow-variable",this.open_modal)},init_clipboard(){new ClipboardJS(".aw-clipboard-btn",{text(){let e=a("#aw_workflow_variable_preview_field").text();return a(".aw-workflow-variable-parameter").each((function(t,o){if(a(o).prop("required")&&!a(o).get(0).checkValidity())return a(o).get(0).reportValidity(),e=!1,!1})),e}}).on("success",(function(){a(".aw-clipboard-btn").html("Copied!"),setTimeout((function(){AutomateWoo.Modal.close()}),500)}))},open_modal(){AutomateWoo.Modal.open(),AutomateWoo.Modal.loading();const e={action:"aw_modal_variable_info",variable:a(this).text()};a.post(ajaxurl,e,(function(a){AutomateWoo.Modal.contents(a),AutomateWoo.Variables.update_preview_field()}))},update_preview_field(){const e=a("#aw_workflow_variable_preview_field"),t=e.data("variable"),o=[];a(".aw-workflow-variable-parameter").each((function(){const e=a(this).parents(".aw-workflow-variables-parameter-row:first");if(e.data("parameter-show")){const t=e.data("parameter-show").split("="),o=a('.aw-workflow-variable-parameter[name="'+t[0]+'"]');if(!o.length||o.val()!==t[1])return void e.hide();e.show()}const t={name:a(this).attr("name"),required:e.data("is-required"),value:a(this).val()};o.push(t)}));const r=AutomateWoo.Variables.generate_variable_string(t,o);e.text(r)},generate_variable_string(e,t){let o="{{ "+e;if(t.length){const e=[];a.each(t,(function(a,t){t.value?e.push(t.name+": '"+t.value+"'"):t.required&&e.push(t.name+": '...'")})),e.length>0&&(o+=" | ",o+=e.join(", "))}return o+" }}"},restrict_parameter_chars(e){if(-1!==a.inArray(e.which,[39,123,124,125]))return!1}},AutomateWoo.Variables.init()}));
//# sourceMappingURL=variables.min.js.map
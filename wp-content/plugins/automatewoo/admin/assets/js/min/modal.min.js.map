{"version":3,"sources":["modal.js"],"names":["jQuery","$","AutomateWoo","Modal","init","document","body","on","this","close","handle_link","e","keyCode","preventDefault","$a","type","data","size","open","loading","post","attr","response","contents","html","classes","push","addClass","append","position","removeClass","AW","initTooltips","remove","eventCtor","CustomEvent","Event","dispatchEvent","$modal","$modal_body","$modal_header","removeProp","modal_header_height","outerHeight","modal_height","height","modal_width","width","modal_contents_height","css","margin-left","margin-top","throttle","window","clearTimeout","setTimeout"],"mappings":"AAGAA,QAAO,SAASC,GAEZC,YAAYC,MAAQ,CAEhBC,KAAM,WAEFH,EAAEI,SAASC,MAAMC,GAAI,QAAS,8BAA+BC,KAAKC,OAClER,EAAEI,SAASC,MAAMC,GAAI,QAAS,6BAA8BC,KAAKC,OACjER,EAAEI,SAASC,MAAMC,GAAI,QAAS,6BAA8BC,KAAKE,aAEjET,EAAEI,UAAUE,GAAI,WAAW,SAASI,GACb,KAAdA,EAAEC,SACHV,YAAYC,MAAMM,YAO9BC,YAAa,SAASC,GAClBA,EAAEE,iBAEF,IAAIC,EAAKb,EAAEO,MACPO,EAAOD,EAAGE,KAAM,0BAChBC,EAAOH,EAAGE,KAAM,0BAEpB,GAAc,SAATD,EACDb,YAAYC,MAAMe,KAAMH,EAAME,GAC9Bf,YAAYC,MAAMgB,UAElBlB,EAAEmB,KAAMN,EAAGO,KAAK,QAAS,IAAI,SAAUC,GACnCpB,YAAYC,MAAMoB,SAAUD,WAG/B,GAAc,WAATP,EAAoB,CAC1B,IAAIQ,EAAWtB,EAAGa,EAAGE,KAAM,+BAAiCQ,OAC5DtB,YAAYC,MAAMe,KAAMH,EAAME,GAC9Bf,YAAYC,MAAMoB,SAAUA,KAKpCL,KAAM,SAAUH,EAAME,GAElB,IAAIQ,EAAU,CAAE,2BAA6BV,GAExCE,GACDQ,EAAQC,KAAM,2BAA6BT,GAG/ChB,EAAEI,SAASC,MAAMqB,SAAS,0BAA0BC,OAAO,iDAC3D3B,EAAEI,SAASC,MAAMsB,OAAO,iCAAmCH,EAAU,6KACrEjB,KAAKqB,YAITV,QAAS,WACLlB,EAAEI,SAASC,MAAMqB,SAAS,8BAI9BJ,SAAU,SAAWA,GACjBtB,EAAEI,SAASC,MAAMwB,YAAY,6BAC7B7B,EAAE,gCAAgCuB,KAAKD,GAEvCQ,GAAGC,eAEHxB,KAAKqB,YAOTpB,MAAO,WACHR,EAAEI,SAASC,MAAMwB,YAAY,oDAC7B7B,EAAE,kDAAkDgC,SAGpD,MAAMC,EAAmC,oBAAhBC,YAA8BC,MAAQD,YAC/D9B,SAASC,KAAK+B,cAAe,IAAIH,EAAW,mBAIhDL,SAAU,WAEN,IAAIS,EAASrC,EAAE,sBACXsC,EAActC,EAAE,4BAChBuC,EAAgBvC,EAAE,8BAEtBsC,EAAYE,WAAW,SAEvB,IAAIC,EAAsBF,EAAcG,cACpCC,EAAeN,EAAOO,SACtBC,EAAcR,EAAOS,QAErBC,EADoBT,EAAYI,cACYD,EAEhDJ,EAAOW,IAAI,CACPC,eAAgBJ,EAAc,EAC9BK,cAAeP,EAAe,IAG7BA,EAAeI,EAAwB,GACxCT,EAAYM,OAAQD,EAAeF,KAO/CxC,YAAYC,MAAMC,UAItB,IAAIgD,SAAW,KAEfpD,OAAOqD,QAAQ9C,GAAI,UAAU,WACzB+C,aAAaF,UACbA,SAAWG,YAAW,WAClBrD,YAAYC,MAAM0B,aACnB","file":"modal.min.js","sourcesContent":["/**\n * AutomateWoo Modal\n */\njQuery(function($) {\n\n    AutomateWoo.Modal = {\n\n        init: function(){\n\n            $(document.body).on( 'click', '.js-close-automatewoo-modal', this.close );\n            $(document.body).on( 'click', '.automatewoo-modal-overlay', this.close );\n            $(document.body).on( 'click', '.js-open-automatewoo-modal', this.handle_link );\n\n            $(document).on( 'keydown', function(e) {\n                if ( e.keyCode === 27 ) {\n                    AutomateWoo.Modal.close();\n                }\n            });\n\n        },\n\n\n        handle_link: function(e){\n            e.preventDefault();\n\n            var $a = $(this);\n            var type = $a.data( 'automatewoo-modal-type' );\n            var size = $a.data( 'automatewoo-modal-size' );\n\n            if ( type === 'ajax' ) {\n                AutomateWoo.Modal.open( type, size );\n                AutomateWoo.Modal.loading();\n\n                $.post( $a.attr('href'), {}, function( response ){\n                    AutomateWoo.Modal.contents( response );\n                });\n            }\n            else if ( type === 'inline' ) {\n                var contents = $( $a.data( 'automatewoo-modal-contents' ) ).html();\n                AutomateWoo.Modal.open( type, size );\n                AutomateWoo.Modal.contents( contents );\n            }\n        },\n\n\n        open: function( type, size ) {\n\n            var classes = [ 'automatewoo-modal--type-' + type ];\n\n            if ( size ) {\n                classes.push( 'automatewoo-modal--size-' + size );\n            }\n\n            $(document.body).addClass('automatewoo-modal-open').append('<div class=\"automatewoo-modal-overlay\"></div>');\n            $(document.body).append('<div class=\"automatewoo-modal ' + classes + '\"><div class=\"automatewoo-modal__contents\"><div class=\"automatewoo-modal__header\"></div></div><div class=\"automatewoo-icon-close js-close-automatewoo-modal\"></div></div>');\n            this.position();\n        },\n\n\n        loading: function() {\n            $(document.body).addClass('automatewoo-modal-loading');\n        },\n\n\n        contents: function ( contents ) {\n            $(document.body).removeClass('automatewoo-modal-loading');\n            $('.automatewoo-modal__contents').html(contents);\n\n            AW.initTooltips();\n\n            this.position();\n        },\n\n        /**\n         * Closes modal, by changin classes on `document.body` and removing modal content and overlay elements.\n         * @fires awmodal-close on the `document.body`.\n         */\n        close: function() {\n            $(document.body).removeClass('automatewoo-modal-open automatewoo-modal-loading');\n            $('.automatewoo-modal, .automatewoo-modal-overlay').remove();\n\n            // Fallback to Event in the browser does not support CustomEvent, like IE.\n            const eventCtor = typeof CustomEvent === 'undefined' ? Event : CustomEvent;\n            document.body.dispatchEvent( new eventCtor( 'awmodal-close' ) );\n        },\n\n\n        position: function() {\n\n            var $modal = $('.automatewoo-modal');\n            var $modal_body = $('.automatewoo-modal__body');\n            var $modal_header = $('.automatewoo-modal__header');\n\n            $modal_body.removeProp('style');\n\n            var modal_header_height = $modal_header.outerHeight();\n            var modal_height = $modal.height();\n            var modal_width = $modal.width();\n            var modal_body_height = $modal_body.outerHeight();\n            var modal_contents_height = modal_body_height + modal_header_height;\n\n            $modal.css({\n                'margin-left': -modal_width / 2,\n                'margin-top': -modal_height / 2\n            });\n\n            if ( modal_height < modal_contents_height - 5 ) {\n                $modal_body.height( modal_height - modal_header_height );\n            }\n        }\n\n    };\n\n\n    AutomateWoo.Modal.init();\n\n});\n\nvar throttle = null;\n\njQuery(window).on( 'resize', function(){\n    clearTimeout(throttle);\n    throttle = setTimeout(function(){\n        AutomateWoo.Modal.position();\n    }, 50);\n});\n"]}
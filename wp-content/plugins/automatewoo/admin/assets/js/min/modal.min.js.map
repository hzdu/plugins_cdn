{"version":3,"file":"modal.min.js","mappings":"2BAMAA,QAAQ,SAAWC,GAClBC,YAAYC,MAAQ,CACnBC,OACCH,EAAGI,SAASC,MAAOC,GAClB,QACA,8BACAC,KAAKC,OAENR,EAAGI,SAASC,MAAOC,GAClB,QACA,6BACAC,KAAKC,OAENR,EAAGI,SAASC,MAAOC,GAClB,QACA,6BACAC,KAAKE,aAGNT,EAAGI,UAAWE,GAAI,WAAW,SAAWI,GACpB,KAAdA,EAAEC,SACNV,YAAYC,MAAMM,OAEpB,GACD,EAEAC,YAAaC,GACZA,EAAEE,iBAEF,MAAMC,EAAKb,EAAGO,MACRO,EAAOD,EAAGE,KAAM,0BAChBC,EAAOH,EAAGE,KAAM,0BAEtB,GAAc,SAATD,EACJb,YAAYC,MAAMe,KAAMH,EAAME,GAC9Bf,YAAYC,MAAMgB,UAElBlB,EAAEmB,KAAMN,EAAGO,KAAM,QAAU,CAAC,GAAG,SAAWC,GACzCpB,YAAYC,MAAMoB,SAAUD,EAC7B,SACM,GAAc,WAATP,EAAoB,CAC/B,MAAMQ,EAAWtB,EAChBa,EAAGE,KAAM,+BACRQ,OACFtB,YAAYC,MAAMe,KAAMH,EAAME,GAC9Bf,YAAYC,MAAMoB,SAAUA,EAC7B,CACD,EAEAL,KAAMH,EAAME,GACX,MAAMQ,EAAU,CAAE,2BAA6BV,GAE1CE,GACJQ,EAAQC,KAAM,2BAA6BT,GAG5ChB,EAAGI,SAASC,MACVqB,SAAU,0BACVC,OAAQ,iDACV3B,EAAGI,SAASC,MAAOsB,OAClB,iCACCH,EACA,6KAEFjB,KAAKqB,UACN,EAEAV,UACClB,EAAGI,SAASC,MAAOqB,SAAU,4BAC9B,EAEAJ,SAAUA,GACTtB,EAAGI,SAASC,MAAOwB,YAAa,6BAChC7B,EAAG,gCAAiCuB,KAAMD,GAE1CQ,GAAGC,eAEHxB,KAAKqB,UACN,EAOApB,QACCR,EAAGI,SAASC,MAAOwB,YAClB,oDAED7B,EAAG,kDAAmDgC,SAGtD,MAAMC,EACkB,oBAAhBC,YAA8BC,MAAQD,YAC9C9B,SAASC,KAAK+B,cAAe,IAAIH,EAAW,iBAC7C,EAEAL,WACC,MAAMS,EAASrC,EAAG,sBACZsC,EAAatC,EAAG,4BAChBuC,EAAevC,EAAG,8BAExBsC,EAAWE,WAAY,SAEvB,MAAMC,EAAoBF,EAAaG,cACjCC,EAAcN,EAAOO,SACrBC,EAAaR,EAAOS,QAEpBC,EADkBT,EAAWI,cACWD,EAE9CJ,EAAOW,IAAK,CACX,eAAgBH,EAAa,EAC7B,cAAeF,EAAc,IAGzBA,EAAcI,EAAsB,GACxCT,EAAWM,OAAQD,EAAcF,EAEnC,GAGDxC,YAAYC,MAAMC,MACnB,IAIA,IAAI8C,SAAW,KAEflD,OAAQmD,QAAS5C,GAAI,UAAU,WAC9B6C,aAAcF,UACdA,SAAWG,YAAY,WACtBnD,YAAYC,MAAM0B,UACnB,GAAG,GACJ","sources":["webpack://automatewoo/./admin/assets/js/modal.js"],"sourcesContent":["// Register eslint ignored glabals - to be revisited.\n// https://github.com/woocommerce/automatewoo/issues/1212\n/* global AutomateWoo, AW, CustomEvent */\n/**\n * AutomateWoo Modal\n */\njQuery( function ( $ ) {\n\tAutomateWoo.Modal = {\n\t\tinit() {\n\t\t\t$( document.body ).on(\n\t\t\t\t'click',\n\t\t\t\t'.js-close-automatewoo-modal',\n\t\t\t\tthis.close\n\t\t\t);\n\t\t\t$( document.body ).on(\n\t\t\t\t'click',\n\t\t\t\t'.automatewoo-modal-overlay',\n\t\t\t\tthis.close\n\t\t\t);\n\t\t\t$( document.body ).on(\n\t\t\t\t'click',\n\t\t\t\t'.js-open-automatewoo-modal',\n\t\t\t\tthis.handle_link\n\t\t\t);\n\n\t\t\t$( document ).on( 'keydown', function ( e ) {\n\t\t\t\tif ( e.keyCode === 27 ) {\n\t\t\t\t\tAutomateWoo.Modal.close();\n\t\t\t\t}\n\t\t\t} );\n\t\t},\n\n\t\thandle_link( e ) {\n\t\t\te.preventDefault();\n\n\t\t\tconst $a = $( this );\n\t\t\tconst type = $a.data( 'automatewoo-modal-type' );\n\t\t\tconst size = $a.data( 'automatewoo-modal-size' );\n\n\t\t\tif ( type === 'ajax' ) {\n\t\t\t\tAutomateWoo.Modal.open( type, size );\n\t\t\t\tAutomateWoo.Modal.loading();\n\n\t\t\t\t$.post( $a.attr( 'href' ), {}, function ( response ) {\n\t\t\t\t\tAutomateWoo.Modal.contents( response );\n\t\t\t\t} );\n\t\t\t} else if ( type === 'inline' ) {\n\t\t\t\tconst contents = $(\n\t\t\t\t\t$a.data( 'automatewoo-modal-contents' )\n\t\t\t\t).html();\n\t\t\t\tAutomateWoo.Modal.open( type, size );\n\t\t\t\tAutomateWoo.Modal.contents( contents );\n\t\t\t}\n\t\t},\n\n\t\topen( type, size ) {\n\t\t\tconst classes = [ 'automatewoo-modal--type-' + type ];\n\n\t\t\tif ( size ) {\n\t\t\t\tclasses.push( 'automatewoo-modal--size-' + size );\n\t\t\t}\n\n\t\t\t$( document.body )\n\t\t\t\t.addClass( 'automatewoo-modal-open' )\n\t\t\t\t.append( '<div class=\"automatewoo-modal-overlay\"></div>' );\n\t\t\t$( document.body ).append(\n\t\t\t\t'<div class=\"automatewoo-modal ' +\n\t\t\t\t\tclasses +\n\t\t\t\t\t'\"><div class=\"automatewoo-modal__contents\"><div class=\"automatewoo-modal__header\"></div></div><div class=\"automatewoo-icon-close js-close-automatewoo-modal\"></div></div>'\n\t\t\t);\n\t\t\tthis.position();\n\t\t},\n\n\t\tloading() {\n\t\t\t$( document.body ).addClass( 'automatewoo-modal-loading' );\n\t\t},\n\n\t\tcontents( contents ) {\n\t\t\t$( document.body ).removeClass( 'automatewoo-modal-loading' );\n\t\t\t$( '.automatewoo-modal__contents' ).html( contents );\n\n\t\t\tAW.initTooltips();\n\n\t\t\tthis.position();\n\t\t},\n\n\t\t/**\n\t\t * Closes modal, by changin classes on `document.body` and removing modal content and overlay elements.\n\t\t *\n\t\t * @fires awmodal-close on the `document.body`.\n\t\t */\n\t\tclose() {\n\t\t\t$( document.body ).removeClass(\n\t\t\t\t'automatewoo-modal-open automatewoo-modal-loading'\n\t\t\t);\n\t\t\t$( '.automatewoo-modal, .automatewoo-modal-overlay' ).remove();\n\n\t\t\t// Fallback to Event in the browser does not support CustomEvent, like IE.\n\t\t\tconst eventCtor =\n\t\t\t\ttypeof CustomEvent === 'undefined' ? Event : CustomEvent;\n\t\t\tdocument.body.dispatchEvent( new eventCtor( 'awmodal-close' ) );\n\t\t},\n\n\t\tposition() {\n\t\t\tconst $modal = $( '.automatewoo-modal' );\n\t\t\tconst $modalBody = $( '.automatewoo-modal__body' );\n\t\t\tconst $modalHeader = $( '.automatewoo-modal__header' );\n\n\t\t\t$modalBody.removeProp( 'style' );\n\n\t\t\tconst modalHeaderHeight = $modalHeader.outerHeight();\n\t\t\tconst modalHeight = $modal.height();\n\t\t\tconst modalWidth = $modal.width();\n\t\t\tconst modalBodyHeight = $modalBody.outerHeight();\n\t\t\tconst modalContentsHeight = modalBodyHeight + modalHeaderHeight;\n\n\t\t\t$modal.css( {\n\t\t\t\t'margin-left': -modalWidth / 2,\n\t\t\t\t'margin-top': -modalHeight / 2,\n\t\t\t} );\n\n\t\t\tif ( modalHeight < modalContentsHeight - 5 ) {\n\t\t\t\t$modalBody.height( modalHeight - modalHeaderHeight );\n\t\t\t}\n\t\t},\n\t};\n\n\tAutomateWoo.Modal.init();\n} );\n\n// FIXME: refactor to remove this global.\n// https://github.com/woocommerce/automatewoo/issues/1212\nlet throttle = null;\n\njQuery( window ).on( 'resize', function () {\n\tclearTimeout( throttle );\n\tthrottle = setTimeout( function () {\n\t\tAutomateWoo.Modal.position();\n\t}, 50 );\n} );\n"],"names":["jQuery","$","AutomateWoo","Modal","init","document","body","on","this","close","handle_link","e","keyCode","preventDefault","$a","type","data","size","open","loading","post","attr","response","contents","html","classes","push","addClass","append","position","removeClass","AW","initTooltips","remove","eventCtor","CustomEvent","Event","dispatchEvent","$modal","$modalBody","$modalHeader","removeProp","modalHeaderHeight","outerHeight","modalHeight","height","modalWidth","width","modalContentsHeight","css","throttle","window","clearTimeout","setTimeout"],"sourceRoot":""}
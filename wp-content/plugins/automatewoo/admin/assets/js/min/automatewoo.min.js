const AutomateWoo={},AW={};window.AutomateWoo=AutomateWoo,function(t){AW.init=function(){AW.params=automatewooLocalizeScript,AW.initTooltips(),AW.initWorkflowStatusSwitch(),AW.initShowHide(),AW.initHoverableDates(),AW.initBeforeAfterDayField(),t(document.body).on("wc-enhanced-select-init",(function(){AW.initEnhancedSelects()})),t(document.body).on("automatewoo_trigger_changed",AW.initBeforeAfterDayField)},AW.initTooltips=function(){t(".automatewoo-help-tip, .automatewoo-tiptip").tipTip({attribute:"data-tip",fadeIn:50,fadeOut:50,delay:200})},AW.initEnhancedSelects=function(){t("select.automatewoo-json-search").filter(":not(.enhanced)").each((function(){const e={allowClear:!!t(this).data("allow_clear"),placeholder:t(this).data("placeholder"),minimumInputLength:"1",escapeMarkup(t){return t},ajax:{url:AW.params.url.ajax,dataType:"json",quietMillis:250,data(e){const o={term:e.term,action:t(this).data("action")},a=t(this).data("pass-sibling");if(a){const e=t('[name="'+a+'"]');e.length&&(o.sibling=e.val())}return o},processResults(e){const o=[];return e&&t.each(e,(function(t,e){o.push({id:t,text:e})})),{results:o}},cache:!0}};t(this).select2(e).addClass("enhanced")}))},AW.initBeforeAfterDayField=function(){t(".automatewoo-before-after-day-field-group__field--type").on("change",(function(){const e=t(this),o=e.siblings(".automatewoo-before-after-day-field-group__field--days");"on_the_day"===e.val()?o.hide():o.show()})).trigger("change")},AW.initWorkflowStatusSwitch=function(){t(".aw-switch.js-toggle-workflow-status").on("click",(function(){const e=t(this);if(e.is(".aw-loading"))return;const o="on"===e.attr("data-aw-switch")?"off":"on";e.addClass("aw-loading"),e.attr("data-aw-switch",o),t.post(ajaxurl,{action:"aw_toggle_workflow_status",workflow_id:e.attr("data-workflow-id"),new_state:o,nonce:AW.params.nonces.aw_toggle_workflow_status},(function(){e.removeClass("aw-loading")}))}))},AW.price=function(t){let e=t.toFixed(2).replace(".",AW.params.locale.currency_decimal_separator).replace(/\d(?=(\d{3})+(\D|$))/g,"$&"+AW.params.locale.currency_thousand_separator);const o=AW.params.locale.currency_symbol;switch(AW.params.locale.currency_position){case"right":e+=o;break;case"right_space":e=e+" "+o;break;case"left":e=o+e;break;default:e=o+" "+e}return e},AW.block=function(t){t.block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},AW.initShowHide=function(){const e=function(e){const o=e.data("automatewoo-bind"),a=e.val(),i=e.is('input[type="checkbox"]');t("[data-automatewoo-show]").each((function(){if(i&&t(this).data("automatewoo-show")===o)e.is(":checked")?t(this).show():t(this).hide();else{const e=t(this).data("automatewoo-show").split("=");if(e[0]!==o)return;-1!==e[1].split("|").indexOf(a)?t(this).show():t(this).hide()}})),t("[data-automatewoo-hide]").each((function(){if(i&&t(this).data("automatewoo-hide")===o)e.is(":checked")?t(this).hide():t(this).show();else{const e=t(this).data("automatewoo-hide").split("=");if(e[0]!==o)return;-1!==e[1].split("|").indexOf(a)?t(this).hide():t(this).show()}}))};t(document).on("change","[data-automatewoo-bind]",(function(){e(t(this))})),t("[data-automatewoo-bind]").each((function(){e(t(this))}))},AW.initHoverableDates=function(){const e=".automatewoo-hoverable-date";t(document.body).on("mouseenter",e,(function(){t(this).text(t(this).data("automatewoo-date-no-diff"))})).on("mouseleave",e,(function(){t(this).text(t(this).data("automatewoo-date-with-diff"))}))},t((function(){AW.init()}))}(jQuery),jQuery((function(t){Object.assign(AutomateWoo,{_email_preview_window:null,init(){this.init_notice_dismiss(),this.init_date_pickers()},notices:{success(t,e){e.length&&e.before('<div class="automatewoo-notice updated fade"><p><strong>'+t+"</strong></p></div>")},error(t,e){e.length&&e.before('<div class="automatewoo-notice error fade"><p><strong>'+t+"</strong></p></div>")},clear_all(){t(".automatewoo-notice").slideUp()}},init_notice_dismiss(){t(".aw-notice-system-error").on("click",".notice-dismiss",(function(){t.ajax({url:ajaxurl,data:{action:"aw_dismiss_system_error_notice",nonce:AW.params.nonces.aw_dismiss_system_error_notice}})})),t("[data-automatewoo-dismissible-notice]").on("click",".notice-dismiss",(function(){const e=t(this).parents("[data-automatewoo-dismissible-notice]");t.post({url:ajaxurl,data:{action:"automatewoo_remove_notice",notice:e.data("automatewoo-dismissible-notice"),nonce:AW.params.nonces.remove_notice}})}))},init_date_pickers(){t(".automatewoo-date-picker").datepicker({dateFormat:"yy-mm-dd",numberOfMonths:1,showButtonPanel:!0})},isEmailPreviewOpen(){return this._email_preview_window&&!this._email_preview_window.closed},openLoadingEmailPreview(){this.openPreviewWindow(AW.params.url.admin+"admin.php?page=automatewoo-preview&action=loading")},open_email_preview(e,o){const a={page:"automatewoo-preview",action:"preview-ui",type:e,args:o};this.openPreviewWindow(AW.params.url.admin+"admin.php?"+t.param(a))},openPreviewWindow(t){this._email_preview_window=window.open(t,"automatewoo_preview","titlebar=no,toolbar=no,height=768,width=860,resizable=yes,status=no")}}),AutomateWoo.init()}));
//# sourceMappingURL=automatewoo.min.js.map
!function(i,r){function t(i){this.$form=i,this.xhr=!1,this.mapping=wc_gc_import_params.mapping,this.position=0,this.file=wc_gc_import_params.file,this.update_existing=wc_gc_import_params.update_existing,this.delimiter=wc_gc_import_params.delimiter,this.security=wc_gc_import_params.import_nonce,this.imported=0,this.failed=0,this.updated=0,this.skipped=0,this.$form.find(".woocommerce-importer-progress").val(0),this.run_import=this.run_import.bind(this),this.run_import()}t.prototype.run_import=function(){var e=this;i.ajax({type:"POST",url:ajaxurl,data:{action:"woocommerce_gc_do_ajax_import",position:e.position,mapping:e.mapping,file:e.file,update_existing:e.update_existing,delimiter:e.delimiter,security:e.security},dataType:"json",success:function(i){var t;i.success&&(e.position=i.data.position,e.imported+=i.data.imported,e.failed+=i.data.failed,e.updated+=i.data.updated,e.skipped+=i.data.skipped,e.$form.find(".woocommerce-importer-progress").val(i.data.percentage),"done"===i.data.position?(t=wc_gc_import_params.file.split("/").pop(),r.location=i.data.url+"&giftcards-imported="+parseInt(e.imported,10)+"&giftcards-failed="+parseInt(e.failed,10)+"&giftcards-updated="+parseInt(e.updated,10)+"&giftcards-skipped="+parseInt(e.skipped,10)+"&file-name="+t):e.run_import())}}).fail(function(i){r.console.log(i)})},i.fn.wc_giftcard_importer=function(){return new t(this),this},i(".woocommerce-importer").wc_giftcard_importer()}(jQuery,window);
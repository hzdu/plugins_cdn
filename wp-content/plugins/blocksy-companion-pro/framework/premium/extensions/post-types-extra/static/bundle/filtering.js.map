{"version":3,"file":"filtering.js","mappings":"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","sources":["webpack://blocksy-companion/external var \"window.ctEvents\"","webpack://blocksy-companion/external var \"window.ctFrontend\"","webpack://blocksy-companion/webpack/bootstrap","webpack://blocksy-companion/webpack/runtime/compat get default export","webpack://blocksy-companion/webpack/runtime/define property getters","webpack://blocksy-companion/webpack/runtime/hasOwnProperty shorthand","webpack://blocksy-companion/webpack/runtime/make namespace object","webpack://blocksy-companion/./framework/premium/extensions/post-types-extra/static/js/filtering.js"],"sourcesContent":["module.exports = window.ctEvents;","module.exports = window.ctFrontend;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import ctEvents from 'ct-events'\nimport { registerDynamicChunk } from 'blocksy-frontend'\n\nfunction updateQueryStringParameter(uri, key, value) {\n\tvar re = new RegExp('([?&])' + key + '=.*?(&|#|$)', 'i')\n\tif (uri.match(re)) {\n\t\treturn uri.replace(re, '$1' + key + '=' + value + '$2')\n\t} else {\n\t\tvar hash = ''\n\t\tif (uri.indexOf('#') !== -1) {\n\t\t\thash = uri.replace(/.*#/, '#')\n\t\t\turi = uri.replace(/#.*/, '')\n\t\t}\n\t\tvar separator = uri.indexOf('?') !== -1 ? '&' : '?'\n\t\treturn uri + separator + key + '=' + value + hash\n\t}\n}\n\nconst getUrlForLink = (el) =>\n\tupdateQueryStringParameter(\n\t\tel.href,\n\t\t'blocksy_prefix',\n\t\tel.closest('[data-prefix]').dataset.prefix\n\t)\n\nconst actuallyOpenForEl = (el) => {\n\tcachedFetch(getUrlForLink(el))\n\t\t.then((response) => response.text())\n\t\t.then((html) => {\n\t\t\tconst div = document.createElement('div')\n\n\t\t\tdiv.innerHTML = html\n\n\t\t\tconst entries = div.querySelector('#main .entries')\n\n\t\t\tif (div.querySelector('title')) {\n\t\t\t\tdocument.title = div.querySelector('title').innerText\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tdiv.querySelector('.hero-section .entry-header') &&\n\t\t\t\tdocument.querySelector('.hero-section .entry-header')\n\t\t\t) {\n\t\t\t\tconst currentRef = document.querySelector(\n\t\t\t\t\t'.hero-section .entry-header'\n\t\t\t\t)\n\n\t\t\t\tcurrentRef.insertAdjacentHTML(\n\t\t\t\t\t'afterend',\n\t\t\t\t\tdiv.querySelector('.hero-section .entry-header').outerHTML\n\t\t\t\t)\n\n\t\t\t\tcurrentRef.remove()\n\t\t\t}\n\n\t\t\tconst foundEntries = document.querySelector('#main .entries')\n\n\t\t\tif (!entries) {\n\t\t\t\tfoundEntries.innerHTML = ''\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tfoundEntries.innerHTML = entries.innerHTML\n\t\t\t\t;[...foundEntries.children].map((entryChild) => {\n\t\t\t\t\tif (entryChild.dataset.reveal) {\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tentryChild.dataset.reveal = 'no'\n\t\t\t\t})\n\n\t\t\t\tlet currentPagination = document.querySelector(\n\t\t\t\t\t'#main .ct-pagination'\n\t\t\t\t)\n\n\t\t\t\tif (currentPagination && currentPagination.infiniteScroll) {\n\t\t\t\t\tcurrentPagination.infiniteScroll.destroy()\n\t\t\t\t}\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tif (currentPagination) {\n\t\t\t\t\t\tcurrentPagination.remove()\n\t\t\t\t\t}\n\n\t\t\t\t\tif (div.querySelector('#main .ct-pagination')) {\n\t\t\t\t\t\tfoundEntries.after(\n\t\t\t\t\t\t\tdiv.querySelector('#main .ct-pagination')\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\n\t\t\t\t\tctEvents.trigger('blocksy:frontend:init')\n\t\t\t\t})\n\t\t\t}, 200)\n\n\t\t\tif (!el.closest('.ct-posts-shortcode')) {\n\t\t\t\thistory.pushState({}, '', el.href)\n\t\t\t}\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.warn('Something went wrong.', err)\n\t\t})\n}\n\nconst store = {}\n\nlet pendingClicks = []\n\nconst flushPendingClicks = () => {\n\t;[...pendingClicks].map((el) => {\n\t\tif (store[getUrlForLink(el)]) {\n\t\t\tactuallyOpenForEl(el)\n\t\t\tpendingClicks = pendingClicks.filter((e) => e !== el)\n\t\t}\n\t})\n}\n\nconst cachedFetch = (url) =>\n\tstore[url]\n\t\t? new Promise((resolve) => {\n\t\t\t\tresolve(store[url])\n\t\t\t\tif (!window.ct_customizer_localizations) {\n\t\t\t\t\tstore[url] = store[url].clone()\n\t\t\t\t}\n\t\t  })\n\t\t: new Promise((resolve) =>\n\t\t\t\tfetch(url).then((response) => {\n\t\t\t\t\tresolve(response)\n\n\t\t\t\t\tif (!window.ct_customizer_localizations) {\n\t\t\t\t\t\tstore[url] = response.clone()\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t  )\n\nconst preloadLink = (el) => {\n\tif (el.preloaded) {\n\t\treturn\n\t}\n\n\tel.preloaded = true\n\n\tcachedFetch(getUrlForLink(el))\n\t\t.then((response) => response.text())\n\t\t.then(() => {\n\t\t\tflushPendingClicks()\n\t\t})\n}\n\nconst fetchForEl = (el) => {\n\tif (el.classList.contains('active')) {\n\t\treturn\n\t}\n\n\tif (el.closest('.ct-dynamic-filter').querySelector('.active')) {\n\t\tel.closest('.ct-dynamic-filter')\n\t\t\t.querySelector('.active')\n\t\t\t.classList.remove('active')\n\t}\n\n\tel.classList.add('active')\n\n\tif (store[getUrlForLink(el)]) {\n\t\tactuallyOpenForEl(el)\n\t} else {\n\t\tpendingClicks.push(el)\n\t}\n}\n\nregisterDynamicChunk('blocksy_adv_cpt_filtering', {\n\tmount: (el, { event }) => {\n\t\tif (event.type !== 'click') {\n\t\t\t;[...document.querySelectorAll('.ct-dynamic-filter a')].map(\n\t\t\t\t(link) => preloadLink(link)\n\t\t\t)\n\n\t\t\treturn\n\t\t}\n\n\t\tpreloadLink(el)\n\t\tfetchForEl(el)\n\t},\n})\n"],"names":["ctEvents","registerDynamicChunk","updateQueryStringParameter","uri","key","value","re","RegExp","match","replace","hash","indexOf","separator","getUrlForLink","el","href","closest","dataset","prefix","actuallyOpenForEl","cachedFetch","then","response","text","html","div","document","createElement","innerHTML","entries","querySelector","title","innerText","currentRef","insertAdjacentHTML","outerHTML","remove","foundEntries","setTimeout","children","map","entryChild","reveal","currentPagination","infiniteScroll","destroy","after","trigger","history","pushState","catch","err","console","warn","store","pendingClicks","flushPendingClicks","filter","e","url","Promise","resolve","window","ct_customizer_localizations","clone","fetch","preloadLink","preloaded","fetchForEl","classList","contains","add","push","mount","event","type","querySelectorAll","link"],"sourceRoot":""}
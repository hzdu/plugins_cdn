!function(s){function d(t){var t=t.split(".").pop(),e=new Array("pdf","doc","xls","ppt","mp3","mp4","zip"),i=new Array("docx","xlsx","pptx"),a=new Array("jpg","jpeg","png","gif"),u=null;return-1!=e.indexOf(t)?u=t:-1!=i.indexOf(t)?u=t.substr(0,t.length-1):-1==a.indexOf(t)&&(u="default"),u}s(document).ready(function(){var e;s("body").on("click",".wp_urfu_upload",function(t){var l=s(this),n=(t.preventDefault(),[]),t=s(this).closest("td").find(".urfu-file-upload-input").val();1<=t.length&&n.push(t),(e=wp.media.frames.file_frame=wp.media({title:urfu_upload_script_data.uploader_title,button:{text:urfu_upload_script_data.use_this_file},multiple:!1})).on("select",function(){for(var t=e.state().get("selection").toJSON(),i=[],a="",u=0;u<t.length;u++){i.push(t[u].id),t[u].sizes!==undefined?t[u].sizes.thumbnail!==undefined?t[u].sizes.thumbnail:t[u].sizes.full.url:t[u].icon;let e={};s.ajax({url:urfu_upload_script_data.ajax_url+"?action=user_registration_file_upload_admin_upload&security="+urfu_upload_script_data.urfu_admin_upload_nonce,type:"POST",data:t[u],success:function(t){t.success&&(e={id:t.data.attachment_id,url:t.data.attachment_url,filename:t.data.file_name,thumbnail:t.data.attachment_url},ext=d(e.filename),ext&&(e.thumbnail=urfu_upload_script_data.home_url+"/images/filetypes/"+ext+".svg"),a='<div class="urfu-file-details">',a=(a=(a=(a+='<div class="urfu-file-thumb">')+'<img src="'+e.thumbnail+'"/></div><div class="urfu-file-heading">')+'<h4 class="urfu-file-name" title="'+e.filename+'">'+e.filename+'</h4><span class="urfu-file-size">5 MB</span></div>')+'<div class="urfu-file-action"><a class="urfu-remove" data-attachment-id="'+e.id+'"><span class="dashicons dashicons-trash" title="Delete"></span></a></div></div>',n.push(e.id),l.closest("td").find(".urfu-file-upload-input").val(n.toString()),l.closest("td").find(".urfu-file-uploaded").append(a))}})}}),e.open()})}),s(document).on("click",".urfu-remove",function(){for(var t=s(this).data("attachment-id"),e=s(this).closest("td").find(".urfu-file-upload-input").val().split(","),i=e.length-1;0<=i;i--)e[i]==t&&e.splice(i,1);s(this).closest("td").find(".urfu-file-upload-input").attr("value",e.toString()),s(this).closest(".urfu-file-details").remove()}),s(document).ready(function(){s(".urfu-file-uploaded").find(".urfu-file-details").each(function(){var t=s(this).find(".urfu-file-name").text(),e=s(this).find("img");e=e,fileIcon=d(t),null!==fileIcon&&e.attr("src",urfu_upload_script_data.home_url+"/images/filetypes/"+fileIcon+".svg")})})}(jQuery);
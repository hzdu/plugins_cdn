!function(){var e,o,t;e=jQuery,o=0,t=0,e.fn.extend({openModal:function(a){var i=e("body").css("overflow","hidden"),n="tvd-materialize-lean-overlay-"+ ++t,c=e(this),s=e('<div class="tvd-lean-overlay"></div>'),l=++o;s.attr("id",n).css("z-index",1e4+2*l),c.data("tvd-overlay-id",n).css("z-index",1e4+2*l+1),i.append(s),a=e.extend({opacity:.7,top:"10%",in_duration:350,out_duration:250,ready:void 0,complete:void 0,dismissible:!0,starting_top:"4%",overlay_class:""},a),s.addClass(a.overlay_class),a.dismissible&&(s.click((function(){c.closeModal(a)})),e(document).on("keyup.leanModal"+n,(function(e){27===e.keyCode&&c.closeModal(a)}))),c.on("click.close",".tvd-modal-close",(function(e){c.closeModal(a)})),s.css({display:"block",opacity:0}),c.css({display:"block",opacity:0}),s.velocity({opacity:a.opacity},{duration:a.in_duration,queue:!1,ease:"easeOutCubic"}),c.data("tvd-associated-overlay",s[0]),c.hasClass("bottom-sheet")?c.velocity({bottom:"0",opacity:1},{duration:a.in_duration,queue:!1,ease:"easeOutCubic",complete:function(){"function"==typeof a.ready&&a.ready()}}):(e.Velocity.hook(c,"scaleX",.7),c.css({top:a.starting_top}),c.velocity({top:a.top||"10%",opacity:1,scaleX:"1"},{duration:a.in_duration,queue:!1,ease:"easeOutCubic",complete:function(){"function"==typeof a.ready&&a.ready()}}))}}),e.fn.extend({closeModal:function(t){var a=e(this),i=a.data("tvd-overlay-id"),n=e("#"+i);if(t=e.extend({out_duration:250,complete:void 0},t),e("body").css("overflow",""),a.off("click.close"),e(document).off("keyup.leanModal"+i),n.velocity({opacity:0},{duration:t.out_duration,queue:!1,ease:"easeOutQuart"}),o--,a.hasClass("bottom-sheet"))a.velocity({bottom:"-100%",opacity:0},{duration:t.out_duration,queue:!1,ease:"easeOutCubic",complete:function(){n.css({display:"none"}),"function"==typeof t.complete&&t.complete(),n.remove()}});else{if(0===t.out_duration)return a.hide(0),"function"==typeof t.complete&&t.complete(),void n.remove();a.velocity({top:t.starting_top,opacity:0,scaleX:.7},{begin:function(){"function"==typeof t.beforeClose&&t.beforeClose()},duration:t.out_duration,complete:function(){"function"==typeof t.complete&&t.complete(),e(this).css("display","none"),n.remove()}})}}}),e.fn.extend({leanModal:function(o){return this.each((function(){var t=e(this),a=e.extend({starting_top:"4%"},o,t.data());t.click((function(o){a.starting_top=(e(this).offset().top-e(window).scrollTop())/1.15,a.elem=t;var i=t.attr("href")||"#"+t.data("target");return e(i).openModal(a),o.preventDefault(),o.stopPropagation(),!1}))}))}})}();
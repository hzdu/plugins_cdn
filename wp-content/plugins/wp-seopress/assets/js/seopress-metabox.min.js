document.addEventListener("DOMContentLoaded",(function(){const $=jQuery;function sp_get_field_length(e){return e.val().length>0?meta=e.val()+" ":meta=e.val(),meta}$("#seopress-tabs .hidden").removeClass("hidden"),$("#seopress-tabs").tabs();var debounce=function(func,wait,immediate){var timeout;return function(){var context=this,args=arguments,later=function(){timeout=null,immediate||func.apply(context,args)},callNow=immediate&&!timeout;clearTimeout(timeout),timeout=setTimeout(later,wait),callNow&&func.apply(context,args)}};$("#seopress_titles_title_meta").on("change paste keyup",debounce((function(e){const template=$(this).val(),termId=$("#seopress-tabs").data("term-id"),homeId=$("#seopress-tabs").data("home-id");$.ajax({method:"GET",url:seopressAjaxRealPreview.ajax_url,data:{action:"get_preview_meta_title",template:template,post_id:$("#seopress-tabs").attr("data_id"),term_id:0===termId.length?void 0:termId,home_id:0===homeId.length?void 0:homeId,nonce:seopressAjaxRealPreview.get_preview_meta_title},success:function(response){const{data:data}=response;data.length>0?($(".snippet-title").hide(),$(".snippet-title-default").hide(),$(".snippet-title-custom").text(data),$(".snippet-title-custom").show(),$("#seopress_titles_title_counters").length>0&&$("#seopress_titles_title_counters").text(data.length),$("#seopress_titles_title_pixel").length>0&&$("#seopress_titles_title_pixel").text(pixelTitle(data))):($(".snippet-title").hide(),$(".snippet-title-custom").hide(),$(".snippet-title-default").show())}})}),300)),$("#seopress-tag-single-title").click((function(){$("#seopress_titles_title_meta").val(sp_get_field_length($("#seopress_titles_title_meta"))+$("#seopress-tag-single-title").attr("data-tag")),$("#seopress_titles_title_meta").trigger("paste")})),$("#seopress-tag-single-site-title").click((function(){$("#seopress_titles_title_meta").val(sp_get_field_length($("#seopress_titles_title_meta"))+$("#seopress-tag-single-site-title").attr("data-tag")),$("#seopress_titles_title_meta").trigger("paste")})),$("#seopress-tag-single-excerpt").click((function(){$("#seopress_titles_desc_meta").val(sp_get_field_length($("#seopress_titles_desc_meta"))+$("#seopress-tag-single-excerpt").attr("data-tag")),$("#seopress_titles_title_meta").trigger("paste")})),$("#seopress-tag-single-sep").click((function(){$("#seopress_titles_title_meta").val(sp_get_field_length($("#seopress_titles_title_meta"))+$("#seopress-tag-single-sep").attr("data-tag")),$("#seopress_titles_title_meta").trigger("paste")}));let alreadyBind=!1;$(".seopress-tag-dropdown").each((function(item){const _self=$(this);function handleClickLi(current){_self.hasClass("tag-title")&&($("#seopress_titles_title_meta").val(sp_get_field_length($("#seopress_titles_title_meta"))+$(current).attr("data-value")),$("#seopress_titles_title_meta").trigger("paste")),_self.hasClass("tag-description")&&($("#seopress_titles_desc_meta").val(sp_get_field_length($("#seopress_titles_desc_meta"))+$(current).attr("data-value")),$("#seopress_titles_desc_meta").trigger("paste"))}$(this).on("click",(function(){function closeItem(e){$(e.target).hasClass("dashicons")||$(e.target).hasClass("seopress-tag-single-all")||(alreadyBind=!1,$(document).off("click",closeItem),$(".sp-wrap-tag-variables-list").removeClass("open"))}$(this).next(".sp-wrap-tag-variables-list").toggleClass("open"),$(this).next(".sp-wrap-tag-variables-list").find("li").on("click",(function(e){handleClickLi(this),e.stopImmediatePropagation()})).on("keyup",(function(e){13===e.keyCode&&(handleClickLi(this),e.stopImmediatePropagation())})),alreadyBind||(alreadyBind=!0,$(document).on("click",closeItem))}))}))}));
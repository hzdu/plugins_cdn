/* empty css             */import{a as M,c as de,m as _t,b as E}from"./vuex.esm.8fdeb4b6.js";import{g as Is,r as tn}from"./params.597cd0f5.js";import{e as Wn,a as Kn,d as hr,b as Gu,C as Ll,f as Vo,S as qn,g as Fu}from"./Caret.6d7f2e24.js";import{T as Jn}from"./WpTable.e9a9eb34.js";import{n as $}from"./_plugin-vue2_normalizer.61652a7c.js";import{s as Hu,d as El,h as Vu,m as zt}from"./index.da77b995.js";import{J as Me}from"./JsonValues.870a4901.js";import{S as Uu}from"./SaveChanges.e40a9083.js";import{C as Pt,S as jn,a as Nl,b as Wu,c as Ku,d as qu,e as Ju,f as ju,g as Yu,h as Qu,i as Xu,j as Zu,k as td,l as ed,m as sd,n as id,o as rd,p as nd,q as od,r as ad,s as ld,t as cd,u as hd,v as ud,w as dd,x as pd}from"./index.0395bbae.js";import{C as G}from"./SettingsRow.edbb3005.js";import{B as fd}from"./Checkbox.60ba2f56.js";import{G as md,a as gd}from"./Row.830f6397.js";import{C as _d,a as yd,S as vd}from"./LicenseKeyBar.ac0fda9d.js";import{S as bd,C as re}from"./Tabs.659e6500.js";import{C as ne,a as kd}from"./Index.ab26f2df.js";import{t as Tr}from"./attachments.506687b9.js";import{M as Yn}from"./MaxCounts.12b45bab.js";import{T as Bl}from"./TruSeoScore.339d22e1.js";import{B as Ke}from"./RadioToggle.e6e54396.js";import{C as $d}from"./GoogleSearchPreview.60bc43a0.js";import{C as et}from"./HtmlTagsEditor.3c4e873a.js";import{C as oe}from"./Tooltip.68a8a92b.js";import{T as xd}from"./Slide.15a07930.js";import{S as zl,a as Gl}from"./Mobile.dbdc2be1.js";import{S as at}from"./Plus.6984df43.js";import{p as Uo}from"./popup.b60b699f.js";import{L as Sd,a as wd,b as Qn,c as Cd,d as Pd,S as Td}from"./Index.58553c81.js";import{S as Xn,a as Zn,b as to,c as eo}from"./Affiliate.e587b0fd.js";import{S as ur}from"./Suggestion.5facc4fd.js";import{C as qs}from"./Blur.f36c594d.js";import{C as so}from"./Index.5c05423e.js";import{R as Ad}from"./RequiredPlans.389a71cb.js";import{I as Fl,a as Hl,U as Tt,g as Vl}from"./Image.ac903a77.js";import{B as At}from"./Img.137dcbf1.js";import{C as Dd}from"./FacebookPreview.06acc9da.js";import{C as Md}from"./TwitterPreview.19b9bba7.js";import{S as Ul}from"./Settings.26e66713.js";import{S as Wl,a as Od}from"./Build.6a71ce0a.js";import{R as Id,A as Rd,L as Ld}from"./Redirects.d662eb4b.js";import{C as io}from"./Index.ffa20ee1.js";import{B as Oe}from"./Datepicker.d7130848.js";import{B as Js}from"./Radio.7965b35c.js";import{B as qe}from"./Textarea.ce149d81.js";import{S as Ed}from"./Information.93f80cbf.js";import{S as Nd}from"./Eye.57c925d7.js";const Bd=()=>{let i=Hu.state.currentPost.postStatus;return El()&&(i=window.wp.data.select("core/editor").getCurrentPostAttribute("status")),i},Je={methods:{setIsDirty(){this.$store.commit("isDirty",!0)},clearIsDirty(){this.$store.commit("isDirty",!1)}}};const zd={components:{BaseCheckbox:fd,GridColumn:md,GridRow:gd},mixins:[Je],data(){return{strings:{useDefaultSettings:this.$t.__("Use Default Settings",this.$td),robotsMeta:this.$t.__("Robots meta:",this.$td),maxSnippet:this.$t.__("Max Snippet",this.$td),maxVideoPreview:this.$t.__("Max Video Preview",this.$td),maxImagePreview:this.$t.__("Max Image Preview",this.$td),standard:this.$t.__("Standard",this.$td),none:this.$t.__("None",this.$td),large:this.$t.__("Large",this.$td),noindex:this.$t.__("No Index",this.$td),nofollow:this.$t.__("No Follow",this.$td),noarchive:this.$t.__("No Archive",this.$td),notranslate:this.$t.__("No Translate",this.$td),noimageindex:this.$t.__("No Image Index",this.$td),nosnippet:this.$t.__("No Snippet",this.$td),noodp:this.$t.__("No ODP",this.$td)}}},computed:{...M(["currentPost"]),imagePreviewOptions(){return[{label:this.strings.none,value:"none"},{label:this.strings.standard,value:"standard"},{label:this.strings.large,value:"large"}]}},methods:{getImagePreview(i){return this.imagePreviewOptions.find(t=>t.value===i)},saveImagePreview(i){this.$set(this.currentPost,"maxImagePreview",i),this.$store.commit("isDirty",!0)}}};var Gd=function(){var t=this,e=t._self._c;return e("div",{staticClass:"aioseo-robots-meta"},[e("base-toggle",{on:{input:t.setIsDirty},model:{value:t.currentPost.default,callback:function(s){t.$set(t.currentPost,"default",s)},expression:"currentPost.default"}},[t._v(" "+t._s(t.strings.useDefaultSettings)+" ")]),t.currentPost.default?t._e():e("div",{staticClass:"global-robots-settings aioseo-description"},[e("span",{staticClass:"robots-meta-title"},[t._v(t._s(t.strings.robotsMeta))]),e("grid-row",{staticClass:"settings"},[this.$aioseo.currentPost.isHomePage?t._e():e("grid-column",{attrs:{xl:"3",md:"4",sm:"6"}},[e("base-checkbox",{attrs:{size:"medium"},on:{input:t.setIsDirty},model:{value:t.currentPost.noindex,callback:function(s){t.$set(t.currentPost,"noindex",s)},expression:"currentPost.noindex"}},[t._v(" "+t._s(t.strings.noindex)+" ")])],1),e("grid-column",{attrs:{xl:"3",md:"4",sm:"6"}},[e("base-checkbox",{attrs:{size:"medium"},on:{input:t.setIsDirty},model:{value:t.currentPost.nofollow,callback:function(s){t.$set(t.currentPost,"nofollow",s)},expression:"currentPost.nofollow"}},[t._v(" "+t._s(t.strings.nofollow)+" ")])],1),e("grid-column",{attrs:{xl:"3",md:"4",sm:"6"}},[e("base-checkbox",{attrs:{size:"medium"},on:{input:t.setIsDirty},model:{value:t.currentPost.noarchive,callback:function(s){t.$set(t.currentPost,"noarchive",s)},expression:"currentPost.noarchive"}},[t._v(" "+t._s(t.strings.noarchive)+" ")])],1),e("grid-column",{attrs:{xl:"3",md:"4",sm:"6"}},[e("base-checkbox",{attrs:{size:"medium"},on:{input:t.setIsDirty},model:{value:t.currentPost.notranslate,callback:function(s){t.$set(t.currentPost,"notranslate",s)},expression:"currentPost.notranslate"}},[t._v(" "+t._s(t.strings.notranslate)+" ")])],1),e("grid-column",{attrs:{xl:"3",md:"4",sm:"6"}},[e("base-checkbox",{attrs:{size:"medium"},on:{input:t.setIsDirty},model:{value:t.currentPost.noimageindex,callback:function(s){t.$set(t.currentPost,"noimageindex",s)},expression:"currentPost.noimageindex"}},[t._v(" "+t._s(t.strings.noimageindex)+" ")])],1),e("grid-column",{attrs:{xl:"3",md:"4",sm:"6"}},[e("base-checkbox",{attrs:{size:"medium"},on:{input:t.setIsDirty},model:{value:t.currentPost.nosnippet,callback:function(s){t.$set(t.currentPost,"nosnippet",s)},expression:"currentPost.nosnippet"}},[t._v(" "+t._s(t.strings.nosnippet)+" ")])],1),e("grid-column",{attrs:{xl:"3",md:"4",sm:"6"}},[e("base-checkbox",{attrs:{size:"medium"},on:{input:t.setIsDirty},model:{value:t.currentPost.noodp,callback:function(s){t.$set(t.currentPost,"noodp",s)},expression:"currentPost.noodp"}},[t._v(" "+t._s(t.strings.noodp)+" ")])],1)],1),e("div",{staticClass:"global-robots-settings-options"},[t.currentPost.nosnippet?t._e():e("div",{staticClass:"aioseo-description max-snippet"},[e("span",[t._v(t._s(t.strings.maxSnippet))]),e("base-input",{attrs:{type:"number",size:"medium"},on:{input:t.setIsDirty},model:{value:t.currentPost.maxSnippet,callback:function(s){t.$set(t.currentPost,"maxSnippet",s)},expression:"currentPost.maxSnippet"}})],1),e("div",{staticClass:"aioseo-description max-video-preview"},[e("span",[t._v(t._s(t.strings.maxVideoPreview))]),e("base-input",{attrs:{type:"number",size:"medium"},on:{input:t.setIsDirty},model:{value:t.currentPost.maxVideoPreview,callback:function(s){t.$set(t.currentPost,"maxVideoPreview",s)},expression:"currentPost.maxVideoPreview"}})],1),t.currentPost.noimageindex?t._e():e("div",{staticClass:"aioseo-description max-image-preview"},[e("span",[t._v(t._s(t.strings.maxImagePreview))]),e("base-select",{attrs:{size:"medium",options:t.imagePreviewOptions,value:t.getImagePreview(t.currentPost.maxImagePreview)},on:{input:s=>t.saveImagePreview(s.value)}})],1)])],1)],1)},Fd=[],Hd=$(zd,Gd,Fd,!1,null,null,null,null);const Vd=Hd.exports;const Ud={components:{CoreAlert:Pt,CoreSettingsRow:G,CoreSingleRobotsMeta:Vd},mixins:[Je,Me],props:{disabled:{type:Boolean,default(){return!1}},type:{type:String,required:!1},object:{type:Object,required:!1}},data(){return{strings:{pageName:this.$t.__("Advanced",this.$td),robotsSetting:this.$t.__("Robots Setting",this.$td),robotsToggle:this.$t.__("Use Default Settings",this.$td),canonicalUrl:this.$t.__("Canonical URL",this.$td),placeholder:this.$t.__("Enter a URL to change the default Canonical URL",this.$td),priorityScore:this.$t.__("Priority Score",this.$td),priority:this.$t.__("Priority",this.$td),frequency:this.$t.__("Frequency",this.$td),priorityFrequencyUpsell:this.$t.sprintf(this.$t.__("This feature is only for licensed %1$s users. %2$s",this.$td),"<strong>AIOSEO Pro</strong>",this.$links.getUpsellLink("post-advanced",this.$constants.GLOBAL_STRINGS.learnMore,"priority-frequency",!0)),keywords:this.$t.__("Keywords",this.$td),tagPlaceholder:this.$t.__("Press enter to create a keyword",this.$td)}}},computed:{...de(["isUnlicensed"]),...M(["currentPost","options"]),getPriorityOptions(){return[{label:this.$t.__("default",this.$td),value:"default"}].concat(this.$constants.PRIORITY_OPTIONS)},getFrequencyOptions(){return[{label:this.$t.__("default",this.$td),value:"default"}].concat(this.$constants.FREQUENCY_OPTIONS)}},methods:{getPriority(i){return this.getPriorityOptions.find(t=>t.value===i)},savePriority(i){this.$set(this.currentPost,"priority",i),this.$store.commit("isDirty",!0)},getFrequency(i){return this.getFrequencyOptions.find(t=>t.value===i)},saveFrequency(i){this.$set(this.currentPost,"frequency",i),this.$store.commit("isDirty",!0)}}};var Wd=function(){var t=this,e=t._self._c;return e("div",{staticClass:"aioseo-tab-content aioseo-post-advanced"},[e("core-settings-row",{attrs:{id:"aioseo-post-robots-setting",name:t.strings.robotsSetting,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("core-single-robots-meta")]},proxy:!0}])}),e("core-settings-row",{attrs:{id:"aioseo-post-canonical-url",name:t.strings.canonicalUrl,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium",placeholder:t.strings.placeholder},on:{input:t.setIsDirty},model:{value:t.currentPost.canonicalUrl,callback:function(s){t.$set(t.currentPost,"canonicalUrl",s)},expression:"currentPost.canonicalUrl"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.priorityScore,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("div",{staticClass:"selectbox-row"},[e("div",{staticClass:"select"},[e("span",[t._v(t._s(t.strings.priority))]),e("base-select",{attrs:{disabled:t.isUnlicensed,size:"medium",options:t.getPriorityOptions,value:t.isUnlicensed?t.getPriority("default"):t.getPriority(t.currentPost.priority)},on:{input:s=>t.isUnlicensed?null:t.savePriority(s.value)}})],1),e("div",{staticClass:"separator"},[e("span"),t._v(" - ")]),e("div",{staticClass:"select"},[e("span",[t._v(t._s(t.strings.frequency))]),e("base-select",{attrs:{disabled:t.isUnlicensed,size:"medium",options:t.getFrequencyOptions,value:t.isUnlicensed?t.getFrequency("default"):t.getFrequency(t.currentPost.frequency)},on:{input:s=>t.isUnlicensed?null:t.saveFrequency(s.value)}})],1)]),t.isUnlicensed?e("core-alert",{staticClass:"inline-upsell",attrs:{type:"blue"}},[e("div",{domProps:{innerHTML:t._s(t.strings.priorityFrequencyUpsell)}})]):t._e()]},proxy:!0}])}),t.options.searchAppearance.advanced.useKeywords?e("core-settings-row",{attrs:{name:t.strings.keywords,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-select",{attrs:{multiple:"",taggable:"",options:t.getJsonValue(t.currentPost.keywords)||[],value:t.getJsonValue(t.currentPost.keywords)||[],"tag-placeholder":t.strings.tagPlaceholder},on:{input:s=>t.currentPost.keywords=t.setJsonValue(s)}})]},proxy:!0}],null,!1,2312666634)}):t._e()],1)},Kd=[],qd=$(Ud,Wd,Kd,!1,null,null,null,null);const Jd=qd.exports,jd={components:{CoreApiBar:_d,CoreLicenseKeyBar:yd},computed:{...de(["isUnlicensed"]),...M(["pong"])}};var Yd=function(){var t=this,e=t._self._c;return e("div",[t.pong?t._e():e("core-api-bar"),t.$isPro&&t.isUnlicensed&&t.pong?e("core-license-key-bar"):t._e()],1)},Qd=[],Xd=$(jd,Yd,Qd,!1,null,null,null,null);const Kl=Xd.exports;const Zd={components:{CoreTooltip:oe,SvgCaret:Wn,SvgCircleCheck:Kn,SvgCircleQuestionMark:jn,SvgEllipse:bd,TransitionSlide:xd},mixins:[Bl],props:{slug:{type:String,required:!0},headerText:String,focusScore:Number,trueSeoScore:Number,toggles:{type:Boolean,default(){return!0}},hideHeader:Boolean,noSlide:Boolean,saveToggleStatus:{type:Boolean,default(){return!0}}},computed:{...de(["settings"])},methods:{..._t(["toggleCard"])},created(){this.$bus.$on("open-post-settings",i=>{for(const t in this.settings.toggledCards)this.settings.toggledCards[t]&&this.toggleCard({slug:t});this.toggleCard({slug:i.card})})}};var tp=function(){var t=this,e=t._self._c;return e("div",{staticClass:"aioseo-card aioseo-sidebar-card"},[t.hideHeader?t._e():e("div",{staticClass:"header",on:{click:function(s){return t.toggleCard({slug:t.slug,shouldSave:t.saveToggleStatus})}}},[e("div",{staticClass:"text"},[t._t("header",function(){return[t._v(" "+t._s(t.headerText)+" ")]}),t.focusScore>=0?t._t("alt",function(){return[t.focusScore!==null?e("span",{staticClass:"card-score",class:t.getScoreClass(t.focusScore)},[t._v(" "+t._s(t.focusScore)+"/100 ")]):t._e()]}):t._e(),t.trueSeoScore>=0?t._t("alt",function(){return[e("span",{staticClass:"card-score",class:t.getErrorClass(t.trueSeoScore)},[0<t.trueSeoScore?e("svg-ellipse",{attrs:{width:"6"}}):t._e(),t.trueSeoScore===0?e("svg-circle-check",{attrs:{width:"12"}}):t._e(),t._v(" "+t._s(t.getErrorDisplay(t.trueSeoScore))+" ")],1)]}):t._e(),t.$slots.tooltip?e("core-tooltip",{scopedSlots:t._u([{key:"tooltip",fn:function(){return[t._t("tooltip")]},proxy:!0}],null,!0)},[e("svg-circle-question-mark")],1):t._e()],2),t.toggles&&t.settings.toggledCards?e("svg-caret",{class:{rotated:!t.settings.toggledCards[t.slug]}}):t._e()],1),t.settings.toggledCards||t.noSlide?e("transition-slide",{attrs:{active:t.settings.toggledCards[t.slug]&&t.toggles||t.noSlide}},[t.$slots["before-tabs"]?e("div",{staticClass:"content"},[t._t("before-tabs")],2):t._e(),t._t("tabs"),t.$slots.default?e("div",{staticClass:"content"},[t._t("default")],2):t._e()],2):t._e()],1)},ep=[],sp=$(Zd,tp,ep,!1,null,null,null,null);const ip=sp.exports;const rp={components:{SvgPencil:hr,SvgTrash:Nl},props:{index:{type:Number},keyphrase:{type:String},score:{type:Number}},data(){return{edit:!1,strings:{delete:this.$t.__("Delete",this.$td)}}},computed:{scoreClass(){return 80<this.score?"score-green":50<this.score?"score-orange":1<this.score?"score-red":"score-none"}},methods:{editKeyphraseEv(i){this.edit=!0,this.$emit("selectedKeyphrase",i)},deleteKeyphraseEv(i){this.edit=!1,this.$emit("deleted",i)},toggleKeyphrasesPanel(i){this.$emit("selectedKeyphrase",i)},closeEdit(i){const t=i.target.value,e=this.index;this.$emit("saved",{index:e,value:t}),this.edit=!1},pressEnter(i){i.preventDefault(),i.target.blur(),this.edit=!1}}};var np=function(){var t=this,e=t._self._c;return e("div",{staticClass:"aioseo-keyphrase-tag"},[e("span",{staticClass:"aioseo-add-keyphrase-tag",class:t.edit?"hidden":""},[e("span",{staticClass:"keyphrase-name",on:{click:function(s){return t.toggleKeyphrasesPanel(t.index)}}},[t._v(" "+t._s(t.keyphrase)+" ")]),e("span",{staticClass:"keyphrase-edit",on:{click:function(s){return t.editKeyphraseEv(t.index)}}},[e("svg-pencil")],1),e("span",{staticClass:"keyphrase-score",class:t.scoreClass,on:{click:function(s){return t.toggleKeyphrasesPanel(t.index)}}},[t._v(t._s(t.score)+"/100")])]),t.edit?e("span",{staticClass:"aioseo-edit-keyphrase-tag"},[e("input",{attrs:{size:"medium"},domProps:{value:t.keyphrase},on:{blur:t.closeEdit,keydown:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.pressEnter.apply(null,arguments)}}}),e("span",{staticClass:"keyphrase-delete",on:{click:function(s){return t.deleteKeyphraseEv(t.index)}}},[e("svg-trash"),e("md-tooltip",{attrs:{"md-direction":"top"}},[t._v(t._s(t.strings.delete))])],1)]):t._e()])},op=[],ap=$(rp,np,op,!1,null,null,null,null);const ql=ap.exports;const lp={components:{SvgCaret:Wn,SvgCircleCheck:Kn,SvgCircleClose:Gu},props:{analysisItems:{type:Object}},data(){return{strings:{delete:this.$t.__("Delete",this.$td)}}},methods:{toggleDescriptionEv(i){i.target.parentElement.classList.toggle("toggled")}}};var cp=function(){var t=this,e=t._self._c;return e("ul",{staticClass:"aioseo-analysis-detail"},[t._l(t.analysisItems,function(s,r){return[s.title?e("li",{key:r},[e("p",{staticClass:"title",class:s.error===0?"toggled":""},[s.error===0?e("svg-circle-check",{attrs:{width:"12"}}):t._e(),s.error===1?e("svg-circle-close",{attrs:{width:"12"}}):t._e(),t._v(" "+t._s(s.title)+" "),e("svg-caret",{attrs:{width:"16"},on:{click:t.toggleDescriptionEv}})],1),e("p",{staticClass:"description"},[t._v(t._s(s.description))])]):t._e()]})],2)},hp=[],up=$(lp,cp,hp,!1,null,null,null,null);const dr=up.exports;const dp={components:{CoreAlert:Pt,CoreKeyphrase:ql,CoreLoader:Ll,SvgCirclePlus:at,metaboxAnalysisDetail:dr},mixins:[Je],data(){return{selectedKeyphrase:0,strings:{additional:this.$t.__("Additional Keyphrases",this.$td),addKeyphrase:this.$t.__("Add Additional Keyphrases",this.$td),keyphraseDocumentation:this.$t.__("Improve your SEO rankings with additional keyphrases.",this.$td),upSell:this.$t.sprintf(this.$t.__("Multiple Keyphrases is a %1$s feature. %2$s",this.$td),"Pro",this.$links.getUpsellLink("seo-settings",this.$t.__("Click here to get",this.$td)+" AIOSEO Pro","additional-keyphrases",!0))}}},watch:{"currentPost.keyphrases.additional"(){this.currentPost.keyphrases.additional&&!this.currentPost.keyphrases.additional[this.selectedKeyphrase]&&(this.selectedKeyphrase=0)}},computed:{...M(["currentPost"])},methods:{onSelectedKeyphrase(i){this.selectedKeyphrase=i},onSaved(i){const{index:t,value:e}=i;this.currentPost.keyphrases.additional[t].keyphrase=e,this.currentPost.keyphrases.additional[t].score=0,this.currentPost.loading.additional[t]=!0,this.setIsDirty(),this.$truSeo.runAnalysis({postId:this.currentPost.id,postData:this.currentPost}),this.selectedKeyphrase=t},onDeleted(i){const t=[...this.currentPost.keyphrases.additional];t.splice(i,1),this.currentPost.keyphrases.additional=null,setTimeout(()=>{this.currentPost.keyphrases.additional=t,this.setIsDirty(),this.$truSeo.runAnalysis({postId:this.currentPost.id,postData:this.currentPost})},300)},addKeyphraseEv(){var e;const t=document.getElementsByClassName(`add-keyphrase-${this.$root._data.screenContext}-input`)[0].querySelector(".medium");if(t.value){const s={keyphrase:t.value,score:0},r=this.currentPost.keyphrases.additional.push(s),n=document.getElementsByClassName("keyphrase-name");this.currentPost.loading.additional[0]=!0,t.value="",t.blur(),this.setIsDirty(),(e=n[r])==null||e.click(),this.$truSeo.runAnalysis({postId:this.currentPost.id,postData:this.currentPost})}},pressEnter(i){const t=document.getElementById("add-additional-keyphrase");i.preventDefault(),t.click()},created(){this.currentPost.keyphrases.forEach((i,t)=>{this.currentPost.loading.additional[t]=!1})}}};var pp=function(){var t=this,e=t._self._c;return e("div",{staticClass:"additional-keyphrases-panel"},[t.currentPost.keyphrases.additional&&t.currentPost.keyphrases.additional.length&&t.$isPro&&t.$aioseo.license.isActive?e("div",[t._l(t.currentPost.keyphrases.additional,function(s,r){return e("core-keyphrase",{key:r,staticClass:"aioseo-keyphrase-tag additional-keyphrase",class:t.selectedKeyphrase===r?"selected":null,attrs:{index:r,keyphrase:s.keyphrase,score:s.score},on:{saved:t.onSaved,deleted:t.onDeleted,selectedKeyphrase:t.onSelectedKeyphrase}})}),e("div",{staticClass:"analysis-wrapper"},[t.currentPost.loading.additional[this.selectedKeyphrase]&&t.currentPost.keyphrases.additional[this.selectedKeyphrase]&&t.currentPost.keyphrases.additional[this.selectedKeyphrase].keyphrase?e("core-loader",{staticClass:"analysis-loading",attrs:{dark:""}}):t._e(),!t.currentPost.loading.additional[this.selectedKeyphrase]&&t.currentPost.keyphrases.additional[this.selectedKeyphrase]&&t.currentPost.keyphrases.additional[this.selectedKeyphrase].keyphrase?e("metaboxAnalysisDetail",{attrs:{analysisItems:t.currentPost.keyphrases.additional[this.selectedKeyphrase].analysis}}):t._e()],1)],2):t._e(),t.$isPro&&t.$aioseo.license.isActive?e("base-input",{class:`add-keyphrase-${this.$root._data.screenContext}-input`,attrs:{size:"medium"},on:{keydown:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.pressEnter.apply(null,arguments)}}}):t._e(),t.$isPro&&t.$aioseo.license.isActive?e("base-button",{staticClass:"add-keyphrase gray small",attrs:{id:"add-additional-keyphrase"},on:{click:t.addKeyphraseEv}},[e("svg-circle-plus",{attrs:{width:"14",height:"14"}}),t._v(" "+t._s(t.strings.addKeyphrase)+" ")],1):t._e(),!t.$isPro||!t.$aioseo.license.isActive?[e("div",{staticClass:"aioseo-description additional-keyphrases-description"},[t._v(" "+t._s(t.strings.keyphraseDocumentation)+" ")]),e("core-alert",{staticClass:"inline-upsell",attrs:{type:"yellow"}},[e("div",{domProps:{innerHTML:t._s(t.strings.upSell)}})])]:t._e()],2)},fp=[],mp=$(dp,pp,fp,!1,null,"e4476cbe",null,null);const gp=mp.exports,_p={props:{width:Number,height:Number,fillColor:String,strokeColor:String,strokeWidth:Number,data:Array},computed:{getViewBox(){return"0 0 "+this.width+" "+this.height},polylinePoints(){const i=Math.max(...this.data.map(r=>r.x)),t=Math.max(...this.data.map(r=>r.y)),e=this.height-this.strokeWidth,s=this.data.map(r=>{const n=r.x===0?0:r.x/i,o=r.y===0?0:r.y/t,a=n*this.width,l=e-o*e+this.strokeWidth;return`${a},${l}`}).join(" ");return`0,${e+this.strokeWidth} `+s+` ${this.width},${e+this.strokeWidth}`}}};var yp=function(){var t=this,e=t._self._c;return e("svg",{attrs:{width:t.width,height:t.height,viewBox:t.getViewBox,role:"img","aria-hidden":"true",focusable:"false"}},[e("polygon",{attrs:{fill:t.fillColor,points:t.polylinePoints}}),e("polyline",{attrs:{fill:"none",stroke:t.strokeColor,strokeWidth:t.strokeWidth,strokeLinejoin:"round",strokeLinecap:"round",points:t.polylinePoints}})])},vp=[],bp=$(_p,yp,vp,!1,null,null,null,null);const kp=bp.exports;const $p={components:{CoreAlert:Pt,CoreKeyphrase:ql,CoreLoader:Ll,CoreModalPortal:ne,CoreTooltip:oe,SvgAreaChart:kp,SvgCircleCheck:Kn,SvgCirclePlus:at,SvgTrash:Nl,metaboxAnalysisDetail:dr},mixins:[Je],data(){return{showSemrushTooltip:!1,loadingResults:!1,semrushShowModal:!1,addingAdditionalKeyphrase:!1,removingAdditionalKeyphrase:!1,semrushCountry:{value:"US",label:"United States of America - US"},strings:{modalTitle:this.$t.sprintf(this.$t.__("Additional Keyphrases by %1$s",this.$td),"Semrush"),addKeyphrase:this.$t.__("Add Focus Keyphrase",this.$td),getAdditionalKeyphrases:this.$t.__("Get Additional Keyphrases",this.$td),showResultsFor:this.$t.__("Show Results For:",this.$td),keyphrase:this.$t.__("Keyphrase",this.$td),volume:this.$t.__("Volume",this.$td),trend:this.$t.__("Trend",this.$td),addAdditionalKeyphrase:this.$t.__("Add Keyphrase",this.$td),removeAdditionalKeyphrase:this.$t.__("Remove Keyphrase",this.$td),noResults:this.$t.__("No results",this.$td),upsell:this.$t.sprintf(this.$t.__("Analyzing your content with %1$s keywords is only available to licensed %2$s users. %3$s",this.$td),"Semrush","<strong>AIOSEO Pro</strong>",this.$links.getUpsellLink("semrush-keywords",this.$constants.GLOBAL_STRINGS.learnMore,null,!0)),semrushGetAdditionalKeyphrases:this.$t.sprintf(this.$t.__("%1$s integrates directly with %2$s to provide you with actionable keyphrases to help you write better content.",this.$td),"AIOSEO","Semrush"),pleaseAddFocusKeyphrase:this.$t.__("To use this feature, first add a focus keyphrase.",this.$td),focusKeyphrase:this.$t.__("Focus Keyphrase",this.$td),delete:this.$t.__("Delete",this.$td),semrushTooltip:this.$t.sprintf(this.$t.__("Get Additional Keyphrases with %1$s!",this.$td),"Semrush"),semrushTooltipLicenseKey:this.$t.sprintf(this.$t.__("%1$sA valid license key is required%2$s in order to connect with %3$s.",this.$td),'<a href="'+this.$aioseo.urls.aio.settings+'">',"</a>","Semrush"),youHaveExceededSemrush:this.$t.sprintf(this.$t.__("You have exceeded the number of requests allowed by your %1$s plan.",this.$td),"Semrush"),inOrderToUpgradeSemrush:this.$t.sprintf(this.$t.__("In order to continue searching for additional keyphrases, you'll need to upgrade. %1$s",this.$td),this.$links.getUpsellLink("semrush-pricing",this.$constants.GLOBAL_STRINGS.learnMore,"semrushPricing",!0))}}},watch:{semrushCountry:{deep:!0,handler(){this.getKeyphrases()}}},computed:{...de("integrations",["semrushExpired","semrushHasValidTokens"]),...de(["isUnlicensed","isConnected"]),...M(["currentPost","internalOptions"]),...M("integrations",["semrush"]),semrushError(){return this.semrush.error.includes("TOTAL LIMIT EXCEEDED")?this.$t.__("You have exceeded the limit for requests. Please try again later.",this.$td):this.$t.__("An error occurred while fetching keyphrases. Please try again later.",this.$td)},semrushDatabase(){return this.$constants.COUNTRY_LIST.map(i=>(i.value==="GB"&&(i.value="UK",i.label="United Kingdom"),i.value==="KR"&&(i.label="South Korea"),i)).filter(i=>this.$constants.SEMRUSH_DATABASE.includes(i.value.toLowerCase())).map(i=>(i.label=i.label+" - "+i.value.toUpperCase(),i))}},methods:{..._t("integrations",["semrushAuthenticate","semrushRefresh","semrushGetKeyphrases"]),..._t(["saveConnectToken"]),getAdditionalKeyphrases(){if(this.showSemrushTooltip=!1,!this.isConnected){this.openConnectPopup(this.$aioseo.urls.connect+"&semrush=true");return}if(!this.semrushHasValidTokens){this.openPopup("https://oauth.semrush.com/auth/login?client_id=aioseo&redirect_uri=https%3A%2F%2Foauth.semrush.com%2Foauth2%2Faioseo%2Fsuccess&ref=2190331110&response_type=code&scope=user.id");return}this.openModal()},transformTrendDataToChartPoints(i){return i.split(",").map((e,s)=>({x:s,y:parseFloat(e)}))},openConnectPopup(i){Uo(i,this.connectWithAioseo,600,630,!0,["token"],this.completedConnectCallback,this.closedConnectCallback)},openPopup(i){Uo(i,"Semrush Oauth",450,570,!0,["code"],this.completedCallback,this.closedCallback,this.postMessageCallback)},async completedCallback(i){return this.semrushAuthenticate(i.code)},completedConnectCallback(i){return this.saveConnectToken(i.token)},openModal(){this.semrushShowModal=!0,!this.semrush.error&&this.getKeyphrases()},getKeyphrases(){this.loadingResults=!0,this.semrushGetKeyphrases(this.semrushCountry.value).then(()=>{this.loadingResults=!1}).catch(i=>{this.semrushShowModal=!1,this.loadingResults=!1,console.error(i.message)})},closedCallback(i){i&&this.openModal()},closedConnectCallback(i){if(i){if(this.semrushHasValidTokens){this.$nextTick(this.getAdditionalKeyphrases);return}this.showSemrushTooltip=!0}},async postMessageCallback(i,t,e){const{data:s,source:r,origin:n}=i;if(!(n!=="https://oauth.semrush.com"||t!==r)){if(s.type==="semrush:oauth:success"){window.removeEventListener("message",e,!1);let o={};try{const a=new URL(s.url);o=Is(a.search)}catch{}this.completedCallback(o).then(()=>{t.close(),t=null,this.closedCallback(!0)})}s.type==="semrush:oauth:denied"&&(t.close(),window.removeEventListener("message",e,!1),t=null,this.closedCallback())}},onSaved(i){const{value:t}=i;this.currentPost.keyphrases.focus.keyphrase=t,this.currentPost.loading.focus=!0,this.setIsDirty(),this.$truSeo.runAnalysis({postId:this.currentPost.id,postData:this.currentPost})},onDeleted(){this.currentPost.keyphrases.focus.keyphrase=null,this.setIsDirty(),this.$truSeo.runAnalysis({postId:this.currentPost.id,postData:this.currentPost})},addKeyphraseEv(){const t=document.getElementsByClassName(`add-focus-keyphrase-${this.$root._data.screenContext}-input`)[0].querySelector(".medium");if(t.value){const e={keyphrase:t.value,score:0,analysis:{}};this.$set(this.currentPost.keyphrases,"focus",e),this.currentPost.loading.focus=!0,t.value="",t.blur(),this.setIsDirty(),this.$truSeo.runAnalysis({postId:this.currentPost.id,postData:this.currentPost})}},hasAdditionalKeyphrase(i){const{additional:t}=this.currentPost.keyphrases;return t.filter(e=>e.keyphrase.toLowerCase()===i).length},getAdditionalKeyphrase(i){const{additional:t}=this.currentPost.keyphrases;return t.find(e=>e.keyphrase.toLowerCase()===i)},scoreClass(i){return 80<i?"score-green":50<i?"score-orange":1<i?"score-red":"score-none"},async addAdditionalKeyphrase(i,t){this.addingAdditionalKeyphrase=t;const{additional:e}=this.currentPost.keyphrases,s=e.push({keyphrase:i,score:0}),r=document.getElementsByClassName("keyphrase-name");this.$set(this.currentPost.keyphrases,"additional",e),this.setIsDirty(),await this.$truSeo.runAnalysis({postId:this.currentPost.id,postData:this.currentPost}),await this.$nextTick(),r[s]&&r[s].click(),this.addingAdditionalKeyphrase=!1},goToAdditionalKeyphrase(i){const{additional:t}=this.currentPost.keyphrases,e=t.findIndex(s=>s.keyphrase.toLowerCase()===i);if(e!==-1){const s=document.getElementsByClassName("keyphrase-name");s[e+1]&&s[e+1].click(),this.semrushShowModal=!1}},removeAdditionalKeyphrase(i,t){this.removingAdditionalKeyphrase=t;const{additional:e}=this.currentPost.keyphrases,s=e.findIndex(r=>r.keyphrase.toLowerCase()===i);if(s!==-1){e.splice(s,1),this.$set(this.currentPost.keyphrases,"additional",e);const r=document.getElementsByClassName("keyphrase-name");r[0]&&r[0].click()}this.$nextTick(()=>{this.removingAdditionalKeyphrase=!1})},toggleDescriptionEv(i){i.target.parentElement.classList.toggle("toggled")},pressEnter(i){const t=document.getElementById("add-focus-keyphrase");i.preventDefault(),t.click()}},mounted(){const i=[];this.internalOptions.integrations.semrush.accessToken&&this.semrushExpired&&i.push(this.semrushRefresh())}};var xp=function(){var t=this,e=t._self._c;return e("div",{staticClass:"aioseo-focus-keyphrase-panel"},[!t.currentPost.keyphrases.focus||!t.currentPost.keyphrases.focus.keyphrase?e("base-input",{class:`add-focus-keyphrase-${this.$root._data.screenContext}-input`,attrs:{size:"medium"},on:{keydown:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.pressEnter.apply(null,arguments)}}}):t._e(),e("div",{staticStyle:{display:"flex"}},[!t.currentPost.keyphrases.focus||!t.currentPost.keyphrases.focus.keyphrase?e("base-button",{staticClass:"add-keyphrase gray small",attrs:{id:"add-focus-keyphrase"},on:{click:t.addKeyphraseEv}},[e("svg-circle-plus",{attrs:{width:"14",height:"14"}}),t._v(" "+t._s(t.strings.addKeyphrase)+" ")],1):t._e(),!t.currentPost.keyphrases.focus||!t.currentPost.keyphrases.focus.keyphrase?e("core-tooltip",{scopedSlots:t._u([{key:"tooltip",fn:function(){return[e("span",[t._v(" "+t._s(t.strings.semrushGetAdditionalKeyphrases)+" "+t._s(t.strings.pleaseAddFocusKeyphrase)+" ")])]},proxy:!0}],null,!1,76107531)},[e("div",{staticClass:"disabled-button gray"},[e("svg-circle-plus",{attrs:{width:"14",height:"14"}}),t._v(" "+t._s(t.strings.getAdditionalKeyphrases)+" ")],1)]):t._e()],1),t.currentPost.keyphrases.focus&&t.currentPost.keyphrases.focus.keyphrase?e("core-keyphrase",{staticClass:"aioseo-keyphrase-tag",attrs:{index:0,keyphrase:t.currentPost.keyphrases.focus.keyphrase,score:t.currentPost.keyphrases.focus.score},on:{saved:t.onSaved,deleted:t.onDeleted}}):t._e(),t.currentPost.loading.focus&&t.currentPost.keyphrases.focus?e("core-loader",{staticClass:"analysis-loading",attrs:{dark:""}}):t._e(),!t.currentPost.loading.focus&&t.currentPost.keyphrases.focus&&t.currentPost.keyphrases.focus.keyphrase?e("metaboxAnalysisDetail",{attrs:{analysisItems:t.currentPost.keyphrases.focus.analysis}}):t._e(),!t.currentPost.loading.focus&&t.currentPost.keyphrases.focus&&t.currentPost.keyphrases.focus.keyphrase&&t.$isPro&&t.isUnlicensed?e("core-tooltip",{scopedSlots:t._u([{key:"tooltip",fn:function(){return[e("span",{domProps:{innerHTML:t._s(t.strings.semrushTooltipLicenseKey)}})]},proxy:!0}],null,!1,1529238061)},[e("div",{staticClass:"disabled-button gray"},[e("svg-circle-plus",{attrs:{width:"14",height:"14"}}),t._v(" "+t._s(t.strings.getAdditionalKeyphrases)+" ")],1)]):t._e(),!t.currentPost.loading.focus&&t.currentPost.keyphrases.focus&&t.currentPost.keyphrases.focus.keyphrase&&(!t.$isPro||!t.isUnlicensed)?e("core-tooltip",{attrs:{disabled:!t.showSemrushTooltip||t.$isPro,"force-show":t.showSemrushTooltip&&!t.$isPro},scopedSlots:t._u([{key:"tooltip",fn:function(){return[e("span",[t._v(" "+t._s(t.strings.semrushTooltip)+" ")])]},proxy:!0}],null,!1,248438756)},[e("base-button",{staticClass:"add-keyphrase gray small",on:{click:t.getAdditionalKeyphrases}},[e("svg-circle-plus",{attrs:{width:"14",height:"14"}}),t._v(" "+t._s(t.strings.getAdditionalKeyphrases)+" ")],1)],1):t._e(),t.semrushShowModal?e("core-modal-portal",{attrs:{classes:["aioseo-focus-keyphrase-panel-modal"]},on:{close:function(s){t.semrushShowModal=!1}}},[e("div",{attrs:{slot:"headerTitle"},slot:"headerTitle"},[t._v(" "+t._s(t.strings.modalTitle)+" ")]),e("div",{attrs:{slot:"body"},slot:"body"},[e("div",{staticClass:"aioseo-modal-content has-padding"},[t.isUnlicensed?e("core-alert",{attrs:{type:"blue"},domProps:{innerHTML:t._s(t.strings.upsell)}}):t._e(),e("div",{staticClass:"aioseo-settings-row"},[e("div",{staticClass:"settings-name"},[e("div",{staticClass:"name"},[t._v(" "+t._s(t.strings.showResultsFor)+" ")])]),e("base-select",{staticClass:"semrush-country-selector",attrs:{size:"medium",options:t.semrushDatabase,placeholder:t.strings.selectPriceIndicator},model:{value:t.semrushCountry,callback:function(s){t.semrushCountry=s},expression:"semrushCountry"}})],1),e("div",{staticClass:"results"},[e("table",{staticClass:"additional-keyphrases-table",attrs:{"aria-label":"Additional Keyphrases",cellpadding:"0",cellspacing:"0"}},[e("thead",[e("tr",{staticClass:"keyphrases-header"},[e("th",{staticClass:"keyphrase"},[t._v(t._s(t.strings.keyphrase))]),e("th",{staticClass:"keyphrase-volume"},[t._v(t._s(t.strings.volume))]),e("th",{staticClass:"keyphrase-trend"},[t._v(t._s(t.strings.trend))]),t.isUnlicensed?t._e():e("th",{staticClass:"keyphrase-actions"})])]),e("tbody",{staticClass:"keyphrases-rows"},[t.semrush.results.length&&!t.loadingResults?t._l(t.semrush.results,function(s,r){return e("tr",{key:r,staticClass:"keyphrase-row",class:{even:r%2===0}},[e("td",{staticClass:"keyphrase"},[t._v(" "+t._s(s[0])+" ")]),e("td",{staticClass:"keyphrase-volume"},[t._v(" "+t._s(s[1])+" ")]),e("td",{staticClass:"keyphrase-trend"},[e("svg-area-chart",{attrs:{width:66,height:24,data:t.transformTrendDataToChartPoints(s[2]),strokeWidth:1.8,strokeColor:"#498afc",fillColor:"#ade3fc"}})],1),t.isUnlicensed?t._e():e("td",{staticClass:"keyphrase-actions"},[s[0]===t.currentPost.keyphrases.focus.keyphrase.toLowerCase()?e("div",{staticClass:"focus-keyphrase"},[e("svg-circle-check"),t._v(" "+t._s(t.strings.focusKeyphrase)+" ")],1):t._e(),s[0]!==t.currentPost.keyphrases.focus.keyphrase.toLowerCase()?e("div",[r!==t.removingAdditionalKeyphrase&&(r===t.addingAdditionalKeyphrase||!t.hasAdditionalKeyphrase(s[0]))?e("base-button",{attrs:{type:"gray",size:"small",loading:r===t.addingAdditionalKeyphrase},on:{click:function(n){return t.addAdditionalKeyphrase(s[0],r)}}},[t._v(" "+t._s(t.strings.addAdditionalKeyphrase)+" ")]):t._e(),t.getAdditionalKeyphrase(s[0])&&r!==t.addingAdditionalKeyphrase&&(r===t.removingAdditionalKeyphrase||t.hasAdditionalKeyphrase(s[0]))?e("div",{staticClass:"remove-keyphrase"},[e("span",{staticClass:"keyphrase-score",class:t.scoreClass(t.getAdditionalKeyphrase(s[0]).score),on:{click:function(n){return t.goToAdditionalKeyphrase(s[0])}}},[t._v(t._s(t.getAdditionalKeyphrase(s[0]).score)+"/100")]),e("core-tooltip",{attrs:{type:"action"},scopedSlots:t._u([{key:"tooltip",fn:function(){return[t._v(" "+t._s(t.strings.delete)+" ")]},proxy:!0}],null,!0)},[e("svg-trash",{nativeOn:{click:function(n){return t.removeAdditionalKeyphrase(s[0],r)}}})],1)],1):t._e()],1):t._e()])])}):t._e(),!t.semrush.results.length||t.loadingResults?[e("tr",{staticClass:"keyphrase-row"},[e("td",{staticClass:"no-results",attrs:{colspan:t.isUnlicensed?3:4}},[e("div",[t.loadingResults?e("core-loader",{attrs:{dark:""}}):t._e(),!t.loadingResults&&!t.semrush.error?e("span",[t._v(" "+t._s(t.strings.noResults)+" ")]):t._e(),t.semrush.error&&!t.semrush.error.includes("TOTAL LIMIT EXCEEDED")?e("core-alert",{attrs:{type:"red"}},[t._v(" "+t._s(t.semrushError)+" ")]):t._e(),t.semrush.error&&t.semrush.error.includes("TOTAL LIMIT EXCEEDED")?[e("div",{staticClass:"semrush-logo"},[e("svg-logo-semrush")],1),e("div",{staticClass:"semrush-upsell"},[e("span",[e("strong",{domProps:{innerHTML:t._s(t.strings.youHaveExceededSemrush)}})]),t._v(" "+t._s(" ")+" "),e("span",{domProps:{innerHTML:t._s(t.strings.inOrderToUpgradeSemrush)}})])]:t._e()],2)])])]:t._e()],2)])])],1)])]):t._e()],1)},Sp=[],wp=$($p,xp,Sp,!1,null,null,null,null);const Cp=wp.exports;const Pp={components:{CoreMainTabs:re,metaboxAnalysisDetail:dr},data(){return{initTab:"basic",tabs:[{slug:"basic",name:this.$t.__("Basic SEO",this.$td)},{slug:"title",name:this.$t.__("Title",this.$td)},{slug:"readability",name:this.$t.__("Readability",this.$td)}]}},computed:{...M(["currentPost"])},methods:{processChangeTab(i){this.initTab=i}},mounted(){this.tabs.map(i=>(i.errorCount=this.currentPost.page_analysis.analysis[i.slug].errors,i))}};var Tp=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-analysis-panel"},[e("core-main-tabs",{attrs:{tabs:t.tabs,showSaveButton:!1,active:this.initTab,internal:""},on:{changed:s=>t.processChangeTab(s)}}),e("transition",{attrs:{mode:"out-in"}},[t.currentPost.page_analysis?e("metaboxAnalysisDetail",{attrs:{analysisItems:t.currentPost.page_analysis.analysis[this.initTab]}}):t._e()],1)],1)},Ap=[],Dp=$(Pp,Tp,Ap,!1,null,null,null,null);const Mp=Dp.exports;const Op={mixins:[Je,Yn,Uu,Jn,Bl],components:{BaseRadioToggle:Ke,CoreAlert:Pt,CoreGoogleSearchPreview:$d,CoreHtmlTagsEditor:et,CoreSettingsRow:G,CoreSidebarCard:ip,CoreTooltip:oe,SvgCircleQuestionMark:jn,SvgDesktop:zl,SvgMobile:Gl,SvgPencil:hr,additionalKeyphrases:gp,focusKeyphrase:Cp,metaboxAnalysisDetail:dr,pageAnalysis:Mp},props:{disabled:{type:Boolean,default(){return!1}},parentComponentContext:String},data(){return{titleCount:0,descriptionCount:0,keywords:null,keyphrases:null,selectedKeyphrase:0,editSnippet:!1,truSeo:null,strings:{pageName:this.$t.__("General",this.$td),snippetPreview:this.$t.__("Snippet Preview",this.$td),snippetPreviewContent:this.$t.__("Snippet Preview content here.",this.$td),editSnippet:this.$t.__("Edit Snippet",this.$td),clickToAddTitle:this.$t.__("Click on the tags below to insert variables into your title.",this.$td),metaDescription:this.$t.__("Meta Description",this.$td),clickToAddDescription:this.$t.__("Click on the tags below to insert variables into your meta description.",this.$td),pillarContent:this.$t.__("Pillar Content",this.$td),pillarContentCopy:this.$t.__("Cornerstone content should be the most important and extensive articles on your site.",this.$td),focusKeyphrase:this.$t.__("Focus Keyphrase",this.$td),additionalKeyphrases:this.$t.__("Additional Keyphrases",this.$td),pageAnalysis:this.$t.__("Page Analysis",this.$td),basicSeo:this.$t.__("Basic SEO",this.$td),title:this.$t.__("Title",this.$td),readability:this.$t.__("Readability",this.$td),lookingForMetaKeywords:this.$t.__("Looking for meta keywords?",this.$td),goToAdvancedTab:this.$t.__("Go to the Advanced tab to add/edit meta keywords",this.$td),keyphraseDocumentation:this.$t.sprintf(this.$t.__("Not sure what keyphrases are used for? Check out our documentation for more information. %1$s",this.$td),this.$links.getDocLink(this.$constants.GLOBAL_STRINGS.learnMore,"useKeyphrasesTooltip",!0))}}},watch:{"currentPost.title"(){Vo(()=>this.runAnalysis({postId:this.currentPost.id}),500)},"currentPost.description"(){Vo(()=>this.runAnalysis({postId:this.currentPost.id}),500)}},computed:{...M(["currentPost","options"]),...M("live-tags",["liveTags"]),title(){return this.$t.sprintf(this.$t.__("%1$s Title",this.$td),this.currentPost.type)},toggled:function(){return this.currentPost.pillar_content===1},displayTruSeoMetaboxCard(){return Tr()&&this.$root._data.screenContext==="metabox"&&this.currentPost.context==="post"&&this.currentPost.postType!=="attachment"&&this.parentComponentContext!=="modal"&&this.$allowed("aioseo_page_analysis")&&!this.currentPost.isSpecialPage&&!this.isForum},displayTruSeoSidebarKeyphraseCard(){return Tr()&&this.$root._data.screenContext==="sidebar"&&this.parentComponentContext!=="modal"&&this.$allowed("aioseo_page_analysis")&&!this.currentPost.isSpecialPage&&!this.isForum},displayTruSeoSidebarAnalysisCard(){return Tr()&&this.$root._data.screenContext==="sidebar"&&this.currentPost.page_analysis&&this.parentComponentContext!=="modal"&&this.$allowed("aioseo_page_analysis")&&!this.currentPost.isSpecialPage&&!this.isForum},isForum(){return!!((this.currentPost.postType==="forum"||this.currentPost.postType==="topic"||this.currentPost.postType==="reply")&&window.aioseo.data.isBBPressActive)},focusKeyphraseScore(){return this.currentPost.keyphrases.focus.keyphrase?this.currentPost.keyphrases.focus.score:null}},methods:{..._t(["changeGeneralPreview","openModal","savePostState"]),...E(["changeTabSettings"]),hideKeywordsLooking(){this.options.searchAppearance.advanced.keywordsLooking=!1,this.saveChanges()},isMobilePreviewEv(i){this.changeGeneralPreview(i)},editSnippetEv(){this.editSnippet=!this.editSnippet,this.changeTabSettings({setting:"modal",value:"general"}),this.openModal(!0)},getDefaultTags(i){switch(i){case"title":return this.currentPost.context==="post"?["post_title","separator_sa","site_title"]:["taxonomy_title","separator_sa","site_title"];case"description":return this.currentPost.context==="post"?this.currentPost.postType==="attachment"?["attachment_caption","separator_sa","site_title"]:this.currentPost.postType==="product"?["post_excerpt","post_content"]:["post_excerpt","post_content","separator_sa"]:["taxonomy_title","separator_sa","taxonomy_description"]}}},mounted(){this.keyphrases=this.currentPost.keyphrases,this.currentPost.context==="post"&&!this.currentPost.keyphrases.length&&(this.selectedKeyphrase=-1)}};var Ip=function(){var t=this,e=t._self._c;return e("div",{staticClass:"aioseo-tab-content aioseo-post-general"},[this.$allowed("aioseo_page_general_settings")?e("core-settings-row",{staticClass:"mobile-radio-buttons",scopedSlots:t._u([{key:"content",fn:function(){return[t.$root._data.screenContext==="metabox"||t.parentComponentContext==="modal"?e("base-radio-toggle",{staticClass:"circle",attrs:{value:t.currentPost.generalMobilePrev,name:"previewGeneralIsMobile",options:[{label:"desktop",value:!1,activeClass:"dark",slot:"desktop"},{label:"mobile",value:!0,slot:"mobile"}]},on:{input:t.isMobilePreviewEv},scopedSlots:t._u([{key:"desktop",fn:function(){return[e("svg-desktop")]},proxy:!0},{key:"mobile",fn:function(){return[e("svg-mobile")]},proxy:!0}],null,!1,3417581673)}):t._e()]},proxy:!0}],null,!1,1896340531)}):t._e(),this.$allowed("aioseo_page_general_settings")?e("core-settings-row",{staticClass:"snippet-preview-row",attrs:{name:t.strings.snippetPreview},scopedSlots:t._u([{key:"content",fn:function(){return[e("core-google-search-preview",{class:{ismobile:t.currentPost.generalMobilePrev},attrs:{title:t.parseTags(t.currentPost.title||t.currentPost.tags.title||"#post_title #separator_sa #site_title"),separator:t.options.searchAppearance.global.separator,description:t.parseTags(t.currentPost.description||t.currentPost.tags.description||"#post_content")},scopedSlots:t._u([{key:"domain",fn:function(){return[t._v(" "+t._s(t.liveTags.permalink)+" ")]},proxy:!0}],null,!1,3436692130)}),t.$root._data.screenContext==="sidebar"&&t.parentComponentContext!=="modal"?e("base-button",{staticClass:"edit-snippet gray small",on:{click:t.editSnippetEv}},[e("svg-pencil"),t._v(" "+t._s(t.strings.editSnippet)+" ")],1):t._e()]},proxy:!0}],null,!1,1780722876)}):t._e(),(t.$root._data.screenContext==="metabox"||t.parentComponentContext==="modal")&&this.$allowed("aioseo_page_general_settings")?e("core-settings-row",{staticClass:"snippet-title-row",attrs:{id:"aioseo-post-settings-post-title-row",name:t.title},scopedSlots:t._u([{key:"content",fn:function(){return[e("core-html-tags-editor",{attrs:{"line-numbers":!1,single:"","tags-context":`${t.currentPost.postType||t.currentPost.termType}Title`,defaultMenuOrientation:t.parentComponentContext==="modal"?"top":"bottom","default-tags":t.getDefaultTags("title")},on:{counter:s=>t.updateCount(s,"titleCount"),input:t.setIsDirty},scopedSlots:t._u([{key:"tags-description",fn:function(){return[t._v(" "+t._s(t.strings.clickToAddTitle)+" ")]},proxy:!0}],null,!1,3106947238),model:{value:t.currentPost.title,callback:function(s){t.$set(t.currentPost,"title",s)},expression:"currentPost.title"}}),e("div",{staticClass:"max-recommended-count",domProps:{innerHTML:t._s(t.maxRecommendedCount(t.titleCount,60))}})]},proxy:!0}],null,!1,3812002899)}):t._e(),(t.$root._data.screenContext==="metabox"||t.parentComponentContext==="modal")&&this.$allowed("aioseo_page_general_settings")?e("core-settings-row",{staticClass:"snippet-description-row",attrs:{id:"aioseo-post-settings-meta-description-row",name:t.strings.metaDescription},scopedSlots:t._u([{key:"content",fn:function(){return[e("core-html-tags-editor",{attrs:{"line-numbers":!1,description:"","tags-context":`${t.currentPost.postType||t.currentPost.termType}Description`,defaultMenuOrientation:t.parentComponentContext==="modal"?"top":"bottom","default-tags":t.getDefaultTags("description")},on:{counter:s=>t.updateCount(s,"descriptionCount"),input:t.setIsDirty},scopedSlots:t._u([{key:"tags-description",fn:function(){return[t._v(" "+t._s(t.strings.clickToAddDescription)+" ")]},proxy:!0}],null,!1,1726597184),model:{value:t.currentPost.description,callback:function(s){t.$set(t.currentPost,"description",s)},expression:"currentPost.description"}}),e("div",{staticClass:"max-recommended-count",domProps:{innerHTML:t._s(t.maxRecommendedCount(t.descriptionCount,160))}})]},proxy:!0}],null,!1,2056721821)}):t._e(),t.displayTruSeoMetaboxCard&&t.options.searchAppearance.advanced.useKeywords&&t.options.searchAppearance.advanced.keywordsLooking?e("div",[e("core-alert",{attrs:{type:"blue","show-close":""},on:{"close-alert":t.hideKeywordsLooking}},[t._v(" "+t._s(t.strings.lookingForMetaKeywords)+" "),e("a",{attrs:{href:"#"},on:{click:function(s){return t.$emit("changeTab","advanced")}}},[t._v(" "+t._s(t.strings.goToAdvancedTab)+" ")]),e("a",{staticClass:"no-underline",attrs:{href:"#"},on:{click:function(s){return t.$emit("changeTab","advanced")}}},[t._v(" → ")])])],1):t._e(),t.displayTruSeoMetaboxCard?e("core-settings-row",{staticClass:"snippet-focus-keyphrase-row",attrs:{align:""},scopedSlots:t._u([{key:"name",fn:function(){return[t._v(" "+t._s(t.strings.focusKeyphrase)+" "),e("core-tooltip",{scopedSlots:t._u([{key:"tooltip",fn:function(){return[e("div",{domProps:{innerHTML:t._s(t.strings.keyphraseDocumentation)}})]},proxy:!0}],null,!1,3089343708)},[e("svg-circle-question-mark")],1)]},proxy:!0},{key:"content",fn:function(){return[e("focusKeyphrase")]},proxy:!0}],null,!1,2373612567)}):t._e(),t.displayTruSeoMetaboxCard?e("core-settings-row",{staticClass:"snippet-additional-keyphrases-row",attrs:{name:t.strings.additionalKeyphrases},scopedSlots:t._u([{key:"content",fn:function(){return[e("additionalKeyphrases")]},proxy:!0}],null,!1,3781583425)}):t._e(),t.displayTruSeoMetaboxCard&&t.currentPost.page_analysis?e("core-settings-row",{staticClass:"snippet-page-analysis-row",attrs:{name:t.strings.pageAnalysis,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("pageAnalysis")]},proxy:!0}],null,!1,1626229952)}):t._e(),t.displayTruSeoSidebarKeyphraseCard?e("core-sidebar-card",{staticClass:"card-focus-keyphrase",attrs:{slug:"focus",focusScore:t.focusKeyphraseScore},scopedSlots:t._u([{key:"header",fn:function(){return[e("span",[t._v(t._s(t.strings.focusKeyphrase))]),e("core-tooltip",{scopedSlots:t._u([{key:"tooltip",fn:function(){return[e("div",{domProps:{innerHTML:t._s(t.strings.keyphraseDocumentation)}})]},proxy:!0}],null,!1,3089343708)},[e("svg-circle-question-mark")],1)]},proxy:!0}],null,!1,2192376698)},[e("focusKeyphrase")],1):t._e(),t.displayTruSeoSidebarKeyphraseCard?e("core-sidebar-card",{staticClass:"card-additional-keyphrase",attrs:{slug:"additional","header-text":t.strings.additionalKeyphrases}},[e("additionalKeyphrases")],1):t._e(),t.displayTruSeoSidebarAnalysisCard?e("core-sidebar-card",{staticClass:"card-basic-seo",attrs:{slug:"basicseo","header-text":t.strings.basicSeo,trueSeoScore:t.currentPost.page_analysis.analysis.basic.errors}},[e("metaboxAnalysisDetail",{attrs:{analysisItems:t.currentPost.page_analysis.analysis.basic}})],1):t._e(),t.displayTruSeoSidebarAnalysisCard?e("core-sidebar-card",{staticClass:"card-title-seo",attrs:{slug:"title","header-text":t.strings.title,trueSeoScore:t.currentPost.page_analysis.analysis.title.errors}},[e("metaboxAnalysisDetail",{attrs:{analysisItems:t.currentPost.page_analysis.analysis.title}})],1):t._e(),t.displayTruSeoSidebarAnalysisCard?e("core-sidebar-card",{staticClass:"card-readability-seo",attrs:{slug:"readability","header-text":t.strings.readability,trueSeoScore:t.currentPost.page_analysis.analysis.readability.errors}},[e("metaboxAnalysisDetail",{attrs:{analysisItems:t.currentPost.page_analysis.analysis.readability}})],1):t._e()],1)},Rp=[],Lp=$(Op,Ip,Rp,!1,null,null,null,null);const Jl=Lp.exports,Ep={};var Np=function(){var t=this,e=t._self._c;return e("svg",{staticClass:"aioseo-right-arrow-short",attrs:{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M8 0L6.59 1.41L12.17 7H0V9H12.17L6.59 14.59L8 16L16 8L8 0Z",fill:"currentColor"}})])},Bp=[],zp=$(Ep,Np,Bp,!1,null,null,null,null);const jl=zp.exports;const Gp={components:{CoreSettingsRow:G,SvgRightArrowShort:jl},data(){return{strings:{title:this.$t.__("Link Assistant",this.$td),description:this.$t.__("Here you can view an overview of your existing links as well as find suggestions for new internal links. Click on the button below to view the Link Assistant panel.",this.$td),button:this.$t.__("Open Link Assistant",this.$td)}}},methods:{...E(["toggleLinkAssistantModal"])}};var Fp=function(){var t=this,e=t._self._c;return e("div",{staticClass:"aioseo-link-assistant-sidebar"},[t.$root._data.screenContext==="sidebar"?e("core-settings-row",{staticClass:"snippet-description-row open-link-assistant-copy",scopedSlots:t._u([{key:"content",fn:function(){return[e("div",{staticClass:"aioseo-sidebar-content-title"},[t._v(t._s(t.strings.title))]),e("p",[t._v(t._s(t.strings.description))]),e("base-button",{staticClass:"open-link-assistant-modal gray small",on:{click:t.toggleLinkAssistantModal}},[e("svg-right-arrow-short"),t._v(" "+t._s(t.strings.button)+" ")],1)]},proxy:!0}],null,!1,797682359)}):t._e()],1)},Hp=[],Vp=$(Gp,Fp,Hp,!1,null,null,null,null);const ro=Vp.exports,Up={components:{CoreMainTabs:re,CoreModalPortal:ne,LinkAssistantAffiliate:Sd,LinkAssistantExternal:wd,LinkAssistantInboundInternal:Qn,LinkAssistantOutboundInternal:Cd,LinkAssistantSuggestions:Pd,LinksSideBar:ro,SvgLinkAffiliate:Xn,SvgLinkExternal:Zn,SvgLinkInternalInbound:to,SvgLinkInternalOutbound:eo,SvgLinkSuggestion:ur},mixins:[Td],props:{parentComponentContext:String},created(){this.$bus.$on("updatingLinks",i=>{this.currentPost.linkAssistant.updatingLinks=i})},data(){return{tabsKey:0,activeTab:"inbound-internal",activeSuggestionTab:"suggestions-inbound"}},computed:{...M(["currentPost","metaBoxTabs"]),initialTab(){return this.metaBoxTabs.linkAssistant||"inbound-internal"},tabs(){return[{slug:"inbound-internal",icon:"svg-link-internal-inbound",name:this.$t.sprintf("%1$s %2$s",this.currentPost.linkAssistant.links.inboundInternal.totals.total,this.$t.__("Inbound Internal",this.$tdPro))},{slug:"outbound-internal",icon:"svg-link-internal-outbound",name:this.$t.sprintf("%1$s %2$s",this.currentPost.linkAssistant.links.outboundInternal.totals.total,this.$t.__("Outbound Internal",this.$tdPro))},{slug:"affiliate",icon:"svg-link-affiliate",name:this.$t.sprintf("%1$s %2$s",this.currentPost.linkAssistant.links.affiliate.totals.total,this.$t.__("Affiliate",this.$tdPro))},{slug:"external",icon:"svg-link-external",name:this.$t.sprintf("%1$s %2$s",this.currentPost.linkAssistant.links.external.totals.total,this.$t.__("External",this.$tdPro))},{slug:"link-suggestions",icon:"svg-link-suggestion",name:this.$t.sprintf("%1$s %2$s",this.filteredSuggestionsOutbound(this.currentPost.linkAssistant).length+this.currentPost.linkAssistant.links.suggestionsInbound.totals.total,this.$t.__("Link Suggestions",this.$tdPro))}]},modalHeader(){return this.$t.sprintf(this.$t.__('Links & Suggestions for "%1$s"',this.$tdPro),window.wp.data.select("core/editor").getEditedPostAttribute("title"))}},methods:{...E(["toggleLinkAssistantModal","changeTabSettings"]),processChangeTab(i,t){this.activeTab=i,this.changeTabSettings({setting:"linkAssistant",value:i}),t&&(this.activeSuggestionTab=t)}}};var Wp=function(){var t=this,e=t._self._c;return e("div",[t.$addons.isActive("aioseo-link-assistant")?e("div",{staticClass:"aioseo-tab-content aioseo-link-assistant"},[t.$root._data.screenContext==="metabox"?e("div",[e("core-main-tabs",{key:t.tabsKey,staticClass:"link-tabs",attrs:{internal:"",tabs:t.tabs,active:t.initialTab,showSaveButton:!1},on:{changed:s=>t.processChangeTab(s)},scopedSlots:t._u([{key:"md-tab-icon",fn:function({tab:s}){return[e(s.icon,{tag:"component",class:[{warning:s.data.warning}]})]}}],null,!1,158741971)}),e("keep-alive",[t.activeTab==="inbound-internal"?e("link-assistant-inbound-internal",{attrs:{post:t.currentPost.linkAssistant,metabox:""},on:{openSuggestions:function(s){return t.processChangeTab("link-suggestions","suggestions-inbound")},linksUpdated:function(s){t.tabsKey++}}}):t._e()],1),e("keep-alive",[t.activeTab==="outbound-internal"?e("link-assistant-outbound-internal",{attrs:{post:t.currentPost.linkAssistant,metabox:""},on:{openSuggestions:function(s){return t.processChangeTab("link-suggestions","suggestions-outbound")},linksUpdated:function(s){t.tabsKey++}}}):t._e()],1),e("keep-alive",[t.activeTab==="affiliate"?e("link-assistant-affiliate",{attrs:{post:t.currentPost.linkAssistant,metabox:""},on:{linksUpdated:function(s){t.tabsKey++}}}):t._e()],1),e("keep-alive",[t.activeTab==="external"?e("link-assistant-external",{attrs:{post:t.currentPost.linkAssistant,metabox:""},on:{linksUpdated:function(s){t.tabsKey++}}}):t._e()],1),t.activeTab==="link-suggestions"?e("link-assistant-suggestions",{attrs:{post:t.currentPost.linkAssistant,filteredSuggestionsOutbound:t.filteredSuggestionsOutbound(t.currentPost.linkAssistant),initialTab:t.activeSuggestionTab,metabox:""},on:{suggestionsTabChanged:s=>t.activeSuggestionTab=s,linksUpdated:function(s){t.tabsKey++}}}):t._e()],1):t._e(),t.currentPost.linkAssistant.modalOpen&&t.$root._data.screenContext==="sidebar"?e("core-modal-portal",{attrs:{classes:["aioseo-link-assistant-modal"]},on:{close:t.toggleLinkAssistantModal}},[e("div",{attrs:{slot:"headerTitle"},slot:"headerTitle"},[t._v(" "+t._s(t.modalHeader)+" ")]),e("div",{attrs:{slot:"body"},slot:"body"},[e("core-main-tabs",{key:t.tabsKey,staticClass:"link-tabs",attrs:{internal:"",tabs:t.tabs,active:t.initialTab,showSaveButton:!1},on:{changed:s=>t.processChangeTab(s)},scopedSlots:t._u([{key:"md-tab-icon",fn:function({tab:s}){return[e(s.icon,{tag:"component",class:[{warning:s.data.warning}]})]}}],null,!1,2019150867)}),t.activeTab==="inbound-internal"?e("link-assistant-inbound-internal",{attrs:{post:t.currentPost.linkAssistant,metabox:""},on:{openSuggestions:function(s){return t.processChangeTab("link-suggestions","suggestions-inbound")},linksUpdated:function(s){t.tabsKey++}}}):t._e(),t.activeTab==="outbound-internal"?e("link-assistant-outbound-internal",{attrs:{post:t.currentPost.linkAssistant,metabox:""},on:{openSuggestions:function(s){return t.processChangeTab("link-suggestions","suggestions-outbound")},linksUpdated:function(s){t.tabsKey++}}}):t._e(),t.activeTab==="affiliate"?e("link-assistant-affiliate",{attrs:{post:t.currentPost.linkAssistant,metabox:""},on:{linksUpdated:function(s){t.tabsKey++}}}):t._e(),t.activeTab==="external"?e("link-assistant-external",{attrs:{post:t.currentPost.linkAssistant,metabox:""},on:{linksUpdated:function(s){t.tabsKey++}}}):t._e(),t.activeTab==="link-suggestions"?e("link-assistant-suggestions",{attrs:{post:t.currentPost.linkAssistant,filteredSuggestionsOutbound:t.filteredSuggestionsOutbound(t.currentPost.linkAssistant),initialTab:t.activeSuggestionTab,metabox:""},on:{suggestionsTabChanged:s=>t.activeSuggestionTab=s,linksUpdated:function(s){t.tabsKey++}}}):t._e()],1)]):t._e(),this.parentComponentContext!=="modal"?e("links-side-bar"):t._e()],1):t._e()])},Kp=[],qp=$(Up,Wp,Kp,!1,null,null,null,null);const Jp=qp.exports,jp={components:{CoreAlert:Pt,CoreBlur:qs,CoreMainTabs:re,CoreModalPortal:ne,Cta:so,LinkAssistantInboundInternal:Qn,LinksSideBar:ro,SvgLinkAffiliate:Xn,SvgLinkExternal:Zn,SvgLinkInternalInbound:to,SvgLinkInternalOutbound:eo,SvgLinkSuggestion:ur},props:{parentComponentContext:String},data(){return{activeTab:"inbound-internal",activeSuggestionTab:"suggestions-inbound",mockedPostData:{links:{inboundInternal:{rows:[{phrase:"Are you looking for an easy way to do an SEO analysis for your website?",anchor:"SEO analysis",url:"#",context:{postTitle:"How to Perform an SEO Analysis on Your WordPress Website",permalink:"#",editLink:"#"}},{phrase:"AIOSEO also allows you to create video sitemaps and comes with tons of different SEO tools.",anchor:"video sitemaps",url:"#",context:{postTitle:"How to Create WordPress Image Sitemap",permalink:"#",editLink:"#"}},{phrase:"You may also want to check out how to name your image files for SEO in WordPress and write alt text for images.",anchor:"how to name your image files for SEO in WordPress",url:"#",context:{postTitle:"What’s the Best Image Format for Your Website?",permalink:"#",editLink:"#"}},{phrase:"Are you looking for an easy way to do an SEO analysis for your website?",anchor:"SEO analysis",url:"#",context:{postTitle:"How to Perform an SEO Analysis on Your WordPress Website",permalink:"#",editLink:"#"}},{phrase:"To learn more, please check out our post on image SEO: how to best optimize your images in WordPress. ",anchor:"image SEO",url:"#",context:{postTitle:"How to Write Alt Text for Images for SEO",permalink:"#",editLink:"#"}},{phrase:"So let’s now move on to showing you exactly how easy it is to import and export redirects using the best redirect plugin for WordPress.",anchor:"best redirect plugin for WordPress",url:"#",context:{postTitle:"How to Easily Import and Export Redirects in WordPress",permalink:"#",editLink:"#"}}],totals:{total:6}},outboundInternal:{totals:{total:12}},affiliate:{totals:{total:8}},external:{totals:{total:24}},suggestionsInbound:{totals:{total:9}},suggestionsOutbound:{totals:{total:9}}}},strings:{ctaButtonText:this.$t.__("Activate Link Assistant",this.$tdPro),ctaHeader:this.$t.__("Enable Link Assistant on your Site",this.$tdPro),ctaDescription:this.$t.__("Get relevant suggestions for adding internal links to all your content as well as finding any orphaned posts that have no internal links.",this.$td),linkOpportunities:this.$t.__("Actionable Link Suggestions",this.$td),orphanedPosts:this.$t.__("See Orphaned Posts",this.$td),affiliateLinks:this.$t.__("See Affiliate Links",this.$td),domainReports:this.$t.__("Top Domain Reports",this.$td),activateError:this.$t.__("An error occurred while activating the addon. Please upload it manually or contact support for more information.",this.$td),permissionWarning:this.$t.__("You currently don't have permission to activate this addon. Please ask a site administrator to activate first.",this.$td)},failed:!1,activationLoading:!1}},computed:{...M(["currentPost"]),initialTab(){return"inbound-internal"},tabs(){return[{slug:"inbound-internal",icon:"svg-link-internal-inbound",name:this.$t.sprintf("%1$s %2$s",this.mockedPostData.links.inboundInternal.totals.total,this.$t.__("Inbound Internal",this.$tdPro))},{slug:"outbound-internal",icon:"svg-link-internal-outbound",name:this.$t.sprintf("%1$s %2$s",this.mockedPostData.links.outboundInternal.totals.total,this.$t.__("Outbound Internal",this.$tdPro))},{slug:"affiliate",icon:"svg-link-affiliate",name:this.$t.sprintf("%1$s %2$s",this.mockedPostData.links.affiliate.totals.total,this.$t.__("Affiliate",this.$tdPro))},{slug:"external",icon:"svg-link-external",name:this.$t.sprintf("%1$s %2$s",this.mockedPostData.links.external.totals.total,this.$t.__("External",this.$tdPro))},{slug:"link-suggestions",icon:"svg-link-suggestion",name:this.$t.sprintf("%1$s %2$s",this.mockedPostData.links.suggestionsOutbound.totals.total+this.mockedPostData.links.suggestionsInbound.totals.total,this.$t.__("Link Suggestions",this.$tdPro))}]},modalHeader(){return this.$t.sprintf(this.$t.__('Links & Suggestions for "%1$s"',this.$tdPro),window.wp.data.select("core/editor").getEditedPostAttribute("title"))}},methods:{...E(["toggleLinkAssistantModal","updateAddon"]),..._t("linkAssistant",["getPostData"]),..._t(["installPlugins"]),activateAddon(){this.failed=!1,this.activationLoading=!0;const i=this.$addons.getAddon("aioseo-link-assistant");this.installPlugins([{plugin:i.basename}]).then(t=>{if(t.body.failed.length){this.activationLoading=!1,this.failed=!0;return}const e=[this.getPostData()];Promise.all(e).then(()=>{this.activationLoading=!1,i.hasMinimumVersion=!0,i.isActive=!0,this.updateAddon(i)})}).catch(()=>{this.activationLoading=!1})}}};var Yp=function(){var t=this,e=t._self._c;return e("div",{staticClass:"aioseo-tab-content aioseo-link-assistant"},[t.$root._data.screenContext==="metabox"?e("div",[e("core-blur",[e("core-main-tabs",{staticClass:"link-tabs",attrs:{internal:"",tabs:t.tabs,active:t.initialTab,showSaveButton:!1},scopedSlots:t._u([{key:"md-tab-icon",fn:function({tab:s}){return[e(s.icon,{tag:"component",class:[{warning:s.data.warning}]})]}}],null,!1,158741971)}),t.activeTab==="inbound-internal"?e("link-assistant-inbound-internal",{attrs:{post:t.mockedPostData,metabox:""}}):t._e()],1),e("cta",{attrs:{"cta-link":t.$aioseo.urls.aio.featureManager+"&aioseo-activate=aioseo-link-assistant","cta-button-action":"","cta-button-loading":t.activationLoading,"same-tab":"","button-text":t.strings.ctaButtonText,"learn-more-link":t.$links.getDocUrl("link-assistant"),"feature-list":[t.strings.linkOpportunities,t.strings.domainReports,t.strings.orphanedPosts,t.strings.affiliateLinks]},on:{"cta-button-click":t.activateAddon},scopedSlots:t._u([{key:"header-text",fn:function(){return[t._v(" "+t._s(t.strings.ctaHeader)+" ")]},proxy:!0},{key:"description",fn:function(){return[t.failed?e("core-alert",{attrs:{type:"red"}},[t._v(" "+t._s(t.strings.activateError)+" ")]):t._e(),t._v(" "+t._s(t.strings.ctaDescription)+" ")]},proxy:!0},{key:"learn-more-text",fn:function(){return[t._v(" "+t._s(t.strings.learnMoreText)+" ")]},proxy:!0}],null,!1,2680951548)})],1):t._e(),t.currentPost.linkAssistant.modalOpen&&t.$root._data.screenContext==="sidebar"?e("core-modal-portal",{attrs:{classes:["aioseo-link-assistant-modal"]},on:{close:t.toggleLinkAssistantModal}},[e("div",{attrs:{slot:"headerTitle"},slot:"headerTitle"},[t._v(" "+t._s(t.modalHeader)+" ")]),e("div",{attrs:{slot:"body"},slot:"body"},[e("core-blur",[e("core-main-tabs",{staticClass:"link-tabs",attrs:{internal:"",tabs:t.tabs,active:t.initialTab,showSaveButton:!1},scopedSlots:t._u([{key:"md-tab-icon",fn:function({tab:s}){return[e(s.icon,{tag:"component",class:[{warning:s.data.warning}]})]}}],null,!1,2019150867)}),t.activeTab==="inbound-internal"?e("link-assistant-inbound-internal",{attrs:{post:t.mockedPostData,metabox:""}}):t._e()],1),e("cta",{attrs:{"cta-link":t.$aioseo.urls.aio.featureManager+"&aioseo-activate=aioseo-link-assistant","cta-button-action":"","cta-button-loading":t.activationLoading,"same-tab":"","button-text":t.strings.ctaButtonText,"learn-more-link":t.$links.getDocUrl("link-assistant"),"feature-list":[t.strings.linkOpportunities,t.strings.domainReports,t.strings.orphanedPosts,t.strings.affiliateLinks]},on:{"cta-button-click":t.activateAddon},scopedSlots:t._u([{key:"header-text",fn:function(){return[t._v(" "+t._s(t.strings.ctaHeader)+" ")]},proxy:!0},{key:"description",fn:function(){return[t.failed?e("core-alert",{attrs:{type:"red"}},[t._v(" "+t._s(t.strings.activateError)+" ")]):t._e(),t._v(" "+t._s(t.strings.ctaDescription)+" ")]},proxy:!0},{key:"learn-more-text",fn:function(){return[t._v(" "+t._s(t.strings.learnMoreText)+" ")]},proxy:!0}],null,!1,2680951548)})],1)]):t._e(),this.parentComponentContext!=="modal"?e("links-side-bar"):t._e()],1)},Qp=[],Xp=$(jp,Yp,Qp,!1,null,null,null,null);const Zp=Xp.exports,tf={components:{CoreAlert:Pt,CoreBlur:qs,CoreMainTabs:re,CoreModalPortal:ne,Cta:so,LinkAssistantInboundInternal:Qn,LinksSideBar:ro,SvgLinkAffiliate:Xn,SvgLinkExternal:Zn,SvgLinkInternalInbound:to,SvgLinkInternalOutbound:eo,SvgLinkSuggestion:ur,RequiredPlans:Ad},props:{parentComponentContext:String},data(){return{activeTab:"inbound-internal",activeSuggestionTab:"suggestions-inbound",mockedPostData:{links:{inboundInternal:{rows:[{phrase:"Are you looking for an easy way to do an SEO analysis for your website?",anchor:"SEO analysis",url:"#",context:{postTitle:"How to Perform an SEO Analysis on Your WordPress Website",permalink:"#",editLink:"#"}},{phrase:"AIOSEO also allows you to create video sitemaps and comes with tons of different SEO tools.",anchor:"video sitemaps",url:"#",context:{postTitle:"How to Create WordPress Image Sitemap",permalink:"#",editLink:"#"}},{phrase:"You may also want to check out how to name your image files for SEO in WordPress and write alt text for images.",anchor:"how to name your image files for SEO in WordPress",url:"#",context:{postTitle:"What’s the Best Image Format for Your Website?",permalink:"#",editLink:"#"}},{phrase:"Are you looking for an easy way to do an SEO analysis for your website?",anchor:"SEO analysis",url:"#",context:{postTitle:"How to Perform an SEO Analysis on Your WordPress Website",permalink:"#",editLink:"#"}},{phrase:"To learn more, please check out our post on image SEO: how to best optimize your images in WordPress. ",anchor:"image SEO",url:"#",context:{postTitle:"How to Write Alt Text for Images for SEO",permalink:"#",editLink:"#"}},{phrase:"So let’s now move on to showing you exactly how easy it is to import and export redirects using the best redirect plugin for WordPress.",anchor:"best redirect plugin for WordPress",url:"#",context:{postTitle:"How to Easily Import and Export Redirects in WordPress",permalink:"#",editLink:"#"}}],totals:{total:6}},outboundInternal:{totals:{total:12}},affiliate:{totals:{total:8}},external:{totals:{total:24}},suggestionsInbound:{totals:{total:9}},suggestionsOutbound:{totals:{total:9}}}},strings:{ctaButtonText:this.$t.sprintf(this.$t.__("Upgrade to %1$s and Unlock Link Assistant",this.$td),"Pro"),ctaHeader:this.$t.sprintf(this.$t.__("Link Assistant is only available for licensed %1$s %2$s users.",this.$td),"AIOSEO","Pro"),linkAssistantDescription:this.$t.__("Get relevant suggestions for adding internal links to all your content as well as finding any orphaned posts that have no internal links.",this.$td),thisFeatureRequires:this.$t.__("This feature requires one of the following plans:",this.$td),linkOpportunities:this.$t.__("Actionable Link Suggestions",this.$td),orphanedPosts:this.$t.__("See Orphaned Posts",this.$td),affiliateLinks:this.$t.__("See Affiliate Links",this.$td),domainReports:this.$t.__("Top Domain Reports",this.$td)}}},computed:{...M(["currentPost"]),initialTab(){return"inbound-internal"},tabs(){return[{slug:"inbound-internal",icon:"svg-link-internal-inbound",name:this.$t.sprintf("%1$s %2$s",this.mockedPostData.links.inboundInternal.totals.total,this.$t.__("Inbound Internal",this.$tdPro))},{slug:"outbound-internal",icon:"svg-link-internal-outbound",name:this.$t.sprintf("%1$s %2$s",this.mockedPostData.links.outboundInternal.totals.total,this.$t.__("Outbound Internal",this.$tdPro))},{slug:"affiliate",icon:"svg-link-affiliate",name:this.$t.sprintf("%1$s %2$s",this.mockedPostData.links.affiliate.totals.total,this.$t.__("Affiliate",this.$tdPro))},{slug:"external",icon:"svg-link-external",name:this.$t.sprintf("%1$s %2$s",this.mockedPostData.links.external.totals.total,this.$t.__("External",this.$tdPro))},{slug:"link-suggestions",icon:"svg-link-suggestion",name:this.$t.sprintf("%1$s %2$s",this.mockedPostData.links.suggestionsOutbound.totals.total+this.mockedPostData.links.suggestionsInbound.totals.total,this.$t.__("Link Suggestions",this.$tdPro))}]},modalHeader(){return this.$t.sprintf(this.$t.__('Links & Suggestions for "%1$s"',this.$tdPro),window.wp.data.select("core/editor").getEditedPostAttribute("title"))}},methods:{...E(["toggleLinkAssistantModal"])}};var ef=function(){var t=this,e=t._self._c;return e("div",{staticClass:"aioseo-tab-content aioseo-link-assistant"},[t.$root._data.screenContext==="metabox"?e("div",[e("core-blur",[e("core-main-tabs",{staticClass:"link-tabs",attrs:{internal:"",tabs:t.tabs,active:t.initialTab,showSaveButton:!1},scopedSlots:t._u([{key:"md-tab-icon",fn:function({tab:s}){return[e(s.icon,{tag:"component",class:[{warning:s.data.warning}]})]}}],null,!1,158741971)}),t.activeTab==="inbound-internal"?e("link-assistant-inbound-internal",{attrs:{post:t.mockedPostData,metabox:""}}):t._e()],1),e("cta",{attrs:{"cta-link":t.$links.getPricingUrl("link-assistant","link-assistant-upsell","metabox"),"button-text":t.strings.ctaButtonText,"learn-more-link":t.$links.getUpsellUrl("link-assistant","metabox","home"),"feature-list":[t.strings.linkOpportunities,t.strings.domainReports,t.strings.orphanedPosts,t.strings.affiliateLinks]},scopedSlots:t._u([{key:"header-text",fn:function(){return[t._v(" "+t._s(t.strings.ctaHeader)+" ")]},proxy:!0},{key:"description",fn:function(){return[e("required-plans",{attrs:{addon:"aioseo-link-assistant"}}),t._v(" "+t._s(t.strings.linkAssistantDescription)+" ")]},proxy:!0}],null,!1,2592559336)})],1):t._e(),t.currentPost.linkAssistant.modalOpen&&t.$root._data.screenContext==="sidebar"?e("core-modal-portal",{attrs:{classes:["aioseo-link-assistant-modal"]},on:{close:t.toggleLinkAssistantModal}},[e("div",{attrs:{slot:"headerTitle"},slot:"headerTitle"},[t._v(" "+t._s(t.modalHeader)+" ")]),e("div",{attrs:{slot:"body"},slot:"body"},[e("core-blur",[e("core-main-tabs",{staticClass:"link-tabs",attrs:{internal:"",tabs:t.tabs,active:t.initialTab,showSaveButton:!1},scopedSlots:t._u([{key:"md-tab-icon",fn:function({tab:s}){return[e(s.icon,{tag:"component",class:[{warning:s.data.warning}]})]}}],null,!1,2019150867)}),t.activeTab==="inbound-internal"?e("link-assistant-inbound-internal",{attrs:{post:t.mockedPostData,metabox:""}}):t._e()],1),e("cta",{attrs:{"cta-link":t.$links.getPricingUrl("link-assistant","link-assistant-upsell","metabox"),"button-text":t.strings.ctaButtonText,"learn-more-link":t.$links.getUpsellUrl("link-assistant","metabox","home"),"feature-list":[t.strings.linkOpportunities,t.strings.domainReports,t.strings.orphanedPosts,t.strings.affiliateLinks]},scopedSlots:t._u([{key:"header-text",fn:function(){return[t._v(" "+t._s(t.strings.ctaHeader)+" ")]},proxy:!0},{key:"description",fn:function(){return[e("required-plans",{attrs:{addon:"aioseo-link-assistant"}}),t._v(" "+t._s(t.strings.linkAssistantDescription)+" ")]},proxy:!0}],null,!1,2592559336)})],1)]):t._e(),this.parentComponentContext!=="modal"?e("links-side-bar"):t._e()],1)},sf=[],rf=$(tf,ef,sf,!1,null,null,null,null);const nf=rf.exports;const of={components:{Links:Jp,LinksActivate:Zp,LinksLite:nf},props:{parentComponentContext:String},computed:{...de(["isUnlicensed"])}};var af=function(){var t=this,e=t._self._c;return e("div",{staticClass:"aioseo-tab-content aioseo-link-assistant"},[!t.isUnlicensed&&t.$addons.isActive("aioseo-link-assistant")&&!t.$addons.requiresUpgrade("aioseo-link-assistant")?e("Links",{attrs:{parentComponentContext:t.parentComponentContext}}):t._e(),t.isUnlicensed||t.$addons.requiresUpgrade("aioseo-link-assistant")?e("LinksLite",{attrs:{parentComponentContext:t.parentComponentContext}}):t._e(),!t.isUnlicensed&&!t.$addons.isActive("aioseo-link-assistant")&&t.$addons.canActivate("aioseo-link-assistant")&&!t.$addons.requiresUpgrade("aioseo-link-assistant")?e("LinksActivate",{attrs:{parentComponentContext:t.parentComponentContext}}):t._e()],1)},lf=[],cf=$(of,af,lf,!1,null,null,null,null);const hf=cf.exports;const uf={components:{BaseImg:At,CoreAlert:Pt,CoreFacebookPreview:Dd,CoreHtmlTagsEditor:et,CoreSettingsRow:G,SvgCirclePlus:at},mixins:[Fl,Hl,Me,Yn,Jn,Tt,Je],props:{isMobilePreview:{type:Boolean,default(){return!1}}},data(){return{titleCount:0,descriptionCount:0,strings:{tabName:this.$t.__("Facebook Preview",this.$td),imageSource:this.$t.__("Image Source",this.$td),customFieldsName:this.$t.__("Custom Field Name",this.$td),video:this.$t.__("Video URL",this.$td),width:this.$t.__("Width",this.$td),height:this.$t.__("Height",this.$td),facebookObjectType:this.$t.__("Object Type",this.$td),facebookImage:this.$t.__("Facebook Image",this.$td),facebookTitle:this.$t.__("Facebook Title",this.$td),facebookDescription:this.$t.__("Facebook Description",this.$td),uploadOrSelectImage:this.$t.__("Upload or Select Image",this.$td),pasteYourImageUrl:this.$t.__("Paste your image URL or select a new image",this.$td),minimumSize:this.$t.__("Minimum size: 200px x 200px, ideal ratio 1.91:1, 5MB max. (eg: 1640px x 856px or 3280px x 1712px for retina screens). JPG, PNG, WEBP and GIF formats only.",this.$td),remove:this.$t.__("Remove",this.$td),clickToAddSiteName:this.$t.__("Click on the tags below to insert variables into your site name.",this.$td),clickToAddHomePageDescription:this.$t.__("Click on the tags below to insert variables into your meta description.",this.$td),articleSection:this.$t.__("Article Section",this.$td),articleTags:this.$t.__("Article Tags",this.$td),tagPlaceholder:this.$t.__("Press enter to create an article tag",this.$td),facebookDisabled:this.$t.sprintf(this.$t.__("No %1$s markup will be output for your post because it is currently disabled. You can enable %1$s markup in the Social Networks settings. %2$s",this.$td),this.$t.__("Open Graph",this.$td),this.$t.sprintf('<a href="%1$s" target="_blank">%2$s<span class="link-right-arrow">&nbsp;&rarr;</span></a>',this.$aioseo.urls.aio.socialNetworks+"#facebook",this.$t.__("Go to Social Networks",this.$td)))}}},computed:{...M("live-tags",["liveTags"]),...M(["currentPost","metaBoxTabs","options","dynamicOptions"]),objectTypeOptions(){return[{groupLabel:this.$t.__("Default",this.$td),options:[{label:this.$t.__("Default Object Type (Set in Social Networks)",this.$td),value:"default"}]}].concat(this.$constants.OG_TYPE_OPTIONS)},previewTitle(){return this.parseTags(this.currentPost.og_title||this.currentPost.title||this.currentPost.tags.title||"#post_title #separator_sa #site_title")},previewDescription(){return this.parseTags(this.currentPost.og_description||this.currentPost.description||this.currentPost.tags.description||"#post_content")},shouldShowArticleSection(){const i=this.currentPost.context==="term"?"taxonomies":"postTypes";return this.currentPost.og_object_type==="article"||this.currentPost.og_object_type==="default"&&this.dynamicOptions.social.facebook.general[i][this.currentPost.postType||this.currentPost.termType].objectType==="article"}},methods:{..._t(["savePostState"]),scrollToElement(){const i=document.getElementsByClassName("component-wrapper")[0];setTimeout(()=>{i&&(i.firstChild.scrollTop=0)},10)},saveImageType(i){this.$set(this.currentPost,"og_image_type",i),this.$store.commit("isDirty",!0)},getObjectTypeOptions(i){let t=null;return this.objectTypeOptions.forEach(e=>{const s=e.options.find(r=>r.value===i);s&&(t=s)}),t},setObjectType(i){this.$set(this.currentPost,"og_object_type",i),this.$store.commit("isDirty",!0)},updateImage(i){this.currentPost.og_image_custom_url=i,this.savePostState()}},watch:{"currentPost.og_image_type"(){this.setImageUrl()},"currentPost.og_image_custom_url"(){this.setImageUrl()}},mounted(){this.scrollToElement()}};var df=function(){var t=this,e=t._self._c;return e("div",{staticClass:"tab-facebook"},[e("core-settings-row",{attrs:{noBorder:"",noVerticalMargin:""},scopedSlots:t._u([{key:"content",fn:function(){return[t.options.social.facebook.general.enable?t._e():e("core-alert",{staticClass:"facebook-disabled-warning",attrs:{type:"red"},domProps:{innerHTML:t._s(t.strings.facebookDisabled)}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.tabName},scopedSlots:t._u([{key:"content",fn:function(){return[e("core-facebook-preview",{class:{ismobilecard:t.currentPost.socialMobilePreview},attrs:{description:t.previewDescription,image:t.imageUrl,loading:t.loading,title:t.previewTitle}})]},proxy:!0}])}),e("div",{attrs:{id:"aioseo-post-settings-facebook"}},[e("core-settings-row",{staticClass:"facebook-title-settings",attrs:{name:t.strings.facebookTitle,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("core-html-tags-editor",{staticClass:"facebook-meta-input",attrs:{"line-numbers":!1,single:"","tags-context":`${t.currentPost.postType||t.currentPost.termType}Title`,"default-tags":t.$tags.getDefaultTags(t.currentPost.context==="term"?"taxonomies":null,null,"title")},on:{counter:s=>t.updateCount(s,"titleCount"),input:t.setIsDirty},scopedSlots:t._u([{key:"tags-description",fn:function(){return[t._v(" "+t._s(t.strings.clickToAddSiteName)+" ")]},proxy:!0}]),model:{value:t.currentPost.og_title,callback:function(s){t.$set(t.currentPost,"og_title",s)},expression:"currentPost.og_title"}}),e("div",{staticClass:"max-recommended-count",domProps:{innerHTML:t._s(t.maxRecommendedCount(t.titleCount,95))}})]},proxy:!0}])}),e("core-settings-row",{staticClass:"facebook-description-settings",attrs:{name:t.strings.facebookDescription,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("core-html-tags-editor",{staticClass:"facebook-meta-input",attrs:{"line-numbers":!1,description:"","tags-context":`${t.currentPost.postType||t.currentPost.termType}Description`,"default-tags":t.$tags.getDefaultTags(t.currentPost.context==="term"?"taxonomies":null,null,"description")},on:{counter:s=>t.updateCount(s,"descriptionCount"),input:t.setIsDirty},scopedSlots:t._u([{key:"tags-description",fn:function(){return[t._v(" "+t._s(t.strings.clickToAddHomePageDescription)+" ")]},proxy:!0}]),model:{value:t.currentPost.og_description,callback:function(s){t.$set(t.currentPost,"og_description",s)},expression:"currentPost.og_description"}}),e("div",{staticClass:"max-recommended-count",domProps:{innerHTML:t._s(t.maxRecommendedCount(t.descriptionCount,200))}})]},proxy:!0}])}),e("core-settings-row",{staticClass:"facebook-image-source",attrs:{name:t.strings.imageSource,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-select",{attrs:{size:"medium",options:t.imageSourceOptionsFiltered,value:t.getImageSourceOptionFiltered(t.currentPost.og_image_type)},on:{input:s=>t.saveImageType(s.value)}})]},proxy:!0}])}),t.currentPost.og_image_type==="custom"?e("core-settings-row",{attrs:{name:t.strings.customFieldsName,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium",placeholder:t.strings.placeholder},on:{input:t.setIsDirty},model:{value:t.currentPost.og_image_custom_fields,callback:function(s){t.$set(t.currentPost,"og_image_custom_fields",s)},expression:"currentPost.og_image_custom_fields"}})]},proxy:!0}],null,!1,1200630708)}):t._e(),t.currentPost.og_image_type==="custom_image"?e("core-settings-row",{staticClass:"facebook-image",attrs:{name:t.strings.facebookImage},scopedSlots:t._u([{key:"content",fn:function(){return[e("div",{staticClass:"facebook-image-upload"},[e("base-input",{attrs:{size:"medium",placeholder:t.strings.pasteYourImageUrl},on:{input:t.setIsDirty},model:{value:t.currentPost.og_image_custom_url,callback:function(s){t.$set(t.currentPost,"og_image_custom_url",s)},expression:"currentPost.og_image_custom_url"}}),e("base-button",{staticClass:"insert-image",attrs:{size:"medium",type:"black"},on:{click:function(s){return t.openUploadModal("facebookImage",t.updateImage)}}},[e("svg-circle-plus"),t._v(" "+t._s(t.strings.uploadOrSelectImage)+" ")],1),e("base-button",{staticClass:"remove-image",attrs:{size:"medium",type:"gray"},on:{click:function(s){t.currentPost.og_image_custom_url=null}}},[t._v(" "+t._s(t.strings.remove)+" ")])],1),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.minimumSize)+" ")]),e("base-img",{attrs:{src:t.currentPost.og_image_custom_url}})]},proxy:!0}],null,!1,3927397516)}):t._e(),e("core-settings-row",{staticClass:"facebook-video",attrs:{name:t.strings.video,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium"},model:{value:t.currentPost.og_video,callback:function(s){t.$set(t.currentPost,"og_video",s)},expression:"currentPost.og_video"}})]},proxy:!0}])}),e("core-settings-row",{staticClass:"facebook-object-type",attrs:{name:t.strings.facebookObjectType,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-select",{attrs:{size:"medium","open-direction":"top",options:t.objectTypeOptions,"group-label":"groupLabel","group-values":"options",value:t.getObjectTypeOptions(t.currentPost.og_object_type)},on:{input:s=>t.setObjectType(s.value)}})]},proxy:!0}])}),t.shouldShowArticleSection?e("core-settings-row",{attrs:{name:t.strings.articleSection,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium"},model:{value:t.currentPost.og_article_section,callback:function(s){t.$set(t.currentPost,"og_article_section",s)},expression:"currentPost.og_article_section"}})]},proxy:!0}],null,!1,1205905290)}):t._e(),t.shouldShowArticleSection?e("core-settings-row",{attrs:{name:t.strings.articleTags,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-select",{attrs:{multiple:"",taggable:"",options:t.getJsonValue(t.currentPost.og_article_tags)||[],value:t.getJsonValue(t.currentPost.og_article_tags)||[],"tag-placeholder":t.strings.tagPlaceholder},on:{input:s=>t.currentPost.og_article_tags=t.setJsonValue(s)}})]},proxy:!0}],null,!1,2497302637)}):t._e()],1)],1)},pf=[],ff=$(uf,df,pf,!1,null,null,null,null);const mf=ff.exports;const gf={components:{BaseImg:At,CoreAlert:Pt,CoreHtmlTagsEditor:et,CoreSettingsRow:G,CoreTwitterPreview:Md,SvgCirclePlus:at},mixins:[Fl,Hl,Yn,Jn,Tt,Je],props:{isMobilePreview:{type:Boolean,default(){return!1}}},data(){return{titleCount:0,descriptionCount:0,strings:{twitterPreview:this.$t.__("Twitter Preview",this.$td),useFB:this.$t.__("Use Data from Facebook Tab",this.$td),imageSource:this.$t.__("Image Source",this.$td),customFieldsName:this.$t.__("Custom Field Name",this.$td),twitterImage:this.$t.__("Twitter Image",this.$td),twitterTitle:this.$t.__("Twitter Title",this.$td),twitterDescription:this.$t.__("Twitter Description",this.$td),twitterCardType:this.$t.__("Twitter Card Type",this.$td),pasteYourImageUrl:this.$t.__("Paste your image URL or select a new image",this.$td),uploadOrSelectImage:this.$t.__("Upload or Select Image",this.$td),remove:this.$t.__("Remove",this.$td),minimumSizeSummary:this.$t.__("Minimum size: 144px x 144px, ideal ratio 1:1, 5MB max. JPG, PNG, WEBP and GIF formats only.",this.$td),minimumSizeSummaryWithLarge:this.$t.__("Minimum size: 300px x 157px, ideal ratio 2:1, 5MB max. JPG, PNG, WEBP and GIF formats only.",this.$td),twitterDisabled:this.$t.sprintf(this.$t.__("No %1$s markup will be output for your post because it is currently disabled. You can enable %1$s markup in the Social Networks settings. %2$s",this.$td),this.$t.__("Twitter",this.$td),this.$t.sprintf('<a href="%1$s" target="_blank">%2$s<span class="link-right-arrow">&nbsp;&rarr;</span></a>',this.$aioseo.urls.aio.socialNetworks+"#twitter",this.$t.__("Go to Social Networks",this.$td)))}}},computed:{...M(["currentPost","metaBoxTabs","options"]),twitterCards(){return[{label:this.$t.__("Default (Set under Social Networks)",this.$td),value:"default"},{label:this.$t.__("Summary",this.$td),value:"summary"},{label:this.$t.__("Summary with Large Image",this.$td),value:"summary_large_image"}]},previewTitle(){const i=this.currentPost.twitter_use_og?this.currentPost.og_title:this.currentPost.twitter_title;return this.parseTags(i||this.currentPost.title||this.currentPost.tags.title||"#post_title #separator_sa #site_title")},previewDescription(){const i=this.currentPost.twitter_use_og?this.currentPost.og_description:this.currentPost.twitter_description;return this.parseTags(i||this.currentPost.description||this.currentPost.tags.description||"#post_content")}},methods:{..._t(["savePostState"]),getCardOptions(i){return this.twitterCards.find(t=>t.value===i)},cardSelect(i){this.$set(this.currentPost,"twitter_card",i),this.$store.commit("isDirty",!0)},scrollToElement(){const i=document.getElementsByClassName("component-wrapper")[0];setTimeout(()=>{i&&(i.firstChild.scrollTop=0)},10)},saveTwitterImageType(i){this.$set(this.currentPost,"twitter_image_type",i),this.$store.commit("isDirty",!0)},updateImage(i){this.currentPost.twitter_image_custom_url=i,this.savePostState()}},watch:{"currentPost.twitter_image_type"(){this.setImageUrl()},"currentPost.twitter_image_custom_url"(){this.setImageUrl()}},mounted(){this.scrollToElement()}};var _f=function(){var t=this,e=t._self._c;return e("div",{staticClass:"tab-twitter"},[e("core-settings-row",{attrs:{noBorder:"",noVerticalMargin:""},scopedSlots:t._u([{key:"content",fn:function(){return[t.options.social.twitter.general.enable?t._e():e("core-alert",{staticClass:"twitter-disabled-warning",attrs:{type:"red"},domProps:{innerHTML:t._s(t.strings.twitterDisabled)}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.twitterPreview},scopedSlots:t._u([{key:"content",fn:function(){return[e("core-twitter-preview",{class:{ismobilecard:t.currentPost.socialMobilePreview},attrs:{card:t.currentPost.twitter_card,description:t.previewDescription,image:t.imageUrl,loading:t.loading,title:t.previewTitle}})]},proxy:!0}])}),e("div",{attrs:{id:"aioseo-post-settings-twitter"}},[e("core-settings-row",{staticClass:"use-facebook",attrs:{name:t.strings.useFB},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-toggle",{on:{input:t.setIsDirty},model:{value:t.currentPost.twitter_use_og,callback:function(s){t.$set(t.currentPost,"twitter_use_og",s)},expression:"currentPost.twitter_use_og"}})]},proxy:!0}])}),t.currentPost.twitter_use_og?t._e():e("core-settings-row",{staticClass:"twitter-title-settings",attrs:{name:t.strings.twitterTitle,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("core-html-tags-editor",{staticClass:"twitter-meta-input",attrs:{"line-numbers":!1,single:"","tags-context":`${t.currentPost.postType||t.currentPost.termType}Title`,"default-tags":t.$tags.getDefaultTags(t.currentPost.context==="term"?"taxonomies":null,null,"title")},on:{counter:s=>t.updateCount(s,"titleCount"),input:t.setIsDirty},model:{value:t.currentPost.twitter_title,callback:function(s){t.$set(t.currentPost,"twitter_title",s)},expression:"currentPost.twitter_title"}}),e("div",{staticClass:"max-recommended-count",domProps:{innerHTML:t._s(t.maxRecommendedCount(t.titleCount,70))}})]},proxy:!0}],null,!1,4187010693)}),t.currentPost.twitter_use_og?t._e():e("core-settings-row",{staticClass:"twitter-description-settings",attrs:{name:t.strings.twitterDescription,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("core-html-tags-editor",{staticClass:"twitter-meta-input",attrs:{"line-numbers":!1,description:"","tags-context":`${t.currentPost.postType||t.currentPost.termType}Description`,"default-tags":t.$tags.getDefaultTags(t.currentPost.context==="term"?"taxonomies":null,null,"description")},on:{counter:s=>t.updateCount(s,"descriptionCount"),input:t.setIsDirty},scopedSlots:t._u([{key:"tags-description",fn:function(){return[t._v(" "+t._s(t.strings.clickToAddHomePageDescription)+" ")]},proxy:!0}],null,!1,3376949532),model:{value:t.currentPost.twitter_description,callback:function(s){t.$set(t.currentPost,"twitter_description",s)},expression:"currentPost.twitter_description"}}),e("div",{staticClass:"max-recommended-count",domProps:{innerHTML:t._s(t.maxRecommendedCount(t.descriptionCount,200))}})]},proxy:!0}],null,!1,577802586)}),t.currentPost.twitter_use_og?t._e():e("core-settings-row",{staticClass:"twitter-image-source",attrs:{name:t.strings.imageSource,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-select",{attrs:{size:"medium",options:t.imageSourceOptionsFiltered,value:t.getImageSourceOptionFiltered(t.currentPost.twitter_image_type)},on:{input:s=>t.saveTwitterImageType(s.value)}})]},proxy:!0}],null,!1,45254494)}),!t.currentPost.twitter_use_og&&t.currentPost.twitter_image_type==="custom"?e("core-settings-row",{staticClass:"twitter-custom-field",attrs:{name:t.strings.customFieldsName,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium",placeholder:t.strings.placeholder},on:{input:t.setIsDirty},model:{value:t.currentPost.twitter_image_custom_fields,callback:function(s){t.$set(t.currentPost,"twitter_image_custom_fields",s)},expression:"currentPost.twitter_image_custom_fields"}})]},proxy:!0}],null,!1,2513842721)}):t._e(),!t.currentPost.twitter_use_og&&t.currentPost.twitter_image_type==="custom_image"?e("core-settings-row",{staticClass:"twitter-image",attrs:{name:t.strings.twitterImage},scopedSlots:t._u([{key:"content",fn:function(){return[e("div",{staticClass:"twitter-image-upload"},[e("base-input",{attrs:{size:"medium",placeholder:t.strings.pasteYourImageUrl},on:{input:t.setIsDirty},model:{value:t.currentPost.twitter_image_custom_url,callback:function(s){t.$set(t.currentPost,"twitter_image_custom_url",s)},expression:"currentPost.twitter_image_custom_url"}}),e("base-button",{staticClass:"insert-image",attrs:{size:"medium",type:"black"},on:{click:function(s){return t.openUploadModal("twitterImage",t.updateImage)}}},[e("svg-circle-plus"),t._v(" "+t._s(t.strings.uploadOrSelectImage)+" ")],1),e("base-button",{staticClass:"remove-image",attrs:{size:"medium",type:"gray"},on:{click:function(s){t.currentPost.twitter_image_custom_url=null}}},[t._v(" "+t._s(t.strings.remove)+" ")])],1),e("div",{staticClass:"aioseo-description"},[t.currentPost.twitter_card==="summary"||t.currentPost.twitter_card==="default"&&t.options.social.twitter.general.defaultCardType==="summary"?e("span",[t._v(t._s(t.strings.minimumSizeSummary))]):t._e(),t.currentPost.twitter_card==="summary_large_image"||t.currentPost.twitter_card==="default"&&t.options.social.twitter.general.defaultCardType==="summary_large_image"?e("span",[t._v(t._s(t.strings.minimumSizeSummaryWithLarge))]):t._e()]),e("base-img",{attrs:{src:t.currentPost.twitter_image_custom_url}})]},proxy:!0}],null,!1,887651572)}):t._e(),e("core-settings-row",{staticClass:"twitter-card-type",attrs:{name:t.strings.twitterCardType,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-select",{attrs:{size:"medium","open-direction":"top",options:t.twitterCards,value:t.getCardOptions(t.currentPost.twitter_card)},on:{input:s=>t.cardSelect(s.value)}})]},proxy:!0}])})],1)],1)},yf=[],vf=$(gf,_f,yf,!1,null,null,null,null);const bf=vf.exports;const kf={components:{CoreSettingsRow:G,SvgPencil:hr},data(){return{strings:{title:this.$t.__("Social Media",this.$td),sidebarCopy:this.$t.__("Here you can view and edit the thumbnail, title and description that will be displayed when your site is shared on social media. Click on the button below to view and edit the preview.",this.$td),editSnippet:this.$t.__("Preview & Edit",this.$td)}}},methods:{..._t(["openModal"]),...E(["changeTabSettings"]),openModalEv(){this.changeTabSettings({setting:"modal",value:"social"}),this.openModal(!0)}}};var $f=function(){var t=this,e=t._self._c;return t.$root._data.screenContext==="sidebar"?e("core-settings-row",{staticClass:"snippet-description-row open-social-copy",attrs:{name:t.strings.metaDescription},scopedSlots:t._u([{key:"content",fn:function(){return[e("div",{staticClass:"aioseo-sidebar-content-title"},[t._v(t._s(t.strings.title))]),e("p",[t._v(t._s(t.strings.sidebarCopy))]),e("base-button",{staticClass:"open-social-modal gray small",on:{click:t.openModalEv}},[e("svg-pencil"),t._v(" "+t._s(t.strings.editSnippet)+" ")],1)]},proxy:!0}],null,!1,610604356)}):t._e()},xf=[],Sf=$(kf,$f,xf,!1,null,null,null,null);const wf=Sf.exports;const Cf={components:{BaseRadioToggle:Ke,CoreMainTabs:re,CoreSettingsRow:G,Facebook:mf,Twitter:bf,SocialSideBar:wf,SvgDesktop:zl,SvgMobile:Gl},props:{parentComponentContext:String},data(){return{strings:{pageName:this.$t.__("Social",this.$td)},tabs:[{slug:"facebook",name:this.$t.__("Facebook",this.$td)},{slug:"twitter",name:this.$t.__("Twitter",this.$td)}]}},computed:{...M(["currentPost","metaBoxTabs","options"]),initTab:function(){let i=this.metaBoxTabs.social;return Is()["social-tab"]&&(i=Is()["social-tab"],tn("social-tab")),this.parentComponentContext==="modal"&&(i=this.metaBoxTabs.socialModal),i}},methods:{..._t(["changeSocialPreview"]),...E(["changeTabSettings"]),isMobilePreviewEv(i){this.changeSocialPreview(i)},processChangeTab(i){this.parentComponentContext==="modal"?this.changeTabSettings({setting:"socialModal",value:i}):this.changeTabSettings({setting:"social",value:i})}}};var Pf=function(){var t=this,e=t._self._c;return e("div",{staticClass:"aioseo-tab-content aioseo-post-social"},[e("core-settings-row",{staticClass:"mobile-radio-buttons",scopedSlots:t._u([{key:"content",fn:function(){return[e("core-main-tabs",{attrs:{tabs:t.tabs,showSaveButton:!1,active:t.initTab,internal:""},on:{changed:s=>t.processChangeTab(s)}}),t.$root._data.screenContext==="metabox"||t.parentComponentContext==="modal"?e("base-radio-toggle",{staticClass:"circle",attrs:{value:t.currentPost.socialMobilePreview,name:"previewSocialIsMobile",options:[{label:"desktop",value:!1,activeClass:"dark",slot:"desktop"},{label:"mobile",value:!0,slot:"mobile"}]},on:{input:t.isMobilePreviewEv},scopedSlots:t._u([{key:"desktop",fn:function(){return[e("svg-desktop")]},proxy:!0},{key:"mobile",fn:function(){return[e("svg-mobile")]},proxy:!0}],null,!1,3417581673)}):t._e()]},proxy:!0}])}),e("transition",{attrs:{name:"route-fade",mode:"out-in"}},[e(t.initTab,{tag:"component"})],1),this.parentComponentContext!=="modal"?e("social-side-bar"):t._e()],1)},Tf=[],Af=$(Cf,Pf,Tf,!1,null,null,null,null);const Yl=Af.exports;const Df={components:{CoreMainTabs:re,CoreSettingsRow:G,General:Jl,Social:Yl,SvgSettings:Ul,SvgShare:Wl},data(){return{activeTab:"general",strings:{pageName:this.$t.__("Modal Content",this.$td)},tabs:[{slug:"general",icon:"svg-settings",name:"General"},{slug:"social",icon:"svg-share",name:"Social"}]}},computed:{...M(["metaBoxTabs"]),getTabs(){return this.tabs.filter(i=>this.$allowed(`aioseo_page_${i.slug}_settings`))}},methods:{...E(["changeTabSettings"]),processChangeTab(i){this.activeTab=i,this.changeTabSettings({setting:"modal",value:i})}}};var Mf=function(){var t=this,e=t._self._c;return e("div",{staticClass:"aioseo-modal-content"},[e("core-settings-row",{staticClass:"mobile-radio-buttons",scopedSlots:t._u([{key:"content",fn:function(){return[e("core-main-tabs",{attrs:{tabs:t.getTabs,showSaveButton:!1,active:t.metaBoxTabs.modal,internal:""},on:{changed:s=>t.processChangeTab(s)}})]},proxy:!0}])}),e("div",{staticClass:"component-wrapper"},[e("transition",{attrs:{name:"route-fade",mode:"out-in"}},[e(this.activeTab,{tag:"component",attrs:{parentComponentContext:"modal"}})],1)],1)],1)},Of=[],If=$(Df,Mf,Of,!1,null,null,null,null);const Rf=If.exports;const Lf={components:{CoreSettingsRow:G,SvgRightArrowShort:jl},data(){return{strings:{title:this.$t.__("Redirects",this.$td),description:this.$t.__("Here you can add a redirect or view your existing redirects from this page. Click on the button below to view the Redirects panel.",this.$td),button:this.$t.__("Open Redirects",this.$td)}}},methods:{...E(["toggleRedirectsModal"])}};var Ef=function(){var t=this,e=t._self._c;return e("div",{staticClass:"aioseo-redirects-sidebar"},[t.$root._data.screenContext==="sidebar"?e("core-settings-row",{staticClass:"snippet-description-row open-redirects-copy",scopedSlots:t._u([{key:"content",fn:function(){return[e("div",{staticClass:"aioseo-sidebar-content-title"},[t._v(t._s(t.strings.title))]),e("p",[t._v(t._s(t.strings.description))]),e("base-button",{staticClass:"open-redirects-modal gray small",on:{click:t.toggleRedirectsModal}},[e("svg-right-arrow-short"),t._v(" "+t._s(t.strings.button)+" ")],1)]},proxy:!0}],null,!1,2798976986)}):t._e()],1)},Nf=[],Bf=$(Lf,Ef,Nf,!1,null,"8b622754",null,null);const no=Bf.exports;const zf={components:{CoreAddRedirection:kd,CoreModalPortal:ne,RedirectsSideBar:no,RedirectsTable:Id},props:{parentComponentContext:String},data(){return{strings:{modalHeader:this.$t.__("Redirects",this.$td)}}},computed:{...M(["currentPost"]),...de("redirects",["rows","permalinkPath"]),getUrl(){return{url:this.permalinkPath,showOptions:!0}},hasRedirects(){return this.rows&&this.rows.length},postId(){return this.currentPost.context==="post"?parseInt(this.currentPost.id):0}},methods:{..._t("redirects",["getPostRedirects"]),...E(["toggleRedirectsModal"]),reload(){this.getPostRedirects()}}};var Gf=function(){var t=this,e=t._self._c;return e("div",[t.$addons.isActive("aioseo-redirects")?e("div",[t.$root._data.screenContext==="metabox"?e("div",{staticClass:"aioseo-tab-content aioseo-redirects metabox"},[t.hasRedirects?t._e():e("core-add-redirection",{key:t.permalinkPath,attrs:{"disable-source":!0,"post-id":t.postId,"post-status":t.currentPost.postStatus,url:t.getUrl},on:{"added-redirect":t.reload}}),t.hasRedirects?e("div",[e("redirects-table",{attrs:{"disable-source":!0,"exclude-columns":["group"],"show-bulk-actions":!1,"show-header":!1,"show-table-footer":!1}})],1):t._e()],1):t._e(),t.currentPost.redirects.modalOpen&&t.$root._data.screenContext==="sidebar"?e("core-modal-portal",{attrs:{classes:["aioseo-redirects","modal"]},on:{close:t.toggleRedirectsModal}},[e("div",{attrs:{slot:"headerTitle"},slot:"headerTitle"},[t._v(" "+t._s(t.strings.modalHeader)+" ")]),e("div",{attrs:{slot:"body"},slot:"body"},[e("div",{staticClass:"bd"},[t.hasRedirects?t._e():e("core-add-redirection",{key:t.permalinkPath,attrs:{"disable-source":!0,"post-id":t.postId,"post-status":t.currentPost.postStatus,url:t.getUrl},on:{"added-redirect":t.reload}}),t.hasRedirects?e("div",[e("redirects-table",{attrs:{"disable-source":!0,"exclude-columns":["group"],"show-bulk-actions":!1,"show-header":!1,"show-table-footer":!1}})],1):t._e()],1)])]):t._e(),this.parentComponentContext!=="modal"?e("redirects-side-bar"):t._e()],1):t._e()])},Ff=[],Hf=$(zf,Gf,Ff,!1,null,null,null,null);const Vf=Hf.exports;const Uf={components:{CoreModal:io,RedirectsActivate:Rd,RedirectsSideBar:no},props:{parentComponentContext:String},data(){return{strings:{modalHeader:this.$t.__("Redirects",this.$tdPro)}}},computed:{...M(["currentPost"])},methods:{...E(["toggleRedirectsModal"])}};var Wf=function(){var t=this,e=t._self._c;return e("div",{staticClass:"aioseo-tab-content aioseo-redirects"},[t.$root._data.screenContext==="metabox"?e("div",[e("redirects-activate",{attrs:{noCoreCard:!0,parentComponentContext:t.parentComponentContext}})],1):t._e(),t.currentPost.redirects.modalOpen&&t.$root._data.screenContext==="sidebar"?e("core-modal",{staticClass:"aioseo-redirects modal",on:{close:t.toggleRedirectsModal}},[e("div",{attrs:{slot:"headerTitle"},slot:"headerTitle"},[t._v(" "+t._s(t.strings.modalHeader)+" ")]),e("div",{attrs:{slot:"body"},slot:"body"},[e("div",{staticClass:"bd"},[e("redirects-activate",{attrs:{noCoreCard:!0,parentComponentContext:t.parentComponentContext}})],1)])]):t._e(),this.parentComponentContext!=="modal"?e("redirects-side-bar"):t._e()],1)},Kf=[],qf=$(Uf,Wf,Kf,!1,null,null,null,null);const Jf=qf.exports,jf={components:{CoreModalPortal:ne,RedirectsSideBar:no,RedirectsLite:Ld},props:{parentComponentContext:String},data(){return{strings:{modalHeader:this.$t.__("Redirects",this.$tdPro)}}},computed:{...M(["currentPost"])},methods:{...E(["toggleRedirectsModal"])}};var Yf=function(){var t=this,e=t._self._c;return e("div",[t.$root._data.screenContext==="metabox"?e("redirects-lite",{attrs:{noCoreCard:!0,parentComponentContext:t.parentComponentContext}}):t._e(),t.currentPost.redirects.modalOpen&&t.$root._data.screenContext==="sidebar"?e("core-modal-portal",{attrs:{classes:["aioseo-redirects","modal"]},on:{close:t.toggleRedirectsModal}},[e("div",{attrs:{slot:"headerTitle"},slot:"headerTitle"},[t._v(" "+t._s(t.strings.modalHeader)+" ")]),e("div",{attrs:{slot:"body"},slot:"body"},[e("div",{staticClass:"bd"},[e("redirects-lite",{attrs:{noCoreCard:!0,parentComponentContext:t.parentComponentContext}})],1)])]):t._e(),this.parentComponentContext!=="modal"?e("redirects-side-bar"):t._e()],1)},Qf=[],Xf=$(jf,Yf,Qf,!1,null,null,null,null);const Zf=Xf.exports,tm={props:{parentComponentContext:String},components:{Redirects:Vf,RedirectsActivate:Jf,RedirectsLite:Zf},computed:{...de(["isUnlicensed"])}};var em=function(){var t=this,e=t._self._c;return e("div",{staticClass:"aioseo-tab-content"},[!t.isUnlicensed&&t.$addons.isActive("aioseo-redirects")&&!t.$addons.requiresUpgrade("aioseo-redirects")?e("Redirects",{attrs:{parentComponentContext:t.parentComponentContext}}):t._e(),t.isUnlicensed||t.$addons.requiresUpgrade("aioseo-redirects")?e("RedirectsLite",{attrs:{parentComponentContext:t.parentComponentContext}}):t._e(),!t.isUnlicensed&&!t.$addons.isActive("aioseo-redirects")&&t.$addons.canActivate("aioseo-redirects")&&!t.$addons.requiresUpgrade("aioseo-redirects")?e("RedirectsActivate",{attrs:{parentComponentContext:t.parentComponentContext}}):t._e()],1)},sm=[],im=$(tm,em,sm,!1,null,null,null,null);const rm=im.exports;const nm={components:{CoreModalPortal:ne,SvgClose:qn},props:{strings:{type:Object,required:!0}},mounted(){this.$emit("openModal",!0)}};var om=function(){var t=this,e=t._self._c;return e("core-modal-portal",{attrs:{classes:["aioseo-post-schema-confirmation-modal"],"no-header":""},on:{close:function(s){return t.$emit("closeModal",!0)}},scopedSlots:t._u([{key:"body",fn:function(){return[e("div",{staticClass:"aioseo-modal-body"},[e("button",{staticClass:"close",on:{click:function(s){return s.stopPropagation(),t.$emit("closeModal",!0)}}},[e("svg-close",{on:{click:function(s){return t.$emit("closeModal",!0)}}})],1),e("h3",[t._v(t._s(t.strings.areYouSure))]),e("div",{staticClass:"reset-description",domProps:{innerHTML:t._s(t.strings.actionCannotBeUndone)}}),e("base-button",{attrs:{type:"blue",size:"medium"},on:{click:function(s){return t.$emit("doAction",s)}}},[t._v(" "+t._s(t.strings.confirmation)+" ")]),e("base-button",{attrs:{type:"gray",size:"medium"},on:{click:function(s){return t.$emit("closeModal",!0)}}},[t._v(" "+t._s(t.strings.noChangedMind)+" ")])],1)]},proxy:!0}])})},am=[],lm=$(nm,om,am,!1,null,null,null,null);const oo=lm.exports;class z{constructor(){}lineAt(t){if(t<0||t>this.length)throw new RangeError(`Invalid position ${t} in document of length ${this.length}`);return this.lineInner(t,!1,1,0)}line(t){if(t<1||t>this.lines)throw new RangeError(`Invalid line number ${t} in ${this.lines}-line document`);return this.lineInner(t,!0,1,0)}replace(t,e,s){let r=[];return this.decompose(0,t,r,2),s.length&&s.decompose(0,s.length,r,3),this.decompose(e,this.length,r,1),Xt.from(r,this.length-(e-t)+s.length)}append(t){return this.replace(this.length,this.length,t)}slice(t,e=this.length){let s=[];return this.decompose(t,e,s,0),Xt.from(s,e-t)}eq(t){if(t==this)return!0;if(t.length!=this.length||t.lines!=this.lines)return!1;let e=this.scanIdentical(t,1),s=this.length-this.scanIdentical(t,-1),r=new As(this),n=new As(t);for(let o=e,a=e;;){if(r.next(o),n.next(o),o=0,r.lineBreak!=n.lineBreak||r.done!=n.done||r.value!=n.value)return!1;if(a+=r.value.length,r.done||a>=s)return!0}}iter(t=1){return new As(this,t)}iterRange(t,e=this.length){return new Ql(this,t,e)}iterLines(t,e){let s;if(t==null)s=this.iter();else{e==null&&(e=this.lines+1);let r=this.line(t).from;s=this.iterRange(r,Math.max(r,e==this.lines+1?this.length:e<=1?0:this.line(e-1).to))}return new Xl(s)}toString(){return this.sliceString(0)}toJSON(){let t=[];return this.flatten(t),t}static of(t){if(t.length==0)throw new RangeError("A document must have at least one line");return t.length==1&&!t[0]?z.empty:t.length<=32?new Q(t):Xt.from(Q.split(t,[]))}}class Q extends z{constructor(t,e=cm(t)){super(),this.text=t,this.length=e}get lines(){return this.text.length}get children(){return null}lineInner(t,e,s,r){for(let n=0;;n++){let o=this.text[n],a=r+o.length;if((e?s:a)>=t)return new hm(r,a,s,o);r=a+1,s++}}decompose(t,e,s,r){let n=t<=0&&e>=this.length?this:new Q(Wo(this.text,t,e),Math.min(e,this.length)-Math.max(0,t));if(r&1){let o=s.pop(),a=xi(n.text,o.text.slice(),0,n.length);if(a.length<=32)s.push(new Q(a,o.length+n.length));else{let l=a.length>>1;s.push(new Q(a.slice(0,l)),new Q(a.slice(l)))}}else s.push(n)}replace(t,e,s){if(!(s instanceof Q))return super.replace(t,e,s);let r=xi(this.text,xi(s.text,Wo(this.text,0,t)),e),n=this.length+s.length-(e-t);return r.length<=32?new Q(r,n):Xt.from(Q.split(r,[]),n)}sliceString(t,e=this.length,s=`
`){let r="";for(let n=0,o=0;n<=e&&o<this.text.length;o++){let a=this.text[o],l=n+a.length;n>t&&o&&(r+=s),t<l&&e>n&&(r+=a.slice(Math.max(0,t-n),e-n)),n=l+1}return r}flatten(t){for(let e of this.text)t.push(e)}scanIdentical(){return 0}static split(t,e){let s=[],r=-1;for(let n of t)s.push(n),r+=n.length+1,s.length==32&&(e.push(new Q(s,r)),s=[],r=-1);return r>-1&&e.push(new Q(s,r)),e}}class Xt extends z{constructor(t,e){super(),this.children=t,this.length=e,this.lines=0;for(let s of t)this.lines+=s.lines}lineInner(t,e,s,r){for(let n=0;;n++){let o=this.children[n],a=r+o.length,l=s+o.lines-1;if((e?l:a)>=t)return o.lineInner(t,e,s,r);r=a+1,s=l+1}}decompose(t,e,s,r){for(let n=0,o=0;o<=e&&n<this.children.length;n++){let a=this.children[n],l=o+a.length;if(t<=l&&e>=o){let c=r&((o<=t?1:0)|(l>=e?2:0));o>=t&&l<=e&&!c?s.push(a):a.decompose(t-o,e-o,s,c)}o=l+1}}replace(t,e,s){if(s.lines<this.lines)for(let r=0,n=0;r<this.children.length;r++){let o=this.children[r],a=n+o.length;if(t>=n&&e<=a){let l=o.replace(t-n,e-n,s),c=this.lines-o.lines+l.lines;if(l.lines<c>>5-1&&l.lines>c>>5+1){let h=this.children.slice();return h[r]=l,new Xt(h,this.length-(e-t)+s.length)}return super.replace(n,a,l)}n=a+1}return super.replace(t,e,s)}sliceString(t,e=this.length,s=`
`){let r="";for(let n=0,o=0;n<this.children.length&&o<=e;n++){let a=this.children[n],l=o+a.length;o>t&&n&&(r+=s),t<l&&e>o&&(r+=a.sliceString(t-o,e-o,s)),o=l+1}return r}flatten(t){for(let e of this.children)e.flatten(t)}scanIdentical(t,e){if(!(t instanceof Xt))return 0;let s=0,[r,n,o,a]=e>0?[0,0,this.children.length,t.children.length]:[this.children.length-1,t.children.length-1,-1,-1];for(;;r+=e,n+=e){if(r==o||n==a)return s;let l=this.children[r],c=t.children[n];if(l!=c)return s+l.scanIdentical(c,e);s+=l.length+1}}static from(t,e=t.reduce((s,r)=>s+r.length+1,-1)){let s=0;for(let p of t)s+=p.lines;if(s<32){let p=[];for(let f of t)f.flatten(p);return new Q(p,e)}let r=Math.max(32,s>>5),n=r<<1,o=r>>1,a=[],l=0,c=-1,h=[];function u(p){let f;if(p.lines>n&&p instanceof Xt)for(let g of p.children)u(g);else p.lines>o&&(l>o||!l)?(d(),a.push(p)):p instanceof Q&&l&&(f=h[h.length-1])instanceof Q&&p.lines+f.lines<=32?(l+=p.lines,c+=p.length+1,h[h.length-1]=new Q(f.text.concat(p.text),f.length+1+p.length)):(l+p.lines>r&&d(),l+=p.lines,c+=p.length+1,h.push(p))}function d(){l!=0&&(a.push(h.length==1?h[0]:Xt.from(h,c)),c=-1,l=h.length=0)}for(let p of t)u(p);return d(),a.length==1?a[0]:new Xt(a,e)}}z.empty=new Q([""],0);function cm(i){let t=-1;for(let e of i)t+=e.length+1;return t}function xi(i,t,e=0,s=1e9){for(let r=0,n=0,o=!0;n<i.length&&r<=s;n++){let a=i[n],l=r+a.length;l>=e&&(l>s&&(a=a.slice(0,s-r)),r<e&&(a=a.slice(e-r)),o?(t[t.length-1]+=a,o=!1):t.push(a)),r=l+1}return t}function Wo(i,t,e){return xi(i,[""],t,e)}class As{constructor(t,e=1){this.dir=e,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[t],this.offsets=[e>0?1:(t instanceof Q?t.text.length:t.children.length)<<1]}nextInner(t,e){for(this.done=this.lineBreak=!1;;){let s=this.nodes.length-1,r=this.nodes[s],n=this.offsets[s],o=n>>1,a=r instanceof Q?r.text.length:r.children.length;if(o==(e>0?a:0)){if(s==0)return this.done=!0,this.value="",this;e>0&&this.offsets[s-1]++,this.nodes.pop(),this.offsets.pop()}else if((n&1)==(e>0?0:1)){if(this.offsets[s]+=e,t==0)return this.lineBreak=!0,this.value=`
`,this;t--}else if(r instanceof Q){let l=r.text[o+(e<0?-1:0)];if(this.offsets[s]+=e,l.length>Math.max(0,t))return this.value=t==0?l:e>0?l.slice(t):l.slice(0,l.length-t),this;t-=l.length}else{let l=r.children[o+(e<0?-1:0)];t>l.length?(t-=l.length,this.offsets[s]+=e):(e<0&&this.offsets[s]--,this.nodes.push(l),this.offsets.push(e>0?1:(l instanceof Q?l.text.length:l.children.length)<<1))}}}next(t=0){return t<0&&(this.nextInner(-t,-this.dir),t=this.value.length),this.nextInner(t,this.dir)}}class Ql{constructor(t,e,s){this.value="",this.done=!1,this.cursor=new As(t,e>s?-1:1),this.pos=e>s?t.length:0,this.from=Math.min(e,s),this.to=Math.max(e,s)}nextInner(t,e){if(e<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;t+=Math.max(0,e<0?this.pos-this.to:this.from-this.pos);let s=e<0?this.pos-this.from:this.to-this.pos;t>s&&(t=s),s-=t;let{value:r}=this.cursor.next(t);return this.pos+=(r.length+t)*e,this.value=r.length<=s?r:e<0?r.slice(r.length-s):r.slice(0,s),this.done=!this.value,this}next(t=0){return t<0?t=Math.max(t,this.from-this.pos):t>0&&(t=Math.min(t,this.to-this.pos)),this.nextInner(t,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class Xl{constructor(t){this.inner=t,this.afterBreak=!0,this.value="",this.done=!1}next(t=0){let{done:e,lineBreak:s,value:r}=this.inner.next(t);return e?(this.done=!0,this.value=""):s?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(z.prototype[Symbol.iterator]=function(){return this.iter()},As.prototype[Symbol.iterator]=Ql.prototype[Symbol.iterator]=Xl.prototype[Symbol.iterator]=function(){return this});class hm{constructor(t,e,s,r){this.from=t,this.to=e,this.number=s,this.text=r}get length(){return this.to-this.from}}let ns="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(i=>i?parseInt(i,36):1);for(let i=1;i<ns.length;i++)ns[i]+=ns[i-1];function um(i){for(let t=1;t<ns.length;t+=2)if(ns[t]>i)return ns[t-1]<=i;return!1}function Ko(i){return i>=127462&&i<=127487}const qo=8205;function St(i,t,e=!0,s=!0){return(e?Zl:dm)(i,t,s)}function Zl(i,t,e){if(t==i.length)return t;t&&tc(i.charCodeAt(t))&&ec(i.charCodeAt(t-1))&&t--;let s=ut(i,t);for(t+=Lt(s);t<i.length;){let r=ut(i,t);if(s==qo||r==qo||e&&um(r))t+=Lt(r),s=r;else if(Ko(r)){let n=0,o=t-2;for(;o>=0&&Ko(ut(i,o));)n++,o-=2;if(n%2==0)break;t+=2}else break}return t}function dm(i,t,e){for(;t>0;){let s=Zl(i,t-2,e);if(s<t)return s;t--}return 0}function tc(i){return i>=56320&&i<57344}function ec(i){return i>=55296&&i<56320}function ut(i,t){let e=i.charCodeAt(t);if(!ec(e)||t+1==i.length)return e;let s=i.charCodeAt(t+1);return tc(s)?(e-55296<<10)+(s-56320)+65536:e}function ao(i){return i<=65535?String.fromCharCode(i):(i-=65536,String.fromCharCode((i>>10)+55296,(i&1023)+56320))}function Lt(i){return i<65536?1:2}const en=/\r\n?|\n/;var xt=function(i){return i[i.Simple=0]="Simple",i[i.TrackDel=1]="TrackDel",i[i.TrackBefore=2]="TrackBefore",i[i.TrackAfter=3]="TrackAfter",i}(xt||(xt={}));class ee{constructor(t){this.sections=t}get length(){let t=0;for(let e=0;e<this.sections.length;e+=2)t+=this.sections[e];return t}get newLength(){let t=0;for(let e=0;e<this.sections.length;e+=2){let s=this.sections[e+1];t+=s<0?this.sections[e]:s}return t}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(t){for(let e=0,s=0,r=0;e<this.sections.length;){let n=this.sections[e++],o=this.sections[e++];o<0?(t(s,r,n),r+=n):r+=o,s+=n}}iterChangedRanges(t,e=!1){sn(this,t,e)}get invertedDesc(){let t=[];for(let e=0;e<this.sections.length;){let s=this.sections[e++],r=this.sections[e++];r<0?t.push(s,r):t.push(r,s)}return new ee(t)}composeDesc(t){return this.empty?t:t.empty?this:sc(this,t)}mapDesc(t,e=!1){return t.empty?this:rn(this,t,e)}mapPos(t,e=-1,s=xt.Simple){let r=0,n=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],c=r+a;if(l<0){if(c>t)return n+(t-r);n+=a}else{if(s!=xt.Simple&&c>=t&&(s==xt.TrackDel&&r<t&&c>t||s==xt.TrackBefore&&r<t||s==xt.TrackAfter&&c>t))return null;if(c>t||c==t&&e<0&&!a)return t==r||e<0?n:n+l;n+=l}r=c}if(t>r)throw new RangeError(`Position ${t} is out of range for changeset of length ${r}`);return n}touchesRange(t,e=t){for(let s=0,r=0;s<this.sections.length&&r<=e;){let n=this.sections[s++],o=this.sections[s++],a=r+n;if(o>=0&&r<=e&&a>=t)return r<t&&a>e?"cover":!0;r=a}return!1}toString(){let t="";for(let e=0;e<this.sections.length;){let s=this.sections[e++],r=this.sections[e++];t+=(t?" ":"")+s+(r>=0?":"+r:"")}return t}toJSON(){return this.sections}static fromJSON(t){if(!Array.isArray(t)||t.length%2||t.some(e=>typeof e!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ee(t)}static create(t){return new ee(t)}}class rt extends ee{constructor(t,e){super(t),this.inserted=e}apply(t){if(this.length!=t.length)throw new RangeError("Applying change set to a document with the wrong length");return sn(this,(e,s,r,n,o)=>t=t.replace(r,r+(s-e),o),!1),t}mapDesc(t,e=!1){return rn(this,t,e,!0)}invert(t){let e=this.sections.slice(),s=[];for(let r=0,n=0;r<e.length;r+=2){let o=e[r],a=e[r+1];if(a>=0){e[r]=a,e[r+1]=o;let l=r>>1;for(;s.length<l;)s.push(z.empty);s.push(o?t.slice(n,n+o):z.empty)}n+=o}return new rt(e,s)}compose(t){return this.empty?t:t.empty?this:sc(this,t,!0)}map(t,e=!1){return t.empty?this:rn(this,t,e,!0)}iterChanges(t,e=!1){sn(this,t,e)}get desc(){return ee.create(this.sections)}filter(t){let e=[],s=[],r=[],n=new Rs(this);t:for(let o=0,a=0;;){let l=o==t.length?1e9:t[o++];for(;a<l||a==l&&n.len==0;){if(n.done)break t;let h=Math.min(n.len,l-a);mt(r,h,-1);let u=n.ins==-1?-1:n.off==0?n.ins:0;mt(e,h,u),u>0&&ve(s,e,n.text),n.forward(h),a+=h}let c=t[o++];for(;a<c;){if(n.done)break t;let h=Math.min(n.len,c-a);mt(e,h,-1),mt(r,h,n.ins==-1?-1:n.off==0?n.ins:0),n.forward(h),a+=h}}return{changes:new rt(e,s),filtered:ee.create(r)}}toJSON(){let t=[];for(let e=0;e<this.sections.length;e+=2){let s=this.sections[e],r=this.sections[e+1];r<0?t.push(s):r==0?t.push([s]):t.push([s].concat(this.inserted[e>>1].toJSON()))}return t}static of(t,e,s){let r=[],n=[],o=0,a=null;function l(h=!1){if(!h&&!r.length)return;o<e&&mt(r,e-o,-1);let u=new rt(r,n);a=a?a.compose(u.map(a)):u,r=[],n=[],o=0}function c(h){if(Array.isArray(h))for(let u of h)c(u);else if(h instanceof rt){if(h.length!=e)throw new RangeError(`Mismatched change set length (got ${h.length}, expected ${e})`);l(),a=a?a.compose(h.map(a)):h}else{let{from:u,to:d=u,insert:p}=h;if(u>d||u<0||d>e)throw new RangeError(`Invalid change range ${u} to ${d} (in doc of length ${e})`);let f=p?typeof p=="string"?z.of(p.split(s||en)):p:z.empty,g=f.length;if(u==d&&g==0)return;u<o&&l(),u>o&&mt(r,u-o,-1),mt(r,d-u,g),ve(n,r,f),o=d}}return c(t),l(!a),a}static empty(t){return new rt(t?[t,-1]:[],[])}static fromJSON(t){if(!Array.isArray(t))throw new RangeError("Invalid JSON representation of ChangeSet");let e=[],s=[];for(let r=0;r<t.length;r++){let n=t[r];if(typeof n=="number")e.push(n,-1);else{if(!Array.isArray(n)||typeof n[0]!="number"||n.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(n.length==1)e.push(n[0],0);else{for(;s.length<r;)s.push(z.empty);s[r]=z.of(n.slice(1)),e.push(n[0],s[r].length)}}}return new rt(e,s)}static createSet(t,e){return new rt(t,e)}}function mt(i,t,e,s=!1){if(t==0&&e<=0)return;let r=i.length-2;r>=0&&e<=0&&e==i[r+1]?i[r]+=t:t==0&&i[r]==0?i[r+1]+=e:s?(i[r]+=t,i[r+1]+=e):i.push(t,e)}function ve(i,t,e){if(e.length==0)return;let s=t.length-2>>1;if(s<i.length)i[i.length-1]=i[i.length-1].append(e);else{for(;i.length<s;)i.push(z.empty);i.push(e)}}function sn(i,t,e){let s=i.inserted;for(let r=0,n=0,o=0;o<i.sections.length;){let a=i.sections[o++],l=i.sections[o++];if(l<0)r+=a,n+=a;else{let c=r,h=n,u=z.empty;for(;c+=a,h+=l,l&&s&&(u=u.append(s[o-2>>1])),!(e||o==i.sections.length||i.sections[o+1]<0);)a=i.sections[o++],l=i.sections[o++];t(r,c,n,h,u),r=c,n=h}}}function rn(i,t,e,s=!1){let r=[],n=s?[]:null,o=new Rs(i),a=new Rs(t);for(let l=-1;;)if(o.ins==-1&&a.ins==-1){let c=Math.min(o.len,a.len);mt(r,c,-1),o.forward(c),a.forward(c)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!e))){let c=a.len;for(mt(r,a.ins,-1);c;){let h=Math.min(o.len,c);o.ins>=0&&l<o.i&&o.len<=h&&(mt(r,0,o.ins),n&&ve(n,r,o.text),l=o.i),o.forward(h),c-=h}a.next()}else if(o.ins>=0){let c=0,h=o.len;for(;h;)if(a.ins==-1){let u=Math.min(h,a.len);c+=u,h-=u,a.forward(u)}else if(a.ins==0&&a.len<h)h-=a.len,a.next();else break;mt(r,c,l<o.i?o.ins:0),n&&l<o.i&&ve(n,r,o.text),l=o.i,o.forward(o.len-h)}else{if(o.done&&a.done)return n?rt.createSet(r,n):ee.create(r);throw new Error("Mismatched change set lengths")}}function sc(i,t,e=!1){let s=[],r=e?[]:null,n=new Rs(i),o=new Rs(t);for(let a=!1;;){if(n.done&&o.done)return r?rt.createSet(s,r):ee.create(s);if(n.ins==0)mt(s,n.len,0,a),n.next();else if(o.len==0&&!o.done)mt(s,0,o.ins,a),r&&ve(r,s,o.text),o.next();else{if(n.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(n.len2,o.len),c=s.length;if(n.ins==-1){let h=o.ins==-1?-1:o.off?0:o.ins;mt(s,l,h,a),r&&h&&ve(r,s,o.text)}else o.ins==-1?(mt(s,n.off?0:n.len,l,a),r&&ve(r,s,n.textBit(l))):(mt(s,n.off?0:n.len,o.off?0:o.ins,a),r&&!o.off&&ve(r,s,o.text));a=(n.ins>l||o.ins>=0&&o.len>l)&&(a||s.length>c),n.forward2(l),o.forward(l)}}}}class Rs{constructor(t){this.set=t,this.i=0,this.next()}next(){let{sections:t}=this.set;this.i<t.length?(this.len=t[this.i++],this.ins=t[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:t}=this.set,e=this.i-2>>1;return e>=t.length?z.empty:t[e]}textBit(t){let{inserted:e}=this.set,s=this.i-2>>1;return s>=e.length&&!t?z.empty:e[s].slice(this.off,t==null?void 0:this.off+t)}forward(t){t==this.len?this.next():(this.len-=t,this.off+=t)}forward2(t){this.ins==-1?this.forward(t):t==this.ins?this.next():(this.ins-=t,this.off+=t)}}class ze{constructor(t,e,s){this.from=t,this.to=e,this.flags=s}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let t=this.flags&3;return t==3?null:t}get goalColumn(){let t=this.flags>>5;return t==33554431?void 0:t}map(t,e=-1){let s,r;return this.empty?s=r=t.mapPos(this.from,e):(s=t.mapPos(this.from,1),r=t.mapPos(this.to,-1)),s==this.from&&r==this.to?this:new ze(s,r,this.flags)}extend(t,e=t){if(t<=this.anchor&&e>=this.anchor)return y.range(t,e);let s=Math.abs(t-this.anchor)>Math.abs(e-this.anchor)?t:e;return y.range(this.anchor,s)}eq(t){return this.anchor==t.anchor&&this.head==t.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(t){if(!t||typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return y.range(t.anchor,t.head)}static create(t,e,s){return new ze(t,e,s)}}class y{constructor(t,e){this.ranges=t,this.mainIndex=e}map(t,e=-1){return t.empty?this:y.create(this.ranges.map(s=>s.map(t,e)),this.mainIndex)}eq(t){if(this.ranges.length!=t.ranges.length||this.mainIndex!=t.mainIndex)return!1;for(let e=0;e<this.ranges.length;e++)if(!this.ranges[e].eq(t.ranges[e]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new y([this.main],0)}addRange(t,e=!0){return y.create([t].concat(this.ranges),e?0:this.mainIndex+1)}replaceRange(t,e=this.mainIndex){let s=this.ranges.slice();return s[e]=t,y.create(s,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(t=>t.toJSON()),main:this.mainIndex}}static fromJSON(t){if(!t||!Array.isArray(t.ranges)||typeof t.main!="number"||t.main>=t.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new y(t.ranges.map(e=>ze.fromJSON(e)),t.main)}static single(t,e=t){return new y([y.range(t,e)],0)}static create(t,e=0){if(t.length==0)throw new RangeError("A selection needs at least one range");for(let s=0,r=0;r<t.length;r++){let n=t[r];if(n.empty?n.from<=s:n.from<s)return y.normalized(t.slice(),e);s=n.to}return new y(t,e)}static cursor(t,e=0,s,r){return ze.create(t,t,(e==0?0:e<0?4:8)|(s==null?3:Math.min(2,s))|(r??33554431)<<5)}static range(t,e,s,r){let n=(s??33554431)<<5|(r==null?3:Math.min(2,r));return e<t?ze.create(e,t,24|n):ze.create(t,e,(e>t?4:0)|n)}static normalized(t,e=0){let s=t[e];t.sort((r,n)=>r.from-n.from),e=t.indexOf(s);for(let r=1;r<t.length;r++){let n=t[r],o=t[r-1];if(n.empty?n.from<=o.to:n.from<o.to){let a=o.from,l=Math.max(n.to,o.to);r<=e&&e--,t.splice(--r,2,n.anchor>n.head?y.range(l,a):y.range(a,l))}}return new y(t,e)}}function ic(i,t){for(let e of i.ranges)if(e.to>t)throw new RangeError("Selection points outside of document")}let lo=0;class P{constructor(t,e,s,r,n){this.combine=t,this.compareInput=e,this.compare=s,this.isStatic=r,this.id=lo++,this.default=t([]),this.extensions=typeof n=="function"?n(this):n}static define(t={}){return new P(t.combine||(e=>e),t.compareInput||((e,s)=>e===s),t.compare||(t.combine?(e,s)=>e===s:co),!!t.static,t.enables)}of(t){return new Si([],this,0,t)}compute(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new Si(t,this,1,e)}computeN(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new Si(t,this,2,e)}from(t,e){return e||(e=s=>s),this.compute([t],s=>e(s.field(t)))}}function co(i,t){return i==t||i.length==t.length&&i.every((e,s)=>e===t[s])}class Si{constructor(t,e,s,r){this.dependencies=t,this.facet=e,this.type=s,this.value=r,this.id=lo++}dynamicSlot(t){var e;let s=this.value,r=this.facet.compareInput,n=this.id,o=t[n]>>1,a=this.type==2,l=!1,c=!1,h=[];for(let u of this.dependencies)u=="doc"?l=!0:u=="selection"?c=!0:((e=t[u.id])!==null&&e!==void 0?e:1)&1||h.push(t[u.id]);return{create(u){return u.values[o]=s(u),1},update(u,d){if(l&&d.docChanged||c&&(d.docChanged||d.selection)||nn(u,h)){let p=s(u);if(a?!Jo(p,u.values[o],r):!r(p,u.values[o]))return u.values[o]=p,1}return 0},reconfigure:(u,d)=>{let p,f=d.config.address[n];if(f!=null){let g=Ii(d,f);if(this.dependencies.every(m=>m instanceof P?d.facet(m)===u.facet(m):m instanceof ft?d.field(m,!1)==u.field(m,!1):!0)||(a?Jo(p=s(u),g,r):r(p=s(u),g)))return u.values[o]=g,0}else p=s(u);return u.values[o]=p,1}}}}function Jo(i,t,e){if(i.length!=t.length)return!1;for(let s=0;s<i.length;s++)if(!e(i[s],t[s]))return!1;return!0}function nn(i,t){let e=!1;for(let s of t)Ds(i,s)&1&&(e=!0);return e}function pm(i,t,e){let s=e.map(l=>i[l.id]),r=e.map(l=>l.type),n=s.filter(l=>!(l&1)),o=i[t.id]>>1;function a(l){let c=[];for(let h=0;h<s.length;h++){let u=Ii(l,s[h]);if(r[h]==2)for(let d of u)c.push(d);else c.push(u)}return t.combine(c)}return{create(l){for(let c of s)Ds(l,c);return l.values[o]=a(l),1},update(l,c){if(!nn(l,n))return 0;let h=a(l);return t.compare(h,l.values[o])?0:(l.values[o]=h,1)},reconfigure(l,c){let h=nn(l,s),u=c.config.facets[t.id],d=c.facet(t);if(u&&!h&&co(e,u))return l.values[o]=d,0;let p=a(l);return t.compare(p,d)?(l.values[o]=d,0):(l.values[o]=p,1)}}}const jo=P.define({static:!0});class ft{constructor(t,e,s,r,n){this.id=t,this.createF=e,this.updateF=s,this.compareF=r,this.spec=n,this.provides=void 0}static define(t){let e=new ft(lo++,t.create,t.update,t.compare||((s,r)=>s===r),t);return t.provide&&(e.provides=t.provide(e)),e}create(t){let e=t.facet(jo).find(s=>s.field==this);return((e==null?void 0:e.create)||this.createF)(t)}slot(t){let e=t[this.id]>>1;return{create:s=>(s.values[e]=this.create(s),1),update:(s,r)=>{let n=s.values[e],o=this.updateF(n,r);return this.compareF(n,o)?0:(s.values[e]=o,1)},reconfigure:(s,r)=>r.config.address[this.id]!=null?(s.values[e]=r.field(this),0):(s.values[e]=this.create(s),1)}}init(t){return[this,jo.of({field:this,create:t})]}get extension(){return this}}const Ne={lowest:4,low:3,default:2,high:1,highest:0};function bs(i){return t=>new rc(t,i)}const ys={highest:bs(Ne.highest),high:bs(Ne.high),default:bs(Ne.default),low:bs(Ne.low),lowest:bs(Ne.lowest)};class rc{constructor(t,e){this.inner=t,this.prec=e}}class pr{of(t){return new on(this,t)}reconfigure(t){return pr.reconfigure.of({compartment:this,extension:t})}get(t){return t.config.compartments.get(this)}}class on{constructor(t,e){this.compartment=t,this.inner=e}}class Oi{constructor(t,e,s,r,n,o){for(this.base=t,this.compartments=e,this.dynamicSlots=s,this.address=r,this.staticValues=n,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<s.length;)this.statusTemplate.push(0)}staticFacet(t){let e=this.address[t.id];return e==null?t.default:this.staticValues[e>>1]}static resolve(t,e,s){let r=[],n=Object.create(null),o=new Map;for(let d of fm(t,e,o))d instanceof ft?r.push(d):(n[d.facet.id]||(n[d.facet.id]=[])).push(d);let a=Object.create(null),l=[],c=[];for(let d of r)a[d.id]=c.length<<1,c.push(p=>d.slot(p));let h=s==null?void 0:s.config.facets;for(let d in n){let p=n[d],f=p[0].facet,g=h&&h[d]||[];if(p.every(m=>m.type==0))if(a[f.id]=l.length<<1|1,co(g,p))l.push(s.facet(f));else{let m=f.combine(p.map(_=>_.value));l.push(s&&f.compare(m,s.facet(f))?s.facet(f):m)}else{for(let m of p)m.type==0?(a[m.id]=l.length<<1|1,l.push(m.value)):(a[m.id]=c.length<<1,c.push(_=>m.dynamicSlot(_)));a[f.id]=c.length<<1,c.push(m=>pm(m,f,p))}}let u=c.map(d=>d(a));return new Oi(t,o,u,a,l,n)}}function fm(i,t,e){let s=[[],[],[],[],[]],r=new Map;function n(o,a){let l=r.get(o);if(l!=null){if(l<=a)return;let c=s[l].indexOf(o);c>-1&&s[l].splice(c,1),o instanceof on&&e.delete(o.compartment)}if(r.set(o,a),Array.isArray(o))for(let c of o)n(c,a);else if(o instanceof on){if(e.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=t.get(o.compartment)||o.inner;e.set(o.compartment,c),n(c,a)}else if(o instanceof rc)n(o.inner,o.prec);else if(o instanceof ft)s[a].push(o),o.provides&&n(o.provides,a);else if(o instanceof Si)s[a].push(o),o.facet.extensions&&n(o.facet.extensions,Ne.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);n(c,a)}}return n(i,Ne.default),s.reduce((o,a)=>o.concat(a))}function Ds(i,t){if(t&1)return 2;let e=t>>1,s=i.status[e];if(s==4)throw new Error("Cyclic dependency between fields and/or facets");if(s&2)return s;i.status[e]=4;let r=i.computeSlot(i,i.config.dynamicSlots[e]);return i.status[e]=2|r}function Ii(i,t){return t&1?i.config.staticValues[t>>1]:i.values[t>>1]}const nc=P.define(),oc=P.define({combine:i=>i.some(t=>t),static:!0}),ac=P.define({combine:i=>i.length?i[0]:void 0,static:!0}),lc=P.define(),cc=P.define(),hc=P.define(),uc=P.define({combine:i=>i.length?i[0]:!1});class Ie{constructor(t,e){this.type=t,this.value=e}static define(){return new mm}}class mm{of(t){return new Ie(this,t)}}class gm{constructor(t){this.map=t}of(t){return new I(this,t)}}class I{constructor(t,e){this.type=t,this.value=e}map(t){let e=this.type.map(this.value,t);return e===void 0?void 0:e==this.value?this:new I(this.type,e)}is(t){return this.type==t}static define(t={}){return new gm(t.map||(e=>e))}static mapEffects(t,e){if(!t.length)return t;let s=[];for(let r of t){let n=r.map(e);n&&s.push(n)}return s}}I.reconfigure=I.define();I.appendConfig=I.define();class nt{constructor(t,e,s,r,n,o){this.startState=t,this.changes=e,this.selection=s,this.effects=r,this.annotations=n,this.scrollIntoView=o,this._doc=null,this._state=null,s&&ic(s,e.newLength),n.some(a=>a.type==nt.time)||(this.annotations=n.concat(nt.time.of(Date.now())))}static create(t,e,s,r,n,o){return new nt(t,e,s,r,n,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(t){for(let e of this.annotations)if(e.type==t)return e.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(t){let e=this.annotation(nt.userEvent);return!!(e&&(e==t||e.length>t.length&&e.slice(0,t.length)==t&&e[t.length]=="."))}}nt.time=Ie.define();nt.userEvent=Ie.define();nt.addToHistory=Ie.define();nt.remote=Ie.define();function _m(i,t){let e=[];for(let s=0,r=0;;){let n,o;if(s<i.length&&(r==t.length||t[r]>=i[s]))n=i[s++],o=i[s++];else if(r<t.length)n=t[r++],o=t[r++];else return e;!e.length||e[e.length-1]<n?e.push(n,o):e[e.length-1]<o&&(e[e.length-1]=o)}}function dc(i,t,e){var s;let r,n,o;return e?(r=t.changes,n=rt.empty(t.changes.length),o=i.changes.compose(t.changes)):(r=t.changes.map(i.changes),n=i.changes.mapDesc(t.changes,!0),o=i.changes.compose(r)),{changes:o,selection:t.selection?t.selection.map(n):(s=i.selection)===null||s===void 0?void 0:s.map(r),effects:I.mapEffects(i.effects,r).concat(I.mapEffects(t.effects,n)),annotations:i.annotations.length?i.annotations.concat(t.annotations):t.annotations,scrollIntoView:i.scrollIntoView||t.scrollIntoView}}function an(i,t,e){let s=t.selection,r=os(t.annotations);return t.userEvent&&(r=r.concat(nt.userEvent.of(t.userEvent))),{changes:t.changes instanceof rt?t.changes:rt.of(t.changes||[],e,i.facet(ac)),selection:s&&(s instanceof y?s:y.single(s.anchor,s.head)),effects:os(t.effects),annotations:r,scrollIntoView:!!t.scrollIntoView}}function pc(i,t,e){let s=an(i,t.length?t[0]:{},i.doc.length);t.length&&t[0].filter===!1&&(e=!1);for(let n=1;n<t.length;n++){t[n].filter===!1&&(e=!1);let o=!!t[n].sequential;s=dc(s,an(i,t[n],o?s.changes.newLength:i.doc.length),o)}let r=nt.create(i,s.changes,s.selection,s.effects,s.annotations,s.scrollIntoView);return vm(e?ym(r):r)}function ym(i){let t=i.startState,e=!0;for(let r of t.facet(lc)){let n=r(i);if(n===!1){e=!1;break}Array.isArray(n)&&(e=e===!0?n:_m(e,n))}if(e!==!0){let r,n;if(e===!1)n=i.changes.invertedDesc,r=rt.empty(t.doc.length);else{let o=i.changes.filter(e);r=o.changes,n=o.filtered.mapDesc(o.changes).invertedDesc}i=nt.create(t,r,i.selection&&i.selection.map(n),I.mapEffects(i.effects,n),i.annotations,i.scrollIntoView)}let s=t.facet(cc);for(let r=s.length-1;r>=0;r--){let n=s[r](i);n instanceof nt?i=n:Array.isArray(n)&&n.length==1&&n[0]instanceof nt?i=n[0]:i=pc(t,os(n),!1)}return i}function vm(i){let t=i.startState,e=t.facet(hc),s=i;for(let r=e.length-1;r>=0;r--){let n=e[r](i);n&&Object.keys(n).length&&(s=dc(s,an(t,n,i.changes.newLength),!0))}return s==i?i:nt.create(t,i.changes,i.selection,s.effects,s.annotations,s.scrollIntoView)}const bm=[];function os(i){return i==null?bm:Array.isArray(i)?i:[i]}var J=function(i){return i[i.Word=0]="Word",i[i.Space=1]="Space",i[i.Other=2]="Other",i}(J||(J={}));const km=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let ln;try{ln=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function $m(i){if(ln)return ln.test(i);for(let t=0;t<i.length;t++){let e=i[t];if(/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||km.test(e)))return!0}return!1}function xm(i){return t=>{if(!/\S/.test(t))return J.Space;if($m(t))return J.Word;for(let e=0;e<i.length;e++)if(t.indexOf(i[e])>-1)return J.Word;return J.Other}}class B{constructor(t,e,s,r,n,o){this.config=t,this.doc=e,this.selection=s,this.values=r,this.status=t.statusTemplate.slice(),this.computeSlot=n,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)Ds(this,a<<1);this.computeSlot=null}field(t,e=!0){let s=this.config.address[t.id];if(s==null){if(e)throw new RangeError("Field is not present in this state");return}return Ds(this,s),Ii(this,s)}update(...t){return pc(this,t,!0)}applyTransaction(t){let e=this.config,{base:s,compartments:r}=e;for(let o of t.effects)o.is(pr.reconfigure)?(e&&(r=new Map,e.compartments.forEach((a,l)=>r.set(l,a)),e=null),r.set(o.value.compartment,o.value.extension)):o.is(I.reconfigure)?(e=null,s=o.value):o.is(I.appendConfig)&&(e=null,s=os(s).concat(o.value));let n;e?n=t.startState.values.slice():(e=Oi.resolve(s,r,this),n=new B(e,this.doc,this.selection,e.dynamicSlots.map(()=>null),(a,l)=>l.reconfigure(a,this),null).values),new B(e,t.newDoc,t.newSelection,n,(o,a)=>a.update(o,t),t)}replaceSelection(t){return typeof t=="string"&&(t=this.toText(t)),this.changeByRange(e=>({changes:{from:e.from,to:e.to,insert:t},range:y.cursor(e.from+t.length)}))}changeByRange(t){let e=this.selection,s=t(e.ranges[0]),r=this.changes(s.changes),n=[s.range],o=os(s.effects);for(let a=1;a<e.ranges.length;a++){let l=t(e.ranges[a]),c=this.changes(l.changes),h=c.map(r);for(let d=0;d<a;d++)n[d]=n[d].map(h);let u=r.mapDesc(c,!0);n.push(l.range.map(u)),r=r.compose(h),o=I.mapEffects(o,h).concat(I.mapEffects(os(l.effects),u))}return{changes:r,selection:y.create(n,e.mainIndex),effects:o}}changes(t=[]){return t instanceof rt?t:rt.of(t,this.doc.length,this.facet(B.lineSeparator))}toText(t){return z.of(t.split(this.facet(B.lineSeparator)||en))}sliceDoc(t=0,e=this.doc.length){return this.doc.sliceString(t,e,this.lineBreak)}facet(t){let e=this.config.address[t.id];return e==null?t.default:(Ds(this,e),Ii(this,e))}toJSON(t){let e={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(t)for(let s in t){let r=t[s];r instanceof ft&&this.config.address[r.id]!=null&&(e[s]=r.spec.toJSON(this.field(t[s]),this))}return e}static fromJSON(t,e={},s){if(!t||typeof t.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(s){for(let n in s)if(Object.prototype.hasOwnProperty.call(t,n)){let o=s[n],a=t[n];r.push(o.init(l=>o.spec.fromJSON(a,l)))}}return B.create({doc:t.doc,selection:y.fromJSON(t.selection),extensions:e.extensions?r.concat([e.extensions]):r})}static create(t={}){let e=Oi.resolve(t.extensions||[],new Map),s=t.doc instanceof z?t.doc:z.of((t.doc||"").split(e.staticFacet(B.lineSeparator)||en)),r=t.selection?t.selection instanceof y?t.selection:y.single(t.selection.anchor,t.selection.head):y.single(0);return ic(r,s.length),e.staticFacet(oc)||(r=r.asSingle()),new B(e,s,r,e.dynamicSlots.map(()=>null),(n,o)=>o.create(n),null)}get tabSize(){return this.facet(B.tabSize)}get lineBreak(){return this.facet(B.lineSeparator)||`
`}get readOnly(){return this.facet(uc)}phrase(t,...e){for(let s of this.facet(B.phrases))if(Object.prototype.hasOwnProperty.call(s,t)){t=s[t];break}return e.length&&(t=t.replace(/\$(\$|\d*)/g,(s,r)=>{if(r=="$")return"$";let n=+(r||1);return!n||n>e.length?s:e[n-1]})),t}languageDataAt(t,e,s=-1){let r=[];for(let n of this.facet(nc))for(let o of n(this,e,s))Object.prototype.hasOwnProperty.call(o,t)&&r.push(o[t]);return r}charCategorizer(t){return xm(this.languageDataAt("wordChars",t).join(""))}wordAt(t){let{text:e,from:s,length:r}=this.doc.lineAt(t),n=this.charCategorizer(t),o=t-s,a=t-s;for(;o>0;){let l=St(e,o,!1);if(n(e.slice(l,o))!=J.Word)break;o=l}for(;a<r;){let l=St(e,a);if(n(e.slice(a,l))!=J.Word)break;a=l}return o==a?null:y.range(o+s,a+s)}}B.allowMultipleSelections=oc;B.tabSize=P.define({combine:i=>i.length?i[0]:4});B.lineSeparator=ac;B.readOnly=uc;B.phrases=P.define({compare(i,t){let e=Object.keys(i),s=Object.keys(t);return e.length==s.length&&e.every(r=>i[r]==t[r])}});B.languageData=nc;B.changeFilter=lc;B.transactionFilter=cc;B.transactionExtender=hc;pr.reconfigure=I.define();function ae(i,t,e={}){let s={};for(let r of i)for(let n of Object.keys(r)){let o=r[n],a=s[n];if(a===void 0)s[n]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(e,n))s[n]=e[n](a,o);else throw new Error("Config merge conflict for field "+n)}for(let r in t)s[r]===void 0&&(s[r]=t[r]);return s}class Ve{eq(t){return this==t}range(t,e=t){return Ri.create(t,e,this)}}Ve.prototype.startSide=Ve.prototype.endSide=0;Ve.prototype.point=!1;Ve.prototype.mapMode=xt.TrackDel;let Ri=class{constructor(t,e,s){this.from=t,this.to=e,this.value=s}static create(t,e,s){return new Ri(t,e,s)}};function cn(i,t){return i.from-t.from||i.value.startSide-t.value.startSide}class ho{constructor(t,e,s,r){this.from=t,this.to=e,this.value=s,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(t,e,s,r=0){let n=s?this.to:this.from;for(let o=r,a=n.length;;){if(o==a)return o;let l=o+a>>1,c=n[l]-t||(s?this.value[l].endSide:this.value[l].startSide)-e;if(l==o)return c>=0?o:a;c>=0?a=l:o=l+1}}between(t,e,s,r){for(let n=this.findIndex(e,-1e9,!0),o=this.findIndex(s,1e9,!1,n);n<o;n++)if(r(this.from[n]+t,this.to[n]+t,this.value[n])===!1)return!1}map(t,e){let s=[],r=[],n=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let c=this.value[l],h=this.from[l]+t,u=this.to[l]+t,d,p;if(h==u){let f=e.mapPos(h,c.startSide,c.mapMode);if(f==null||(d=p=f,c.startSide!=c.endSide&&(p=e.mapPos(h,c.endSide),p<d)))continue}else if(d=e.mapPos(h,c.startSide),p=e.mapPos(u,c.endSide),d>p||d==p&&c.startSide>0&&c.endSide<=0)continue;(p-d||c.endSide-c.startSide)<0||(o<0&&(o=d),c.point&&(a=Math.max(a,p-d)),s.push(c),r.push(d-o),n.push(p-o))}return{mapped:s.length?new ho(r,n,s,a):null,pos:o}}}class F{constructor(t,e,s,r){this.chunkPos=t,this.chunk=e,this.nextLayer=s,this.maxPoint=r}static create(t,e,s,r){return new F(t,e,s,r)}get length(){let t=this.chunk.length-1;return t<0?0:Math.max(this.chunkEnd(t),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let t=this.nextLayer.size;for(let e of this.chunk)t+=e.value.length;return t}chunkEnd(t){return this.chunkPos[t]+this.chunk[t].length}update(t){let{add:e=[],sort:s=!1,filterFrom:r=0,filterTo:n=this.length}=t,o=t.filter;if(e.length==0&&!o)return this;if(s&&(e=e.slice().sort(cn)),this.isEmpty)return e.length?F.of(e):this;let a=new fc(this,null,-1).goto(0),l=0,c=[],h=new Ce;for(;a.value||l<e.length;)if(l<e.length&&(a.from-e[l].from||a.startSide-e[l].value.startSide)>=0){let u=e[l++];h.addInner(u.from,u.to,u.value)||c.push(u)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==e.length||this.chunkEnd(a.chunkIndex)<e[l].from)&&(!o||r>this.chunkEnd(a.chunkIndex)||n<this.chunkPos[a.chunkIndex])&&h.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||r>a.to||n<a.from||o(a.from,a.to,a.value))&&(h.addInner(a.from,a.to,a.value)||c.push(Ri.create(a.from,a.to,a.value))),a.next());return h.finishInner(this.nextLayer.isEmpty&&!c.length?F.empty:this.nextLayer.update({add:c,filter:o,filterFrom:r,filterTo:n}))}map(t){if(t.empty||this.isEmpty)return this;let e=[],s=[],r=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],c=t.touchesRange(a,a+l.length);if(c===!1)r=Math.max(r,l.maxPoint),e.push(l),s.push(t.mapPos(a));else if(c===!0){let{mapped:h,pos:u}=l.map(a,t);h&&(r=Math.max(r,h.maxPoint),e.push(h),s.push(u))}}let n=this.nextLayer.map(t);return e.length==0?n:new F(s,e,n||F.empty,r)}between(t,e,s){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let n=this.chunkPos[r],o=this.chunk[r];if(e>=n&&t<=n+o.length&&o.between(n,t-n,e-n,s)===!1)return}this.nextLayer.between(t,e,s)}}iter(t=0){return Ls.from([this]).goto(t)}get isEmpty(){return this.nextLayer==this}static iter(t,e=0){return Ls.from(t).goto(e)}static compare(t,e,s,r,n=-1){let o=t.filter(u=>u.maxPoint>0||!u.isEmpty&&u.maxPoint>=n),a=e.filter(u=>u.maxPoint>0||!u.isEmpty&&u.maxPoint>=n),l=Yo(o,a,s),c=new ks(o,l,n),h=new ks(a,l,n);s.iterGaps((u,d,p)=>Qo(c,u,h,d,p,r)),s.empty&&s.length==0&&Qo(c,0,h,0,0,r)}static eq(t,e,s=0,r){r==null&&(r=1e9-1);let n=t.filter(h=>!h.isEmpty&&e.indexOf(h)<0),o=e.filter(h=>!h.isEmpty&&t.indexOf(h)<0);if(n.length!=o.length)return!1;if(!n.length)return!0;let a=Yo(n,o),l=new ks(n,a,0).goto(s),c=new ks(o,a,0).goto(s);for(;;){if(l.to!=c.to||!hn(l.active,c.active)||l.point&&(!c.point||!l.point.eq(c.point)))return!1;if(l.to>r)return!0;l.next(),c.next()}}static spans(t,e,s,r,n=-1){let o=new ks(t,null,n).goto(e),a=e,l=o.openStart;for(;;){let c=Math.min(o.to,s);if(o.point){let h=o.activeForPoint(o.to),u=o.pointFrom<e?h.length+1:Math.min(h.length,l);r.point(a,c,o.point,h,u,o.pointRank),l=Math.min(o.openEnd(c),h.length)}else c>a&&(r.span(a,c,o.active,l),l=o.openEnd(c));if(o.to>s)return l+(o.point&&o.to>s?1:0);a=o.to,o.next()}}static of(t,e=!1){let s=new Ce;for(let r of t instanceof Ri?[t]:e?Sm(t):t)s.add(r.from,r.to,r.value);return s.finish()}}F.empty=new F([],[],null,-1);function Sm(i){if(i.length>1)for(let t=i[0],e=1;e<i.length;e++){let s=i[e];if(cn(t,s)>0)return i.slice().sort(cn);t=s}return i}F.empty.nextLayer=F.empty;class Ce{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(t){this.chunks.push(new ho(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,t&&(this.from=[],this.to=[],this.value=[])}add(t,e,s){this.addInner(t,e,s)||(this.nextLayer||(this.nextLayer=new Ce)).add(t,e,s)}addInner(t,e,s){let r=t-this.lastTo||s.startSide-this.last.endSide;if(r<=0&&(t-this.lastFrom||s.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=t),this.from.push(t-this.chunkStart),this.to.push(e-this.chunkStart),this.last=s,this.lastFrom=t,this.lastTo=e,this.value.push(s),s.point&&(this.maxPoint=Math.max(this.maxPoint,e-t)),!0)}addChunk(t,e){if((t-this.lastTo||e.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,e.maxPoint),this.chunks.push(e),this.chunkPos.push(t);let s=e.value.length-1;return this.last=e.value[s],this.lastFrom=e.from[s]+t,this.lastTo=e.to[s]+t,!0}finish(){return this.finishInner(F.empty)}finishInner(t){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return t;let e=F.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(t):t,this.setMaxPoint);return this.from=null,e}}function Yo(i,t,e){let s=new Map;for(let n of i)for(let o=0;o<n.chunk.length;o++)n.chunk[o].maxPoint<=0&&s.set(n.chunk[o],n.chunkPos[o]);let r=new Set;for(let n of t)for(let o=0;o<n.chunk.length;o++){let a=s.get(n.chunk[o]);a!=null&&(e?e.mapPos(a):a)==n.chunkPos[o]&&!(e!=null&&e.touchesRange(a,a+n.chunk[o].length))&&r.add(n.chunk[o])}return r}class fc{constructor(t,e,s,r=0){this.layer=t,this.skip=e,this.minPoint=s,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(t,e=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(t,e,!1),this}gotoInner(t,e,s){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<t||r.maxPoint<this.minPoint))break;this.chunkIndex++,s=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(t-this.layer.chunkPos[this.chunkIndex],e,!0);(!s||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(t,e){(this.to-t||this.endSide-e)<0&&this.gotoInner(t,e,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let t=this.layer.chunkPos[this.chunkIndex],e=this.layer.chunk[this.chunkIndex],s=t+e.from[this.rangeIndex];if(this.from=s,this.to=t+e.to[this.rangeIndex],this.value=e.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(t){if(t==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=t}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(t){return this.from-t.from||this.startSide-t.startSide||this.rank-t.rank||this.to-t.to||this.endSide-t.endSide}}class Ls{constructor(t){this.heap=t}static from(t,e=null,s=-1){let r=[];for(let n=0;n<t.length;n++)for(let o=t[n];!o.isEmpty;o=o.nextLayer)o.maxPoint>=s&&r.push(new fc(o,e,s,n));return r.length==1?r[0]:new Ls(r)}get startSide(){return this.value?this.value.startSide:0}goto(t,e=-1e9){for(let s of this.heap)s.goto(t,e);for(let s=this.heap.length>>1;s>=0;s--)Ar(this.heap,s);return this.next(),this}forward(t,e){for(let s of this.heap)s.forward(t,e);for(let s=this.heap.length>>1;s>=0;s--)Ar(this.heap,s);(this.to-t||this.value.endSide-e)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let t=this.heap[0];this.from=t.from,this.to=t.to,this.value=t.value,this.rank=t.rank,t.value&&t.next(),Ar(this.heap,0)}}}function Ar(i,t){for(let e=i[t];;){let s=(t<<1)+1;if(s>=i.length)break;let r=i[s];if(s+1<i.length&&r.compare(i[s+1])>=0&&(r=i[s+1],s++),e.compare(r)<0)break;i[s]=e,i[t]=r,t=s}}class ks{constructor(t,e,s){this.minPoint=s,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Ls.from(t,e,s)}goto(t,e=-1e9){return this.cursor.goto(t,e),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=t,this.endSide=e,this.openStart=-1,this.next(),this}forward(t,e){for(;this.minActive>-1&&(this.activeTo[this.minActive]-t||this.active[this.minActive].endSide-e)<0;)this.removeActive(this.minActive);this.cursor.forward(t,e)}removeActive(t){si(this.active,t),si(this.activeTo,t),si(this.activeRank,t),this.minActive=Xo(this.active,this.activeTo)}addActive(t){let e=0,{value:s,to:r,rank:n}=this.cursor;for(;e<this.activeRank.length&&this.activeRank[e]<=n;)e++;ii(this.active,e,s),ii(this.activeTo,e,r),ii(this.activeRank,e,n),t&&ii(t,e,this.cursor.from),this.minActive=Xo(this.active,this.activeTo)}next(){let t=this.to,e=this.point;this.point=null;let s=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>t){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),s&&si(s,r)}else if(this.cursor.value)if(this.cursor.from>t){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let n=this.cursor.value;if(!n.point)this.addActive(s),this.cursor.next();else if(e&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=n,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=n.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(s){this.openStart=0;for(let r=s.length-1;r>=0&&s[r]<t;r--)this.openStart++}}activeForPoint(t){if(!this.active.length)return this.active;let e=[];for(let s=this.active.length-1;s>=0&&!(this.activeRank[s]<this.pointRank);s--)(this.activeTo[s]>t||this.activeTo[s]==t&&this.active[s].endSide>=this.point.endSide)&&e.push(this.active[s]);return e.reverse()}openEnd(t){let e=0;for(let s=this.activeTo.length-1;s>=0&&this.activeTo[s]>t;s--)e++;return e}}function Qo(i,t,e,s,r,n){i.goto(t),e.goto(s);let o=s+r,a=s,l=s-t;for(;;){let c=i.to+l-e.to||i.endSide-e.endSide,h=c<0?i.to+l:e.to,u=Math.min(h,o);if(i.point||e.point?i.point&&e.point&&(i.point==e.point||i.point.eq(e.point))&&hn(i.activeForPoint(i.to+l),e.activeForPoint(e.to))||n.comparePoint(a,u,i.point,e.point):u>a&&!hn(i.active,e.active)&&n.compareRange(a,u,i.active,e.active),h>o)break;a=h,c<=0&&i.next(),c>=0&&e.next()}}function hn(i,t){if(i.length!=t.length)return!1;for(let e=0;e<i.length;e++)if(i[e]!=t[e]&&!i[e].eq(t[e]))return!1;return!0}function si(i,t){for(let e=t,s=i.length-1;e<s;e++)i[e]=i[e+1];i.pop()}function ii(i,t,e){for(let s=i.length-1;s>=t;s--)i[s+1]=i[s];i[t]=e}function Xo(i,t){let e=-1,s=1e9;for(let r=0;r<t.length;r++)(t[r]-s||i[r].endSide-i[e].endSide)<0&&(e=r,s=t[r]);return e}function js(i,t,e=i.length){let s=0;for(let r=0;r<e;)i.charCodeAt(r)==9?(s+=t-s%t,r++):(s++,r=St(i,r));return s}function un(i,t,e,s){for(let r=0,n=0;;){if(n>=t)return r;if(r==i.length)break;n+=i.charCodeAt(r)==9?e-n%e:1,r=St(i,r)}return s===!0?-1:i.length}const dn="ͼ",Zo=typeof Symbol>"u"?"__"+dn:Symbol.for(dn),pn=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),ta=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Pe{constructor(t,e){this.rules=[];let{finish:s}=e||{};function r(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function n(o,a,l,c){let h=[],u=/^@(\w+)\b/.exec(o[0]),d=u&&u[1]=="keyframes";if(u&&a==null)return l.push(o[0]+";");for(let p in a){let f=a[p];if(/&/.test(p))n(p.split(/,\s*/).map(g=>o.map(m=>g.replace(/&/,m))).reduce((g,m)=>g.concat(m)),f,l);else if(f&&typeof f=="object"){if(!u)throw new RangeError("The value of a property ("+p+") should be a primitive value.");n(r(p),f,h,d)}else f!=null&&h.push(p.replace(/_.*/,"").replace(/[A-Z]/g,g=>"-"+g.toLowerCase())+": "+f+";")}(h.length||d)&&l.push((s&&!u&&!c?o.map(s):o).join(", ")+" {"+h.join(" ")+"}")}for(let o in t)n(r(o),t[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let t=ta[Zo]||1;return ta[Zo]=t+1,dn+t.toString(36)}static mount(t,e){(t[pn]||new wm(t)).mount(Array.isArray(e)?e:[e])}}let ri=null;class wm{constructor(t){if(!t.head&&t.adoptedStyleSheets&&typeof CSSStyleSheet<"u"){if(ri)return t.adoptedStyleSheets=[ri.sheet].concat(t.adoptedStyleSheets),t[pn]=ri;this.sheet=new CSSStyleSheet,t.adoptedStyleSheets=[this.sheet].concat(t.adoptedStyleSheets),ri=this}else{this.styleTag=(t.ownerDocument||t).createElement("style");let e=t.head||t;e.insertBefore(this.styleTag,e.firstChild)}this.modules=[],t[pn]=this}mount(t){let e=this.sheet,s=0,r=0;for(let n=0;n<t.length;n++){let o=t[n],a=this.modules.indexOf(o);if(a<r&&a>-1&&(this.modules.splice(a,1),r--,a=-1),a==-1){if(this.modules.splice(r++,0,o),e)for(let l=0;l<o.rules.length;l++)e.insertRule(o.rules[l],s++)}else{for(;r<a;)s+=this.modules[r++].rules.length;s+=o.rules.length,r++}}if(!e){let n="";for(let o=0;o<this.modules.length;o++)n+=this.modules[o].getRules()+`
`;this.styleTag.textContent=n}}}var Te={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Es={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},ea=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent),Cm=typeof navigator<"u"&&/Mac/.test(navigator.platform),Pm=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Tm=Cm||ea&&+ea[1]<57;for(var dt=0;dt<10;dt++)Te[48+dt]=Te[96+dt]=String(dt);for(var dt=1;dt<=24;dt++)Te[dt+111]="F"+dt;for(var dt=65;dt<=90;dt++)Te[dt]=String.fromCharCode(dt+32),Es[dt]=String.fromCharCode(dt);for(var Dr in Te)Es.hasOwnProperty(Dr)||(Es[Dr]=Te[Dr]);function Am(i){var t=Tm&&(i.ctrlKey||i.altKey||i.metaKey)||Pm&&i.shiftKey&&i.key&&i.key.length==1||i.key=="Unidentified",e=!t&&i.key||(i.shiftKey?Es:Te)[i.keyCode]||i.key||"Unidentified";return e=="Esc"&&(e="Escape"),e=="Del"&&(e="Delete"),e=="Left"&&(e="ArrowLeft"),e=="Up"&&(e="ArrowUp"),e=="Right"&&(e="ArrowRight"),e=="Down"&&(e="ArrowDown"),e}function Li(i){let t;return i.nodeType==11?t=i.getSelection?i:i.ownerDocument:t=i,t.getSelection()}function us(i,t){return t?i==t||i.contains(t.nodeType!=1?t.parentNode:t):!1}function Dm(i){let t=i.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function wi(i,t){if(!t.anchorNode)return!1;try{return us(i,t.anchorNode)}catch{return!1}}function Ns(i){return i.nodeType==3?ds(i,0,i.nodeValue.length).getClientRects():i.nodeType==1?i.getClientRects():[]}function Ei(i,t,e,s){return e?sa(i,t,e,s,-1)||sa(i,t,e,s,1):!1}function Ni(i){for(var t=0;;t++)if(i=i.previousSibling,!i)return t}function sa(i,t,e,s,r){for(;;){if(i==e&&t==s)return!0;if(t==(r<0?0:Bs(i))){if(i.nodeName=="DIV")return!1;let n=i.parentNode;if(!n||n.nodeType!=1)return!1;t=Ni(i)+(r<0?0:1),i=n}else if(i.nodeType==1){if(i=i.childNodes[t+(r<0?-1:0)],i.nodeType==1&&i.contentEditable=="false")return!1;t=r<0?Bs(i):0}else return!1}}function Bs(i){return i.nodeType==3?i.nodeValue.length:i.childNodes.length}const mc={left:0,right:0,top:0,bottom:0};function uo(i,t){let e=t?i.left:i.right;return{left:e,right:e,top:i.top,bottom:i.bottom}}function Mm(i){return{left:0,right:i.innerWidth,top:0,bottom:i.innerHeight}}function Om(i,t,e,s,r,n,o,a){let l=i.ownerDocument,c=l.defaultView||window;for(let h=i;h;)if(h.nodeType==1){let u,d=h==l.body;if(d)u=Mm(c);else{if(h.scrollHeight<=h.clientHeight&&h.scrollWidth<=h.clientWidth){h=h.assignedSlot||h.parentNode;continue}let g=h.getBoundingClientRect();u={left:g.left,right:g.left+h.clientWidth,top:g.top,bottom:g.top+h.clientHeight}}let p=0,f=0;if(r=="nearest")t.top<u.top?(f=-(u.top-t.top+o),e>0&&t.bottom>u.bottom+f&&(f=t.bottom-u.bottom+f+o)):t.bottom>u.bottom&&(f=t.bottom-u.bottom+o,e<0&&t.top-f<u.top&&(f=-(u.top+f-t.top+o)));else{let g=t.bottom-t.top,m=u.bottom-u.top;f=(r=="center"&&g<=m?t.top+g/2-m/2:r=="start"||r=="center"&&e<0?t.top-o:t.bottom-m+o)-u.top}if(s=="nearest"?t.left<u.left?(p=-(u.left-t.left+n),e>0&&t.right>u.right+p&&(p=t.right-u.right+p+n)):t.right>u.right&&(p=t.right-u.right+n,e<0&&t.left<u.left+p&&(p=-(u.left+p-t.left+n))):p=(s=="center"?t.left+(t.right-t.left)/2-(u.right-u.left)/2:s=="start"==a?t.left-n:t.right-(u.right-u.left)+n)-u.left,p||f)if(d)c.scrollBy(p,f);else{let g=0,m=0;if(f){let _=h.scrollTop;h.scrollTop+=f,m=h.scrollTop-_}if(p){let _=h.scrollLeft;h.scrollLeft+=p,g=h.scrollLeft-_}t={left:t.left-g,top:t.top-m,right:t.right-g,bottom:t.bottom-m},g&&Math.abs(g-p)<1&&(s="nearest"),m&&Math.abs(m-f)<1&&(r="nearest")}if(d)break;h=h.assignedSlot||h.parentNode}else if(h.nodeType==11)h=h.host;else break}function Im(i){let t=i.ownerDocument;for(let e=i.parentNode;e&&e!=t.body;)if(e.nodeType==1){if(e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth)return e;e=e.assignedSlot||e.parentNode}else if(e.nodeType==11)e=e.host;else break;return null}class Rm{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(t){return this.anchorNode==t.anchorNode&&this.anchorOffset==t.anchorOffset&&this.focusNode==t.focusNode&&this.focusOffset==t.focusOffset}setRange(t){this.set(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset)}set(t,e,s,r){this.anchorNode=t,this.anchorOffset=e,this.focusNode=s,this.focusOffset=r}}let Ze=null;function gc(i){if(i.setActive)return i.setActive();if(Ze)return i.focus(Ze);let t=[];for(let e=i;e&&(t.push(e,e.scrollTop,e.scrollLeft),e!=e.ownerDocument);e=e.parentNode);if(i.focus(Ze==null?{get preventScroll(){return Ze={preventScroll:!0},!0}}:void 0),!Ze){Ze=!1;for(let e=0;e<t.length;){let s=t[e++],r=t[e++],n=t[e++];s.scrollTop!=r&&(s.scrollTop=r),s.scrollLeft!=n&&(s.scrollLeft=n)}}}let ia;function ds(i,t,e=t){let s=ia||(ia=document.createRange());return s.setEnd(i,e),s.setStart(i,t),s}function as(i,t,e){let s={key:t,code:t,keyCode:e,which:e,cancelable:!0},r=new KeyboardEvent("keydown",s);r.synthetic=!0,i.dispatchEvent(r);let n=new KeyboardEvent("keyup",s);return n.synthetic=!0,i.dispatchEvent(n),r.defaultPrevented||n.defaultPrevented}function Lm(i){for(;i;){if(i&&(i.nodeType==9||i.nodeType==11&&i.host))return i;i=i.assignedSlot||i.parentNode}return null}function _c(i){for(;i.attributes.length;)i.removeAttributeNode(i.attributes[0])}function Em(i,t){let e=t.focusNode,s=t.focusOffset;if(!e||t.anchorNode!=e||t.anchorOffset!=s)return!1;for(;;)if(s){if(e.nodeType!=1)return!1;let r=e.childNodes[s-1];r.contentEditable=="false"?s--:(e=r,s=Bs(e))}else{if(e==i)return!0;s=Ni(e),e=e.parentNode}}class gt{constructor(t,e,s=!0){this.node=t,this.offset=e,this.precise=s}static before(t,e){return new gt(t.parentNode,Ni(t),e)}static after(t,e){return new gt(t.parentNode,Ni(t)+1,e)}}const po=[];class q{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(t){let e=this.posAtStart;for(let s of this.children){if(s==t)return e;e+=s.length+s.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(t){return this.posBefore(t)+t.length}coordsAt(t,e){return null}sync(t){if(this.dirty&2){let e=this.dom,s=null,r;for(let n of this.children){if(n.dirty){if(!n.dom&&(r=s?s.nextSibling:e.firstChild)){let o=q.get(r);(!o||!o.parent&&o.canReuseDOM(n))&&n.reuseDOM(r)}n.sync(t),n.dirty=0}if(r=s?s.nextSibling:e.firstChild,t&&!t.written&&t.node==e&&r!=n.dom&&(t.written=!0),n.dom.parentNode==e)for(;r&&r!=n.dom;)r=ra(r);else e.insertBefore(n.dom,r);s=n.dom}for(r=s?s.nextSibling:e.firstChild,r&&t&&t.node==e&&(t.written=!0);r;)r=ra(r)}else if(this.dirty&1)for(let e of this.children)e.dirty&&(e.sync(t),e.dirty=0)}reuseDOM(t){}localPosFromDOM(t,e){let s;if(t==this.dom)s=this.dom.childNodes[e];else{let r=Bs(t)==0?0:e==0?-1:1;for(;;){let n=t.parentNode;if(n==this.dom)break;r==0&&n.firstChild!=n.lastChild&&(t==n.firstChild?r=-1:r=1),t=n}r<0?s=t:s=t.nextSibling}if(s==this.dom.firstChild)return 0;for(;s&&!q.get(s);)s=s.nextSibling;if(!s)return this.length;for(let r=0,n=0;;r++){let o=this.children[r];if(o.dom==s)return n;n+=o.length+o.breakAfter}}domBoundsAround(t,e,s=0){let r=-1,n=-1,o=-1,a=-1;for(let l=0,c=s,h=s;l<this.children.length;l++){let u=this.children[l],d=c+u.length;if(c<t&&d>e)return u.domBoundsAround(t,e,c);if(d>=t&&r==-1&&(r=l,n=c),c>e&&u.dom.parentNode==this.dom){o=l,a=h;break}h=d,c=d+u.breakAfter}return{from:n,to:a<0?s+this.length:a,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(t=!1){this.dirty|=2,this.markParentsDirty(t)}markParentsDirty(t){for(let e=this.parent;e;e=e.parent){if(t&&(e.dirty|=2),e.dirty&1)return;e.dirty|=1,t=!1}}setParent(t){this.parent!=t&&(this.parent=t,this.dirty&&this.markParentsDirty(!0))}setDOM(t){this.dom&&(this.dom.cmView=null),this.dom=t,t.cmView=this}get rootView(){for(let t=this;;){let e=t.parent;if(!e)return t;t=e}}replaceChildren(t,e,s=po){this.markDirty();for(let r=t;r<e;r++){let n=this.children[r];n.parent==this&&n.destroy()}this.children.splice(t,e-t,...s);for(let r=0;r<s.length;r++)s[r].setParent(this)}ignoreMutation(t){return!1}ignoreEvent(t){return!1}childCursor(t=this.length){return new yc(this.children,t,this.children.length)}childPos(t,e=1){return this.childCursor().findPos(t,e)}toString(){let t=this.constructor.name.replace("View","");return t+(this.children.length?"("+this.children.join()+")":this.length?"["+(t=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(t){return t.cmView}get isEditable(){return!0}merge(t,e,s,r,n,o){return!1}become(t){return!1}canReuseDOM(t){return t.constructor==this.constructor}getSide(){return 0}destroy(){this.parent=null}}q.prototype.breakAfter=0;function ra(i){let t=i.nextSibling;return i.parentNode.removeChild(i),t}class yc{constructor(t,e,s){this.children=t,this.pos=e,this.i=s,this.off=0}findPos(t,e=1){for(;;){if(t>this.pos||t==this.pos&&(e>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=t-this.pos,this;let s=this.children[--this.i];this.pos-=s.length+s.breakAfter}}}function vc(i,t,e,s,r,n,o,a,l){let{children:c}=i,h=c.length?c[t]:null,u=n.length?n[n.length-1]:null,d=u?u.breakAfter:o;if(!(t==s&&h&&!o&&!d&&n.length<2&&h.merge(e,r,n.length?u:null,e==0,a,l))){if(s<c.length){let p=c[s];p&&r<p.length?(t==s&&(p=p.split(r),r=0),!d&&u&&p.merge(0,r,u,!0,0,l)?n[n.length-1]=p:(r&&p.merge(0,r,null,!1,0,l),n.push(p))):p!=null&&p.breakAfter&&(u?u.breakAfter=1:o=1),s++}for(h&&(h.breakAfter=o,e>0&&(!o&&n.length&&h.merge(e,h.length,n[0],!1,a,0)?h.breakAfter=n.shift().breakAfter:(e<h.length||h.children.length&&h.children[h.children.length-1].length==0)&&h.merge(e,h.length,null,!1,a,0),t++));t<s&&n.length;)if(c[s-1].become(n[n.length-1]))s--,n.pop(),l=n.length?0:a;else if(c[t].become(n[0]))t++,n.shift(),a=n.length?0:l;else break;!n.length&&t&&s<c.length&&!c[t-1].breakAfter&&c[s].merge(0,0,c[t-1],!1,a,l)&&t--,(t<s||n.length)&&i.replaceChildren(t,s,n)}}function bc(i,t,e,s,r,n){let o=i.childCursor(),{i:a,off:l}=o.findPos(e,1),{i:c,off:h}=o.findPos(t,-1),u=t-e;for(let d of s)u+=d.length;i.length+=u,vc(i,c,h,a,l,s,0,r,n)}let Et=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},fn=typeof document<"u"?document:{documentElement:{style:{}}};const mn=/Edge\/(\d+)/.exec(Et.userAgent),kc=/MSIE \d/.test(Et.userAgent),gn=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Et.userAgent),fr=!!(kc||gn||mn),na=!fr&&/gecko\/(\d+)/i.test(Et.userAgent),Mr=!fr&&/Chrome\/(\d+)/.exec(Et.userAgent),oa="webkitFontSmoothing"in fn.documentElement.style,$c=!fr&&/Apple Computer/.test(Et.vendor),aa=$c&&(/Mobile\/\w+/.test(Et.userAgent)||Et.maxTouchPoints>2);var C={mac:aa||/Mac/.test(Et.platform),windows:/Win/.test(Et.platform),linux:/Linux|X11/.test(Et.platform),ie:fr,ie_version:kc?fn.documentMode||6:gn?+gn[1]:mn?+mn[1]:0,gecko:na,gecko_version:na?+(/Firefox\/(\d+)/.exec(Et.userAgent)||[0,0])[1]:0,chrome:!!Mr,chrome_version:Mr?+Mr[1]:0,ios:aa,android:/Android\b/.test(Et.userAgent),webkit:oa,safari:$c,webkit_version:oa?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:fn.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const Nm=256;class Ae extends q{constructor(t){super(),this.text=t}get length(){return this.text.length}createDOM(t){this.setDOM(t||document.createTextNode(this.text))}sync(t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(t){t.nodeType==3&&this.createDOM(t)}merge(t,e,s){return s&&(!(s instanceof Ae)||this.length-(e-t)+s.length>Nm)?!1:(this.text=this.text.slice(0,t)+(s?s.text:"")+this.text.slice(e),this.markDirty(),!0)}split(t){let e=new Ae(this.text.slice(t));return this.text=this.text.slice(0,t),this.markDirty(),e}localPosFromDOM(t,e){return t==this.dom?e:e?this.text.length:0}domAtPos(t){return new gt(this.dom,t)}domBoundsAround(t,e,s){return{from:s,to:s+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(t,e){return _n(this.dom,t,e)}}class ie extends q{constructor(t,e=[],s=0){super(),this.mark=t,this.children=e,this.length=s;for(let r of e)r.setParent(this)}setAttrs(t){if(_c(t),this.mark.class&&(t.className=this.mark.class),this.mark.attrs)for(let e in this.mark.attrs)t.setAttribute(e,this.mark.attrs[e]);return t}reuseDOM(t){t.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(t),this.dirty|=6)}sync(t){this.dom?this.dirty&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(t)}merge(t,e,s,r,n,o){return s&&(!(s instanceof ie&&s.mark.eq(this.mark))||t&&n<=0||e<this.length&&o<=0)?!1:(bc(this,t,e,s?s.children:[],n-1,o-1),this.markDirty(),!0)}split(t){let e=[],s=0,r=-1,n=0;for(let a of this.children){let l=s+a.length;l>t&&e.push(s<t?a.split(t-s):a),r<0&&s>=t&&(r=n),s=l,n++}let o=this.length-t;return this.length=t,r>-1&&(this.children.length=r,this.markDirty()),new ie(this.mark,e,o)}domAtPos(t){return wc(this,t)}coordsAt(t,e){return Pc(this,t,e)}}function _n(i,t,e){let s=i.nodeValue.length;t>s&&(t=s);let r=t,n=t,o=0;t==0&&e<0||t==s&&e>=0?C.chrome||C.gecko||(t?(r--,o=1):n<s&&(n++,o=-1)):e<0?r--:n<s&&n++;let a=ds(i,r,n).getClientRects();if(!a.length)return mc;let l=a[(o?o<0:e>=0)?0:a.length-1];return C.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,c=>c.width)||l),o?uo(l,o<0):l||null}class be extends q{constructor(t,e,s){super(),this.widget=t,this.length=e,this.side=s,this.prevWidget=null}static create(t,e,s){return new(t.customView||be)(t,e,s)}split(t){let e=be.create(this.widget,this.length-t,this.side);return this.length-=t,e}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(t,e,s,r,n,o){return s&&(!(s instanceof be)||!this.widget.compare(s.widget)||t>0&&n<=0||e<this.length&&o<=0)?!1:(this.length=t+(s?s.length:0)+(this.length-e),!0)}become(t){return t.length==this.length&&t instanceof be&&t.side==this.side&&this.widget.constructor==t.widget.constructor?(this.widget.eq(t.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,!0):!1}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get overrideDOMText(){if(this.length==0)return z.empty;let t=this;for(;t.parent;)t=t.parent;let e=t.editorView,s=e&&e.state.doc,r=this.posAtStart;return s?s.slice(r,r+this.length):z.empty}domAtPos(t){return t==0?gt.before(this.dom):gt.after(this.dom,t==this.length)}domBoundsAround(){return null}coordsAt(t,e){let s=this.dom.getClientRects(),r=null;if(!s.length)return mc;for(let n=t>0?s.length-1:0;r=s[n],!(t>0?n==0:n==s.length-1||r.top<r.bottom);n+=t>0?-1:1);return this.length?r:uo(r,this.side>0)}get isEditable(){return!1}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class xc extends be{domAtPos(t){let{topView:e,text:s}=this.widget;return e?yn(t,0,e,s,(r,n)=>r.domAtPos(n),r=>new gt(s,Math.min(r,s.nodeValue.length))):new gt(s,Math.min(t,s.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(t,e){let{topView:s,text:r}=this.widget;return s?Sc(t,e,s,r):Math.min(e,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(t,e){let{topView:s,text:r}=this.widget;return s?yn(t,e,s,r,(n,o,a)=>n.coordsAt(o,a),(n,o)=>_n(r,n,o)):_n(r,t,e)}destroy(){var t;super.destroy(),(t=this.widget.topView)===null||t===void 0||t.destroy()}get isEditable(){return!0}canReuseDOM(){return!0}}function yn(i,t,e,s,r,n){if(e instanceof ie){for(let o=e.dom.firstChild;o;o=o.nextSibling){let a=q.get(o);if(!a)return n(i,t);let l=us(o,s),c=a.length+(l?s.nodeValue.length:0);if(i<c||i==c&&a.getSide()<=0)return l?yn(i,t,a,s,r,n):r(a,i,t);i-=c}return r(e,e.length,-1)}else return e.dom==s?n(i,t):r(e,i,t)}function Sc(i,t,e,s){if(e instanceof ie)for(let r of e.children){let n=0,o=us(r.dom,s);if(us(r.dom,i))return n+(o?Sc(i,t,r,s):r.localPosFromDOM(i,t));n+=o?s.nodeValue.length:r.length}else if(e.dom==s)return Math.min(t,s.nodeValue.length);return e.localPosFromDOM(i,t)}class ps extends q{constructor(t){super(),this.side=t}get length(){return 0}merge(){return!1}become(t){return t instanceof ps&&t.side==this.side}split(){return new ps(this.side)}sync(){if(!this.dom){let t=document.createElement("img");t.className="cm-widgetBuffer",t.setAttribute("aria-hidden","true"),this.setDOM(t)}}getSide(){return this.side}domAtPos(t){return gt.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(t){let e=this.dom.getBoundingClientRect(),s=Bm(this,this.side>0?-1:1);return s&&s.top<e.bottom&&s.bottom>e.top?{left:e.left,right:e.right,top:s.top,bottom:s.bottom}:e}get overrideDOMText(){return z.empty}}Ae.prototype.children=be.prototype.children=ps.prototype.children=po;function Bm(i,t){let e=i.parent,s=e?e.children.indexOf(i):-1;for(;e&&s>=0;)if(t<0?s>0:s<e.children.length){let r=e.children[s+t];if(r instanceof Ae){let n=r.coordsAt(t<0?r.length:0,t);if(n)return n}s+=t}else if(e instanceof ie&&e.parent)s=e.parent.children.indexOf(e)+(t<0?0:1),e=e.parent;else{let r=e.dom.lastChild;if(r&&r.nodeName=="BR")return r.getClientRects()[0];break}}function wc(i,t){let e=i.dom,{children:s}=i,r=0;for(let n=0;r<s.length;r++){let o=s[r],a=n+o.length;if(!(a==n&&o.getSide()<=0)){if(t>n&&t<a&&o.dom.parentNode==e)return o.domAtPos(t-n);if(t<=n)break;n=a}}for(let n=r;n>0;n--){let o=s[n-1];if(o.dom.parentNode==e)return o.domAtPos(o.length)}for(let n=r;n<s.length;n++){let o=s[n];if(o.dom.parentNode==e)return o.domAtPos(0)}return new gt(e,0)}function Cc(i,t,e){let s,{children:r}=i;e>0&&t instanceof ie&&r.length&&(s=r[r.length-1])instanceof ie&&s.mark.eq(t.mark)?Cc(s,t.children[0],e-1):(r.push(t),t.setParent(i)),i.length+=t.length}function Pc(i,t,e){let s=null,r=-1,n=null,o=-1;function a(c,h){for(let u=0,d=0;u<c.children.length&&d<=h;u++){let p=c.children[u],f=d+p.length;f>=h&&(p.children.length?a(p,h-d):!n&&(f>h||d==f&&p.getSide()>0)?(n=p,o=h-d):(d<h||d==f&&p.getSide()<0)&&(s=p,r=h-d)),d=f}}a(i,t);let l=(e<0?s:n)||s||n;return l?l.coordsAt(Math.max(0,l==s?r:o),e):zm(i)}function zm(i){let t=i.dom.lastChild;if(!t)return i.dom.getBoundingClientRect();let e=Ns(t);return e[e.length-1]||null}function vn(i,t){for(let e in i)e=="class"&&t.class?t.class+=" "+i.class:e=="style"&&t.style?t.style+=";"+i.style:t[e]=i[e];return t}function fo(i,t){if(i==t)return!0;if(!i||!t)return!1;let e=Object.keys(i),s=Object.keys(t);if(e.length!=s.length)return!1;for(let r of e)if(s.indexOf(r)==-1||i[r]!==t[r])return!1;return!0}function bn(i,t,e){let s=null;if(t)for(let r in t)e&&r in e||i.removeAttribute(s=r);if(e)for(let r in e)t&&t[r]==e[r]||i.setAttribute(s=r,e[r]);return!!s}class fe{eq(t){return!1}updateDOM(t){return!1}compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}get estimatedHeight(){return-1}ignoreEvent(t){return!0}get customView(){return null}destroy(t){}}var W=function(i){return i[i.Text=0]="Text",i[i.WidgetBefore=1]="WidgetBefore",i[i.WidgetAfter=2]="WidgetAfter",i[i.WidgetRange=3]="WidgetRange",i}(W||(W={}));class D extends Ve{constructor(t,e,s,r){super(),this.startSide=t,this.endSide=e,this.widget=s,this.spec=r}get heightRelevant(){return!1}static mark(t){return new mr(t)}static widget(t){let e=t.side||0,s=!!t.block;return e+=s?e>0?3e8:-4e8:e>0?1e8:-1e8,new Ue(t,e,e,s,t.widget||null,!1)}static replace(t){let e=!!t.block,s,r;if(t.isBlockGap)s=-5e8,r=4e8;else{let{start:n,end:o}=Tc(t,e);s=(n?e?-3e8:-1:5e8)-1,r=(o?e?2e8:1:-6e8)+1}return new Ue(t,s,r,e,t.widget||null,!0)}static line(t){return new Ys(t)}static set(t,e=!1){return F.of(t,e)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}D.none=F.empty;class mr extends D{constructor(t){let{start:e,end:s}=Tc(t);super(e?-1:5e8,s?1:-6e8,null,t),this.tagName=t.tagName||"span",this.class=t.class||"",this.attrs=t.attributes||null}eq(t){return this==t||t instanceof mr&&this.tagName==t.tagName&&this.class==t.class&&fo(this.attrs,t.attrs)}range(t,e=t){if(t>=e)throw new RangeError("Mark decorations may not be empty");return super.range(t,e)}}mr.prototype.point=!1;class Ys extends D{constructor(t){super(-2e8,-2e8,null,t)}eq(t){return t instanceof Ys&&this.spec.class==t.spec.class&&fo(this.spec.attributes,t.spec.attributes)}range(t,e=t){if(e!=t)throw new RangeError("Line decoration ranges must be zero-length");return super.range(t,e)}}Ys.prototype.mapMode=xt.TrackBefore;Ys.prototype.point=!0;class Ue extends D{constructor(t,e,s,r,n,o){super(e,s,n,t),this.block=r,this.isReplace=o,this.mapMode=r?e<=0?xt.TrackBefore:xt.TrackAfter:xt.TrackDel}get type(){return this.startSide<this.endSide?W.WidgetRange:this.startSide<=0?W.WidgetBefore:W.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(t){return t instanceof Ue&&Gm(this.widget,t.widget)&&this.block==t.block&&this.startSide==t.startSide&&this.endSide==t.endSide}range(t,e=t){if(this.isReplace&&(t>e||t==e&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&e!=t)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(t,e)}}Ue.prototype.point=!0;function Tc(i,t=!1){let{inclusiveStart:e,inclusiveEnd:s}=i;return e==null&&(e=i.inclusive),s==null&&(s=i.inclusive),{start:e??t,end:s??t}}function Gm(i,t){return i==t||!!(i&&t&&i.compare(t))}function kn(i,t,e,s=0){let r=e.length-1;r>=0&&e[r]+s>=i?e[r]=Math.max(e[r],t):e.push(i,t)}class wt extends q{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(t,e,s,r,n,o){if(s){if(!(s instanceof wt))return!1;this.dom||s.transferDOM(this)}return r&&this.setDeco(s?s.attrs:null),bc(this,t,e,s?s.children:[],n,o),!0}split(t){let e=new wt;if(e.breakAfter=this.breakAfter,this.length==0)return e;let{i:s,off:r}=this.childPos(t);r&&(e.append(this.children[s].split(r),0),this.children[s].merge(r,this.children[s].length,null,!1,0,0),s++);for(let n=s;n<this.children.length;n++)e.append(this.children[n],0);for(;s>0&&this.children[s-1].length==0;)this.children[--s].destroy();return this.children.length=s,this.markDirty(),this.length=t,e}transferDOM(t){this.dom&&(this.markDirty(),t.setDOM(this.dom),t.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(t){fo(this.attrs,t)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=t)}append(t,e){Cc(this,t,e)}addLineDeco(t){let e=t.spec.attributes,s=t.spec.class;e&&(this.attrs=vn(e,this.attrs||{})),s&&(this.attrs=vn({class:s},this.attrs||{}))}domAtPos(t){return wc(this,t)}reuseDOM(t){t.nodeName=="DIV"&&(this.setDOM(t),this.dirty|=6)}sync(t){var e;this.dom?this.dirty&4&&(_c(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(bn(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(t);let s=this.dom.lastChild;for(;s&&q.get(s)instanceof ie;)s=s.lastChild;if(!s||!this.length||s.nodeName!="BR"&&((e=q.get(s))===null||e===void 0?void 0:e.isEditable)==!1&&(!C.ios||!this.children.some(r=>r instanceof Ae))){let r=document.createElement("BR");r.cmIgnore=!0,this.dom.appendChild(r)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let t=0;for(let e of this.children){if(!(e instanceof Ae)||/[^ -~]/.test(e.text))return null;let s=Ns(e.dom);if(s.length!=1)return null;t+=s[0].width}return t?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:t/this.length}:null}coordsAt(t,e){return Pc(this,t,e)}become(t){return!1}get type(){return W.Text}static find(t,e){for(let s=0,r=0;s<t.children.length;s++){let n=t.children[s],o=r+n.length;if(o>=e){if(n instanceof wt)return n;if(o>e)break}r=o+n.breakAfter}return null}}class Fe extends q{constructor(t,e,s){super(),this.widget=t,this.length=e,this.type=s,this.breakAfter=0,this.prevWidget=null}merge(t,e,s,r,n,o){return s&&(!(s instanceof Fe)||!this.widget.compare(s.widget)||t>0&&n<=0||e<this.length&&o<=0)?!1:(this.length=t+(s?s.length:0)+(this.length-e),!0)}domAtPos(t){return t==0?gt.before(this.dom):gt.after(this.dom,t==this.length)}split(t){let e=this.length-t;this.length=t;let s=new Fe(this.widget,e,this.type);return s.breakAfter=this.breakAfter,s}get children(){return po}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):z.empty}domBoundsAround(){return null}become(t){return t instanceof Fe&&t.type==this.type&&t.widget.constructor==this.widget.constructor?(t.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,this.length=t.length,this.breakAfter=t.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class mo{constructor(t,e,s,r){this.doc=t,this.pos=e,this.end=s,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=t.iter(),this.skip=e}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let t=this.content[this.content.length-1];return!t.breakAfter&&!(t instanceof Fe&&t.type==W.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new wt),this.atCursorPos=!0),this.curLine}flushBuffer(t=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(ni(new ps(-1),t),t.length),this.pendingBuffer=0)}addBlockWidget(t){this.flushBuffer(),this.curLine=null,this.content.push(t)}finish(t){this.pendingBuffer&&t<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()}buildText(t,e,s){for(;t>0;){if(this.textOff==this.text.length){let{value:n,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,t--;continue}else this.text=n,this.textOff=0}let r=Math.min(this.text.length-this.textOff,t,512);this.flushBuffer(e.slice(e.length-s)),this.getLine().append(ni(new Ae(this.text.slice(this.textOff,this.textOff+r)),e),s),this.atCursorPos=!0,this.textOff+=r,t-=r,s=0}}span(t,e,s,r){this.buildText(e-t,s,r),this.pos=e,this.openStart<0&&(this.openStart=r)}point(t,e,s,r,n,o){if(this.disallowBlockEffectsFor[o]&&s instanceof Ue){if(s.block)throw new RangeError("Block decorations may not be specified via plugins");if(e>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=e-t;if(s instanceof Ue)if(s.block){let{type:l}=s;l==W.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Fe(s.widget||new la("div"),a,l))}else{let l=be.create(s.widget||new la("span"),a,a?0:s.startSide),c=this.atCursorPos&&!l.isEditable&&n<=r.length&&(t<e||s.startSide>0),h=!l.isEditable&&(t<e||n>r.length||s.startSide<=0),u=this.getLine();this.pendingBuffer==2&&!c&&(this.pendingBuffer=0),this.flushBuffer(r),c&&(u.append(ni(new ps(1),r),n),n=r.length+Math.max(0,n-r.length)),u.append(ni(l,r),n),this.atCursorPos=h,this.pendingBuffer=h?t<e||n>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(s);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=e),this.openStart<0&&(this.openStart=n)}static build(t,e,s,r,n){let o=new mo(t,e,s,n);return o.openEnd=F.spans(r,e,s,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function ni(i,t){for(let e of t)i=new ie(e,[i],i.length);return i}class la extends fe{constructor(t){super(),this.tag=t}eq(t){return t.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(t){return t.nodeName.toLowerCase()==this.tag}}const Ac=P.define(),Dc=P.define(),Mc=P.define(),Oc=P.define(),$n=P.define(),Ic=P.define(),Rc=P.define({combine:i=>i.some(t=>t)}),Lc=P.define({combine:i=>i.some(t=>t)});class Bi{constructor(t,e="nearest",s="nearest",r=5,n=5){this.range=t,this.y=e,this.x=s,this.yMargin=r,this.xMargin=n}map(t){return t.empty?this:new Bi(this.range.map(t),this.y,this.x,this.yMargin,this.xMargin)}}const ca=I.define({map:(i,t)=>i.map(t)});function Bt(i,t,e){let s=i.facet(Oc);s.length?s[0](t):window.onerror?window.onerror(String(t),e,void 0,void 0,t):e?console.error(e+":",t):console.error(t)}const gr=P.define({combine:i=>i.length?i[0]:!0});let Fm=0;const ws=P.define();class X{constructor(t,e,s,r){this.id=t,this.create=e,this.domEventHandlers=s,this.extension=r(this)}static define(t,e){const{eventHandlers:s,provide:r,decorations:n}=e||{};return new X(Fm++,t,s,o=>{let a=[ws.of(o)];return n&&a.push(zs.of(l=>{let c=l.plugin(o);return c?n(c):D.none})),r&&a.push(r(o)),a})}static fromClass(t,e){return X.define(s=>new t(s),e)}}class Or{constructor(t){this.spec=t,this.mustUpdate=null,this.value=null}update(t){if(this.value){if(this.mustUpdate){let e=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(e)}catch(s){if(Bt(e.state,s,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(t)}catch(e){Bt(t.state,e,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(t){var e;if(!((e=this.value)===null||e===void 0)&&e.destroy)try{this.value.destroy()}catch(s){Bt(t.state,s,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Ec=P.define(),go=P.define(),zs=P.define(),Nc=P.define(),Bc=P.define(),Cs=P.define();class se{constructor(t,e,s,r){this.fromA=t,this.toA=e,this.fromB=s,this.toB=r}join(t){return new se(Math.min(this.fromA,t.fromA),Math.max(this.toA,t.toA),Math.min(this.fromB,t.fromB),Math.max(this.toB,t.toB))}addToSet(t){let e=t.length,s=this;for(;e>0;e--){let r=t[e-1];if(!(r.fromA>s.toA)){if(r.toA<s.fromA)break;s=s.join(r),t.splice(e-1,1)}}return t.splice(e,0,s),t}static extendWithRanges(t,e){if(e.length==0)return t;let s=[];for(let r=0,n=0,o=0,a=0;;r++){let l=r==t.length?null:t[r],c=o-a,h=l?l.fromB:1e9;for(;n<e.length&&e[n]<h;){let u=e[n],d=e[n+1],p=Math.max(a,u),f=Math.min(h,d);if(p<=f&&new se(p+c,f+c,p,f).addToSet(s),d>h)break;n+=2}if(!l)return s;new se(l.fromA,l.toA,l.fromB,l.toB).addToSet(s),o=l.toA,a=l.toB}}}class zi{constructor(t,e,s){this.view=t,this.state=e,this.transactions=s,this.flags=0,this.startState=t.state,this.changes=rt.empty(this.startState.doc.length);for(let o of s)this.changes=this.changes.compose(o.changes);let r=[];this.changes.iterChangedRanges((o,a,l,c)=>r.push(new se(o,a,l,c))),this.changedRanges=r;let n=t.hasFocus;n!=t.inputState.notifiedFocused&&(t.inputState.notifiedFocused=n,this.flags|=1)}static create(t,e,s){return new zi(t,e,s)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(t=>t.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var Y=function(i){return i[i.LTR=0]="LTR",i[i.RTL=1]="RTL",i}(Y||(Y={}));const xn=Y.LTR,Hm=Y.RTL;function zc(i){let t=[];for(let e=0;e<i.length;e++)t.push(1<<+i[e]);return t}const Vm=zc("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Um=zc("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Sn=Object.create(null),qt=[];for(let i of["()","[]","{}"]){let t=i.charCodeAt(0),e=i.charCodeAt(1);Sn[t]=e,Sn[e]=-t}function Wm(i){return i<=247?Vm[i]:1424<=i&&i<=1524?2:1536<=i&&i<=1785?Um[i-1536]:1774<=i&&i<=2220?4:8192<=i&&i<=8203?256:64336<=i&&i<=65023?4:i==8204?256:1}const Km=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class ls{constructor(t,e,s){this.from=t,this.to=e,this.level=s}get dir(){return this.level%2?Hm:xn}side(t,e){return this.dir==e==t?this.to:this.from}static find(t,e,s,r){let n=-1;for(let o=0;o<t.length;o++){let a=t[o];if(a.from<=e&&a.to>=e){if(a.level==s)return o;(n<0||(r!=0?r<0?a.from<e:a.to>e:t[n].level>a.level))&&(n=o)}}if(n<0)throw new RangeError("Index out of range");return n}}const j=[];function qm(i,t){let e=i.length,s=t==xn?1:2,r=t==xn?2:1;if(!i||s==1&&!Km.test(i))return Gc(e);for(let o=0,a=s,l=s;o<e;o++){let c=Wm(i.charCodeAt(o));c==512?c=a:c==8&&l==4&&(c=16),j[o]=c==4?2:c,c&7&&(l=c),a=c}for(let o=0,a=s,l=s;o<e;o++){let c=j[o];if(c==128)o<e-1&&a==j[o+1]&&a&24?c=j[o]=a:j[o]=256;else if(c==64){let h=o+1;for(;h<e&&j[h]==64;)h++;let u=o&&a==8||h<e&&j[h]==8?l==1?1:8:256;for(let d=o;d<h;d++)j[d]=u;o=h-1}else c==8&&l==1&&(j[o]=1);a=c,c&7&&(l=c)}for(let o=0,a=0,l=0,c,h,u;o<e;o++)if(h=Sn[c=i.charCodeAt(o)])if(h<0){for(let d=a-3;d>=0;d-=3)if(qt[d+1]==-h){let p=qt[d+2],f=p&2?s:p&4?p&1?r:s:0;f&&(j[o]=j[qt[d]]=f),a=d;break}}else{if(qt.length==189)break;qt[a++]=o,qt[a++]=c,qt[a++]=l}else if((u=j[o])==2||u==1){let d=u==s;l=d?0:1;for(let p=a-3;p>=0;p-=3){let f=qt[p+2];if(f&2)break;if(d)qt[p+2]|=2;else{if(f&4)break;qt[p+2]|=4}}}for(let o=0;o<e;o++)if(j[o]==256){let a=o+1;for(;a<e&&j[a]==256;)a++;let l=(o?j[o-1]:s)==1,c=(a<e?j[a]:s)==1,h=l==c?l?1:2:s;for(let u=o;u<a;u++)j[u]=h;o=a-1}let n=[];if(s==1)for(let o=0;o<e;){let a=o,l=j[o++]!=1;for(;o<e&&l==(j[o]!=1);)o++;if(l)for(let c=o;c>a;){let h=c,u=j[--c]!=2;for(;c>a&&u==(j[c-1]!=2);)c--;n.push(new ls(c,h,u?2:1))}else n.push(new ls(a,o,0))}else for(let o=0;o<e;){let a=o,l=j[o++]==2;for(;o<e&&l==(j[o]==2);)o++;n.push(new ls(a,o,l?1:2))}return n}function Gc(i){return[new ls(0,i,0)]}let Fc="";function Jm(i,t,e,s,r){var n;let o=s.head-i.from,a=-1;if(o==0){if(!r||!i.length)return null;t[0].level!=e&&(o=t[0].side(!1,e),a=0)}else if(o==i.length){if(r)return null;let d=t[t.length-1];d.level!=e&&(o=d.side(!0,e),a=t.length-1)}a<0&&(a=ls.find(t,o,(n=s.bidiLevel)!==null&&n!==void 0?n:-1,s.assoc));let l=t[a];o==l.side(r,e)&&(l=t[a+=r?1:-1],o=l.side(!r,e));let c=r==(l.dir==e),h=St(i.text,o,c);if(Fc=i.text.slice(Math.min(o,h),Math.max(o,h)),h!=l.side(r,e))return y.cursor(h+i.from,c?-1:1,l.level);let u=a==(r?t.length-1:0)?null:t[a+(r?1:-1)];return!u&&l.level!=e?y.cursor(r?i.to:i.from,r?-1:1,e):u&&u.level<l.level?y.cursor(u.side(!r,e)+i.from,r?1:-1,u.level):y.cursor(h+i.from,r?-1:1,l.level)}const ke="￿";class Hc{constructor(t,e){this.points=t,this.text="",this.lineSeparator=e.facet(B.lineSeparator)}append(t){this.text+=t}lineBreak(){this.text+=ke}readRange(t,e){if(!t)return this;let s=t.parentNode;for(let r=t;;){this.findPointBefore(s,r),this.readNode(r);let n=r.nextSibling;if(n==e)break;let o=q.get(r),a=q.get(n);(o&&a?o.breakAfter:(o?o.breakAfter:ha(r))||ha(n)&&(r.nodeName!="BR"||r.cmIgnore))&&this.lineBreak(),r=n}return this.findPointBefore(s,e),this}readTextNode(t){let e=t.nodeValue;for(let s of this.points)s.node==t&&(s.pos=this.text.length+Math.min(s.offset,e.length));for(let s=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let n=-1,o=1,a;if(this.lineSeparator?(n=e.indexOf(this.lineSeparator,s),o=this.lineSeparator.length):(a=r.exec(e))&&(n=a.index,o=a[0].length),this.append(e.slice(s,n<0?e.length:n)),n<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==t&&l.pos>this.text.length&&(l.pos-=o-1);s=n+o}}readNode(t){if(t.cmIgnore)return;let e=q.get(t),s=e&&e.overrideDOMText;if(s!=null){this.findPointInside(t,s.length);for(let r=s.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else t.nodeType==3?this.readTextNode(t):t.nodeName=="BR"?t.nextSibling&&this.lineBreak():t.nodeType==1&&this.readRange(t.firstChild,null)}findPointBefore(t,e){for(let s of this.points)s.node==t&&t.childNodes[s.offset]==e&&(s.pos=this.text.length)}findPointInside(t,e){for(let s of this.points)(t.nodeType==3?s.node==t:t.contains(s.node))&&(s.pos=this.text.length+Math.min(e,s.offset))}}function ha(i){return i.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(i.nodeName)}class ua{constructor(t,e){this.node=t,this.offset=e,this.pos=-1}}class da extends q{constructor(t){super(),this.view=t,this.compositionDeco=D.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(t.contentDOM),this.children=[new wt],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new se(0,0,0,t.state.doc.length)],0)}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(t){let e=t.changedRanges;this.minWidth>0&&e.length&&(e.every(({fromA:o,toA:a})=>a<this.minWidthFrom||o>this.minWidthTo)?(this.minWidthFrom=t.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=t.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=D.none:(t.transactions.length||this.dirty)&&(this.compositionDeco=Ym(this.view,t.changes)),(C.ie||C.chrome)&&!this.compositionDeco.size&&t&&t.state.doc.lines!=t.startState.doc.lines&&(this.forceSelection=!0);let s=this.decorations,r=this.updateDeco(),n=tg(s,r,t.changes);return e=se.extendWithRanges(e,n),this.dirty==0&&e.length==0?!1:(this.updateInner(e,t.startState.doc.length),t.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(t,e){this.view.viewState.mustMeasureContent=!0,this.updateChildren(t,e);let{observer:s}=this.view;s.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let n=C.chrome||C.ios?{node:s.selectionRange.focusNode,written:!1}:void 0;this.sync(n),this.dirty=0,n&&(n.written||s.selectionRange.focusNode!=n.node)&&(this.forceSelection=!0),this.dom.style.height=""});let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let n of this.children)n instanceof Fe&&n.widget instanceof pa&&r.push(n.dom);s.updateGaps(r)}updateChildren(t,e){let s=this.childCursor(e);for(let r=t.length-1;;r--){let n=r>=0?t[r]:null;if(!n)break;let{fromA:o,toA:a,fromB:l,toB:c}=n,{content:h,breakAtStart:u,openStart:d,openEnd:p}=mo.build(this.view.state.doc,l,c,this.decorations,this.dynamicDecorationMap),{i:f,off:g}=s.findPos(a,1),{i:m,off:_}=s.findPos(o,-1);vc(this,m,_,f,g,h,u,d,p)}}updateSelection(t=!1,e=!1){if((t||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange(),!(e||this.mayControlSelection()))return;let s=this.forceSelection;this.forceSelection=!1;let r=this.view.state.selection.main,n=this.domAtPos(r.anchor),o=r.empty?n:this.domAtPos(r.head);if(C.gecko&&r.empty&&jm(n)){let l=document.createTextNode("");this.view.observer.ignore(()=>n.node.insertBefore(l,n.node.childNodes[n.offset]||null)),n=o=new gt(l,0),s=!0}let a=this.view.observer.selectionRange;(s||!a.focusNode||!Ei(n.node,n.offset,a.anchorNode,a.anchorOffset)||!Ei(o.node,o.offset,a.focusNode,a.focusOffset))&&(this.view.observer.ignore(()=>{C.android&&C.chrome&&this.dom.contains(a.focusNode)&&eg(a.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let l=Li(this.view.root);if(l)if(r.empty){if(C.gecko){let c=Xm(n.node,n.offset);if(c&&c!=3){let h=Uc(n.node,n.offset,c==1?1:-1);h&&(n=new gt(h,c==1?0:h.nodeValue.length))}}l.collapse(n.node,n.offset),r.bidiLevel!=null&&a.cursorBidiLevel!=null&&(a.cursorBidiLevel=r.bidiLevel)}else if(l.extend){l.collapse(n.node,n.offset);try{l.extend(o.node,o.offset)}catch{}}else{let c=document.createRange();r.anchor>r.head&&([n,o]=[o,n]),c.setEnd(o.node,o.offset),c.setStart(n.node,n.offset),l.removeAllRanges(),l.addRange(c)}}),this.view.observer.setSelectionRange(n,o)),this.impreciseAnchor=n.precise?null:new gt(a.anchorNode,a.anchorOffset),this.impreciseHead=o.precise?null:new gt(a.focusNode,a.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let{view:t}=this,e=t.state.selection.main,s=Li(t.root),{anchorNode:r,anchorOffset:n}=t.observer.selectionRange;if(!s||!e.empty||!e.assoc||!s.modify)return;let o=wt.find(this,e.head);if(!o)return;let a=o.posAtStart;if(e.head==a||e.head==a+o.length)return;let l=this.coordsAt(e.head,-1),c=this.coordsAt(e.head,1);if(!l||!c||l.bottom>c.top)return;let h=this.domAtPos(e.head+e.assoc);s.collapse(h.node,h.offset),s.modify("move",e.assoc<0?"forward":"backward","lineboundary"),t.observer.readSelectionRange();let u=t.observer.selectionRange;t.docView.posFromDOM(u.anchorNode,u.anchorOffset)!=e.from&&s.collapse(r,n)}mayControlSelection(){let t=this.view.root.activeElement;return t==this.dom||wi(this.dom,this.view.observer.selectionRange)&&!(t&&this.dom.contains(t))}nearest(t){for(let e=t;e;){let s=q.get(e);if(s&&s.rootView==this)return s;e=e.parentNode}return null}posFromDOM(t,e){let s=this.nearest(t);if(!s)throw new RangeError("Trying to find position for a DOM position outside of the document");return s.localPosFromDOM(t,e)+s.posAtStart}domAtPos(t){let{i:e,off:s}=this.childCursor().findPos(t,-1);for(;e<this.children.length-1;){let r=this.children[e];if(s<r.length||r instanceof wt)break;e++,s=0}return this.children[e].domAtPos(s)}coordsAt(t,e){for(let s=this.length,r=this.children.length-1;;r--){let n=this.children[r],o=s-n.breakAfter-n.length;if(t>o||t==o&&n.type!=W.WidgetBefore&&n.type!=W.WidgetAfter&&(!r||e==2||this.children[r-1].breakAfter||this.children[r-1].type==W.WidgetBefore&&e>-2))return n.coordsAt(t-o,e);s=o}}measureVisibleLineHeights(t){let e=[],{from:s,to:r}=t,n=this.view.contentDOM.clientWidth,o=n>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==Y.LTR;for(let c=0,h=0;h<this.children.length;h++){let u=this.children[h],d=c+u.length;if(d>r)break;if(c>=s){let p=u.dom.getBoundingClientRect();if(e.push(p.height),o){let f=u.dom.lastChild,g=f?Ns(f):[];if(g.length){let m=g[g.length-1],_=l?m.right-p.left:p.right-m.left;_>a&&(a=_,this.minWidth=n,this.minWidthFrom=c,this.minWidthTo=d)}}}c=d+u.breakAfter}return e}textDirectionAt(t){let{i:e}=this.childPos(t,1);return getComputedStyle(this.children[e].dom).direction=="rtl"?Y.RTL:Y.LTR}measureTextSize(){for(let r of this.children)if(r instanceof wt){let n=r.measureTextSize();if(n)return n}let t=document.createElement("div"),e,s;return t.className="cm-line",t.style.width="99999px",t.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(t);let r=Ns(t.firstChild)[0];e=t.getBoundingClientRect().height,s=r?r.width/27:7,t.remove()}),{lineHeight:e,charWidth:s}}childCursor(t=this.length){let e=this.children.length;return e&&(t-=this.children[--e].length),new yc(this.children,t,e)}computeBlockGapDeco(){let t=[],e=this.view.viewState;for(let s=0,r=0;;r++){let n=r==e.viewports.length?null:e.viewports[r],o=n?n.from-1:this.length;if(o>s){let a=e.lineBlockAt(o).bottom-e.lineBlockAt(s).top;t.push(D.replace({widget:new pa(a),block:!0,inclusive:!0,isBlockGap:!0}).range(s,o))}if(!n)break;s=n.to+1}return D.set(t)}updateDeco(){let t=this.view.state.facet(zs).map((e,s)=>(this.dynamicDecorationMap[s]=typeof e=="function")?e(this.view):e);for(let e=t.length;e<t.length+3;e++)this.dynamicDecorationMap[e]=!1;return this.decorations=[...t,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(t){let{range:e}=t,s=this.coordsAt(e.head,e.empty?e.assoc:e.head>e.anchor?-1:1),r;if(!s)return;!e.empty&&(r=this.coordsAt(e.anchor,e.anchor>e.head?-1:1))&&(s={left:Math.min(s.left,r.left),top:Math.min(s.top,r.top),right:Math.max(s.right,r.right),bottom:Math.max(s.bottom,r.bottom)});let n=0,o=0,a=0,l=0;for(let h of this.view.state.facet(Bc).map(u=>u(this.view)))if(h){let{left:u,right:d,top:p,bottom:f}=h;u!=null&&(n=Math.max(n,u)),d!=null&&(o=Math.max(o,d)),p!=null&&(a=Math.max(a,p)),f!=null&&(l=Math.max(l,f))}let c={left:s.left-n,top:s.top-a,right:s.right+o,bottom:s.bottom+l};Om(this.view.scrollDOM,c,e.head<e.anchor?-1:1,t.x,t.y,t.xMargin,t.yMargin,this.view.textDirection==Y.LTR)}}function jm(i){return i.node.nodeType==1&&i.node.firstChild&&(i.offset==0||i.node.childNodes[i.offset-1].contentEditable=="false")&&(i.offset==i.node.childNodes.length||i.node.childNodes[i.offset].contentEditable=="false")}class pa extends fe{constructor(t){super(),this.height=t}toDOM(){let t=document.createElement("div");return this.updateDOM(t),t}eq(t){return t.height==this.height}updateDOM(t){return t.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function Vc(i){let t=i.observer.selectionRange,e=t.focusNode&&Uc(t.focusNode,t.focusOffset,0);if(!e)return null;let s=i.docView.nearest(e);if(!s)return null;if(s instanceof wt){let r=e;for(;r.parentNode!=s.dom;)r=r.parentNode;let n=r.previousSibling;for(;n&&!q.get(n);)n=n.previousSibling;let o=n?q.get(n).posAtEnd:s.posAtStart;return{from:o,to:o,node:r,text:e}}else{for(;;){let{parent:n}=s;if(!n)return null;if(n instanceof wt)break;s=n}let r=s.posAtStart;return{from:r,to:r+s.length,node:s.dom,text:e}}}function Ym(i,t){let e=Vc(i);if(!e)return D.none;let{from:s,to:r,node:n,text:o}=e,a=t.mapPos(s,1),l=Math.max(a,t.mapPos(r,-1)),{state:c}=i,h=n.nodeType==3?n.nodeValue:new Hc([],c).readRange(n.firstChild,null).text;if(l-a<h.length)if(c.doc.sliceString(a,Math.min(c.doc.length,a+h.length),ke)==h)l=a+h.length;else if(c.doc.sliceString(Math.max(0,l-h.length),l,ke)==h)a=l-h.length;else return D.none;else if(c.doc.sliceString(a,l,ke)!=h)return D.none;let u=q.get(n);return u instanceof xc?u=u.widget.topView:u&&(u.parent=null),D.set(D.replace({widget:new Qm(n,o,u),inclusive:!0}).range(a,l))}class Qm extends fe{constructor(t,e,s){super(),this.top=t,this.text=e,this.topView=s}eq(t){return this.top==t.top&&this.text==t.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return xc}}function Uc(i,t,e){for(;;){if(i.nodeType==3)return i;if(i.nodeType==1&&t>0&&e<=0)i=i.childNodes[t-1],t=Bs(i);else if(i.nodeType==1&&t<i.childNodes.length&&e>=0)i=i.childNodes[t],t=0;else return null}}function Xm(i,t){return i.nodeType!=1?0:(t&&i.childNodes[t-1].contentEditable=="false"?1:0)|(t<i.childNodes.length&&i.childNodes[t].contentEditable=="false"?2:0)}class Zm{constructor(){this.changes=[]}compareRange(t,e){kn(t,e,this.changes)}comparePoint(t,e){kn(t,e,this.changes)}}function tg(i,t,e){let s=new Zm;return F.compare(i,t,e,s),s.changes}function eg(i,t){for(let e=i;e&&e!=t;e=e.assignedSlot||e.parentNode)if(e.nodeType==1&&e.contentEditable=="false")return!0;return!1}function sg(i,t,e=1){let s=i.charCategorizer(t),r=i.doc.lineAt(t),n=t-r.from;if(r.length==0)return y.cursor(t);n==0?e=1:n==r.length&&(e=-1);let o=n,a=n;e<0?o=St(r.text,n,!1):a=St(r.text,n);let l=s(r.text.slice(o,a));for(;o>0;){let c=St(r.text,o,!1);if(s(r.text.slice(c,o))!=l)break;o=c}for(;a<r.length;){let c=St(r.text,a);if(s(r.text.slice(a,c))!=l)break;a=c}return y.range(o+r.from,a+r.from)}function ig(i,t){return t.left>i?t.left-i:Math.max(0,i-t.right)}function rg(i,t){return t.top>i?t.top-i:Math.max(0,i-t.bottom)}function Ir(i,t){return i.top<t.bottom-1&&i.bottom>t.top+1}function fa(i,t){return t<i.top?{top:t,left:i.left,right:i.right,bottom:i.bottom}:i}function ma(i,t){return t>i.bottom?{top:i.top,left:i.left,right:i.right,bottom:t}:i}function wn(i,t,e){let s,r,n,o,a=!1,l,c,h,u;for(let f=i.firstChild;f;f=f.nextSibling){let g=Ns(f);for(let m=0;m<g.length;m++){let _=g[m];r&&Ir(r,_)&&(_=fa(ma(_,r.bottom),r.top));let S=ig(t,_),A=rg(e,_);if(S==0&&A==0)return f.nodeType==3?ga(f,t,e):wn(f,t,e);if(!s||o>A||o==A&&n>S){s=f,r=_,n=S,o=A;let x=A?e<_.top?-1:1:S?t<_.left?-1:1:0;a=!x||(x>0?m<g.length-1:m>0)}S==0?e>_.bottom&&(!h||h.bottom<_.bottom)?(l=f,h=_):e<_.top&&(!u||u.top>_.top)&&(c=f,u=_):h&&Ir(h,_)?h=ma(h,_.bottom):u&&Ir(u,_)&&(u=fa(u,_.top))}}if(h&&h.bottom>=e?(s=l,r=h):u&&u.top<=e&&(s=c,r=u),!s)return{node:i,offset:0};let d=Math.max(r.left,Math.min(r.right,t));if(s.nodeType==3)return ga(s,d,e);if(a&&s.contentEditable!="false")return wn(s,d,e);let p=Array.prototype.indexOf.call(i.childNodes,s)+(t>=(r.left+r.right)/2?1:0);return{node:i,offset:p}}function ga(i,t,e){let s=i.nodeValue.length,r=-1,n=1e9,o=0;for(let a=0;a<s;a++){let l=ds(i,a,a+1).getClientRects();for(let c=0;c<l.length;c++){let h=l[c];if(h.top==h.bottom)continue;o||(o=t-h.left);let u=(h.top>e?h.top-e:e-h.bottom)-1;if(h.left-1<=t&&h.right+1>=t&&u<n){let d=t>=(h.left+h.right)/2,p=d;if((C.chrome||C.gecko)&&ds(i,a).getBoundingClientRect().left==h.right&&(p=!d),u<=0)return{node:i,offset:a+(p?1:0)};r=a+(p?1:0),n=u}}}return{node:i,offset:r>-1?r:o>0?i.nodeValue.length:0}}function Wc(i,{x:t,y:e},s,r=-1){var n;let o=i.contentDOM.getBoundingClientRect(),a=o.top+i.viewState.paddingTop,l,{docHeight:c}=i.viewState,h=e-a;if(h<0)return 0;if(h>c)return i.state.doc.length;for(let _=i.defaultLineHeight/2,S=!1;l=i.elementAtHeight(h),l.type!=W.Text;)for(;h=r>0?l.bottom+_:l.top-_,!(h>=0&&h<=c);){if(S)return s?null:0;S=!0,r=-r}e=a+h;let u=l.from;if(u<i.viewport.from)return i.viewport.from==0?0:s?null:_a(i,o,l,t,e);if(u>i.viewport.to)return i.viewport.to==i.state.doc.length?i.state.doc.length:s?null:_a(i,o,l,t,e);let d=i.dom.ownerDocument,p=i.root.elementFromPoint?i.root:d,f=p.elementFromPoint(t,e);f&&!i.contentDOM.contains(f)&&(f=null),f||(t=Math.max(o.left+1,Math.min(o.right-1,t)),f=p.elementFromPoint(t,e),f&&!i.contentDOM.contains(f)&&(f=null));let g,m=-1;if(f&&((n=i.docView.nearest(f))===null||n===void 0?void 0:n.isEditable)!=!1){if(d.caretPositionFromPoint){let _=d.caretPositionFromPoint(t,e);_&&({offsetNode:g,offset:m}=_)}else if(d.caretRangeFromPoint){let _=d.caretRangeFromPoint(t,e);_&&({startContainer:g,startOffset:m}=_,(!i.contentDOM.contains(g)||C.safari&&ng(g,m,t)||C.chrome&&og(g,m,t))&&(g=void 0))}}if(!g||!i.docView.dom.contains(g)){let _=wt.find(i.docView,u);if(!_)return h>l.top+l.height/2?l.to:l.from;({node:g,offset:m}=wn(_.dom,t,e))}return i.docView.posFromDOM(g,m)}function _a(i,t,e,s,r){let n=Math.round((s-t.left)*i.defaultCharacterWidth);if(i.lineWrapping&&e.height>i.defaultLineHeight*1.5){let a=Math.floor((r-e.top)/i.defaultLineHeight);n+=a*i.viewState.heightOracle.lineLength}let o=i.state.sliceDoc(e.from,e.to);return e.from+un(o,n,i.state.tabSize)}function ng(i,t,e){let s;if(i.nodeType!=3||t!=(s=i.nodeValue.length))return!1;for(let r=i.nextSibling;r;r=r.nextSibling)if(r.nodeType!=1||r.nodeName!="BR")return!1;return ds(i,s-1,s).getBoundingClientRect().left>e}function og(i,t,e){if(t!=0)return!1;for(let r=i;;){let n=r.parentNode;if(!n||n.nodeType!=1||n.firstChild!=r)return!1;if(n.classList.contains("cm-line"))break;r=n}let s=i.nodeType==1?i.getBoundingClientRect():ds(i,0,Math.max(i.nodeValue.length,1)).getBoundingClientRect();return e-s.left>5}function ag(i,t,e,s){let r=i.state.doc.lineAt(t.head),n=!s||!i.lineWrapping?null:i.coordsAtPos(t.assoc<0&&t.head>r.from?t.head-1:t.head);if(n){let l=i.dom.getBoundingClientRect(),c=i.textDirectionAt(r.from),h=i.posAtCoords({x:e==(c==Y.LTR)?l.right-1:l.left+1,y:(n.top+n.bottom)/2});if(h!=null)return y.cursor(h,e?-1:1)}let o=wt.find(i.docView,t.head),a=o?e?o.posAtEnd:o.posAtStart:e?r.to:r.from;return y.cursor(a,e?-1:1)}function ya(i,t,e,s){let r=i.state.doc.lineAt(t.head),n=i.bidiSpans(r),o=i.textDirectionAt(r.from);for(let a=t,l=null;;){let c=Jm(r,n,o,a,e),h=Fc;if(!c){if(r.number==(e?i.state.doc.lines:1))return a;h=`
`,r=i.state.doc.line(r.number+(e?1:-1)),n=i.bidiSpans(r),c=y.cursor(e?r.from:r.to)}if(l){if(!l(h))return a}else{if(!s)return c;l=s(h)}a=c}}function lg(i,t,e){let s=i.state.charCategorizer(t),r=s(e);return n=>{let o=s(n);return r==J.Space&&(r=o),r==o}}function cg(i,t,e,s){let r=t.head,n=e?1:-1;if(r==(e?i.state.doc.length:0))return y.cursor(r,t.assoc);let o=t.goalColumn,a,l=i.contentDOM.getBoundingClientRect(),c=i.coordsAtPos(r),h=i.documentTop;if(c)o==null&&(o=c.left-l.left),a=n<0?c.top:c.bottom;else{let p=i.viewState.lineBlockAt(r);o==null&&(o=Math.min(l.right-l.left,i.defaultCharacterWidth*(r-p.from))),a=(n<0?p.top:p.bottom)+h}let u=l.left+o,d=s??i.defaultLineHeight>>1;for(let p=0;;p+=10){let f=a+(d+p)*n,g=Wc(i,{x:u,y:f},!1,n);if(f<l.top||f>l.bottom||(n<0?g<r:g>r))return y.cursor(g,t.assoc,void 0,o)}}function Rr(i,t,e){let s=i.state.facet(Nc).map(r=>r(i));for(;;){let r=!1;for(let n of s)n.between(e.from-1,e.from+1,(o,a,l)=>{e.from>o&&e.from<a&&(e=t.head>e.from?y.cursor(o,1):y.cursor(a,-1),r=!0)});if(!r)return e}}class hg{constructor(t){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.mouseSelection=null;let e=(s,r)=>{this.ignoreDuringComposition(r)||r.type=="keydown"&&this.keydown(t,r)||(this.mustFlushObserver(r)&&t.observer.forceFlush(),this.runCustomHandlers(r.type,t,r)?r.preventDefault():s(t,r))};for(let s in ot){let r=ot[s];t.contentDOM.addEventListener(s,n=>{va(t,n)&&e(r,n)},Cn[s]),this.registeredEvents.push(s)}t.scrollDOM.addEventListener("mousedown",s=>{s.target==t.scrollDOM&&e(ot.mousedown,s)}),C.chrome&&C.chrome_version==102&&t.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?t.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,t.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=t.hasFocus,C.safari&&t.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(t){this.lastSelectionOrigin=t,this.lastSelectionTime=Date.now()}ensureHandlers(t,e){var s;let r;this.customHandlers=[];for(let n of e)if(r=(s=n.update(t).spec)===null||s===void 0?void 0:s.domEventHandlers){this.customHandlers.push({plugin:n.value,handlers:r});for(let o in r)this.registeredEvents.indexOf(o)<0&&o!="scroll"&&(this.registeredEvents.push(o),t.contentDOM.addEventListener(o,a=>{va(t,a)&&this.runCustomHandlers(o,t,a)&&a.preventDefault()}))}}runCustomHandlers(t,e,s){for(let r of this.customHandlers){let n=r.handlers[t];if(n)try{if(n.call(r.plugin,s,e)||s.defaultPrevented)return!0}catch(o){Bt(e.state,o)}}return!1}runScrollHandlers(t,e){this.lastScrollTop=t.scrollDOM.scrollTop,this.lastScrollLeft=t.scrollDOM.scrollLeft;for(let s of this.customHandlers){let r=s.handlers.scroll;if(r)try{r.call(s.plugin,e,t)}catch(n){Bt(t.state,n)}}}keydown(t,e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(C.android&&C.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return t.observer.delayAndroidKey(e.key,e.keyCode),!0;let s;return C.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((s=Kc.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||ug.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=s||e,setTimeout(()=>this.flushIOSKey(t),250),!0):!1}flushIOSKey(t){let e=this.pendingIOSKey;return e?(this.pendingIOSKey=void 0,as(t.contentDOM,e.key,e.keyCode)):!1}ignoreDuringComposition(t){return/^key/.test(t.type)?this.composing>0?!0:C.safari&&!C.ios&&Date.now()-this.compositionEndedAt<100?(this.compositionEndedAt=0,!0):!1:!1}mustFlushObserver(t){return t.type=="keydown"&&t.keyCode!=229}startMouseSelection(t){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=t}update(t){this.mouseSelection&&this.mouseSelection.update(t),t.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const Kc=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],ug="dthko",qc=[16,17,18,20,91,92,224,225];function oi(i){return i*.7+8}class dg{constructor(t,e,s,r){this.view=t,this.style=s,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=e,this.scrollParent=Im(t.contentDOM);let n=t.contentDOM.ownerDocument;n.addEventListener("mousemove",this.move=this.move.bind(this)),n.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=e.shiftKey,this.multiple=t.state.facet(B.allowMultipleSelections)&&pg(t,e),this.dragMove=fg(t,e),this.dragging=mg(t,e)&&Qc(e)==1?null:!1,this.dragging===!1&&(e.preventDefault(),this.select(e))}move(t){var e;if(t.buttons==0)return this.destroy();if(this.dragging!==!1)return;this.select(this.lastEvent=t);let s=0,r=0,n=((e=this.scrollParent)===null||e===void 0?void 0:e.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight};t.clientX<=n.left?s=-oi(n.left-t.clientX):t.clientX>=n.right&&(s=oi(t.clientX-n.right)),t.clientY<=n.top?r=-oi(n.top-t.clientY):t.clientY>=n.bottom&&(r=oi(t.clientY-n.bottom)),this.setScrollSpeed(s,r)}up(t){this.dragging==null&&this.select(this.lastEvent),this.dragging||t.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let t=this.view.contentDOM.ownerDocument;t.removeEventListener("mousemove",this.move),t.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(t,e){this.scrollSpeed={x:t,y:e},t||e?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}select(t){let e=this.style.get(t,this.extend,this.multiple);(this.mustSelect||!e.eq(this.view.state.selection)||e.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:e,userEvent:"select.pointer"}),this.mustSelect=!1}update(t){t.docChanged&&this.dragging&&(this.dragging=this.dragging.map(t.changes)),this.style.update(t)&&setTimeout(()=>this.select(this.lastEvent),20)}}function pg(i,t){let e=i.state.facet(Ac);return e.length?e[0](t):C.mac?t.metaKey:t.ctrlKey}function fg(i,t){let e=i.state.facet(Dc);return e.length?e[0](t):C.mac?!t.altKey:!t.ctrlKey}function mg(i,t){let{main:e}=i.state.selection;if(e.empty)return!1;let s=Li(i.root);if(!s||s.rangeCount==0)return!0;let r=s.getRangeAt(0).getClientRects();for(let n=0;n<r.length;n++){let o=r[n];if(o.left<=t.clientX&&o.right>=t.clientX&&o.top<=t.clientY&&o.bottom>=t.clientY)return!0}return!1}function va(i,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let e=t.target,s;e!=i.contentDOM;e=e.parentNode)if(!e||e.nodeType==11||(s=q.get(e))&&s.ignoreEvent(t))return!1;return!0}const ot=Object.create(null),Cn=Object.create(null),Jc=C.ie&&C.ie_version<15||C.ios&&C.webkit_version<604;function gg(i){let t=i.dom.parentNode;if(!t)return;let e=t.appendChild(document.createElement("textarea"));e.style.cssText="position: fixed; left: -10000px; top: 10px",e.focus(),setTimeout(()=>{i.focus(),e.remove(),jc(i,e.value)},50)}function jc(i,t){let{state:e}=i,s,r=1,n=e.toText(t),o=n.lines==e.selection.ranges.length;if(Pn!=null&&e.selection.ranges.every(l=>l.empty)&&Pn==n.toString()){let l=-1;s=e.changeByRange(c=>{let h=e.doc.lineAt(c.from);if(h.from==l)return{range:c};l=h.from;let u=e.toText((o?n.line(r++).text:t)+e.lineBreak);return{changes:{from:h.from,insert:u},range:y.cursor(c.from+u.length)}})}else o?s=e.changeByRange(l=>{let c=n.line(r++);return{changes:{from:l.from,to:l.to,insert:c.text},range:y.cursor(l.from+c.length)}}):s=e.replaceSelection(n);i.dispatch(s,{userEvent:"input.paste",scrollIntoView:!0})}ot.keydown=(i,t)=>{i.inputState.setSelectionOrigin("select"),t.keyCode==27?i.inputState.lastEscPress=Date.now():qc.indexOf(t.keyCode)<0&&(i.inputState.lastEscPress=0)};ot.touchstart=(i,t)=>{i.inputState.lastTouchTime=Date.now(),i.inputState.setSelectionOrigin("select.pointer")};ot.touchmove=i=>{i.inputState.setSelectionOrigin("select.pointer")};Cn.touchstart=Cn.touchmove={passive:!0};ot.mousedown=(i,t)=>{if(i.observer.flush(),i.inputState.lastTouchTime>Date.now()-2e3)return;let e=null;for(let s of i.state.facet(Mc))if(e=s(i,t),e)break;if(!e&&t.button==0&&(e=vg(i,t)),e){let s=i.root.activeElement!=i.contentDOM;s&&i.observer.ignore(()=>gc(i.contentDOM)),i.inputState.startMouseSelection(new dg(i,t,e,s))}};function ba(i,t,e,s){if(s==1)return y.cursor(t,e);if(s==2)return sg(i.state,t,e);{let r=wt.find(i.docView,t),n=i.state.doc.lineAt(r?r.posAtEnd:t),o=r?r.posAtStart:n.from,a=r?r.posAtEnd:n.to;return a<i.state.doc.length&&a==n.to&&a++,y.range(o,a)}}let Yc=(i,t)=>i>=t.top&&i<=t.bottom,ka=(i,t,e)=>Yc(t,e)&&i>=e.left&&i<=e.right;function _g(i,t,e,s){let r=wt.find(i.docView,t);if(!r)return 1;let n=t-r.posAtStart;if(n==0)return 1;if(n==r.length)return-1;let o=r.coordsAt(n,-1);if(o&&ka(e,s,o))return-1;let a=r.coordsAt(n,1);return a&&ka(e,s,a)?1:o&&Yc(s,o)?-1:1}function $a(i,t){let e=i.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:e,bias:_g(i,e,t.clientX,t.clientY)}}const yg=C.ie&&C.ie_version<=11;let xa=null,Sa=0,wa=0;function Qc(i){if(!yg)return i.detail;let t=xa,e=wa;return xa=i,wa=Date.now(),Sa=!t||e>Date.now()-400&&Math.abs(t.clientX-i.clientX)<2&&Math.abs(t.clientY-i.clientY)<2?(Sa+1)%3:1}function vg(i,t){let e=$a(i,t),s=Qc(t),r=i.state.selection;return{update(n){n.docChanged&&(e.pos=n.changes.mapPos(e.pos),r=r.map(n.changes))},get(n,o,a){let l=$a(i,n),c=ba(i,l.pos,l.bias,s);if(e.pos!=l.pos&&!o){let h=ba(i,e.pos,e.bias,s),u=Math.min(h.from,c.from),d=Math.max(h.to,c.to);c=u<c.from?y.range(u,d):y.range(d,u)}return o?r.replaceRange(r.main.extend(c.from,c.to)):a&&r.ranges.length>1&&r.ranges.some(h=>h.eq(c))?bg(r,c):a?r.addRange(c):y.create([c])}}}function bg(i,t){for(let e=0;;e++)if(i.ranges[e].eq(t))return y.create(i.ranges.slice(0,e).concat(i.ranges.slice(e+1)),i.mainIndex==e?0:i.mainIndex-(i.mainIndex>e?1:0))}ot.dragstart=(i,t)=>{let{selection:{main:e}}=i.state,{mouseSelection:s}=i.inputState;s&&(s.dragging=e),t.dataTransfer&&(t.dataTransfer.setData("Text",i.state.sliceDoc(e.from,e.to)),t.dataTransfer.effectAllowed="copyMove")};function Ca(i,t,e,s){if(!e)return;let r=i.posAtCoords({x:t.clientX,y:t.clientY},!1);t.preventDefault();let{mouseSelection:n}=i.inputState,o=s&&n&&n.dragging&&n.dragMove?{from:n.dragging.from,to:n.dragging.to}:null,a={from:r,insert:e},l=i.state.changes(o?[o,a]:a);i.focus(),i.dispatch({changes:l,selection:{anchor:l.mapPos(r,-1),head:l.mapPos(r,1)},userEvent:o?"move.drop":"input.drop"})}ot.drop=(i,t)=>{if(!t.dataTransfer)return;if(i.state.readOnly)return t.preventDefault();let e=t.dataTransfer.files;if(e&&e.length){t.preventDefault();let s=Array(e.length),r=0,n=()=>{++r==e.length&&Ca(i,t,s.filter(o=>o!=null).join(i.state.lineBreak),!1)};for(let o=0;o<e.length;o++){let a=new FileReader;a.onerror=n,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(s[o]=a.result),n()},a.readAsText(e[o])}}else Ca(i,t,t.dataTransfer.getData("Text"),!0)};ot.paste=(i,t)=>{if(i.state.readOnly)return t.preventDefault();i.observer.flush();let e=Jc?null:t.clipboardData;e?(jc(i,e.getData("text/plain")),t.preventDefault()):gg(i)};function kg(i,t){let e=i.dom.parentNode;if(!e)return;let s=e.appendChild(document.createElement("textarea"));s.style.cssText="position: fixed; left: -10000px; top: 10px",s.value=t,s.focus(),s.selectionEnd=t.length,s.selectionStart=0,setTimeout(()=>{s.remove(),i.focus()},50)}function $g(i){let t=[],e=[],s=!1;for(let r of i.selection.ranges)r.empty||(t.push(i.sliceDoc(r.from,r.to)),e.push(r));if(!t.length){let r=-1;for(let{from:n}of i.selection.ranges){let o=i.doc.lineAt(n);o.number>r&&(t.push(o.text),e.push({from:o.from,to:Math.min(i.doc.length,o.to+1)})),r=o.number}s=!0}return{text:t.join(i.lineBreak),ranges:e,linewise:s}}let Pn=null;ot.copy=ot.cut=(i,t)=>{let{text:e,ranges:s,linewise:r}=$g(i.state);if(!e&&!r)return;Pn=r?e:null;let n=Jc?null:t.clipboardData;n?(t.preventDefault(),n.clearData(),n.setData("text/plain",e)):kg(i,e),t.type=="cut"&&!i.state.readOnly&&i.dispatch({changes:s,scrollIntoView:!0,userEvent:"delete.cut"})};function Xc(i){setTimeout(()=>{i.hasFocus!=i.inputState.notifiedFocused&&i.update([])},10)}ot.focus=i=>{i.inputState.lastFocusTime=Date.now(),!i.scrollDOM.scrollTop&&(i.inputState.lastScrollTop||i.inputState.lastScrollLeft)&&(i.scrollDOM.scrollTop=i.inputState.lastScrollTop,i.scrollDOM.scrollLeft=i.inputState.lastScrollLeft),Xc(i)};ot.blur=i=>{i.observer.clearSelectionRange(),Xc(i)};ot.compositionstart=ot.compositionupdate=i=>{i.inputState.compositionFirstChange==null&&(i.inputState.compositionFirstChange=!0),i.inputState.composing<0&&(i.inputState.composing=0)};ot.compositionend=i=>{i.inputState.composing=-1,i.inputState.compositionEndedAt=Date.now(),i.inputState.compositionFirstChange=null,C.chrome&&C.android&&i.observer.flushSoon(),setTimeout(()=>{i.inputState.composing<0&&i.docView.compositionDeco.size&&i.update([])},50)};ot.contextmenu=i=>{i.inputState.lastContextMenu=Date.now()};ot.beforeinput=(i,t)=>{var e;let s;if(C.chrome&&C.android&&(s=Kc.find(r=>r.inputType==t.inputType))&&(i.observer.delayAndroidKey(s.key,s.keyCode),s.key=="Backspace"||s.key=="Delete")){let r=((e=window.visualViewport)===null||e===void 0?void 0:e.height)||0;setTimeout(()=>{var n;(((n=window.visualViewport)===null||n===void 0?void 0:n.height)||0)>r+10&&i.hasFocus&&(i.contentDOM.blur(),i.focus())},100)}};const Pa=["pre-wrap","normal","pre-line","break-spaces"];class xg{constructor(t){this.lineWrapping=t,this.doc=z.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(t,e){let s=this.doc.lineAt(e).number-this.doc.lineAt(t).number+1;return this.lineWrapping&&(s+=Math.ceil((e-t-s*this.lineLength*.5)/this.lineLength)),this.lineHeight*s}heightForLine(t){return this.lineWrapping?(1+Math.max(0,Math.ceil((t-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(t){return this.doc=t,this}mustRefreshForWrapping(t){return Pa.indexOf(t)>-1!=this.lineWrapping}mustRefreshForHeights(t){let e=!1;for(let s=0;s<t.length;s++){let r=t[s];r<0?s++:this.heightSamples[Math.floor(r*10)]||(e=!0,this.heightSamples[Math.floor(r*10)]=!0)}return e}refresh(t,e,s,r,n){let o=Pa.indexOf(t)>-1,a=Math.round(e)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=e,this.charWidth=s,this.lineLength=r,a){this.heightSamples={};for(let l=0;l<n.length;l++){let c=n[l];c<0?l++:this.heightSamples[Math.floor(c*10)]=!0}}return a}}class Sg{constructor(t,e){this.from=t,this.heights=e,this.index=0}get more(){return this.index<this.heights.length}}class $e{constructor(t,e,s,r,n){this.from=t,this.length=e,this.top=s,this.height=r,this.type=n}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(t){let e=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(t.type)?t.type:[t]);return new $e(this.from,this.length+t.length,this.top,this.height+t.height,e)}}var K=function(i){return i[i.ByPos=0]="ByPos",i[i.ByHeight=1]="ByHeight",i[i.ByPosNoHeight=2]="ByPosNoHeight",i}(K||(K={}));const Ci=.001;class Ct{constructor(t,e,s=2){this.length=t,this.height=e,this.flags=s}get outdated(){return(this.flags&2)>0}set outdated(t){this.flags=(t?2:0)|this.flags&-3}setHeight(t,e){this.height!=e&&(Math.abs(this.height-e)>Ci&&(t.heightChanged=!0),this.height=e)}replace(t,e,s){return Ct.of(s)}decomposeLeft(t,e){e.push(this)}decomposeRight(t,e){e.push(this)}applyChanges(t,e,s,r){let n=this;for(let o=r.length-1;o>=0;o--){let{fromA:a,toA:l,fromB:c,toB:h}=r[o],u=n.lineAt(a,K.ByPosNoHeight,e,0,0),d=u.to>=l?u:n.lineAt(l,K.ByPosNoHeight,e,0,0);for(h+=d.to-l,l=d.to;o>0&&u.from<=r[o-1].toA;)a=r[o-1].fromA,c=r[o-1].fromB,o--,a<u.from&&(u=n.lineAt(a,K.ByPosNoHeight,e,0,0));c+=u.from-a,a=u.from;let p=_o.build(s,t,c,h);n=n.replace(a,l,p)}return n.updateHeight(s,0)}static empty(){return new Rt(0,0)}static of(t){if(t.length==1)return t[0];let e=0,s=t.length,r=0,n=0;for(;;)if(e==s)if(r>n*2){let a=t[e-1];a.break?t.splice(--e,1,a.left,null,a.right):t.splice(--e,1,a.left,a.right),s+=1+a.break,r-=a.size}else if(n>r*2){let a=t[s];a.break?t.splice(s,1,a.left,null,a.right):t.splice(s,1,a.left,a.right),s+=2+a.break,n-=a.size}else break;else if(r<n){let a=t[e++];a&&(r+=a.size)}else{let a=t[--s];a&&(n+=a.size)}let o=0;return t[e-1]==null?(o=1,e--):t[e]==null&&(o=1,s++),new wg(Ct.of(t.slice(0,e)),o,Ct.of(t.slice(s)))}}Ct.prototype.size=1;class Zc extends Ct{constructor(t,e,s){super(t,e),this.type=s}blockAt(t,e,s,r){return new $e(r,this.length,s,this.height,this.type)}lineAt(t,e,s,r,n){return this.blockAt(0,s,r,n)}forEachLine(t,e,s,r,n,o){t<=n+this.length&&e>=n&&o(this.blockAt(0,s,r,n))}updateHeight(t,e=0,s=!1,r){return r&&r.from<=e&&r.more&&this.setHeight(t,r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Rt extends Zc{constructor(t,e){super(t,e,W.Text),this.collapsed=0,this.widgetHeight=0}replace(t,e,s){let r=s[0];return s.length==1&&(r instanceof Rt||r instanceof ht&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof ht?r=new Rt(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):Ct.of(s)}updateHeight(t,e=0,s=!1,r){return r&&r.from<=e&&r.more?this.setHeight(t,r.heights[r.index++]):(s||this.outdated)&&this.setHeight(t,Math.max(this.widgetHeight,t.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class ht extends Ct{constructor(t){super(t,0)}lines(t,e){let s=t.lineAt(e).number,r=t.lineAt(e+this.length).number;return{firstLine:s,lastLine:r,lineHeight:this.height/(r-s+1)}}blockAt(t,e,s,r){let{firstLine:n,lastLine:o,lineHeight:a}=this.lines(e,r),l=Math.max(0,Math.min(o-n,Math.floor((t-s)/a))),{from:c,length:h}=e.line(n+l);return new $e(c,h,s+a*l,a,W.Text)}lineAt(t,e,s,r,n){if(e==K.ByHeight)return this.blockAt(t,s,r,n);if(e==K.ByPosNoHeight){let{from:u,to:d}=s.lineAt(t);return new $e(u,d-u,0,0,W.Text)}let{firstLine:o,lineHeight:a}=this.lines(s,n),{from:l,length:c,number:h}=s.lineAt(t);return new $e(l,c,r+a*(h-o),a,W.Text)}forEachLine(t,e,s,r,n,o){let{firstLine:a,lineHeight:l}=this.lines(s,n);for(let c=Math.max(t,n),h=Math.min(n+this.length,e);c<=h;){let u=s.lineAt(c);c==t&&(r+=l*(u.number-a)),o(new $e(u.from,u.length,r,l,W.Text)),r+=l,c=u.to+1}}replace(t,e,s){let r=this.length-e;if(r>0){let n=s[s.length-1];n instanceof ht?s[s.length-1]=new ht(n.length+r):s.push(null,new ht(r-1))}if(t>0){let n=s[0];n instanceof ht?s[0]=new ht(t+n.length):s.unshift(new ht(t-1),null)}return Ct.of(s)}decomposeLeft(t,e){e.push(new ht(t-1),null)}decomposeRight(t,e){e.push(null,new ht(this.length-t-1))}updateHeight(t,e=0,s=!1,r){let n=e+this.length;if(r&&r.from<=e+this.length&&r.more){let o=[],a=Math.max(e,r.from),l=-1,c=t.heightChanged;for(r.from>e&&o.push(new ht(r.from-e-1).updateHeight(t,e));a<=n&&r.more;){let u=t.doc.lineAt(a).length;o.length&&o.push(null);let d=r.heights[r.index++];l==-1?l=d:Math.abs(d-l)>=Ci&&(l=-2);let p=new Rt(u,d);p.outdated=!1,o.push(p),a+=u+1}a<=n&&o.push(null,new ht(n-a).updateHeight(t,a));let h=Ct.of(o);return t.heightChanged=c||l<0||Math.abs(h.height-this.height)>=Ci||Math.abs(l-this.lines(t.doc,e).lineHeight)>=Ci,h}else(s||this.outdated)&&(this.setHeight(t,t.heightForGap(e,e+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class wg extends Ct{constructor(t,e,s){super(t.length+e+s.length,t.height+s.height,e|(t.outdated||s.outdated?2:0)),this.left=t,this.right=s,this.size=t.size+s.size}get break(){return this.flags&1}blockAt(t,e,s,r){let n=s+this.left.height;return t<n?this.left.blockAt(t,e,s,r):this.right.blockAt(t,e,n,r+this.left.length+this.break)}lineAt(t,e,s,r,n){let o=r+this.left.height,a=n+this.left.length+this.break,l=e==K.ByHeight?t<o:t<a,c=l?this.left.lineAt(t,e,s,r,n):this.right.lineAt(t,e,s,o,a);if(this.break||(l?c.to<a:c.from>a))return c;let h=e==K.ByPosNoHeight?K.ByPosNoHeight:K.ByPos;return l?c.join(this.right.lineAt(a,h,s,o,a)):this.left.lineAt(a,h,s,r,n).join(c)}forEachLine(t,e,s,r,n,o){let a=r+this.left.height,l=n+this.left.length+this.break;if(this.break)t<l&&this.left.forEachLine(t,e,s,r,n,o),e>=l&&this.right.forEachLine(t,e,s,a,l,o);else{let c=this.lineAt(l,K.ByPos,s,r,n);t<c.from&&this.left.forEachLine(t,c.from-1,s,r,n,o),c.to>=t&&c.from<=e&&o(c),e>c.to&&this.right.forEachLine(c.to+1,e,s,a,l,o)}}replace(t,e,s){let r=this.left.length+this.break;if(e<r)return this.balanced(this.left.replace(t,e,s),this.right);if(t>this.left.length)return this.balanced(this.left,this.right.replace(t-r,e-r,s));let n=[];t>0&&this.decomposeLeft(t,n);let o=n.length;for(let a of s)n.push(a);if(t>0&&Ta(n,o-1),e<this.length){let a=n.length;this.decomposeRight(e,n),Ta(n,a)}return Ct.of(n)}decomposeLeft(t,e){let s=this.left.length;if(t<=s)return this.left.decomposeLeft(t,e);e.push(this.left),this.break&&(s++,t>=s&&e.push(null)),t>s&&this.right.decomposeLeft(t-s,e)}decomposeRight(t,e){let s=this.left.length,r=s+this.break;if(t>=r)return this.right.decomposeRight(t-r,e);t<s&&this.left.decomposeRight(t,e),this.break&&t<r&&e.push(null),e.push(this.right)}balanced(t,e){return t.size>2*e.size||e.size>2*t.size?Ct.of(this.break?[t,null,e]:[t,e]):(this.left=t,this.right=e,this.height=t.height+e.height,this.outdated=t.outdated||e.outdated,this.size=t.size+e.size,this.length=t.length+this.break+e.length,this)}updateHeight(t,e=0,s=!1,r){let{left:n,right:o}=this,a=e+n.length+this.break,l=null;return r&&r.from<=e+n.length&&r.more?l=n=n.updateHeight(t,e,s,r):n.updateHeight(t,e,s),r&&r.from<=a+o.length&&r.more?l=o=o.updateHeight(t,a,s,r):o.updateHeight(t,a,s),l?this.balanced(n,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Ta(i,t){let e,s;i[t]==null&&(e=i[t-1])instanceof ht&&(s=i[t+1])instanceof ht&&i.splice(t-1,3,new ht(e.length+1+s.length))}const Cg=5;class _o{constructor(t,e){this.pos=t,this.oracle=e,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=t}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(t,e){if(this.lineStart>-1){let s=Math.min(e,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof Rt?r.length+=s-this.pos:(s>this.pos||!this.isCovered)&&this.nodes.push(new Rt(s-this.pos,-1)),this.writtenTo=s,e>s&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=e}point(t,e,s){if(t<e||s.heightRelevant){let r=s.widget?s.widget.estimatedHeight:0;r<0&&(r=this.oracle.lineHeight);let n=e-t;s.block?this.addBlock(new Zc(n,r,s.type)):(n||r>=Cg)&&this.addLineDeco(r,n)}else e>t&&this.span(t,e);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:t,to:e}=this.oracle.doc.lineAt(this.pos);this.lineStart=t,this.lineEnd=e,this.writtenTo<t&&((this.writtenTo<t-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,t-1)),this.nodes.push(null)),this.pos>t&&this.nodes.push(new Rt(this.pos-t,-1)),this.writtenTo=this.pos}blankContent(t,e){let s=new ht(e-t);return this.oracle.doc.lineAt(t).to==e&&(s.flags|=4),s}ensureLine(){this.enterLine();let t=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(t instanceof Rt)return t;let e=new Rt(0,-1);return this.nodes.push(e),e}addBlock(t){this.enterLine(),t.type==W.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(t),this.writtenTo=this.pos=this.pos+t.length,t.type!=W.WidgetBefore&&(this.covering=t)}addLineDeco(t,e){let s=this.ensureLine();s.length+=e,s.collapsed+=e,s.widgetHeight=Math.max(s.widgetHeight,t),this.writtenTo=this.pos=this.pos+e}finish(t){let e=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(e instanceof Rt)&&!this.isCovered?this.nodes.push(new Rt(0,-1)):(this.writtenTo<this.pos||e==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let s=t;for(let r of this.nodes)r instanceof Rt&&r.updateHeight(this.oracle,s),s+=r?r.length:1;return this.nodes}static build(t,e,s,r){let n=new _o(s,t);return F.spans(e,s,r,n,0),n.finish(s)}}function Pg(i,t,e){let s=new Tg;return F.compare(i,t,e,s,0),s.changes}class Tg{constructor(){this.changes=[]}compareRange(){}comparePoint(t,e,s,r){(t<e||s&&s.heightRelevant||r&&r.heightRelevant)&&kn(t,e,this.changes,5)}}function Ag(i,t){let e=i.getBoundingClientRect(),s=i.ownerDocument,r=s.defaultView||window,n=Math.max(0,e.left),o=Math.min(r.innerWidth,e.right),a=Math.max(0,e.top),l=Math.min(r.innerHeight,e.bottom);for(let c=i.parentNode;c&&c!=s.body;)if(c.nodeType==1){let h=c,u=window.getComputedStyle(h);if((h.scrollHeight>h.clientHeight||h.scrollWidth>h.clientWidth)&&u.overflow!="visible"){let d=h.getBoundingClientRect();n=Math.max(n,d.left),o=Math.min(o,d.right),a=Math.max(a,d.top),l=c==i.parentNode?d.bottom:Math.min(l,d.bottom)}c=u.position=="absolute"||u.position=="fixed"?h.offsetParent:h.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:n-e.left,right:Math.max(n,o)-e.left,top:a-(e.top+t),bottom:Math.max(a,l)-(e.top+t)}}function Dg(i,t){let e=i.getBoundingClientRect();return{left:0,right:e.right-e.left,top:t,bottom:e.bottom-(e.top+t)}}class Lr{constructor(t,e,s){this.from=t,this.to=e,this.size=s}static same(t,e){if(t.length!=e.length)return!1;for(let s=0;s<t.length;s++){let r=t[s],n=e[s];if(r.from!=n.from||r.to!=n.to||r.size!=n.size)return!1}return!0}draw(t){return D.replace({widget:new Mg(this.size,t)}).range(this.from,this.to)}}class Mg extends fe{constructor(t,e){super(),this.size=t,this.vertical=e}eq(t){return t.size==this.size&&t.vertical==this.vertical}toDOM(){let t=document.createElement("div");return this.vertical?t.style.height=this.size+"px":(t.style.width=this.size+"px",t.style.height="2px",t.style.display="inline-block"),t}get estimatedHeight(){return this.vertical?this.size:-1}}class Aa{constructor(t){this.state=t,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scaler=Da,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Y.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let e=t.facet(go).some(s=>typeof s!="function"&&s.class=="cm-lineWrapping");this.heightOracle=new xg(e),this.stateDeco=t.facet(zs).filter(s=>typeof s!="function"),this.heightMap=Ct.empty().applyChanges(this.stateDeco,z.empty,this.heightOracle.setDoc(t.doc),[new se(0,0,0,t.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=D.set(this.lineGaps.map(s=>s.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let t=[this.viewport],{main:e}=this.state.selection;for(let s=0;s<=1;s++){let r=s?e.head:e.anchor;if(!t.some(({from:n,to:o})=>r>=n&&r<=o)){let{from:n,to:o}=this.lineBlockAt(r);t.push(new ai(n,o))}}this.viewports=t.sort((s,r)=>s.from-r.from),this.scaler=this.heightMap.height<=7e6?Da:new Rg(this.heightOracle.doc,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,t=>{this.viewportLines.push(this.scaler.scale==1?t:Ps(t,this.scaler))})}update(t,e=null){this.state=t.state;let s=this.stateDeco;this.stateDeco=this.state.facet(zs).filter(c=>typeof c!="function");let r=t.changedRanges,n=se.extendWithRanges(r,Pg(s,this.stateDeco,t?t.changes:rt.empty(this.state.doc.length))),o=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,t.startState.doc,this.heightOracle.setDoc(this.state.doc),n),this.heightMap.height!=o&&(t.flags|=2);let a=n.length?this.mapViewport(this.viewport,t.changes):this.viewport;(e&&(e.range.head<a.from||e.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,e));let l=!t.changes.empty||t.flags&2||a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,this.updateForViewport(),l&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>2e3<<1)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,t.changes))),t.flags|=this.computeVisibleRanges(),e&&(this.scrollTarget=e),!this.mustEnforceCursorAssoc&&t.selectionSet&&t.view.lineWrapping&&t.state.selection.main.empty&&t.state.selection.main.assoc&&!t.state.facet(Lc)&&(this.mustEnforceCursorAssoc=!0)}measure(t){let e=t.contentDOM,s=window.getComputedStyle(e),r=this.heightOracle,n=s.whiteSpace;this.defaultTextDirection=s.direction=="rtl"?Y.RTL:Y.LTR;let o=this.heightOracle.mustRefreshForWrapping(n),a=o||this.mustMeasureContent||this.contentDOMHeight!=e.clientHeight;this.contentDOMHeight=e.clientHeight,this.mustMeasureContent=!1;let l=0,c=0,h=parseInt(s.paddingTop)||0,u=parseInt(s.paddingBottom)||0;(this.paddingTop!=h||this.paddingBottom!=u)&&(this.paddingTop=h,this.paddingBottom=u,l|=10),this.editorWidth!=t.scrollDOM.clientWidth&&(r.lineWrapping&&(a=!0),this.editorWidth=t.scrollDOM.clientWidth,l|=8);let d=(this.printing?Dg:Ag)(e,this.paddingTop),p=d.top-this.pixelViewport.top,f=d.bottom-this.pixelViewport.bottom;this.pixelViewport=d;let g=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(g!=this.inView&&(this.inView=g,g&&(a=!0)),!this.inView&&!this.scrollTarget)return 0;let m=e.clientWidth;if((this.contentDOMWidth!=m||this.editorHeight!=t.scrollDOM.clientHeight)&&(this.contentDOMWidth=m,this.editorHeight=t.scrollDOM.clientHeight,l|=8),a){let S=t.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(S)&&(o=!0),o||r.lineWrapping&&Math.abs(m-this.contentDOMWidth)>r.charWidth){let{lineHeight:A,charWidth:x}=t.docView.measureTextSize();o=A>0&&r.refresh(n,A,x,m/x,S),o&&(t.docView.minWidth=0,l|=8)}p>0&&f>0?c=Math.max(p,f):p<0&&f<0&&(c=Math.min(p,f)),r.heightChanged=!1;for(let A of this.viewports){let x=A.from==this.viewport.from?S:t.docView.measureVisibleLineHeights(A);this.heightMap=(o?Ct.empty().applyChanges(this.stateDeco,z.empty,this.heightOracle,[new se(0,0,0,t.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new Sg(A.from,x))}r.heightChanged&&(l|=2)}let _=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return _&&(this.viewport=this.getViewport(c,this.scrollTarget)),this.updateForViewport(),(l&2||_)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>2e3<<1)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,t)),l|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,t.docView.enforceCursorAssoc()),l}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(t,e){let s=.5-Math.max(-.5,Math.min(.5,t/1e3/2)),r=this.heightMap,n=this.state.doc,{visibleTop:o,visibleBottom:a}=this,l=new ai(r.lineAt(o-s*1e3,K.ByHeight,n,0,0).from,r.lineAt(a+(1-s)*1e3,K.ByHeight,n,0,0).to);if(e){let{head:c}=e.range;if(c<l.from||c>l.to){let h=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),u=r.lineAt(c,K.ByPos,n,0,0),d;e.y=="center"?d=(u.top+u.bottom)/2-h/2:e.y=="start"||e.y=="nearest"&&c<l.from?d=u.top:d=u.bottom-h,l=new ai(r.lineAt(d-1e3/2,K.ByHeight,n,0,0).from,r.lineAt(d+h+1e3/2,K.ByHeight,n,0,0).to)}}return l}mapViewport(t,e){let s=e.mapPos(t.from,-1),r=e.mapPos(t.to,1);return new ai(this.heightMap.lineAt(s,K.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(r,K.ByPos,this.state.doc,0,0).to)}viewportIsAppropriate({from:t,to:e},s=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(t,K.ByPos,this.state.doc,0,0),{bottom:n}=this.heightMap.lineAt(e,K.ByPos,this.state.doc,0,0),{visibleTop:o,visibleBottom:a}=this;return(t==0||r<=o-Math.max(10,Math.min(-s,250)))&&(e==this.state.doc.length||n>=a+Math.max(10,Math.min(s,250)))&&r>o-2*1e3&&n<a+2*1e3}mapLineGaps(t,e){if(!t.length||e.empty)return t;let s=[];for(let r of t)e.touchesRange(r.from,r.to)||s.push(new Lr(e.mapPos(r.from),e.mapPos(r.to),r.size));return s}ensureLineGaps(t,e){let s=this.heightOracle.lineWrapping,r=s?1e4:2e3,n=r>>1,o=r<<1;if(this.defaultTextDirection!=Y.LTR&&!s)return[];let a=[],l=(c,h,u,d)=>{if(h-c<n)return;let p=this.state.selection.main,f=[p.from];p.empty||f.push(p.to);for(let m of f)if(m>c&&m<h){l(c,m-10,u,d),l(m+10,h,u,d);return}let g=Ig(t,m=>m.from>=u.from&&m.to<=u.to&&Math.abs(m.from-c)<n&&Math.abs(m.to-h)<n&&!f.some(_=>m.from<_&&m.to>_));if(!g){if(h<u.to&&e&&s&&e.visibleRanges.some(m=>m.from<=h&&m.to>=h)){let m=e.moveToLineBoundary(y.cursor(h),!1,!0).head;m>c&&(h=m)}g=new Lr(c,h,this.gapSize(u,c,h,d))}a.push(g)};for(let c of this.viewportLines){if(c.length<o)continue;let h=Og(c.from,c.to,this.stateDeco);if(h.total<o)continue;let u=this.scrollTarget?this.scrollTarget.range.head:null,d,p;if(s){let f=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,g,m;if(u!=null){let _=ci(h,u),S=((this.visibleBottom-this.visibleTop)/2+f)/c.height;g=_-S,m=_+S}else g=(this.visibleTop-c.top-f)/c.height,m=(this.visibleBottom-c.top+f)/c.height;d=li(h,g),p=li(h,m)}else{let f=h.total*this.heightOracle.charWidth,g=r*this.heightOracle.charWidth,m,_;if(u!=null){let S=ci(h,u),A=((this.pixelViewport.right-this.pixelViewport.left)/2+g)/f;m=S-A,_=S+A}else m=(this.pixelViewport.left-g)/f,_=(this.pixelViewport.right+g)/f;d=li(h,m),p=li(h,_)}d>c.from&&l(c.from,d,c,h),p<c.to&&l(p,c.to,c,h)}return a}gapSize(t,e,s,r){let n=ci(r,s)-ci(r,e);return this.heightOracle.lineWrapping?t.height*n:r.total*this.heightOracle.charWidth*n}updateLineGaps(t){Lr.same(t,this.lineGaps)||(this.lineGaps=t,this.lineGapDeco=D.set(t.map(e=>e.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let e=[];F.spans(t,this.viewport.from,this.viewport.to,{span(r,n){e.push({from:r,to:n})},point(){}},20);let s=e.length!=this.visibleRanges.length||this.visibleRanges.some((r,n)=>r.from!=e[n].from||r.to!=e[n].to);return this.visibleRanges=e,s?4:0}lineBlockAt(t){return t>=this.viewport.from&&t<=this.viewport.to&&this.viewportLines.find(e=>e.from<=t&&e.to>=t)||Ps(this.heightMap.lineAt(t,K.ByPos,this.state.doc,0,0),this.scaler)}lineBlockAtHeight(t){return Ps(this.heightMap.lineAt(this.scaler.fromDOM(t),K.ByHeight,this.state.doc,0,0),this.scaler)}elementAtHeight(t){return Ps(this.heightMap.blockAt(this.scaler.fromDOM(t),this.state.doc,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class ai{constructor(t,e){this.from=t,this.to=e}}function Og(i,t,e){let s=[],r=i,n=0;return F.spans(e,i,t,{span(){},point(o,a){o>r&&(s.push({from:r,to:o}),n+=o-r),r=a}},20),r<t&&(s.push({from:r,to:t}),n+=t-r),{total:n,ranges:s}}function li({total:i,ranges:t},e){if(e<=0)return t[0].from;if(e>=1)return t[t.length-1].to;let s=Math.floor(i*e);for(let r=0;;r++){let{from:n,to:o}=t[r],a=o-n;if(s<=a)return n+s;s-=a}}function ci(i,t){let e=0;for(let{from:s,to:r}of i.ranges){if(t<=r){e+=t-s;break}e+=r-s}return e/i.total}function Ig(i,t){for(let e of i)if(t(e))return e}const Da={toDOM(i){return i},fromDOM(i){return i},scale:1};class Rg{constructor(t,e,s){let r=0,n=0,o=0;this.viewports=s.map(({from:a,to:l})=>{let c=e.lineAt(a,K.ByPos,t,0,0).top,h=e.lineAt(l,K.ByPos,t,0,0).bottom;return r+=h-c,{from:a,to:l,top:c,bottom:h,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(e.height-r);for(let a of this.viewports)a.domTop=o+(a.top-n)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),n=a.bottom}toDOM(t){for(let e=0,s=0,r=0;;e++){let n=e<this.viewports.length?this.viewports[e]:null;if(!n||t<n.top)return r+(t-s)*this.scale;if(t<=n.bottom)return n.domTop+(t-n.top);s=n.bottom,r=n.domBottom}}fromDOM(t){for(let e=0,s=0,r=0;;e++){let n=e<this.viewports.length?this.viewports[e]:null;if(!n||t<n.domTop)return s+(t-r)/this.scale;if(t<=n.domBottom)return n.top+(t-n.domTop);s=n.bottom,r=n.domBottom}}}function Ps(i,t){if(t.scale==1)return i;let e=t.toDOM(i.top),s=t.toDOM(i.bottom);return new $e(i.from,i.length,e,s-e,Array.isArray(i.type)?i.type.map(r=>Ps(r,t)):i.type)}const hi=P.define({combine:i=>i.join(" ")}),Tn=P.define({combine:i=>i.indexOf(!0)>-1}),An=Pe.newName(),th=Pe.newName(),eh=Pe.newName(),sh={"&light":"."+th,"&dark":"."+eh};function Dn(i,t,e){return new Pe(t,{finish(s){return/&/.test(s)?s.replace(/&\w*/,r=>{if(r=="&")return i;if(!e||!e[r])throw new RangeError(`Unsupported selector: ${r}`);return e[r]}):i+" "+s}})}const Lg=Dn("."+An,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},sh);class Eg{constructor(t,e,s,r){this.typeOver=r,this.bounds=null,this.text="";let{impreciseHead:n,impreciseAnchor:o}=t.docView;if(t.state.readOnly&&e>-1)this.newSel=null;else if(e>-1&&(this.bounds=t.docView.domBoundsAround(e,s,0))){let a=n||o?[]:Bg(t),l=new Hc(a,t.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=zg(a,this.bounds.from)}else{let a=t.observer.selectionRange,l=n&&n.node==a.focusNode&&n.offset==a.focusOffset||!us(t.contentDOM,a.focusNode)?t.state.selection.main.head:t.docView.posFromDOM(a.focusNode,a.focusOffset),c=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!us(t.contentDOM,a.anchorNode)?t.state.selection.main.anchor:t.docView.posFromDOM(a.anchorNode,a.anchorOffset);this.newSel=y.single(c,l)}}}function ih(i,t){let e,{newSel:s}=t,r=i.state.selection.main;if(t.bounds){let{from:n,to:o}=t.bounds,a=r.from,l=null;(i.inputState.lastKeyCode===8&&i.inputState.lastKeyTime>Date.now()-100||C.android&&t.text.length<o-n)&&(a=r.to,l="end");let c=Ng(i.state.doc.sliceString(n,o,ke),t.text,a-n,l);c&&(C.chrome&&i.inputState.lastKeyCode==13&&c.toB==c.from+2&&t.text.slice(c.from,c.toB)==ke+ke&&c.toB--,e={from:n+c.from,to:n+c.toA,insert:z.of(t.text.slice(c.from,c.toB).split(ke))})}else s&&(!i.hasFocus&&i.state.facet(gr)||s.main.eq(r))&&(s=null);if(!e&&!s)return!1;if(!e&&t.typeOver&&!r.empty&&s&&s.main.empty?e={from:r.from,to:r.to,insert:i.state.doc.slice(r.from,r.to)}:e&&e.from>=r.from&&e.to<=r.to&&(e.from!=r.from||e.to!=r.to)&&r.to-r.from-(e.to-e.from)<=4?e={from:r.from,to:r.to,insert:i.state.doc.slice(r.from,e.from).append(e.insert).append(i.state.doc.slice(e.to,r.to))}:(C.mac||C.android)&&e&&e.from==e.to&&e.from==r.head-1&&/^\. ?$/.test(e.insert.toString())?(s&&e.insert.length==2&&(s=y.single(s.main.anchor-1,s.main.head-1)),e={from:r.from,to:r.to,insert:z.of([" "])}):C.chrome&&e&&e.from==e.to&&e.from==r.head&&e.insert.toString()==`
 `&&i.lineWrapping&&(s&&(s=y.single(s.main.anchor-1,s.main.head-1)),e={from:r.from,to:r.to,insert:z.of([" "])}),e){let n=i.state;if(C.ios&&i.inputState.flushIOSKey(i)||C.android&&(e.from==r.from&&e.to==r.to&&e.insert.length==1&&e.insert.lines==2&&as(i.contentDOM,"Enter",13)||e.from==r.from-1&&e.to==r.to&&e.insert.length==0&&as(i.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&e.insert.length==0&&as(i.contentDOM,"Delete",46)))return!0;let o=e.insert.toString();if(i.state.facet(Ic).some(c=>c(i,e.from,e.to,o)))return!0;i.inputState.composing>=0&&i.inputState.composing++;let a;if(e.from>=r.from&&e.to<=r.to&&e.to-e.from>=(r.to-r.from)/3&&(!s||s.main.empty&&s.main.from==e.from+e.insert.length)&&i.inputState.composing<0){let c=r.from<e.from?n.sliceDoc(r.from,e.from):"",h=r.to>e.to?n.sliceDoc(e.to,r.to):"";a=n.replaceSelection(i.state.toText(c+e.insert.sliceString(0,void 0,i.state.lineBreak)+h))}else{let c=n.changes(e),h=s&&!n.selection.main.eq(s.main)&&s.main.to<=c.newLength?s.main:void 0;if(n.selection.ranges.length>1&&i.inputState.composing>=0&&e.to<=r.to&&e.to>=r.to-10){let u=i.state.sliceDoc(e.from,e.to),d=Vc(i)||i.state.doc.lineAt(r.head),p=r.to-e.to,f=r.to-r.from;a=n.changeByRange(g=>{if(g.from==r.from&&g.to==r.to)return{changes:c,range:h||g.map(c)};let m=g.to-p,_=m-u.length;if(g.to-g.from!=f||i.state.sliceDoc(_,m)!=u||d&&g.to>=d.from&&g.from<=d.to)return{range:g};let S=n.changes({from:_,to:m,insert:e.insert}),A=g.to-r.to;return{changes:S,range:h?y.range(Math.max(0,h.anchor+A),Math.max(0,h.head+A)):g.map(S)}})}else a={changes:c,selection:h&&n.selection.replaceRange(h)}}let l="input.type";return i.composing&&(l+=".compose",i.inputState.compositionFirstChange&&(l+=".start",i.inputState.compositionFirstChange=!1)),i.dispatch(a,{scrollIntoView:!0,userEvent:l}),!0}else if(s&&!s.main.eq(r)){let n=!1,o="select";return i.inputState.lastSelectionTime>Date.now()-50&&(i.inputState.lastSelectionOrigin=="select"&&(n=!0),o=i.inputState.lastSelectionOrigin),i.dispatch({selection:s,scrollIntoView:n,userEvent:o}),!0}else return!1}function Ng(i,t,e,s){let r=Math.min(i.length,t.length),n=0;for(;n<r&&i.charCodeAt(n)==t.charCodeAt(n);)n++;if(n==r&&i.length==t.length)return null;let o=i.length,a=t.length;for(;o>0&&a>0&&i.charCodeAt(o-1)==t.charCodeAt(a-1);)o--,a--;if(s=="end"){let l=Math.max(0,n-Math.min(o,a));e-=o+l-n}if(o<n&&i.length<t.length){let l=e<=n&&e>=o?n-e:0;n-=l,a=n+(a-o),o=n}else if(a<n){let l=e<=n&&e>=a?n-e:0;n-=l,o=n+(o-a),a=n}return{from:n,toA:o,toB:a}}function Bg(i){let t=[];if(i.root.activeElement!=i.contentDOM)return t;let{anchorNode:e,anchorOffset:s,focusNode:r,focusOffset:n}=i.observer.selectionRange;return e&&(t.push(new ua(e,s)),(r!=e||n!=s)&&t.push(new ua(r,n))),t}function zg(i,t){if(i.length==0)return null;let e=i[0].pos,s=i.length==2?i[1].pos:e;return e>-1&&s>-1?y.single(e+t,s+t):null}const Gg={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Er=C.ie&&C.ie_version<=11;class Fg{constructor(t){this.view=t,this.active=!1,this.selectionRange=new Rm,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=t.contentDOM,this.observer=new MutationObserver(e=>{for(let s of e)this.queue.push(s);(C.ie&&C.ie_version<=11||C.ios&&t.composing)&&e.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),Er&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var e;((e=this.view.docView)===null||e===void 0?void 0:e.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(t.scrollDOM),this.resizeContent=new ResizeObserver(()=>this.view.requestMeasure()),this.resizeContent.observe(t.contentDOM)),this.addWindowListeners(this.win=t.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(e=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),e.length>0&&e[e.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(e=>{e.length>0&&e[e.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(t){this.view.inputState.runScrollHandlers(this.view,t),this.intersecting&&this.view.measure()}onScroll(t){this.intersecting&&this.flush(!1),this.onScrollChanged(t)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(t){if(this.gapIntersection&&(t.length!=this.gaps.length||this.gaps.some((e,s)=>e!=t[s]))){this.gapIntersection.disconnect();for(let e of t)this.gapIntersection.observe(e);this.gaps=t}}onSelectionChange(t){let e=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:s}=this,r=this.selectionRange;if(s.state.facet(gr)?s.root.activeElement!=this.dom:!wi(s.dom,r))return;let n=r.anchorNode&&s.docView.nearest(r.anchorNode);if(n&&n.ignoreEvent(t)){e||(this.selectionChanged=!1);return}(C.ie&&C.ie_version<=11||C.android&&C.chrome)&&!s.state.selection.main.empty&&r.focusNode&&Ei(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:t}=this,e=C.safari&&t.root.nodeType==11&&Dm(this.dom.ownerDocument)==this.dom&&Hg(this.view)||Li(t.root);if(!e||this.selectionRange.eq(e))return!1;let s=wi(this.dom,e);return s&&!this.selectionChanged&&t.inputState.lastFocusTime>Date.now()-200&&t.inputState.lastTouchTime<Date.now()-300&&Em(this.dom,e)?(this.view.inputState.lastFocusTime=0,t.docView.updateSelection(),!1):(this.selectionRange.setRange(e),s&&(this.selectionChanged=!0),!0)}setSelectionRange(t,e){this.selectionRange.set(t.node,t.offset,e.node,e.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let t=0,e=null;for(let s=this.dom;s;)if(s.nodeType==1)!e&&t<this.scrollTargets.length&&this.scrollTargets[t]==s?t++:e||(e=this.scrollTargets.slice(0,t)),e&&e.push(s),s=s.assignedSlot||s.parentNode;else if(s.nodeType==11)s=s.host;else break;if(t<this.scrollTargets.length&&!e&&(e=this.scrollTargets.slice(0,t)),e){for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);for(let s of this.scrollTargets=e)s.addEventListener("scroll",this.onScroll)}}ignore(t){if(!this.active)return t();try{return this.stop(),t()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Gg),Er&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Er&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(t,e){var s;if(!this.delayedAndroidKey){let r=()=>{let n=this.delayedAndroidKey;n&&(this.clearDelayedAndroidKey(),!this.flush()&&n.force&&as(this.dom,n.key,n.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||t=="Enter")&&(this.delayedAndroidKey={key:t,keyCode:e,force:this.lastChange<Date.now()-50||!!(!((s=this.delayedAndroidKey)===null||s===void 0)&&s.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}processRecords(){let t=this.queue;for(let n of this.observer.takeRecords())t.push(n);t.length&&(this.queue=[]);let e=-1,s=-1,r=!1;for(let n of t){let o=this.readMutation(n);o&&(o.typeOver&&(r=!0),e==-1?{from:e,to:s}=o:(e=Math.min(o.from,e),s=Math.max(o.to,s)))}return{from:e,to:s,typeOver:r}}readChange(){let{from:t,to:e,typeOver:s}=this.processRecords(),r=this.selectionChanged&&wi(this.dom,this.selectionRange);return t<0&&!r?null:(t>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new Eg(this.view,t,e,s))}flush(t=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;t&&this.readSelectionRange();let e=this.readChange();if(!e)return!1;let s=this.view.state,r=ih(this.view,e);return this.view.state==s&&this.view.update([]),r}readMutation(t){let e=this.view.docView.nearest(t.target);if(!e||e.ignoreMutation(t))return null;if(e.markDirty(t.type=="attributes"),t.type=="attributes"&&(e.dirty|=4),t.type=="childList"){let s=Ma(e,t.previousSibling||t.target.previousSibling,-1),r=Ma(e,t.nextSibling||t.target.nextSibling,1);return{from:s?e.posAfter(s):e.posAtStart,to:r?e.posBefore(r):e.posAtEnd,typeOver:!1}}else return t.type=="characterData"?{from:e.posAtStart,to:e.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}:null}setWindow(t){t!=this.win&&(this.removeWindowListeners(this.win),this.win=t,this.addWindowListeners(this.win))}addWindowListeners(t){t.addEventListener("resize",this.onResize),t.addEventListener("beforeprint",this.onPrint),t.addEventListener("scroll",this.onScroll),t.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(t){t.removeEventListener("scroll",this.onScroll),t.removeEventListener("resize",this.onResize),t.removeEventListener("beforeprint",this.onPrint),t.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var t,e,s,r;this.stop(),(t=this.intersection)===null||t===void 0||t.disconnect(),(e=this.gapIntersection)===null||e===void 0||e.disconnect(),(s=this.resizeScroll)===null||s===void 0||s.disconnect(),(r=this.resizeContent)===null||r===void 0||r.disconnect();for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function Ma(i,t,e){for(;t;){let s=q.get(t);if(s&&s.parent==i)return s;let r=t.parentNode;t=r!=i.dom?r:e>0?t.nextSibling:t.previousSibling}return null}function Hg(i){let t=null;function e(l){l.preventDefault(),l.stopImmediatePropagation(),t=l.getTargetRanges()[0]}if(i.contentDOM.addEventListener("beforeinput",e,!0),i.dom.ownerDocument.execCommand("indent"),i.contentDOM.removeEventListener("beforeinput",e,!0),!t)return null;let s=t.startContainer,r=t.startOffset,n=t.endContainer,o=t.endOffset,a=i.docView.domAtPos(i.state.selection.main.anchor);return Ei(a.node,a.offset,n,o)&&([s,r,n,o]=[n,o,s,r]),{anchorNode:s,anchorOffset:r,focusNode:n,focusOffset:o}}class T{constructor(t={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=t.dispatch||(e=>this.update([e])),this.dispatch=this.dispatch.bind(this),this._root=t.root||Lm(t.parent)||document,this.viewState=new Aa(t.state||B.create(t)),this.plugins=this.state.facet(ws).map(e=>new Or(e));for(let e of this.plugins)e.update(this);this.observer=new Fg(this),this.inputState=new hg(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new da(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),t.parent&&t.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...t){this._dispatch(t.length==1&&t[0]instanceof nt?t[0]:this.state.update(...t))}update(t){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let e=!1,s=!1,r,n=this.state;for(let c of t){if(c.startState!=n)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");n=c.state}if(this.destroyed){this.viewState.state=n;return}let o=this.observer.delayedAndroidKey,a=null;if(o?(this.observer.clearDelayedAndroidKey(),a=this.observer.readChange(),(a&&!this.state.doc.eq(n.doc)||!this.state.selection.eq(n.selection))&&(a=null)):this.observer.clear(),n.facet(B.phrases)!=this.state.facet(B.phrases))return this.setState(n);r=zi.create(this,n,t);let l=this.viewState.scrollTarget;try{this.updateState=2;for(let c of t){if(l&&(l=l.map(c.changes)),c.scrollIntoView){let{main:h}=c.state.selection;l=new Bi(h.empty?h:y.cursor(h.head,h.head>h.anchor?-1:1))}for(let h of c.effects)h.is(ca)&&(l=h.value)}this.viewState.update(r,l),this.bidiCache=Gi.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),e=this.docView.update(r),this.state.facet(Cs)!=this.styleModules&&this.mountStyles(),s=this.updateAttrs(),this.showAnnouncements(t),this.docView.updateSelection(e,t.some(c=>c.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(hi)!=r.state.facet(hi)&&(this.viewState.mustMeasureContent=!0),(e||s||l||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!r.empty)for(let c of this.state.facet($n))c(r);a&&!ih(this,a)&&o.force&&as(this.contentDOM,o.key,o.keyCode)}setState(t){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=t;return}this.updateState=2;let e=this.hasFocus;try{for(let s of this.plugins)s.destroy(this);this.viewState=new Aa(t),this.plugins=t.facet(ws).map(s=>new Or(s)),this.pluginMap.clear();for(let s of this.plugins)s.update(this);this.docView=new da(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}e&&this.focus(),this.requestMeasure()}updatePlugins(t){let e=t.startState.facet(ws),s=t.state.facet(ws);if(e!=s){let r=[];for(let n of s){let o=e.indexOf(n);if(o<0)r.push(new Or(n));else{let a=this.plugins[o];a.mustUpdate=t,r.push(a)}}for(let n of this.plugins)n.mustUpdate!=t&&n.destroy(this);this.plugins=r,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let r of this.plugins)r.mustUpdate=t;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this)}measure(t=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,t&&this.observer.forceFlush();let e=null,{scrollHeight:s,scrollTop:r,clientHeight:n}=this.scrollDOM,o=r>s-n-4?s:r;try{for(let a=0;;a++){this.updateState=1;let l=this.viewport,c=this.viewState.lineBlockAtHeight(o),h=this.viewState.measure(this);if(!h&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];h&4||([this.measureRequests,u]=[u,this.measureRequests]);let d=u.map(m=>{try{return m.read(this)}catch(_){return Bt(this.state,_),Oa}}),p=zi.create(this,this.state,[]),f=!1,g=!1;p.flags|=h,e?e.flags|=h:e=p,this.updateState=2,p.empty||(this.updatePlugins(p),this.inputState.update(p),this.updateAttrs(),f=this.docView.update(p));for(let m=0;m<u.length;m++)if(d[m]!=Oa)try{let _=u[m];_.write&&_.write(d[m],this)}catch(_){Bt(this.state,_)}if(this.viewState.editorHeight)if(this.viewState.scrollTarget)this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,g=!0;else{let m=this.viewState.lineBlockAt(c.from).top-c.top;(m>1||m<-1)&&(this.scrollDOM.scrollTop+=m,g=!0)}if(f&&this.docView.updateSelection(!0),this.viewport.from==l.from&&this.viewport.to==l.to&&!g&&this.measureRequests.length==0)break}}finally{this.updateState=0,this.measureScheduled=-1}if(e&&!e.empty)for(let a of this.state.facet($n))a(e)}get themeClasses(){return An+" "+(this.state.facet(Tn)?eh:th)+" "+this.state.facet(hi)}updateAttrs(){let t=Ia(this,Ec,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),e={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(gr)?"true":"false",class:"cm-content",style:`${C.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(e["aria-readonly"]="true"),Ia(this,go,e);let s=this.observer.ignore(()=>{let r=bn(this.contentDOM,this.contentAttrs,e),n=bn(this.dom,this.editorAttrs,t);return r||n});return this.editorAttrs=t,this.contentAttrs=e,s}showAnnouncements(t){let e=!0;for(let s of t)for(let r of s.effects)if(r.is(T.announce)){e&&(this.announceDOM.textContent=""),e=!1;let n=this.announceDOM.appendChild(document.createElement("div"));n.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(Cs),Pe.mount(this.root,this.styleModules.concat(Lg).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(t){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),t){if(this.measureRequests.indexOf(t)>-1)return;if(t.key!=null){for(let e=0;e<this.measureRequests.length;e++)if(this.measureRequests[e].key===t.key){this.measureRequests[e]=t;return}}this.measureRequests.push(t)}}plugin(t){let e=this.pluginMap.get(t);return(e===void 0||e&&e.spec!=t)&&this.pluginMap.set(t,e=this.plugins.find(s=>s.spec==t)||null),e&&e.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(t){return this.readMeasured(),this.viewState.elementAtHeight(t)}lineBlockAtHeight(t){return this.readMeasured(),this.viewState.lineBlockAtHeight(t)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(t){return this.viewState.lineBlockAt(t)}get contentHeight(){return this.viewState.contentHeight}moveByChar(t,e,s){return Rr(this,t,ya(this,t,e,s))}moveByGroup(t,e){return Rr(this,t,ya(this,t,e,s=>lg(this,t.head,s)))}moveToLineBoundary(t,e,s=!0){return ag(this,t,e,s)}moveVertically(t,e,s){return Rr(this,t,cg(this,t,e,s))}domAtPos(t){return this.docView.domAtPos(t)}posAtDOM(t,e=0){return this.docView.posFromDOM(t,e)}posAtCoords(t,e=!0){return this.readMeasured(),Wc(this,t,e)}coordsAtPos(t,e=1){this.readMeasured();let s=this.docView.coordsAt(t,e);if(!s||s.left==s.right)return s;let r=this.state.doc.lineAt(t),n=this.bidiSpans(r),o=n[ls.find(n,t-r.from,-1,e)];return uo(s,o.dir==Y.LTR==e>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(t){return!this.state.facet(Rc)||t<this.viewport.from||t>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(t))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(t){if(t.length>Vg)return Gc(t.length);let e=this.textDirectionAt(t.from);for(let r of this.bidiCache)if(r.from==t.from&&r.dir==e)return r.order;let s=qm(t.text,e);return this.bidiCache.push(new Gi(t.from,t.to,e,s)),s}get hasFocus(){var t;return(this.dom.ownerDocument.hasFocus()||C.safari&&((t=this.inputState)===null||t===void 0?void 0:t.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{gc(this.contentDOM),this.docView.updateSelection()})}setRoot(t){this._root!=t&&(this._root=t,this.observer.setWindow((t.nodeType==9?t:t.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let t of this.plugins)t.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(t,e={}){return ca.of(new Bi(typeof t=="number"?y.cursor(t):t,e.y,e.x,e.yMargin,e.xMargin))}static domEventHandlers(t){return X.define(()=>({}),{eventHandlers:t})}static theme(t,e){let s=Pe.newName(),r=[hi.of(s),Cs.of(Dn(`.${s}`,t))];return e&&e.dark&&r.push(Tn.of(!0)),r}static baseTheme(t){return ys.lowest(Cs.of(Dn("."+An,t,sh)))}static findFromDOM(t){var e;let s=t.querySelector(".cm-content"),r=s&&q.get(s)||q.get(t);return((e=r==null?void 0:r.rootView)===null||e===void 0?void 0:e.view)||null}}T.styleModule=Cs;T.inputHandler=Ic;T.perLineTextDirection=Rc;T.exceptionSink=Oc;T.updateListener=$n;T.editable=gr;T.mouseSelectionStyle=Mc;T.dragMovesSelection=Dc;T.clickAddsSelectionRange=Ac;T.decorations=zs;T.atomicRanges=Nc;T.scrollMargins=Bc;T.darkTheme=Tn;T.contentAttributes=go;T.editorAttributes=Ec;T.lineWrapping=T.contentAttributes.of({class:"cm-lineWrapping"});T.announce=I.define();const Vg=4096,Oa={};class Gi{constructor(t,e,s,r){this.from=t,this.to=e,this.dir=s,this.order=r}static update(t,e){if(e.empty)return t;let s=[],r=t.length?t[t.length-1].dir:Y.LTR;for(let n=Math.max(0,t.length-10);n<t.length;n++){let o=t[n];o.dir==r&&!e.touchesRange(o.from,o.to)&&s.push(new Gi(e.mapPos(o.from,1),e.mapPos(o.to,-1),o.dir,o.order))}return s}}function Ia(i,t,e){for(let s=i.state.facet(t),r=s.length-1;r>=0;r--){let n=s[r],o=typeof n=="function"?n(i):n;o&&vn(o,e)}return e}const Ug=C.mac?"mac":C.windows?"win":C.linux?"linux":"key";function Wg(i,t){const e=i.split(/-(?!$)/);let s=e[e.length-1];s=="Space"&&(s=" ");let r,n,o,a;for(let l=0;l<e.length-1;++l){const c=e[l];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))n=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))t=="mac"?a=!0:n=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(s="Alt-"+s),n&&(s="Ctrl-"+s),a&&(s="Meta-"+s),o&&(s="Shift-"+s),s}function ui(i,t,e){return t.altKey&&(i="Alt-"+i),t.ctrlKey&&(i="Ctrl-"+i),t.metaKey&&(i="Meta-"+i),e!==!1&&t.shiftKey&&(i="Shift-"+i),i}const Kg=ys.default(T.domEventHandlers({keydown(i,t){return nh(rh(t.state),i,t,"editor")}})),yo=P.define({enables:Kg}),Ra=new WeakMap;function rh(i){let t=i.facet(yo),e=Ra.get(t);return e||Ra.set(t,e=jg(t.reduce((s,r)=>s.concat(r),[]))),e}function qg(i,t,e){return nh(rh(i.state),t,i,e)}let ye=null;const Jg=4e3;function jg(i,t=Ug){let e=Object.create(null),s=Object.create(null),r=(o,a)=>{let l=s[o];if(l==null)s[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},n=(o,a,l,c)=>{var h,u;let d=e[o]||(e[o]=Object.create(null)),p=a.split(/ (?!$)/).map(m=>Wg(m,t));for(let m=1;m<p.length;m++){let _=p.slice(0,m).join(" ");r(_,!0),d[_]||(d[_]={preventDefault:!0,run:[S=>{let A=ye={view:S,prefix:_,scope:o};return setTimeout(()=>{ye==A&&(ye=null)},Jg),!0}]})}let f=p.join(" ");r(f,!1);let g=d[f]||(d[f]={preventDefault:!1,run:((u=(h=d._any)===null||h===void 0?void 0:h.run)===null||u===void 0?void 0:u.slice())||[]});l&&g.run.push(l),c&&(g.preventDefault=!0)};for(let o of i){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of a){let h=e[c]||(e[c]=Object.create(null));h._any||(h._any={preventDefault:!1,run:[]});for(let u in h)h[u].run.push(o.any)}let l=o[t]||o.key;if(l)for(let c of a)n(c,l,o.run,o.preventDefault),o.shift&&n(c,"Shift-"+l,o.shift,o.preventDefault)}return e}function nh(i,t,e,s){let r=Am(t),n=ut(r,0),o=Lt(n)==r.length&&r!=" ",a="",l=!1;ye&&ye.view==e&&ye.scope==s&&(a=ye.prefix+" ",(l=qc.indexOf(t.keyCode)<0)&&(ye=null));let c=new Set,h=f=>{if(f){for(let g of f.run)if(!c.has(g)&&(c.add(g),g(e,t)))return!0;f.preventDefault&&(l=!0)}return!1},u=i[s],d,p;if(u){if(h(u[a+ui(r,t,!o)]))return!0;if(o&&(t.altKey||t.metaKey||t.ctrlKey)&&!(C.windows&&t.ctrlKey&&t.altKey)&&(d=Te[t.keyCode])&&d!=r){if(h(u[a+ui(d,t,!0)]))return!0;if(t.shiftKey&&(p=Es[t.keyCode])!=r&&p!=d&&h(u[a+ui(p,t,!1)]))return!0}else if(o&&t.shiftKey&&h(u[a+ui(r,t,!0)]))return!0;if(h(u._any))return!0}return l}class Qs{constructor(t,e,s,r,n){this.className=t,this.left=e,this.top=s,this.width=r,this.height=n}draw(){let t=document.createElement("div");return t.className=this.className,this.adjust(t),t}update(t,e){return e.className!=this.className?!1:(this.adjust(t),!0)}adjust(t){t.style.left=this.left+"px",t.style.top=this.top+"px",this.width!=null&&(t.style.width=this.width+"px"),t.style.height=this.height+"px"}eq(t){return this.left==t.left&&this.top==t.top&&this.width==t.width&&this.height==t.height&&this.className==t.className}static forRange(t,e,s){if(s.empty){let r=t.coordsAtPos(s.head,s.assoc||1);if(!r)return[];let n=oh(t);return[new Qs(e,r.left-n.left,r.top-n.top,null,r.bottom-r.top)]}else return Yg(t,e,s)}}function oh(i){let t=i.scrollDOM.getBoundingClientRect();return{left:(i.textDirection==Y.LTR?t.left:t.right-i.scrollDOM.clientWidth)-i.scrollDOM.scrollLeft,top:t.top-i.scrollDOM.scrollTop}}function La(i,t,e){let s=y.cursor(t);return{from:Math.max(e.from,i.moveToLineBoundary(s,!1,!0).from),to:Math.min(e.to,i.moveToLineBoundary(s,!0,!0).from),type:W.Text}}function Ea(i,t){let e=i.lineBlockAt(t);if(Array.isArray(e.type)){for(let s of e.type)if(s.to>t||s.to==t&&(s.to==e.to||s.type==W.Text))return s}return e}function Yg(i,t,e){if(e.to<=i.viewport.from||e.from>=i.viewport.to)return[];let s=Math.max(e.from,i.viewport.from),r=Math.min(e.to,i.viewport.to),n=i.textDirection==Y.LTR,o=i.contentDOM,a=o.getBoundingClientRect(),l=oh(i),c=window.getComputedStyle(o.firstChild),h=a.left+parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)),u=a.right-parseInt(c.paddingRight),d=Ea(i,s),p=Ea(i,r),f=d.type==W.Text?d:null,g=p.type==W.Text?p:null;if(i.lineWrapping&&(f&&(f=La(i,s,f)),g&&(g=La(i,r,g))),f&&g&&f.from==g.from)return _(S(e.from,e.to,f));{let x=f?S(e.from,null,f):A(d,!1),k=g?S(null,e.to,g):A(p,!0),w=[];return(f||d).to<(g||p).from-1?w.push(m(h,x.bottom,u,k.top)):x.bottom<k.top&&i.elementAtHeight((x.bottom+k.top)/2).type==W.Text&&(x.bottom=k.top=(x.bottom+k.top)/2),_(x).concat(w).concat(_(k))}function m(x,k,w,O){return new Qs(t,x-l.left,k-l.top-.01,w-x,O-k+.01)}function _({top:x,bottom:k,horizontal:w}){let O=[];for(let V=0;V<w.length;V+=2)O.push(m(w[V],x,w[V+1],k));return O}function S(x,k,w){let O=1e9,V=-1e9,N=[];function L(it,kt,$t,lt,me){let ct=i.coordsAtPos(it,it==w.to?-2:2),Z=i.coordsAtPos($t,$t==w.from?2:-2);O=Math.min(ct.top,Z.top,O),V=Math.max(ct.bottom,Z.bottom,V),me==Y.LTR?N.push(n&&kt?h:ct.left,n&&lt?u:Z.right):N.push(!n&&lt?h:Z.left,!n&&kt?u:ct.right)}let H=x??w.from,st=k??w.to;for(let it of i.visibleRanges)if(it.to>H&&it.from<st)for(let kt=Math.max(it.from,H),$t=Math.min(it.to,st);;){let lt=i.state.doc.lineAt(kt);for(let me of i.bidiSpans(lt)){let ct=me.from+lt.from,Z=me.to+lt.from;if(ct>=$t)break;Z>kt&&L(Math.max(ct,kt),x==null&&ct<=H,Math.min(Z,$t),k==null&&Z>=st,me.dir)}if(kt=lt.to+1,kt>=$t)break}return N.length==0&&L(H,x==null,st,k==null,i.textDirection),{top:O,bottom:V,horizontal:N}}function A(x,k){let w=a.top+(k?x.top:x.bottom);return{top:w,bottom:w,horizontal:[]}}}function Qg(i,t){return i.constructor==t.constructor&&i.eq(t)}class Xg{constructor(t,e){this.view=t,this.layer=e,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=t.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),e.above&&this.dom.classList.add("cm-layer-above"),e.class&&this.dom.classList.add(e.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(t.state),t.requestMeasure(this.measureReq),e.mount&&e.mount(this.dom,t)}update(t){t.startState.facet(Pi)!=t.state.facet(Pi)&&this.setOrder(t.state),(this.layer.update(t,this.dom)||t.geometryChanged)&&t.view.requestMeasure(this.measureReq)}setOrder(t){let e=0,s=t.facet(Pi);for(;e<s.length&&s[e]!=this.layer;)e++;this.dom.style.zIndex=String((this.layer.above?150:-1)-e)}measure(){return this.layer.markers(this.view)}draw(t){if(t.length!=this.drawn.length||t.some((e,s)=>!Qg(e,this.drawn[s]))){let e=this.dom.firstChild,s=0;for(let r of t)r.update&&e&&r.constructor&&this.drawn[s].constructor&&r.update(e,this.drawn[s])?(e=e.nextSibling,s++):this.dom.insertBefore(r.draw(),e);for(;e;){let r=e.nextSibling;e.remove(),e=r}this.drawn=t}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Pi=P.define();function ah(i){return[X.define(t=>new Xg(t,i)),Pi.of(i)]}const lh=!C.ios,Gs=P.define({combine(i){return ae(i,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(t,e)=>Math.min(t,e),drawRangeCursor:(t,e)=>t||e})}});function Zg(i={}){return[Gs.of(i),t_,e_,s_,Lc.of(!0)]}function ch(i){return i.startState.facet(Gs)!=i.state.facet(Gs)}const t_=ah({above:!0,markers(i){let{state:t}=i,e=t.facet(Gs),s=[];for(let r of t.selection.ranges){let n=r==t.selection.main;if(r.empty?!n||lh:e.drawRangeCursor){let o=n?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=r.empty?r:y.cursor(r.head,r.head>r.anchor?-1:1);for(let l of Qs.forRange(i,o,a))s.push(l)}}return s},update(i,t){i.transactions.some(s=>s.selection)&&(t.style.animationName=t.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let e=ch(i);return e&&Na(i.state,t),i.docChanged||i.selectionSet||e},mount(i,t){Na(t.state,i)},class:"cm-cursorLayer"});function Na(i,t){t.style.animationDuration=i.facet(Gs).cursorBlinkRate+"ms"}const e_=ah({above:!1,markers(i){return i.state.selection.ranges.map(t=>t.empty?[]:Qs.forRange(i,"cm-selectionBackground",t)).reduce((t,e)=>t.concat(e))},update(i,t){return i.docChanged||i.selectionSet||i.viewportChanged||ch(i)},class:"cm-selectionLayer"}),hh={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};lh&&(hh[".cm-line"].caretColor="transparent !important");const s_=ys.highest(T.theme(hh)),uh=I.define({map(i,t){return i==null?null:t.mapPos(i)}}),Ts=ft.define({create(){return null},update(i,t){return i!=null&&(i=t.changes.mapPos(i)),t.effects.reduce((e,s)=>s.is(uh)?s.value:e,i)}}),i_=X.fromClass(class{constructor(i){this.view=i,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(i){var t;let e=i.state.field(Ts);e==null?this.cursor!=null&&((t=this.cursor)===null||t===void 0||t.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(i.startState.field(Ts)!=e||i.docChanged||i.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let i=this.view.state.field(Ts),t=i!=null&&this.view.coordsAtPos(i);if(!t)return null;let e=this.view.scrollDOM.getBoundingClientRect();return{left:t.left-e.left+this.view.scrollDOM.scrollLeft,top:t.top-e.top+this.view.scrollDOM.scrollTop,height:t.bottom-t.top}}drawCursor(i){this.cursor&&(i?(this.cursor.style.left=i.left+"px",this.cursor.style.top=i.top+"px",this.cursor.style.height=i.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(i){this.view.state.field(Ts)!=i&&this.view.dispatch({effects:uh.of(i)})}},{eventHandlers:{dragover(i){this.setDropPos(this.view.posAtCoords({x:i.clientX,y:i.clientY}))},dragleave(i){(i.target==this.view.contentDOM||!this.view.contentDOM.contains(i.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function r_(){return[Ts,i_]}function Ba(i,t,e,s,r){t.lastIndex=0;for(let n=i.iterRange(e,s),o=e,a;!n.next().done;o+=n.value.length)if(!n.lineBreak)for(;a=t.exec(n.value);)r(o+a.index,a)}function n_(i,t){let e=i.visibleRanges;if(e.length==1&&e[0].from==i.viewport.from&&e[0].to==i.viewport.to)return e;let s=[];for(let{from:r,to:n}of e)r=Math.max(i.state.doc.lineAt(r).from,r-t),n=Math.min(i.state.doc.lineAt(n).to,n+t),s.length&&s[s.length-1].to>=r?s[s.length-1].to=n:s.push({from:r,to:n});return s}class o_{constructor(t){const{regexp:e,decoration:s,decorate:r,boundary:n,maxLength:o=1e3}=t;if(!e.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=e,r)this.addMatch=(a,l,c,h)=>r(h,c,c+a[0].length,a,l);else if(typeof s=="function")this.addMatch=(a,l,c,h)=>{let u=s(a,l,c);u&&h(c,c+a[0].length,u)};else if(s)this.addMatch=(a,l,c,h)=>h(c,c+a[0].length,s);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=n,this.maxLength=o}createDeco(t){let e=new Ce,s=e.add.bind(e);for(let{from:r,to:n}of n_(t,this.maxLength))Ba(t.state.doc,this.regexp,r,n,(o,a)=>this.addMatch(a,t,o,s));return e.finish()}updateDeco(t,e){let s=1e9,r=-1;return t.docChanged&&t.changes.iterChanges((n,o,a,l)=>{l>t.view.viewport.from&&a<t.view.viewport.to&&(s=Math.min(a,s),r=Math.max(l,r))}),t.viewportChanged||r-s>1e3?this.createDeco(t.view):r>-1?this.updateRange(t.view,e.map(t.changes),s,r):e}updateRange(t,e,s,r){for(let n of t.visibleRanges){let o=Math.max(n.from,s),a=Math.min(n.to,r);if(a>o){let l=t.state.doc.lineAt(o),c=l.to<a?t.state.doc.lineAt(a):l,h=Math.max(n.from,l.from),u=Math.min(n.to,c.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){h=o;break}for(;a<c.to;a++)if(this.boundary.test(c.text[a-c.from])){u=a;break}}let d=[],p,f=(g,m,_)=>d.push(_.range(g,m));if(l==c)for(this.regexp.lastIndex=h-l.from;(p=this.regexp.exec(l.text))&&p.index<u-l.from;)this.addMatch(p,t,p.index+l.from,f);else Ba(t.state.doc,this.regexp,h,u,(g,m)=>this.addMatch(m,t,g,f));e=e.update({filterFrom:h,filterTo:u,filter:(g,m)=>g<h||m>u,add:d})}}return e}}const Mn=/x/.unicode!=null?"gu":"g",a_=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,Mn),l_={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Nr=null;function c_(){var i;if(Nr==null&&typeof document<"u"&&document.body){let t=document.body.style;Nr=((i=t.tabSize)!==null&&i!==void 0?i:t.MozTabSize)!=null}return Nr||!1}const Ti=P.define({combine(i){let t=ae(i,{render:null,specialChars:a_,addSpecialChars:null});return(t.replaceTabs=!c_())&&(t.specialChars=new RegExp("	|"+t.specialChars.source,Mn)),t.addSpecialChars&&(t.specialChars=new RegExp(t.specialChars.source+"|"+t.addSpecialChars.source,Mn)),t}});function h_(i={}){return[Ti.of(i),u_()]}let za=null;function u_(){return za||(za=X.fromClass(class{constructor(i){this.view=i,this.decorations=D.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(i.state.facet(Ti)),this.decorations=this.decorator.createDeco(i)}makeDecorator(i){return new o_({regexp:i.specialChars,decoration:(t,e,s)=>{let{doc:r}=e.state,n=ut(t[0],0);if(n==9){let o=r.lineAt(s),a=e.state.tabSize,l=js(o.text,a,s-o.from);return D.replace({widget:new m_((a-l%a)*this.view.defaultCharacterWidth)})}return this.decorationCache[n]||(this.decorationCache[n]=D.replace({widget:new f_(i,n)}))},boundary:i.replaceTabs?void 0:/[^]/})}update(i){let t=i.state.facet(Ti);i.startState.facet(Ti)!=t?(this.decorator=this.makeDecorator(t),this.decorations=this.decorator.createDeco(i.view)):this.decorations=this.decorator.updateDeco(i,this.decorations)}},{decorations:i=>i.decorations}))}const d_="•";function p_(i){return i>=32?d_:i==10?"␤":String.fromCharCode(9216+i)}class f_ extends fe{constructor(t,e){super(),this.options=t,this.code=e}eq(t){return t.code==this.code}toDOM(t){let e=p_(this.code),s=t.state.phrase("Control character")+" "+(l_[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,s,e);if(r)return r;let n=document.createElement("span");return n.textContent=e,n.title=s,n.setAttribute("aria-label",s),n.className="cm-specialChar",n}ignoreEvent(){return!1}}class m_ extends fe{constructor(t){super(),this.width=t}eq(t){return t.width==this.width}toDOM(){let t=document.createElement("span");return t.textContent="	",t.className="cm-tab",t.style.width=this.width+"px",t}ignoreEvent(){return!1}}function g_(){return y_}const __=D.line({class:"cm-activeLine"}),y_=X.fromClass(class{constructor(i){this.decorations=this.getDeco(i)}update(i){(i.docChanged||i.selectionSet)&&(this.decorations=this.getDeco(i.view))}getDeco(i){let t=-1,e=[];for(let s of i.state.selection.ranges){let r=i.lineBlockAt(s.head);r.from>t&&(e.push(__.range(r.from)),t=r.from)}return D.set(e)}},{decorations:i=>i.decorations});class v_ extends fe{constructor(t){super(),this.content=t}toDOM(){let t=document.createElement("span");return t.className="cm-placeholder",t.style.pointerEvents="none",t.appendChild(typeof this.content=="string"?document.createTextNode(this.content):this.content),typeof this.content=="string"?t.setAttribute("aria-label","placeholder "+this.content):t.setAttribute("aria-hidden","true"),t}ignoreEvent(){return!1}}function b_(i){return X.fromClass(class{constructor(t){this.view=t,this.placeholder=D.set([D.widget({widget:new v_(i),side:1}).range(0)])}get decorations(){return this.view.state.doc.length?D.none:this.placeholder}},{decorations:t=>t.decorations})}const On=2e3;function k_(i,t,e){let s=Math.min(t.line,e.line),r=Math.max(t.line,e.line),n=[];if(t.off>On||e.off>On||t.col<0||e.col<0){let o=Math.min(t.off,e.off),a=Math.max(t.off,e.off);for(let l=s;l<=r;l++){let c=i.doc.line(l);c.length<=a&&n.push(y.range(c.from+o,c.to+a))}}else{let o=Math.min(t.col,e.col),a=Math.max(t.col,e.col);for(let l=s;l<=r;l++){let c=i.doc.line(l),h=un(c.text,o,i.tabSize,!0);if(h<0)n.push(y.cursor(c.to));else{let u=un(c.text,a,i.tabSize);n.push(y.range(c.from+h,c.from+u))}}}return n}function $_(i,t){let e=i.coordsAtPos(i.viewport.from);return e?Math.round(Math.abs((e.left-t)/i.defaultCharacterWidth)):-1}function Ga(i,t){let e=i.posAtCoords({x:t.clientX,y:t.clientY},!1),s=i.state.doc.lineAt(e),r=e-s.from,n=r>On?-1:r==s.length?$_(i,t.clientX):js(s.text,i.state.tabSize,e-s.from);return{line:s.number,col:n,off:r}}function x_(i,t){let e=Ga(i,t),s=i.state.selection;return e?{update(r){if(r.docChanged){let n=r.changes.mapPos(r.startState.doc.line(e.line).from),o=r.state.doc.lineAt(n);e={line:o.number,col:e.col,off:Math.min(e.off,o.length)},s=s.map(r.changes)}},get(r,n,o){let a=Ga(i,r);if(!a)return s;let l=k_(i.state,e,a);return l.length?o?y.create(l.concat(s.ranges)):y.create(l):s}}:null}function S_(i){let t=(i==null?void 0:i.eventFilter)||(e=>e.altKey&&e.button==0);return T.mouseSelectionStyle.of((e,s)=>t(s)?x_(e,s):null)}const w_={Alt:[18,i=>i.altKey],Control:[17,i=>i.ctrlKey],Shift:[16,i=>i.shiftKey],Meta:[91,i=>i.metaKey]},C_={style:"cursor: crosshair"};function P_(i={}){let[t,e]=w_[i.key||"Alt"],s=X.fromClass(class{constructor(r){this.view=r,this.isDown=!1}set(r){this.isDown!=r&&(this.isDown=r,this.view.update([]))}},{eventHandlers:{keydown(r){this.set(r.keyCode==t||e(r))},keyup(r){(r.keyCode==t||!e(r))&&this.set(!1)},mousemove(r){this.set(e(r))}}});return[s,T.contentAttributes.of(r=>{var n;return!((n=r.plugin(s))===null||n===void 0)&&n.isDown?C_:null})]}const di="-10000px";class dh{constructor(t,e,s){this.facet=e,this.createTooltipView=s,this.input=t.state.facet(e),this.tooltips=this.input.filter(r=>r),this.tooltipViews=this.tooltips.map(s)}update(t){var e;let s=t.state.facet(this.facet),r=s.filter(o=>o);if(s===this.input){for(let o of this.tooltipViews)o.update&&o.update(t);return!1}let n=[];for(let o=0;o<r.length;o++){let a=r[o],l=-1;if(a){for(let c=0;c<this.tooltips.length;c++){let h=this.tooltips[c];h&&h.create==a.create&&(l=c)}if(l<0)n[o]=this.createTooltipView(a);else{let c=n[o]=this.tooltipViews[l];c.update&&c.update(t)}}}for(let o of this.tooltipViews)n.indexOf(o)<0&&(o.dom.remove(),(e=o.destroy)===null||e===void 0||e.call(o));return this.input=s,this.tooltips=r,this.tooltipViews=n,!0}}function T_(i){let{win:t}=i;return{top:0,left:0,bottom:t.innerHeight,right:t.innerWidth}}const Br=P.define({combine:i=>{var t,e,s;return{position:C.ios?"absolute":((t=i.find(r=>r.position))===null||t===void 0?void 0:t.position)||"fixed",parent:((e=i.find(r=>r.parent))===null||e===void 0?void 0:e.parent)||null,tooltipSpace:((s=i.find(r=>r.tooltipSpace))===null||s===void 0?void 0:s.tooltipSpace)||T_}}}),ph=X.fromClass(class{constructor(i){this.view=i,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let t=i.state.facet(Br);this.position=t.position,this.parent=t.parent,this.classes=i.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new dh(i,vo,e=>this.createTooltip(e)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(e=>{Date.now()>this.lastTransaction-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),i.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let i of this.manager.tooltipViews)this.intersectionObserver.observe(i.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(i){i.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(i);t&&this.observeIntersection();let e=t||i.geometryChanged,s=i.state.facet(Br);if(s.position!=this.position){this.position=s.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;e=!0}if(s.parent!=this.parent){this.parent&&this.container.remove(),this.parent=s.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);e=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);e&&this.maybeMeasure()}createTooltip(i){let t=i.create(this.view);if(t.dom.classList.add("cm-tooltip"),i.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let e=document.createElement("div");e.className="cm-tooltip-arrow",t.dom.appendChild(e)}return t.dom.style.position=this.position,t.dom.style.top=di,this.container.appendChild(t.dom),t.mount&&t.mount(this.view),t}destroy(){var i,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let e of this.manager.tooltipViews)e.dom.remove(),(i=e.destroy)===null||i===void 0||i.call(e);(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let i=this.view.dom.getBoundingClientRect();return{editor:i,parent:this.parent?this.container.getBoundingClientRect():i,pos:this.manager.tooltips.map((t,e)=>{let s=this.manager.tooltipViews[e];return s.getCoords?s.getCoords(t.pos):this.view.coordsAtPos(t.pos)}),size:this.manager.tooltipViews.map(({dom:t})=>t.getBoundingClientRect()),space:this.view.state.facet(Br).tooltipSpace(this.view)}}writeMeasure(i){let{editor:t,space:e}=i,s=[];for(let r=0;r<this.manager.tooltips.length;r++){let n=this.manager.tooltips[r],o=this.manager.tooltipViews[r],{dom:a}=o,l=i.pos[r],c=i.size[r];if(!l||l.bottom<=Math.max(t.top,e.top)||l.top>=Math.min(t.bottom,e.bottom)||l.right<Math.max(t.left,e.left)-.1||l.left>Math.min(t.right,e.right)+.1){a.style.top=di;continue}let h=n.arrow?o.dom.querySelector(".cm-tooltip-arrow"):null,u=h?7:0,d=c.right-c.left,p=c.bottom-c.top,f=o.offset||D_,g=this.view.textDirection==Y.LTR,m=c.width>e.right-e.left?g?e.left:e.right-c.width:g?Math.min(l.left-(h?14:0)+f.x,e.right-d):Math.max(e.left,l.left-d+(h?14:0)-f.x),_=!!n.above;!n.strictSide&&(_?l.top-(c.bottom-c.top)-f.y<e.top:l.bottom+(c.bottom-c.top)+f.y>e.bottom)&&_==e.bottom-l.bottom>l.top-e.top&&(_=!_);let S=(_?l.top-e.top:e.bottom-l.bottom)-u;if(S<p&&o.resize!==!1){if(S<this.view.defaultLineHeight){a.style.top=di;continue}a.style.height=(p=S)+"px"}else a.style.height&&(a.style.height="");let A=_?l.top-p-u-f.y:l.bottom+u+f.y,x=m+d;if(o.overlap!==!0)for(let k of s)k.left<x&&k.right>m&&k.top<A+p&&k.bottom>A&&(A=_?k.top-p-2-u:k.bottom+u+2);this.position=="absolute"?(a.style.top=A-i.parent.top+"px",a.style.left=m-i.parent.left+"px"):(a.style.top=A+"px",a.style.left=m+"px"),h&&(h.style.left=`${l.left+(g?f.x:-f.x)-(m+14-7)}px`),o.overlap!==!0&&s.push({left:m,top:A,right:x,bottom:A+p}),a.classList.toggle("cm-tooltip-above",_),a.classList.toggle("cm-tooltip-below",!_),o.positioned&&o.positioned(i.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let i of this.manager.tooltipViews)i.dom.style.top=di}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),A_=T.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:`${7}px`,width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:`${7}px solid transparent`,borderRight:`${7}px solid transparent`},".cm-tooltip-above &":{bottom:`-${7}px`,"&:before":{borderTop:`${7}px solid #bbb`},"&:after":{borderTop:`${7}px solid #f5f5f5`,bottom:"1px"}},".cm-tooltip-below &":{top:`-${7}px`,"&:before":{borderBottom:`${7}px solid #bbb`},"&:after":{borderBottom:`${7}px solid #f5f5f5`,top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),D_={x:0,y:0},vo=P.define({enables:[ph,A_]}),Fi=P.define();class bo{constructor(t){this.view=t,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new dh(t,Fi,e=>this.createHostedView(e))}static create(t){return new bo(t)}createHostedView(t){let e=t.create(this.view);return e.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(e.dom),this.mounted&&e.mount&&e.mount(this.view),e}mount(t){for(let e of this.manager.tooltipViews)e.mount&&e.mount(t);this.mounted=!0}positioned(t){for(let e of this.manager.tooltipViews)e.positioned&&e.positioned(t)}update(t){this.manager.update(t)}}const M_=vo.compute([Fi],i=>{let t=i.facet(Fi).filter(e=>e);return t.length===0?null:{pos:Math.min(...t.map(e=>e.pos)),end:Math.max(...t.filter(e=>e.end!=null).map(e=>e.end)),create:bo.create,above:t[0].above,arrow:t.some(e=>e.arrow)}});class O_{constructor(t,e,s,r,n){this.view=t,this.source=e,this.field=s,this.setHover=r,this.hoverTime=n,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:t.dom,time:0},this.checkHover=this.checkHover.bind(this),t.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),t.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let t=Date.now()-this.lastMove.time;t<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-t):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:t}=this,e=this.view.contentDOM.contains(t.target)?this.view.posAtCoords(t):null;if(e==null)return;let s=this.view.coordsAtPos(e);if(s==null||t.y<s.top||t.y>s.bottom||t.x<s.left-this.view.defaultCharacterWidth||t.x>s.right+this.view.defaultCharacterWidth)return;let r=this.view.bidiSpans(this.view.state.doc.lineAt(e)).find(a=>a.from<=e&&a.to>=e),n=r&&r.dir==Y.RTL?-1:1,o=this.source(this.view,e,t.x<s.left?-n:n);if(o!=null&&o.then){let a=this.pending={pos:e};o.then(l=>{this.pending==a&&(this.pending=null,l&&this.view.dispatch({effects:this.setHover.of(l)}))},l=>Bt(this.view.state,l,"hover tooltip"))}else o&&this.view.dispatch({effects:this.setHover.of(o)})}mousemove(t){var e;this.lastMove={x:t.clientX,y:t.clientY,target:t.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let s=this.active;if(s&&!Fa(this.lastMove.target)||this.pending){let{pos:r}=s||this.pending,n=(e=s==null?void 0:s.end)!==null&&e!==void 0?e:r;(r==n?this.view.posAtCoords(this.lastMove)!=r:!I_(this.view,r,n,t.clientX,t.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(t){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!Fa(t.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function Fa(i){for(let t=i;t;t=t.parentNode)if(t.nodeType==1&&t.classList.contains("cm-tooltip"))return!0;return!1}function I_(i,t,e,s,r,n){let o=document.createRange(),a=i.domAtPos(t),l=i.domAtPos(e);o.setEnd(l.node,l.offset),o.setStart(a.node,a.offset);let c=o.getClientRects();o.detach();for(let h=0;h<c.length;h++){let u=c[h];if(Math.max(u.top-r,r-u.bottom,u.left-s,s-u.right)<=n)return!0}return!1}function R_(i,t={}){let e=I.define(),s=ft.define({create(){return null},update(r,n){if(r&&(t.hideOnChange&&(n.docChanged||n.selection)||t.hideOn&&t.hideOn(n,r)))return null;if(r&&n.docChanged){let o=n.changes.mapPos(r.pos,-1,xt.TrackDel);if(o==null)return null;let a=Object.assign(Object.create(null),r);a.pos=o,r.end!=null&&(a.end=n.changes.mapPos(r.end)),r=a}for(let o of n.effects)o.is(e)&&(r=o.value),o.is(E_)&&(r=null);return r},provide:r=>Fi.from(r)});return[s,X.define(r=>new O_(r,i,s,e,t.hoverTime||300)),M_]}function L_(i,t){let e=i.plugin(ph);if(!e)return null;let s=e.manager.tooltips.indexOf(t);return s<0?null:e.manager.tooltipViews[s]}const E_=I.define(),Ha=P.define({combine(i){let t,e;for(let s of i)t=t||s.topContainer,e=e||s.bottomContainer;return{topContainer:t,bottomContainer:e}}});function Fs(i,t){let e=i.plugin(fh),s=e?e.specs.indexOf(t):-1;return s>-1?e.panels[s]:null}const fh=X.fromClass(class{constructor(i){this.input=i.state.facet(Hs),this.specs=this.input.filter(e=>e),this.panels=this.specs.map(e=>e(i));let t=i.state.facet(Ha);this.top=new pi(i,!0,t.topContainer),this.bottom=new pi(i,!1,t.bottomContainer),this.top.sync(this.panels.filter(e=>e.top)),this.bottom.sync(this.panels.filter(e=>!e.top));for(let e of this.panels)e.dom.classList.add("cm-panel"),e.mount&&e.mount()}update(i){let t=i.state.facet(Ha);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new pi(i.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new pi(i.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let e=i.state.facet(Hs);if(e!=this.input){let s=e.filter(l=>l),r=[],n=[],o=[],a=[];for(let l of s){let c=this.specs.indexOf(l),h;c<0?(h=l(i.view),a.push(h)):(h=this.panels[c],h.update&&h.update(i)),r.push(h),(h.top?n:o).push(h)}this.specs=s,this.panels=r,this.top.sync(n),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let s of this.panels)s.update&&s.update(i)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:i=>T.scrollMargins.of(t=>{let e=t.plugin(i);return e&&{top:e.top.scrollMargin(),bottom:e.bottom.scrollMargin()}})});class pi{constructor(t,e,s){this.view=t,this.top=e,this.container=s,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(t){for(let e of this.panels)e.destroy&&t.indexOf(e)<0&&e.destroy();this.panels=t,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let e=this.container||this.view.dom;e.insertBefore(this.dom,this.top?e.firstChild:null)}let t=this.dom.firstChild;for(let e of this.panels)if(e.dom.parentNode==this.dom){for(;t!=e.dom;)t=Va(t);t=t.nextSibling}else this.dom.insertBefore(e.dom,t);for(;t;)t=Va(t)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let t of this.classes.split(" "))t&&this.container.classList.remove(t);for(let t of(this.classes=this.view.themeClasses).split(" "))t&&this.container.classList.add(t)}}}function Va(i){let t=i.nextSibling;return i.remove(),t}const Hs=P.define({enables:fh});class pe extends Ve{compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}eq(t){return!1}destroy(t){}}pe.prototype.elementClass="";pe.prototype.toDOM=void 0;pe.prototype.mapMode=xt.TrackBefore;pe.prototype.startSide=pe.prototype.endSide=-1;pe.prototype.point=!0;const Ai=P.define(),N_={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>F.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Ms=P.define();function B_(i){return[mh(),Ms.of(Object.assign(Object.assign({},N_),i))]}const In=P.define({combine:i=>i.some(t=>t)});function mh(i){let t=[z_];return i&&i.fixed===!1&&t.push(In.of(!0)),t}const z_=X.fromClass(class{constructor(i){this.view=i,this.prevViewport=i.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=i.state.facet(Ms).map(t=>new Wa(i,t));for(let t of this.gutters)this.dom.appendChild(t.dom);this.fixed=!i.state.facet(In),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),i.scrollDOM.insertBefore(this.dom,i.contentDOM)}update(i){if(this.updateGutters(i)){let t=this.prevViewport,e=i.view.viewport,s=Math.min(t.to,e.to)-Math.max(t.from,e.from);this.syncGutters(s<(e.to-e.from)*.8)}i.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(In)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=i.view.viewport}syncGutters(i){let t=this.dom.nextSibling;i&&this.dom.remove();let e=F.iter(this.view.state.facet(Ai),this.view.viewport.from),s=[],r=this.gutters.map(n=>new G_(n,this.view.viewport,-this.view.documentPadding.top));for(let n of this.view.viewportLineBlocks){let o;if(Array.isArray(n.type)){for(let a of n.type)if(a.type==W.Text){o=a;break}}else o=n.type==W.Text?n:void 0;if(o){s.length&&(s=[]),gh(e,s,n.from);for(let a of r)a.line(this.view,o,s)}}for(let n of r)n.finish();i&&this.view.scrollDOM.insertBefore(this.dom,t)}updateGutters(i){let t=i.startState.facet(Ms),e=i.state.facet(Ms),s=i.docChanged||i.heightChanged||i.viewportChanged||!F.eq(i.startState.facet(Ai),i.state.facet(Ai),i.view.viewport.from,i.view.viewport.to);if(t==e)for(let r of this.gutters)r.update(i)&&(s=!0);else{s=!0;let r=[];for(let n of e){let o=t.indexOf(n);o<0?r.push(new Wa(this.view,n)):(this.gutters[o].update(i),r.push(this.gutters[o]))}for(let n of this.gutters)n.dom.remove(),r.indexOf(n)<0&&n.destroy();for(let n of r)this.dom.appendChild(n.dom);this.gutters=r}return s}destroy(){for(let i of this.gutters)i.destroy();this.dom.remove()}},{provide:i=>T.scrollMargins.of(t=>{let e=t.plugin(i);return!e||e.gutters.length==0||!e.fixed?null:t.textDirection==Y.LTR?{left:e.dom.offsetWidth}:{right:e.dom.offsetWidth}})});function Ua(i){return Array.isArray(i)?i:[i]}function gh(i,t,e){for(;i.value&&i.from<=e;)i.from==e&&t.push(i.value),i.next()}class G_{constructor(t,e,s){this.gutter=t,this.height=s,this.i=0,this.cursor=F.iter(t.markers,e.from)}line(t,e,s){let r=[];gh(this.cursor,r,e.from),s.length&&(r=r.concat(s));let n=this.gutter.config.lineMarker(t,e,r);n&&r.unshift(n);let o=this.gutter;if(r.length==0&&!o.config.renderEmptyElements)return;let a=e.top-this.height;if(this.i==o.elements.length){let l=new _h(t,e.height,a,r);o.elements.push(l),o.dom.appendChild(l.dom)}else o.elements[this.i].update(t,e.height,a,r);this.height=e.bottom,this.i++}finish(){let t=this.gutter;for(;t.elements.length>this.i;){let e=t.elements.pop();t.dom.removeChild(e.dom),e.destroy()}}}class Wa{constructor(t,e){this.view=t,this.config=e,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let s in e.domEventHandlers)this.dom.addEventListener(s,r=>{let n=r.target,o;if(n!=this.dom&&this.dom.contains(n)){for(;n.parentNode!=this.dom;)n=n.parentNode;let l=n.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=r.clientY;let a=t.lineBlockAtHeight(o-t.documentTop);e.domEventHandlers[s](t,a,r)&&r.preventDefault()});this.markers=Ua(e.markers(t)),e.initialSpacer&&(this.spacer=new _h(t,0,0,[e.initialSpacer(t)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(t){let e=this.markers;if(this.markers=Ua(this.config.markers(t.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],t);r!=this.spacer.markers[0]&&this.spacer.update(t.view,0,0,[r])}let s=t.view.viewport;return!F.eq(this.markers,e,s.from,s.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(t):!1)}destroy(){for(let t of this.elements)t.destroy()}}class _h{constructor(t,e,s,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(t,e,s,r)}update(t,e,s,r){this.height!=e&&(this.dom.style.height=(this.height=e)+"px"),this.above!=s&&(this.dom.style.marginTop=(this.above=s)?s+"px":""),F_(this.markers,r)||this.setMarkers(t,r)}setMarkers(t,e){let s="cm-gutterElement",r=this.dom.firstChild;for(let n=0,o=0;;){let a=o,l=n<e.length?e[n++]:null,c=!1;if(l){let h=l.elementClass;h&&(s+=" "+h);for(let u=o;u<this.markers.length;u++)if(this.markers[u].compare(l)){a=u,c=!0;break}}else a=this.markers.length;for(;o<a;){let h=this.markers[o++];if(h.toDOM){h.destroy(r);let u=r.nextSibling;r.remove(),r=u}}if(!l)break;l.toDOM&&(c?r=r.nextSibling:this.dom.insertBefore(l.toDOM(t),r)),c&&o++}this.dom.className=s,this.markers=e}destroy(){this.setMarkers(null,[])}}function F_(i,t){if(i.length!=t.length)return!1;for(let e=0;e<i.length;e++)if(!i[e].compare(t[e]))return!1;return!0}const H_=P.define(),ss=P.define({combine(i){return ae(i,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(t,e){let s=Object.assign({},t);for(let r in e){let n=s[r],o=e[r];s[r]=n?(a,l,c)=>n(a,l,c)||o(a,l,c):o}return s}})}});class zr extends pe{constructor(t){super(),this.number=t}eq(t){return this.number==t.number}toDOM(){return document.createTextNode(this.number)}}function Gr(i,t){return i.state.facet(ss).formatNumber(t,i.state)}const V_=Ms.compute([ss],i=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(t){return t.state.facet(H_)},lineMarker(t,e,s){return s.some(r=>r.toDOM)?null:new zr(Gr(t,t.state.doc.lineAt(e.from).number))},lineMarkerChange:t=>t.startState.facet(ss)!=t.state.facet(ss),initialSpacer(t){return new zr(Gr(t,Ka(t.state.doc.lines)))},updateSpacer(t,e){let s=Gr(e.view,Ka(e.view.state.doc.lines));return s==t.number?t:new zr(s)},domEventHandlers:i.facet(ss).domEventHandlers}));function U_(i={}){return[ss.of(i),mh(),V_]}function Ka(i){let t=9;for(;t<i;)t=t*10+9;return t}const W_=new class extends pe{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},K_=Ai.compute(["selection"],i=>{let t=[],e=-1;for(let s of i.selection.ranges){let r=i.doc.lineAt(s.head).from;r>e&&(e=r,t.push(W_.range(r)))}return F.of(t)});function q_(){return K_}const yh=1024;let J_=0;class Fr{constructor(t,e){this.from=t,this.to=e}}class R{constructor(t={}){this.id=J_++,this.perNode=!!t.perNode,this.deserialize=t.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(t){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof t!="function"&&(t=Ot.match(t)),e=>{let s=t(e);return s===void 0?null:[this,s]}}}R.closedBy=new R({deserialize:i=>i.split(" ")});R.openedBy=new R({deserialize:i=>i.split(" ")});R.group=new R({deserialize:i=>i.split(" ")});R.contextHash=new R({perNode:!0});R.lookAhead=new R({perNode:!0});R.mounted=new R({perNode:!0});const j_=Object.create(null);class Ot{constructor(t,e,s,r=0){this.name=t,this.props=e,this.id=s,this.flags=r}static define(t){let e=t.props&&t.props.length?Object.create(null):j_,s=(t.top?1:0)|(t.skipped?2:0)|(t.error?4:0)|(t.name==null?8:0),r=new Ot(t.name||"",e,t.id,s);if(t.props){for(let n of t.props)if(Array.isArray(n)||(n=n(r)),n){if(n[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");e[n[0].id]=n[1]}}return r}prop(t){return this.props[t.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(t){if(typeof t=="string"){if(this.name==t)return!0;let e=this.prop(R.group);return e?e.indexOf(t)>-1:!1}return this.id==t}static match(t){let e=Object.create(null);for(let s in t)for(let r of s.split(" "))e[r]=t[s];return s=>{for(let r=s.prop(R.group),n=-1;n<(r?r.length:0);n++){let o=e[n<0?s.name:r[n]];if(o)return o}}}}Ot.none=new Ot("",Object.create(null),0,8);class ko{constructor(t){this.types=t;for(let e=0;e<t.length;e++)if(t[e].id!=e)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...t){let e=[];for(let s of this.types){let r=null;for(let n of t){let o=n(s);o&&(r||(r=Object.assign({},s.props)),r[o[0].id]=o[1])}e.push(r?new Ot(s.name,r,s.id,s.flags):s)}return new ko(e)}}const fi=new WeakMap,qa=new WeakMap;var pt;(function(i){i[i.ExcludeBuffers=1]="ExcludeBuffers",i[i.IncludeAnonymous=2]="IncludeAnonymous",i[i.IgnoreMounts=4]="IgnoreMounts",i[i.IgnoreOverlays=8]="IgnoreOverlays"})(pt||(pt={}));class tt{constructor(t,e,s,r,n){if(this.type=t,this.children=e,this.positions=s,this.length=r,this.props=null,n&&n.length){this.props=Object.create(null);for(let[o,a]of n)this.props[typeof o=="number"?o:o.id]=a}}toString(){let t=this.prop(R.mounted);if(t&&!t.overlay)return t.tree.toString();let e="";for(let s of this.children){let r=s.toString();r&&(e&&(e+=","),e+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(e.length?"("+e+")":""):e}cursor(t=0){return new Ui(this.topNode,t)}cursorAt(t,e=0,s=0){let r=fi.get(this)||this.topNode,n=new Ui(r);return n.moveTo(t,e),fi.set(this,n._tree),n}get topNode(){return new ue(this,0,0,null)}resolve(t,e=0){let s=fs(fi.get(this)||this.topNode,t,e,!1);return fi.set(this,s),s}resolveInner(t,e=0){let s=fs(qa.get(this)||this.topNode,t,e,!0);return qa.set(this,s),s}iterate(t){let{enter:e,leave:s,from:r=0,to:n=this.length}=t;for(let o=this.cursor((t.mode||0)|pt.IncludeAnonymous);;){let a=!1;if(o.from<=n&&o.to>=r&&(o.type.isAnonymous||e(o)!==!1)){if(o.firstChild())continue;a=!0}for(;a&&s&&!o.type.isAnonymous&&s(o),!o.nextSibling();){if(!o.parent())return;a=!0}}}prop(t){return t.perNode?this.props?this.props[t.id]:void 0:this.type.prop(t)}get propValues(){let t=[];if(this.props)for(let e in this.props)t.push([+e,this.props[e]]);return t}balance(t={}){return this.children.length<=8?this:So(Ot.none,this.children,this.positions,0,this.children.length,0,this.length,(e,s,r)=>new tt(this.type,e,s,r,this.propValues),t.makeTree||((e,s,r)=>new tt(Ot.none,e,s,r)))}static build(t){return Q_(t)}}tt.empty=new tt(Ot.none,[],[],0);class $o{constructor(t,e){this.buffer=t,this.index=e}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new $o(this.buffer,this.index)}}class je{constructor(t,e,s){this.buffer=t,this.length=e,this.set=s}get type(){return Ot.none}toString(){let t=[];for(let e=0;e<this.buffer.length;)t.push(this.childString(e)),e=this.buffer[e+3];return t.join(",")}childString(t){let e=this.buffer[t],s=this.buffer[t+3],r=this.set.types[e],n=r.name;if(/\W/.test(n)&&!r.isError&&(n=JSON.stringify(n)),t+=4,s==t)return n;let o=[];for(;t<s;)o.push(this.childString(t)),t=this.buffer[t+3];return n+"("+o.join(",")+")"}findChild(t,e,s,r,n){let{buffer:o}=this,a=-1;for(let l=t;l!=e&&!(vh(n,r,o[l+1],o[l+2])&&(a=l,s>0));l=o[l+3]);return a}slice(t,e,s){let r=this.buffer,n=new Uint16Array(e-t),o=0;for(let a=t,l=0;a<e;){n[l++]=r[a++],n[l++]=r[a++]-s;let c=n[l++]=r[a++]-s;n[l++]=r[a++]-t,o=Math.max(o,c)}return new je(n,o,this.set)}}function vh(i,t,e,s){switch(i){case-2:return e<t;case-1:return s>=t&&e<t;case 0:return e<t&&s>t;case 1:return e<=t&&s>t;case 2:return s>t;case 4:return!0}}function bh(i,t){let e=i.childBefore(t);for(;e;){let s=e.lastChild;if(!s||s.to!=e.to)break;s.type.isError&&s.from==s.to?(i=e,e=s.prevSibling):e=s}return i}function fs(i,t,e,s){for(var r;i.from==i.to||(e<1?i.from>=t:i.from>t)||(e>-1?i.to<=t:i.to<t);){let o=!s&&i instanceof ue&&i.index<0?null:i.parent;if(!o)return i;i=o}let n=s?0:pt.IgnoreOverlays;if(s)for(let o=i,a=o.parent;a;o=a,a=o.parent)o instanceof ue&&o.index<0&&((r=a.enter(t,e,n))===null||r===void 0?void 0:r.from)!=o.from&&(i=a);for(;;){let o=i.enter(t,e,n);if(!o)return i;i=o}}class ue{constructor(t,e,s,r){this._tree=t,this.from=e,this.index=s,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(t,e,s,r,n=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,c=e>0?a.length:-1;t!=c;t+=e){let h=a[t],u=l[t]+o.from;if(vh(r,s,u,u+h.length)){if(h instanceof je){if(n&pt.ExcludeBuffers)continue;let d=h.findChild(0,h.buffer.length,e,s-u,r);if(d>-1)return new xe(new Y_(o,h,t,u),null,d)}else if(n&pt.IncludeAnonymous||!h.type.isAnonymous||xo(h)){let d;if(!(n&pt.IgnoreMounts)&&h.props&&(d=h.prop(R.mounted))&&!d.overlay)return new ue(d.tree,u,t,o);let p=new ue(h,u,t,o);return n&pt.IncludeAnonymous||!p.type.isAnonymous?p:p.nextChild(e<0?h.children.length-1:0,e,s,r)}}}if(n&pt.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?t=o.index+e:t=e<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(t){return this.nextChild(0,1,t,2)}childBefore(t){return this.nextChild(this._tree.children.length-1,-1,t,-2)}enter(t,e,s=0){let r;if(!(s&pt.IgnoreOverlays)&&(r=this._tree.prop(R.mounted))&&r.overlay){let n=t-this.from;for(let{from:o,to:a}of r.overlay)if((e>0?o<=n:o<n)&&(e<0?a>=n:a>n))return new ue(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,t,e,s)}nextSignificantParent(){let t=this;for(;t.type.isAnonymous&&t._parent;)t=t._parent;return t}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(t=0){return new Ui(this,t)}get tree(){return this._tree}toTree(){return this._tree}resolve(t,e=0){return fs(this,t,e,!1)}resolveInner(t,e=0){return fs(this,t,e,!0)}enterUnfinishedNodesBefore(t){return bh(this,t)}getChild(t,e=null,s=null){let r=Hi(this,t,e,s);return r.length?r[0]:null}getChildren(t,e=null,s=null){return Hi(this,t,e,s)}toString(){return this._tree.toString()}get node(){return this}matchContext(t){return Vi(this,t)}}function Hi(i,t,e,s){let r=i.cursor(),n=[];if(!r.firstChild())return n;if(e!=null){for(;!r.type.is(e);)if(!r.nextSibling())return n}for(;;){if(s!=null&&r.type.is(s))return n;if(r.type.is(t)&&n.push(r.node),!r.nextSibling())return s==null?n:[]}}function Vi(i,t,e=t.length-1){for(let s=i.parent;e>=0;s=s.parent){if(!s)return!1;if(!s.type.isAnonymous){if(t[e]&&t[e]!=s.name)return!1;e--}}return!0}class Y_{constructor(t,e,s,r){this.parent=t,this.buffer=e,this.index=s,this.start=r}}class xe{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(t,e,s){this.context=t,this._parent=e,this.index=s,this.type=t.buffer.set.types[t.buffer.buffer[s]]}child(t,e,s){let{buffer:r}=this.context,n=r.findChild(this.index+4,r.buffer[this.index+3],t,e-this.context.start,s);return n<0?null:new xe(this.context,this,n)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(t){return this.child(1,t,2)}childBefore(t){return this.child(-1,t,-2)}enter(t,e,s=0){if(s&pt.ExcludeBuffers)return null;let{buffer:r}=this.context,n=r.findChild(this.index+4,r.buffer[this.index+3],e>0?1:-1,t-this.context.start,e);return n<0?null:new xe(this.context,this,n)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(t){return this._parent?null:this.context.parent.nextChild(this.context.index+t,t,0,4)}get nextSibling(){let{buffer:t}=this.context,e=t.buffer[this.index+3];return e<(this._parent?t.buffer[this._parent.index+3]:t.buffer.length)?new xe(this.context,this._parent,e):this.externalSibling(1)}get prevSibling(){let{buffer:t}=this.context,e=this._parent?this._parent.index+4:0;return this.index==e?this.externalSibling(-1):new xe(this.context,this._parent,t.findChild(e,this.index,-1,0,4))}cursor(t=0){return new Ui(this,t)}get tree(){return null}toTree(){let t=[],e=[],{buffer:s}=this.context,r=this.index+4,n=s.buffer[this.index+3];if(n>r){let o=s.buffer[this.index+1];t.push(s.slice(r,n,o)),e.push(0)}return new tt(this.type,t,e,this.to-this.from)}resolve(t,e=0){return fs(this,t,e,!1)}resolveInner(t,e=0){return fs(this,t,e,!0)}enterUnfinishedNodesBefore(t){return bh(this,t)}toString(){return this.context.buffer.childString(this.index)}getChild(t,e=null,s=null){let r=Hi(this,t,e,s);return r.length?r[0]:null}getChildren(t,e=null,s=null){return Hi(this,t,e,s)}get node(){return this}matchContext(t){return Vi(this,t)}}class Ui{get name(){return this.type.name}constructor(t,e=0){if(this.mode=e,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,t instanceof ue)this.yieldNode(t);else{this._tree=t.context.parent,this.buffer=t.context;for(let s=t._parent;s;s=s._parent)this.stack.unshift(s.index);this.bufferNode=t,this.yieldBuf(t.index)}}yieldNode(t){return t?(this._tree=t,this.type=t.type,this.from=t.from,this.to=t.to,!0):!1}yieldBuf(t,e){this.index=t;let{start:s,buffer:r}=this.buffer;return this.type=e||r.set.types[r.buffer[t]],this.from=s+r.buffer[t+1],this.to=s+r.buffer[t+2],!0}yield(t){return t?t instanceof ue?(this.buffer=null,this.yieldNode(t)):(this.buffer=t.context,this.yieldBuf(t.index,t.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(t,e,s){if(!this.buffer)return this.yield(this._tree.nextChild(t<0?this._tree._tree.children.length-1:0,t,e,s,this.mode));let{buffer:r}=this.buffer,n=r.findChild(this.index+4,r.buffer[this.index+3],t,e-this.buffer.start,s);return n<0?!1:(this.stack.push(this.index),this.yieldBuf(n))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(t){return this.enterChild(1,t,2)}childBefore(t){return this.enterChild(-1,t,-2)}enter(t,e,s=this.mode){return this.buffer?s&pt.ExcludeBuffers?!1:this.enterChild(1,t,e):this.yield(this._tree.enter(t,e,s))}parent(){if(!this.buffer)return this.yieldNode(this.mode&pt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let t=this.mode&pt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(t)}sibling(t){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+t,t,0,4,this.mode)):!1;let{buffer:e}=this.buffer,s=this.stack.length-1;if(t<0){let r=s<0?0:this.stack[s]+4;if(this.index!=r)return this.yieldBuf(e.findChild(r,this.index,-1,0,4))}else{let r=e.buffer[this.index+3];if(r<(s<0?e.buffer.length:e.buffer[this.stack[s]+3]))return this.yieldBuf(r)}return s<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+t,t,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(t){let e,s,{buffer:r}=this;if(r){if(t>0){if(this.index<r.buffer.buffer.length)return!1}else for(let n=0;n<this.index;n++)if(r.buffer.buffer[n+3]<this.index)return!1;({index:e,parent:s}=r)}else({index:e,_parent:s}=this._tree);for(;s;{index:e,_parent:s}=s)if(e>-1)for(let n=e+t,o=t<0?-1:s._tree.children.length;n!=o;n+=t){let a=s._tree.children[n];if(this.mode&pt.IncludeAnonymous||a instanceof je||!a.type.isAnonymous||xo(a))return!1}return!0}move(t,e){if(e&&this.enterChild(t,0,4))return!0;for(;;){if(this.sibling(t))return!0;if(this.atLastNode(t)||!this.parent())return!1}}next(t=!0){return this.move(1,t)}prev(t=!0){return this.move(-1,t)}moveTo(t,e=0){for(;(this.from==this.to||(e<1?this.from>=t:this.from>t)||(e>-1?this.to<=t:this.to<t))&&this.parent(););for(;this.enterChild(1,t,e););return this}get node(){if(!this.buffer)return this._tree;let t=this.bufferNode,e=null,s=0;if(t&&t.context==this.buffer){t:for(let r=this.index,n=this.stack.length;n>=0;){for(let o=t;o;o=o._parent)if(o.index==r){if(r==this.index)return o;e=o,s=n+1;break t}r=this.stack[--n]}}for(let r=s;r<this.stack.length;r++)e=new xe(this.buffer,e,this.stack[r]);return this.bufferNode=new xe(this.buffer,e,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(t,e){for(let s=0;;){let r=!1;if(this.type.isAnonymous||t(this)!==!1){if(this.firstChild()){s++;continue}this.type.isAnonymous||(r=!0)}for(;r&&e&&e(this),r=this.type.isAnonymous,!this.nextSibling();){if(!s)return;this.parent(),s--,r=!0}}}matchContext(t){if(!this.buffer)return Vi(this.node,t);let{buffer:e}=this.buffer,{types:s}=e.set;for(let r=t.length-1,n=this.stack.length-1;r>=0;n--){if(n<0)return Vi(this.node,t,r);let o=s[e.buffer[this.stack[n]]];if(!o.isAnonymous){if(t[r]&&t[r]!=o.name)return!1;r--}}return!0}}function xo(i){return i.children.some(t=>t instanceof je||!t.type.isAnonymous||xo(t))}function Q_(i){var t;let{buffer:e,nodeSet:s,maxBufferLength:r=yh,reused:n=[],minRepeatType:o=s.types.length}=i,a=Array.isArray(e)?new $o(e,e.length):e,l=s.types,c=0,h=0;function u(x,k,w,O,V){let{id:N,start:L,end:H,size:st}=a,it=h;for(;st<0;)if(a.next(),st==-1){let ct=n[N];w.push(ct),O.push(L-x);return}else if(st==-3){c=N;return}else if(st==-4){h=N;return}else throw new RangeError(`Unrecognized record size: ${st}`);let kt=l[N],$t,lt,me=L-x;if(H-L<=r&&(lt=g(a.pos-k,V))){let ct=new Uint16Array(lt.size-lt.skip),Z=a.pos-lt.size,ce=ct.length;for(;a.pos>Z;)ce=m(lt.start,ct,ce);$t=new je(ct,H-lt.start,s),me=lt.start-x}else{let ct=a.pos-st;a.next();let Z=[],ce=[],Le=N>=o?N:-1,Xe=0,ei=H;for(;a.pos>ct;)Le>=0&&a.id==Le&&a.size>=0?(a.end<=ei-r&&(p(Z,ce,L,Xe,a.end,ei,Le,it),Xe=Z.length,ei=a.end),a.next()):u(L,ct,Z,ce,Le);if(Le>=0&&Xe>0&&Xe<Z.length&&p(Z,ce,L,Xe,L,ei,Le,it),Z.reverse(),ce.reverse(),Le>-1&&Xe>0){let Ho=d(kt);$t=So(kt,Z,ce,0,Z.length,0,H-L,Ho,Ho)}else $t=f(kt,Z,ce,H-L,it-H)}w.push($t),O.push(me)}function d(x){return(k,w,O)=>{let V=0,N=k.length-1,L,H;if(N>=0&&(L=k[N])instanceof tt){if(!N&&L.type==x&&L.length==O)return L;(H=L.prop(R.lookAhead))&&(V=w[N]+L.length+H)}return f(x,k,w,O,V)}}function p(x,k,w,O,V,N,L,H){let st=[],it=[];for(;x.length>O;)st.push(x.pop()),it.push(k.pop()+w-V);x.push(f(s.types[L],st,it,N-V,H-N)),k.push(V-w)}function f(x,k,w,O,V=0,N){if(c){let L=[R.contextHash,c];N=N?[L].concat(N):[L]}if(V>25){let L=[R.lookAhead,V];N=N?[L].concat(N):[L]}return new tt(x,k,w,O,N)}function g(x,k){let w=a.fork(),O=0,V=0,N=0,L=w.end-r,H={size:0,start:0,skip:0};t:for(let st=w.pos-x;w.pos>st;){let it=w.size;if(w.id==k&&it>=0){H.size=O,H.start=V,H.skip=N,N+=4,O+=4,w.next();continue}let kt=w.pos-it;if(it<0||kt<st||w.start<L)break;let $t=w.id>=o?4:0,lt=w.start;for(w.next();w.pos>kt;){if(w.size<0)if(w.size==-3)$t+=4;else break t;else w.id>=o&&($t+=4);w.next()}V=lt,O+=it,N+=$t}return(k<0||O==x)&&(H.size=O,H.start=V,H.skip=N),H.size>4?H:void 0}function m(x,k,w){let{id:O,start:V,end:N,size:L}=a;if(a.next(),L>=0&&O<o){let H=w;if(L>4){let st=a.pos-(L-4);for(;a.pos>st;)w=m(x,k,w)}k[--w]=H,k[--w]=N-x,k[--w]=V-x,k[--w]=O}else L==-3?c=O:L==-4&&(h=O);return w}let _=[],S=[];for(;a.pos>0;)u(i.start||0,i.bufferStart||0,_,S,-1);let A=(t=i.length)!==null&&t!==void 0?t:_.length?S[0]+_[0].length:0;return new tt(l[i.topID],_.reverse(),S.reverse(),A)}const Ja=new WeakMap;function Di(i,t){if(!i.isAnonymous||t instanceof je||t.type!=i)return 1;let e=Ja.get(t);if(e==null){e=1;for(let s of t.children){if(s.type!=i||!(s instanceof tt)){e=1;break}e+=Di(i,s)}Ja.set(t,e)}return e}function So(i,t,e,s,r,n,o,a,l){let c=0;for(let f=s;f<r;f++)c+=Di(i,t[f]);let h=Math.ceil(c*1.5/8),u=[],d=[];function p(f,g,m,_,S){for(let A=m;A<_;){let x=A,k=g[A],w=Di(i,f[A]);for(A++;A<_;A++){let O=Di(i,f[A]);if(w+O>=h)break;w+=O}if(A==x+1){if(w>h){let O=f[x];p(O.children,O.positions,0,O.children.length,g[x]+S);continue}u.push(f[x])}else{let O=g[A-1]+f[A-1].length-k;u.push(So(i,f,g,x,A,k,O,null,l))}d.push(k+S-n)}}return p(t,e,s,r,0),(a||l)(u,d,o)}class He{constructor(t,e,s,r,n=!1,o=!1){this.from=t,this.to=e,this.tree=s,this.offset=r,this.open=(n?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(t,e=[],s=!1){let r=[new He(0,t.length,t,0,!1,s)];for(let n of e)n.to>t.length&&r.push(n);return r}static applyChanges(t,e,s=128){if(!e.length)return t;let r=[],n=1,o=t.length?t[0]:null;for(let a=0,l=0,c=0;;a++){let h=a<e.length?e[a]:null,u=h?h.fromA:1e9;if(u-l>=s)for(;o&&o.from<u;){let d=o;if(l>=d.from||u<=d.to||c){let p=Math.max(d.from,l)-c,f=Math.min(d.to,u)-c;d=p>=f?null:new He(p,f,d.tree,d.offset+c,a>0,!!h)}if(d&&r.push(d),o.to>u)break;o=n<t.length?t[n++]:null}if(!h)break;l=h.toA,c=h.toA-h.toB}return r}}class kh{startParse(t,e,s){return typeof t=="string"&&(t=new X_(t)),s=s?s.length?s.map(r=>new Fr(r.from,r.to)):[new Fr(0,0)]:[new Fr(0,t.length)],this.createParse(t,e||[],s)}parse(t,e,s){let r=this.startParse(t,e,s);for(;;){let n=r.advance();if(n)return n}}}class X_{constructor(t){this.string=t}get length(){return this.string.length}chunk(t){return this.string.slice(t)}get lineChunks(){return!1}read(t,e){return this.string.slice(t,e)}}new R({perNode:!0});let Z_=0;class Qt{constructor(t,e,s){this.set=t,this.base=e,this.modified=s,this.id=Z_++}static define(t){if(t!=null&&t.base)throw new Error("Can not derive from a modified tag");let e=new Qt([],null,[]);if(e.set.push(e),t)for(let s of t.set)e.set.push(s);return e}static defineModifier(){let t=new Wi;return e=>e.modified.indexOf(t)>-1?e:Wi.get(e.base||e,e.modified.concat(t).sort((s,r)=>s.id-r.id))}}let ty=0;class Wi{constructor(){this.instances=[],this.id=ty++}static get(t,e){if(!e.length)return t;let s=e[0].instances.find(a=>a.base==t&&ey(e,a.modified));if(s)return s;let r=[],n=new Qt(r,t,e);for(let a of e)a.instances.push(n);let o=sy(e);for(let a of t.set)if(!a.modified.length)for(let l of o)r.push(Wi.get(a,l));return n}}function ey(i,t){return i.length==t.length&&i.every((e,s)=>e==t[s])}function sy(i){let t=[[]];for(let e=0;e<i.length;e++)for(let s=0,r=t.length;s<r;s++)t.push(t[s].concat(i[e]));return t.sort((e,s)=>s.length-e.length)}function $h(i){let t=Object.create(null);for(let e in i){let s=i[e];Array.isArray(s)||(s=[s]);for(let r of e.split(" "))if(r){let n=[],o=2,a=r;for(let u=0;;){if(a=="..."&&u>0&&u+3==r.length){o=1;break}let d=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!d)throw new RangeError("Invalid path: "+r);if(n.push(d[0]=="*"?"":d[0][0]=='"'?JSON.parse(d[0]):d[0]),u+=d[0].length,u==r.length)break;let p=r[u++];if(u==r.length&&p=="!"){o=0;break}if(p!="/")throw new RangeError("Invalid path: "+r);a=r.slice(u)}let l=n.length-1,c=n[l];if(!c)throw new RangeError("Invalid path: "+r);let h=new Ki(s,o,l>0?n.slice(0,l):null);t[c]=h.sort(t[c])}}return xh.add(t)}const xh=new R;class Ki{constructor(t,e,s,r){this.tags=t,this.mode=e,this.context=s,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(t){return!t||t.depth<this.depth?(this.next=t,this):(t.next=this.sort(t.next),t)}get depth(){return this.context?this.context.length:0}}Ki.empty=new Ki([],2,null);function Sh(i,t){let e=Object.create(null);for(let n of i)if(!Array.isArray(n.tag))e[n.tag.id]=n.class;else for(let o of n.tag)e[o.id]=n.class;let{scope:s,all:r=null}=t||{};return{style:n=>{let o=r;for(let a of n)for(let l of a.set){let c=e[l.id];if(c){o=o?o+" "+c:c;break}}return o},scope:s}}function iy(i,t){let e=null;for(let s of i){let r=s.style(t);r&&(e=e?e+" "+r:r)}return e}function ry(i,t,e,s=0,r=i.length){let n=new ny(s,Array.isArray(t)?t:[t],e);n.highlightRange(i.cursor(),s,r,"",n.highlighters),n.flush(r)}class ny{constructor(t,e,s){this.at=t,this.highlighters=e,this.span=s,this.class=""}startSpan(t,e){e!=this.class&&(this.flush(t),t>this.at&&(this.at=t),this.class=e)}flush(t){t>this.at&&this.class&&this.span(this.at,t,this.class)}highlightRange(t,e,s,r,n){let{type:o,from:a,to:l}=t;if(a>=s||l<=e)return;o.isTop&&(n=this.highlighters.filter(p=>!p.scope||p.scope(o)));let c=r,h=oy(t)||Ki.empty,u=iy(n,h.tags);if(u&&(c&&(c+=" "),c+=u,h.mode==1&&(r+=(r?" ":"")+u)),this.startSpan(t.from,c),h.opaque)return;let d=t.tree&&t.tree.prop(R.mounted);if(d&&d.overlay){let p=t.node.enter(d.overlay[0].from+a,1),f=this.highlighters.filter(m=>!m.scope||m.scope(d.tree.type)),g=t.firstChild();for(let m=0,_=a;;m++){let S=m<d.overlay.length?d.overlay[m]:null,A=S?S.from+a:l,x=Math.max(e,_),k=Math.min(s,A);if(x<k&&g)for(;t.from<k&&(this.highlightRange(t,x,k,r,n),this.startSpan(Math.min(k,t.to),c),!(t.to>=A||!t.nextSibling())););if(!S||A>s)break;_=S.to+a,_>e&&(this.highlightRange(p.cursor(),Math.max(e,S.from+a),Math.min(s,_),r,f),this.startSpan(_,c))}g&&t.parent()}else if(t.firstChild()){do if(!(t.to<=e)){if(t.from>=s)break;this.highlightRange(t,e,s,r,n),this.startSpan(Math.min(s,t.to),c)}while(t.nextSibling());t.parent()}}}function oy(i){let t=i.type.prop(xh);for(;t&&t.context&&!i.matchContext(t.context);)t=t.next;return t||null}const b=Qt.define,mi=b(),ge=b(),ja=b(ge),Ya=b(ge),_e=b(),gi=b(_e),Hr=b(_e),Yt=b(),Ee=b(Yt),Jt=b(),jt=b(),Rn=b(),$s=b(Rn),_i=b(),v={comment:mi,lineComment:b(mi),blockComment:b(mi),docComment:b(mi),name:ge,variableName:b(ge),typeName:ja,tagName:b(ja),propertyName:Ya,attributeName:b(Ya),className:b(ge),labelName:b(ge),namespace:b(ge),macroName:b(ge),literal:_e,string:gi,docString:b(gi),character:b(gi),attributeValue:b(gi),number:Hr,integer:b(Hr),float:b(Hr),bool:b(_e),regexp:b(_e),escape:b(_e),color:b(_e),url:b(_e),keyword:Jt,self:b(Jt),null:b(Jt),atom:b(Jt),unit:b(Jt),modifier:b(Jt),operatorKeyword:b(Jt),controlKeyword:b(Jt),definitionKeyword:b(Jt),moduleKeyword:b(Jt),operator:jt,derefOperator:b(jt),arithmeticOperator:b(jt),logicOperator:b(jt),bitwiseOperator:b(jt),compareOperator:b(jt),updateOperator:b(jt),definitionOperator:b(jt),typeOperator:b(jt),controlOperator:b(jt),punctuation:Rn,separator:b(Rn),bracket:$s,angleBracket:b($s),squareBracket:b($s),paren:b($s),brace:b($s),content:Yt,heading:Ee,heading1:b(Ee),heading2:b(Ee),heading3:b(Ee),heading4:b(Ee),heading5:b(Ee),heading6:b(Ee),contentSeparator:b(Yt),list:b(Yt),quote:b(Yt),emphasis:b(Yt),strong:b(Yt),link:b(Yt),monospace:b(Yt),strikethrough:b(Yt),inserted:b(),deleted:b(),changed:b(),invalid:b(),meta:_i,documentMeta:b(_i),annotation:b(_i),processingInstruction:b(_i),definition:Qt.defineModifier(),constant:Qt.defineModifier(),function:Qt.defineModifier(),standard:Qt.defineModifier(),local:Qt.defineModifier(),special:Qt.defineModifier()};Sh([{tag:v.link,class:"tok-link"},{tag:v.heading,class:"tok-heading"},{tag:v.emphasis,class:"tok-emphasis"},{tag:v.strong,class:"tok-strong"},{tag:v.keyword,class:"tok-keyword"},{tag:v.atom,class:"tok-atom"},{tag:v.bool,class:"tok-bool"},{tag:v.url,class:"tok-url"},{tag:v.labelName,class:"tok-labelName"},{tag:v.inserted,class:"tok-inserted"},{tag:v.deleted,class:"tok-deleted"},{tag:v.literal,class:"tok-literal"},{tag:v.string,class:"tok-string"},{tag:v.number,class:"tok-number"},{tag:[v.regexp,v.escape,v.special(v.string)],class:"tok-string2"},{tag:v.variableName,class:"tok-variableName"},{tag:v.local(v.variableName),class:"tok-variableName tok-local"},{tag:v.definition(v.variableName),class:"tok-variableName tok-definition"},{tag:v.special(v.variableName),class:"tok-variableName2"},{tag:v.definition(v.propertyName),class:"tok-propertyName tok-definition"},{tag:v.typeName,class:"tok-typeName"},{tag:v.namespace,class:"tok-namespace"},{tag:v.className,class:"tok-className"},{tag:v.macroName,class:"tok-macroName"},{tag:v.propertyName,class:"tok-propertyName"},{tag:v.operator,class:"tok-operator"},{tag:v.comment,class:"tok-comment"},{tag:v.meta,class:"tok-meta"},{tag:v.invalid,class:"tok-invalid"},{tag:v.punctuation,class:"tok-punctuation"}]);var Vr;const Vs=new R;function ay(i){return P.define({combine:i?t=>t.concat(i):void 0})}class Wt{constructor(t,e,s=[],r=""){this.data=t,this.name=r,B.prototype.hasOwnProperty("tree")||Object.defineProperty(B.prototype,"tree",{get(){return yt(this)}}),this.parser=e,this.extension=[De.of(this),B.languageData.of((n,o,a)=>n.facet(Qa(n,o,a)))].concat(s)}isActiveAt(t,e,s=-1){return Qa(t,e,s)==this.data}findRegions(t){let e=t.facet(De);if((e==null?void 0:e.data)==this.data)return[{from:0,to:t.doc.length}];if(!e||!e.allowsNesting)return[];let s=[],r=(n,o)=>{if(n.prop(Vs)==this.data){s.push({from:o,to:o+n.length});return}let a=n.prop(R.mounted);if(a){if(a.tree.prop(Vs)==this.data){if(a.overlay)for(let l of a.overlay)s.push({from:l.from+o,to:l.to+o});else s.push({from:o,to:o+n.length});return}else if(a.overlay){let l=s.length;if(r(a.tree,a.overlay[0].from+o),s.length>l)return}}for(let l=0;l<n.children.length;l++){let c=n.children[l];c instanceof tt&&r(c,n.positions[l]+o)}};return r(yt(t),0),s}get allowsNesting(){return!0}}Wt.setState=I.define();function Qa(i,t,e){let s=i.facet(De);if(!s)return null;let r=s.data;if(s.allowsNesting)for(let n=yt(i).topNode;n;n=n.enter(t,e,pt.ExcludeBuffers))r=n.type.prop(Vs)||r;return r}class qi extends Wt{constructor(t,e,s){super(t,e,[],s),this.parser=e}static define(t){let e=ay(t.languageData);return new qi(e,t.parser.configure({props:[Vs.add(s=>s.isTop?e:void 0)]}),t.name)}configure(t,e){return new qi(this.data,this.parser.configure(t),e||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function yt(i){let t=i.field(Wt.state,!1);return t?t.tree:tt.empty}class ly{constructor(t,e=t.length){this.doc=t,this.length=e,this.cursorPos=0,this.string="",this.cursor=t.iter()}syncTo(t){return this.string=this.cursor.next(t-this.cursorPos).value,this.cursorPos=t+this.string.length,this.cursorPos-this.string.length}chunk(t){return this.syncTo(t),this.string}get lineChunks(){return!0}read(t,e){let s=this.cursorPos-this.string.length;return t<s||e>=this.cursorPos?this.doc.sliceString(t,e):this.string.slice(t-s,e-s)}}let xs=null;class Ji{constructor(t,e,s=[],r,n,o,a,l){this.parser=t,this.state=e,this.fragments=s,this.tree=r,this.treeLen=n,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(t,e,s){return new Ji(t,e,[],tt.empty,0,s,[],null)}startParse(){return this.parser.startParse(new ly(this.state.doc),this.fragments)}work(t,e){return e!=null&&e>=this.state.doc.length&&(e=void 0),this.tree!=tt.empty&&this.isDone(e??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var s;if(typeof t=="number"){let r=Date.now()+t;t=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),e!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&e<this.state.doc.length&&this.parse.stopAt(e);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(He.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(s=this.parse.stoppedAt)!==null&&s!==void 0?s:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(e??this.state.doc.length))this.parse=this.startParse();else return!0;if(t())return!1}})}takeTree(){let t,e;this.parse&&(t=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&this.parse.stopAt(t),this.withContext(()=>{for(;!(e=this.parse.advance()););}),this.treeLen=t,this.tree=e,this.fragments=this.withoutTempSkipped(He.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(t){let e=xs;xs=this;try{return t()}finally{xs=e}}withoutTempSkipped(t){for(let e;e=this.tempSkipped.pop();)t=Xa(t,e.from,e.to);return t}changes(t,e){let{fragments:s,tree:r,treeLen:n,viewport:o,skipped:a}=this;if(this.takeTree(),!t.empty){let l=[];if(t.iterChangedRanges((c,h,u,d)=>l.push({fromA:c,toA:h,fromB:u,toB:d})),s=He.applyChanges(s,l),r=tt.empty,n=0,o={from:t.mapPos(o.from,-1),to:t.mapPos(o.to,1)},this.skipped.length){a=[];for(let c of this.skipped){let h=t.mapPos(c.from,1),u=t.mapPos(c.to,-1);h<u&&a.push({from:h,to:u})}}}return new Ji(this.parser,e,s,r,n,o,a,this.scheduleOn)}updateViewport(t){if(this.viewport.from==t.from&&this.viewport.to==t.to)return!1;this.viewport=t;let e=this.skipped.length;for(let s=0;s<this.skipped.length;s++){let{from:r,to:n}=this.skipped[s];r<t.to&&n>t.from&&(this.fragments=Xa(this.fragments,r,n),this.skipped.splice(s--,1))}return this.skipped.length>=e?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(t,e){this.skipped.push({from:t,to:e})}static getSkippingParser(t){return new class extends kh{createParse(e,s,r){let n=r[0].from,o=r[r.length-1].to;return{parsedPos:n,advance(){let l=xs;if(l){for(let c of r)l.tempSkipped.push(c);t&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,t]):t)}return this.parsedPos=o,new tt(Ot.none,[],[],o-n)},stoppedAt:null,stopAt(){}}}}}isDone(t){t=Math.min(t,this.state.doc.length);let e=this.fragments;return this.treeLen>=t&&e.length&&e[0].from==0&&e[0].to>=t}static get(){return xs}}function Xa(i,t,e){return He.applyChanges(i,[{fromA:t,toA:e,fromB:t,toB:e}])}class ms{constructor(t){this.context=t,this.tree=t.tree}apply(t){if(!t.docChanged&&this.tree==this.context.tree)return this;let e=this.context.changes(t.changes,t.state),s=this.context.treeLen==t.startState.doc.length?void 0:Math.max(t.changes.mapPos(this.context.treeLen),e.viewport.to);return e.work(20,s)||e.takeTree(),new ms(e)}static init(t){let e=Math.min(3e3,t.doc.length),s=Ji.create(t.facet(De).parser,t,{from:0,to:e});return s.work(20,e)||s.takeTree(),new ms(s)}}Wt.state=ft.define({create:ms.init,update(i,t){for(let e of t.effects)if(e.is(Wt.setState))return e.value;return t.startState.facet(De)!=t.state.facet(De)?ms.init(t.state):i.apply(t)}});let wh=i=>{let t=setTimeout(()=>i(),500);return()=>clearTimeout(t)};typeof requestIdleCallback<"u"&&(wh=i=>{let t=-1,e=setTimeout(()=>{t=requestIdleCallback(i,{timeout:500-100})},100);return()=>t<0?clearTimeout(e):cancelIdleCallback(t)});const Ur=typeof navigator<"u"&&(!((Vr=navigator.scheduling)===null||Vr===void 0)&&Vr.isInputPending)?()=>navigator.scheduling.isInputPending():null,cy=X.fromClass(class{constructor(t){this.view=t,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(t){let e=this.view.state.field(Wt.state).context;(e.updateViewport(t.view.viewport)||this.view.viewport.to>e.treeLen)&&this.scheduleWork(),t.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(e)}scheduleWork(){if(this.working)return;let{state:t}=this.view,e=t.field(Wt.state);(e.tree!=e.context.tree||!e.context.isDone(t.doc.length))&&(this.working=wh(this.work))}work(t){this.working=null;let e=Date.now();if(this.chunkEnd<e&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=e+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:s,viewport:{to:r}}=this.view,n=s.field(Wt.state);if(n.tree==n.context.tree&&n.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,t&&!Ur?Math.max(25,t.timeRemaining()-5):1e9),a=n.context.treeLen<r&&s.doc.length>r+1e3,l=n.context.work(()=>Ur&&Ur()||Date.now()>o,r+(a?0:1e5));this.chunkBudget-=Date.now()-e,(l||this.chunkBudget<=0)&&(n.context.takeTree(),this.view.dispatch({effects:Wt.setState.of(new ms(n.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(n.context)}checkAsyncSchedule(t){t.scheduleOn&&(this.workScheduled++,t.scheduleOn.then(()=>this.scheduleWork()).catch(e=>Bt(this.view.state,e)).then(()=>this.workScheduled--),t.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),De=P.define({combine(i){return i.length?i[0]:null},enables:i=>[Wt.state,cy,T.contentAttributes.compute([i],t=>{let e=t.facet(i);return e&&e.name?{"data-language":e.name}:{}})]});class hy{constructor(t,e=[]){this.language=t,this.support=e,this.extension=[t,e]}}const uy=P.define(),wo=P.define({combine:i=>{if(!i.length)return"  ";if(!/^(?: +|\t+)$/.test(i[0]))throw new Error("Invalid indent unit: "+JSON.stringify(i[0]));return i[0]}});function ji(i){let t=i.facet(wo);return t.charCodeAt(0)==9?i.tabSize*t.length:t.length}function Us(i,t){let e="",s=i.tabSize;if(i.facet(wo).charCodeAt(0)==9)for(;t>=s;)e+="	",t-=s;for(let r=0;r<t;r++)e+=" ";return e}function Co(i,t){i instanceof B&&(i=new _r(i));for(let s of i.state.facet(uy)){let r=s(i,t);if(r!==void 0)return r}let e=yt(i.state);return e?dy(i,e,t):null}class _r{constructor(t,e={}){this.state=t,this.options=e,this.unit=ji(t)}lineAt(t,e=1){let s=this.state.doc.lineAt(t),{simulateBreak:r,simulateDoubleBreak:n}=this.options;return r!=null&&r>=s.from&&r<=s.to?n&&r==t?{text:"",from:t}:(e<0?r<t:r<=t)?{text:s.text.slice(r-s.from),from:r}:{text:s.text.slice(0,r-s.from),from:s.from}:s}textAfterPos(t,e=1){if(this.options.simulateDoubleBreak&&t==this.options.simulateBreak)return"";let{text:s,from:r}=this.lineAt(t,e);return s.slice(t-r,Math.min(s.length,t+100-r))}column(t,e=1){let{text:s,from:r}=this.lineAt(t,e),n=this.countColumn(s,t-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(n+=o-this.countColumn(s,s.search(/\S|$/))),n}countColumn(t,e=t.length){return js(t,this.state.tabSize,e)}lineIndent(t,e=1){let{text:s,from:r}=this.lineAt(t,e),n=this.options.overrideIndentation;if(n){let o=n(r);if(o>-1)return o}return this.countColumn(s,s.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Ch=new R;function dy(i,t,e){return Ph(t.resolveInner(e).enterUnfinishedNodesBefore(e),e,i)}function py(i){return i.pos==i.options.simulateBreak&&i.options.simulateDoubleBreak}function fy(i){let t=i.type.prop(Ch);if(t)return t;let e=i.firstChild,s;if(e&&(s=e.type.prop(R.closedBy))){let r=i.lastChild,n=r&&s.indexOf(r.name)>-1;return o=>yy(o,!0,1,void 0,n&&!py(o)?r.from:void 0)}return i.parent==null?my:null}function Ph(i,t,e){for(;i;i=i.parent){let s=fy(i);if(s)return s(Po.create(e,t,i))}return null}function my(){return 0}class Po extends _r{constructor(t,e,s){super(t.state,t.options),this.base=t,this.pos=e,this.node=s}static create(t,e,s){return new Po(t,e,s)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let t=this.state.doc.lineAt(this.node.from);for(;;){let e=this.node.resolve(t.from);for(;e.parent&&e.parent.from==e.from;)e=e.parent;if(gy(e,this.node))break;t=this.state.doc.lineAt(e.from)}return this.lineIndent(t.from)}continue(){let t=this.node.parent;return t?Ph(t,this.pos,this.base):0}}function gy(i,t){for(let e=t;e;e=e.parent)if(i==e)return!0;return!1}function _y(i){let t=i.node,e=t.childAfter(t.from),s=t.lastChild;if(!e)return null;let r=i.options.simulateBreak,n=i.state.doc.lineAt(e.from),o=r==null||r<=n.from?n.to:Math.min(n.to,r);for(let a=e.to;;){let l=t.childAfter(a);if(!l||l==s)return null;if(!l.type.isSkipped)return l.from<o?e:null;a=l.to}}function yy(i,t,e,s,r){let n=i.textAfter,o=n.match(/^\s*/)[0].length,a=s&&n.slice(o,o+s.length)==s||r==i.pos+o,l=t?_y(i):null;return l?a?i.column(l.from):i.column(l.to):i.baseIndent+(a?0:i.unit*e)}function Za({except:i,units:t=1}={}){return e=>{let s=i&&i.test(e.textAfter);return e.baseIndent+(s?0:t*e.unit)}}const vy=200;function by(){return B.transactionFilter.of(i=>{if(!i.docChanged||!i.isUserEvent("input.type")&&!i.isUserEvent("input.complete"))return i;let t=i.startState.languageDataAt("indentOnInput",i.startState.selection.main.head);if(!t.length)return i;let e=i.newDoc,{head:s}=i.newSelection.main,r=e.lineAt(s);if(s>r.from+vy)return i;let n=e.sliceString(r.from,s);if(!t.some(c=>c.test(n)))return i;let{state:o}=i,a=-1,l=[];for(let{head:c}of o.selection.ranges){let h=o.doc.lineAt(c);if(h.from==a)continue;a=h.from;let u=Co(o,h.from);if(u==null)continue;let d=/^\s*/.exec(h.text)[0],p=Us(o,u);d!=p&&l.push({from:h.from,to:h.from+d.length,insert:p})}return l.length?[i,{changes:l,sequential:!0}]:i})}const ky=P.define(),Th=new R;function $y(i){let t=i.firstChild,e=i.lastChild;return t&&t.to<e.from?{from:t.to,to:e.type.isError?i.to:e.from}:null}function xy(i,t,e){let s=yt(i);if(s.length<e)return null;let r=s.resolveInner(e,1),n=null;for(let o=r;o;o=o.parent){if(o.to<=e||o.from>e)continue;if(n&&o.from<t)break;let a=o.type.prop(Th);if(a&&(o.to<s.length-50||s.length==i.doc.length||!Sy(o))){let l=a(o,i);l&&l.from<=e&&l.from>=t&&l.to>e&&(n=l)}}return n}function Sy(i){let t=i.lastChild;return t&&t.to==i.to&&t.type.isError}function Yi(i,t,e){for(let s of i.facet(ky)){let r=s(i,t,e);if(r)return r}return xy(i,t,e)}function Ah(i,t){let e=t.mapPos(i.from,1),s=t.mapPos(i.to,-1);return e>=s?void 0:{from:e,to:s}}const yr=I.define({map:Ah}),Xs=I.define({map:Ah});function Dh(i){let t=[];for(let{head:e}of i.state.selection.ranges)t.some(s=>s.from<=e&&s.to>=e)||t.push(i.lineBlockAt(e));return t}const We=ft.define({create(){return D.none},update(i,t){i=i.map(t.changes);for(let e of t.effects)e.is(yr)&&!wy(i,e.value.from,e.value.to)?i=i.update({add:[tl.range(e.value.from,e.value.to)]}):e.is(Xs)&&(i=i.update({filter:(s,r)=>e.value.from!=s||e.value.to!=r,filterFrom:e.value.from,filterTo:e.value.to}));if(t.selection){let e=!1,{head:s}=t.selection.main;i.between(s,s,(r,n)=>{r<s&&n>s&&(e=!0)}),e&&(i=i.update({filterFrom:s,filterTo:s,filter:(r,n)=>n<=s||r>=s}))}return i},provide:i=>T.decorations.from(i),toJSON(i,t){let e=[];return i.between(0,t.doc.length,(s,r)=>{e.push(s,r)}),e},fromJSON(i){if(!Array.isArray(i)||i.length%2)throw new RangeError("Invalid JSON for fold state");let t=[];for(let e=0;e<i.length;){let s=i[e++],r=i[e++];if(typeof s!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");t.push(tl.range(s,r))}return D.set(t,!0)}});function Qi(i,t,e){var s;let r=null;return(s=i.field(We,!1))===null||s===void 0||s.between(t,e,(n,o)=>{(!r||r.from>n)&&(r={from:n,to:o})}),r}function wy(i,t,e){let s=!1;return i.between(t,t,(r,n)=>{r==t&&n==e&&(s=!0)}),s}function Mh(i,t){return i.field(We,!1)?t:t.concat(I.appendConfig.of(Rh()))}const Cy=i=>{for(let t of Dh(i)){let e=Yi(i.state,t.from,t.to);if(e)return i.dispatch({effects:Mh(i.state,[yr.of(e),Oh(i,e)])}),!0}return!1},Py=i=>{if(!i.state.field(We,!1))return!1;let t=[];for(let e of Dh(i)){let s=Qi(i.state,e.from,e.to);s&&t.push(Xs.of(s),Oh(i,s,!1))}return t.length&&i.dispatch({effects:t}),t.length>0};function Oh(i,t,e=!0){let s=i.state.doc.lineAt(t.from).number,r=i.state.doc.lineAt(t.to).number;return T.announce.of(`${i.state.phrase(e?"Folded lines":"Unfolded lines")} ${s} ${i.state.phrase("to")} ${r}.`)}const Ty=i=>{let{state:t}=i,e=[];for(let s=0;s<t.doc.length;){let r=i.lineBlockAt(s),n=Yi(t,r.from,r.to);n&&e.push(yr.of(n)),s=(n?i.lineBlockAt(n.to):r).to+1}return e.length&&i.dispatch({effects:Mh(i.state,e)}),!!e.length},Ay=i=>{let t=i.state.field(We,!1);if(!t||!t.size)return!1;let e=[];return t.between(0,i.state.doc.length,(s,r)=>{e.push(Xs.of({from:s,to:r}))}),i.dispatch({effects:e}),!0},Dy=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:Cy},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:Py},{key:"Ctrl-Alt-[",run:Ty},{key:"Ctrl-Alt-]",run:Ay}],My={placeholderDOM:null,placeholderText:"…"},Ih=P.define({combine(i){return ae(i,My)}});function Rh(i){let t=[We,Ry];return i&&t.push(Ih.of(i)),t}const tl=D.replace({widget:new class extends fe{toDOM(i){let{state:t}=i,e=t.facet(Ih),s=n=>{let o=i.lineBlockAt(i.posAtDOM(n.target)),a=Qi(i.state,o.from,o.to);a&&i.dispatch({effects:Xs.of(a)}),n.preventDefault()};if(e.placeholderDOM)return e.placeholderDOM(i,s);let r=document.createElement("span");return r.textContent=e.placeholderText,r.setAttribute("aria-label",t.phrase("folded code")),r.title=t.phrase("unfold"),r.className="cm-foldPlaceholder",r.onclick=s,r}}}),Oy={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Wr extends pe{constructor(t,e){super(),this.config=t,this.open=e}eq(t){return this.config==t.config&&this.open==t.open}toDOM(t){if(this.config.markerDOM)return this.config.markerDOM(this.open);let e=document.createElement("span");return e.textContent=this.open?this.config.openText:this.config.closedText,e.title=t.state.phrase(this.open?"Fold line":"Unfold line"),e}}function Iy(i={}){let t=Object.assign(Object.assign({},Oy),i),e=new Wr(t,!0),s=new Wr(t,!1),r=X.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(De)!=o.state.facet(De)||o.startState.field(We,!1)!=o.state.field(We,!1)||yt(o.startState)!=yt(o.state)||t.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let a=new Ce;for(let l of o.viewportLineBlocks){let c=Qi(o.state,l.from,l.to)?s:Yi(o.state,l.from,l.to)?e:null;c&&a.add(l.from,l.from,c)}return a.finish()}}),{domEventHandlers:n}=t;return[r,B_({class:"cm-foldGutter",markers(o){var a;return((a=o.plugin(r))===null||a===void 0?void 0:a.markers)||F.empty},initialSpacer(){return new Wr(t,!1)},domEventHandlers:Object.assign(Object.assign({},n),{click:(o,a,l)=>{if(n.click&&n.click(o,a,l))return!0;let c=Qi(o.state,a.from,a.to);if(c)return o.dispatch({effects:Xs.of(c)}),!0;let h=Yi(o.state,a.from,a.to);return h?(o.dispatch({effects:yr.of(h)}),!0):!1}})}),Rh()]}const Ry=T.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class vr{constructor(t,e){this.specs=t;let s;function r(a){let l=Pe.newName();return(s||(s=Object.create(null)))["."+l]=a,l}const n=typeof e.all=="string"?e.all:e.all?r(e.all):void 0,o=e.scope;this.scope=o instanceof Wt?a=>a.prop(Vs)==o.data:o?a=>a==o:void 0,this.style=Sh(t.map(a=>({tag:a.tag,class:a.class||r(Object.assign({},a,{tag:null}))})),{all:n}).style,this.module=s?new Pe(s):null,this.themeType=e.themeType}static define(t,e){return new vr(t,e||{})}}const Ln=P.define(),Lh=P.define({combine(i){return i.length?[i[0]]:null}});function Kr(i){let t=i.facet(Ln);return t.length?t:i.facet(Lh)}function Ly(i,t){let e=[Ny],s;return i instanceof vr&&(i.module&&e.push(T.styleModule.of(i.module)),s=i.themeType),t!=null&&t.fallback?e.push(Lh.of(i)):s?e.push(Ln.computeN([T.darkTheme],r=>r.facet(T.darkTheme)==(s=="dark")?[i]:[])):e.push(Ln.of(i)),e}class Ey{constructor(t){this.markCache=Object.create(null),this.tree=yt(t.state),this.decorations=this.buildDeco(t,Kr(t.state))}update(t){let e=yt(t.state),s=Kr(t.state),r=s!=Kr(t.startState);e.length<t.view.viewport.to&&!r&&e.type==this.tree.type?this.decorations=this.decorations.map(t.changes):(e!=this.tree||t.viewportChanged||r)&&(this.tree=e,this.decorations=this.buildDeco(t.view,s))}buildDeco(t,e){if(!e||!this.tree.length)return D.none;let s=new Ce;for(let{from:r,to:n}of t.visibleRanges)ry(this.tree,e,(o,a,l)=>{s.add(o,a,this.markCache[l]||(this.markCache[l]=D.mark({class:l})))},r,n);return s.finish()}}const Ny=ys.high(X.fromClass(Ey,{decorations:i=>i.decorations})),By=vr.define([{tag:v.meta,color:"#404740"},{tag:v.link,textDecoration:"underline"},{tag:v.heading,textDecoration:"underline",fontWeight:"bold"},{tag:v.emphasis,fontStyle:"italic"},{tag:v.strong,fontWeight:"bold"},{tag:v.strikethrough,textDecoration:"line-through"},{tag:v.keyword,color:"#708"},{tag:[v.atom,v.bool,v.url,v.contentSeparator,v.labelName],color:"#219"},{tag:[v.literal,v.inserted],color:"#164"},{tag:[v.string,v.deleted],color:"#a11"},{tag:[v.regexp,v.escape,v.special(v.string)],color:"#e40"},{tag:v.definition(v.variableName),color:"#00f"},{tag:v.local(v.variableName),color:"#30a"},{tag:[v.typeName,v.namespace],color:"#085"},{tag:v.className,color:"#167"},{tag:[v.special(v.variableName),v.macroName],color:"#256"},{tag:v.definition(v.propertyName),color:"#00c"},{tag:v.comment,color:"#940"},{tag:v.invalid,color:"#f00"}]),zy=T.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Eh=1e4,Nh="()[]{}",Bh=P.define({combine(i){return ae(i,{afterCursor:!0,brackets:Nh,maxScanDistance:Eh,renderMatch:Hy})}}),Gy=D.mark({class:"cm-matchingBracket"}),Fy=D.mark({class:"cm-nonmatchingBracket"});function Hy(i){let t=[],e=i.matched?Gy:Fy;return t.push(e.range(i.start.from,i.start.to)),i.end&&t.push(e.range(i.end.from,i.end.to)),t}const Vy=ft.define({create(){return D.none},update(i,t){if(!t.docChanged&&!t.selection)return i;let e=[],s=t.state.facet(Bh);for(let r of t.state.selection.ranges){if(!r.empty)continue;let n=Zt(t.state,r.head,-1,s)||r.head>0&&Zt(t.state,r.head-1,1,s)||s.afterCursor&&(Zt(t.state,r.head,1,s)||r.head<t.state.doc.length&&Zt(t.state,r.head+1,-1,s));n&&(e=e.concat(s.renderMatch(n,t.state)))}return D.set(e,!0)},provide:i=>T.decorations.from(i)}),Uy=[Vy,zy];function Wy(i={}){return[Bh.of(i),Uy]}const Ky=new R;function En(i,t,e){let s=i.prop(t<0?R.openedBy:R.closedBy);if(s)return s;if(i.name.length==1){let r=e.indexOf(i.name);if(r>-1&&r%2==(t<0?1:0))return[e[r+t]]}return null}function Nn(i){let t=i.type.prop(Ky);return t?t(i.node):i}function Zt(i,t,e,s={}){let r=s.maxScanDistance||Eh,n=s.brackets||Nh,o=yt(i),a=o.resolveInner(t,e);for(let l=a;l;l=l.parent){let c=En(l.type,e,n);if(c&&l.from<l.to){let h=Nn(l);if(h&&(e>0?t>=h.from&&t<h.to:t>h.from&&t<=h.to))return qy(i,t,e,l,h,c,n)}}return Jy(i,t,e,o,a.type,r,n)}function qy(i,t,e,s,r,n,o){let a=s.parent,l={from:r.from,to:r.to},c=0,h=a==null?void 0:a.cursor();if(h&&(e<0?h.childBefore(s.from):h.childAfter(s.to)))do if(e<0?h.to<=s.from:h.from>=s.to){if(c==0&&n.indexOf(h.type.name)>-1&&h.from<h.to){let u=Nn(h);return{start:l,end:u?{from:u.from,to:u.to}:void 0,matched:!0}}else if(En(h.type,e,o))c++;else if(En(h.type,-e,o)){if(c==0){let u=Nn(h);return{start:l,end:u&&u.from<u.to?{from:u.from,to:u.to}:void 0,matched:!1}}c--}}while(e<0?h.prevSibling():h.nextSibling());return{start:l,matched:!1}}function Jy(i,t,e,s,r,n,o){let a=e<0?i.sliceDoc(t-1,t):i.sliceDoc(t,t+1),l=o.indexOf(a);if(l<0||l%2==0!=e>0)return null;let c={from:e<0?t-1:t,to:e>0?t+1:t},h=i.doc.iterRange(t,e>0?i.doc.length:0),u=0;for(let d=0;!h.next().done&&d<=n;){let p=h.value;e<0&&(d+=p.length);let f=t+d*e;for(let g=e>0?0:p.length-1,m=e>0?p.length:-1;g!=m;g+=e){let _=o.indexOf(p[g]);if(!(_<0||s.resolveInner(f+g,1).type!=r))if(_%2==0==e>0)u++;else{if(u==1)return{start:c,end:{from:f+g,to:f+g+1},matched:_>>1==l>>1};u--}}e>0&&(d+=p.length)}return h.done?{start:c,matched:!1}:null}const jy=Object.create(null),el=[Ot.none],sl=[],Yy=Object.create(null);for(let[i,t]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Yy[i]=Qy(jy,t);function qr(i,t){sl.indexOf(i)>-1||(sl.push(i),console.warn(t))}function Qy(i,t){let e=null;for(let n of t.split(".")){let o=i[n]||v[n];o?typeof o=="function"?e?e=o(e):qr(n,`Modifier ${n} used at start of tag`):e?qr(n,`Tag ${n} used as modifier`):e=o:qr(n,`Unknown highlighting tag ${n}`)}if(!e)return 0;let s=t.replace(/ /g,"_"),r=Ot.define({id:el.length,name:s,props:[$h({[s]:e})]});return el.push(r),r.id}const Xy=i=>{let t=Ao(i.state);return t.line?Zy(i):t.block?ev(i):!1};function To(i,t){return({state:e,dispatch:s})=>{if(e.readOnly)return!1;let r=i(t,e);return r?(s(e.update(r)),!0):!1}}const Zy=To(rv,0),tv=To(zh,0),ev=To((i,t)=>zh(i,t,iv(t)),0);function Ao(i,t=i.selection.main.head){let e=i.languageDataAt("commentTokens",t);return e.length?e[0]:{}}const Ss=50;function sv(i,{open:t,close:e},s,r){let n=i.sliceDoc(s-Ss,s),o=i.sliceDoc(r,r+Ss),a=/\s*$/.exec(n)[0].length,l=/^\s*/.exec(o)[0].length,c=n.length-a;if(n.slice(c-t.length,c)==t&&o.slice(l,l+e.length)==e)return{open:{pos:s-a,margin:a&&1},close:{pos:r+l,margin:l&&1}};let h,u;r-s<=2*Ss?h=u=i.sliceDoc(s,r):(h=i.sliceDoc(s,s+Ss),u=i.sliceDoc(r-Ss,r));let d=/^\s*/.exec(h)[0].length,p=/\s*$/.exec(u)[0].length,f=u.length-p-e.length;return h.slice(d,d+t.length)==t&&u.slice(f,f+e.length)==e?{open:{pos:s+d+t.length,margin:/\s/.test(h.charAt(d+t.length))?1:0},close:{pos:r-p-e.length,margin:/\s/.test(u.charAt(f-1))?1:0}}:null}function iv(i){let t=[];for(let e of i.selection.ranges){let s=i.doc.lineAt(e.from),r=e.to<=s.to?s:i.doc.lineAt(e.to),n=t.length-1;n>=0&&t[n].to>s.from?t[n].to=r.to:t.push({from:s.from,to:r.to})}return t}function zh(i,t,e=t.selection.ranges){let s=e.map(n=>Ao(t,n.from).block);if(!s.every(n=>n))return null;let r=e.map((n,o)=>sv(t,s[o],n.from,n.to));if(i!=2&&!r.every(n=>n))return{changes:t.changes(e.map((n,o)=>r[o]?[]:[{from:n.from,insert:s[o].open+" "},{from:n.to,insert:" "+s[o].close}]))};if(i!=1&&r.some(n=>n)){let n=[];for(let o=0,a;o<r.length;o++)if(a=r[o]){let l=s[o],{open:c,close:h}=a;n.push({from:c.pos-l.open.length,to:c.pos+c.margin},{from:h.pos-h.margin,to:h.pos+l.close.length})}return{changes:n}}return null}function rv(i,t,e=t.selection.ranges){let s=[],r=-1;for(let{from:n,to:o}of e){let a=s.length,l=1e9;for(let c=n;c<=o;){let h=t.doc.lineAt(c);if(h.from>r&&(n==o||o>h.from)){r=h.from;let u=Ao(t,c).line;if(!u)continue;let d=/^\s*/.exec(h.text)[0].length,p=d==h.length,f=h.text.slice(d,d+u.length)==u?d:-1;d<h.text.length&&d<l&&(l=d),s.push({line:h,comment:f,token:u,indent:d,empty:p,single:!1})}c=h.to+1}if(l<1e9)for(let c=a;c<s.length;c++)s[c].indent<s[c].line.text.length&&(s[c].indent=l);s.length==a+1&&(s[a].single=!0)}if(i!=2&&s.some(n=>n.comment<0&&(!n.empty||n.single))){let n=[];for(let{line:a,token:l,indent:c,empty:h,single:u}of s)(u||!h)&&n.push({from:a.from+c,insert:l+" "});let o=t.changes(n);return{changes:o,selection:t.selection.map(o,1)}}else if(i!=1&&s.some(n=>n.comment>=0)){let n=[];for(let{line:o,comment:a,token:l}of s)if(a>=0){let c=o.from+a,h=c+l.length;o.text[h-o.from]==" "&&h++,n.push({from:c,to:h})}return{changes:n}}return null}const Bn=Ie.define(),nv=Ie.define(),ov=P.define(),Gh=P.define({combine(i){return ae(i,{minDepth:100,newGroupDelay:500,joinToEvent:(t,e)=>e},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(t,e)=>(s,r)=>t(s,r)||e(s,r)})}});function av(i){let t=0;return i.iterChangedRanges((e,s)=>t=s),t}const Fh=ft.define({create(){return te.empty},update(i,t){let e=t.state.facet(Gh),s=t.annotation(Bn);if(s){let l=t.docChanged?y.single(av(t.changes)):void 0,c=Mt.fromTransaction(t,l),h=s.side,u=h==0?i.undone:i.done;return c?u=Xi(u,u.length,e.minDepth,c):u=Uh(u,t.startState.selection),new te(h==0?s.rest:u,h==0?u:s.rest)}let r=t.annotation(nv);if((r=="full"||r=="before")&&(i=i.isolate()),t.annotation(nt.addToHistory)===!1)return t.changes.empty?i:i.addMapping(t.changes.desc);let n=Mt.fromTransaction(t),o=t.annotation(nt.time),a=t.annotation(nt.userEvent);return n?i=i.addChanges(n,o,a,e,t):t.selection&&(i=i.addSelection(t.startState.selection,o,a,e.newGroupDelay)),(r=="full"||r=="after")&&(i=i.isolate()),i},toJSON(i){return{done:i.done.map(t=>t.toJSON()),undone:i.undone.map(t=>t.toJSON())}},fromJSON(i){return new te(i.done.map(Mt.fromJSON),i.undone.map(Mt.fromJSON))}});function lv(i={}){return[Fh,Gh.of(i),T.domEventHandlers({beforeinput(t,e){let s=t.inputType=="historyUndo"?Hh:t.inputType=="historyRedo"?zn:null;return s?(t.preventDefault(),s(e)):!1}})]}function br(i,t){return function({state:e,dispatch:s}){if(!t&&e.readOnly)return!1;let r=e.field(Fh,!1);if(!r)return!1;let n=r.pop(i,e,t);return n?(s(n),!0):!1}}const Hh=br(0,!1),zn=br(1,!1),cv=br(0,!0),hv=br(1,!0);class Mt{constructor(t,e,s,r,n){this.changes=t,this.effects=e,this.mapped=s,this.startSelection=r,this.selectionsAfter=n}setSelAfter(t){return new Mt(this.changes,this.effects,this.mapped,this.startSelection,t)}toJSON(){var t,e,s;return{changes:(t=this.changes)===null||t===void 0?void 0:t.toJSON(),mapped:(e=this.mapped)===null||e===void 0?void 0:e.toJSON(),startSelection:(s=this.startSelection)===null||s===void 0?void 0:s.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(t){return new Mt(t.changes&&rt.fromJSON(t.changes),[],t.mapped&&ee.fromJSON(t.mapped),t.startSelection&&y.fromJSON(t.startSelection),t.selectionsAfter.map(y.fromJSON))}static fromTransaction(t,e){let s=Ft;for(let r of t.startState.facet(ov)){let n=r(t);n.length&&(s=s.concat(n))}return!s.length&&t.changes.empty?null:new Mt(t.changes.invert(t.startState.doc),s,void 0,e||t.startState.selection,Ft)}static selection(t){return new Mt(void 0,Ft,void 0,void 0,t)}}function Xi(i,t,e,s){let r=t+1>e+20?t-e-1:0,n=i.slice(r,t);return n.push(s),n}function uv(i,t){let e=[],s=!1;return i.iterChangedRanges((r,n)=>e.push(r,n)),t.iterChangedRanges((r,n,o,a)=>{for(let l=0;l<e.length;){let c=e[l++],h=e[l++];a>=c&&o<=h&&(s=!0)}}),s}function dv(i,t){return i.ranges.length==t.ranges.length&&i.ranges.filter((e,s)=>e.empty!=t.ranges[s].empty).length===0}function Vh(i,t){return i.length?t.length?i.concat(t):i:t}const Ft=[],pv=200;function Uh(i,t){if(i.length){let e=i[i.length-1],s=e.selectionsAfter.slice(Math.max(0,e.selectionsAfter.length-pv));return s.length&&s[s.length-1].eq(t)?i:(s.push(t),Xi(i,i.length-1,1e9,e.setSelAfter(s)))}else return[Mt.selection([t])]}function fv(i){let t=i[i.length-1],e=i.slice();return e[i.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),e}function Jr(i,t){if(!i.length)return i;let e=i.length,s=Ft;for(;e;){let r=mv(i[e-1],t,s);if(r.changes&&!r.changes.empty||r.effects.length){let n=i.slice(0,e);return n[e-1]=r,n}else t=r.mapped,e--,s=r.selectionsAfter}return s.length?[Mt.selection(s)]:Ft}function mv(i,t,e){let s=Vh(i.selectionsAfter.length?i.selectionsAfter.map(a=>a.map(t)):Ft,e);if(!i.changes)return Mt.selection(s);let r=i.changes.map(t),n=t.mapDesc(i.changes,!0),o=i.mapped?i.mapped.composeDesc(n):n;return new Mt(r,I.mapEffects(i.effects,t),o,i.startSelection.map(n),s)}const gv=/^(input\.type|delete)($|\.)/;class te{constructor(t,e,s=0,r=void 0){this.done=t,this.undone=e,this.prevTime=s,this.prevUserEvent=r}isolate(){return this.prevTime?new te(this.done,this.undone):this}addChanges(t,e,s,r,n){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&t.changes&&(!s||gv.test(s))&&(!a.selectionsAfter.length&&e-this.prevTime<r.newGroupDelay&&r.joinToEvent(n,uv(a.changes,t.changes))||s=="input.type.compose")?o=Xi(o,o.length-1,r.minDepth,new Mt(t.changes.compose(a.changes),Vh(t.effects,a.effects),a.mapped,a.startSelection,Ft)):o=Xi(o,o.length,r.minDepth,t),new te(o,Ft,e,s)}addSelection(t,e,s,r){let n=this.done.length?this.done[this.done.length-1].selectionsAfter:Ft;return n.length>0&&e-this.prevTime<r&&s==this.prevUserEvent&&s&&/^select($|\.)/.test(s)&&dv(n[n.length-1],t)?this:new te(Uh(this.done,t),this.undone,e,s)}addMapping(t){return new te(Jr(this.done,t),Jr(this.undone,t),this.prevTime,this.prevUserEvent)}pop(t,e,s){let r=t==0?this.done:this.undone;if(r.length==0)return null;let n=r[r.length-1];if(s&&n.selectionsAfter.length)return e.update({selection:n.selectionsAfter[n.selectionsAfter.length-1],annotations:Bn.of({side:t,rest:fv(r)}),userEvent:t==0?"select.undo":"select.redo",scrollIntoView:!0});if(n.changes){let o=r.length==1?Ft:r.slice(0,r.length-1);return n.mapped&&(o=Jr(o,n.mapped)),e.update({changes:n.changes,selection:n.startSelection,effects:n.effects,annotations:Bn.of({side:t,rest:o}),filter:!1,userEvent:t==0?"undo":"redo",scrollIntoView:!0})}else return null}}te.empty=new te(Ft,Ft);const _v=[{key:"Mod-z",run:Hh,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:zn,preventDefault:!0},{linux:"Ctrl-Shift-z",run:zn,preventDefault:!0},{key:"Mod-u",run:cv,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:hv,preventDefault:!0}];function vs(i,t){return y.create(i.ranges.map(t),i.mainIndex)}function le(i,t){return i.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function Kt({state:i,dispatch:t},e){let s=vs(i.selection,e);return s.eq(i.selection)?!1:(t(le(i,s)),!0)}function kr(i,t){return y.cursor(t?i.to:i.from)}function Wh(i,t){return Kt(i,e=>e.empty?i.moveByChar(e,t):kr(e,t))}function vt(i){return i.textDirectionAt(i.state.selection.main.head)==Y.LTR}const Kh=i=>Wh(i,!vt(i)),qh=i=>Wh(i,vt(i));function Jh(i,t){return Kt(i,e=>e.empty?i.moveByGroup(e,t):kr(e,t))}const yv=i=>Jh(i,!vt(i)),vv=i=>Jh(i,vt(i));function bv(i,t,e){if(t.type.prop(e))return!0;let s=t.to-t.from;return s&&(s>2||/[^\s,.;:]/.test(i.sliceDoc(t.from,t.to)))||t.firstChild}function $r(i,t,e){let s=yt(i).resolveInner(t.head),r=e?R.closedBy:R.openedBy;for(let l=t.head;;){let c=e?s.childAfter(l):s.childBefore(l);if(!c)break;bv(i,c,r)?s=c:l=e?c.to:c.from}let n=s.type.prop(r),o,a;return n&&(o=e?Zt(i,s.from,1):Zt(i,s.to,-1))&&o.matched?a=e?o.end.to:o.end.from:a=e?s.to:s.from,y.cursor(a,e?-1:1)}const kv=i=>Kt(i,t=>$r(i.state,t,!vt(i))),$v=i=>Kt(i,t=>$r(i.state,t,vt(i)));function jh(i,t){return Kt(i,e=>{if(!e.empty)return kr(e,t);let s=i.moveVertically(e,t);return s.head!=e.head?s:i.moveToLineBoundary(e,t)})}const Yh=i=>jh(i,!1),Qh=i=>jh(i,!0);function Xh(i){return Math.max(i.defaultLineHeight,Math.min(i.dom.clientHeight,innerHeight)-5)}function Zh(i,t){let{state:e}=i,s=vs(e.selection,a=>a.empty?i.moveVertically(a,t,Xh(i)):kr(a,t));if(s.eq(e.selection))return!1;let r=i.coordsAtPos(e.selection.main.head),n=i.scrollDOM.getBoundingClientRect(),o;return r&&r.top>n.top&&r.bottom<n.bottom&&r.top-n.top<=i.scrollDOM.scrollHeight-i.scrollDOM.scrollTop-i.scrollDOM.clientHeight&&(o=T.scrollIntoView(s.main.head,{y:"start",yMargin:r.top-n.top})),i.dispatch(le(e,s),{effects:o}),!0}const il=i=>Zh(i,!1),Gn=i=>Zh(i,!0);function Re(i,t,e){let s=i.lineBlockAt(t.head),r=i.moveToLineBoundary(t,e);if(r.head==t.head&&r.head!=(e?s.to:s.from)&&(r=i.moveToLineBoundary(t,e,!1)),!e&&r.head==s.from&&s.length){let n=/^\s*/.exec(i.state.sliceDoc(s.from,Math.min(s.from+100,s.to)))[0].length;n&&t.head!=s.from+n&&(r=y.cursor(s.from+n))}return r}const xv=i=>Kt(i,t=>Re(i,t,!0)),Sv=i=>Kt(i,t=>Re(i,t,!1)),wv=i=>Kt(i,t=>Re(i,t,!vt(i))),Cv=i=>Kt(i,t=>Re(i,t,vt(i))),Pv=i=>Kt(i,t=>y.cursor(i.lineBlockAt(t.head).from,1)),Tv=i=>Kt(i,t=>y.cursor(i.lineBlockAt(t.head).to,-1));function Av(i,t,e){let s=!1,r=vs(i.selection,n=>{let o=Zt(i,n.head,-1)||Zt(i,n.head,1)||n.head>0&&Zt(i,n.head-1,1)||n.head<i.doc.length&&Zt(i,n.head+1,-1);if(!o||!o.end)return n;s=!0;let a=o.start.from==n.head?o.end.to:o.end.from;return e?y.range(n.anchor,a):y.cursor(a)});return s?(t(le(i,r)),!0):!1}const Dv=({state:i,dispatch:t})=>Av(i,t,!1);function Vt(i,t){let e=vs(i.state.selection,s=>{let r=t(s);return y.range(s.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return e.eq(i.state.selection)?!1:(i.dispatch(le(i.state,e)),!0)}function tu(i,t){return Vt(i,e=>i.moveByChar(e,t))}const eu=i=>tu(i,!vt(i)),su=i=>tu(i,vt(i));function iu(i,t){return Vt(i,e=>i.moveByGroup(e,t))}const Mv=i=>iu(i,!vt(i)),Ov=i=>iu(i,vt(i)),Iv=i=>Vt(i,t=>$r(i.state,t,!vt(i))),Rv=i=>Vt(i,t=>$r(i.state,t,vt(i)));function ru(i,t){return Vt(i,e=>i.moveVertically(e,t))}const nu=i=>ru(i,!1),ou=i=>ru(i,!0);function au(i,t){return Vt(i,e=>i.moveVertically(e,t,Xh(i)))}const rl=i=>au(i,!1),nl=i=>au(i,!0),Lv=i=>Vt(i,t=>Re(i,t,!0)),Ev=i=>Vt(i,t=>Re(i,t,!1)),Nv=i=>Vt(i,t=>Re(i,t,!vt(i))),Bv=i=>Vt(i,t=>Re(i,t,vt(i))),zv=i=>Vt(i,t=>y.cursor(i.lineBlockAt(t.head).from)),Gv=i=>Vt(i,t=>y.cursor(i.lineBlockAt(t.head).to)),ol=({state:i,dispatch:t})=>(t(le(i,{anchor:0})),!0),al=({state:i,dispatch:t})=>(t(le(i,{anchor:i.doc.length})),!0),ll=({state:i,dispatch:t})=>(t(le(i,{anchor:i.selection.main.anchor,head:0})),!0),cl=({state:i,dispatch:t})=>(t(le(i,{anchor:i.selection.main.anchor,head:i.doc.length})),!0),Fv=({state:i,dispatch:t})=>(t(i.update({selection:{anchor:0,head:i.doc.length},userEvent:"select"})),!0),Hv=({state:i,dispatch:t})=>{let e=Sr(i).map(({from:s,to:r})=>y.range(s,Math.min(r+1,i.doc.length)));return t(i.update({selection:y.create(e),userEvent:"select"})),!0},Vv=({state:i,dispatch:t})=>{let e=vs(i.selection,s=>{var r;let n=yt(i).resolveInner(s.head,1);for(;!(n.from<s.from&&n.to>=s.to||n.to>s.to&&n.from<=s.from||!(!((r=n.parent)===null||r===void 0)&&r.parent));)n=n.parent;return y.range(n.to,n.from)});return t(le(i,e)),!0},Uv=({state:i,dispatch:t})=>{let e=i.selection,s=null;return e.ranges.length>1?s=y.create([e.main]):e.main.empty||(s=y.create([y.cursor(e.main.head)])),s?(t(le(i,s)),!0):!1};function xr(i,t){if(i.state.readOnly)return!1;let e="delete.selection",{state:s}=i,r=s.changeByRange(n=>{let{from:o,to:a}=n;if(o==a){let l=t(o);l<o?(e="delete.backward",l=yi(i,l,!1)):l>o&&(e="delete.forward",l=yi(i,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=yi(i,o,!1),a=yi(i,a,!0);return o==a?{range:n}:{changes:{from:o,to:a},range:y.cursor(o)}});return r.changes.empty?!1:(i.dispatch(s.update(r,{scrollIntoView:!0,userEvent:e,effects:e=="delete.selection"?T.announce.of(s.phrase("Selection deleted")):void 0})),!0)}function yi(i,t,e){if(i instanceof T)for(let s of i.state.facet(T.atomicRanges).map(r=>r(i)))s.between(t,t,(r,n)=>{r<t&&n>t&&(t=e?n:r)});return t}const lu=(i,t)=>xr(i,e=>{let{state:s}=i,r=s.doc.lineAt(e),n,o;if(!t&&e>r.from&&e<r.from+200&&!/[^ \t]/.test(n=r.text.slice(0,e-r.from))){if(n[n.length-1]=="	")return e-1;let a=js(n,s.tabSize),l=a%ji(s)||ji(s);for(let c=0;c<l&&n[n.length-1-c]==" ";c++)e--;o=e}else o=St(r.text,e-r.from,t,t)+r.from,o==e&&r.number!=(t?s.doc.lines:1)&&(o+=t?1:-1);return o}),Fn=i=>lu(i,!1),cu=i=>lu(i,!0),hu=(i,t)=>xr(i,e=>{let s=e,{state:r}=i,n=r.doc.lineAt(s),o=r.charCategorizer(s);for(let a=null;;){if(s==(t?n.to:n.from)){s==e&&n.number!=(t?r.doc.lines:1)&&(s+=t?1:-1);break}let l=St(n.text,s-n.from,t)+n.from,c=n.text.slice(Math.min(s,l)-n.from,Math.max(s,l)-n.from),h=o(c);if(a!=null&&h!=a)break;(c!=" "||s!=e)&&(a=h),s=l}return s}),uu=i=>hu(i,!1),Wv=i=>hu(i,!0),du=i=>xr(i,t=>{let e=i.lineBlockAt(t).to;return t<e?e:Math.min(i.state.doc.length,t+1)}),Kv=i=>xr(i,t=>{let e=i.lineBlockAt(t).from;return t>e?e:Math.max(0,t-1)}),qv=({state:i,dispatch:t})=>{if(i.readOnly)return!1;let e=i.changeByRange(s=>({changes:{from:s.from,to:s.to,insert:z.of(["",""])},range:y.cursor(s.from)}));return t(i.update(e,{scrollIntoView:!0,userEvent:"input"})),!0},Jv=({state:i,dispatch:t})=>{if(i.readOnly)return!1;let e=i.changeByRange(s=>{if(!s.empty||s.from==0||s.from==i.doc.length)return{range:s};let r=s.from,n=i.doc.lineAt(r),o=r==n.from?r-1:St(n.text,r-n.from,!1)+n.from,a=r==n.to?r+1:St(n.text,r-n.from,!0)+n.from;return{changes:{from:o,to:a,insert:i.doc.slice(r,a).append(i.doc.slice(o,r))},range:y.cursor(a)}});return e.changes.empty?!1:(t(i.update(e,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Sr(i){let t=[],e=-1;for(let s of i.selection.ranges){let r=i.doc.lineAt(s.from),n=i.doc.lineAt(s.to);if(!s.empty&&s.to==n.from&&(n=i.doc.lineAt(s.to-1)),e>=r.number){let o=t[t.length-1];o.to=n.to,o.ranges.push(s)}else t.push({from:r.from,to:n.to,ranges:[s]});e=n.number+1}return t}function pu(i,t,e){if(i.readOnly)return!1;let s=[],r=[];for(let n of Sr(i)){if(e?n.to==i.doc.length:n.from==0)continue;let o=i.doc.lineAt(e?n.to+1:n.from-1),a=o.length+1;if(e){s.push({from:n.to,to:o.to},{from:n.from,insert:o.text+i.lineBreak});for(let l of n.ranges)r.push(y.range(Math.min(i.doc.length,l.anchor+a),Math.min(i.doc.length,l.head+a)))}else{s.push({from:o.from,to:n.from},{from:n.to,insert:i.lineBreak+o.text});for(let l of n.ranges)r.push(y.range(l.anchor-a,l.head-a))}}return s.length?(t(i.update({changes:s,scrollIntoView:!0,selection:y.create(r,i.selection.mainIndex),userEvent:"move.line"})),!0):!1}const jv=({state:i,dispatch:t})=>pu(i,t,!1),Yv=({state:i,dispatch:t})=>pu(i,t,!0);function fu(i,t,e){if(i.readOnly)return!1;let s=[];for(let r of Sr(i))e?s.push({from:r.from,insert:i.doc.slice(r.from,r.to)+i.lineBreak}):s.push({from:r.to,insert:i.lineBreak+i.doc.slice(r.from,r.to)});return t(i.update({changes:s,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Qv=({state:i,dispatch:t})=>fu(i,t,!1),Xv=({state:i,dispatch:t})=>fu(i,t,!0),Zv=i=>{if(i.state.readOnly)return!1;let{state:t}=i,e=t.changes(Sr(t).map(({from:r,to:n})=>(r>0?r--:n<t.doc.length&&n++,{from:r,to:n}))),s=vs(t.selection,r=>i.moveVertically(r,!0)).map(e);return i.dispatch({changes:e,selection:s,scrollIntoView:!0,userEvent:"delete.line"}),!0};function tb(i,t){if(/\(\)|\[\]|\{\}/.test(i.sliceDoc(t-1,t+1)))return{from:t,to:t};let e=yt(i).resolveInner(t),s=e.childBefore(t),r=e.childAfter(t),n;return s&&r&&s.to<=t&&r.from>=t&&(n=s.type.prop(R.closedBy))&&n.indexOf(r.name)>-1&&i.doc.lineAt(s.to).from==i.doc.lineAt(r.from).from?{from:s.to,to:r.from}:null}const eb=mu(!1),sb=mu(!0);function mu(i){return({state:t,dispatch:e})=>{if(t.readOnly)return!1;let s=t.changeByRange(r=>{let{from:n,to:o}=r,a=t.doc.lineAt(n),l=!i&&n==o&&tb(t,n);i&&(n=o=(o<=a.to?a:t.doc.lineAt(o)).to);let c=new _r(t,{simulateBreak:n,simulateDoubleBreak:!!l}),h=Co(c,n);for(h==null&&(h=/^\s*/.exec(t.doc.lineAt(n).text)[0].length);o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:n,to:o}=l:n>a.from&&n<a.from+100&&!/\S/.test(a.text.slice(0,n))&&(n=a.from);let u=["",Us(t,h)];return l&&u.push(Us(t,c.lineIndent(a.from,-1))),{changes:{from:n,to:o,insert:z.of(u)},range:y.cursor(n+1+u[1].length)}});return e(t.update(s,{scrollIntoView:!0,userEvent:"input"})),!0}}function Do(i,t){let e=-1;return i.changeByRange(s=>{let r=[];for(let o=s.from;o<=s.to;){let a=i.doc.lineAt(o);a.number>e&&(s.empty||s.to>a.from)&&(t(a,r,s),e=a.number),o=a.to+1}let n=i.changes(r);return{changes:r,range:y.range(n.mapPos(s.anchor,1),n.mapPos(s.head,1))}})}const ib=({state:i,dispatch:t})=>{if(i.readOnly)return!1;let e=Object.create(null),s=new _r(i,{overrideIndentation:n=>{let o=e[n];return o??-1}}),r=Do(i,(n,o,a)=>{let l=Co(s,n.from);if(l==null)return;/\S/.test(n.text)||(l=0);let c=/^\s*/.exec(n.text)[0],h=Us(i,l);(c!=h||a.from<n.from+c.length)&&(e[n.from]=l,o.push({from:n.from,to:n.from+c.length,insert:h}))});return r.changes.empty||t(i.update(r,{userEvent:"indent"})),!0},rb=({state:i,dispatch:t})=>i.readOnly?!1:(t(i.update(Do(i,(e,s)=>{s.push({from:e.from,insert:i.facet(wo)})}),{userEvent:"input.indent"})),!0),nb=({state:i,dispatch:t})=>i.readOnly?!1:(t(i.update(Do(i,(e,s)=>{let r=/^\s*/.exec(e.text)[0];if(!r)return;let n=js(r,i.tabSize),o=0,a=Us(i,Math.max(0,n-ji(i)));for(;o<r.length&&o<a.length&&r.charCodeAt(o)==a.charCodeAt(o);)o++;s.push({from:e.from+o,to:e.from+r.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),ob=[{key:"Ctrl-b",run:Kh,shift:eu,preventDefault:!0},{key:"Ctrl-f",run:qh,shift:su},{key:"Ctrl-p",run:Yh,shift:nu},{key:"Ctrl-n",run:Qh,shift:ou},{key:"Ctrl-a",run:Pv,shift:zv},{key:"Ctrl-e",run:Tv,shift:Gv},{key:"Ctrl-d",run:cu},{key:"Ctrl-h",run:Fn},{key:"Ctrl-k",run:du},{key:"Ctrl-Alt-h",run:uu},{key:"Ctrl-o",run:qv},{key:"Ctrl-t",run:Jv},{key:"Ctrl-v",run:Gn}],ab=[{key:"ArrowLeft",run:Kh,shift:eu,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:yv,shift:Mv,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:wv,shift:Nv,preventDefault:!0},{key:"ArrowRight",run:qh,shift:su,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:vv,shift:Ov,preventDefault:!0},{mac:"Cmd-ArrowRight",run:Cv,shift:Bv,preventDefault:!0},{key:"ArrowUp",run:Yh,shift:nu,preventDefault:!0},{mac:"Cmd-ArrowUp",run:ol,shift:ll},{mac:"Ctrl-ArrowUp",run:il,shift:rl},{key:"ArrowDown",run:Qh,shift:ou,preventDefault:!0},{mac:"Cmd-ArrowDown",run:al,shift:cl},{mac:"Ctrl-ArrowDown",run:Gn,shift:nl},{key:"PageUp",run:il,shift:rl},{key:"PageDown",run:Gn,shift:nl},{key:"Home",run:Sv,shift:Ev,preventDefault:!0},{key:"Mod-Home",run:ol,shift:ll},{key:"End",run:xv,shift:Lv,preventDefault:!0},{key:"Mod-End",run:al,shift:cl},{key:"Enter",run:eb},{key:"Mod-a",run:Fv},{key:"Backspace",run:Fn,shift:Fn},{key:"Delete",run:cu},{key:"Mod-Backspace",mac:"Alt-Backspace",run:uu},{key:"Mod-Delete",mac:"Alt-Delete",run:Wv},{mac:"Mod-Backspace",run:Kv},{mac:"Mod-Delete",run:du}].concat(ob.map(i=>({mac:i.key,run:i.run,shift:i.shift}))),lb=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:kv,shift:Iv},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:$v,shift:Rv},{key:"Alt-ArrowUp",run:jv},{key:"Shift-Alt-ArrowUp",run:Qv},{key:"Alt-ArrowDown",run:Yv},{key:"Shift-Alt-ArrowDown",run:Xv},{key:"Escape",run:Uv},{key:"Mod-Enter",run:sb},{key:"Alt-l",mac:"Ctrl-l",run:Hv},{key:"Mod-i",run:Vv,preventDefault:!0},{key:"Mod-[",run:nb},{key:"Mod-]",run:rb},{key:"Mod-Alt-\\",run:ib},{key:"Shift-Mod-k",run:Zv},{key:"Shift-Mod-\\",run:Dv},{key:"Mod-/",run:Xy},{key:"Alt-A",run:tv}].concat(ab);function U(){var i=arguments[0];typeof i=="string"&&(i=document.createElement(i));var t=1,e=arguments[1];if(e&&typeof e=="object"&&e.nodeType==null&&!Array.isArray(e)){for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var r=e[s];typeof r=="string"?i.setAttribute(s,r):r!=null&&(i[s]=r)}t++}for(;t<arguments.length;t++)gu(i,arguments[t]);return i}function gu(i,t){if(typeof t=="string")i.appendChild(document.createTextNode(t));else if(t!=null)if(t.nodeType!=null)i.appendChild(t);else if(Array.isArray(t))for(var e=0;e<t.length;e++)gu(i,t[e]);else throw new RangeError("Unsupported child node: "+t)}const hl=typeof String.prototype.normalize=="function"?i=>i.normalize("NFKD"):i=>i;class gs{constructor(t,e,s=0,r=t.length,n,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=t.iterRange(s,r),this.bufferStart=s,this.normalize=n?a=>n(hl(a)):hl,this.query=this.normalize(e)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return ut(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let t=this.peek();if(t<0)return this.done=!0,this;let e=ao(t),s=this.bufferStart+this.bufferPos;this.bufferPos+=Lt(t);let r=this.normalize(e);for(let n=0,o=s;;n++){let a=r.charCodeAt(n),l=this.match(a,o);if(l)return this.value=l,this;if(n==r.length-1)break;o==s&&n<e.length&&e.charCodeAt(n)==a&&o++}}}match(t,e){let s=null;for(let r=0;r<this.matches.length;r+=2){let n=this.matches[r],o=!1;this.query.charCodeAt(n)==t&&(n==this.query.length-1?s={from:this.matches[r+1],to:e+1}:(this.matches[r]++,o=!0)),o||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==t&&(this.query.length==1?s={from:e,to:e+1}:this.matches.push(1,e)),s&&this.test&&!this.test(s.from,s.to,this.buffer,this.bufferPos)&&(s=null),s}}typeof Symbol<"u"&&(gs.prototype[Symbol.iterator]=function(){return this});const _u={from:-1,to:-1,match:/.*/.exec("")},Mo="gm"+(/x/.unicode==null?"":"u");class yu{constructor(t,e,s,r=0,n=t.length){if(this.text=t,this.to=n,this.curLine="",this.done=!1,this.value=_u,/\\[sWDnr]|\n|\r|\[\^/.test(e))return new vu(t,e,s,r,n);this.re=new RegExp(e,Mo+(s!=null&&s.ignoreCase?"i":"")),this.test=s==null?void 0:s.test,this.iter=t.iter();let o=t.lineAt(r);this.curLineStart=o.from,this.matchPos=Zi(t,r),this.getLine(this.curLineStart)}getLine(t){this.iter.next(t),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let t=this.matchPos-this.curLineStart;;){this.re.lastIndex=t;let e=this.matchPos<=this.to&&this.re.exec(this.curLine);if(e){let s=this.curLineStart+e.index,r=s+e[0].length;if(this.matchPos=Zi(this.text,r+(s==r?1:0)),s==this.curLineStart+this.curLine.length&&this.nextLine(),(s<r||s>this.value.to)&&(!this.test||this.test(s,r,e)))return this.value={from:s,to:r,match:e},this;t=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),t=0;else return this.done=!0,this}}}const jr=new WeakMap;class cs{constructor(t,e){this.from=t,this.text=e}get to(){return this.from+this.text.length}static get(t,e,s){let r=jr.get(t);if(!r||r.from>=s||r.to<=e){let a=new cs(e,t.sliceString(e,s));return jr.set(t,a),a}if(r.from==e&&r.to==s)return r;let{text:n,from:o}=r;return o>e&&(n=t.sliceString(e,o)+n,o=e),r.to<s&&(n+=t.sliceString(r.to,s)),jr.set(t,new cs(o,n)),new cs(e,n.slice(e-o,s-o))}}class vu{constructor(t,e,s,r,n){this.text=t,this.to=n,this.done=!1,this.value=_u,this.matchPos=Zi(t,r),this.re=new RegExp(e,Mo+(s!=null&&s.ignoreCase?"i":"")),this.test=s==null?void 0:s.test,this.flat=cs.get(t,r,this.chunkEnd(r+5e3))}chunkEnd(t){return t>=this.to?this.to:this.text.lineAt(t).to}next(){for(;;){let t=this.re.lastIndex=this.matchPos-this.flat.from,e=this.re.exec(this.flat.text);if(e&&!e[0]&&e.index==t&&(this.re.lastIndex=t+1,e=this.re.exec(this.flat.text)),e){let s=this.flat.from+e.index,r=s+e[0].length;if((this.flat.to>=this.to||e.index+e[0].length<=this.flat.text.length-10)&&(!this.test||this.test(s,r,e)))return this.value={from:s,to:r,match:e},this.matchPos=Zi(this.text,r+(s==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=cs.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(yu.prototype[Symbol.iterator]=vu.prototype[Symbol.iterator]=function(){return this});function cb(i){try{return new RegExp(i,Mo),!0}catch{return!1}}function Zi(i,t){if(t>=i.length)return t;let e=i.lineAt(t),s;for(;t<e.to&&(s=e.text.charCodeAt(t-e.from))>=56320&&s<57344;)t++;return t}function Hn(i){let t=U("input",{class:"cm-textfield",name:"line"}),e=U("form",{class:"cm-gotoLine",onkeydown:r=>{r.keyCode==27?(r.preventDefault(),i.dispatch({effects:tr.of(!1)}),i.focus()):r.keyCode==13&&(r.preventDefault(),s())},onsubmit:r=>{r.preventDefault(),s()}},U("label",i.state.phrase("Go to line"),": ",t)," ",U("button",{class:"cm-button",type:"submit"},i.state.phrase("go")));function s(){let r=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!r)return;let{state:n}=i,o=n.doc.lineAt(n.selection.main.head),[,a,l,c,h]=r,u=c?+c.slice(1):0,d=l?+l:o.number;if(l&&h){let f=d/100;a&&(f=f*(a=="-"?-1:1)+o.number/n.doc.lines),d=Math.round(n.doc.lines*f)}else l&&a&&(d=d*(a=="-"?-1:1)+o.number);let p=n.doc.line(Math.max(1,Math.min(n.doc.lines,d)));i.dispatch({effects:tr.of(!1),selection:y.cursor(p.from+Math.max(0,Math.min(u,p.length))),scrollIntoView:!0}),i.focus()}return{dom:e}}const tr=I.define(),ul=ft.define({create(){return!0},update(i,t){for(let e of t.effects)e.is(tr)&&(i=e.value);return i},provide:i=>Hs.from(i,t=>t?Hn:null)}),hb=i=>{let t=Fs(i,Hn);if(!t){let e=[tr.of(!0)];i.state.field(ul,!1)==null&&e.push(I.appendConfig.of([ul,ub])),i.dispatch({effects:e}),t=Fs(i,Hn)}return t&&t.dom.querySelector("input").focus(),!0},ub=T.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),db={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},bu=P.define({combine(i){return ae(i,db,{highlightWordAroundCursor:(t,e)=>t||e,minSelectionLength:Math.min,maxMatches:Math.min})}});function pb(i){let t=[yb,_b];return i&&t.push(bu.of(i)),t}const fb=D.mark({class:"cm-selectionMatch"}),mb=D.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function dl(i,t,e,s){return(e==0||i(t.sliceDoc(e-1,e))!=J.Word)&&(s==t.doc.length||i(t.sliceDoc(s,s+1))!=J.Word)}function gb(i,t,e,s){return i(t.sliceDoc(e,e+1))==J.Word&&i(t.sliceDoc(s-1,s))==J.Word}const _b=X.fromClass(class{constructor(i){this.decorations=this.getDeco(i)}update(i){(i.selectionSet||i.docChanged||i.viewportChanged)&&(this.decorations=this.getDeco(i.view))}getDeco(i){let t=i.state.facet(bu),{state:e}=i,s=e.selection;if(s.ranges.length>1)return D.none;let r=s.main,n,o=null;if(r.empty){if(!t.highlightWordAroundCursor)return D.none;let l=e.wordAt(r.head);if(!l)return D.none;o=e.charCategorizer(r.head),n=e.sliceDoc(l.from,l.to)}else{let l=r.to-r.from;if(l<t.minSelectionLength||l>200)return D.none;if(t.wholeWords){if(n=e.sliceDoc(r.from,r.to),o=e.charCategorizer(r.head),!(dl(o,e,r.from,r.to)&&gb(o,e,r.from,r.to)))return D.none}else if(n=e.sliceDoc(r.from,r.to).trim(),!n)return D.none}let a=[];for(let l of i.visibleRanges){let c=new gs(e.doc,n,l.from,l.to);for(;!c.next().done;){let{from:h,to:u}=c.value;if((!o||dl(o,e,h,u))&&(r.empty&&h<=r.from&&u>=r.to?a.push(mb.range(h,u)):(h>=r.to||u<=r.from)&&a.push(fb.range(h,u)),a.length>t.maxMatches))return D.none}}return D.set(a)}},{decorations:i=>i.decorations}),yb=T.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),vb=({state:i,dispatch:t})=>{let{selection:e}=i,s=y.create(e.ranges.map(r=>i.wordAt(r.head)||y.cursor(r.head)),e.mainIndex);return s.eq(e)?!1:(t(i.update({selection:s})),!0)};function bb(i,t){let{main:e,ranges:s}=i.selection,r=i.wordAt(e.head),n=r&&r.from==e.from&&r.to==e.to;for(let o=!1,a=new gs(i.doc,t,s[s.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new gs(i.doc,t,0,Math.max(0,s[s.length-1].from-1)),o=!0}else{if(o&&s.some(l=>l.from==a.value.from))continue;if(n){let l=i.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const kb=({state:i,dispatch:t})=>{let{ranges:e}=i.selection;if(e.some(n=>n.from===n.to))return vb({state:i,dispatch:t});let s=i.sliceDoc(e[0].from,e[0].to);if(i.selection.ranges.some(n=>i.sliceDoc(n.from,n.to)!=s))return!1;let r=bb(i,s);return r?(t(i.update({selection:i.selection.addRange(y.range(r.from,r.to),!1),effects:T.scrollIntoView(r.to)})),!0):!1},Oo=P.define({combine(i){return ae(i,{top:!1,caseSensitive:!1,literal:!1,wholeWord:!1,createPanel:t=>new Ib(t)})}});class ku{constructor(t){this.search=t.search,this.caseSensitive=!!t.caseSensitive,this.literal=!!t.literal,this.regexp=!!t.regexp,this.replace=t.replace||"",this.valid=!!this.search&&(!this.regexp||cb(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!t.wholeWord}unquote(t){return this.literal?t:t.replace(/\\([nrt\\])/g,(e,s)=>s=="n"?`
`:s=="r"?"\r":s=="t"?"	":"\\")}eq(t){return this.search==t.search&&this.replace==t.replace&&this.caseSensitive==t.caseSensitive&&this.regexp==t.regexp&&this.wholeWord==t.wholeWord}create(){return this.regexp?new wb(this):new xb(this)}getCursor(t,e=0,s){let r=t.doc?t:B.create({doc:t});return s==null&&(s=r.doc.length),this.regexp?es(this,r,e,s):ts(this,r,e,s)}}class $u{constructor(t){this.spec=t}}function ts(i,t,e,s){return new gs(t.doc,i.unquoted,e,s,i.caseSensitive?void 0:r=>r.toLowerCase(),i.wholeWord?$b(t.doc,t.charCategorizer(t.selection.main.head)):void 0)}function $b(i,t){return(e,s,r,n)=>((n>e||n+r.length<s)&&(n=Math.max(0,e-2),r=i.sliceString(n,Math.min(i.length,s+2))),(t(er(r,e-n))!=J.Word||t(sr(r,e-n))!=J.Word)&&(t(sr(r,s-n))!=J.Word||t(er(r,s-n))!=J.Word))}class xb extends $u{constructor(t){super(t)}nextMatch(t,e,s){let r=ts(this.spec,t,s,t.doc.length).nextOverlapping();return r.done&&(r=ts(this.spec,t,0,e).nextOverlapping()),r.done?null:r.value}prevMatchInRange(t,e,s){for(let r=s;;){let n=Math.max(e,r-1e4-this.spec.unquoted.length),o=ts(this.spec,t,n,r),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(n==e)return null;r-=1e4}}prevMatch(t,e,s){return this.prevMatchInRange(t,0,e)||this.prevMatchInRange(t,s,t.doc.length)}getReplacement(t){return this.spec.unquote(this.spec.replace)}matchAll(t,e){let s=ts(this.spec,t,0,t.doc.length),r=[];for(;!s.next().done;){if(r.length>=e)return null;r.push(s.value)}return r}highlight(t,e,s,r){let n=ts(this.spec,t,Math.max(0,e-this.spec.unquoted.length),Math.min(s+this.spec.unquoted.length,t.doc.length));for(;!n.next().done;)r(n.value.from,n.value.to)}}function es(i,t,e,s){return new yu(t.doc,i.search,{ignoreCase:!i.caseSensitive,test:i.wholeWord?Sb(t.charCategorizer(t.selection.main.head)):void 0},e,s)}function er(i,t){return i.slice(St(i,t,!1),t)}function sr(i,t){return i.slice(t,St(i,t))}function Sb(i){return(t,e,s)=>!s[0].length||(i(er(s.input,s.index))!=J.Word||i(sr(s.input,s.index))!=J.Word)&&(i(sr(s.input,s.index+s[0].length))!=J.Word||i(er(s.input,s.index+s[0].length))!=J.Word)}class wb extends $u{nextMatch(t,e,s){let r=es(this.spec,t,s,t.doc.length).next();return r.done&&(r=es(this.spec,t,0,e).next()),r.done?null:r.value}prevMatchInRange(t,e,s){for(let r=1;;r++){let n=Math.max(e,s-r*1e4),o=es(this.spec,t,n,s),a=null;for(;!o.next().done;)a=o.value;if(a&&(n==e||a.from>n+10))return a;if(n==e)return null}}prevMatch(t,e,s){return this.prevMatchInRange(t,0,e)||this.prevMatchInRange(t,s,t.doc.length)}getReplacement(t){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(e,s)=>s=="$"?"$":s=="&"?t.match[0]:s!="0"&&+s<t.match.length?t.match[s]:e))}matchAll(t,e){let s=es(this.spec,t,0,t.doc.length),r=[];for(;!s.next().done;){if(r.length>=e)return null;r.push(s.value)}return r}highlight(t,e,s,r){let n=es(this.spec,t,Math.max(0,e-250),Math.min(s+250,t.doc.length));for(;!n.next().done;)r(n.value.from,n.value.to)}}const Ws=I.define(),Io=I.define(),Se=ft.define({create(i){return new Yr(Vn(i).create(),null)},update(i,t){for(let e of t.effects)e.is(Ws)?i=new Yr(e.value.create(),i.panel):e.is(Io)&&(i=new Yr(i.query,e.value?Ro:null));return i},provide:i=>Hs.from(i,t=>t.panel)});class Yr{constructor(t,e){this.query=t,this.panel=e}}const Cb=D.mark({class:"cm-searchMatch"}),Pb=D.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Tb=X.fromClass(class{constructor(i){this.view=i,this.decorations=this.highlight(i.state.field(Se))}update(i){let t=i.state.field(Se);(t!=i.startState.field(Se)||i.docChanged||i.selectionSet||i.viewportChanged)&&(this.decorations=this.highlight(t))}highlight({query:i,panel:t}){if(!t||!i.spec.valid)return D.none;let{view:e}=this,s=new Ce;for(let r=0,n=e.visibleRanges,o=n.length;r<o;r++){let{from:a,to:l}=n[r];for(;r<o-1&&l>n[r+1].from-2*250;)l=n[++r].to;i.highlight(e.state,a,l,(c,h)=>{let u=e.state.selection.ranges.some(d=>d.from==c&&d.to==h);s.add(c,h,u?Pb:Cb)})}return s.finish()}},{decorations:i=>i.decorations});function Zs(i){return t=>{let e=t.state.field(Se,!1);return e&&e.query.spec.valid?i(t,e):xu(t)}}const ir=Zs((i,{query:t})=>{let{to:e}=i.state.selection.main,s=t.nextMatch(i.state,e,e);return s?(i.dispatch({selection:{anchor:s.from,head:s.to},scrollIntoView:!0,effects:Lo(i,s),userEvent:"select.search"}),!0):!1}),rr=Zs((i,{query:t})=>{let{state:e}=i,{from:s}=e.selection.main,r=t.prevMatch(e,s,s);return r?(i.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:Lo(i,r),userEvent:"select.search"}),!0):!1}),Ab=Zs((i,{query:t})=>{let e=t.matchAll(i.state,1e3);return!e||!e.length?!1:(i.dispatch({selection:y.create(e.map(s=>y.range(s.from,s.to))),userEvent:"select.search.matches"}),!0)}),Db=({state:i,dispatch:t})=>{let e=i.selection;if(e.ranges.length>1||e.main.empty)return!1;let{from:s,to:r}=e.main,n=[],o=0;for(let a=new gs(i.doc,i.sliceDoc(s,r));!a.next().done;){if(n.length>1e3)return!1;a.value.from==s&&(o=n.length),n.push(y.range(a.value.from,a.value.to))}return t(i.update({selection:y.create(n,o),userEvent:"select.search.matches"})),!0},pl=Zs((i,{query:t})=>{let{state:e}=i,{from:s,to:r}=e.selection.main;if(e.readOnly)return!1;let n=t.nextMatch(e,s,s);if(!n)return!1;let o=[],a,l,c=[];if(n.from==s&&n.to==r&&(l=e.toText(t.getReplacement(n)),o.push({from:n.from,to:n.to,insert:l}),n=t.nextMatch(e,n.from,n.to),c.push(T.announce.of(e.phrase("replaced match on line $",e.doc.lineAt(s).number)+"."))),n){let h=o.length==0||o[0].from>=n.to?0:n.to-n.from-l.length;a={anchor:n.from-h,head:n.to-h},c.push(Lo(i,n))}return i.dispatch({changes:o,selection:a,scrollIntoView:!!a,effects:c,userEvent:"input.replace"}),!0}),Mb=Zs((i,{query:t})=>{if(i.state.readOnly)return!1;let e=t.matchAll(i.state,1e9).map(r=>{let{from:n,to:o}=r;return{from:n,to:o,insert:t.getReplacement(r)}});if(!e.length)return!1;let s=i.state.phrase("replaced $ matches",e.length)+".";return i.dispatch({changes:e,effects:T.announce.of(s),userEvent:"input.replace.all"}),!0});function Ro(i){return i.state.facet(Oo).createPanel(i)}function Vn(i,t){var e,s,r,n;let o=i.selection.main,a=o.empty||o.to>o.from+100?"":i.sliceDoc(o.from,o.to);if(t&&!a)return t;let l=i.facet(Oo);return new ku({search:((e=t==null?void 0:t.literal)!==null&&e!==void 0?e:l.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(s=t==null?void 0:t.caseSensitive)!==null&&s!==void 0?s:l.caseSensitive,literal:(r=t==null?void 0:t.literal)!==null&&r!==void 0?r:l.literal,wholeWord:(n=t==null?void 0:t.wholeWord)!==null&&n!==void 0?n:l.wholeWord})}const xu=i=>{let t=i.state.field(Se,!1);if(t&&t.panel){let e=Fs(i,Ro);if(!e)return!1;let s=e.dom.querySelector("[main-field]");if(s&&s!=i.root.activeElement){let r=Vn(i.state,t.query.spec);r.valid&&i.dispatch({effects:Ws.of(r)}),s.focus(),s.select()}}else i.dispatch({effects:[Io.of(!0),t?Ws.of(Vn(i.state,t.query.spec)):I.appendConfig.of(Lb)]});return!0},Su=i=>{let t=i.state.field(Se,!1);if(!t||!t.panel)return!1;let e=Fs(i,Ro);return e&&e.dom.contains(i.root.activeElement)&&i.focus(),i.dispatch({effects:Io.of(!1)}),!0},Ob=[{key:"Mod-f",run:xu,scope:"editor search-panel"},{key:"F3",run:ir,shift:rr,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:ir,shift:rr,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Su,scope:"editor search-panel"},{key:"Mod-Shift-l",run:Db},{key:"Alt-g",run:hb},{key:"Mod-d",run:kb,preventDefault:!0}];class Ib{constructor(t){this.view=t;let e=this.query=t.state.field(Se).query.spec;this.commit=this.commit.bind(this),this.searchField=U("input",{value:e.search,placeholder:It(t,"Find"),"aria-label":It(t,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=U("input",{value:e.replace,placeholder:It(t,"Replace"),"aria-label":It(t,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=U("input",{type:"checkbox",name:"case",form:"",checked:e.caseSensitive,onchange:this.commit}),this.reField=U("input",{type:"checkbox",name:"re",form:"",checked:e.regexp,onchange:this.commit}),this.wordField=U("input",{type:"checkbox",name:"word",form:"",checked:e.wholeWord,onchange:this.commit});function s(r,n,o){return U("button",{class:"cm-button",name:r,onclick:n,type:"button"},o)}this.dom=U("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,s("next",()=>ir(t),[It(t,"next")]),s("prev",()=>rr(t),[It(t,"previous")]),s("select",()=>Ab(t),[It(t,"all")]),U("label",null,[this.caseField,It(t,"match case")]),U("label",null,[this.reField,It(t,"regexp")]),U("label",null,[this.wordField,It(t,"by word")]),...t.state.readOnly?[]:[U("br"),this.replaceField,s("replace",()=>pl(t),[It(t,"replace")]),s("replaceAll",()=>Mb(t),[It(t,"replace all")])],U("button",{name:"close",onclick:()=>Su(t),"aria-label":It(t,"close"),type:"button"},["×"])])}commit(){let t=new ku({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});t.eq(this.query)||(this.query=t,this.view.dispatch({effects:Ws.of(t)}))}keydown(t){qg(this.view,t,"search-panel")?t.preventDefault():t.keyCode==13&&t.target==this.searchField?(t.preventDefault(),(t.shiftKey?rr:ir)(this.view)):t.keyCode==13&&t.target==this.replaceField&&(t.preventDefault(),pl(this.view))}update(t){for(let e of t.transactions)for(let s of e.effects)s.is(Ws)&&!s.value.eq(this.query)&&this.setQuery(s.value)}setQuery(t){this.query=t,this.searchField.value=t.search,this.replaceField.value=t.replace,this.caseField.checked=t.caseSensitive,this.reField.checked=t.regexp,this.wordField.checked=t.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Oo).top}}function It(i,t){return i.state.phrase(t)}const vi=30,bi=/[\s\.,:;?!]/;function Lo(i,{from:t,to:e}){let s=i.state.doc.lineAt(t),r=i.state.doc.lineAt(e).to,n=Math.max(s.from,t-vi),o=Math.min(r,e+vi),a=i.state.sliceDoc(n,o);if(n!=s.from){for(let l=0;l<vi;l++)if(!bi.test(a[l+1])&&bi.test(a[l])){a=a.slice(l);break}}if(o!=r){for(let l=a.length-1;l>a.length-vi;l--)if(!bi.test(a[l-1])&&bi.test(a[l])){a=a.slice(0,l);break}}return T.announce.of(`${i.state.phrase("current match")}. ${a} ${i.state.phrase("on line")} ${s.number}.`)}const Rb=T.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Lb=[Se,ys.lowest(Tb),Rb];class wu{constructor(t,e,s){this.state=t,this.pos=e,this.explicit=s,this.abortListeners=[]}tokenBefore(t){let e=yt(this.state).resolveInner(this.pos,-1);for(;e&&t.indexOf(e.name)<0;)e=e.parent;return e?{from:e.from,to:this.pos,text:this.state.sliceDoc(e.from,this.pos),type:e.type}:null}matchBefore(t){let e=this.state.doc.lineAt(this.pos),s=Math.max(e.from,this.pos-250),r=e.text.slice(s-e.from,this.pos-e.from),n=r.search(Cu(t,!1));return n<0?null:{from:s+n,to:this.pos,text:r.slice(n)}}get aborted(){return this.abortListeners==null}addEventListener(t,e){t=="abort"&&this.abortListeners&&this.abortListeners.push(e)}}function fl(i){let t=Object.keys(i).join(""),e=/\w/.test(t);return e&&(t=t.replace(/\w/g,"")),`[${e?"\\w":""}${t.replace(/[^\w\s]/g,"\\$&")}]`}function Eb(i){let t=Object.create(null),e=Object.create(null);for(let{label:r}of i){t[r[0]]=!0;for(let n=1;n<r.length;n++)e[r[n]]=!0}let s=fl(t)+fl(e)+"*$";return[new RegExp("^"+s),new RegExp(s)]}function Nb(i){let t=i.map(r=>typeof r=="string"?{label:r}:r),[e,s]=t.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:Eb(t);return r=>{let n=r.matchBefore(s);return n||r.explicit?{from:n?n.from:r.pos,options:t,validFor:e}:null}}class ml{constructor(t,e,s){this.completion=t,this.source=e,this.match=s}}function we(i){return i.selection.main.head}function Cu(i,t){var e;let{source:s}=i,r=t&&s[0]!="^",n=s[s.length-1]!="$";return!r&&!n?i:new RegExp(`${r?"^":""}(?:${s})${n?"$":""}`,(e=i.flags)!==null&&e!==void 0?e:i.ignoreCase?"i":"")}const Bb=Ie.define();function zb(i,t,e,s){return Object.assign(Object.assign({},i.changeByRange(r=>{if(r==i.selection.main)return{changes:{from:e,to:s,insert:t},range:y.cursor(e+t.length)};let n=s-e;return!r.empty||n&&i.sliceDoc(r.from-n,r.from)!=i.sliceDoc(e,s)?{range:r}:{changes:{from:r.from-n,to:r.from,insert:t},range:y.cursor(r.from-n+t.length)}})),{userEvent:"input.complete"})}function Pu(i,t){const e=t.completion.apply||t.completion.label;let s=t.source;typeof e=="string"?i.dispatch(Object.assign(Object.assign({},zb(i.state,e,s.from,s.to)),{annotations:Bb.of(t.completion)})):e(i,t.completion,s.from,s.to)}const gl=new WeakMap;function Gb(i){if(!Array.isArray(i))return i;let t=gl.get(i);return t||gl.set(i,t=Nb(i)),t}class Fb{constructor(t){this.pattern=t,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let e=0;e<t.length;){let s=ut(t,e),r=Lt(s);this.chars.push(s);let n=t.slice(e,e+r),o=n.toUpperCase();this.folded.push(ut(o==n?n.toLowerCase():o,0)),e+=r}this.astral=t.length!=this.chars.length}match(t){if(this.pattern.length==0)return[0];if(t.length<this.pattern.length)return null;let{chars:e,folded:s,any:r,precise:n,byWord:o}=this;if(e.length==1){let S=ut(t,0);return S==e[0]?[0,0,Lt(S)]:S==s[0]?[-200,0,Lt(S)]:null}let a=t.indexOf(this.pattern);if(a==0)return[0,0,this.pattern.length];let l=e.length,c=0;if(a<0){for(let S=0,A=Math.min(t.length,200);S<A&&c<l;){let x=ut(t,S);(x==e[c]||x==s[c])&&(r[c++]=S),S+=Lt(x)}if(c<l)return null}let h=0,u=0,d=!1,p=0,f=-1,g=-1,m=/[a-z]/.test(t),_=!0;for(let S=0,A=Math.min(t.length,200),x=0;S<A&&u<l;){let k=ut(t,S);a<0&&(h<l&&k==e[h]&&(n[h++]=S),p<l&&(k==e[p]||k==s[p]?(p==0&&(f=S),g=S+1,p++):p=0));let w,O=k<255?k>=48&&k<=57||k>=97&&k<=122?2:k>=65&&k<=90?1:0:(w=ao(k))!=w.toLowerCase()?1:w!=w.toUpperCase()?2:0;(!S||O==1&&m||x==0&&O!=0)&&(e[u]==k||s[u]==k&&(d=!0)?o[u++]=S:o.length&&(_=!1)),x=O,S+=Lt(k)}return u==l&&o[0]==0&&_?this.result(-100+(d?-200:0),o,t):p==l&&f==0?[-200-t.length,0,g]:a>-1?[-700-t.length,a,a+this.pattern.length]:p==l?[-200+-700-t.length,f,g]:u==l?this.result(-100+(d?-200:0)+-700+(_?0:-1100),o,t):e.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,t)}result(t,e,s){let r=[t-s.length],n=1;for(let o of e){let a=o+(this.astral?Lt(ut(s,o)):1);n>1&&r[n-1]==o?r[n-1]=a:(r[n++]=o,r[n++]=a)}return r}}const Ht=P.define({combine(i){return ae(i,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],compareCompletions:(t,e)=>t.label.localeCompare(e.label),interactionDelay:75},{defaultKeymap:(t,e)=>t&&e,closeOnBlur:(t,e)=>t&&e,icons:(t,e)=>t&&e,tooltipClass:(t,e)=>s=>_l(t(s),e(s)),optionClass:(t,e)=>s=>_l(t(s),e(s)),addToOptions:(t,e)=>t.concat(e)})}});function _l(i,t){return i?t?i+" "+t:i:t}function Hb(i){let t=i.addToOptions.slice();return i.icons&&t.push({render(e){let s=document.createElement("div");return s.classList.add("cm-completionIcon"),e.type&&s.classList.add(...e.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),s.setAttribute("aria-hidden","true"),s},position:20}),t.push({render(e,s,r){let n=document.createElement("span");n.className="cm-completionLabel";let{label:o}=e,a=0;for(let l=1;l<r.length;){let c=r[l++],h=r[l++];c>a&&n.appendChild(document.createTextNode(o.slice(a,c)));let u=n.appendChild(document.createElement("span"));u.appendChild(document.createTextNode(o.slice(c,h))),u.className="cm-completionMatchedText",a=h}return a<o.length&&n.appendChild(document.createTextNode(o.slice(a))),n},position:50},{render(e){if(!e.detail)return null;let s=document.createElement("span");return s.className="cm-completionDetail",s.textContent=e.detail,s},position:80}),t.sort((e,s)=>e.position-s.position).map(e=>e.render)}function yl(i,t,e){if(i<=e)return{from:0,to:i};if(t<0&&(t=0),t<=i>>1){let r=Math.floor(t/e);return{from:r*e,to:(r+1)*e}}let s=Math.floor((i-t)/e);return{from:i-(s+1)*e,to:i-s*e}}class Vb{constructor(t,e){this.view=t,this.stateField=e,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:a=>this.positionInfo(a),key:this},this.space=null,this.currentClass="";let s=t.state.field(e),{options:r,selected:n}=s.open,o=t.state.facet(Ht);this.optionContent=Hb(o),this.optionClass=o.optionClass,this.tooltipClass=o.tooltipClass,this.range=yl(r.length,n,o.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(t.state),this.dom.addEventListener("mousedown",a=>{for(let l=a.target,c;l&&l!=this.dom;l=l.parentNode)if(l.nodeName=="LI"&&(c=/-(\d+)$/.exec(l.id))&&+c[1]<r.length){Pu(t,r[+c[1]]),a.preventDefault();return}}),this.list=this.dom.appendChild(this.createListBox(r,s.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})}mount(){this.updateSel()}update(t){var e,s,r;let n=t.state.field(this.stateField),o=t.startState.field(this.stateField);this.updateTooltipClass(t.state),n!=o&&(this.updateSel(),((e=n.open)===null||e===void 0?void 0:e.disabled)!=((s=o.open)===null||s===void 0?void 0:s.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!(!((r=n.open)===null||r===void 0)&&r.disabled)))}updateTooltipClass(t){let e=this.tooltipClass(t);if(e!=this.currentClass){for(let s of this.currentClass.split(" "))s&&this.dom.classList.remove(s);for(let s of e.split(" "))s&&this.dom.classList.add(s);this.currentClass=e}}positioned(t){this.space=t,this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let t=this.view.state.field(this.stateField),e=t.open;if((e.selected>-1&&e.selected<this.range.from||e.selected>=this.range.to)&&(this.range=yl(e.options.length,e.selected,this.view.state.facet(Ht).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e.options,t.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})),this.updateSelectedOption(e.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:s}=e.options[e.selected],{info:r}=s;if(!r)return;let n=typeof r=="string"?document.createTextNode(r):r(s);if(!n)return;"then"in n?n.then(o=>{o&&this.view.state.field(this.stateField,!1)==t&&this.addInfoPane(o)}).catch(o=>Bt(this.view.state,o,"completion info")):this.addInfoPane(n)}}addInfoPane(t){let e=this.info=document.createElement("div");e.className="cm-tooltip cm-completionInfo",e.appendChild(t),this.dom.appendChild(e),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(t){let e=null;for(let s=this.list.firstChild,r=this.range.from;s;s=s.nextSibling,r++)r==t?s.hasAttribute("aria-selected")||(s.setAttribute("aria-selected","true"),e=s):s.hasAttribute("aria-selected")&&s.removeAttribute("aria-selected");return e&&Wb(this.list,e),e}measureInfo(){let t=this.dom.querySelector("[aria-selected]");if(!t||!this.info)return null;let e=this.dom.getBoundingClientRect(),s=this.info.getBoundingClientRect(),r=t.getBoundingClientRect(),n=this.space;if(!n){let f=this.dom.ownerDocument.defaultView||window;n={left:0,top:0,right:f.innerWidth,bottom:f.innerHeight}}if(r.top>Math.min(n.bottom,e.bottom)-10||r.bottom<Math.max(n.top,e.top)+10)return null;let o=this.view.textDirection==Y.RTL,a=o,l=!1,c,h="",u="",d=e.left-n.left,p=n.right-e.right;if(a&&d<Math.min(s.width,p)?a=!1:!a&&p<Math.min(s.width,d)&&(a=!0),s.width<=(a?d:p))h=Math.max(n.top,Math.min(r.top,n.bottom-s.height))-e.top+"px",c=Math.min(400,a?d:p)+"px";else{l=!0,c=Math.min(400,(o?e.right:n.right-e.left)-30)+"px";let f=n.bottom-e.bottom;f>=s.height||f>e.top?h=r.bottom-e.top+"px":u=e.bottom-r.top+"px"}return{top:h,bottom:u,maxWidth:c,class:l?o?"left-narrow":"right-narrow":a?"left":"right"}}positionInfo(t){this.info&&(t?(this.info.style.top=t.top,this.info.style.bottom=t.bottom,this.info.style.maxWidth=t.maxWidth,this.info.className="cm-tooltip cm-completionInfo cm-completionInfo-"+t.class):this.info.style.top="-1e6px")}createListBox(t,e,s){const r=document.createElement("ul");r.id=e,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions"));for(let n=s.from;n<s.to;n++){let{completion:o,match:a}=t[n];const l=r.appendChild(document.createElement("li"));l.id=e+"-"+n,l.setAttribute("role","option");let c=this.optionClass(o);c&&(l.className=c);for(let h of this.optionContent){let u=h(o,this.view.state,a);u&&l.appendChild(u)}}return s.from&&r.classList.add("cm-completionListIncompleteTop"),s.to<t.length&&r.classList.add("cm-completionListIncompleteBottom"),r}}function Ub(i){return t=>new Vb(t,i)}function Wb(i,t){let e=i.getBoundingClientRect(),s=t.getBoundingClientRect();s.top<e.top?i.scrollTop-=e.top-s.top:s.bottom>e.bottom&&(i.scrollTop+=s.bottom-e.bottom)}function vl(i){return(i.boost||0)*100+(i.apply?10:0)+(i.info?5:0)+(i.type?1:0)}function Kb(i,t){let e=[],s=0;for(let a of i)if(a.hasResult())if(a.result.filter===!1){let l=a.result.getMatch;for(let c of a.result.options){let h=[1e9-s++];if(l)for(let u of l(c))h.push(u);e.push(new ml(c,a,h))}}else{let l=new Fb(t.sliceDoc(a.from,a.to)),c;for(let h of a.result.options)(c=l.match(h.label))&&(h.boost!=null&&(c[0]+=h.boost),e.push(new ml(h,a,c)))}let r=[],n=null,o=t.facet(Ht).compareCompletions;for(let a of e.sort((l,c)=>c.match[0]-l.match[0]||o(l.completion,c.completion)))!n||n.label!=a.completion.label||n.detail!=a.completion.detail||n.type!=null&&a.completion.type!=null&&n.type!=a.completion.type||n.apply!=a.completion.apply?r.push(a):vl(a.completion)>vl(n)&&(r[r.length-1]=a),n=a.completion;return r}class is{constructor(t,e,s,r,n,o){this.options=t,this.attrs=e,this.tooltip=s,this.timestamp=r,this.selected=n,this.disabled=o}setSelected(t,e){return t==this.selected||t>=this.options.length?this:new is(this.options,bl(e,t),this.tooltip,this.timestamp,t,this.disabled)}static build(t,e,s,r,n){let o=Kb(t,e);if(!o.length)return r&&t.some(l=>l.state==1)?new is(r.options,r.attrs,r.tooltip,r.timestamp,r.selected,!0):null;let a=e.facet(Ht).selectOnOpen?0:-1;if(r&&r.selected!=a&&r.selected!=-1){let l=r.options[r.selected].completion;for(let c=0;c<o.length;c++)if(o[c].completion==l){a=c;break}}return new is(o,bl(s,a),{pos:t.reduce((l,c)=>c.hasResult()?Math.min(l,c.from):l,1e8),create:Ub(Gt),above:n.aboveCursor},r?r.timestamp:Date.now(),a,!1)}map(t){return new is(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:t.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class nr{constructor(t,e,s){this.active=t,this.id=e,this.open=s}static start(){return new nr(jb,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(t){let{state:e}=t,s=e.facet(Ht),n=(s.override||e.languageDataAt("autocomplete",we(e)).map(Gb)).map(a=>(this.active.find(c=>c.source==a)||new Dt(a,this.active.some(c=>c.state!=0)?1:0)).update(t,s));n.length==this.active.length&&n.every((a,l)=>a==this.active[l])&&(n=this.active);let o=this.open;o&&t.docChanged&&(o=o.map(t.changes)),t.selection||n.some(a=>a.hasResult()&&t.changes.touchesRange(a.from,a.to))||!qb(n,this.active)?o=is.build(n,e,this.id,o,s):o&&o.disabled&&!n.some(a=>a.state==1)&&(o=null),!o&&n.every(a=>a.state!=1)&&n.some(a=>a.hasResult())&&(n=n.map(a=>a.hasResult()?new Dt(a.source,0):a));for(let a of t.effects)a.is(Au)&&(o=o&&o.setSelected(a.value,this.id));return n==this.active&&o==this.open?this:new nr(n,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:Jb}}function qb(i,t){if(i==t)return!0;for(let e=0,s=0;;){for(;e<i.length&&!i[e].hasResult;)e++;for(;s<t.length&&!t[s].hasResult;)s++;let r=e==i.length,n=s==t.length;if(r||n)return r==n;if(i[e++].result!=t[s++].result)return!1}}const Jb={"aria-autocomplete":"list"};function bl(i,t){let e={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":i};return t>-1&&(e["aria-activedescendant"]=i+"-"+t),e}const jb=[];function Un(i){return i.isUserEvent("input.type")?"input":i.isUserEvent("delete.backward")?"delete":null}class Dt{constructor(t,e,s=-1){this.source=t,this.state=e,this.explicitPos=s}hasResult(){return!1}update(t,e){let s=Un(t),r=this;s?r=r.handleUserEvent(t,s,e):t.docChanged?r=r.handleChange(t):t.selection&&r.state!=0&&(r=new Dt(r.source,0));for(let n of t.effects)if(n.is(Eo))r=new Dt(r.source,1,n.value?we(t.state):-1);else if(n.is(or))r=new Dt(r.source,0);else if(n.is(Tu))for(let o of n.value)o.source==r.source&&(r=o);return r}handleUserEvent(t,e,s){return e=="delete"||!s.activateOnTyping?this.map(t.changes):new Dt(this.source,1)}handleChange(t){return t.changes.touchesRange(we(t.startState))?new Dt(this.source,0):this.map(t.changes)}map(t){return t.empty||this.explicitPos<0?this:new Dt(this.source,this.state,t.mapPos(this.explicitPos))}}class Os extends Dt{constructor(t,e,s,r,n){super(t,2,e),this.result=s,this.from=r,this.to=n}hasResult(){return!0}handleUserEvent(t,e,s){var r;let n=t.changes.mapPos(this.from),o=t.changes.mapPos(this.to,1),a=we(t.state);if((this.explicitPos<0?a<=n:a<this.from)||a>o||e=="delete"&&we(t.startState)==this.from)return new Dt(this.source,e=="input"&&s.activateOnTyping?1:0);let l=this.explicitPos<0?-1:t.changes.mapPos(this.explicitPos),c;return Yb(this.result.validFor,t.state,n,o)?new Os(this.source,l,this.result,n,o):this.result.update&&(c=this.result.update(this.result,n,o,new wu(t.state,a,l>=0)))?new Os(this.source,l,c,c.from,(r=c.to)!==null&&r!==void 0?r:we(t.state)):new Dt(this.source,1,l)}handleChange(t){return t.changes.touchesRange(this.from,this.to)?new Dt(this.source,0):this.map(t.changes)}map(t){return t.empty?this:new Os(this.source,this.explicitPos<0?-1:t.mapPos(this.explicitPos),this.result,t.mapPos(this.from),t.mapPos(this.to,1))}}function Yb(i,t,e,s){if(!i)return!1;let r=t.sliceDoc(e,s);return typeof i=="function"?i(r,e,s,t):Cu(i,!0).test(r)}const Eo=I.define(),or=I.define(),Tu=I.define({map(i,t){return i.map(e=>e.map(t))}}),Au=I.define(),Gt=ft.define({create(){return nr.start()},update(i,t){return i.update(t)},provide:i=>[vo.from(i,t=>t.tooltip),T.contentAttributes.from(i,t=>t.attrs)]});function ki(i,t="option"){return e=>{let s=e.state.field(Gt,!1);if(!s||!s.open||s.open.disabled||Date.now()-s.open.timestamp<e.state.facet(Ht).interactionDelay)return!1;let r=1,n;t=="page"&&(n=L_(e,s.open.tooltip))&&(r=Math.max(2,Math.floor(n.dom.offsetHeight/n.dom.querySelector("li").offsetHeight)-1));let{length:o}=s.open.options,a=s.open.selected>-1?s.open.selected+r*(i?1:-1):i?0:o-1;return a<0?a=t=="page"?0:o-1:a>=o&&(a=t=="page"?o-1:0),e.dispatch({effects:Au.of(a)}),!0}}const Qb=i=>{let t=i.state.field(Gt,!1);return i.state.readOnly||!t||!t.open||t.open.selected<0||Date.now()-t.open.timestamp<i.state.facet(Ht).interactionDelay?!1:(t.open.disabled||Pu(i,t.open.options[t.open.selected]),!0)},Xb=i=>i.state.field(Gt,!1)?(i.dispatch({effects:Eo.of(!0)}),!0):!1,Zb=i=>{let t=i.state.field(Gt,!1);return!t||!t.active.some(e=>e.state!=0)?!1:(i.dispatch({effects:or.of(null)}),!0)};class t0{constructor(t,e){this.active=t,this.context=e,this.time=Date.now(),this.updates=[],this.done=void 0}}const kl=50,e0=50,s0=1e3,i0=X.fromClass(class{constructor(i){this.view=i,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let t of i.state.field(Gt).active)t.state==1&&this.startQuery(t)}update(i){let t=i.state.field(Gt);if(!i.selectionSet&&!i.docChanged&&i.startState.field(Gt)==t)return;let e=i.transactions.some(s=>(s.selection||s.docChanged)&&!Un(s));for(let s=0;s<this.running.length;s++){let r=this.running[s];if(e||r.updates.length+i.transactions.length>e0&&Date.now()-r.time>s0){for(let n of r.context.abortListeners)try{n()}catch(o){Bt(this.view.state,o)}r.context.abortListeners=null,this.running.splice(s--,1)}else r.updates.push(...i.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=t.active.some(s=>s.state==1&&!this.running.some(r=>r.active.source==s.source))?setTimeout(()=>this.startUpdate(),kl):-1,this.composing!=0)for(let s of i.transactions)Un(s)=="input"?this.composing=2:this.composing==2&&s.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:i}=this.view,t=i.field(Gt);for(let e of t.active)e.state==1&&!this.running.some(s=>s.active.source==e.source)&&this.startQuery(e)}startQuery(i){let{state:t}=this.view,e=we(t),s=new wu(t,e,i.explicitPos==e),r=new t0(i,s);this.running.push(r),Promise.resolve(i.source(s)).then(n=>{r.context.aborted||(r.done=n||null,this.scheduleAccept())},n=>{this.view.dispatch({effects:or.of(null)}),Bt(this.view.state,n)})}scheduleAccept(){this.running.every(i=>i.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),kl))}accept(){var i;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let t=[],e=this.view.state.facet(Ht);for(let s=0;s<this.running.length;s++){let r=this.running[s];if(r.done===void 0)continue;if(this.running.splice(s--,1),r.done){let o=new Os(r.active.source,r.active.explicitPos,r.done,r.done.from,(i=r.done.to)!==null&&i!==void 0?i:we(r.updates.length?r.updates[0].startState:this.view.state));for(let a of r.updates)o=o.update(a,e);if(o.hasResult()){t.push(o);continue}}let n=this.view.state.field(Gt).active.find(o=>o.source==r.active.source);if(n&&n.state==1)if(r.done==null){let o=new Dt(r.active.source,0);for(let a of r.updates)o=o.update(a,e);o.state!=1&&t.push(o)}else this.startQuery(n)}t.length&&this.view.dispatch({effects:Tu.of(t)})}},{eventHandlers:{blur(){let i=this.view.state.field(Gt,!1);i&&i.tooltip&&this.view.state.facet(Ht).closeOnBlur&&this.view.dispatch({effects:or.of(null)})},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Eo.of(!1)}),20),this.composing=0}}}),r0=T.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:`${400}px`,boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:`${30}px`},".cm-completionInfo.cm-completionInfo-right-narrow":{left:`${30}px`},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Ks={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Ge=I.define({map(i,t){let e=t.mapPos(i,-1,xt.TrackAfter);return e??void 0}}),No=I.define({map(i,t){return t.mapPos(i)}}),Bo=new class extends Ve{};Bo.startSide=1;Bo.endSide=-1;const Du=ft.define({create(){return F.empty},update(i,t){if(t.selection){let e=t.state.doc.lineAt(t.selection.main.head).from,s=t.startState.doc.lineAt(t.startState.selection.main.head).from;e!=t.changes.mapPos(s,-1)&&(i=F.empty)}i=i.map(t.changes);for(let e of t.effects)e.is(Ge)?i=i.update({add:[Bo.range(e.value,e.value+1)]}):e.is(No)&&(i=i.update({filter:s=>s!=e.value}));return i}});function n0(){return[a0,Du]}const Qr="()[]{}<>";function Mu(i){for(let t=0;t<Qr.length;t+=2)if(Qr.charCodeAt(t)==i)return Qr.charAt(t+1);return ao(i<128?i:i+1)}function Ou(i,t){return i.languageDataAt("closeBrackets",t)[0]||Ks}const o0=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),a0=T.inputHandler.of((i,t,e,s)=>{if((o0?i.composing:i.compositionStarted)||i.state.readOnly)return!1;let r=i.state.selection.main;if(s.length>2||s.length==2&&Lt(ut(s,0))==1||t!=r.from||e!=r.to)return!1;let n=h0(i.state,s);return n?(i.dispatch(n),!0):!1}),l0=({state:i,dispatch:t})=>{if(i.readOnly)return!1;let s=Ou(i,i.selection.main.head).brackets||Ks.brackets,r=null,n=i.changeByRange(o=>{if(o.empty){let a=u0(i.doc,o.head);for(let l of s)if(l==a&&wr(i.doc,o.head)==Mu(ut(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:y.cursor(o.head-l.length)}}return{range:r=o}});return r||t(i.update(n,{scrollIntoView:!0,userEvent:"delete.backward"})),!r},c0=[{key:"Backspace",run:l0}];function h0(i,t){let e=Ou(i,i.selection.main.head),s=e.brackets||Ks.brackets;for(let r of s){let n=Mu(ut(r,0));if(t==r)return n==r?f0(i,r,s.indexOf(r+r+r)>-1,e):d0(i,r,n,e.before||Ks.before);if(t==n&&Iu(i,i.selection.main.from))return p0(i,r,n)}return null}function Iu(i,t){let e=!1;return i.field(Du).between(0,i.doc.length,s=>{s==t&&(e=!0)}),e}function wr(i,t){let e=i.sliceString(t,t+2);return e.slice(0,Lt(ut(e,0)))}function u0(i,t){let e=i.sliceString(t-2,t);return Lt(ut(e,0))==e.length?e:e.slice(1)}function d0(i,t,e,s){let r=null,n=i.changeByRange(o=>{if(!o.empty)return{changes:[{insert:t,from:o.from},{insert:e,from:o.to}],effects:Ge.of(o.to+t.length),range:y.range(o.anchor+t.length,o.head+t.length)};let a=wr(i.doc,o.head);return!a||/\s/.test(a)||s.indexOf(a)>-1?{changes:{insert:t+e,from:o.head},effects:Ge.of(o.head+t.length),range:y.cursor(o.head+t.length)}:{range:r=o}});return r?null:i.update(n,{scrollIntoView:!0,userEvent:"input.type"})}function p0(i,t,e){let s=null,r=i.selection.ranges.map(n=>n.empty&&wr(i.doc,n.head)==e?y.cursor(n.head+e.length):s=n);return s?null:i.update({selection:y.create(r,i.selection.mainIndex),scrollIntoView:!0,effects:i.selection.ranges.map(({from:n})=>No.of(n))})}function f0(i,t,e,s){let r=s.stringPrefixes||Ks.stringPrefixes,n=null,o=i.changeByRange(a=>{if(!a.empty)return{changes:[{insert:t,from:a.from},{insert:t,from:a.to}],effects:Ge.of(a.to+t.length),range:y.range(a.anchor+t.length,a.head+t.length)};let l=a.head,c=wr(i.doc,l),h;if(c==t){if($l(i,l))return{changes:{insert:t+t,from:l},effects:Ge.of(l+t.length),range:y.cursor(l+t.length)};if(Iu(i,l)){let u=e&&i.sliceDoc(l,l+t.length*3)==t+t+t;return{range:y.cursor(l+t.length*(u?3:1)),effects:No.of(l)}}}else{if(e&&i.sliceDoc(l-2*t.length,l)==t+t&&(h=xl(i,l-2*t.length,r))>-1&&$l(i,h))return{changes:{insert:t+t+t+t,from:l},effects:Ge.of(l+t.length),range:y.cursor(l+t.length)};if(i.charCategorizer(l)(c)!=J.Word&&xl(i,l,r)>-1&&!m0(i,l,t,r))return{changes:{insert:t+t,from:l},effects:Ge.of(l+t.length),range:y.cursor(l+t.length)}}return{range:n=a}});return n?null:i.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function $l(i,t){let e=yt(i).resolveInner(t+1);return e.parent&&e.from==t}function m0(i,t,e,s){let r=yt(i).resolveInner(t,-1),n=s.reduce((o,a)=>Math.max(o,a.length),0);for(let o=0;o<5;o++){let a=i.sliceDoc(r.from,Math.min(r.to,r.from+e.length+n)),l=a.indexOf(e);if(!l||l>-1&&s.indexOf(a.slice(0,l))>-1){let h=r.firstChild;for(;h&&h.from==r.from&&h.to-h.from>e.length+l;){if(i.sliceDoc(h.to-e.length,h.to)==e)return!1;h=h.firstChild}return!0}let c=r.to==t&&r.parent;if(!c)break;r=c}return!1}function xl(i,t,e){let s=i.charCategorizer(t);if(s(i.sliceDoc(t-1,t))!=J.Word)return t;for(let r of e){let n=t-r.length;if(i.sliceDoc(n,t)==r&&s(i.sliceDoc(n-1,n))!=J.Word)return n}return-1}function g0(i={}){return[Gt,Ht.of(i),i0,_0,r0]}const Ru=[{key:"Ctrl-Space",run:Xb},{key:"Escape",run:Zb},{key:"ArrowDown",run:ki(!0)},{key:"ArrowUp",run:ki(!1)},{key:"PageDown",run:ki(!0,"page")},{key:"PageUp",run:ki(!1,"page")},{key:"Enter",run:Qb}],_0=ys.highest(yo.computeN([Ht],i=>i.facet(Ht).defaultKeymap?[Ru]:[]));class y0{constructor(t,e,s){this.from=t,this.to=e,this.diagnostic=s}}class Be{constructor(t,e,s){this.diagnostics=t,this.panel=e,this.selected=s}static init(t,e,s){let r=t,n=s.facet(rs).markerFilter;n&&(r=n(r));let o=D.set(r.map(a=>a.from==a.to||a.from==a.to-1&&s.doc.lineAt(a.from).to==a.from?D.widget({widget:new T0(a),diagnostic:a}).range(a.from):D.mark({attributes:{class:"cm-lintRange cm-lintRange-"+a.severity},diagnostic:a}).range(a.from,a.to)),!0);return new Be(o,e,_s(o))}}function _s(i,t=null,e=0){let s=null;return i.between(e,1e9,(r,n,{spec:o})=>{if(!(t&&o.diagnostic!=t))return s=new y0(r,n,o.diagnostic),!1}),s}function v0(i,t){return!!(i.effects.some(e=>e.is(zo))||i.changes.touchesRange(t.pos))}function Lu(i,t){return i.field(Nt,!1)?t:t.concat(I.appendConfig.of([Nt,T.decorations.compute([Nt],e=>{let{selected:s,panel:r}=e.field(Nt);return!s||!r||s.from==s.to?D.none:D.set([k0.range(s.from,s.to)])}),R_($0,{hideOn:v0}),D0]))}function b0(i,t){return{effects:Lu(i,[zo.of(t)])}}const zo=I.define(),Go=I.define(),Eu=I.define(),Nt=ft.define({create(){return new Be(D.none,null,null)},update(i,t){if(t.docChanged){let e=i.diagnostics.map(t.changes),s=null;if(i.selected){let r=t.changes.mapPos(i.selected.from,1);s=_s(e,i.selected.diagnostic,r)||_s(e,null,r)}i=new Be(e,i.panel,s)}for(let e of t.effects)e.is(zo)?i=Be.init(e.value,i.panel,t.state):e.is(Go)?i=new Be(i.diagnostics,e.value?Cr.open:null,i.selected):e.is(Eu)&&(i=new Be(i.diagnostics,i.panel,e.value));return i},provide:i=>[Hs.from(i,t=>t.panel),T.decorations.from(i,t=>t.diagnostics)]}),k0=D.mark({class:"cm-lintRange cm-lintRange-active"});function $0(i,t,e){let{diagnostics:s}=i.state.field(Nt),r=[],n=2e8,o=0;s.between(t-(e<0?1:0),t+(e>0?1:0),(l,c,{spec:h})=>{t>=l&&t<=c&&(l==c||(t>l||e>0)&&(t<c||e<0))&&(r.push(h.diagnostic),n=Math.min(l,n),o=Math.max(c,o))});let a=i.state.facet(rs).tooltipFilter;return a&&(r=a(r)),r.length?{pos:n,end:o,above:i.state.doc.lineAt(n).to<o,create(){return{dom:x0(i,r)}}}:null}function x0(i,t){return U("ul",{class:"cm-tooltip-lint"},t.map(e=>Bu(i,e,!1)))}const S0=i=>{let t=i.state.field(Nt,!1);(!t||!t.panel)&&i.dispatch({effects:Lu(i.state,[Go.of(!0)])});let e=Fs(i,Cr.open);return e&&e.dom.querySelector(".cm-panel-lint ul").focus(),!0},Sl=i=>{let t=i.state.field(Nt,!1);return!t||!t.panel?!1:(i.dispatch({effects:Go.of(!1)}),!0)},w0=i=>{let t=i.state.field(Nt,!1);if(!t)return!1;let e=i.state.selection.main,s=t.diagnostics.iter(e.to+1);return!s.value&&(s=t.diagnostics.iter(0),!s.value||s.from==e.from&&s.to==e.to)?!1:(i.dispatch({selection:{anchor:s.from,head:s.to},scrollIntoView:!0}),!0)},C0=[{key:"Mod-Shift-m",run:S0,preventDefault:!0},{key:"F8",run:w0}],P0=X.fromClass(class{constructor(i){this.view=i,this.timeout=-1,this.set=!0;let{delay:t}=i.state.facet(rs);this.lintTime=Date.now()+t,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,t)}run(){let i=Date.now();if(i<this.lintTime-10)setTimeout(this.run,this.lintTime-i);else{this.set=!1;let{state:t}=this.view,{sources:e}=t.facet(rs);Promise.all(e.map(s=>Promise.resolve(s(this.view)))).then(s=>{let r=s.reduce((n,o)=>n.concat(o));this.view.state.doc==t.doc&&this.view.dispatch(b0(this.view.state,r))},s=>{Bt(this.view.state,s)})}}update(i){let t=i.state.facet(rs);(i.docChanged||t!=i.startState.facet(rs))&&(this.lintTime=Date.now()+t.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,t.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),rs=P.define({combine(i){return Object.assign({sources:i.map(t=>t.source)},ae(i.map(t=>t.config),{delay:750,markerFilter:null,tooltipFilter:null}))},enables:P0});function Nu(i){let t=[];if(i)t:for(let{name:e}of i){for(let s=0;s<e.length;s++){let r=e[s];if(/[a-zA-Z]/.test(r)&&!t.some(n=>n.toLowerCase()==r.toLowerCase())){t.push(r);continue t}}t.push("")}return t}function Bu(i,t,e){var s;let r=e?Nu(t.actions):[];return U("li",{class:"cm-diagnostic cm-diagnostic-"+t.severity},U("span",{class:"cm-diagnosticText"},t.renderMessage?t.renderMessage():t.message),(s=t.actions)===null||s===void 0?void 0:s.map((n,o)=>{let a=u=>{u.preventDefault();let d=_s(i.state.field(Nt).diagnostics,t);d&&n.apply(i,d.from,d.to)},{name:l}=n,c=r[o]?l.indexOf(r[o]):-1,h=c<0?l:[l.slice(0,c),U("u",l.slice(c,c+1)),l.slice(c+1)];return U("button",{type:"button",class:"cm-diagnosticAction",onclick:a,onmousedown:a,"aria-label":` Action: ${l}${c<0?"":` (access key "${r[o]})"`}.`},h)}),t.source&&U("div",{class:"cm-diagnosticSource"},t.source))}class T0 extends fe{constructor(t){super(),this.diagnostic=t}eq(t){return t.diagnostic==this.diagnostic}toDOM(){return U("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class wl{constructor(t,e){this.diagnostic=e,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Bu(t,e,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Cr{constructor(t){this.view=t,this.items=[];let e=r=>{if(r.keyCode==27)Sl(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:n}=this.items[this.selectedIndex],o=Nu(n.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==r.keyCode){let l=_s(this.view.state.field(Nt).diagnostics,n);l&&n.actions[a].apply(t,l.from,l.to)}}else return;r.preventDefault()},s=r=>{for(let n=0;n<this.items.length;n++)this.items[n].dom.contains(r.target)&&this.moveSelection(n)};this.list=U("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:e,onclick:s}),this.dom=U("div",{class:"cm-panel-lint"},this.list,U("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Sl(this.view)},"×")),this.update()}get selectedIndex(){let t=this.view.state.field(Nt).selected;if(!t)return-1;for(let e=0;e<this.items.length;e++)if(this.items[e].diagnostic==t.diagnostic)return e;return-1}update(){let{diagnostics:t,selected:e}=this.view.state.field(Nt),s=0,r=!1,n=null;for(t.between(0,this.view.state.doc.length,(o,a,{spec:l})=>{let c=-1,h;for(let u=s;u<this.items.length;u++)if(this.items[u].diagnostic==l.diagnostic){c=u;break}c<0?(h=new wl(this.view,l.diagnostic),this.items.splice(s,0,h),r=!0):(h=this.items[c],c>s&&(this.items.splice(s,c-s),r=!0)),e&&h.diagnostic==e.diagnostic?h.dom.hasAttribute("aria-selected")||(h.dom.setAttribute("aria-selected","true"),n=h):h.dom.hasAttribute("aria-selected")&&h.dom.removeAttribute("aria-selected"),s++});s<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new wl(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),n?(this.list.setAttribute("aria-activedescendant",n.id),this.view.requestMeasure({key:this,read:()=>({sel:n.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:a})=>{o.top<a.top?this.list.scrollTop-=a.top-o.top:o.bottom>a.bottom&&(this.list.scrollTop+=o.bottom-a.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let t=this.list.firstChild;function e(){let s=t;t=s.nextSibling,s.remove()}for(let s of this.items)if(s.dom.parentNode==this.list){for(;t!=s.dom;)e();t=s.dom.nextSibling}else this.list.insertBefore(s.dom,t);for(;t;)e()}moveSelection(t){if(this.selectedIndex<0)return;let e=this.view.state.field(Nt),s=_s(e.diagnostics,this.items[t].diagnostic);s&&this.view.dispatch({selection:{anchor:s.from,head:s.to},scrollIntoView:!0,effects:Eu.of(s)})}static open(t){return new Cr(t)}}function A0(i,t='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${t}>${encodeURIComponent(i)}</svg>')`}function Xr(i){return A0(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${i}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const D0=T.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Xr("#d11")},".cm-lintRange-warning":{backgroundImage:Xr("orange")},".cm-lintRange-info":{backgroundImage:Xr("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),M0=(()=>[U_(),q_(),h_(),lv(),Iy(),Zg(),r_(),B.allowMultipleSelections.of(!0),by(),Ly(By,{fallback:!0}),Wy(),n0(),g0(),S_(),P_(),g_(),pb(),yo.of([...c0,...lb,...Ob,..._v,...Dy,...Ru,...C0])])();class ar{constructor(t,e,s,r,n,o,a,l,c,h=0,u){this.p=t,this.stack=e,this.state=s,this.reducePos=r,this.pos=n,this.score=o,this.buffer=a,this.bufferBase=l,this.curContext=c,this.lookAhead=h,this.parent=u}toString(){return`[${this.stack.filter((t,e)=>e%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(t,e,s=0){let r=t.parser.context;return new ar(t,[],e,s,s,0,[],0,r?new Cl(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(t,e){this.stack.push(this.state,e,this.bufferBase+this.buffer.length),this.state=t}reduce(t){let e=t>>19,s=t&65535,{parser:r}=this.p,n=r.dynamicPrecedence(s);if(n&&(this.score+=n),e==0){this.pushState(r.getGoto(this.state,s,!0),this.reducePos),s<r.minRepeatTerm&&this.storeNode(s,this.reducePos,this.reducePos,4,!0),this.reduceContext(s,this.reducePos);return}let o=this.stack.length-(e-1)*3-(t&262144?6:0),a=o?this.stack[o-2]:0,l=this.reducePos-a;l>=2e3&&(a==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=l):this.p.lastBigReductionSize<l&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=a,this.p.lastBigReductionSize=l));let c=o?this.stack[o-1]:0,h=this.bufferBase+this.buffer.length-c;if(s<r.minRepeatTerm||t&131072){let u=r.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(s,a,u,h+4,!0)}if(t&262144)this.state=this.stack[o];else{let u=this.stack[o-3];this.state=r.getGoto(u,s,!0)}for(;this.stack.length>o;)this.stack.pop();this.reduceContext(s,a)}storeNode(t,e,s,r=4,n=!1){if(t==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,a=this.buffer.length;if(a==0&&o.parent&&(a=o.bufferBase-o.parent.bufferBase,o=o.parent),a>0&&o.buffer[a-4]==0&&o.buffer[a-1]>-1){if(e==s)return;if(o.buffer[a-2]>=e){o.buffer[a-2]=s;return}}}if(!n||this.pos==s)this.buffer.push(t,e,s,r);else{let o=this.buffer.length;if(o>0&&this.buffer[o-4]!=0)for(;o>0&&this.buffer[o-2]>s;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,r>4&&(r-=4);this.buffer[o]=t,this.buffer[o+1]=e,this.buffer[o+2]=s,this.buffer[o+3]=r}}shift(t,e,s){let r=this.pos;if(t&131072)this.pushState(t&65535,this.pos);else if(t&262144)this.pos=s,this.shiftContext(e,r),e<=this.p.parser.maxNode&&this.buffer.push(e,r,s,4);else{let n=t,{parser:o}=this.p;(s>this.pos||e<=o.maxNode)&&(this.pos=s,o.stateFlag(n,1)||(this.reducePos=s)),this.pushState(n,r),this.shiftContext(e,r),e<=o.maxNode&&this.buffer.push(e,r,s,4)}}apply(t,e,s){t&65536?this.reduce(t):this.shift(t,e,s)}useNode(t,e){let s=this.p.reused.length-1;(s<0||this.p.reused[s]!=t)&&(this.p.reused.push(t),s++);let r=this.pos;this.reducePos=this.pos=r+t.length,this.pushState(e,r),this.buffer.push(s,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,t,this,this.p.stream.reset(this.pos-t.length)))}split(){let t=this,e=t.buffer.length;for(;e>0&&t.buffer[e-2]>t.reducePos;)e-=4;let s=t.buffer.slice(e),r=t.bufferBase+e;for(;t&&r==t.bufferBase;)t=t.parent;return new ar(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,s,r,this.curContext,this.lookAhead,t)}recoverByDelete(t,e){let s=t<=this.p.parser.maxNode;s&&this.storeNode(t,this.pos,e,4),this.storeNode(0,this.pos,e,s?8:4),this.pos=this.reducePos=e,this.score-=190}canShift(t){for(let e=new O0(this);;){let s=this.p.parser.stateSlot(e.state,4)||this.p.parser.hasAction(e.state,t);if(s==0)return!1;if(!(s&65536))return!0;e.reduce(s)}}recoverByInsert(t){if(this.stack.length>=300)return[];let e=this.p.parser.nextStates(this.state);if(e.length>4<<1||this.stack.length>=120){let r=[];for(let n=0,o;n<e.length;n+=2)(o=e[n+1])!=this.state&&this.p.parser.hasAction(o,t)&&r.push(e[n],o);if(this.stack.length<120)for(let n=0;r.length<4<<1&&n<e.length;n+=2){let o=e[n+1];r.some((a,l)=>l&1&&a==o)||r.push(e[n],o)}e=r}let s=[];for(let r=0;r<e.length&&s.length<4;r+=2){let n=e[r+1];if(n==this.state)continue;let o=this.split();o.pushState(n,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(e[r],this.pos),o.score-=200,s.push(o)}return s}forceReduce(){let t=this.p.parser.stateSlot(this.state,5);if(!(t&65536))return!1;let{parser:e}=this.p;if(!e.validAction(this.state,t)){let s=t>>19,r=t&65535,n=this.stack.length-s*3;if(n<0||e.getGoto(this.stack[n],r,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:t}=this.p;return t.data[t.stateSlot(this.state,1)]==65535&&!t.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(t){if(this.state!=t.state||this.stack.length!=t.stack.length)return!1;for(let e=0;e<this.stack.length;e+=3)if(this.stack[e]!=t.stack[e])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(t){return this.p.parser.dialect.flags[t]}shiftContext(t,e){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,t,this,this.p.stream.reset(e)))}reduceContext(t,e){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,t,this,this.p.stream.reset(e)))}emitContext(){let t=this.buffer.length-1;(t<0||this.buffer[t]!=-3)&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let t=this.buffer.length-1;(t<0||this.buffer[t]!=-4)&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(t){if(t!=this.curContext.context){let e=new Cl(this.curContext.tracker,t);e.hash!=this.curContext.hash&&this.emitContext(),this.curContext=e}}setLookAhead(t){t>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=t)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class Cl{constructor(t,e){this.tracker=t,this.context=e,this.hash=t.strict?t.hash(e):0}}var Pl;(function(i){i[i.Insert=200]="Insert",i[i.Delete=190]="Delete",i[i.Reduce=100]="Reduce",i[i.MaxNext=4]="MaxNext",i[i.MaxInsertStackDepth=300]="MaxInsertStackDepth",i[i.DampenInsertStackDepth=120]="DampenInsertStackDepth",i[i.MinBigReduction=2e3]="MinBigReduction"})(Pl||(Pl={}));class O0{constructor(t){this.start=t,this.state=t.state,this.stack=t.stack,this.base=this.stack.length}reduce(t){let e=t&65535,s=t>>19;s==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(s-1)*3;let r=this.start.p.parser.getGoto(this.stack[this.base-3],e,!0);this.state=r}}class lr{constructor(t,e,s){this.stack=t,this.pos=e,this.index=s,this.buffer=t.buffer,this.index==0&&this.maybeNext()}static create(t,e=t.bufferBase+t.buffer.length){return new lr(t,e,e-t.bufferBase)}maybeNext(){let t=this.stack.parent;t!=null&&(this.index=this.stack.bufferBase-t.bufferBase,this.stack=t,this.buffer=t.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new lr(this.stack,this.pos,this.index)}}function $i(i,t=Uint16Array){if(typeof i!="string")return i;let e=null;for(let s=0,r=0;s<i.length;){let n=0;for(;;){let o=i.charCodeAt(s++),a=!1;if(o==126){n=65535;break}o>=92&&o--,o>=34&&o--;let l=o-32;if(l>=46&&(l-=46,a=!0),n+=l,a)break;n*=46}e?e[r++]=n:e=new t(n)}return e}class Mi{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const Tl=new Mi;class I0{constructor(t,e){this.input=t,this.ranges=e,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=Tl,this.rangeIndex=0,this.pos=this.chunkPos=e[0].from,this.range=e[0],this.end=e[e.length-1].to,this.readNext()}resolveOffset(t,e){let s=this.range,r=this.rangeIndex,n=this.pos+t;for(;n<s.from;){if(!r)return null;let o=this.ranges[--r];n-=s.from-o.to,s=o}for(;e<0?n>s.to:n>=s.to;){if(r==this.ranges.length-1)return null;let o=this.ranges[++r];n+=o.from-s.to,s=o}return n}clipPos(t){if(t>=this.range.from&&t<this.range.to)return t;for(let e of this.ranges)if(e.to>t)return Math.max(t,e.from);return this.end}peek(t){let e=this.chunkOff+t,s,r;if(e>=0&&e<this.chunk.length)s=this.pos+t,r=this.chunk.charCodeAt(e);else{let n=this.resolveOffset(t,1);if(n==null)return-1;if(s=n,s>=this.chunk2Pos&&s<this.chunk2Pos+this.chunk2.length)r=this.chunk2.charCodeAt(s-this.chunk2Pos);else{let o=this.rangeIndex,a=this.range;for(;a.to<=s;)a=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=s),s+this.chunk2.length>a.to&&(this.chunk2=this.chunk2.slice(0,a.to-s)),r=this.chunk2.charCodeAt(0)}}return s>=this.token.lookAhead&&(this.token.lookAhead=s+1),r}acceptToken(t,e=0){let s=e?this.resolveOffset(e,-1):this.pos;if(s==null||s<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=t,this.token.end=s}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:t,chunkPos:e}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=t,this.chunk2Pos=e,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let t=this.input.chunk(this.pos),e=this.pos+t.length;this.chunk=e>this.range.to?t.slice(0,this.range.to-this.pos):t,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(t=1){for(this.chunkOff+=t;this.pos+t>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();t-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=t,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(t,e){if(e?(this.token=e,e.start=t,e.lookAhead=t+1,e.value=e.extended=-1):this.token=Tl,this.pos!=t){if(this.pos=t,t==this.end)return this.setDone(),this;for(;t<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;t>=this.range.to;)this.range=this.ranges[++this.rangeIndex];t>=this.chunkPos&&t<this.chunkPos+this.chunk.length?this.chunkOff=t-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(t,e){if(t>=this.chunkPos&&e<=this.chunkPos+this.chunk.length)return this.chunk.slice(t-this.chunkPos,e-this.chunkPos);if(t>=this.chunk2Pos&&e<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(t-this.chunk2Pos,e-this.chunk2Pos);if(t>=this.range.from&&e<=this.range.to)return this.input.read(t,e);let s="";for(let r of this.ranges){if(r.from>=e)break;r.to>t&&(s+=this.input.read(Math.max(r.from,t),Math.min(r.to,e)))}return s}}class hs{constructor(t,e){this.data=t,this.id=e}token(t,e){let{parser:s}=e.p;R0(this.data,t,e,this.id,s.data,s.tokenPrecTable)}}hs.prototype.contextual=hs.prototype.fallback=hs.prototype.extend=!1;hs.prototype.fallback=hs.prototype.extend=!1;function R0(i,t,e,s,r,n){let o=0,a=1<<s,{dialect:l}=e.p.parser;t:for(;a&i[o];){let c=i[o+1];for(let p=o+3;p<c;p+=2)if((i[p+1]&a)>0){let f=i[p];if(l.allows(f)&&(t.token.value==-1||t.token.value==f||L0(f,t.token.value,r,n))){t.acceptToken(f);break}}let h=t.next,u=0,d=i[o+2];if(t.next<0&&d>u&&i[c+d*3-3]==65535&&i[c+d*3-3]==65535){o=i[c+d*3-1];continue t}for(;u<d;){let p=u+d>>1,f=c+p+(p<<1),g=i[f],m=i[f+1]||65536;if(h<g)d=p;else if(h>=m)u=p+1;else{o=i[f+2],t.advance();continue t}}break}}function Al(i,t,e){for(let s=t,r;(r=i[s])!=65535;s++)if(r==e)return s-t;return-1}function L0(i,t,e,s){let r=Al(e,s,t);return r<0||Al(e,s,i)<r}const Ut=typeof process<"u"&&process.env&&/\bparse\b/.test({}.LOG);let Zr=null;var Dl;(function(i){i[i.Margin=25]="Margin"})(Dl||(Dl={}));function Ml(i,t,e){let s=i.cursor(pt.IncludeAnonymous);for(s.moveTo(t);;)if(!(e<0?s.childBefore(t):s.childAfter(t)))for(;;){if((e<0?s.to<t:s.from>t)&&!s.type.isError)return e<0?Math.max(0,Math.min(s.to-1,t-25)):Math.min(i.length,Math.max(s.from+1,t+25));if(e<0?s.prevSibling():s.nextSibling())break;if(!s.parent())return e<0?0:i.length}}class E0{constructor(t,e){this.fragments=t,this.nodeSet=e,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let t=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(t){for(this.safeFrom=t.openStart?Ml(t.tree,t.from+t.offset,1)-t.offset:t.from,this.safeTo=t.openEnd?Ml(t.tree,t.to+t.offset,-1)-t.offset:t.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(t.tree),this.start.push(-t.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(t){if(t<this.nextStart)return null;for(;this.fragment&&this.safeTo<=t;)this.nextFragment();if(!this.fragment)return null;for(;;){let e=this.trees.length-1;if(e<0)return this.nextFragment(),null;let s=this.trees[e],r=this.index[e];if(r==s.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let n=s.children[r],o=this.start[e]+s.positions[r];if(o>t)return this.nextStart=o,null;if(n instanceof tt){if(o==t){if(o<this.safeFrom)return null;let a=o+n.length;if(a<=this.safeTo){let l=n.prop(R.lookAhead);if(!l||a+l<this.fragment.to)return n}}this.index[e]++,o+n.length>=Math.max(this.safeFrom,t)&&(this.trees.push(n),this.start.push(o),this.index.push(0))}else this.index[e]++,this.nextStart=o+n.length}}}class N0{constructor(t,e){this.stream=e,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=t.tokenizers.map(s=>new Mi)}getActions(t){let e=0,s=null,{parser:r}=t.p,{tokenizers:n}=r,o=r.stateSlot(t.state,3),a=t.curContext?t.curContext.hash:0,l=0;for(let c=0;c<n.length;c++){if(!(1<<c&o))continue;let h=n[c],u=this.tokens[c];if(!(s&&!h.fallback)&&((h.contextual||u.start!=t.pos||u.mask!=o||u.context!=a)&&(this.updateCachedToken(u,h,t),u.mask=o,u.context=a),u.lookAhead>u.end+25&&(l=Math.max(u.lookAhead,l)),u.value!=0)){let d=e;if(u.extended>-1&&(e=this.addActions(t,u.extended,u.end,e)),e=this.addActions(t,u.value,u.end,e),!h.extend&&(s=u,e>d))break}}for(;this.actions.length>e;)this.actions.pop();return l&&t.setLookAhead(l),!s&&t.pos==this.stream.end&&(s=new Mi,s.value=t.p.parser.eofTerm,s.start=s.end=t.pos,e=this.addActions(t,s.value,s.end,e)),this.mainToken=s,this.actions}getMainToken(t){if(this.mainToken)return this.mainToken;let e=new Mi,{pos:s,p:r}=t;return e.start=s,e.end=Math.min(s+1,r.stream.end),e.value=s==r.stream.end?r.parser.eofTerm:0,e}updateCachedToken(t,e,s){let r=this.stream.clipPos(s.pos);if(e.token(this.stream.reset(r,t),s),t.value>-1){let{parser:n}=s.p;for(let o=0;o<n.specialized.length;o++)if(n.specialized[o]==t.value){let a=n.specializers[o](this.stream.read(t.start,t.end),s);if(a>=0&&s.p.parser.dialect.allows(a>>1)){a&1?t.extended=a>>1:t.value=a>>1;break}}}else t.value=0,t.end=this.stream.clipPos(r+1)}putAction(t,e,s,r){for(let n=0;n<r;n+=3)if(this.actions[n]==t)return r;return this.actions[r++]=t,this.actions[r++]=e,this.actions[r++]=s,r}addActions(t,e,s,r){let{state:n}=t,{parser:o}=t.p,{data:a}=o;for(let l=0;l<2;l++)for(let c=o.stateSlot(n,l?2:1);;c+=3){if(a[c]==65535)if(a[c+1]==1)c=he(a,c+2);else{r==0&&a[c+1]==2&&(r=this.putAction(he(a,c+2),e,s,r));break}a[c]==e&&(r=this.putAction(he(a,c+1),e,s,r))}return r}}var Ol;(function(i){i[i.Distance=5]="Distance",i[i.MaxRemainingPerStep=3]="MaxRemainingPerStep",i[i.MinBufferLengthPrune=500]="MinBufferLengthPrune",i[i.ForceReduceLimit=10]="ForceReduceLimit",i[i.CutDepth=15e3]="CutDepth",i[i.CutTo=9e3]="CutTo",i[i.MaxLeftAssociativeReductionCount=1e3]="MaxLeftAssociativeReductionCount"})(Ol||(Ol={}));class B0{constructor(t,e,s,r){this.parser=t,this.input=e,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new I0(e,r),this.tokens=new N0(t,this.stream),this.topTerm=t.top[1];let{from:n}=r[0];this.stacks=[ar.start(this,t.top[0],n)],this.fragments=s.length&&this.stream.end-n>t.bufferLength*4?new E0(s,t.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let t=this.stacks,e=this.minStackPos,s=this.stacks=[],r,n;if(this.bigReductionCount>1e3&&t.length==1){let[o]=t;for(;o.forceReduce()&&o.stack.length&&o.stack[o.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<t.length;o++){let a=t[o];for(;;){if(this.tokens.mainToken=null,a.pos>e)s.push(a);else{if(this.advanceStack(a,s,t))continue;{r||(r=[],n=[]),r.push(a);let l=this.tokens.getMainToken(a);n.push(l.value,l.end)}}break}}if(!s.length){let o=r&&G0(r);if(o)return this.stackToTree(o);if(this.parser.strict)throw Ut&&r&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+e);this.recovering||(this.recovering=5)}if(this.recovering&&r){let o=this.stoppedAt!=null&&r[0].pos>this.stoppedAt?r[0]:this.runRecovery(r,n,s);if(o)return this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(s.length>o)for(s.sort((a,l)=>l.score-a.score);s.length>o;)s.pop();s.some(a=>a.reducePos>e)&&this.recovering--}else if(s.length>1){t:for(let o=0;o<s.length-1;o++){let a=s[o];for(let l=o+1;l<s.length;l++){let c=s[l];if(a.sameState(c)||a.buffer.length>500&&c.buffer.length>500)if((a.score-c.score||a.buffer.length-c.buffer.length)>0)s.splice(l--,1);else{s.splice(o--,1);continue t}}}}this.minStackPos=s[0].pos;for(let o=1;o<s.length;o++)s[o].pos<this.minStackPos&&(this.minStackPos=s[o].pos);return null}stopAt(t){if(this.stoppedAt!=null&&this.stoppedAt<t)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=t}advanceStack(t,e,s){let r=t.pos,{parser:n}=this,o=Ut?this.stackID(t)+" -> ":"";if(this.stoppedAt!=null&&r>this.stoppedAt)return t.forceReduce()?t:null;if(this.fragments){let c=t.curContext&&t.curContext.tracker.strict,h=c?t.curContext.hash:0;for(let u=this.fragments.nodeAt(r);u;){let d=this.parser.nodeSet.types[u.type.id]==u.type?n.getGoto(t.state,u.type.id):-1;if(d>-1&&u.length&&(!c||(u.prop(R.contextHash)||0)==h))return t.useNode(u,d),Ut&&console.log(o+this.stackID(t)+` (via reuse of ${n.getName(u.type.id)})`),!0;if(!(u instanceof tt)||u.children.length==0||u.positions[0]>0)break;let p=u.children[0];if(p instanceof tt&&u.positions[0]==0)u=p;else break}}let a=n.stateSlot(t.state,4);if(a>0)return t.reduce(a),Ut&&console.log(o+this.stackID(t)+` (via always-reduce ${n.getName(a&65535)})`),!0;if(t.stack.length>=15e3)for(;t.stack.length>9e3&&t.forceReduce(););let l=this.tokens.getActions(t);for(let c=0;c<l.length;){let h=l[c++],u=l[c++],d=l[c++],p=c==l.length||!s,f=p?t:t.split();if(f.apply(h,u,d),Ut&&console.log(o+this.stackID(f)+` (via ${h&65536?`reduce of ${n.getName(h&65535)}`:"shift"} for ${n.getName(u)} @ ${r}${f==t?"":", split"})`),p)return!0;f.pos>r?e.push(f):s.push(f)}return!1}advanceFully(t,e){let s=t.pos;for(;;){if(!this.advanceStack(t,null,null))return!1;if(t.pos>s)return Il(t,e),!0}}runRecovery(t,e,s){let r=null,n=!1;for(let o=0;o<t.length;o++){let a=t[o],l=e[o<<1],c=e[(o<<1)+1],h=Ut?this.stackID(a)+" -> ":"";if(a.deadEnd&&(n||(n=!0,a.restart(),Ut&&console.log(h+this.stackID(a)+" (restarted)"),this.advanceFully(a,s))))continue;let u=a.split(),d=h;for(let p=0;u.forceReduce()&&p<10&&(Ut&&console.log(d+this.stackID(u)+" (via force-reduce)"),!this.advanceFully(u,s));p++)Ut&&(d=this.stackID(u)+" -> ");for(let p of a.recoverByInsert(l))Ut&&console.log(h+this.stackID(p)+" (via recover-insert)"),this.advanceFully(p,s);this.stream.end>a.pos?(c==a.pos&&(c++,l=0),a.recoverByDelete(l,c),Ut&&console.log(h+this.stackID(a)+` (via recover-delete ${this.parser.getName(l)})`),Il(a,s)):(!r||r.score<a.score)&&(r=a)}return r}stackToTree(t){return t.close(),tt.build({buffer:lr.create(t),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:t.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(t){let e=(Zr||(Zr=new WeakMap)).get(t);return e||Zr.set(t,e=String.fromCodePoint(this.nextStackID++)),e+t}}function Il(i,t){for(let e=0;e<t.length;e++){let s=t[e];if(s.pos==i.pos&&s.sameState(i)){t[e].score<i.score&&(t[e]=i);return}}t.push(i)}class z0{constructor(t,e,s){this.source=t,this.flags=e,this.disabled=s}allows(t){return!this.disabled||this.disabled[t]==0}}class cr extends kh{constructor(t){if(super(),this.wrappers=[],t.version!=14)throw new RangeError(`Parser version (${t.version}) doesn't match runtime version (${14})`);let e=t.nodeNames.split(" ");this.minRepeatTerm=e.length;for(let a=0;a<t.repeatNodeCount;a++)e.push("");let s=Object.keys(t.topRules).map(a=>t.topRules[a][1]),r=[];for(let a=0;a<e.length;a++)r.push([]);function n(a,l,c){r[a].push([l,l.deserialize(String(c))])}if(t.nodeProps)for(let a of t.nodeProps){let l=a[0];typeof l=="string"&&(l=R[l]);for(let c=1;c<a.length;){let h=a[c++];if(h>=0)n(h,l,a[c++]);else{let u=a[c+-h];for(let d=-h;d>0;d--)n(a[c++],l,u);c++}}}this.nodeSet=new ko(e.map((a,l)=>Ot.define({name:l>=this.minRepeatTerm?void 0:a,id:l,props:r[l],top:s.indexOf(l)>-1,error:l==0,skipped:t.skippedNodes&&t.skippedNodes.indexOf(l)>-1}))),t.propSources&&(this.nodeSet=this.nodeSet.extend(...t.propSources)),this.strict=!1,this.bufferLength=yh;let o=$i(t.tokenData);this.context=t.context,this.specializerSpecs=t.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let a=0;a<this.specializerSpecs.length;a++)this.specialized[a]=this.specializerSpecs[a].term;this.specializers=this.specializerSpecs.map(Rl),this.states=$i(t.states,Uint32Array),this.data=$i(t.stateData),this.goto=$i(t.goto),this.maxTerm=t.maxTerm,this.tokenizers=t.tokenizers.map(a=>typeof a=="number"?new hs(o,a):a),this.topRules=t.topRules,this.dialects=t.dialects||{},this.dynamicPrecedences=t.dynamicPrecedences||null,this.tokenPrecTable=t.tokenPrec,this.termNames=t.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(t,e,s){let r=new B0(this,t,e,s);for(let n of this.wrappers)r=n(r,t,e,s);return r}getGoto(t,e,s=!1){let r=this.goto;if(e>=r[0])return-1;for(let n=r[e+1];;){let o=r[n++],a=o&1,l=r[n++];if(a&&s)return l;for(let c=n+(o>>1);n<c;n++)if(r[n]==t)return l;if(a)return-1}}hasAction(t,e){let s=this.data;for(let r=0;r<2;r++)for(let n=this.stateSlot(t,r?2:1),o;;n+=3){if((o=s[n])==65535)if(s[n+1]==1)o=s[n=he(s,n+2)];else{if(s[n+1]==2)return he(s,n+2);break}if(o==e||o==0)return he(s,n+1)}return 0}stateSlot(t,e){return this.states[t*6+e]}stateFlag(t,e){return(this.stateSlot(t,0)&e)>0}validAction(t,e){if(e==this.stateSlot(t,4))return!0;for(let s=this.stateSlot(t,1);;s+=3){if(this.data[s]==65535)if(this.data[s+1]==1)s=he(this.data,s+2);else return!1;if(e==he(this.data,s+1))return!0}}nextStates(t){let e=[];for(let s=this.stateSlot(t,1);;s+=3){if(this.data[s]==65535)if(this.data[s+1]==1)s=he(this.data,s+2);else break;if(!(this.data[s+2]&1)){let r=this.data[s+1];e.some((n,o)=>o&1&&n==r)||e.push(this.data[s],r)}}return e}configure(t){let e=Object.assign(Object.create(cr.prototype),this);if(t.props&&(e.nodeSet=this.nodeSet.extend(...t.props)),t.top){let s=this.topRules[t.top];if(!s)throw new RangeError(`Invalid top rule name ${t.top}`);e.top=s}return t.tokenizers&&(e.tokenizers=this.tokenizers.map(s=>{let r=t.tokenizers.find(n=>n.from==s);return r?r.to:s})),t.specializers&&(e.specializers=this.specializers.slice(),e.specializerSpecs=this.specializerSpecs.map((s,r)=>{let n=t.specializers.find(a=>a.from==s.external);if(!n)return s;let o=Object.assign(Object.assign({},s),{external:n.to});return e.specializers[r]=Rl(o),o})),t.contextTracker&&(e.context=t.contextTracker),t.dialect&&(e.dialect=this.parseDialect(t.dialect)),t.strict!=null&&(e.strict=t.strict),t.wrap&&(e.wrappers=e.wrappers.concat(t.wrap)),t.bufferLength!=null&&(e.bufferLength=t.bufferLength),e}hasWrappers(){return this.wrappers.length>0}getName(t){return this.termNames?this.termNames[t]:String(t<=this.maxNode&&this.nodeSet.types[t].name||t)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(t){let e=this.dynamicPrecedences;return e==null?0:e[t]||0}parseDialect(t){let e=Object.keys(this.dialects),s=e.map(()=>!1);if(t)for(let n of t.split(" ")){let o=e.indexOf(n);o>=0&&(s[o]=!0)}let r=null;for(let n=0;n<e.length;n++)if(!s[n])for(let o=this.dialects[e[n]],a;(a=this.data[o++])!=65535;)(r||(r=new Uint8Array(this.maxTerm+1)))[a]=1;return new z0(t,s,r)}static deserialize(t){return new cr(t)}}function he(i,t){return i[t]|i[t+1]<<16}function G0(i){let t=null;for(let e of i){let s=e.p.stoppedAt;(e.pos==e.p.stream.end||s!=null&&e.pos>s)&&e.p.parser.stateFlag(e.state,2)&&(!t||t.score<e.score)&&(t=e)}return t}function Rl(i){if(i.external){let t=i.extend?1:0;return(e,s)=>i.external(e,s)<<1|t}return i.get}const F0=$h({String:v.string,Number:v.number,"True False":v.bool,PropertyName:v.propertyName,Null:v.null,",":v.separator,"[ ]":v.squareBracket,"{ }":v.brace}),H0=cr.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#CjOOQO'#Cp'#CpQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CrOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59U,59UO!iQPO,59UOVQPO,59QOqQPO'#CkO!nQPO,59^OOQO1G.k1G.kOVQPO'#ClO!vQPO,59aOOQO1G.p1G.pOOQO1G.l1G.lOOQO,59V,59VOOQO-E6i-E6iOOQO,59W,59WOOQO-E6j-E6j",stateData:"#O~OcOS~OQSORSOSSOTSOWQO]ROePO~OVXOeUO~O[[O~PVOg^O~Oh_OVfX~OVaO~OhbO[iX~O[dO~Oh_OVfa~OhbO[ia~O",goto:"!kjPPPPPPkPPkqwPPk{!RPPP!XP!ePP!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:"⚠ JsonText True False Null Number String } { Object Property PropertyName ] [ Array",maxTerm:25,nodeProps:[["openedBy",7,"{",12,"["],["closedBy",8,"}",13,"]"]],propSources:[F0],skippedNodes:[0],repeatNodeCount:2,tokenData:"(p~RaXY!WYZ!W]^!Wpq!Wrs!]|}$i}!O$n!Q!R$w!R![&V![!]&h!}#O&m#P#Q&r#Y#Z&w#b#c'f#h#i'}#o#p(f#q#r(k~!]Oc~~!`Upq!]qr!]rs!rs#O!]#O#P!w#P~!]~!wOe~~!zXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#g~#jR!Q![#s!c!i#s#T#Z#s~#vR!Q![$P!c!i$P#T#Z$P~$SR!Q![$]!c!i$]#T#Z$]~$`R!Q![!]!c!i!]#T#Z!]~$nOh~~$qQ!Q!R$w!R![&V~$|RT~!O!P%V!g!h%k#X#Y%k~%YP!Q![%]~%bRT~!Q![%]!g!h%k#X#Y%k~%nR{|%w}!O%w!Q![%}~%zP!Q![%}~&SPT~!Q![%}~&[ST~!O!P%V!Q![&V!g!h%k#X#Y%k~&mOg~~&rO]~~&wO[~~&zP#T#U&}~'QP#`#a'T~'WP#g#h'Z~'^P#X#Y'a~'fOR~~'iP#i#j'l~'oP#`#a'r~'uP#`#a'x~'}OS~~(QP#f#g(T~(WP#i#j(Z~(^P#X#Y(a~(fOQ~~(kOW~~(pOV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0}),V0=qi.define({name:"json",parser:H0.configure({props:[Ch.add({Object:Za({except:/^\s*\}/}),Array:Za({except:/^\s*\]/})}),Th.add({"Object Array":$y})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function U0(){return new hy(V0)}const W0={props:{editorId:{type:String,required:!0},language:{type:String,default(){return"json"}},placeholder:{type:String,default(){return""}},value:{type:String,default(){return""}},readonly:{type:Boolean,default(){return!1}}},data(){return{editorInstance:null}},computed:{languageExtension(){switch(this.language){case"json":default:return U0()}}},mounted(){const i=this,t=[M0,this.languageExtension,T.domEventHandlers({paste(e,s){i.$emit("paste",{event:e,editorView:s})},blur(e,s){i.$emit("blur",{event:e,editorView:s})},input(e,s){i.$emit("input",s.viewState.state.doc.toString())}}),b_(i.placeholder)];this.readonly&&t.push(T.editable.of(!1)),this.$nextTick(()=>{this.editorInstance=new T({doc:this.value,extensions:t,parent:document.getElementById(i.editorId)})})}};var K0=function(){var t=this,e=t._self._c;return e("div",{staticClass:"aioseo-code-editor",attrs:{id:t.editorId}})},q0=[],J0=$(W0,K0,q0,!1,null,null,null,null);const zu=J0.exports;const j0={props:{header:String,singularName:String,repeater:Boolean,amountOfGroups:Number,maxGroups:{type:Number,default(){return 50}}},computed:{addLink(){return this.$t.sprintf(this.$t.__("Add Another %1$s",this.$tdPro),this.singularName)},showLink(){return!this.repeater||!this.singularName?!1:!this.amountOfGroups||!this.maxGroups?!0:this.amountOfGroups<this.maxGroups}}};var Y0=function(){var t=this,e=t._self._c;return e("section",{staticClass:"aioseo-schema-field-group"},[e("div",{staticClass:"header"},[e("span",{staticClass:"header-title"},[t._v(t._s(t.header))]),t.showLink?e("a",{attrs:{href:"#"},on:{click:function(s){return t.$emit("addGroup")}}},[t._v(" "+t._s(t.addLink)+" ")]):t._e()]),e("div",{staticClass:"fields"},[t._t("default")],2),e("div",{staticClass:"footer"},[t.showLink?e("a",{attrs:{href:"#"},on:{click:function(s){return t.$emit("addGroup")}}},[t._v(" "+t._s(t.addLink)+" ")]):t._e()])])},Q0=[],X0=$(j0,Y0,Q0,!1,null,null,null,null);const bt=X0.exports,ti={computed:{...M(["schema"]),hasFeature(){if(this.schema.isEditingDefaultGraph)return!0;switch(this.schema.graph.graphName){case"Event":case"JobPosting":break;default:return!0}const i=this.schema.graph.graphName.replace(new RegExp("(?<!^)([A-Z][a-z]|(?<=[a-z])[A-Z])"),"-$1").toLowerCase();return this.$license.hasCoreFeature("schema",i)},graphNotIncluded(){const i=this.$links.getPricingUrl("graph-"+this.schema.graph.graphName.toLowerCase(),"schema-generator","graph-"+this.schema.graph.graphName.toLowerCase(),"pricing");return this.$t.__("This feature is not available in your current plan.",this.$tdPro)+" "+this.$t.sprintf('<a href="%1$s" target="_blank">%2$s</a>',i,this.$t.sprintf(this.$t.__("Upgrade your plan and unlock %1$s schema",this.$tdPro),this.schema.graph.graphName.replace(/([A-Z].*?)([A-Z])(?![A-Z])/,"$1 $2")))},isEditing(){return this.schema.isEdtingCustomGraph||this.schema.isEditingCustomTemplate||this.schema.isEditingDefaultGraph||this.schema.isEditingGraph||this.schema.isEditingTemplate}}},Z0={components:{BaseDatepicker:Oe,BaseImg:At,BaseRadio:Js,BaseRadioToggle:Ke,CoreHtmlTagsEditor:et,CoreSettingsRow:G,FieldGroup:bt,SvgCirclePlus:at},mixins:[ti,Me,Tt],data(){return{strings:{type:this.$t.__("Type",this.$tdPro),article:this.$t.__("Article",this.$tdPro),blogPosting:this.$t.__("Blog Post",this.$tdPro),newsArticle:this.$t.__("News Article",this.$tdPro),name:this.$t.__("Name",this.$tdPro),headline:this.$t.__("Headline",this.$tdPro),description:this.$t.__("Description",this.$tdPro),author:this.$t.__("Author",this.$tdPro),url:this.$t.__("URL",this.$tdPro),keywords:this.$t.__("Keywords",this.$tdPro),placeholder:this.$t.__("Type to enter a keyword...",this.$tdPro),tagPlaceholder:this.$t.__("Press enter to create a keyword",this.$tdPro),dates:this.$t.__("Dates",this.$tdPro),includeDates:this.$t.__("Include Dates",this.$tdPro),includeDatesDescription:this.$t.__("Disable this setting to prevent search engines from including dates in their search results.",this.$tdPro),datePublished:this.$t.__("Date Published",this.$tdPro),dateModified:this.$t.__("Date Modified",this.$tdPro),image:this.$t.__("Image",this.$tdPro),uploadOrSelectImage:this.$t.__("Upload or Select Image",this.$tdPro),pasteYourImageUrl:this.$t.__("Paste your image URL or select a new image",this.$tdPro),minimumSize:this.$t.__("Minimum size: 112px x 112px, The image must be in JPG, PNG, GIF, SVG, or WEBP format.",this.$tdPro),remove:this.$t.__("Remove",this.$tdPro)}}},computed:{...M(["currentPost","schema"])},methods:{...E(["setGraph","setIsDirty"]),updateImage(i){this.schema.graph.properties.image=i}},beforeMount(){if(this.schema.graph.id)return;const i=this.schema.isEditingDefaultGraph?this.currentPost.schema.default.graphName:"Article",t=El()?window.wp.data.select("core/editor").getEditedPostAttribute("date"):"";this.setGraph({id:"#aioseo-article-"+new Date().getTime().toString(36),slug:"article",graphName:"Article",label:this.$t.__("Article",this.$tdPro),properties:{type:i,name:"#post_title",headline:"#post_title",description:"",image:"",keywords:"",author:{name:"#author_name",url:"#author_url"},dates:{include:!0,datePublished:t,dateModified:""}}}),this.$nextTick(()=>{this.setIsDirty(!1)})},async mounted(){this.schema.graph.id||await Vl().then(i=>{!this.schema.graph||!this.schema.graph.properties||(this.schema.graph.properties.image=i,this.$nextTick(()=>{this.setIsDirty(!1)}))})}};var tk=function(){var t=this,e=t._self._c;return e("div",{staticClass:"graph-editor-fields graph-article"},[t.schema.isEditingDefaultGraph?t._e():e("core-settings-row",{attrs:{name:t.strings.type},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-radio",{attrs:{size:"small",name:"type",value:t.schema.graph.properties.type==="Article",type:2},on:{input:function(s){t.schema.graph.properties.type="Article"}}},[t._v(" "+t._s(t.strings.article)+" ")]),e("base-radio",{attrs:{size:"small",name:"type",value:t.schema.graph.properties.type==="BlogPosting",type:2},on:{input:function(s){t.schema.graph.properties.type="BlogPosting"}}},[t._v(" "+t._s(t.strings.blogPosting)+" ")]),e("base-radio",{attrs:{size:"small",name:"type",value:t.schema.graph.properties.type==="NewsArticle",type:2},on:{input:function(s){t.schema.graph.properties.type="NewsArticle"}}},[t._v(" "+t._s(t.strings.newsArticle)+" ")])]},proxy:!0}],null,!1,4099738192)}),e("core-settings-row",{attrs:{name:t.strings.name},scopedSlots:t._u([{key:"content",fn:function(){return[e("core-html-tags-editor",{attrs:{"line-numbers":!1,single:"","tags-context":"schema",defaultMenuOrientation:"top","default-tags":["post_title","separator_sa","site_title"],tagsDescription:""},model:{value:t.schema.graph.properties.name,callback:function(s){t.$set(t.schema.graph.properties,"name",s)},expression:"schema.graph.properties.name"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.headline},scopedSlots:t._u([{key:"content",fn:function(){return[e("core-html-tags-editor",{attrs:{"line-numbers":!1,single:"","tags-context":"schema",defaultMenuOrientation:"top","default-tags":["post_title","separator_sa","site_title"],tagsDescription:""},model:{value:t.schema.graph.properties.headline,callback:function(s){t.$set(t.schema.graph.properties,"headline",s)},expression:"schema.graph.properties.headline"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.description},scopedSlots:t._u([{key:"content",fn:function(){return[e("core-html-tags-editor",{attrs:{"line-numbers":!1,single:"","tags-context":"schema",defaultMenuOrientation:"top","default-tags":["post_excerpt","separator_sa","site_title"],tagsDescription:""},model:{value:t.schema.graph.properties.description,callback:function(s){t.$set(t.schema.graph.properties,"description",s)},expression:"schema.graph.properties.description"}})]},proxy:!0}])}),e("core-settings-row",{staticClass:"image-field",attrs:{name:t.strings.image,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("div",{staticClass:"image-upload"},[e("base-input",{attrs:{size:"medium",placeholder:t.strings.pasteYourImageUrl},model:{value:t.schema.graph.properties.image,callback:function(s){t.$set(t.schema.graph.properties,"image",s)},expression:"schema.graph.properties.image"}}),e("base-button",{staticClass:"insert-image",attrs:{size:"medium",type:"black"},on:{click:function(s){return t.openUploadModal("articleImage",t.updateImage)}}},[e("svg-circle-plus"),t._v(" "+t._s(t.strings.uploadOrSelectImage)+" ")],1),e("base-button",{staticClass:"remove-image",attrs:{size:"medium",type:"gray"},on:{click:function(s){t.schema.graph.properties.image=""}}},[t._v(" "+t._s(t.strings.remove)+" ")])],1),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.minimumSize)+" ")]),e("base-img",{staticClass:"image-preview",attrs:{src:t.schema.graph.properties.image}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.keywords,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-select",{attrs:{size:"medium",multiple:"",taggable:"",options:t.getJsonValue(t.schema.graph.properties.keywords)||[],value:t.getJsonValue(t.schema.graph.properties.keywords)||[],placeholder:t.strings.placeholder,"tag-placeholder":t.strings.tagPlaceholder},on:{input:s=>t.schema.graph.properties.keywords=t.setJsonValue(s)}})]},proxy:!0}])}),e("field-group",{attrs:{header:t.strings.author}},[e("core-settings-row",{attrs:{name:t.strings.name},scopedSlots:t._u([{key:"content",fn:function(){return[e("core-html-tags-editor",{attrs:{"line-numbers":!1,single:"","tags-context":"schema",defaultMenuOrientation:"top","default-tags":["author_name","author_first_name","author_last_name"],tagsDescription:""},model:{value:t.schema.graph.properties.author.name,callback:function(s){t.$set(t.schema.graph.properties.author,"name",s)},expression:"schema.graph.properties.author.name"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.url},scopedSlots:t._u([{key:"content",fn:function(){return[e("core-html-tags-editor",{attrs:{"line-numbers":!1,single:"","tags-context":"schema",defaultMenuOrientation:"top","default-tags":["author_url"],tagsDescription:"","disable-emoji":""},model:{value:t.schema.graph.properties.author.url,callback:function(s){t.$set(t.schema.graph.properties.author,"url",s)},expression:"schema.graph.properties.author.url"}})]},proxy:!0}])})],1),e("field-group",{attrs:{header:t.strings.dates}},[e("core-settings-row",{attrs:{name:t.strings.includeDates,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-radio-toggle",{attrs:{name:"includeDates",options:[{label:t.$constants.GLOBAL_STRINGS.no,value:!1,activeClass:"dark"},{label:t.$constants.GLOBAL_STRINGS.yes,value:!0}]},model:{value:t.schema.graph.properties.dates.include,callback:function(s){t.$set(t.schema.graph.properties.dates,"include",s)},expression:"schema.graph.properties.dates.include"}}),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.includeDatesDescription)+" ")])]},proxy:!0}])}),t.schema.graph.properties.dates.include?e("core-settings-row",{attrs:{name:t.strings.datePublished,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-datepicker",{attrs:{size:"medium"},model:{value:t.schema.graph.properties.dates.datePublished,callback:function(s){t.$set(t.schema.graph.properties.dates,"datePublished",s)},expression:"schema.graph.properties.dates.datePublished"}})]},proxy:!0}],null,!1,1583032560)}):t._e(),t.schema.graph.properties.dates.include?e("core-settings-row",{attrs:{name:t.strings.dateModified,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-datepicker",{attrs:{size:"medium",timePicker:"",timePicker24Hour:""},model:{value:t.schema.graph.properties.dates.dateModified,callback:function(s){t.$set(t.schema.graph.properties.dates,"dateModified",s)},expression:"schema.graph.properties.dates.dateModified"}})]},proxy:!0}],null,!1,1170649487)}):t._e()],1)],1)},ek=[],sk=$(Z0,tk,ek,!1,null,null,null,null);const ik=sk.exports;const rk={props:{header:String,groupIndex:Number,hideDelete:Boolean},data(){return{strings:{delete:this.$t.__("Delete",this.$tdPro)}}},computed:{headerTitle(){return this.groupIndex===void 0?this.header:this.header+" "+(this.groupIndex+1)}}};var nk=function(){var t=this,e=t._self._c;return e("section",{staticClass:"aioseo-schema-field-group-inner"},[e("div",{staticClass:"header"},[e("span",{staticClass:"header-title"},[t._v(t._s(t.headerTitle))]),t.hideDelete?t._e():e("base-button",{staticClass:"small",attrs:{type:"gray"},nativeOn:{click:function(s){return s.preventDefault(),t.$emit("deleteGroup",t.groupIndex)}}},[t._v(" "+t._s(t.strings.delete)+" ")])],1),e("div",{staticClass:"fields-inner"},[t._t("default")],2)])},ok=[],ak=$(rk,nk,ok,!1,null,null,null,null);const Ye=ak.exports,lk={components:{BaseImg:At,BaseDatepicker:Oe,BaseRadio:Js,CoreHtmlTagsEditor:et,CoreSettingsRow:G,FieldGroup:bt,FieldGroupInner:Ye,SvgCirclePlus:at},mixins:[Tt],data(){return{editionDefaults:{name:"",bookEdition:"",author:"",isbn:"",datePublished:"",format:""},strings:{name:this.$t.__("Title",this.$tdPro),description:this.$t.__("Description",this.$tdPro),author:this.$t.__("Author",this.$tdPro),image:this.$t.__("Image",this.$tdPro),uploadOrSelectImage:this.$t.__("Upload or Select Image",this.$tdPro),pasteYourImageUrl:this.$t.__("Paste your image URL or select a new image",this.$tdPro),minimumSize:this.$t.__("Minimum size: 112px x 112px, The image must be in JPG, PNG, GIF, SVG, or WEBP format.",this.$tdPro),remove:this.$t.__("Remove",this.$tdPro),editions:this.$t.__("Editions",this.$tdPro),edition:this.$t.__("Edition",this.$tdPro),bookEdition:this.$t.__("Book Edition",this.$tdPro),isbn:this.$t.__("ISBN",this.$tdPro),datePublished:this.$t.__("Date Published",this.$tdPro),bookFormat:this.$t.__("Book Format",this.$tdPro),paperback:this.$t.__("Paperback",this.$tdPro),hardcover:this.$t.__("Hardcover",this.$tdPro),eBook:this.$t.__("eBook",this.$tdPro),audioBook:this.$t.__("Audiobook",this.$tdPro)}}},computed:{...M(["schema"])},methods:{...E(["setGraph","setIsDirty"]),updateImage(i){this.schema.graph.properties.image=i},addGroup(){const i=JSON.parse(JSON.stringify(this.editionDefaults));this.schema.graph.properties.editions.push(i)},deleteGroup(i){this.$delete(this.schema.graph.properties.editions,i)}},beforeMount(){this.schema.graph.id||(this.setGraph({id:"#aioseo-book-"+new Date().getTime().toString(36),slug:"book",graphName:"Book",label:this.$t.__("Book",this.$tdPro),properties:{name:"#post_title",description:"",author:"",reviewLocation:"",editions:[JSON.parse(JSON.stringify(this.editionDefaults))],reviewRating:{rating:"",minimumRating:1,maximumRating:5},image:""}}),this.$nextTick(()=>{this.setIsDirty(!1)}))}};var ck=function(){var t=this,e=t._self._c;return e("div",{staticClass:"graph-editor-fields graph-book"},[e("core-settings-row",{attrs:{name:t.strings.name},scopedSlots:t._u([{key:"content",fn:function(){return[e("core-html-tags-editor",{attrs:{"line-numbers":!1,single:"","tags-context":"schema",defaultMenuOrientation:"top","default-tags":["post_title","separator_sa","site_title"],tagsDescription:""},model:{value:t.schema.graph.properties.name,callback:function(s){t.$set(t.schema.graph.properties,"name",s)},expression:"schema.graph.properties.name"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.description},scopedSlots:t._u([{key:"content",fn:function(){return[e("core-html-tags-editor",{attrs:{"line-numbers":!1,single:"","tags-context":"schema",defaultMenuOrientation:"top","default-tags":["post_excerpt","separator_sa","site_title"],tagsDescription:""},model:{value:t.schema.graph.properties.description,callback:function(s){t.$set(t.schema.graph.properties,"description",s)},expression:"schema.graph.properties.description"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.author},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium"},model:{value:t.schema.graph.properties.author,callback:function(s){t.$set(t.schema.graph.properties,"author",s)},expression:"schema.graph.properties.author"}})]},proxy:!0}])}),e("core-settings-row",{staticClass:"image-field",attrs:{name:t.strings.image,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("div",{staticClass:"image-upload"},[e("base-input",{attrs:{size:"medium",placeholder:t.strings.pasteYourImageUrl},model:{value:t.schema.graph.properties.image,callback:function(s){t.$set(t.schema.graph.properties,"image",s)},expression:"schema.graph.properties.image"}}),e("base-button",{staticClass:"insert-image",attrs:{size:"medium",type:"black"},on:{click:function(s){return t.openUploadModal("bookImage",t.updateImage)}}},[e("svg-circle-plus"),t._v(" "+t._s(t.strings.uploadOrSelectImage)+" ")],1),e("base-button",{staticClass:"remove-image",attrs:{size:"medium",type:"gray"},on:{click:function(s){t.schema.graph.properties.image=""}}},[t._v(" "+t._s(t.strings.remove)+" ")])],1),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.minimumSize)+" ")]),e("base-img",{staticClass:"image-preview",attrs:{src:t.schema.graph.properties.image}})]},proxy:!0}])}),e("field-group",{attrs:{header:t.strings.editions,singularName:t.strings.edition,amountOfGroups:t.schema.graph.properties.editions.length,repeater:""},on:{addGroup:t.addGroup}},t._l(t.schema.graph.properties.editions,function(s,r){return e("div",{key:r},[e("field-group-inner",{attrs:{header:t.strings.edition,groupIndex:r,hideDelete:r===0&&t.schema.graph.properties.editions.length<2},on:{deleteGroup:t.deleteGroup}},[e("core-settings-row",{attrs:{name:t.strings.name},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium"},model:{value:s.name,callback:function(n){t.$set(s,"name",n)},expression:"edition.name"}})]},proxy:!0}],null,!0)}),e("core-settings-row",{attrs:{name:t.strings.bookEdition},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium"},model:{value:s.bookEdition,callback:function(n){t.$set(s,"bookEdition",n)},expression:"edition.bookEdition"}})]},proxy:!0}],null,!0)}),e("core-settings-row",{attrs:{name:t.strings.author},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium"},model:{value:s.author,callback:function(n){t.$set(s,"author",n)},expression:"edition.author"}})]},proxy:!0}],null,!0)}),e("core-settings-row",{attrs:{name:t.strings.isbn},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium"},model:{value:s.isbn,callback:function(n){t.$set(s,"isbn",n)},expression:"edition.isbn"}})]},proxy:!0}],null,!0)}),e("core-settings-row",{attrs:{name:t.strings.bookFormat},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-radio",{attrs:{size:"small",name:"type",value:s.bookFormat==="Paperback",type:2},on:{input:function(n){s.bookFormat="Paperback"}}},[t._v(" "+t._s(t.strings.paperback)+" ")]),e("base-radio",{attrs:{size:"small",name:"type",value:s.bookFormat==="Hardcover",type:2},on:{input:function(n){s.bookFormat="Hardcover"}}},[t._v(" "+t._s(t.strings.hardcover)+" ")]),e("base-radio",{attrs:{size:"small",name:"type",value:s.bookFormat==="EBook",type:2},on:{input:function(n){s.bookFormat="EBook"}}},[t._v(" "+t._s(t.strings.eBook)+" ")]),e("base-radio",{attrs:{size:"small",name:"type",value:s.bookFormat==="AudiobooKFormat",type:2},on:{input:function(n){s.bookFormat="AudiobookFormat"}}},[t._v(" "+t._s(t.strings.audioBook)+" ")])]},proxy:!0}],null,!0)}),e("core-settings-row",{attrs:{name:t.strings.datePublished,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-datepicker",{attrs:{size:"medium"},model:{value:s.datePublished,callback:function(n){t.$set(s,"datePublished",n)},expression:"edition.datePublished"}})]},proxy:!0}],null,!0)})],1)],1)}),0)],1)},hk=[],uk=$(lk,ck,hk,!1,null,null,null,null);const dk=uk.exports,pk={components:{BaseImg:At,CoreHtmlTagsEditor:et,CoreSettingsRow:G,FieldGroup:bt,SvgCirclePlus:at},mixins:[Tt],data(){return{strings:{name:this.$t.__("Name",this.$tdPro),description:this.$t.__("Description",this.$tdPro),provider:this.$t.__("Provider",this.$tdPro),url:this.$t.__("URL",this.$tdPro),image:this.$t.__("Image",this.$tdPro),uploadOrSelectImage:this.$t.__("Upload or Select Image",this.$tdPro),pasteYourImageUrl:this.$t.__("Paste your image URL or select a new image",this.$tdPro),minimumSize:this.$t.__("Minimum size: 112px x 112px, The image must be in JPG, PNG, GIF, SVG, or WEBP format.",this.$tdPro),remove:this.$t.__("Remove",this.$tdPro),organizationDescription:this.$t.sprintf(this.$t.__("Leave this empty if you want to use the Organization you've set under %1$s.",this.$tdPro),this.$links.getPlainLink(this.$t.__("Search Appearance > Knowledge Graph",this.$tdPro),this.$aioseo.urls.aio.searchAppearance+"#/global-settings"))}}},computed:{...M(["schema"])},methods:{...E(["setGraph","setIsDirty"]),updateImage(i){this.schema.graph.properties.provider.image=i}},beforeMount(){this.schema.graph.id||(this.setGraph({id:"#aioseo-course-"+new Date().getTime().toString(36),slug:"course",graphName:"Course",label:this.$t.__("Course",this.$tdPro),properties:{name:"#post_title",description:"#post_excerpt",provider:{name:"",url:"",image:""}}}),this.$nextTick(()=>{this.setIsDirty(!1)}))}};var fk=function(){var t=this,e=t._self._c;return e("div",{staticClass:"graph-editor-fields graph-course"},[e("core-settings-row",{attrs:{name:t.strings.name},scopedSlots:t._u([{key:"content",fn:function(){return[e("core-html-tags-editor",{attrs:{"line-numbers":!1,single:"","tags-context":"schema",defaultMenuOrientation:"top","default-tags":["post_title","separator_sa","site_title"],tagsDescription:""},model:{value:t.schema.graph.properties.name,callback:function(s){t.$set(t.schema.graph.properties,"name",s)},expression:"schema.graph.properties.name"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.description},scopedSlots:t._u([{key:"content",fn:function(){return[e("core-html-tags-editor",{attrs:{"line-numbers":!1,single:"","tags-context":"schema",defaultMenuOrientation:"top","default-tags":["post_excerpt","separator_sa","site_title"],tagsDescription:""},model:{value:t.schema.graph.properties.description,callback:function(s){t.$set(t.schema.graph.properties,"description",s)},expression:"schema.graph.properties.description"}})]},proxy:!0}])}),e("field-group",{attrs:{header:t.strings.provider}},[e("core-settings-row",{attrs:{name:t.strings.name},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium"},model:{value:t.schema.graph.properties.provider.name,callback:function(s){t.$set(t.schema.graph.properties.provider,"name",s)},expression:"schema.graph.properties.provider.name"}}),t.$aioseo.options.searchAppearance.global.schema.siteRepresents==="organization"?e("div",{staticClass:"aioseo-description",domProps:{innerHTML:t._s(t.strings.organizationDescription)}}):t._e()]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.url},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium",validation:"url"},model:{value:t.schema.graph.properties.provider.url,callback:function(s){t.$set(t.schema.graph.properties.provider,"url",s)},expression:"schema.graph.properties.provider.url"}})]},proxy:!0}])}),e("core-settings-row",{staticClass:"image-field",attrs:{name:t.strings.image,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("div",{staticClass:"image-upload"},[e("base-input",{attrs:{size:"medium",placeholder:t.strings.pasteYourImageUrl},model:{value:t.schema.graph.properties.provider.image,callback:function(s){t.$set(t.schema.graph.properties.provider,"image",s)},expression:"schema.graph.properties.provider.image"}}),e("base-button",{staticClass:"insert-image",attrs:{size:"medium",type:"black"},on:{click:function(s){return t.openUploadModal("articleImage",t.updateImage)}}},[e("svg-circle-plus"),t._v(" "+t._s(t.strings.uploadOrSelectImage)+" ")],1),e("base-button",{staticClass:"remove-image",attrs:{size:"medium",type:"gray"},on:{click:function(s){t.schema.graph.properties.provider.image=""}}},[t._v(" "+t._s(t.strings.remove)+" ")])],1),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.minimumSize)+" ")]),e("base-img",{staticClass:"image-preview",attrs:{src:t.schema.graph.properties.provider.image}})]},proxy:!0}])})],1)],1)},mk=[],gk=$(pk,fk,mk,!1,null,null,null,null);const _k=gk.exports,yk={components:{BaseRadioToggle:Ke,BaseTextarea:qe,CoreHtmlTagsEditor:et,CoreSettingsRow:G,FieldGroup:bt,FieldGroupInner:Ye},mixins:[Me],data(){return{subDatasetDefaults:{name:"",description:""},downloadDefaults:{encodingFormat:"",url:""},strings:{name:this.$t.__("Name",this.$tdPro),description:this.$t.__("Description",this.$tdPro),descriptionDescription:this.$t.__("A short summary describing the dataset. The description must be between 50 and 5,000 characters long.",this.$tdPro),url:this.$t.__("URL",this.$tdPro),sameAs:this.$t.__("Same As",this.$tdPro),sameAsDescription:this.$t.__("The URL of a reference web page that unambiguously indicates the dataset's identity.",this.$tdPro),alternateName:this.$t.__("Alternative Names",this.$tdPro),alternateNamePlaceholder:this.$t.__("Type to enter an alternative name...",this.$tdPro),alternateNameTagPlaceholder:this.$t.__("Press enter to create an alternative name",this.$tdPro),author:this.$t.__("Author",this.$tdPro),type:this.$t.__("Type",this.$tdPro),organization:this.$t.__("Organization",this.$tdPro),person:this.$t.__("Person",this.$tdPro),identifier:this.$t.__("Identifier",this.$tdPro),isAccessibleForFree:this.$t.__("Accessible for Free",this.$tdPro),license:this.$t.__("License",this.$tdPro),version:this.$t.__("Version",this.$tdPro),keywords:this.$t.__("Keywords",this.$tdPro),keywordsPlaceholder:this.$t.__("Type to enter a keyword...",this.$tdPro),keywordsTagPlaceholder:this.$t.__("Press enter to create a keyword",this.$tdPro),temporalCoverage:this.$t.__("Temporal Coverage",this.$tdPro),temporalCoverageDescription:this.$t.__("The specific time interval this dataset covers.",this.$tdPro),spatialCoverage:this.$t.__("Spatial Coverage",this.$tdPro),spatialCoverageDescription:this.$t.__("The specific coordinates where the measurements were collected.",this.$tdPro),dataCatalog:this.$t.__("Data Catalog",this.$tdPro),dataCatalogDescription:this.$t.__("The name of the larger Data Catalog this dataset is a part of.",this.$tdPro),subDatasets:this.$t.__("Sub Datasets",this.$tdPro),subDataset:this.$t.__("Sub Dataset",this.$tdPro),downloads:this.$t.__("Downloads",this.$tdPro),download:this.$t.__("Download",this.$tdPro),encodingFormat:this.$t.__("Encoding Format",this.$tdPro),encodingFormatDescription:this.$t.__("The file format of the download.",this.$tdPro)}}},computed:{...M(["schema"])},methods:{...E(["setGraph","setIsDirty"]),addGroupSubDataset(){const i=JSON.parse(JSON.stringify(this.subDatasetDefaults));this.schema.graph.properties.subDatasets.push(i)},deleteGroupSubDataset(i){this.$delete(this.schema.graph.properties.subDatasets,i)},addGroupDownload(){const i=JSON.parse(JSON.stringify(this.downloadDefaults));this.schema.graph.properties.downloads.push(i)},deleteGroupDownload(i){this.$delete(this.schema.graph.properties.downloads,i)}},beforeMount(){this.schema.graph.id||(this.setGraph({id:"#aioseo-dataset-"+new Date().getTime().toString(36),slug:"dataset",graphName:"Dataset",label:this.$t.__("Dataset",this.$tdPro),properties:{name:"#post_title",description:"#post_excerpt",sameAs:"",alternateName:"",dataCatalog:"",identifier:"",license:"",free:!0,keywords:"",temporalCoverage:"",spatialCoverage:"",subDatasets:[JSON.parse(JSON.stringify(this.subDatasetDefaults))],downloads:[JSON.parse(JSON.stringify(this.downloadDefaults))]}}),this.$nextTick(()=>{this.setIsDirty(!1)}))}};var vk=function(){var t=this,e=t._self._c;return e("div",{staticClass:"graph-editor-fields graph-dataset"},[e("core-settings-row",{attrs:{name:t.strings.name},scopedSlots:t._u([{key:"content",fn:function(){return[e("core-html-tags-editor",{attrs:{"line-numbers":!1,single:"","tags-context":"schema",defaultMenuOrientation:"top","default-tags":["post_title","separator_sa","site_title"],tagsDescription:""},model:{value:t.schema.graph.properties.name,callback:function(s){t.$set(t.schema.graph.properties,"name",s)},expression:"schema.graph.properties.name"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.description},scopedSlots:t._u([{key:"content",fn:function(){return[e("core-html-tags-editor",{attrs:{"line-numbers":!1,single:"","tags-context":"schema",defaultMenuOrientation:"top","default-tags":["post_excerpt","separator_sa","site_title"],tagsDescription:""},model:{value:t.schema.graph.properties.description,callback:function(s){t.$set(t.schema.graph.properties,"description",s)},expression:"schema.graph.properties.description"}}),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.descriptionDescription)+" ")])]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.sameAs},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium",validation:"url"},model:{value:t.schema.graph.properties.sameAs,callback:function(s){t.$set(t.schema.graph.properties,"sameAs",s)},expression:"schema.graph.properties.sameAs"}}),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.sameAsDescription)+" ")])]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.alternateName,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-select",{attrs:{size:"medium",multiple:"",taggable:"",options:t.getJsonValue(t.schema.graph.properties.alternateName)||[],value:t.getJsonValue(t.schema.graph.properties.alternateName)||[],placeholder:t.strings.alternateNamePlaceholder,"tag-placeholder":t.strings.alternateNameTagPlaceholder},on:{input:s=>t.schema.graph.properties.alternateName=t.setJsonValue(s)}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.dataCatalog},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium"},model:{value:t.schema.graph.properties.dataCatalog,callback:function(s){t.$set(t.schema.graph.properties,"dataCatalog",s)},expression:"schema.graph.properties.dataCatalog"}}),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.dataCatalogDescription)+" ")])]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.identifier},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium"},model:{value:t.schema.graph.properties.identifier,callback:function(s){t.$set(t.schema.graph.properties,"identifier",s)},expression:"schema.graph.properties.identifier"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.license},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium"},model:{value:t.schema.graph.properties.license,callback:function(s){t.$set(t.schema.graph.properties,"license",s)},expression:"schema.graph.properties.license"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.isAccessibleForFree,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-radio-toggle",{attrs:{name:"isAccessibleForFree",options:[{label:t.$constants.GLOBAL_STRINGS.no,value:!1,activeClass:"dark"},{label:t.$constants.GLOBAL_STRINGS.yes,value:!0}]},model:{value:t.schema.graph.properties.free,callback:function(s){t.$set(t.schema.graph.properties,"free",s)},expression:"schema.graph.properties.free"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.keywords,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-select",{attrs:{size:"medium",multiple:"",taggable:"",options:t.getJsonValue(t.schema.graph.properties.keywords)||[],value:t.getJsonValue(t.schema.graph.properties.keywords)||[],placeholder:t.strings.keywordsPlaceholder,"tag-placeholder":t.strings.keywordsTagPlaceholder},on:{input:s=>t.schema.graph.properties.keywords=t.setJsonValue(s)}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.temporalCoverage},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium"},model:{value:t.schema.graph.properties.temporalCoverage,callback:function(s){t.$set(t.schema.graph.properties,"temporalCoverage",s)},expression:"schema.graph.properties.temporalCoverage"}}),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.temporalCoverageDescription)+" ")])]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.spatialCoverage},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium"},model:{value:t.schema.graph.properties.spatialCoverage,callback:function(s){t.$set(t.schema.graph.properties,"spatialCoverage",s)},expression:"schema.graph.properties.spatialCoverage"}}),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.spatialCoverageDescription)+" ")])]},proxy:!0}])}),e("field-group",{attrs:{header:t.strings.subDatasets,singularName:t.strings.subDataset,amountOfGroups:t.schema.graph.properties.subDatasets.length,repeater:""},on:{addGroup:t.addGroupSubDataset}},t._l(t.schema.graph.properties.subDatasets,function(s,r){return e("div",{key:r},[e("field-group-inner",{attrs:{header:t.strings.subDataset,groupIndex:r,hideDelete:r===0&&t.schema.graph.properties.subDatasets.length<2},on:{deleteGroup:t.deleteGroupSubDataset}},[e("core-settings-row",{attrs:{name:t.strings.name},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium"},model:{value:s.name,callback:function(n){t.$set(s,"name",n)},expression:"subDataset.name"}})]},proxy:!0}],null,!0)}),e("core-settings-row",{attrs:{name:t.strings.description},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-textarea",{attrs:{size:"medium",minHeight:120},model:{value:s.description,callback:function(n){t.$set(s,"description",n)},expression:"subDataset.description"}}),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.descriptionDescription)+" ")])]},proxy:!0}],null,!0)})],1)],1)}),0),e("field-group",{attrs:{header:t.strings.downloads,singularName:t.strings.download,amountOfGroups:t.schema.graph.properties.downloads.length,repeater:""},on:{addGroup:t.addGroupDownload}},t._l(t.schema.graph.properties.downloads,function(s,r){return e("div",{key:r},[e("field-group-inner",{attrs:{header:t.strings.download,groupIndex:r,hideDelete:r===0&&t.schema.graph.properties.downloads.length<2},on:{deleteGroup:t.deleteGroupDownload}},[e("core-settings-row",{attrs:{name:t.strings.encodingFormat},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium"},model:{value:s.encodingFormat,callback:function(n){t.$set(s,"encodingFormat",n)},expression:"download.encodingFormat"}})]},proxy:!0}],null,!0)}),e("core-settings-row",{attrs:{name:t.strings.url},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium",validation:"url"},model:{value:s.url,callback:function(n){t.$set(s,"url",n)},expression:"download.url"}})]},proxy:!0}],null,!0)})],1)],1)}),0)],1)},bk=[],kk=$(yk,vk,bk,!1,null,null,null,null);const $k=kk.exports,xk={components:{BaseDatepicker:Oe,BaseImg:At,BaseRadio:Js,CoreHtmlTagsEditor:et,CoreSettingsRow:G,FieldGroup:bt,FieldGroupInner:Ye,SvgCirclePlus:at},mixins:[Tt],data(){return{imageDefaults:{url:""},strings:{name:this.$t.__("Name",this.$tdPro),description:this.$t.__("Description",this.$tdPro),eventType:this.$t.__("Type",this.$tdPro),status:this.$t.__("Status",this.$tdPro),attendanceMode:this.$t.__("Attendance Mode",this.$tdPro),online:this.$t.__("Online",this.$tdPro),offline:this.$t.__("Offline",this.$tdPro),onlineAndOffline:this.$t.__("Online + Offline",this.$tdPro),dates:this.$t.__("Dates",this.$tdPro),startDate:this.$t.__("Start Date",this.$tdPro),endDate:this.$t.__("End Date",this.$tdPro),url:this.$t.__("URL",this.$tdPro),location:this.$t.__("Location",this.$tdPro),streetAddress:this.$t.__("Street Address",this.$tdPro),locality:this.$t.__("Locality",this.$tdPro),postalCode:this.$t.__("Postal Code",this.$tdPro),region:this.$t.__("Region",this.$tdPro),country:this.$t.__("Country",this.$tdPro),nameDescription:this.$t.__("The name of the place or venue where the event is being held. Leave this empty if the event doesn't take place at a physical location.",this.$tdPro),urlDescription:this.$t.__("A URL for the place the place or venue where the event is being held.",this.$tdPro),offer:this.$t.__("Offer",this.$tdPro),price:this.$t.__("Price",this.$tdPro),priceDescription:this.$t.__('If the event can be attended for free, set the price to "0".',this.$tdPro),currency:this.$t.__("Currency",this.$tdPro),validFrom:this.$t.__("Sale Start Date",this.$tdPro),offerUrlDescription:this.$t.__("A URL to the page where tickets can be purchased.",this.$tdPro),type:this.$t.__("Type",this.$tdPro),organizer:this.$t.__("Organizer",this.$tdPro),person:this.$t.__("Person",this.$tdPro),organization:this.$t.__("Organization",this.$tdPro),organizationDescription:this.$t.sprintf(this.$t.__("Leave this empty if you want to use the Organization you've set under %1$s.",this.$tdPro),this.$links.getPlainLink(this.$t.__("Search Appearance > Knowledge Graph",this.$tdPro),this.$aioseo.urls.aio.searchAppearance+"#/global-settings")),performer:this.$t.__("Performer",this.$tdPro),images:this.$t.__("Images",this.$tdPro),image:this.$t.__("Image",this.$tdPro),uploadOrSelectImage:this.$t.__("Upload or Select Image",this.$tdPro),pasteYourImageUrl:this.$t.__("Paste your image URL or select a new image",this.$tdPro),minimumSize:this.$t.__("Minimum size: 112px x 112px, The image must be in JPG, PNG, GIF, SVG, or WEBP format.",this.$tdPro),remove:this.$t.__("Remove",this.$tdPro)}}},computed:{...M(["schema"])},methods:{...E(["setGraph","setIsDirty"]),getEventType(i){return this.$constants.EVENT_TYPE_LIST.find(t=>t.value===i)},saveEventType(i){this.$set(this.schema.graph.properties,"eventType",i)},getEventStatus(i){return this.$constants.EVENT_STATUS_LIST.find(t=>t.value===i)},saveEventStatus(i){this.$set(this.schema.graph.properties,"status",i)},getCurrency(i){return this.$constants.CURRENCY_LIST.find(t=>t.value===i)},saveCurrency(i){this.$set(this.schema.graph.properties.offer,"currency",i)},addGroup(){const i=JSON.parse(JSON.stringify(this.imageDefaults));this.schema.graph.properties.images.push(i)},deleteGroup(i){this.$delete(this.schema.graph.properties.images,i)}},beforeMount(){this.schema.graph.id||(this.setGraph({id:"#aioseo-event-"+new Date().getTime().toString(36),slug:"event",graphName:"Event",label:this.$t.__("Event",this.$tdPro),properties:{name:"#post_title",description:"#post_excerpt",eventType:"",status:"EventScheduled",attendanceMode:"OfflineEventAttendanceMode",image:"",dates:{startDate:"",endDate:""},location:{name:"",url:"",streetAddress:"",locality:"",postalCode:"",region:"",country:""},offer:{price:"",currency:"",validFrom:"",availablity:"",url:""},organizer:{type:"Organization",name:"",url:""},performer:{type:"Organization",name:"",url:""},images:[JSON.parse(JSON.stringify(this.imageDefaults))]}}),this.$nextTick(()=>{this.setIsDirty(!1)}))}};var Sk=function(){var t=this,e=t._self._c;return e("div",{staticClass:"graph-editor-fields graph-event"},[e("core-settings-row",{attrs:{name:t.strings.name},scopedSlots:t._u([{key:"content",fn:function(){return[e("core-html-tags-editor",{attrs:{"line-numbers":!1,single:"","tags-context":"schema",defaultMenuOrientation:"top","default-tags":["post_title","separator_sa","site_title"],tagsDescription:""},model:{value:t.schema.graph.properties.name,callback:function(s){t.$set(t.schema.graph.properties,"name",s)},expression:"schema.graph.properties.name"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.description},scopedSlots:t._u([{key:"content",fn:function(){return[e("core-html-tags-editor",{attrs:{"line-numbers":!1,single:"","tags-context":"schema",defaultMenuOrientation:"top","default-tags":["post_excerpt","separator_sa","site_title"],tagsDescription:""},model:{value:t.schema.graph.properties.description,callback:function(s){t.$set(t.schema.graph.properties,"description",s)},expression:"schema.graph.properties.description"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.eventType,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-select",{attrs:{size:"medium",options:t.$constants.EVENT_TYPE_LIST,value:t.getEventType(t.schema.graph.properties.eventType)},on:{input:s=>t.saveEventType(s.value)}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.status,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-select",{attrs:{size:"medium",options:t.$constants.EVENT_STATUS_LIST,value:t.getEventStatus(t.schema.graph.properties.status)},on:{input:s=>t.saveEventStatus(s.value)}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.attendanceMode},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-radio",{attrs:{size:"small",name:"type",value:t.schema.graph.properties.attendanceMode==="OnlineEventAttendanceMode",type:2},on:{input:function(s){t.schema.graph.properties.attendanceMode="OnlineEventAttendanceMode"}}},[t._v(" "+t._s(t.strings.online)+" ")]),e("base-radio",{attrs:{size:"small",name:"type",value:t.schema.graph.properties.attendanceMode==="OfflineEventAttendanceMode",type:2},on:{input:function(s){t.schema.graph.properties.attendanceMode="OfflineEventAttendanceMode"}}},[t._v(" "+t._s(t.strings.offline)+" ")]),e("base-radio",{attrs:{size:"small",name:"type",value:t.schema.graph.properties.attendanceMode==="MixedEventAttendanceMode",type:2},on:{input:function(s){t.schema.graph.properties.attendanceMode="MixedEventAttendanceMode"}}},[t._v(" "+t._s(t.strings.onlineAndOffline)+" ")])]},proxy:!0}])}),e("field-group",{attrs:{header:t.strings.dates}},[e("core-settings-row",{attrs:{name:t.strings.startDate,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-datepicker",{attrs:{size:"medium"},model:{value:t.schema.graph.properties.dates.startDate,callback:function(s){t.$set(t.schema.graph.properties.dates,"startDate",s)},expression:"schema.graph.properties.dates.startDate"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.endDate,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-datepicker",{attrs:{size:"medium",timePicker:"",timePicker24Hour:""},model:{value:t.schema.graph.properties.dates.endDate,callback:function(s){t.$set(t.schema.graph.properties.dates,"endDate",s)},expression:"schema.graph.properties.dates.endDate"}})]},proxy:!0}])})],1),e("field-group",{attrs:{header:t.strings.location}},[e("core-settings-row",{attrs:{name:t.strings.name},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium"},model:{value:t.schema.graph.properties.location.name,callback:function(s){t.$set(t.schema.graph.properties.location,"name",s)},expression:"schema.graph.properties.location.name"}}),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.nameDescription)+" ")])]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.url},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium",validation:"url"},model:{value:t.schema.graph.properties.location.url,callback:function(s){t.$set(t.schema.graph.properties.location,"url",s)},expression:"schema.graph.properties.location.url"}}),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.urlDescription)+" ")])]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.streetAddress},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium"},model:{value:t.schema.graph.properties.location.streetAddress,callback:function(s){t.$set(t.schema.graph.properties.location,"streetAddress",s)},expression:"schema.graph.properties.location.streetAddress"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.locality},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium"},model:{value:t.schema.graph.properties.location.locality,callback:function(s){t.$set(t.schema.graph.properties.location,"locality",s)},expression:"schema.graph.properties.location.locality"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.postalCode},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium"},model:{value:t.schema.graph.properties.location.postalCode,callback:function(s){t.$set(t.schema.graph.properties.location,"postalCode",s)},expression:"schema.graph.properties.location.postalCode"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.region},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium"},model:{value:t.schema.graph.properties.location.region,callback:function(s){t.$set(t.schema.graph.properties.location,"region",s)},expression:"schema.graph.properties.location.region"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.country},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-select",{attrs:{size:"medium",options:t.$constants.COUNTRY_LIST,value:t.$constants.COUNTRY_LIST.find(s=>s.value===t.schema.graph.properties.location.country)},on:{input:s=>t.schema.graph.properties.location.country=s.value}})]},proxy:!0}])})],1),e("field-group",{attrs:{header:t.strings.offer}},[e("core-settings-row",{attrs:{name:t.strings.price,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{size:"medium",type:"number",min:0,step:.01},model:{value:t.schema.graph.properties.offer.price,callback:function(s){t.$set(t.schema.graph.properties.offer,"price",s)},expression:"schema.graph.properties.offer.price"}}),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.priceDescription)+" ")])]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.currency,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-select",{attrs:{size:"medium",options:t.$constants.CURRENCY_LIST,value:t.getCurrency(t.schema.graph.properties.offer.currency)},on:{input:s=>t.saveCurrency(s.value)}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.validFrom,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-datepicker",{attrs:{size:"medium",timePicker:"",timePicker24Hour:""},model:{value:t.schema.graph.properties.offer.validFrom,callback:function(s){t.$set(t.schema.graph.properties.offer,"validFrom",s)},expression:"schema.graph.properties.offer.validFrom"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.url},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium",validation:"url"},model:{value:t.schema.graph.properties.offer.url,callback:function(s){t.$set(t.schema.graph.properties.offer,"url",s)},expression:"schema.graph.properties.offer.url"}}),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.offerUrlDescription)+" ")])]},proxy:!0}])})],1),e("field-group",{attrs:{header:t.strings.organizer}},[e("core-settings-row",{attrs:{name:t.strings.type},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-radio",{attrs:{size:"small",name:"organizerType",value:t.schema.graph.properties.organizer.type==="Person",type:2},on:{input:function(s){t.schema.graph.properties.organizer.type="Person"}}},[t._v(" "+t._s(t.strings.person)+" ")]),e("base-radio",{attrs:{size:"small",name:"organizerType",value:t.schema.graph.properties.organizer.type==="Organization",type:2},on:{input:function(s){t.schema.graph.properties.organizer.type="Organization"}}},[t._v(" "+t._s(t.strings.organization)+" ")])]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.name},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium"},model:{value:t.schema.graph.properties.organizer.name,callback:function(s){t.$set(t.schema.graph.properties.organizer,"name",s)},expression:"schema.graph.properties.organizer.name"}}),t.schema.graph.properties.organizer.type==="Organization"&&t.$aioseo.options.searchAppearance.global.schema.siteRepresents==="organization"?e("div",{staticClass:"aioseo-description",domProps:{innerHTML:t._s(t.strings.organizationDescription)}}):t._e()]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.url},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium",validation:"url"},model:{value:t.schema.graph.properties.organizer.url,callback:function(s){t.$set(t.schema.graph.properties.organizer,"url",s)},expression:"schema.graph.properties.organizer.url"}})]},proxy:!0}])})],1),e("field-group",{attrs:{header:t.strings.performer}},[e("core-settings-row",{attrs:{name:t.strings.type},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-radio",{attrs:{size:"small",name:"performerType",value:t.schema.graph.properties.performer.type==="Person",type:2},on:{input:function(s){t.schema.graph.properties.performer.type="Person"}}},[t._v(" "+t._s(t.strings.person)+" ")]),e("base-radio",{attrs:{size:"small",name:"performerType",value:t.schema.graph.properties.performer.type==="Organization",type:2},on:{input:function(s){t.schema.graph.properties.performer.type="Organization"}}},[t._v(" "+t._s(t.strings.organization)+" ")])]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.name},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium"},model:{value:t.schema.graph.properties.performer.name,callback:function(s){t.$set(t.schema.graph.properties.performer,"name",s)},expression:"schema.graph.properties.performer.name"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.url},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium",validation:"url"},model:{value:t.schema.graph.properties.performer.url,callback:function(s){t.$set(t.schema.graph.properties.performer,"url",s)},expression:"schema.graph.properties.performer.url"}})]},proxy:!0}])})],1),e("field-group",{attrs:{header:t.strings.images,singularName:t.strings.image,amountOfGroups:t.schema.graph.properties.images.length,repeater:""},on:{addGroup:t.addGroup}},t._l(t.schema.graph.properties.images,function(s,r){return e("div",{key:r},[e("field-group-inner",{attrs:{header:t.strings.image,groupIndex:r,hideDelete:r===0&&t.schema.graph.properties.images.length<2},on:{deleteGroup:t.deleteGroup}},[e("core-settings-row",{staticClass:"image-field",attrs:{name:t.strings.image,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("div",{staticClass:"image-upload"},[e("base-input",{attrs:{size:"medium",placeholder:t.strings.pasteYourImageUrl},model:{value:s.url,callback:function(n){t.$set(s,"url",n)},expression:"image.url"}}),e("base-button",{staticClass:"insert-image",attrs:{size:"medium",type:"black"},on:{click:function(n){t.openUploadModal("eventImage"+r,o=>{t.schema.graph.properties.images[r].url=o})}}},[e("svg-circle-plus"),t._v(" "+t._s(t.strings.uploadOrSelectImage)+" ")],1),e("base-button",{staticClass:"remove-image",attrs:{size:"medium",type:"gray"},on:{click:function(n){s.url=""}}},[t._v(" "+t._s(t.strings.remove)+" ")])],1),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.minimumSize)+" ")]),e("base-img",{staticClass:"image-preview",attrs:{src:s.url}})]},proxy:!0}],null,!0)})],1)],1)}),0)],1)},wk=[],Ck=$(xk,Sk,wk,!1,null,null,null,null);const Pk=Ck.exports;const Tk={components:{CoreAlert:Pt,CoreBlur:qs,GraphEvent:Pk},mixins:[ti]};var Ak=function(){var t=this,e=t._self._c;return e("div",[t.hasFeature?e("graph-event"):t._e(),t.hasFeature?t._e():e("div",[e("core-alert",{staticClass:"feature-alert",attrs:{type:"yellow"}},[e("strong",{domProps:{innerHTML:t._s(t.graphNotIncluded)}})]),e("core-blur",[e("graph-event")],1)],1)],1)},Dk=[],Mk=$(Tk,Ak,Dk,!1,null,null,null,null);const Ok=Mk.exports,Ik={components:{BaseTextarea:qe,CoreHtmlTagsEditor:et,CoreSettingsRow:G,FieldGroup:bt,FieldGroupInner:Ye},data(){return{questionDefaults:{question:"",answer:""},strings:{name:this.$t.__("Name",this.$tdPro),description:this.$t.__("Description",this.$tdPro),questions:this.$t.__("Questions",this.$tdPro),question:this.$t.__("Question",this.$tdPro),answer:this.$t.__("Answer",this.$tdPro)}}},computed:{...M(["schema"])},methods:{...E(["setGraph","setIsDirty"]),addGroup(){const i=JSON.parse(JSON.stringify(this.questionDefaults));this.schema.graph.properties.questions.push(i)},deleteGroup(i){this.$delete(this.schema.graph.properties.questions,i)}},beforeMount(){this.schema.graph.id||(this.setGraph({id:"#aioseo-faq-page-"+new Date().getTime().toString(36),slug:"faq-page",graphName:"FAQPage",label:this.$t.__("FAQ Page",this.$tdPro),properties:{name:"#post_title",description:"",questions:[JSON.parse(JSON.stringify(this.questionDefaults))]}}),this.$nextTick(()=>{this.setIsDirty(!1)}))}};var Rk=function(){var t=this,e=t._self._c;return e("div",{staticClass:"graph-editor-fields graph-faq-page"},[e("core-settings-row",{attrs:{name:t.strings.name},scopedSlots:t._u([{key:"content",fn:function(){return[e("core-html-tags-editor",{attrs:{"line-numbers":!1,single:"","tags-context":"schema",defaultMenuOrientation:"top","default-tags":["post_title","separator_sa","site_title"],tagsDescription:""},model:{value:t.schema.graph.properties.name,callback:function(s){t.$set(t.schema.graph.properties,"name",s)},expression:"schema.graph.properties.name"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.description},scopedSlots:t._u([{key:"content",fn:function(){return[e("core-html-tags-editor",{attrs:{"line-numbers":!1,single:"","tags-context":"schema",defaultMenuOrientation:"top","default-tags":["post_excerpt","separator_sa","site_title"],tagsDescription:""},model:{value:t.schema.graph.properties.description,callback:function(s){t.$set(t.schema.graph.properties,"description",s)},expression:"schema.graph.properties.description"}})]},proxy:!0}])}),e("field-group",{attrs:{header:t.strings.questions,singularName:t.strings.question,amountOfGroups:t.schema.graph.properties.questions.length,repeater:""},on:{addGroup:t.addGroup}},t._l(t.schema.graph.properties.questions,function(s,r){return e("div",{key:r},[e("field-group-inner",{attrs:{header:t.strings.question,groupIndex:r,hideDelete:r===0&&t.schema.graph.properties.questions.length<2},on:{deleteGroup:t.deleteGroup}},[e("core-settings-row",{attrs:{name:t.strings.question},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium"},model:{value:s.question,callback:function(n){t.$set(s,"question",n)},expression:"question.question"}})]},proxy:!0}],null,!0)}),e("core-settings-row",{attrs:{name:t.strings.answer},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-textarea",{attrs:{size:"medium",minHeight:120},model:{value:s.answer,callback:function(n){t.$set(s,"answer",n)},expression:"question.answer"}})]},proxy:!0}],null,!0)})],1)],1)}),0)],1)},Lk=[],Ek=$(Ik,Rk,Lk,!1,null,null,null,null);const Nk=Ek.exports,Bk={components:{BaseDatepicker:Oe,BaseRadio:Js,CoreHtmlTagsEditor:et,CoreSettingsRow:G,FieldGroup:bt},data(){return{graphKey:0,strings:{name:this.$t.__("Name",this.$tdPro),description:this.$t.__("Description",this.$tdPro),descriptionDescription:this.$t.__("A short summary of the claim being evaluated. It is recommended to keep this less than 75 characters.",this.$tdPro),organizationDescription:this.$t.sprintf(this.$t.__("Leave this empty if you want to use the Organization you've set under %1$s.",this.$tdPro),this.$links.getPlainLink(this.$t.__("Search Appearance > Knowledge Graph",this.$tdPro),this.$aioseo.urls.aio.searchAppearance+"#/global-settings")),claimRating:this.$t.__("Rating",this.$tdPro),false:this.$t.__("False",this.$tdPro),mostlyFalse:this.$t.__("Mostly False",this.$tdPro),halfTrue:this.$t.__("Half True",this.$tdPro),mostlyTrue:this.$t.__("Mostly True",this.$tdPro),true:this.$t.__("True",this.$tdPro),person:this.$t.__("Person",this.$tdPro),organization:this.$t.__("Organization",this.$tdPro),datePublished:this.$t.__("Date Published",this.$tdPro),author:this.$t.__("Author",this.$tdPro),authorDescription:this.$t.__("The name of the author of the fact check",this.$tdPro),type:this.$t.__("Type",this.$tdPro),url:this.$t.__("URL",this.$tdPro),authorType:this.$t.__("Author Type",this.$tdPro),authorName:this.$t.__("Author Name",this.$tdPro),claimAuthorDescription:this.$t.__("The name of the author who published the claim.",this.$tdPro),authorUrl:this.$t.__("Author URL",this.$tdPro),claim:this.$t.__("Claim",this.$tdPro),appearance:this.$t.__("Appearance",this.$tdPro),appearanceDescription:this.$t.__("A link to, or an inline description of, the article or outlet where this claim appears.",this.$tdPro)}}},computed:{...M(["schema"])},methods:{...E(["setGraph","setIsDirty"])},beforeMount(){this.schema.graph.id||(this.setGraph({id:"#aioseo-fact-check-"+new Date().getTime().toString(36),slug:"fact-check",graphName:"FactCheck",label:this.$t.__("Fact Check",this.$tdPro),properties:{name:"#post_title",claimReviewed:"",claimRating:1,datePublished:"",author:{type:"Person",name:"",url:""},claim:{appearance:"",datePublished:"",author:{type:"Organization",name:"",url:""}}}}),this.$nextTick(()=>{this.setIsDirty(!1)}))}};var zk=function(){var t=this,e=t._self._c;return e("div",{staticClass:"graph-editor-fields graph-fact-check"},[e("core-settings-row",{attrs:{name:t.strings.name},scopedSlots:t._u([{key:"content",fn:function(){return[e("core-html-tags-editor",{attrs:{"line-numbers":!1,single:"","tags-context":"schema",defaultMenuOrientation:"top","default-tags":["post_title","separator_sa","site_title"],tagsDescription:""},model:{value:t.schema.graph.properties.name,callback:function(s){t.$set(t.schema.graph.properties,"name",s)},expression:"schema.graph.properties.name"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.description},scopedSlots:t._u([{key:"content",fn:function(){return[e("core-html-tags-editor",{attrs:{"line-numbers":!1,single:"","tags-context":"schema",defaultMenuOrientation:"top","default-tags":["post_excerpt","separator_sa","site_title"],tagsDescription:""},model:{value:t.schema.graph.properties.claimReviewed,callback:function(s){t.$set(t.schema.graph.properties,"claimReviewed",s)},expression:"schema.graph.properties.claimReviewed"}}),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.descriptionDescription)+" ")])]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.claimRating},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-radio",{attrs:{size:"small",name:"claimRating",value:t.schema.graph.properties.claimRating===1,type:2},on:{input:function(s){t.schema.graph.properties.claimRating=1}}},[t._v(" "+t._s(t.strings.false)+" ")]),e("base-radio",{attrs:{size:"small",name:"claimRating",value:t.schema.graph.properties.claimRating===2,type:2},on:{input:function(s){t.schema.graph.properties.claimRating=2}}},[t._v(" "+t._s(t.strings.mostlyFalse)+" ")]),e("base-radio",{attrs:{size:"small",name:"claimRating",value:t.schema.graph.properties.claimRating===3,type:2},on:{input:function(s){t.schema.graph.properties.claimRating=3}}},[t._v(" "+t._s(t.strings.halfTrue)+" ")]),e("base-radio",{attrs:{size:"small",name:"claimRating",value:t.schema.graph.properties.claimRating===4,type:2},on:{input:function(s){t.schema.graph.properties.claimRating=4}}},[t._v(" "+t._s(t.strings.mostlyTrue)+" ")]),e("base-radio",{attrs:{size:"small",name:"claimRating",value:t.schema.graph.properties.claimRating===5,type:2},on:{input:function(s){t.schema.graph.properties.claimRating=5}}},[t._v(" "+t._s(t.strings.true)+" ")])]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.datePublished,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-datepicker",{attrs:{size:"medium"},model:{value:t.schema.graph.properties.datePublished,callback:function(s){t.$set(t.schema.graph.properties,"datePublished",s)},expression:"schema.graph.properties.datePublished"}})]},proxy:!0}])}),e("field-group",{attrs:{header:t.strings.author}},[e("core-settings-row",{attrs:{name:t.strings.type},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-radio",{attrs:{size:"small",name:"authorType",value:t.schema.graph.properties.author.type==="Person",type:2},on:{input:function(s){t.schema.graph.properties.author.type="Person"}}},[t._v(" "+t._s(t.strings.person)+" ")]),e("base-radio",{attrs:{size:"small",name:"authorType",value:t.schema.graph.properties.author.type==="Organization",type:2},on:{input:function(s){t.schema.graph.properties.author.type="Organization"}}},[t._v(" "+t._s(t.strings.organization)+" ")])]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.name},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium"},model:{value:t.schema.graph.properties.author.name,callback:function(s){t.$set(t.schema.graph.properties.author,"name",s)},expression:"schema.graph.properties.author.name"}}),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.authorDescription)+" ")]),t.schema.graph.properties.author.type==="Organization"&&t.$aioseo.options.searchAppearance.global.schema.siteRepresents==="organization"?e("div",{staticClass:"aioseo-description",domProps:{innerHTML:t._s(t.strings.organizationDescription)}}):t._e()]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.url},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium",validation:"url"},model:{value:t.schema.graph.properties.author.url,callback:function(s){t.$set(t.schema.graph.properties.author,"url",s)},expression:"schema.graph.properties.author.url"}})]},proxy:!0}])})],1),e("field-group",{attrs:{header:t.strings.claim}},[e("core-settings-row",{attrs:{name:t.strings.appearance},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium"},model:{value:t.schema.graph.properties.claim.appearance,callback:function(s){t.$set(t.schema.graph.properties.claim,"appearance",s)},expression:"schema.graph.properties.claim.appearance"}}),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.appearanceDescription)+" ")])]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.datePublished,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-datepicker",{attrs:{size:"medium"},model:{value:t.schema.graph.properties.claim.datePublished,callback:function(s){t.$set(t.schema.graph.properties.claim,"datePublished",s)},expression:"schema.graph.properties.claim.datePublished"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.authorType},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-radio",{attrs:{size:"small",name:"claimAuthorType",value:t.schema.graph.properties.claim.author.type==="Person",type:2},on:{input:function(s){t.schema.graph.properties.claim.author.type="Person"}}},[t._v(" "+t._s(t.strings.person)+" ")]),e("base-radio",{attrs:{size:"small",name:"claimAuthorType",value:t.schema.graph.properties.claim.author.type==="Organization",type:2},on:{input:function(s){t.schema.graph.properties.claim.author.type="Organization"}}},[t._v(" "+t._s(t.strings.organization)+" ")])]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.authorName},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium"},model:{value:t.schema.graph.properties.claim.author.name,callback:function(s){t.$set(t.schema.graph.properties.claim.author,"name",s)},expression:"schema.graph.properties.claim.author.name"}}),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.claimAuthorDescription)+" ")])]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.authorUrl},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium",validation:"url"},model:{value:t.schema.graph.properties.claim.author.url,callback:function(s){t.$set(t.schema.graph.properties.claim.author,"url",s)},expression:"schema.graph.properties.claim.author.url"}})]},proxy:!0}])})],1)],1)},Gk=[],Fk=$(Bk,zk,Gk,!1,null,null,null,null);const Hk=Fk.exports;const Vk={components:{BaseImg:At,BaseTextarea:qe,CoreHtmlTagsEditor:et,CoreSettingsRow:G,FieldGroup:bt,FieldGroupInner:Ye,SvgCirclePlus:at},mixins:[Me,Tt],data(){return{stepDefaults:{name:"",text:"",image:""},strings:{name:this.$t.__("Name",this.$tdPro),description:this.$t.__("Description",this.$tdPro),supplies:this.$t.__("Supplies",this.$tdPro),tools:this.$t.__("Tools",this.$tdPro),totalTime:this.$t.__("Required Time",this.$tdPro),image:this.$t.__("Image",this.$tdPro),estimatedCost:this.$t.__("Estimated Cost",this.$tdPro),price:this.$t.__("Price",this.$tdPro),currency:this.$t.__("Currency",this.$tdPro),steps:this.$t.__("Steps",this.$tdPro),step:this.$t.__("Step",this.$tdPro),title:this.$t.__("Title",this.$tdPro),details:this.$t.__("Details",this.$tdPro),url:this.$t.__("URL",this.$tdPro),urlDescription:this.$t.__("A URL that directly links to the step (if one is available). For example, an anchor link fragment or a video with a time offset.",this.$tdPro),uploadOrSelectImage:this.$t.__("Upload or Select Image",this.$tdPro),pasteYourImageUrl:this.$t.__("Paste your image URL or select a new image",this.$tdPro),minimumSize:this.$t.__("Minimum size: 112px x 112px, The image must be in JPG, PNG, GIF, SVG, or WEBP format.",this.$tdPro),remove:this.$t.__("Remove",this.$tdPro),supplyKeyword:this.$t.__("Type to enter a supply...",this.$tdPro),supplyTagPlaceholder:this.$t.__("Press enter to create a supply",this.$tdPro),toolPlaceholder:this.$t.__("Type to enter a tool...",this.$tdPro),toolTagPlaceholder:this.$t.__("Press enter to create a tool",this.$tdPro),days:this.$t.__("Days",this.$tdPro),hours:this.$t.__("Hours",this.$tdPro),minutes:this.$t.__("Minutes",this.$tdPro)}}},computed:{...M(["schema"])},methods:{...E(["setGraph","setIsDirty"]),updateImage(i){this.schema.graph.properties.image=i},getCurrency(i){return this.$constants.CURRENCY_LIST.find(t=>t.value===i)},saveCurrency(i){this.$set(this.schema.graph.properties.estimatedCost,"currency",i)},addGroup(){const i=JSON.parse(JSON.stringify(this.stepDefaults));this.schema.graph.properties.steps.push(i)},deleteGroup(i){this.$delete(this.schema.graph.properties.steps,i)}},beforeMount(){this.schema.graph.id||(this.setGraph({id:"#aioseo-how-to-"+new Date().getTime().toString(36),slug:"how-to",graphName:"HowTo",label:this.$t.__("How To",this.$tdPro),properties:{name:"#post_title",description:"",supplies:"",tools:"",totalTime:{days:"",hours:"",minutes:""},image:"",estimatedCost:{price:"",currency:""},steps:[JSON.parse(JSON.stringify(this.stepDefaults))]}}),this.$nextTick(()=>{this.setIsDirty(!1)}))}};var Uk=function(){var t=this,e=t._self._c;return e("div",{staticClass:"graph-editor-fields graph-how-to"},[e("core-settings-row",{attrs:{name:t.strings.name},scopedSlots:t._u([{key:"content",fn:function(){return[e("core-html-tags-editor",{attrs:{"line-numbers":!1,single:"","tags-context":"schema",defaultMenuOrientation:"top","default-tags":["post_title","separator_sa","site_title"],tagsDescription:""},model:{value:t.schema.graph.properties.name,callback:function(s){t.$set(t.schema.graph.properties,"name",s)},expression:"schema.graph.properties.name"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.description},scopedSlots:t._u([{key:"content",fn:function(){return[e("core-html-tags-editor",{attrs:{"line-numbers":!1,single:"","tags-context":"schema",defaultMenuOrientation:"top","default-tags":["post_excerpt","separator_sa","site_title"],tagsDescription:""},model:{value:t.schema.graph.properties.description,callback:function(s){t.$set(t.schema.graph.properties,"description",s)},expression:"schema.graph.properties.description"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.supplies,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-select",{attrs:{size:"medium",multiple:"",taggable:"",options:t.getJsonValue(t.schema.graph.properties.supplies)||[],value:t.getJsonValue(t.schema.graph.properties.supplies)||[],placeholder:t.strings.supplyKeyword,"tag-placeholder":t.strings.supplyTagPlaceholder},on:{input:s=>t.schema.graph.properties.supplies=t.setJsonValue(s)}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.tools,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-select",{attrs:{size:"medium",multiple:"",taggable:"",options:t.getJsonValue(t.schema.graph.properties.tools)||[],value:t.getJsonValue(t.schema.graph.properties.tools)||[],placeholder:t.strings.toolPlaceholder,"tag-placeholder":t.strings.toolTagPlaceholder},on:{input:s=>t.schema.graph.properties.tools=t.setJsonValue(s)}})]},proxy:!0}])}),e("core-settings-row",{staticClass:"required-time",attrs:{name:t.strings.totalTime,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("div",[e("strong",[t._v(t._s(t.strings.days))]),e("base-input",{attrs:{type:"number",size:"medium",min:0},model:{value:t.schema.graph.properties.totalTime.days,callback:function(s){t.$set(t.schema.graph.properties.totalTime,"days",s)},expression:"schema.graph.properties.totalTime.days"}})],1),e("div",[e("strong",[t._v(t._s(t.strings.hours))]),e("base-input",{attrs:{type:"number",size:"medium",min:0,max:24},model:{value:t.schema.graph.properties.totalTime.hours,callback:function(s){t.$set(t.schema.graph.properties.totalTime,"hours",s)},expression:"schema.graph.properties.totalTime.hours"}})],1),e("div",[e("strong",[t._v(t._s(t.strings.minutes))]),e("base-input",{attrs:{type:"number",size:"medium",min:0,max:60},model:{value:t.schema.graph.properties.totalTime.minutes,callback:function(s){t.$set(t.schema.graph.properties.totalTime,"minutes",s)},expression:"schema.graph.properties.totalTime.minutes"}})],1)]},proxy:!0}])}),e("core-settings-row",{staticClass:"image-field",attrs:{name:t.strings.image,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("div",{staticClass:"image-upload"},[e("base-input",{attrs:{size:"medium",placeholder:t.strings.pasteYourImageUrl},model:{value:t.schema.graph.properties.image,callback:function(s){t.$set(t.schema.graph.properties,"image",s)},expression:"schema.graph.properties.image"}}),e("base-button",{staticClass:"insert-image",attrs:{size:"medium",type:"black"},on:{click:function(s){return t.openUploadModal("howToImage",t.updateImage)}}},[e("svg-circle-plus"),t._v(" "+t._s(t.strings.uploadOrSelectImage)+" ")],1),e("base-button",{staticClass:"remove-image",attrs:{size:"medium",type:"gray"},on:{click:function(s){t.schema.graph.properties.image=""}}},[t._v(" "+t._s(t.strings.remove)+" ")])],1),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.minimumSize)+" ")]),e("base-img",{staticClass:"image-preview",attrs:{src:t.schema.graph.properties.image}})]},proxy:!0}])}),e("field-group",{attrs:{header:t.strings.estimatedCost}},[e("core-settings-row",{attrs:{name:t.strings.price,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{size:"medium",type:"number",min:0,step:.01},model:{value:t.schema.graph.properties.estimatedCost.price,callback:function(s){t.$set(t.schema.graph.properties.estimatedCost,"price",s)},expression:"schema.graph.properties.estimatedCost.price"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.currency,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-select",{attrs:{size:"medium",options:t.$constants.CURRENCY_LIST,value:t.getCurrency(t.schema.graph.properties.estimatedCost.currency)},on:{input:s=>t.saveCurrency(s.value)}})]},proxy:!0}])})],1),e("field-group",{attrs:{header:t.strings.steps,singularName:t.strings.step,amountOfGroups:t.schema.graph.properties.steps.length,repeater:""},on:{addGroup:t.addGroup}},t._l(t.schema.graph.properties.steps,function(s,r){return e("div",{key:r},[e("field-group-inner",{attrs:{header:t.strings.step,groupIndex:r,hideDelete:r===0&&t.schema.graph.properties.steps.length<2},on:{deleteGroup:t.deleteGroup}},[e("core-settings-row",{attrs:{name:t.strings.title,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium"},model:{value:s.name,callback:function(n){t.$set(s,"name",n)},expression:"step.name"}})]},proxy:!0}],null,!0)}),e("core-settings-row",{attrs:{name:t.strings.details,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-textarea",{attrs:{size:"medium",minHeight:120},model:{value:s.text,callback:function(n){t.$set(s,"text",n)},expression:"step.text"}})]},proxy:!0}],null,!0)}),e("core-settings-row",{attrs:{name:t.strings.url,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium",validation:"url"},model:{value:s.url,callback:function(n){t.$set(s,"url",n)},expression:"step.url"}}),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.urlDescription)+" ")])]},proxy:!0}],null,!0)}),e("core-settings-row",{staticClass:"image-field",attrs:{name:t.strings.image,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("div",{staticClass:"image-upload"},[e("base-input",{attrs:{size:"medium",placeholder:t.strings.pasteYourImageUrl},model:{value:s.image,callback:function(n){t.$set(s,"image",n)},expression:"step.image"}}),e("base-button",{staticClass:"insert-image",attrs:{size:"medium",type:"black"},on:{click:function(n){t.openUploadModal("updateStepImage"+r,o=>{t.schema.graph.properties.steps[r].image=o})}}},[e("svg-circle-plus"),t._v(" "+t._s(t.strings.uploadOrSelectImage)+" ")],1),e("base-button",{staticClass:"remove-image",attrs:{size:"medium",type:"gray"},on:{click:function(n){s.image=""}}},[t._v(" "+t._s(t.strings.remove)+" ")])],1),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.minimumSize)+" ")]),e("base-img",{staticClass:"image-preview",attrs:{src:s.image}})]},proxy:!0}],null,!0)})],1)],1)}),0)],1)},Wk=[],Kk=$(Vk,Uk,Wk,!1,null,null,null,null);const qk=Kk.exports;const Jk={components:{BaseDatepicker:Oe,BaseImg:At,BaseRadioToggle:Ke,CoreHtmlTagsEditor:et,CoreSettingsRow:G,FieldGroup:bt,SvgCirclePlus:at},mixins:[Tt],data(){return{locationDefaults:{type:"City",name:""},strings:{title:this.$t.__("Job Title",this.$tdPro),description:this.$t.__("Description",this.$tdPro),dates:this.$t.__("Dates",this.$tdPro),datePosted:this.$t.__("Publish Date",this.$tdPro),dateExpires:this.$t.__("Expiration Date",this.$tdPro),employmentType:this.$t.__("Employment Type",this.$tdPro),remote:this.$t.__("Work from Home",this.$tdPro),remoteDescription:this.$t.__("Enable this if the job is 100% remote.",this.$tdPro),hiringOrganization:this.$t.__("Hiring Organization",this.$tdPro),name:this.$t.__("Name",this.$tdPro),url:this.$t.__("URL",this.$tdPro),logo:this.$t.__("Logo",this.$tdPro),locations:this.$t.__("Locations",this.$tdPro),location:this.$t.__("Location",this.$tdPro),type:this.$t.__("Type",this.$tdPro),city:this.$t.__("City",this.$tdPro),state:this.$t.__("State",this.$tdPro),streetAddress:this.$t.__("Street Address",this.$tdPro),locality:this.$t.__("Locality",this.$tdPro),postalCode:this.$t.__("Postal Code",this.$tdPro),region:this.$t.__("Region",this.$tdPro),country:this.$t.__("Country",this.$tdPro),salary:this.$t.__("Salary",this.$tdPro),range:this.$t.__("Pay Range",this.$tdPro),minimum:this.$t.__("Minimum",this.$tdPro),maximum:this.$t.__("Maximum",this.$tdPro),interval:this.$t.__("Pay Interval",this.$tdPro),currency:this.$t.__("Currency",this.$tdPro),requirements:this.$t.__("Requirements",this.$tdPro),experienceInsteadOfEducation:this.$t.__("Experience instead of Education",this.$tdPro),experienceInsteadOfEducationDescription:this.$t.__("Whether the organization accepts experience in place of the educational qualifications.",this.$tdPro),monthsOfExperience:this.$t.__("Months of Experience",this.$tdPro),requiredDegree:this.$t.__("Required Degree",this.$tdPro),requiredDegreeDescription:this.$t.__("The specifics of the required degree/certificate should be descriped in the description field above.",this.$tdPro),organizationDescription:this.$t.sprintf(this.$t.__("Leave this empty if you want to use the Organization you've set under %1$s.",this.$tdPro),this.$links.getPlainLink(this.$t.__("Search Appearance > Knowledge Graph",this.$tdPro),this.$aioseo.urls.aio.searchAppearance+"#/global-settings")),uploadOrSelectImage:this.$t.__("Upload or Select Image",this.$tdPro),pasteYourImageUrl:this.$t.__("Paste your image URL or select a new image",this.$tdPro),minimumSize:this.$t.__("Minimum size: 112px x 112px, The image must be in JPG, PNG, GIF, SVG, or WEBP format.",this.$tdPro),remove:this.$t.__("Remove",this.$tdPro)}}},computed:{...M(["schema"])},methods:{...E(["setGraph","setIsDirty"]),updateImage(i){this.schema.graph.properties.hiringOrganization.logo=i},getEmploymentType(i){return this.$constants.JOBPOSTING_EMPLOYMENT_TYPE_LIST.find(t=>t.value===i)},saveEmploymentType(i){this.$set(this.schema.graph.properties,"employmentType",i)},getSalaryIntervalType(i){return this.$constants.JOBPOSTING_SALARY_INTERVAL_TYPE_LIST.find(t=>t.value===i)},saveSalaryIntervalType(i){this.$set(this.schema.graph.properties.salary,"interval",i)},getCurrency(i){return this.$constants.CURRENCY_LIST.find(t=>t.value===i)},saveCurrency(i){this.$set(this.schema.graph.properties.salary,"currency",i)},getDegree(i){return this.$constants.JOBPOSTING_DEGREE_TYPE_LIST.find(t=>t.value===i)},saveDegree(i){this.$set(this.schema.graph.properties.requirements,"degree",i)},addGroup(){const i=JSON.parse(JSON.stringify(this.locationDefaults));this.schema.graph.properties.locations.push(i)},deleteGroup(i){this.$delete(this.schema.graph.properties.locations,i)}},beforeMount(){this.schema.graph.id||(this.setGraph({id:"#aioseo-job-posting-"+new Date().getTime().toString(36),slug:"job-posting",graphName:"JobPosting",label:this.$t.__("Job Posting",this.$tdPro),properties:{name:"#post_title",description:"#post_excerpt",employmentType:"",remote:!1,dates:{datePosted:"",dateExpires:""},hiringOrganization:{name:"",url:"",image:""},location:{streetAddress:"",locality:"",postalCode:"",region:"",country:""},salary:{minimum:"",maximum:"",interval:"",currency:""},requirements:{experienceInsteadOfEducation:!1,experience:"",degree:""},locations:[JSON.parse(JSON.stringify(this.locationDefaults))]}}),this.$nextTick(()=>{this.setIsDirty(!1)}))}};var jk=function(){var t=this,e=t._self._c;return e("div",{staticClass:"graph-editor-fields graph-job-posting"},[e("core-settings-row",{attrs:{name:t.strings.title},scopedSlots:t._u([{key:"content",fn:function(){return[e("core-html-tags-editor",{attrs:{"line-numbers":!1,single:"","tags-context":"schema",defaultMenuOrientation:"top","default-tags":["post_title","separator_sa","site_title"],tagsDescription:""},model:{value:t.schema.graph.properties.name,callback:function(s){t.$set(t.schema.graph.properties,"name",s)},expression:"schema.graph.properties.name"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.description},scopedSlots:t._u([{key:"content",fn:function(){return[e("core-html-tags-editor",{attrs:{"line-numbers":!1,single:"","tags-context":"schema",defaultMenuOrientation:"top","default-tags":["post_excerpt","separator_sa","site_title"],tagsDescription:""},model:{value:t.schema.graph.properties.description,callback:function(s){t.$set(t.schema.graph.properties,"description",s)},expression:"schema.graph.properties.description"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.employmentType,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-select",{attrs:{size:"medium",options:t.$constants.JOBPOSTING_EMPLOYMENT_TYPE_LIST,value:t.getEmploymentType(t.schema.graph.properties.employmentType)},on:{input:s=>t.saveEmploymentType(s.value)}})]},proxy:!0}])}),t.schema.graph.properties.remote?t._e():e("field-group",{attrs:{header:t.strings.location}},[e("core-settings-row",{attrs:{name:t.strings.streetAddress},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium"},model:{value:t.schema.graph.properties.location.streetAddress,callback:function(s){t.$set(t.schema.graph.properties.location,"streetAddress",s)},expression:"schema.graph.properties.location.streetAddress"}})]},proxy:!0}],null,!1,3372656998)}),e("core-settings-row",{attrs:{name:t.strings.locality},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium"},model:{value:t.schema.graph.properties.location.locality,callback:function(s){t.$set(t.schema.graph.properties.location,"locality",s)},expression:"schema.graph.properties.location.locality"}})]},proxy:!0}],null,!1,1195570072)}),e("core-settings-row",{attrs:{name:t.strings.postalCode},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium"},model:{value:t.schema.graph.properties.location.postalCode,callback:function(s){t.$set(t.schema.graph.properties.location,"postalCode",s)},expression:"schema.graph.properties.location.postalCode"}})]},proxy:!0}],null,!1,505828265)}),e("core-settings-row",{attrs:{name:t.strings.region},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium"},model:{value:t.schema.graph.properties.location.region,callback:function(s){t.$set(t.schema.graph.properties.location,"region",s)},expression:"schema.graph.properties.location.region"}})]},proxy:!0}],null,!1,1121083177)}),e("core-settings-row",{attrs:{name:t.strings.country},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-select",{attrs:{size:"medium",options:t.$constants.COUNTRY_LIST,value:t.$constants.COUNTRY_LIST.find(s=>s.value===t.schema.graph.properties.location.country)},on:{input:s=>t.schema.graph.properties.location.country=s.value}})]},proxy:!0}],null,!1,3753958665)})],1),e("field-group",{attrs:{header:t.strings.hiringOrganization}},[e("core-settings-row",{attrs:{name:t.strings.name},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium"},model:{value:t.schema.graph.properties.hiringOrganization.name,callback:function(s){t.$set(t.schema.graph.properties.hiringOrganization,"name",s)},expression:"schema.graph.properties.hiringOrganization.name"}}),t.$aioseo.options.searchAppearance.global.schema.siteRepresents==="organization"?e("div",{staticClass:"aioseo-description",domProps:{innerHTML:t._s(t.strings.organizationDescription)}}):t._e()]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.url},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium",validation:"url"},model:{value:t.schema.graph.properties.hiringOrganization.url,callback:function(s){t.$set(t.schema.graph.properties.hiringOrganization,"url",s)},expression:"schema.graph.properties.hiringOrganization.url"}})]},proxy:!0}])}),e("core-settings-row",{staticClass:"image-field",attrs:{name:t.strings.logo,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("div",{staticClass:"image-upload"},[e("base-input",{attrs:{size:"medium",placeholder:t.strings.pasteYourImageUrl},model:{value:t.schema.graph.properties.hiringOrganization.logo,callback:function(s){t.$set(t.schema.graph.properties.hiringOrganization,"logo",s)},expression:"schema.graph.properties.hiringOrganization.logo"}}),e("base-button",{staticClass:"insert-image",attrs:{size:"medium",type:"black"},on:{click:function(s){return t.openUploadModal("hiringOrganizationImage",t.updateImage)}}},[e("svg-circle-plus"),t._v(" "+t._s(t.strings.uploadOrSelectImage)+" ")],1),e("base-button",{staticClass:"remove-image",attrs:{size:"medium",type:"gray"},on:{click:function(s){t.schema.graph.properties.hiringOrganization.logo=""}}},[t._v(" "+t._s(t.strings.remove)+" ")])],1),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.minimumSize)+" ")]),e("base-img",{staticClass:"image-preview",attrs:{src:t.schema.graph.properties.hiringOrganization.logo}})]},proxy:!0}])})],1),e("field-group",{attrs:{header:t.strings.salary}},[e("core-settings-row",{staticClass:"salary-range",attrs:{name:t.strings.range,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("div",[e("strong",[t._v(t._s(t.strings.minimum))]),e("base-input",{attrs:{type:"number",size:"medium",min:0},model:{value:t.schema.graph.properties.salary.minimum,callback:function(s){t.$set(t.schema.graph.properties.salary,"minimum",s)},expression:"schema.graph.properties.salary.minimum"}})],1),e("div",[e("strong",[t._v(t._s(t.strings.maximum))]),e("base-input",{attrs:{type:"number",size:"medium",min:0},model:{value:t.schema.graph.properties.salary.maximum,callback:function(s){t.$set(t.schema.graph.properties.salary,"maximum",s)},expression:"schema.graph.properties.salary.maximum"}})],1)]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.interval,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-select",{attrs:{size:"medium",options:t.$constants.JOBPOSTING_SALARY_INTERVAL_TYPE_LIST,value:t.getSalaryIntervalType(t.schema.graph.properties.salary.interval)},on:{input:s=>t.saveSalaryIntervalType(s.value)}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.currency,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-select",{attrs:{size:"medium",options:t.$constants.CURRENCY_LIST,value:t.getCurrency(t.schema.graph.properties.salary.currency)},on:{input:s=>t.saveCurrency(s.value)}})]},proxy:!0}])})],1),e("field-group",{attrs:{header:t.strings.requirements}},[e("core-settings-row",{attrs:{name:t.strings.experienceInsteadOfEducation,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-radio-toggle",{attrs:{name:"experienceInsteadOfEducation",options:[{label:t.$constants.GLOBAL_STRINGS.no,value:!1,activeClass:"dark"},{label:t.$constants.GLOBAL_STRINGS.yes,value:!0}]},model:{value:t.schema.graph.properties.requirements.experienceInsteadOfEducation,callback:function(s){t.$set(t.schema.graph.properties.requirements,"experienceInsteadOfEducation",s)},expression:"schema.graph.properties.requirements.experienceInsteadOfEducation"}}),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.experienceInsteadOfEducationDescription)+" ")])]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.monthsOfExperience,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("div",[e("base-input",{attrs:{type:"number",size:"medium",min:0},model:{value:t.schema.graph.properties.salary.experience,callback:function(s){t.$set(t.schema.graph.properties.salary,"experience",s)},expression:"schema.graph.properties.salary.experience"}})],1)]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.requiredDegree,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-select",{attrs:{size:"medium",options:t.$constants.JOBPOSTING_DEGREE_TYPE_LIST,value:t.getDegree(t.schema.graph.properties.requirements.degree)},on:{input:s=>t.saveDegree(s.value)}}),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.requiredDegreeDescription)+" ")])]},proxy:!0}])})],1),e("field-group",{attrs:{header:t.strings.dates}},[e("core-settings-row",{attrs:{name:t.strings.datePosted,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-datepicker",{attrs:{size:"medium",timePicker:"",timePicker24Hour:""},model:{value:t.schema.graph.properties.dates.datePosted,callback:function(s){t.$set(t.schema.graph.properties.dates,"datePosted",s)},expression:"schema.graph.properties.dates.datePosted"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.dateExpires,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-datepicker",{attrs:{size:"medium",timePicker:"",timePicker24Hour:""},model:{value:t.schema.graph.properties.dates.dateExpires,callback:function(s){t.$set(t.schema.graph.properties.dates,"dateExpires",s)},expression:"schema.graph.properties.dates.dateExpires"}})]},proxy:!0}])})],1)],1)},Yk=[],Qk=$(Jk,jk,Yk,!1,null,null,null,null);const Xk=Qk.exports;const Zk={components:{CoreAlert:Pt,CoreBlur:qs,GraphJobPosting:Xk},mixins:[ti]};var t$=function(){var t=this,e=t._self._c;return e("div",[t.hasFeature?e("graph-job-posting"):t._e(),t.hasFeature?t._e():e("div",[e("core-alert",{staticClass:"feature-alert",attrs:{type:"yellow"}},[e("strong",{domProps:{innerHTML:t._s(t.graphNotIncluded)}})]),e("core-blur",[e("graph-job-posting")],1)],1)],1)},e$=[],s$=$(Zk,t$,e$,!1,null,null,null,null);const i$=s$.exports,r$={components:{BaseTextarea:qe,CoreHtmlTagsEditor:et,CoreSettingsRow:G,FieldGroup:bt},data(){return{strings:{review:this.$t.__("Review",this.$tdPro),headline:this.$t.__("Headline",this.$tdPro),content:this.$t.__("Content",this.$tdPro),author:this.$t.__("Author",this.$tdPro)}}},computed:{...M(["schema"])}};var n$=function(){var t=this,e=t._self._c;return e("field-group",{attrs:{header:t.strings.review}},[e("core-settings-row",{attrs:{name:t.strings.headline,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{size:"medium"},model:{value:t.schema.graph.properties.review.headline,callback:function(s){t.$set(t.schema.graph.properties.review,"headline",s)},expression:"schema.graph.properties.review.headline"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.content,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-textarea",{attrs:{size:"medium",minHeight:120},model:{value:t.schema.graph.properties.review.content,callback:function(s){t.$set(t.schema.graph.properties.review,"content",s)},expression:"schema.graph.properties.review.content"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.author},scopedSlots:t._u([{key:"content",fn:function(){return[e("core-html-tags-editor",{attrs:{"line-numbers":!1,single:"","tags-context":"schema",defaultMenuOrientation:"top","default-tags":["author_name","author_first_name","author_last_name"],"disable-emoji":"",tagsDescription:""},model:{value:t.schema.graph.properties.review.author,callback:function(s){t.$set(t.schema.graph.properties.review,"author",s)},expression:"schema.graph.properties.review.author"}})]},proxy:!0}])})],1)},o$=[],a$=$(r$,n$,o$,!1,null,null,null,null);const l$=a$.exports,c$={components:{CoreSettingsRow:G,FieldGroup:bt},props:{hideRatingValue:{type:Boolean,required:!1,default(){return!1}}},data(){return{ratingKey:0,strings:{reviewRating:this.$t.__("Review Rating",this.$tdPro),ratingValue:this.$t.__("Rating Value",this.$tdPro),ratingMinimum:this.$t.__("Rating Minimum",this.$tdPro),ratingMaximum:this.$t.__("Rating Maximum",this.$tdPro)}}},computed:{...M(["schema"]),minimum(){return parseInt(this.schema.graph.properties.rating.minimum)},maximum(){return parseInt(this.schema.graph.properties.rating.maximum)}},methods:{updateRating(i){i=parseInt(i),i<parseInt(this.schema.graph.properties.rating.minimum)&&(i=parseInt(this.schema.graph.properties.rating.minimum)),i>parseInt(this.schema.graph.properties.rating.maximum)&&(i=parseInt(this.schema.graph.properties.rating.maximum)),this.schema.graph.properties.rating.value=i,this.ratingKey++},updateMinimumRating(i){if(i=parseInt(i),i>parseInt(this.schema.graph.properties.rating.maximum)){this.schema.graph.properties.rating.minimum=parseInt(this.schema.graph.properties.rating.maximum),this.ratingKey++;return}i>this.schema.graph.properties.rating.value&&(this.schema.graph.properties.rating.value=i),this.schema.graph.properties.rating.minimum=i,this.ratingKey++},updateMaximumRating(i){if(i=parseInt(i),i<parseInt(this.schema.graph.properties.rating.minimum)){this.schema.graph.properties.rating.maximum=parseInt(this.schema.graph.properties.rating.minimum),this.ratingKey++;return}i<parseInt(this.schema.graph.properties.rating.value)&&(this.schema.graph.properties.rating.value=i),this.schema.graph.properties.rating.maximum=i,this.ratingKey++}}};var h$=function(){var t=this,e=t._self._c;return e("field-group",{attrs:{header:t.strings.reviewRating}},[t.hideRatingValue?t._e():e("core-settings-row",{key:"ratingValue"+t.ratingKey,attrs:{name:t.strings.ratingValue,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{size:"medium",type:"number",min:t.minimum,max:t.maximum,step:1,value:t.schema.graph.properties.rating.value},on:{input:s=>t.updateRating(s)}})]},proxy:!0}],null,!1,1920340071)}),e("core-settings-row",{key:"ratingMinimum"+t.ratingKey,attrs:{name:t.strings.ratingMinimum,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{size:"medium",type:"number",min:0,step:1,value:t.schema.graph.properties.rating.minimum},on:{input:s=>t.updateMinimumRating(s)}})]},proxy:!0}])}),e("core-settings-row",{key:"ratingMaximum"+t.ratingKey,attrs:{name:t.strings.ratingMaximum,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{size:"medium",type:"number",min:0,step:1,value:t.schema.graph.properties.rating.maximum},on:{input:s=>t.updateMaximumRating(s)}})]},proxy:!0}])})],1)},u$=[],d$=$(c$,h$,u$,!1,null,null,null,null);const Fo=d$.exports,p$={components:{BaseDatepicker:Oe,BaseImg:At,CoreHtmlTagsEditor:et,CoreSettingsRow:G,Review:l$,ReviewRating:Fo,SvgCirclePlus:at},mixins:[Tt],data(){return{strings:{name:this.$t.__("Name",this.$tdPro),description:this.$t.__("Description",this.$tdPro),director:this.$t.__("Director",this.$tdPro),releaseDate:this.$t.__("Release Date",this.$tdPro),image:this.$t.__("Image",this.$tdPro),uploadOrSelectImage:this.$t.__("Upload or Select Image",this.$tdPro),pasteYourImageUrl:this.$t.__("Paste your image URL or select a new image",this.$tdPro),minimumSize:this.$t.__("Minimum size: 112px x 112px, The image must be in JPG, PNG, GIF, SVG, or WEBP format.",this.$tdPro),remove:this.$t.__("Remove",this.$tdPro)}}},computed:{...M(["schema"])},methods:{...E(["setGraph","setIsDirty"]),updateImage(i){this.schema.graph.properties.image=i}},beforeMount(){this.schema.graph.id||(this.setGraph({id:"#aioseo-movie-"+new Date().getTime().toString(36),slug:"movie",graphName:"Movie",label:this.$t.__("Movie",this.$tdPro),properties:{name:"#post_title",description:"",director:"",releaseDate:"",image:"",rating:{value:"",minimum:1,maximum:5},review:{headline:"",content:"",author:"#author_name"}}}),this.$nextTick(()=>{this.setIsDirty(!1)}))}};var f$=function(){var t=this,e=t._self._c;return e("div",{staticClass:"graph-editor-fields graph-movie"},[e("core-settings-row",{attrs:{name:t.strings.name},scopedSlots:t._u([{key:"content",fn:function(){return[e("core-html-tags-editor",{attrs:{"line-numbers":!1,single:"","tags-context":"schema",defaultMenuOrientation:"top","default-tags":["post_title","separator_sa","site_title"],tagsDescription:""},model:{value:t.schema.graph.properties.name,callback:function(s){t.$set(t.schema.graph.properties,"name",s)},expression:"schema.graph.properties.name"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.description},scopedSlots:t._u([{key:"content",fn:function(){return[e("core-html-tags-editor",{attrs:{"line-numbers":!1,single:"","tags-context":"schema",defaultMenuOrientation:"top","default-tags":["post_excerpt","separator_sa","site_title"],tagsDescription:""},model:{value:t.schema.graph.properties.description,callback:function(s){t.$set(t.schema.graph.properties,"description",s)},expression:"schema.graph.properties.description"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.director},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium"},model:{value:t.schema.graph.properties.director,callback:function(s){t.$set(t.schema.graph.properties,"director",s)},expression:"schema.graph.properties.director"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.releaseDate,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-datepicker",{attrs:{size:"medium"},model:{value:t.schema.graph.properties.releaseDate,callback:function(s){t.$set(t.schema.graph.properties,"releaseDate",s)},expression:"schema.graph.properties.releaseDate"}})]},proxy:!0}])}),e("core-settings-row",{staticClass:"image-field",attrs:{name:t.strings.image,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("div",{staticClass:"image-upload"},[e("base-input",{attrs:{size:"medium",placeholder:t.strings.pasteYourImageUrl},model:{value:t.schema.graph.properties.image,callback:function(s){t.$set(t.schema.graph.properties,"image",s)},expression:"schema.graph.properties.image"}}),e("base-button",{staticClass:"insert-image",attrs:{size:"medium",type:"black"},on:{click:function(s){return t.openUploadModal("movieImage",t.updateImage)}}},[e("svg-circle-plus"),t._v(" "+t._s(t.strings.uploadOrSelectImage)+" ")],1),e("base-button",{staticClass:"remove-image",attrs:{size:"medium",type:"gray"},on:{click:function(s){t.schema.graph.properties.image=""}}},[t._v(" "+t._s(t.strings.remove)+" ")])],1),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.minimumSize)+" ")]),e("base-img",{staticClass:"image-preview",attrs:{src:t.schema.graph.properties.image}})]},proxy:!0}])}),e("review"),e("review-rating")],1)},m$=[],g$=$(p$,f$,m$,!1,null,null,null,null);const _$=g$.exports,y$={components:{BaseImg:At,BaseRadio:Js,BaseTextarea:qe,CoreSettingsRow:G,SvgCirclePlus:at},mixins:[Tt],data(){return{strings:{type:this.$t.__("Type",this.$tdPro),name:this.$t.__("Name",this.$tdPro),description:this.$t.__("Description",this.$tdPro),musicGroup:this.$t.__("Music Group",this.$tdPro),musicAlbum:this.$t.__("Music Album",this.$tdPro),image:this.$t.__("Image",this.$tdPro),uploadOrSelectImage:this.$t.__("Upload or Select Image",this.$tdPro),pasteYourImageUrl:this.$t.__("Paste your image URL or select a new image",this.$tdPro),minimumSize:this.$t.__("Minimum size: 112px x 112px, The image must be in JPG, PNG, GIF, SVG, or WEBP format.",this.$tdPro),remove:this.$t.__("Remove",this.$tdPro)}}},computed:{...M(["schema"])},methods:{...E(["setIsDirty","setGraph"]),updateImage(i){this.schema.graph.properties.image=i}},beforeMount(){this.schema.graph.id||(this.setGraph({id:"#aioseo-music-"+new Date().getTime().toString(36),slug:"music",graphName:"Music",label:this.$t.__("Music",this.$tdPro),properties:{name:"",description:"",type:"MusicGroup",image:""}}),this.$nextTick(()=>{this.setIsDirty(!1)}))}};var v$=function(){var t=this,e=t._self._c;return e("div",{staticClass:"graph-editor-fields graph-music"},[e("core-settings-row",{attrs:{name:t.strings.type},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-radio",{attrs:{size:"small",name:"type",value:t.schema.graph.properties.type==="MusicGroup",type:2},on:{input:function(s){t.schema.graph.properties.type="MusicGroup"}}},[t._v(" "+t._s(t.strings.musicGroup)+" ")]),e("base-radio",{attrs:{size:"small",name:"type",value:t.schema.graph.properties.type==="MusicAlbum",type:2},on:{input:function(s){t.schema.graph.properties.type="MusicAlbum"}}},[t._v(" "+t._s(t.strings.musicAlbum)+" ")])]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.name},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium"},model:{value:t.schema.graph.properties.name,callback:function(s){t.$set(t.schema.graph.properties,"name",s)},expression:"schema.graph.properties.name"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.description},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-textarea",{attrs:{minHeight:120},model:{value:t.schema.graph.properties.description,callback:function(s){t.$set(t.schema.graph.properties,"description",s)},expression:"schema.graph.properties.description"}})]},proxy:!0}])}),e("core-settings-row",{staticClass:"image-field",attrs:{name:t.strings.image,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("div",{staticClass:"image-upload"},[e("base-input",{attrs:{size:"medium",placeholder:t.strings.pasteYourImageUrl},model:{value:t.schema.graph.properties.image,callback:function(s){t.$set(t.schema.graph.properties,"image",s)},expression:"schema.graph.properties.image"}}),e("base-button",{staticClass:"insert-image",attrs:{size:"medium",type:"black"},on:{click:function(s){return t.openUploadModal("recipeImage",t.updateImage)}}},[e("svg-circle-plus"),t._v(" "+t._s(t.strings.uploadOrSelectImage)+" ")],1),e("base-button",{staticClass:"remove-image",attrs:{size:"medium",type:"gray"},on:{click:function(s){t.schema.graph.properties.image=""}}},[t._v(" "+t._s(t.strings.remove)+" ")])],1),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.minimumSize)+" ")]),e("base-img",{staticClass:"image-preview",attrs:{src:t.schema.graph.properties.image}})]},proxy:!0}])})],1)},b$=[],k$=$(y$,v$,b$,!1,null,null,null,null);const $$=k$.exports,x$={components:{BaseImg:At,CoreHtmlTagsEditor:et,CoreSettingsRow:G,FieldGroup:bt,SvgCirclePlus:at},mixins:[Tt],data(){return{strings:{name:this.$t.__("Name",this.$tdPro),description:this.$t.__("Description",this.$tdPro),email:this.$t.__("Email",this.$tdPro),jobTitle:this.$t.__("Job Title",this.$tdPro),location:this.$t.__("Location",this.$tdPro),streetAddress:this.$t.__("Street Address",this.$tdPro),locality:this.$t.__("Locality",this.$tdPro),postalCode:this.$t.__("Postal Code",this.$tdPro),region:this.$t.__("Region",this.$tdPro),country:this.$t.__("Country",this.$tdPro),image:this.$t.__("Image",this.$tdPro),uploadOrSelectImage:this.$t.__("Upload or Select Image",this.$tdPro),pasteYourImageUrl:this.$t.__("Paste your image URL or select a new image",this.$tdPro),minimumSize:this.$t.__("Minimum size: 112px x 112px, The image must be in JPG, PNG, GIF, SVG, or WEBP format.",this.$tdPro),remove:this.$t.__("Remove",this.$tdPro)}}},computed:{...M(["schema"])},methods:{...E(["setGraph","setIsDirty"]),updateImage(i){this.schema.graph.properties.image=i}},beforeMount(){this.schema.graph.id||(this.setGraph({id:"#aioseo-person-"+new Date().getTime().toString(36),slug:"person",graphName:"Person",label:this.$t.__("Person",this.$tdPro),properties:{name:"#post_title",description:"",email:"",jobTitle:"",image:"",location:{streetAddress:"",locality:"",postalCode:"",region:"",country:""}}}),this.$nextTick(()=>{this.setIsDirty(!1)}))}};var S$=function(){var t=this,e=t._self._c;return e("div",{staticClass:"graph-editor-fields graph-person"},[e("core-settings-row",{attrs:{name:t.strings.name},scopedSlots:t._u([{key:"content",fn:function(){return[e("core-html-tags-editor",{attrs:{"line-numbers":!1,single:"","tags-context":"schema",defaultMenuOrientation:"top","default-tags":["post_title","author_name"],tagsDescription:""},model:{value:t.schema.graph.properties.name,callback:function(s){t.$set(t.schema.graph.properties,"name",s)},expression:"schema.graph.properties.name"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.description},scopedSlots:t._u([{key:"content",fn:function(){return[e("core-html-tags-editor",{attrs:{"line-numbers":!1,single:"","tags-context":"schema",defaultMenuOrientation:"top","default-tags":["post_excerpt","separator_sa","site_title"],tagsDescription:""},model:{value:t.schema.graph.properties.description,callback:function(s){t.$set(t.schema.graph.properties,"description",s)},expression:"schema.graph.properties.description"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.email},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium"},model:{value:t.schema.graph.properties.email,callback:function(s){t.$set(t.schema.graph.properties,"email",s)},expression:"schema.graph.properties.email"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.jobTitle},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium"},model:{value:t.schema.graph.properties.jobTitle,callback:function(s){t.$set(t.schema.graph.properties,"jobTitle",s)},expression:"schema.graph.properties.jobTitle"}})]},proxy:!0}])}),e("core-settings-row",{staticClass:"image-field",attrs:{name:t.strings.image,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("div",{staticClass:"image-upload"},[e("base-input",{attrs:{size:"medium",placeholder:t.strings.pasteYourImageUrl},model:{value:t.schema.graph.properties.image,callback:function(s){t.$set(t.schema.graph.properties,"image",s)},expression:"schema.graph.properties.image"}}),e("base-button",{staticClass:"insert-image",attrs:{size:"medium",type:"black"},on:{click:function(s){return t.openUploadModal("personImage"+t.groupIndex,t.updateImage)}}},[e("svg-circle-plus"),t._v(" "+t._s(t.strings.uploadOrSelectImage)+" ")],1),e("base-button",{staticClass:"remove-image",attrs:{size:"medium",type:"gray"},on:{click:function(s){t.schema.graph.properties.image=""}}},[t._v(" "+t._s(t.strings.remove)+" ")])],1),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.minimumSize)+" ")]),e("base-img",{staticClass:"image-preview",attrs:{src:t.schema.graph.properties.image}})]},proxy:!0}])}),e("field-group",{attrs:{header:t.strings.location}},[e("core-settings-row",{attrs:{name:t.strings.streetAddress},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium"},model:{value:t.schema.graph.properties.location.streetAddress,callback:function(s){t.$set(t.schema.graph.properties.location,"streetAddress",s)},expression:"schema.graph.properties.location.streetAddress"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.locality},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium"},model:{value:t.schema.graph.properties.location.locality,callback:function(s){t.$set(t.schema.graph.properties.location,"locality",s)},expression:"schema.graph.properties.location.locality"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.postalCode},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium"},model:{value:t.schema.graph.properties.location.postalCode,callback:function(s){t.$set(t.schema.graph.properties.location,"postalCode",s)},expression:"schema.graph.properties.location.postalCode"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.region},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium"},model:{value:t.schema.graph.properties.location.region,callback:function(s){t.$set(t.schema.graph.properties.location,"region",s)},expression:"schema.graph.properties.location.region"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.country},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-select",{attrs:{size:"medium",options:t.$constants.COUNTRY_LIST,value:t.$constants.COUNTRY_LIST.find(s=>s.value===t.schema.graph.properties.location.country)},on:{input:s=>t.schema.graph.properties.location.country=s.value}})]},proxy:!0}])})],1)],1)},w$=[],C$=$(x$,S$,w$,!1,null,null,null,null);const P$=C$.exports,T$={components:{BaseDatepicker:Oe,BaseImg:At,BaseRadioToggle:Ke,BaseTextarea:qe,CoreHtmlTagsEditor:et,CoreSettingsRow:G,FieldGroup:bt,FieldGroupInner:Ye,ReviewRating:Fo,SvgCirclePlus:at},mixins:[Me,Tt],data(){return{energyRatingKey:0,reviewDefaults:{rating:"",headline:"",content:"",author:""},shippingDestinationDefaults:{type:"country",country:"",postalCodes:[],states:[],rate:0,handlingTime:"",deliveryTime:""},strings:{autogenerate:this.$t.__("Autogenerate Fields",this.$tdPro),name:this.$t.__("Name",this.$tdPro),description:this.$t.__("Description",this.$tdPro),brand:this.$t.__("Brand",this.$tdPro),image:this.$t.__("Image",this.$tdPro),uploadOrSelectImage:this.$t.__("Upload or Select Image",this.$tdPro),pasteYourImageUrl:this.$t.__("Paste your image URL or select a new image",this.$tdPro),minimumSize:this.$t.__("Minimum size: 112px x 112px, The image must be in JPG, PNG, GIF, SVG, or WEBP format.",this.$tdPro),remove:this.$t.__("Remove",this.$tdPro),identifiers:this.$t.__("Identifiers",this.$tdPro),sku:"SKU",mpn:"MPN",gtin:"GTIN",isbn:"ISBN",offer:this.$t.__("Offer",this.$tdPro),price:this.$t.__("Price",this.$tdPro),currency:this.$t.__("Currency",this.$tdPro),priceValidUntil:this.$t.__("Price Valid Until",this.$tdPro),priceValidDescription:this.$t.__("The date until this pricing lasts (optional).",this.$tdPro),availability:this.$t.__("Availability",this.$tdPro),reviews:this.$t.__("Reviews",this.$tdPro),review:this.$t.__("Review",this.$tdPro),reviewRating:this.$t.__("Review Rating",this.$tdPro),ratingValue:this.$t.__("Rating Value",this.$tdPro),ratingMinimum:this.$t.__("Rating Minimum",this.$tdPro),ratingMaximum:this.$t.__("Rating Maximum",this.$tdPro),headline:this.$t.__("Headline",this.$tdPro),content:this.$t.__("Content",this.$tdPro),author:this.$t.__("Author",this.$tdPro),shippingDestinations:this.$t.__("Shipping Destinations",this.$tdPro),shippingDestination:this.$t.__("Shipping Destination",this.$tdPro),destinationType:this.$t.__("Type",this.$tdPro),country:this.$t.__("Country",this.$tdPro),states:this.$t.__("States",this.$tdPro),statesDescription:this.$t.__('Enter one or multiple ISO 3166-2 subdivision codes for the states that you ship to. Currently, Google only supports the US, Australia, and Japan. Examples: "NY" (for US, state of New York), "NSW" (for Australia, state of New South Wales), or "03" (for Japan, Iwate prefecture).',this.$tdPro),postalCode:this.$t.__("Postal Code",this.$tdPro),postalCodeDescription:this.$t.__("You can enter one or multiple postal codes here if you only ship to certain parts of the country or if this rate only applies to specific postal codes. You cannot combine this together with states.",this.$tdPro),placeholderPostalCode:this.$t.__("Type to enter a postal code...",this.$tdPro),tagPlaceholderPostalCode:this.$t.__("Press enter to create a postal code",this.$tdPro),placeholderState:this.$t.__("Type to enter a state...",this.$tdPro),tagPlaceholderState:this.$t.__("Press enter to create a state",this.$tdPro),priceDescription:this.$t.__('Enter "0" if you offer free shipping to this destination.',this.$tdPro),audience:this.$t.__("Audience",this.$tdPro),gender:this.$t.__("Gender",this.$tdPro),minimumAge:this.$t.__("Minimum Age",this.$tdPro),maximumAge:this.$t.__("Maximum Age",this.$tdPro),attributes:this.$t.__("Attributes",this.$tdPro),material:this.$t.__("Material",this.$tdPro),color:this.$t.__("Color",this.$tdPro),pattern:this.$t.__("Pattern",this.$tdPro),patternDescription:this.$t.__('The pattern of the product, such as "polka dots" or "striped", if applicable.',this.$tdPro),size:this.$t.__("Size",this.$tdPro),sizeDescription:this.$t.__('A human readable name for the size, such as "XL", if applicable. Do not enter the dimensions of the product.',this.$tdPro),energyRating:this.$t.__("EU Energy Rating",this.$tdPro)}}},computed:{...M(["schema"]),isEddActive(){return this.$aioseo.data.isEddActive&&this.$aioseo.currentPost.postType==="download"},isWooCommerceActive(){return this.$aioseo.data.isWooCommerceActive&&this.$aioseo.currentPost.postType==="product"},autogenerateDescription(){return this.$t.sprintf(this.$t.__("Disable this setting if you'd like to edit all fields manually instead of letting %1$s automatically generate them for you based on the product data from %2$s.",this.$tdPro),"AIOSEO",this.isEddActive?"Easy Digital Downloads":"WooCommerce")},hideFieldEdd(){return this.schema.graph.properties.autogenerate&&this.isEddActive},hideFieldWooCommerce(){return this.schema.graph.properties.autogenerate&&this.isWooCommerceActive}},methods:{...E(["setGraph","setIsDirty"]),updateImage(i){this.schema.graph.properties.image=i},getAvailability(i){return this.$constants.SCHEMA_AVAILABILITY.find(t=>t.value===i)},saveAvailability(i){this.$set(this.schema.graph.properties.offer,"availability",i)},getCurrency(i){return this.$constants.CURRENCY_LIST.find(t=>t.value===i)},saveCurrency(i){this.$set(this.schema.graph.properties.offer,"currency",i)},getGender(i){return this.$constants.SCHEMA_GENDER.find(t=>t.value===i)},saveGender(i){this.$set(this.schema.graph.properties.audience,"gender",i)},getEnergyRating(i){return this.$constants.SCHEMA_ENERGY_RATING.find(t=>t.value===i)},saveEnergyRating(i){this.$set(this.schema.graph.properties.attributes,"energyRating",i),this.energyRatingKey++},addReviewGroup(){const i=JSON.parse(JSON.stringify(this.reviewDefaults));this.schema.graph.properties.reviews.push(i)},deleteReviewGroup(i){this.$delete(this.schema.graph.properties.reviews,i)},addShippingDestinationGroup(){const i=JSON.parse(JSON.stringify(this.shippingDestinationDefaults));this.schema.graph.properties.shippingDestinations.push(i)},deleteShippingDestinationGroup(i){this.$delete(this.schema.graph.properties.shippingDestinations,i)}},beforeMount(){const i={autogenerate:!0,name:"#post_title",description:"#post_excerpt",brand:"",image:"",identifiers:{sku:"",gtin:"",mpn:"",isbn:""},offer:{price:"",currency:"",availability:"",validUntil:""},attributes:{material:"",color:"",pattern:"",size:"",energyRating:""},audience:{gender:"Unisex",minimumAge:"",maximumAge:""},rating:{minimum:1,maximum:5},reviews:[JSON.parse(JSON.stringify(this.reviewDefaults))],shippingDestinations:[JSON.parse(JSON.stringify(this.shippingDestinationDefaults))]};if(this.schema.graph.id){for(const[t,e]of Object.entries(i))typeof this.schema.graph.properties[t]>"u"&&(this.schema.graph.properties[t]=e);return}this.setGraph({id:"#aioseo-product-"+new Date().getTime().toString(36),slug:"product",graphName:"Product",label:this.$t.__("Product",this.$tdPro),properties:i}),this.$nextTick(()=>{this.setIsDirty(!1)})},async mounted(){this.schema.graph.id||await Vl().then(i=>{!this.schema.graph||!this.schema.graph.properties||(this.schema.graph.properties.image=i,this.$nextTick(()=>{this.setIsDirty(!1)}))})}};var A$=function(){var t=this,e=t._self._c;return e("div",{staticClass:"graph-editor-fields graph-product"},[t.isEddActive||t.isWooCommerceActive?e("core-settings-row",{attrs:{name:t.strings.autogenerate,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-radio-toggle",{attrs:{name:"includeDates",options:[{label:t.$constants.GLOBAL_STRINGS.no,value:!1,activeClass:"dark"},{label:t.$constants.GLOBAL_STRINGS.yes,value:!0}]},model:{value:t.schema.graph.properties.autogenerate,callback:function(s){t.$set(t.schema.graph.properties,"autogenerate",s)},expression:"schema.graph.properties.autogenerate"}}),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.autogenerateDescription)+" ")])]},proxy:!0}],null,!1,3681045974)}):t._e(),!t.hideFieldWooCommerce&&!t.hideFieldEdd?e("core-settings-row",{attrs:{name:t.strings.name},scopedSlots:t._u([{key:"content",fn:function(){return[e("core-html-tags-editor",{attrs:{"line-numbers":!1,single:"","tags-context":"schema",defaultMenuOrientation:"top","default-tags":["post_title","separator_sa","site_title"],tagsDescription:""},model:{value:t.schema.graph.properties.name,callback:function(s){t.$set(t.schema.graph.properties,"name",s)},expression:"schema.graph.properties.name"}})]},proxy:!0}],null,!1,247930850)}):t._e(),t.hideFieldWooCommerce?t._e():e("core-settings-row",{attrs:{name:t.strings.description},scopedSlots:t._u([{key:"content",fn:function(){return[e("core-html-tags-editor",{attrs:{"line-numbers":!1,single:"","tags-context":"schema",defaultMenuOrientation:"top","default-tags":["post_excerpt","separator_sa","site_title"],tagsDescription:""},model:{value:t.schema.graph.properties.description,callback:function(s){t.$set(t.schema.graph.properties,"description",s)},expression:"schema.graph.properties.description"}})]},proxy:!0}],null,!1,2510037230)}),!t.$aioseo.data.wooCommerce||!t.$aioseo.data.wooCommerce.isWooCommerceBrandsActive&&!t.$aioseo.data.wooCommerce.isPerfectBrandsActive?e("core-settings-row",{attrs:{name:t.strings.brand,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{size:"medium"},model:{value:t.schema.graph.properties.brand,callback:function(s){t.$set(t.schema.graph.properties,"brand",s)},expression:"schema.graph.properties.brand"}})]},proxy:!0}],null,!1,1806581130)}):t._e(),!t.hideFieldWooCommerce&&!t.hideFieldEdd?e("core-settings-row",{staticClass:"image-field",attrs:{name:t.strings.image,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("div",{staticClass:"image-upload"},[e("base-input",{attrs:{size:"medium",placeholder:t.strings.pasteYourImageUrl},model:{value:t.schema.graph.properties.image,callback:function(s){t.$set(t.schema.graph.properties,"image",s)},expression:"schema.graph.properties.image"}}),e("base-button",{staticClass:"insert-image",attrs:{size:"medium",type:"black"},on:{click:function(s){return t.openUploadModal("productImage",t.updateImage)}}},[e("svg-circle-plus"),t._v(" "+t._s(t.strings.uploadOrSelectImage)+" ")],1),e("base-button",{staticClass:"remove-image",attrs:{size:"medium",type:"gray"},on:{click:function(s){t.schema.graph.properties.image=""}}},[t._v(" "+t._s(t.strings.remove)+" ")])],1),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.minimumSize)+" ")]),e("base-img",{staticClass:"image-preview",attrs:{src:t.schema.graph.properties.image}})]},proxy:!0}],null,!1,4187685284)}):t._e(),e("field-group",{attrs:{header:t.strings.identifiers}},[t.hideFieldWooCommerce?t._e():e("core-settings-row",{attrs:{name:t.strings.sku,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{size:"medium"},model:{value:t.schema.graph.properties.identifiers.sku,callback:function(s){t.$set(t.schema.graph.properties.identifiers,"sku",s)},expression:"schema.graph.properties.identifiers.sku"}})]},proxy:!0}],null,!1,925886242)}),!t.$aioseo.data.wooCommerce||!t.$aioseo.data.wooCommerce.isWooCommerceUpcEanIsbnActive?e("core-settings-row",{attrs:{name:t.strings.gtin,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{size:"medium"},model:{value:t.schema.graph.properties.identifiers.gtin,callback:function(s){t.$set(t.schema.graph.properties.identifiers,"gtin",s)},expression:"schema.graph.properties.identifiers.gtin"}})]},proxy:!0}],null,!1,856447963)}):t._e(),e("core-settings-row",{attrs:{name:t.strings.mpn,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{size:"medium"},model:{value:t.schema.graph.properties.identifiers.mpn,callback:function(s){t.$set(t.schema.graph.properties.identifiers,"mpn",s)},expression:"schema.graph.properties.identifiers.mpn"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.isbn,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{size:"medium"},model:{value:t.schema.graph.properties.identifiers.isbn,callback:function(s){t.$set(t.schema.graph.properties.identifiers,"isbn",s)},expression:"schema.graph.properties.identifiers.isbn"}})]},proxy:!0}])})],1),t.hideFieldWooCommerce?t._e():e("field-group",{attrs:{header:t.strings.offer}},[t.hideFieldEdd?t._e():e("core-settings-row",{attrs:{name:t.strings.price,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{size:"medium",type:"number",min:0,step:.01},model:{value:t.schema.graph.properties.offer.price,callback:function(s){t.$set(t.schema.graph.properties.offer,"price",s)},expression:"schema.graph.properties.offer.price"}})]},proxy:!0}],null,!1,4032830480)}),t.hideFieldEdd?t._e():e("core-settings-row",{attrs:{name:t.strings.currency,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-select",{attrs:{size:"medium",options:t.$constants.CURRENCY_LIST,value:t.getCurrency(t.schema.graph.properties.offer.currency)},on:{input:s=>t.saveCurrency(s.value)}})]},proxy:!0}],null,!1,302331948)}),e("core-settings-row",{attrs:{name:t.strings.priceValidUntil,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-datepicker",{attrs:{size:"medium"},model:{value:t.schema.graph.properties.offer.validUntil,callback:function(s){t.$set(t.schema.graph.properties.offer,"validUntil",s)},expression:"schema.graph.properties.offer.validUntil"}}),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.priceValidDescription)+" ")])]},proxy:!0}],null,!1,1159216220)}),e("core-settings-row",{attrs:{name:t.strings.availability,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-select",{staticClass:"aioseo-product-availibility",attrs:{size:"medium",options:t.$constants.SCHEMA_AVAILABILITY,value:t.getAvailability(t.schema.graph.properties.offer.availability)},on:{input:s=>t.saveAvailability(s.value)}})]},proxy:!0}],null,!1,2478785459)})],1),t.hideFieldEdd?t._e():e("field-group",{attrs:{header:t.strings.attributes}},[e("core-settings-row",{attrs:{name:t.strings.material,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{size:"medium"},model:{value:t.schema.graph.properties.attributes.material,callback:function(s){t.$set(t.schema.graph.properties.attributes,"material",s)},expression:"schema.graph.properties.attributes.material"}})]},proxy:!0}],null,!1,1143653435)}),e("core-settings-row",{attrs:{name:t.strings.color,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{size:"medium"},model:{value:t.schema.graph.properties.attributes.color,callback:function(s){t.$set(t.schema.graph.properties.attributes,"color",s)},expression:"schema.graph.properties.attributes.color"}})]},proxy:!0}],null,!1,2979364173)}),e("core-settings-row",{attrs:{name:t.strings.pattern,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{size:"medium"},model:{value:t.schema.graph.properties.attributes.pattern,callback:function(s){t.$set(t.schema.graph.properties.attributes,"pattern",s)},expression:"schema.graph.properties.attributes.pattern"}}),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.patternDescription)+" ")])]},proxy:!0}],null,!1,3995098152)}),e("core-settings-row",{attrs:{name:t.strings.size,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{size:"medium"},model:{value:t.schema.graph.properties.attributes.size,callback:function(s){t.$set(t.schema.graph.properties.attributes,"size",s)},expression:"schema.graph.properties.attributes.size"}}),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.sizeDescription)+" ")])]},proxy:!0}],null,!1,44388328)}),e("core-settings-row",{attrs:{name:t.strings.energyRating,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-select",{key:t.energyRatingKey,staticClass:"aioseo-product-gender",attrs:{size:"medium",options:t.$constants.SCHEMA_ENERGY_RATING,value:t.getEnergyRating(t.schema.graph.properties.attributes.energyRating)},on:{input:s=>t.saveEnergyRating(s.value)}})]},proxy:!0}],null,!1,3834500846)})],1),e("field-group",{attrs:{header:t.strings.audience}},[e("core-settings-row",{attrs:{name:t.strings.gender,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-select",{staticClass:"aioseo-product-gender",attrs:{size:"medium",options:t.$constants.SCHEMA_GENDER,value:t.getGender(t.schema.graph.properties.audience.gender)},on:{input:s=>t.saveGender(s.value)}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.minimumAge,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{size:"medium",type:"number",min:0,step:1},model:{value:t.schema.graph.properties.audience.minimumAge,callback:function(s){t.$set(t.schema.graph.properties.audience,"minimumAge",s)},expression:"schema.graph.properties.audience.minimumAge"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.maximumAge,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{size:"medium",type:"number",min:0,step:1},model:{value:t.schema.graph.properties.audience.maximumAge,callback:function(s){t.$set(t.schema.graph.properties.audience,"maximumAge",s)},expression:"schema.graph.properties.audience.maximumAge"}})]},proxy:!0}])})],1),t.hideFieldWooCommerce?t._e():e("field-group",{attrs:{header:t.strings.reviews,singularName:t.strings.review,amountOfGroups:t.schema.graph.properties.reviews.length,repeater:""},on:{addGroup:t.addReviewGroup}},t._l(t.schema.graph.properties.reviews,function(s,r){return e("div",{key:r},[e("field-group-inner",{attrs:{header:t.strings.review,groupIndex:r,hideDelete:r===0&&t.schema.graph.properties.reviews.length<2},on:{deleteGroup:t.deleteReviewGroup}},[e("core-settings-row",{attrs:{name:t.strings.ratingValue,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{size:"medium",type:"number",min:0,step:1},model:{value:s.rating,callback:function(n){t.$set(s,"rating",n)},expression:"review.rating"}})]},proxy:!0}],null,!0)}),e("core-settings-row",{attrs:{name:t.strings.headline,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{size:"medium"},model:{value:s.headline,callback:function(n){t.$set(s,"headline",n)},expression:"review.headline"}})]},proxy:!0}],null,!0)}),e("core-settings-row",{attrs:{name:t.strings.content,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-textarea",{attrs:{size:"medium",minHeight:120},model:{value:s.content,callback:function(n){t.$set(s,"content",n)},expression:"review.content"}})]},proxy:!0}],null,!0)}),e("core-settings-row",{attrs:{name:t.strings.author},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{size:"medium"},model:{value:s.author,callback:function(n){t.$set(s,"author",n)},expression:"review.author"}})]},proxy:!0}],null,!0)})],1)],1)}),0),!t.hideFieldWooCommerce&&(!t.$aioseo.data.edd||!t.$aioseo.data.edd.isEddReviewsActive)?e("review-rating",{attrs:{hideRatingValue:""}}):t._e(),t.hideFieldWooCommerce?t._e():e("field-group",{attrs:{header:t.strings.shippingDestinations,singularName:t.strings.shippingDestination,amountOfGroups:t.schema.graph.properties.shippingDestinations.length,repeater:""},on:{addGroup:t.addShippingDestinationGroup}},t._l(t.schema.graph.properties.shippingDestinations,function(s,r){return e("div",{key:r},[e("field-group-inner",{attrs:{header:t.strings.shippingDestination,groupIndex:r,hideDelete:r===0&&t.schema.graph.properties.shippingDestinations.length<2},on:{deleteGroup:t.deleteShippingDestinationGroup}},[e("core-settings-row",{attrs:{name:t.strings.country},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-select",{attrs:{size:"medium",options:t.$constants.COUNTRY_LIST,value:t.$constants.COUNTRY_LIST.find(n=>n.value===s.country)},on:{input:n=>s.country=n.value}})]},proxy:!0}],null,!0)}),e("core-settings-row",{attrs:{name:t.strings.states,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-select",{attrs:{size:"medium",multiple:"",taggable:"",options:t.getJsonValue(s.states)||[],value:t.getJsonValue(s.states)||[],placeholder:t.strings.placeholderState,"tag-placeholder":t.strings.tagPlaceholderState},on:{input:n=>s.states=t.setJsonValue(n)}}),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.statesDescription)+" ")])]},proxy:!0}],null,!0)}),e("core-settings-row",{attrs:{name:t.strings.postalCode,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-select",{attrs:{size:"medium",multiple:"",taggable:"",options:t.getJsonValue(s.postalCodes)||[],value:t.getJsonValue(s.postalCodes)||[],placeholder:t.strings.placeholderPostalcode,"tag-placeholder":t.strings.tagPlaceholderPostalCode},on:{input:n=>s.postalCodes=t.setJsonValue(n)}}),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.postalCodeDescription)+" ")])]},proxy:!0}],null,!0)}),e("core-settings-row",{attrs:{name:t.strings.price,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{size:"medium",type:"number",min:0,step:1},model:{value:s.rate,callback:function(n){t.$set(s,"rate",n)},expression:"shippingDestination.rate"}}),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.priceDescription)+" ")])]},proxy:!0}],null,!0)})],1)],1)}),0)],1)},D$=[],M$=$(T$,A$,D$,!1,null,null,null,null);const O$=M$.exports,I$={components:{BaseImg:At,BaseTextarea:qe,CoreHtmlTagsEditor:et,CoreSettingsRow:G,FieldGroup:bt,FieldGroupInner:Ye,SvgCirclePlus:at},mixins:[Me,Tt],data(){return{instructionDefaults:{name:"",text:"",image:""},strings:{name:this.$t.__("Name",this.$tdPro),description:this.$t.__("Description",this.$tdPro),author:this.$t.__("Author",this.$tdPro),dishType:this.$t.__("Dish Type",this.$tdPro),dishTypeDescription:this.$t.__('The type of dish, e.g. "dinner", "main course", "dessert" or "snack".',this.$tdPro),cuisineType:this.$t.__("Cuisine Type",this.$tdPro),cuisineTypeDescription:this.$t.__('The region associated with the recipe, e.g. "French" or "Mediterranean" or "American".',this.$tdPro),timeRequired:this.$t.__("Time Required",this.$tdPro),preparationTime:this.$t.__("Preparation Time",this.$tdPro),preparationDescription:this.$t.__("The time (in minutes) it takes to prepare the ingredients.",this.$tdPro),cookingTime:this.$t.__("Cooking Time",this.$tdPro),cookingDescription:this.$t.__("The time (in minutes) it takes to cook the ingredients.",this.$tdPro),servings:this.$t.__("Amount of Servings",this.$tdPro),calories:this.$t.__("Calories",this.$tdPro),caloriesDescription:this.$t.__("The total number of calories per serving.",this.$tdPro),ingredients:this.$t.__("Ingredients",this.$tdPro),ingredientsDescription:this.$t.__('The ingredients and their amounts, e.g. "3/4 cup sugar".',this.$tdPro),instructions:this.$t.__("Instructions",this.$tdPro),instruction:this.$t.__("Instruction",this.$tdPro),keywords:this.$t.__("Keywords",this.$tdPro),keywordsDescription:this.$t.__("Other relevant terms for your recipe such as a season, a specific holiday or theme, or other descriptors. Don't enter the dish or cuisine type.",this.$tdPro),image:this.$t.__("Image",this.$tdPro),uploadOrSelectImage:this.$t.__("Upload or Select Image",this.$tdPro),pasteYourImageUrl:this.$t.__("Paste your image URL or select a new image",this.$tdPro),minimumSize:this.$t.__("Minimum size: 112px x 112px, The image must be in JPG, PNG, GIF, SVG, or WEBP format.",this.$tdPro),remove:this.$t.__("Remove",this.$tdPro),nutrition:this.$t.__("Nutrition",this.$tdPro),instructionTitle:this.$t.__("Title",this.$tdPro),instructionText:this.$t.__("Details",this.$tdPro)}}},computed:{...M(["schema"])},methods:{...E(["setGraph","setIsDirty"]),updateImage(i){this.schema.graph.properties.image=i},addGroup(){const i=JSON.parse(JSON.stringify(this.instructionDefaults));this.schema.graph.properties.instructions.push(i)},deleteGroup(i){this.$delete(this.schema.graph.properties.instructions,i)}},beforeMount(){this.schema.graph.id||(this.setGraph({id:"#aioseo-recipe-"+new Date().getTime().toString(36),slug:"recipe",graphName:"Recipe",label:this.$t.__("Recipe",this.$tdPro),properties:{name:"#post_title",description:"#post_excerpt",author:"#author_name",ingredients:"",dishType:"",cuisineType:"",keywords:"",image:"",nutrition:{servings:1,calories:""},timeRequired:{preparation:"",cooking:""},instructions:[JSON.parse(JSON.stringify(this.instructionDefaults))]}}),this.$nextTick(()=>{this.setIsDirty(!1)}))}};var R$=function(){var t=this,e=t._self._c;return e("div",{staticClass:"graph-editor-fields graph-recipe"},[e("core-settings-row",{attrs:{name:t.strings.name},scopedSlots:t._u([{key:"content",fn:function(){return[e("core-html-tags-editor",{attrs:{"line-numbers":!1,single:"","tags-context":"schema",defaultMenuOrientation:"top","default-tags":["post_title","separator_sa","site_title"],tagsDescription:""},model:{value:t.schema.graph.properties.name,callback:function(s){t.$set(t.schema.graph.properties,"name",s)},expression:"schema.graph.properties.name"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.description},scopedSlots:t._u([{key:"content",fn:function(){return[e("core-html-tags-editor",{attrs:{"line-numbers":!1,single:"","tags-context":"schema",defaultMenuOrientation:"top","default-tags":["post_excerpt","separator_sa","site_title"],tagsDescription:""},model:{value:t.schema.graph.properties.description,callback:function(s){t.$set(t.schema.graph.properties,"description",s)},expression:"schema.graph.properties.description"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.author},scopedSlots:t._u([{key:"content",fn:function(){return[e("core-html-tags-editor",{attrs:{"line-numbers":!1,single:"","tags-context":"schema",defaultMenuOrientation:"top","default-tags":["author_name","author_first_name","author_last_name"],tagsDescription:""},model:{value:t.schema.graph.properties.author,callback:function(s){t.$set(t.schema.graph.properties,"author",s)},expression:"schema.graph.properties.author"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.ingredients,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-select",{attrs:{multiple:"",taggable:"",options:t.getJsonValue(t.schema.graph.properties.ingredients)||[],value:t.getJsonValue(t.schema.graph.properties.ingredients)||[]},on:{input:s=>t.schema.graph.properties.ingredients=t.setJsonValue(s)}}),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.ingredientsDescription)+" ")])]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.dishType},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium"},model:{value:t.schema.graph.properties.dishType,callback:function(s){t.$set(t.schema.graph.properties,"dishType",s)},expression:"schema.graph.properties.dishType"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.cuisineType},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium"},model:{value:t.schema.graph.properties.cuisineType,callback:function(s){t.$set(t.schema.graph.properties,"cuisineType",s)},expression:"schema.graph.properties.cuisineType"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.keywords,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-select",{attrs:{multiple:"",taggable:"",options:t.getJsonValue(t.schema.graph.properties.keywords)||[],value:t.getJsonValue(t.schema.graph.properties.keywords)||[]},on:{input:s=>t.schema.graph.properties.keywords=t.setJsonValue(s)}}),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.keywordsDescription)+" ")])]},proxy:!0}])}),e("core-settings-row",{staticClass:"image-field",attrs:{name:t.strings.image,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("div",{staticClass:"image-upload"},[e("base-input",{attrs:{size:"medium",placeholder:t.strings.pasteYourImageUrl},model:{value:t.schema.graph.properties.image,callback:function(s){t.$set(t.schema.graph.properties,"image",s)},expression:"schema.graph.properties.image"}}),e("base-button",{staticClass:"insert-image",attrs:{size:"medium",type:"black"},on:{click:function(s){return t.openUploadModal("recipeImage",t.updateImage)}}},[e("svg-circle-plus"),t._v(" "+t._s(t.strings.uploadOrSelectImage)+" ")],1),e("base-button",{staticClass:"remove-image",attrs:{size:"medium",type:"gray"},on:{click:function(s){t.schema.graph.properties.image=""}}},[t._v(" "+t._s(t.strings.remove)+" ")])],1),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.minimumSize)+" ")]),e("base-img",{staticClass:"image-preview",attrs:{src:t.schema.graph.properties.image}})]},proxy:!0}])}),e("field-group",{attrs:{header:t.strings.nutrition}},[e("core-settings-row",{attrs:{name:t.strings.servings,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"number",size:"medium",min:1},model:{value:t.schema.graph.properties.nutrition.servings,callback:function(s){t.$set(t.schema.graph.properties.nutrition,"servings",s)},expression:"schema.graph.properties.nutrition.servings"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.calories,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"number",size:"medium",min:0},model:{value:t.schema.graph.properties.nutrition.calories,callback:function(s){t.$set(t.schema.graph.properties.nutrition,"calories",s)},expression:"schema.graph.properties.nutrition.calories"}}),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.caloriesDescription)+" ")])]},proxy:!0}])})],1),e("field-group",{attrs:{header:t.strings.timeRequired}},[e("core-settings-row",{attrs:{name:t.strings.preparationTime,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"number",size:"medium",min:0},model:{value:t.schema.graph.properties.timeRequired.preparation,callback:function(s){t.$set(t.schema.graph.properties.timeRequired,"preparation",s)},expression:"schema.graph.properties.timeRequired.preparation"}}),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.preparationDescription)+" ")])]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.cookingTime,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"number",size:"medium",min:0},model:{value:t.schema.graph.properties.timeRequired.cooking,callback:function(s){t.$set(t.schema.graph.properties.timeRequired,"cooking",s)},expression:"schema.graph.properties.timeRequired.cooking"}}),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.cookingDescription)+" ")])]},proxy:!0}])})],1),e("field-group",{attrs:{header:t.strings.instructions,singularName:t.strings.instruction,amountOfGroups:t.schema.graph.properties.instructions.length,repeater:""},on:{addGroup:t.addGroup}},t._l(t.schema.graph.properties.instructions,function(s,r){return e("div",{key:r},[e("field-group-inner",{attrs:{header:t.strings.instruction,groupIndex:r,hideDelete:r===0&&t.schema.graph.properties.instructions.length<2},on:{deleteGroup:t.deleteGroup}},[e("core-settings-row",{attrs:{name:t.strings.instructionTitle},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium"},model:{value:s.name,callback:function(n){t.$set(s,"name",n)},expression:"instruction.name"}})]},proxy:!0}],null,!0)}),e("core-settings-row",{attrs:{name:t.strings.instructionText},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-textarea",{attrs:{size:"medium",minHeight:120},model:{value:s.text,callback:function(n){t.$set(s,"text",n)},expression:"instruction.text"}})]},proxy:!0}],null,!0)}),e("core-settings-row",{staticClass:"image-field",attrs:{name:t.strings.image,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("div",{staticClass:"image-upload"},[e("base-input",{attrs:{size:"medium",placeholder:t.strings.pasteYourImageUrl},model:{value:s.image,callback:function(n){t.$set(s,"image",n)},expression:"instruction.image"}}),e("base-button",{staticClass:"insert-image",attrs:{size:"medium",type:"black"},on:{click:function(n){t.openUploadModal("recipeInstructionImage"+r,o=>{t.schema.graph.properties.instructions[r].image=o})}}},[e("svg-circle-plus"),t._v(" "+t._s(t.strings.uploadOrSelectImage)+" ")],1),e("base-button",{staticClass:"remove-image",attrs:{size:"medium",type:"gray"},on:{click:function(n){s.image=""}}},[t._v(" "+t._s(t.strings.remove)+" ")])],1),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.minimumSize)+" ")]),e("base-img",{staticClass:"image-preview",attrs:{src:s.image}})]},proxy:!0}],null,!0)})],1)],1)}),0)],1)},L$=[],E$=$(I$,R$,L$,!1,null,null,null,null);const N$=E$.exports,B$={components:{BaseImg:At,CoreHtmlTagsEditor:et,CoreSettingsRow:G,FieldGroup:bt,SvgCirclePlus:at},mixins:[Tt],data(){return{strings:{name:this.$t.__("Name",this.$tdPro),description:this.$t.__("Description",this.$tdPro),type:this.$t.__("Type",this.$tdPro),typeDescription:this.$t.__("The type of service that is being provided, e.g. delivery service, printing services, etc.",this.$tdPro),image:this.$t.__("Image",this.$tdPro),offer:this.$t.__("Offer",this.$tdPro),price:this.$t.__("Price",this.$tdPro),priceDescription:this.$t.__('If the service is available for free, set the price to "0".',this.$tdPro),currency:this.$t.__("Currency",this.$tdPro),provider:this.$t.__("Provider",this.$tdPro),url:this.$t.__("URL",this.$tdPro),organizationDescription:this.$t.sprintf(this.$t.__("Leave this empty if you want to use the Organization you've set under %1$s.",this.$tdPro),this.$links.getPlainLink(this.$t.__("Search Appearance > Knowledge Graph",this.$tdPro),this.$aioseo.urls.aio.searchAppearance+"#/global-settings")),uploadOrSelectImage:this.$t.__("Upload or Select Image",this.$tdPro),pasteYourImageUrl:this.$t.__("Paste your image URL or select a new image",this.$tdPro),minimumSize:this.$t.__("Minimum size: 112px x 112px, The image must be in JPG, PNG, GIF, SVG, or WEBP format.",this.$tdPro),remove:this.$t.__("Remove",this.$tdPro)}}},computed:{...M(["schema"])},methods:{...E(["setGraph","setIsDirty"]),updateImage(i){this.schema.graph.properties.image=i},updateProviderImage(i){this.schema.graph.properties.provider.image=i},getCurrency(i){return this.$constants.CURRENCY_LIST.find(t=>t.value===i)},saveCurrency(i){this.$set(this.schema.graph.properties,"currency",i)}},beforeMount(){this.schema.graph.id||(this.setGraph({id:"#aioseo-service-"+new Date().getTime().toString(36),slug:"service",graphName:"Service",label:this.$t.__("Service",this.$tdPro),properties:{name:"#post_title",description:"",serviceType:"",price:"",currency:"",image:"",provider:{name:"",url:"",image:""}}}),this.$nextTick(()=>{this.setIsDirty(!1)}))}};var z$=function(){var t=this,e=t._self._c;return e("div",{staticClass:"graph-editor-fields graph-service"},[e("core-settings-row",{attrs:{name:t.strings.name},scopedSlots:t._u([{key:"content",fn:function(){return[e("core-html-tags-editor",{attrs:{"line-numbers":!1,single:"","tags-context":"schema",defaultMenuOrientation:"top","default-tags":["post_title","separator_sa","site_title"],tagsDescription:""},model:{value:t.schema.graph.properties.name,callback:function(s){t.$set(t.schema.graph.properties,"name",s)},expression:"schema.graph.properties.name"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.description},scopedSlots:t._u([{key:"content",fn:function(){return[e("core-html-tags-editor",{attrs:{"line-numbers":!1,single:"","tags-context":"schema",defaultMenuOrientation:"top","default-tags":["post_excerpt","separator_sa","site_title"],tagsDescription:""},model:{value:t.schema.graph.properties.description,callback:function(s){t.$set(t.schema.graph.properties,"description",s)},expression:"schema.graph.properties.description"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.type,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{size:"medium"},model:{value:t.schema.graph.properties.serviceType,callback:function(s){t.$set(t.schema.graph.properties,"serviceType",s)},expression:"schema.graph.properties.serviceType"}}),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.typeDescription)+" ")])]},proxy:!0}])}),e("core-settings-row",{staticClass:"image-field",attrs:{name:t.strings.image,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("div",{staticClass:"image-upload"},[e("base-input",{attrs:{size:"medium",placeholder:t.strings.pasteYourImageUrl},model:{value:t.schema.graph.properties.image,callback:function(s){t.$set(t.schema.graph.properties,"image",s)},expression:"schema.graph.properties.image"}}),e("base-button",{staticClass:"insert-image",attrs:{size:"medium",type:"black"},on:{click:function(s){return t.openUploadModal("serviceImage",t.updateImage)}}},[e("svg-circle-plus"),t._v(" "+t._s(t.strings.uploadOrSelectImage)+" ")],1),e("base-button",{staticClass:"remove-image",attrs:{size:"medium",type:"gray"},on:{click:function(s){t.schema.graph.properties.image=""}}},[t._v(" "+t._s(t.strings.remove)+" ")])],1),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.minimumSize)+" ")]),e("base-img",{staticClass:"image-preview",attrs:{src:t.schema.graph.properties.image}})]},proxy:!0}])}),e("field-group",{attrs:{header:t.strings.offer}},[e("core-settings-row",{attrs:{name:t.strings.price,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{size:"medium",type:"number",min:0,step:.01},model:{value:t.schema.graph.properties.price,callback:function(s){t.$set(t.schema.graph.properties,"price",s)},expression:"schema.graph.properties.price"}}),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.priceDescription)+" ")])]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.currency,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-select",{attrs:{size:"medium",options:t.$constants.CURRENCY_LIST,value:t.getCurrency(t.schema.graph.properties.currency)},on:{input:s=>t.saveCurrency(s.value)}})]},proxy:!0}])})],1),e("field-group",{attrs:{header:t.strings.provider}},[e("core-settings-row",{attrs:{name:t.strings.name},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium"},model:{value:t.schema.graph.properties.provider.name,callback:function(s){t.$set(t.schema.graph.properties.provider,"name",s)},expression:"schema.graph.properties.provider.name"}}),t.$aioseo.options.searchAppearance.global.schema.siteRepresents==="organization"?e("div",{staticClass:"aioseo-description",domProps:{innerHTML:t._s(t.strings.organizationDescription)}}):t._e()]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.url},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium",validation:"url"},model:{value:t.schema.graph.properties.provider.url,callback:function(s){t.$set(t.schema.graph.properties.provider,"url",s)},expression:"schema.graph.properties.provider.url"}})]},proxy:!0}])}),e("core-settings-row",{staticClass:"image-field",attrs:{name:t.strings.image,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("div",{staticClass:"image-upload"},[e("base-input",{attrs:{size:"medium",placeholder:t.strings.pasteYourImageUrl},model:{value:t.schema.graph.properties.provider.image,callback:function(s){t.$set(t.schema.graph.properties.provider,"image",s)},expression:"schema.graph.properties.provider.image"}}),e("base-button",{staticClass:"insert-image",attrs:{size:"medium",type:"black"},on:{click:function(s){return t.openUploadModal("serviceProviderImage",t.updateProviderImage)}}},[e("svg-circle-plus"),t._v(" "+t._s(t.strings.uploadOrSelectImage)+" ")],1),e("base-button",{staticClass:"remove-image",attrs:{size:"medium",type:"gray"},on:{click:function(s){t.schema.graph.properties.provider.image=""}}},[t._v(" "+t._s(t.strings.remove)+" ")])],1),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.minimumSize)+" ")]),e("base-img",{staticClass:"image-preview",attrs:{src:t.schema.graph.properties.provider.image}})]},proxy:!0}])})],1)],1)},G$=[],F$=$(B$,z$,G$,!1,null,null,null,null);const H$=F$.exports,V$={components:{CoreHtmlTagsEditor:et,CoreSettingsRow:G,FieldGroup:bt,ReviewRating:Fo},mixins:[Me],data(){return{strings:{name:this.$t.__("Name",this.$tdPro),description:this.$t.__("Description",this.$tdPro),price:this.$t.__("Price",this.$tdPro),priceDescription:this.$t.__('If the software is available for free, set the price to "0".',this.$tdPro),currency:this.$t.__("Currency",this.$tdPro),operatingSystem:this.$t.__("Operating System",this.$tdPro),operatingSystemDescription:this.$t.__('The supported operating systems, e.g. "Windows 10", "OSX 10.6", "Android 9"',this.$tdPro),category:this.$t.__("Category",this.$tdPro),offer:this.$t.__("Offer",this.$tdPro),review:this.$t.__("Review",this.$tdPro),headline:this.$t.__("Headline",this.$tdPro),content:this.$t.__("Content",this.$tdPro),author:this.$t.__("Author",this.$tdPro)},categories:[{label:this.$t.__("Business App",this.$tdPro),value:"BusinessApplication"},{label:this.$t.__("Entertainment App",this.$tdPro),value:"EntertainmentApplication"},{label:this.$t.__("Communication App",this.$tdPro),value:"CommunicationApplication"},{label:this.$t.__("Social Network App",this.$tdPro),value:"SocialNetworkingApplication"},{label:this.$t.__("Educational App",this.$tdPro),value:"EducationalApplication"},{label:this.$t.__("Health App",this.$tdPro),value:"HealthApplication"},{label:this.$t.__("Finance App",this.$tdPro),value:"FinanceApplication"},{label:this.$t.__("Shopping App",this.$tdPro),value:"ShoppingApplication"},{label:this.$t.__("Travel App",this.$tdPro),value:"TravelApplication"},{label:this.$t.__("Sports App",this.$tdPro),value:"SportsApplication"},{label:this.$t.__("Video Game App",this.$tdPro),value:"GameApplication"},{label:this.$t.__("Browser App",this.$tdPro),value:"BrowserApplication"},{label:this.$t.__("Security App",this.$tdPro),value:"SecurityApplication"},{label:this.$t.__("Design App",this.$tdPro),value:"DesignApplication"},{label:this.$t.__("Developer App",this.$tdPro),value:"DeveloperApplication"},{label:this.$t.__("Lifestyle App",this.$tdPro),value:"LifestyleApplication"},{label:this.$t.__("Driver App",this.$tdPro),value:"DriverApplication"},{label:this.$t.__("Desktop Enhancement App",this.$tdPro),value:"DesktopEnhancementApplication"},{label:this.$t.__("Multimedia App",this.$tdPro),value:"MultimediaApplication"},{label:this.$t.__("Home App",this.$tdPro),value:"HomeApplication"},{label:this.$t.__("Utilities App",this.$tdPro),value:"UtilitiesApplication"},{label:this.$t.__("Reference App",this.$tdPro),value:"ReferenceApplication"}]}},computed:{...M(["schema"])},methods:{...E(["setGraph","setIsDirty"]),getCurrency(i){return this.$constants.CURRENCY_LIST.find(t=>t.value===i)},saveCurrency(i){this.$set(this.schema.graph.properties,"currency",i)},getCategory(i){return this.categories.find(t=>t.value===i)},saveCategory(i){this.$set(this.schema.graph.properties,"category",i)}},beforeMount(){this.schema.graph.id||(this.setGraph({id:"#aioseo-software-application-"+new Date().getTime().toString(36),slug:"software-application",graphName:"SoftwareApplication",label:this.$t.__("Software",this.$tdPro),properties:{name:"#post_title",description:"",price:"",currency:"",operatingSystem:"",category:"",rating:{value:"",minimum:1,maximum:5},review:{headline:"",content:"",author:"#author_name"}}}),this.$nextTick(()=>{this.setIsDirty(!1)}))}};var U$=function(){var t=this,e=t._self._c;return e("div",{staticClass:"graph-editor-fields graph-software-application"},[e("core-settings-row",{attrs:{name:t.strings.name},scopedSlots:t._u([{key:"content",fn:function(){return[e("core-html-tags-editor",{attrs:{"line-numbers":!1,single:"","tags-context":"schema",defaultMenuOrientation:"top","default-tags":["post_title","separator_sa","site_title"],tagsDescription:""},model:{value:t.schema.graph.properties.name,callback:function(s){t.$set(t.schema.graph.properties,"name",s)},expression:"schema.graph.properties.name"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.description},scopedSlots:t._u([{key:"content",fn:function(){return[e("core-html-tags-editor",{attrs:{"line-numbers":!1,single:"","tags-context":"schema",defaultMenuOrientation:"top","default-tags":["post_excerpt","separator_sa","site_title"],tagsDescription:""},model:{value:t.schema.graph.properties.description,callback:function(s){t.$set(t.schema.graph.properties,"description",s)},expression:"schema.graph.properties.description"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.category,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-select",{attrs:{size:"medium",options:t.categories,value:t.getCategory(t.schema.graph.properties.category)},on:{input:s=>t.saveCategory(s.value)}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.operatingSystem,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-select",{attrs:{multiple:"",taggable:"",options:t.getJsonValue(t.schema.graph.properties.operatingSystem)||[],value:t.getJsonValue(t.schema.graph.properties.operatingSystem)||[]},on:{input:s=>t.schema.graph.properties.operatingSystem=t.setJsonValue(s)}}),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.operatingSystemDescription)+" ")])]},proxy:!0}])}),e("field-group",{attrs:{header:t.strings.offer}},[e("core-settings-row",{attrs:{name:t.strings.price,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{size:"medium",type:"number",min:0,step:.01},model:{value:t.schema.graph.properties.price,callback:function(s){t.$set(t.schema.graph.properties,"price",s)},expression:"schema.graph.properties.price"}}),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.priceDescription)+" ")])]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.currency,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-select",{attrs:{size:"medium",options:t.$constants.CURRENCY_LIST,value:t.getCurrency(t.schema.graph.properties.currency)},on:{input:s=>t.saveCurrency(s.value)}})]},proxy:!0}])})],1),e("review-rating")],1)},W$=[],K$=$(V$,U$,W$,!1,null,null,null,null);const q$=K$.exports,J$={components:{BaseDatepicker:Oe,BaseImg:At,BaseRadioToggle:Ke,CoreHtmlTagsEditor:et,CoreSettingsRow:G,SvgCirclePlus:at},mixins:[Tt],data(){return{strings:{name:this.$t.__("Name",this.$tdPro),description:this.$t.__("Description",this.$tdPro),uploadDate:this.$t.__("Upload Date",this.$tdPro),duration:this.$t.__("Duration",this.$tdPro),contentUrl:this.$t.__("Content URL",this.$tdPro),contentUrlDescription:this.$t.__("A URL pointing to the video media file (e.g. MP4, MOV, etc.). Search engines prefer the content URL over the embed URL.",this.$tdPro),embedUrl:this.$t.__("Embed URL",this.$tdPro),embedUrlDescription:this.$t.__("A URL pointing to an embeddable player for the video (e.g. a YouTube link).",this.$tdPro),thumbnailUrl:this.$t.__("Thumbnail URL",this.$tdPro),familyFriendly:this.$t.__("Is Family Friendly",this.$tdPro),uploadOrSelectImage:this.$t.__("Upload or Select Image",this.$tdPro),pasteYourImageUrl:this.$t.__("Paste your image URL or select a new image",this.$tdPro),minimumSize:this.$t.__("Minimum size: 112px x 112px, The image must be in JPG, PNG, GIF, SVG, or WEBP format.",this.$tdPro),remove:this.$t.__("Remove",this.$tdPro)}}},computed:{...M(["schema"])},methods:{...E(["setGraph","setIsDirty"]),updateImage(i){this.schema.graph.properties.thumbnailUrl=i}},beforeMount(){this.schema.graph.id||(this.setGraph({id:"#aioseo-video-"+new Date().getTime().toString(36),slug:"video",graphName:"Video",label:this.$t.__("Video",this.$tdPro),properties:{name:"#post_title",description:"#post_excerpt",uploadDate:"",contentUrl:"",embedUrl:"",thumbnailUrl:"",duration:"",familyFriendly:!0}}),this.$nextTick(()=>{this.setIsDirty(!1)}))}};var j$=function(){var t=this,e=t._self._c;return e("div",{staticClass:"graph-editor-fields graph-video"},[e("core-settings-row",{attrs:{name:t.strings.name},scopedSlots:t._u([{key:"content",fn:function(){return[e("core-html-tags-editor",{attrs:{"line-numbers":!1,single:"","tags-context":"schema",defaultMenuOrientation:"top","default-tags":["post_title","separator_sa","site_title"],tagsDescription:""},model:{value:t.schema.graph.properties.name,callback:function(s){t.$set(t.schema.graph.properties,"name",s)},expression:"schema.graph.properties.name"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.description},scopedSlots:t._u([{key:"content",fn:function(){return[e("core-html-tags-editor",{attrs:{"line-numbers":!1,single:"","tags-context":"schema",defaultMenuOrientation:"top","default-tags":["post_excerpt","separator_sa","site_title"],tagsDescription:""},model:{value:t.schema.graph.properties.description,callback:function(s){t.$set(t.schema.graph.properties,"description",s)},expression:"schema.graph.properties.description"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.contentUrl},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium",validation:"url"},model:{value:t.schema.graph.properties.contentUrl,callback:function(s){t.$set(t.schema.graph.properties,"contentUrl",s)},expression:"schema.graph.properties.contentUrl"}}),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.contentUrlDescription)+" ")])]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.embedUrl},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-input",{attrs:{type:"text",size:"medium",validation:"url"},model:{value:t.schema.graph.properties.embedUrl,callback:function(s){t.$set(t.schema.graph.properties,"embedUrl",s)},expression:"schema.graph.properties.embedUrl"}}),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.embedUrlDescription)+" ")])]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.uploadDate,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-datepicker",{attrs:{size:"medium",timePicker:"",timePicker24Hour:""},model:{value:t.schema.graph.properties.uploadDate,callback:function(s){t.$set(t.schema.graph.properties,"uploadDate",s)},expression:"schema.graph.properties.uploadDate"}})]},proxy:!0}])}),e("core-settings-row",{attrs:{name:t.strings.familyFriendly,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-radio-toggle",{attrs:{name:"includeDates",options:[{label:t.$constants.GLOBAL_STRINGS.no,value:!1,activeClass:"dark"},{label:t.$constants.GLOBAL_STRINGS.yes,value:!0}]},model:{value:t.schema.graph.properties.familyFriendly,callback:function(s){t.$set(t.schema.graph.properties,"familyFriendly",s)},expression:"schema.graph.properties.familyFriendly"}})]},proxy:!0}])}),e("core-settings-row",{staticClass:"image-field",attrs:{name:t.strings.thumbnailUrl,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("div",{staticClass:"image-upload"},[e("base-input",{attrs:{size:"medium",placeholder:t.strings.pasteYourImageUrl},model:{value:t.schema.graph.properties.thumbnailUrl,callback:function(s){t.$set(t.schema.graph.properties,"thumbnailUrl",s)},expression:"schema.graph.properties.thumbnailUrl"}}),e("base-button",{staticClass:"insert-image",attrs:{size:"medium",type:"black"},on:{click:function(s){return t.openUploadModal("videoImage",t.updateImage)}}},[e("svg-circle-plus"),t._v(" "+t._s(t.strings.uploadOrSelectImage)+" ")],1),e("base-button",{staticClass:"remove-image",attrs:{size:"medium",type:"gray"},on:{click:function(s){t.schema.graph.properties.thumbnailUrl=""}}},[t._v(" "+t._s(t.strings.remove)+" ")])],1),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.minimumSize)+" ")]),e("base-img",{staticClass:"image-preview",attrs:{src:t.schema.graph.properties.thumbnailUrl}})]},proxy:!0}])})],1)},Y$=[],Q$=$(J$,j$,Y$,!1,null,null,null,null);const X$=Q$.exports;const Z$={components:{CoreSettingsRow:G},data(){return{strings:{type:this.$t.__("Type",this.$tdPro),name:this.$t.__("Name",this.$tdPro),description:this.$t.__("Description",this.$tdPro)}}},computed:{...M(["schema"])},methods:{...E(["setGraph","setIsDirty"]),getWebPageType(i){return this.$constants.WEBPAGE_TYPE_LIST.find(t=>t.value===i)},saveWebPageType(i){this.$set(this.schema.graph.properties,"type",i)}},beforeMount(){this.schema.graph.id||(this.setGraph({id:"#aioseo-web-page-"+new Date().getTime().toString(36),slug:"web-page",graphName:"WebPage",label:this.$t.__("Web Page",this.$tdPro),properties:{type:"WebPage",name:"#post_title",description:"#post_excerpt"}}),this.$nextTick(()=>{this.setIsDirty(!1)}))}};var tx=function(){var t=this,e=t._self._c;return e("div",{staticClass:"graph-editor-fields graph-web-page"},[e("core-settings-row",{attrs:{name:t.strings.type,align:""},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-select",{attrs:{size:"medium",options:t.$constants.WEBPAGE_TYPE_LIST,value:t.getWebPageType(t.schema.graph.properties.type)},on:{input:s=>t.saveWebPageType(s.value)}})]},proxy:!0}])})],1)},ex=[],sx=$(Z$,tx,ex,!1,null,null,null,null);const ix=sx.exports,rx={};var nx=function(){var t=this,e=t._self._c;return e("svg",{staticClass:"aioseo-trash",attrs:{viewBox:"0 0 11 12",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M8.0013 4V10.6667H2.66797V4H8.0013ZM7.0013 0H3.66797L3.0013 0.666667H0.667969V2H10.0013V0.666667H7.66797L7.0013 0ZM9.33463 2.66667H1.33464V10.6667C1.33464 11.4 1.93464 12 2.66797 12H8.0013C8.73464 12 9.33463 11.4 9.33463 10.6667V2.66667Z",fill:"currentColor"}})])},ox=[],ax=$(rx,nx,ox,!1,null,null,null,null);const lx=ax.exports,cx={};var hx=function(){var t=this,e=t._self._c;return e("svg",{staticClass:"aioseo-web-page",attrs:{viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M3.6666 10.3H8.24994V9.3H3.6666V10.3ZM3.6666 7.5H10.3499V6.5H3.6666V7.5ZM3.6666 4.68333H10.3499V3.68333H3.6666V4.68333ZM2.08327 13.2333C1.72771 13.2333 1.41938 13.1028 1.15827 12.8417C0.897157 12.5806 0.766602 12.2722 0.766602 11.9167V2.08333C0.766602 1.71667 0.897157 1.40278 1.15827 1.14167C1.41938 0.880556 1.72771 0.75 2.08327 0.75H11.9166C12.2833 0.75 12.5972 0.880556 12.8583 1.14167C13.1194 1.40278 13.2499 1.71667 13.2499 2.08333V11.9167C13.2499 12.2722 13.1194 12.5806 12.8583 12.8417C12.5972 13.1028 12.2833 13.2333 11.9166 13.2333H2.08327ZM2.08327 11.9167H11.9166V2.08333H2.08327V11.9167ZM2.08327 2.08333V11.9167V2.08333Z",fill:"currentColor"}})])},ux=[],dx=$(cx,hx,ux,!1,null,null,null,null);const px=dx.exports,Qe={components:{Article:ik,Book:dk,Course:_k,Dataset:$k,Event:Ok,FAQPage:Nk,FactCheck:Hk,HowTo:qk,JobPosting:i$,Movie:_$,Music:$$,Person:P$,Product:O$,Recipe:N$,Service:H$,SoftwareApplication:q$,Video:X$,WebPage:ix,SvgArticle:Wu,SvgBook:Ku,SvgCircleQuestionMark:jn,SvgCustomSchema:qu,SvgCopy:Ju,SvgCourse:ju,SvgDataset:Yu,SvgEvent:Qu,SvgFaqPage:Xu,SvgFactCheck:Zu,SvgFile:td,SvgFileEdit:ed,SvgGoogleSmall:sd,SvgHowTo:id,SvgJobPosting:rd,SvgMovie:nd,SvgMusic:od,SvgPencil:hr,SvgPerson:ad,SvgProduct:ld,SvgRecipe:cd,SvgService:hd,SvgSoftwareApplication:ud,SvgTerminal:dd,SvgTrash:lx,SvgVideo:pd,SvgWebPage:px},data(){return{graphs:[{slug:"article",graphName:"Article",label:this.$t.__("Article",this.$td)},{slug:"book",graphName:"Book",label:this.$t.__("Book",this.$td)},{slug:"course",graphName:"Course",label:this.$t.__("Course",this.$td)},{slug:"dataset",graphName:"Dataset",label:this.$t.__("Dataset",this.$td)},{slug:"event",graphName:"Event",label:this.$t.__("Event",this.$td)},{slug:"faq-page",graphName:"FAQPage",label:this.$t.__("FAQ",this.$td)},{slug:"fact-check",graphName:"FactCheck",label:this.$t.__("Fact Check",this.$td)},{slug:"how-to",graphName:"HowTo",label:this.$t.__("How To",this.$td)},{slug:"job-posting",graphName:"JobPosting",label:this.$t.__("Job Posting",this.$td)},{slug:"movie",graphName:"Movie",label:this.$t.__("Movie",this.$td)},{slug:"music",graphName:"Music",label:this.$t.__("Music",this.$td)},{slug:"person",graphName:"Person",label:this.$t.__("Person",this.$td)},{slug:"product",graphName:"Product",label:this.$t.__("Product",this.$td)},{slug:"recipe",graphName:"Recipe",label:this.$t.__("Recipe",this.$td)},{slug:"service",graphName:"Service",label:this.$t.__("Service",this.$td)},{slug:"software-application",graphName:"SoftwareApplication",label:this.$t.__("Software",this.$td)},{slug:"video",graphName:"Video",label:this.$t.__("Video",this.$td)},{slug:"web-page",graphName:"WebPage",label:this.$t.__("Web Page",this.$td)}],childGraphs:{Article:[{childGraphName:"BlogPosting",label:this.$t.__("Blog Post",this.$td)},{childGraphName:"NewsArticle",label:this.$t.__("News Article",this.$td)}],Music:[{childGraphName:"MusicAlbum",label:this.$t.__("Music Album",this.$td)},{childGraphName:"MusicGroup",label:this.$t.__("Music Group",this.$td)}],WebPage:[{childGraphName:"WebPage",label:this.$t.__("Web Page",this.$td)},{childGraphName:"AboutPage",label:this.$t.__("About Page",this.$td)},{childGraphName:"CheckoutPage",label:this.$t.__("Checkout Page",this.$td)},{childGraphName:"CollectionPage",label:this.$t.__("Collection Page",this.$td)},{childGraphName:"ContactPage",label:this.$t.__("Contact Page",this.$td)},{childGraphName:"ItemPage",label:this.$t.__("Item Page",this.$td)},{childGraphName:"MedicalPage",label:this.$t.__("Medical Page",this.$td)},{childGraphName:"ProfilePage",label:this.$t.__("Profile Page",this.$td)},{childGraphName:"RealEstateListing",label:this.$t.__("Real Estate Listing",this.$td)},{childGraphName:"SearchResultsPage",label:this.$t.__("Search Results Page",this.$td)}]}}},methods:{getParentGraphName(i){let t="";return Object.entries(this.childGraphs).forEach(e=>{const s=e[0];e[1].forEach(r=>{t||i===r.childGraphName&&(t=s)})}),t||i}}};const fx={components:{ConfirmationModal:oo,CoreAlert:Pt,CoreCodeEditor:zu,CoreTooltip:oe},mixins:[Qe],data(){return{error:"",errorBuffer:"",action:"",confirmationModalOpen:!1,modalKey:0,strings:{schemaJson:this.$t.__("Schema (JSON-LD Format)",this.$tdPro),tooltipDescription:this.$t.sprintf(this.$t.__("Our custom schema only works with the JSON-LD format. This gives a detailed description of what your page is all about. Search engines can then use this data to understand your site better and provide more relevant search results and rich snippets. %1$s",this.$tdPro),this.$links.getDocLink(this.$constants.GLOBAL_STRINGS.learnMore,"schemaJsonLd",!0)),placeholder:this.$t.__("Enter a name for your custom schema graph...",this.$tdPro),editorPlaceholder:this.$t.__("Enter your JSON schema here...",this.$tdPro),addSchema:this.$t.__("Add Schema",this.$tdPro),updateSchema:this.$t.__("Update Schema",this.$tdPro),deleteSchema:this.$t.__("Delete Schema",this.$tdPro),saveAsTemplate:this.$t.__("Save as Template",this.$tdPro),deleteTemplate:this.$t.__("Delete Template",this.$tdPro),updateTemplate:this.$t.__("Update Template",this.$tdPro),errors:{invalidJson:this.$t.__("The text you've entered is not valid JSON. Please enter valid JSON schema.",this.$tdPro)},modal:{graphDelete:{areYouSure:this.$t.__("Are you sure you want to delete this custom schema?",this.$tdPro),actionCannotBeUndone:this.$t.__("This action cannot be undone.",this.$tdPro),confirmation:this.$t.__("Yes, I want to delete this custom schema",this.$tdPro),noChangedMind:this.$t.__("No, I changed my mind",this.$tdPro)},templateDelete:{areYouSure:this.$t.__("Are you sure you want to delete this template?",this.$tdPro),actionCannotBeUndone:this.$t.__("This action cannot be undone.",this.$tdPro),confirmation:this.$t.__("Yes, I want to delete this template",this.$tdPro),noChangedMind:this.$t.__("No, I changed my mind",this.$tdPro)}}}}},computed:{...M(["currentPost","schema"]),graphName:{get(){return this.schema.isEditingCustomGraph||this.schema.isEditingCustomTemplate?this.schema.graph.graphName:this.schema.custom.graphName},set(i){if(this.schema.isEditingCustomGraph||this.schema.isEditingCustomTemplate){this.schema.graph.graphName=i;return}this.schema.custom.graphName=i}},customSchema:{get(){return this.schema.isEditingCustomGraph||this.schema.isEditingCustomTemplate?this.schema.graph.schema:this.schema.custom.schema},set(i){if(this.schema.isEditingCustomGraph||this.schema.isEditingCustomTemplate){this.schema.graph.schema=i;return}this.schema.custom.schema=i}},modalStrings(){switch(this.action){case"deleteCustomGraph":return this.strings.modal.graphDelete;case"deleteTemplate":return this.strings.modal.templateDelete;default:return{}}},isDisabled(){return(!this.customSchema||!this.graphName||this.error.length)!==0}},methods:{..._t(["addCustomAsGraph","addCustomAsTemplate","addCustomTemplateAsGraph","addGraphAsTemplate","deleteCustomGraph","deleteTemplate","updateCustomGraph","updateTemplate"]),validateAndFormatJson(){if(this.error="",this.errorBuffer="",!this.customSchema)return;let i=null;try{const t=new RegExp("(<[^>]+>|</[^>]+>)","igm");this.customSchema=this.customSchema.replace(t,""),i=JSON.parse(this.customSchema)}catch{this.errorBuffer=this.strings.errors.invalidJson;return}i["@context"]&&delete i["@context"],i["@type"]&&!this.schema.custom.graphName&&(this.schema.custom.graphName=i["@type"]),this.customSchema=JSON.stringify(i,null,"	").trim(),this.$refs.customSchemaEditor._data.editorInstance.viewState.state.doc.toString()!==this.customSchema&&this.$refs.customSchemaEditor._data.editorInstance.dispatch({changes:{from:0,to:this.$refs.customSchemaEditor._data.editorInstance.viewState.state.doc.length,insert:this.customSchema}})},handlePaste(){this.$nextTick(()=>{const i=this.$refs.customSchemaEditor._data.editorInstance.viewState.state.doc.toString();this.customSchema=i,this.validateAndFormatJson()})},handleBlur(i){this.customSchema=i.editorView.viewState.state.doc.toString(),this.validateAndFormatJson(),this.error=this.errorBuffer},maybeDoAction(i){this.action=i,this.confirmationModalOpen=!0},doAction(){switch(this.confirmationModalOpen=!1,this.modalKey++,this.action){case"deleteCustomGraph":this.deleteCustomGraph();break;case"deleteTemplate":this.deleteTemplate();break}this.action=""}}};var mx=function(){var t=this,e=t._self._c;return e("div",{staticClass:"custom-schema"},[e("div",{staticClass:"main"},[e("div",{staticClass:"header"},[e("span",[t._v(t._s(t.strings.schemaJson))]),e("core-tooltip",{scopedSlots:t._u([{key:"tooltip",fn:function(){return[e("span",{domProps:{innerHTML:t._s(t.strings.tooltipDescription)}})]},proxy:!0}])},[e("svg-circle-question-mark")],1)],1),e("base-input",{staticClass:"template-name",attrs:{size:"medium",prependIcon:"custom-schema",placeholder:t.strings.placeholder},model:{value:t.graphName,callback:function(s){t.graphName=s},expression:"graphName"}}),e("div",{staticClass:"custom-schema-editor-container"},[t.error?e("core-alert",{attrs:{type:"red"}},[t._v(" "+t._s(t.error)+" ")]):t._e(),e("core-code-editor",{ref:"customSchemaEditor",attrs:{editorId:"custom-schema-editor",placeholder:t.strings.editorPlaceholder,value:t.customSchema},on:{input:s=>t.customSchema=s,paste:t.handlePaste,blur:t.handleBlur}})],1),!t.schema.isEditingCustomGraph&&!t.schema.isEditingCustomTemplate?e("div",{staticClass:"buttons add-custom-schema"},[e("div",{staticClass:"left"}),e("div",{staticClass:"right"},[e("base-button",{staticClass:"medium",attrs:{type:"gray",disabled:t.isDisabled},on:{click:function(s){return t.addCustomAsTemplate()}}},[t._v(" "+t._s(t.strings.saveAsTemplate)+" ")]),e("base-button",{staticClass:"medium",attrs:{type:"blue",disabled:t.isDisabled},on:{click:function(s){return t.addCustomAsGraph()}}},[t._v(" "+t._s(t.strings.addSchema)+" ")])],1)]):t._e(),t.schema.isEditingCustomGraph?e("div",{staticClass:"buttons edit-custom-schema"},[e("div",{staticClass:"left"},[e("base-button",{staticClass:"medium",attrs:{type:"red"},on:{click:function(s){return t.maybeDoAction("deleteCustomGraph")}}},[t._v(" "+t._s(t.strings.deleteSchema)+" ")])],1),e("div",{staticClass:"right"},[e("base-button",{staticClass:"medium",attrs:{type:"gray",disabled:t.isDisabled},on:{click:function(s){return t.addGraphAsTemplate()}}},[t._v(" "+t._s(t.strings.saveAsTemplate)+" ")]),e("base-button",{staticClass:"medium",attrs:{type:"blue",disabled:t.isDisabled},on:{click:function(s){return t.updateCustomGraph()}}},[t._v(" "+t._s(t.strings.updateSchema)+" ")])],1)]):t._e(),t.schema.isEditingCustomTemplate?e("div",{staticClass:"buttons edit-custom-template"},[e("div",{staticClass:"left"},[e("base-button",{staticClass:"medium",attrs:{type:"red"},on:{click:function(s){return t.maybeDoAction("deleteTemplate")}}},[t._v(" "+t._s(t.strings.deleteTemplate)+" ")])],1),e("div",{staticClass:"right"},[e("base-button",{staticClass:"medium",attrs:{type:"gray",disabled:t.isDisabled},on:{click:function(s){return t.updateTemplate()}}},[t._v(" "+t._s(t.strings.updateTemplate)+" ")]),e("base-button",{staticClass:"medium",attrs:{type:"blue",disabled:t.isDisabled},on:{click:function(s){return t.addCustomTemplateAsGraph()}}},[t._v(" "+t._s(t.strings.addSchema)+" ")])],1)]):t._e()],1),t.confirmationModalOpen?e("confirmation-modal",{key:"confirmationModal"+this.modalKey,attrs:{strings:t.modalStrings},on:{doAction:t.doAction,closeModal:function(s){t.confirmationModalOpen=!1}}}):t._e()],1)},gx=[],_x=$(fx,mx,gx,!1,null,null,null,null);const yx=_x.exports;const vx={mixins:[Qe],props:{graph:Object,customGraph:Boolean,defaultGraph:String},computed:{graphLabel(){if(this.customGraph)return this.$t.__("Custom Schema",this.$td)+" - "+this.graph.graphName;if(this.defaultGraph)return this.formatDefaultGraphName(this.defaultGraph);if(this.graph.label)return this.graph.label;const i=this.graph.slug.toLowerCase();return this.graphs.find(t=>t.slug===i).label},graphIcon(){if(this.customGraph)return"svg-custom-schema";if(this.defaultGraph){const i=this.getParentGraphSlug(this.defaultGraph);return i?"svg-"+i:"svg-custom-schema"}return"svg-"+this.graph.slug}},methods:{getParentGraphSlug(i){Object.entries(this.childGraphs).forEach(e=>{const s=e[0];e[1].forEach(r=>{i===r.childGraphName&&(i=s)})});let t="";return this.graphs.forEach(e=>{e.graphName===i&&(t=e.slug)}),t},formatDefaultGraphName(i){let t="",e=i;return Object.entries(this.childGraphs).forEach(s=>{const r=s[0];s[1].forEach(n=>{t||i===n.childGraphName&&(t=r,e=n.label,this.graphs.forEach(o=>{o.graphName===r&&(t=o.label)}))})}),t?t+" - "+e+" "+this.$t.__("(Default)",this.$td):i+" "+this.$t.__("(Default)",this.$td)}}};var bx=function(){var t=this,e=t._self._c;return e("div",{staticClass:"graph-container"},[e("div",{staticClass:"graph"},[e("div",{staticClass:"left"},[e(t.graphIcon,{tag:"component"}),e("span",{attrs:{title:t.graphLabel}},[t._v(t._s(t.graphLabel))])],1),e("div",{staticClass:"right action-buttons"},[t._t("buttons")],2)])])},kx=[],$x=$(vx,bx,kx,!1,null,null,null,null);const Pr=$x.exports;const xx={components:{CoreModal:io,SvgClose:qn},props:{strings:{type:Object,required:!0}},computed:{...M(["schema"])},methods:{...E(["setTemplateName"])},mounted(){this.$emit("openModal",!0)}};var Sx=function(){var t=this,e=t._self._c;return e("core-modal",{staticClass:"aioseo-post-schema-naming-modal",attrs:{"no-header":""},on:{close:function(s){return t.$emit("closeModal",!0)}},scopedSlots:t._u([{key:"body",fn:function(){return[e("div",{staticClass:"aioseo-modal-body"},[e("button",{staticClass:"close",on:{click:function(s){return s.stopPropagation(),t.$emit("closeModal",!0)}}},[e("svg-close",{on:{click:function(s){return t.$emit("closeModal",!0)}}})],1),e("h3",[t._v(t._s(t.strings.title))]),e("div",{staticClass:"reset-description",domProps:{innerHTML:t._s(t.strings.description)}}),e("base-input",{attrs:{size:"medium",placeholder:t.strings.placeholder,value:t.schema.templateName},on:{input:t.setTemplateName}}),e("div",{staticClass:"action-buttons"},[e("base-button",{attrs:{type:"gray",size:"medium"},on:{click:function(s){return t.$emit("closeModal",!0)}}},[t._v(" "+t._s(t.strings.noChangedMind)+" ")]),e("base-button",{attrs:{type:"blue",size:"medium",disabled:!t.schema.templateName},on:{click:function(s){return t.$emit("doAction",s)}}},[t._v(" "+t._s(t.strings.continue)+" ")])],1)],1)]},proxy:!0}])})},wx=[],Cx=$(xx,Sx,wx,!1,null,null,null,null);const Px=Cx.exports;const Tx={components:{ConfirmationModal:oo,CoreAlert:Pt,CoreMainTabs:re,CoreModal:io,CoreTooltip:oe,GraphCard:Pr,NamingModal:Px,SvgCircleInformation:Ed,SvgCirclePlus:at},mixins:[Qe,ti],data(){return{searchTerm:"",action:"",actionValue:"",confirmationModalOpen:!1,namingModalOpen:!1,modalKey:0,strings:{searchSchema:this.$t.__("Search Schema",this.$tdPro),searchTemplates:this.$t.__("Search Templates",this.$tdPro),addSchema:this.$t.__("Add Schema",this.$tdPro),saveSchemaAsTemplate:this.$t.__("Save Schema as Template",this.$tdPro),deleteSchema:this.$t.__("Delete Schema",this.$tdPro),updateSchema:this.$t.__("Update Schema",this.$tdPro),backToSchemaCatalog:this.$t.__("Back to Schema Catalog",this.$tdPro),addTemplate:this.$t.__("Add Template",this.$tdPro),editTemplate:this.$t.__("Edit Template",this.$tdPro),deleteTemplate:this.$t.__("Delete Template",this.$tdPro),updateTemplate:this.$t.__("Update Template",this.$tdPro),placeholder:this.$t.__("Enter a name for your schema graph...",this.$tdPro),defaultGraphAlert:this.$t.sprintf(this.$t.__("You are now editing the default schema graph for this post. You can change the default schema type for %1$s in the %2$sSearch Appearance%3$s settings.",this.$tdPro),this.$aioseo.postData.postTypes.find(i=>i.name===this.$aioseo.currentPost.postType).label,`<a href="${this.$aioseo.urls.aio.searchAppearance}#/content-types" target="_blank">`,"</a>"),modal:{isDirtyLeaving:{areYouSure:this.$t.__("Are you sure you want to leave this page?",this.$tdPro),actionCannotBeUndone:this.$t.__("Any changes you've made will be lost. This action cannot be undone.",this.$tdPro),confirmation:this.$t.__("Yes, I want to leave this page",this.$tdPro),noChangedMind:this.$t.__("No, I changed my mind",this.$tdPro)},isDirtySwitching:{areYouSure:this.$t.__("Are you sure you want to switch to a different schema?",this.$tdPro),actionCannotBeUndone:this.$t.__("Any changes you've made will be lost. This action cannot be undone.",this.$tdPro),confirmation:this.$t.__("Yes, I want to switch",this.$tdPro),noChangedMind:this.$t.__("No, I changed my mind",this.$tdPro)},graphDelete:{areYouSure:this.$t.__("Are you sure you want to delete this schema?",this.$tdPro),actionCannotBeUndone:this.$t.__("This action cannot be undone.",this.$tdPro),confirmation:this.$t.__("Yes, I want to delete this schema",this.$tdPro),noChangedMind:this.$t.__("No, I changed my mind",this.$tdPro)},namingTemplateNew:{title:this.$t.__("Enter a name for this template",this.$tdPro),description:this.$t.__("Before you can save this template, you must first enter a name so that you can easily identify it later.",this.$tdPro),continue:this.$t.__("Save Template",this.$tdPro),noChangedMind:this.$t.__("No, I changed my mind",this.$tdPro),placeholder:this.$t.__("Type to enter a name for your template...",this.$tdPro)},templateDelete:{areYouSure:this.$t.__("Are you sure you want to delete this template?",this.$tdPro),actionCannotBeUndone:this.$t.__("This action cannot be undone.",this.$tdPro),confirmation:this.$t.__("Yes, I want to delete this template",this.$tdPro),noChangedMind:this.$t.__("No, I changed my mind",this.$tdPro)}}}}},computed:{...M(["currentPost","internalOptions","schema"]),tabs(){const i=[];return this.schema.isEditingTemplate||i.push({slug:"schema-catalog",name:this.$t.__("Schema Catalog",this.$tdPro)}),this.internalOptions.internal.schema.templates.length&&!this.schema.graph&&i.push({slug:"your-templates",name:this.$t.__("Your Templates",this.$tdPro)}),i.length===1&&this.setTabTemplates("schema-catalog"),i},filteredGraphs(){let i=[];this.searchTerm||(i=this.graphs);const t=new RegExp(this.searchTerm,"i");return i=this.graphs.filter(e=>e.graphName.match(t)||e.label.match(t)),i.sort((e,s)=>e.graphName<s.graphName?-1:1)},filteredTemplates(){let i=[];this.searchTerm||(i=this.internalOptions.internal.schema.templates);const t=new RegExp(this.searchTerm,"i");return i=this.internalOptions.internal.schema.templates.filter(e=>e.graphName.match(t)),i},graphComponent(){let i="";return this.schema.isEditingDefaultGraph&&(i=this.getParentGraphName(this.currentPost.schema.default.graphName)),this.schema.graph.graphName==="article"&&(i="Article"),i||this.schema.graph.graphName},graphOptions(){return this.graphs.map(i=>(i.value=i.slug,i))},searchPlaceholder(){return this.activeTab==="schema-catalog"?this.strings.searchSchema:this.strings.searchTemplates},confirmationModalStrings(){switch(this.action){case"backToSchemaCatalog":return this.strings.modal.isDirtyLeaving;case"deleteDefaultGraph":case"deleteGraph":return this.strings.modal.graphDelete;case"deleteTemplate":return this.strings.modal.templateDelete;case"setGraphName":return this.strings.modal.isDirtySwitching;default:return{}}},namingModalStrings(){switch(this.action){case"addGraphAsTemplate":return this.strings.modal.namingTemplateNew;case"updateTemplate":return this.strings.modal.namingTemplateUpdate;default:return{}}}},methods:{..._t(["addGraph","addGraphAsTemplate","addTemplateAsGraph","deleteDefaultGraph","deleteTemplate","addDefaultGraph","updateDefaultGraph","updateGraph","updateTemplate"]),...E(["deleteGraph","editTemplate","setGraph","setTabTemplates"]),closeModal(i){this[i]=!1,this.$emit("sub-modal-toggle",!1)},openNewGraph(i){const t=this.graphs.find(e=>e.graphName===i);this.setGraph(t),this.$emit("open-new-graph")},getGraphName(i){return!i&&this.schema.isEditingDefaultGraph?this.currentPost.schema.default.graphName:this.graphOptions.find(t=>t.graphName===i.graphName)},setGraphName(i){this.setGraph(this.graphOptions.find(t=>t.value===i))},processTabChange(i){this.setTabTemplates(i),this.searchTerm=""},maybeDoActionConfirmation(i,t){if(this.action=i,this.actionValue=t,(i==="backToSchemaCatalog"||i==="setGraphName")&&!this.schema.isDirty){this.doAction();return}this.confirmationModalOpen=!0},maybeDoActionNaming(i){this.action=i,this.namingModalOpen=!0},doAction(){switch(this.action){case"backToSchemaCatalog":this.setGraph(null);break;case"deleteDefaultGraph":this.deleteDefaultGraph();break;case"deleteGraph":this.deleteGraph();break;case"deleteTemplate":this.deleteTemplate();break;case"addGraphAsTemplate":this.addGraphAsTemplate();break;case"setGraphName":this.setGraphName(this.actionValue);break;case"updateTemplate":this.updateTemplate();break}this.$emit("open-new-graph"),this.action="",this.actionValue="",this.confirmationModalOpen=!1,this.namingModalOpen=!1,this.modalKey++,this.$emit("sub-modal-toggle",!1)}}};var Ax=function(){var t=this,e=t._self._c;return e("div",{staticClass:"schema-templates"},[t.isEditing?t._e():e("core-main-tabs",{attrs:{tabs:t.tabs,active:t.schema.tabs.templates,showSaveButton:!1},on:{changed:s=>t.processTabChange(s)},scopedSlots:t._u([{key:"md-tab-icon",fn:function({tab:s}){return[e(s.icon,{tag:"component"})]}}],null,!1,2353149503)}),e("div",{staticClass:"main"},[t.schema.graph?t._e():e("base-input",{staticClass:"search",attrs:{size:"medium",prependIcon:"search",placeholder:t.searchPlaceholder},model:{value:t.searchTerm,callback:function(s){t.searchTerm=s},expression:"searchTerm"}}),t.schema.tabs.templates==="schema-catalog"?e("div",{staticClass:"schema-catalog"},[t.schema.graph?t._e():e("div",{staticClass:"graphs"},[t.currentPost.schema.default.isEnabled?t._e():e("graph-card",{attrs:{defaultGraph:t.currentPost.schema.default.graphName},scopedSlots:t._u([{key:"buttons",fn:function(){return[e("core-tooltip",{attrs:{type:"action"},scopedSlots:t._u([{key:"tooltip",fn:function(){return[t._v(" "+t._s(t.strings.addSchema)+" ")]},proxy:!0}],null,!1,525113981)},[e("base-button",{staticClass:"small",attrs:{type:"gray"},nativeOn:{click:function(s){return s.preventDefault(),t.addDefaultGraph.apply(null,arguments)}}},[e("svg-circle-plus")],1)],1)]},proxy:!0}],null,!1,3756287223)}),t._l(t.filteredGraphs,function(s,r){return e("graph-card",{key:s.graphName+r,attrs:{graph:s},scopedSlots:t._u([{key:"buttons",fn:function(){return[e("core-tooltip",{attrs:{type:"action"},scopedSlots:t._u([{key:"tooltip",fn:function(){return[t._v(" "+t._s(t.strings.addSchema)+" ")]},proxy:!0}],null,!0)},[e("base-button",{staticClass:"small",attrs:{type:"gray"},nativeOn:{click:function(n){return n.preventDefault(),t.openNewGraph(s.graphName)}}},[e("svg-circle-plus")],1)],1)]},proxy:!0}],null,!0)})})],2)]):t._e(),t.schema.tabs.templates==="your-templates"?e("div",{staticClass:"your-templates"},[t.schema.graph?t._e():e("div",{staticClass:"graphs"},t._l(t.filteredTemplates,function(s,r){return e("graph-card",{key:s.id,attrs:{graph:s,customGraph:s.custom},scopedSlots:t._u([{key:"buttons",fn:function(){return[e("core-tooltip",{attrs:{type:"action"},scopedSlots:t._u([{key:"tooltip",fn:function(){return[t._v(" "+t._s(t.strings.editTemplate)+" ")]},proxy:!0}],null,!0)},[e("base-button",{staticClass:"small",attrs:{type:"gray"},on:{click:function(n){return t.editTemplate(r)}}},[e("svg-pencil")],1)],1),e("core-tooltip",{attrs:{type:"action"},scopedSlots:t._u([{key:"tooltip",fn:function(){return[t._v(" "+t._s(t.strings.addTemplate)+" ")]},proxy:!0}],null,!0)},[e("base-button",{staticClass:"small",attrs:{type:"gray"},on:{click:function(n){return t.addTemplateAsGraph(r)}}},[e("svg-circle-plus")],1)],1)]},proxy:!0}],null,!0)})}),1)]):t._e(),t.schema.graph||t.schema.isEditingDefaultGraph?e("div",{staticClass:"graph-editor"},[e("div",{staticClass:"graph-editor-fields-container",class:[{blurred:!t.hasFeature}]},[t.schema.isEditingDefaultGraph?e("core-alert",{staticClass:"default-graph-alert",attrs:{type:"blue"},domProps:{innerHTML:t._s(t.strings.defaultGraphAlert)}}):t._e(),t.isEditing?t._e():e("base-select",{staticClass:"graph-selector",attrs:{size:"medium",options:t.graphOptions,value:t.getGraphName(t.schema.graph)},on:{input:s=>t.maybeDoActionConfirmation("setGraphName",s.value)},scopedSlots:t._u([{key:"singleLabel",fn:function({option:s}){return[e("svg-"+s.slug,{tag:"component"}),e("span",{staticClass:"option-label"},[t._v(t._s(s.label))])]}},{key:"option",fn:function({option:s}){return[e("svg-"+s.slug,{tag:"component"}),e("span",{staticClass:"option-label"},[t._v(t._s(s.label))])]}}],null,!1,3140157494)}),t.schema.isEditingTemplate?e("base-input",{staticClass:"template-name",attrs:{size:"medium",prependIcon:t.schema.graph.slug,placeholder:t.strings.placeholder},model:{value:t.schema.templateName,callback:function(s){t.$set(t.schema,"templateName",s)},expression:"schema.templateName"}}):t._e(),e(t.graphComponent,{tag:"component"})],1),t.isEditing?t._e():e("div",{staticClass:"buttons new-graph"},[e("div",{staticClass:"left"},[e("base-button",{staticClass:"medium",attrs:{type:"gray"},on:{click:function(s){return t.maybeDoActionConfirmation("backToSchemaCatalog")}}},[t._v(" "+t._s(t.strings.backToSchemaCatalog)+" ")])],1),t.hasFeature?e("div",{staticClass:"right"},[e("base-button",{staticClass:"medium",attrs:{type:"gray"},on:{click:function(s){return t.maybeDoActionNaming("addGraphAsTemplate")}}},[t._v(" "+t._s(t.strings.saveSchemaAsTemplate)+" ")]),e("base-button",{staticClass:"medium",attrs:{type:"blue"},on:{click:function(s){return t.addGraph()}}},[t._v(" "+t._s(t.strings.addSchema)+" ")])],1):t._e()]),t.schema.isEditingDefaultGraph?e("div",{staticClass:"buttons edit-graph"},[e("div",{staticClass:"left"},[e("base-button",{staticClass:"medium",attrs:{type:"red"},on:{click:function(s){return t.maybeDoActionConfirmation("deleteDefaultGraph")}}},[t._v(" "+t._s(t.strings.deleteSchema)+" ")])],1),t.hasFeature?e("div",{staticClass:"right"},[e("base-button",{staticClass:"medium",attrs:{type:"blue"},on:{click:function(s){return t.updateDefaultGraph()}}},[t._v(" "+t._s(t.strings.updateSchema)+" ")])],1):t._e()]):t._e(),t.schema.isEditingGraph?e("div",{staticClass:"buttons edit-graph"},[e("div",{staticClass:"left"},[e("base-button",{staticClass:"medium",attrs:{type:"red"},on:{click:function(s){return t.maybeDoActionConfirmation("deleteGraph")}}},[t._v(" "+t._s(t.strings.deleteSchema)+" ")])],1),t.hasFeature?e("div",{staticClass:"right"},[e("base-button",{staticClass:"medium",attrs:{type:"gray"},on:{click:function(s){return t.maybeDoActionNaming("addGraphAsTemplate")}}},[t._v(" "+t._s(t.strings.saveSchemaAsTemplate)+" ")]),e("base-button",{staticClass:"medium",attrs:{type:"blue"},on:{click:function(s){return t.updateGraph()}}},[t._v(" "+t._s(t.strings.updateSchema)+" ")])],1):t._e()]):t._e(),t.schema.isEditingTemplate?e("div",{staticClass:"buttons edit-template"},[e("div",{staticClass:"left"},[e("base-button",{staticClass:"medium",attrs:{type:"red"},on:{click:function(s){return t.maybeDoActionConfirmation("deleteTemplate")}}},[t._v(" "+t._s(t.strings.deleteTemplate)+" ")])],1),t.hasFeature?e("div",{staticClass:"right"},[e("base-button",{staticClass:"medium",attrs:{type:"gray"},on:{click:function(s){return t.updateTemplate()}}},[t._v(" "+t._s(t.strings.updateTemplate)+" ")]),e("base-button",{staticClass:"medium",attrs:{type:"blue"},on:{click:function(s){return t.addGraph()}}},[t._v(" "+t._s(t.strings.addSchema)+" ")])],1):t._e()]):t._e()]):t._e()],1),t.namingModalOpen?e("naming-modal",{key:"namingModal"+t.modalKey,attrs:{strings:t.namingModalStrings},on:{doAction:t.doAction,openModal:function(s){return t.$emit("sub-modal-toggle",!0)},closeModal:function(s){return t.closeModal("namingModalOpen")}}}):t._e(),t.confirmationModalOpen?e("confirmation-modal",{key:"confirmationModal"+t.modalKey,attrs:{strings:t.confirmationModalStrings},on:{doAction:t.doAction,openModal:function(s){return t.$emit("sub-modal-toggle",!0)},closeModal:function(s){return t.closeModal("confirmationModalOpen")}}}):t._e()],1)},Dx=[],Mx=$(Tx,Ax,Dx,!1,null,null,null,null);const Ox=Mx.exports;const Ix={components:{CoreAlert:Pt,CoreCodeEditor:zu,CoreTooltip:oe},mixins:[Qe],data(){return{error:"",justCopied:!1,isPostSaved:!1,strings:{schemaJson:this.$t.__("Schema (JSON-LD Format)",this.$tdPro),tooltipDescription:this.$t.sprintf(this.$t.__("Our custom schema only works with the JSON-LD format. This gives a detailed description of what your page is all about. Search engines can then use this data to understand your site better and provide more relevant search results and rich snippets. %1$s",this.$tdPro),this.$links.getDocLink(this.$constants.GLOBAL_STRINGS.learnMore,"schemaJsonLd",!0)),copy:this.$t.__("Copy",this.$tdPro),copied:this.$t.__("Copied!",this.$tdPro),testWithGoogle:this.$t.__("Test with Google",this.$tdPro),postSavedWarning:this.$t.__("Before the schema can be generated correctly, the post must first be saved as a draft or published.",this.$tdPro),wooCommerceShippingDetailsWarning:this.$t.__("You've added an autogenerated WooCommerce Product graph. Due to technical limitations, we are not able to generate the shipping details schema in the admin panel. To view this data, please inspect the source code of the page on the frontend.",this.$tdPro)}}},computed:{...M(["currentPost","schema"]),copy(){return this.justCopied?this.strings.copied:this.strings.copy},hasWooCommerceProductGraph(){return!this.$aioseo.data.isWooCommerceActive||this.$aioseo.currentPost.postType!=="product"?!1:!!(this.currentPost.schema.graphs.find(i=>i.graphName==="Product"&&i.properties.autogenerate)||this.currentPost.schema.default.graphName==="Product"&&(!this.currentPost.schema.default.data.Product.length||this.currentPost.schema.default.data.Product.autogenerate))}},methods:{..._t(["updateSchemaOutput"]),copySchema(){navigator.clipboard.writeText(this.schema.output),this.justCopied=!0,setTimeout(()=>{this.justCopied=!1},2e3)},testWithGoogle(){document.getElementById("form-test-with-google").submit()}},beforeMount(){const i=Bd();this.isPostSaved=i&&i!=="auto-draft"},mounted(){this.isPostSaved&&this.updateSchemaOutput()}};var Rx=function(){var t=this,e=t._self._c;return e("div",{staticClass:"schema-validation"},[e("div",{staticClass:"main"},[e("div",{staticClass:"header"},[e("div",{staticClass:"title"},[e("span",[t._v(t._s(t.strings.schemaJson))]),e("core-tooltip",{scopedSlots:t._u([{key:"tooltip",fn:function(){return[e("span",{domProps:{innerHTML:t._s(t.strings.tooltipDescription)}})]},proxy:!0}])},[e("svg-circle-question-mark")],1)],1),e("div",{staticClass:"action-buttons"},[e("div",[e("base-button",{staticClass:"small",attrs:{type:"gray"},on:{click:function(s){return t.copySchema()}}},[e("svg-copy"),e("span",[t._v(t._s(t.copy))])],1)],1),e("div",[e("form",{attrs:{id:"form-test-with-google",method:"post",action:"https://search.google.com/test/rich-results",target:"_blank"}},[e("textarea",{attrs:{name:"code_snippet",hidden:""},domProps:{value:t.schema.output}}),e("base-button",{staticClass:"small",attrs:{type:"blue"},on:{click:function(s){return t.testWithGoogle()}}},[e("svg-google-small"),e("span",[t._v(t._s(t.strings.testWithGoogle))])],1)],1)])])]),e("div",{staticClass:"schema-output"},[t.isPostSaved?t._e():e("core-alert",{staticClass:"post-status-alert",attrs:{type:"yellow"}},[e("div",[t._v(" "+t._s(t.strings.postSavedWarning)+" ")])]),t.isPostSaved&&t.hasWooCommerceProductGraph?e("core-alert",{staticClass:"post-status-alert",attrs:{type:"blue"}},[e("div",[t._v(" "+t._s(t.strings.wooCommerceShippingDetailsWarning)+" ")])]):t._e(),e("core-code-editor",{ref:"schemaValidator",attrs:{editorId:"schema-validator",value:t.schema.output,readonly:""}})],1)])])},Lx=[],Ex=$(Ix,Rx,Lx,!1,null,null,null,null);const Nx=Ex.exports;const Bx={mixins:[Qe,ti],components:{CoreMainTabs:re,CoreModalPortal:ne,CoreTooltip:oe,Custom:yx,Templates:Ox,Validation:Nx},props:{allowModalClose:Boolean},data(){return{strings:{schemaGenerator:this.$t.__("Schema Generator",this.$td),headerTooltip:this.$t.sprintf(this.$t.__("Use our powerful Schema Generator to configure Schema Markup for your content. Search Engines use structured data to better understand what your site is about as well as to display rich snippets in search results. %1$s",this.$td),this.$links.getDocLink(this.$constants.GLOBAL_STRINGS.learnMore,"schema",!0))},tabs:[{slug:"schema-templates",icon:"svg-file",name:this.$t.__("Schema Templates",this.$td),component:"templates"},{slug:"custom-schema",icon:"svg-file-edit",name:this.$t.__("Custom Schema",this.$td),component:"custom"},{slug:"schema-validation",icon:"svg-terminal",name:this.$t.__("Schema Validation",this.$td),component:"validation"}]}},watch:{"schema.graph":{deep:!0,handler(i){if(i===null){this.setIsDirty(!1);return}this.setIsDirty(!0)}}},computed:{...M(["currentPost","schema"]),activeTabObject(){return this.tabs.find(i=>i.slug===this.schema.tabs.generator)},headerTitle(){if(this.isEditing){let i="";return this.schema.isEditingDefaultGraph?i=this.currentPost.schema.default.graphName:this.schema.isEditingCustomGraph||this.schema.isEditingCustomTemplate?i=this.$t.__("Custom Schema",this.$td):i=this.schema.graph.label,this.$t.sprintf(this.$t.__("Edit %1$s",this.$tdPro),i)}return this.strings.schemaGenerator}},methods:{...E(["setIsDirty","setTabGenerator"]),processSetTabGenerator(i){this.setTabGenerator(i),this.scrollToTheTop()},openNewGraph(){this.scrollToTheTop()},async scrollToTheTop(){await this.$nextTick();const i=document.querySelector("#aioseo-schema-generator-main .graph-editor-fields-container");i&&(i.scrollTop=0)}},mounted(){this.scrollToTheTop()}};var zx=function(){var t=this,e=t._self._c;return e("core-modal-portal",{attrs:{classes:["aioseo-post-schema-modal"],confirmation:!t.allowModalClose},on:{close:function(s){return t.$emit("close")}},scopedSlots:t._u([{key:"headerTitle",fn:function(){return[e("div",{staticClass:"title"},[t._v(t._s(t.headerTitle))]),t.isEditing?t._e():e("core-tooltip",{attrs:{flip:""},scopedSlots:t._u([{key:"tooltip",fn:function(){return[e("span",{domProps:{innerHTML:t._s(t.strings.headerTooltip)}})]},proxy:!0}],null,!1,1557037113)},[e("svg-circle-question-mark")],1)]},proxy:!0},{key:"body",fn:function(){return[t.isEditing?t._e():e("core-main-tabs",{attrs:{tabs:t.tabs,active:t.schema.tabs.generator,showSaveButton:!1},on:{changed:t.processSetTabGenerator},scopedSlots:t._u([{key:"md-tab-icon",fn:function({tab:s}){return[e(s.icon,{tag:"component"})]}}],null,!1,2353149503)}),e(t.activeTabObject.component,{tag:"component",attrs:{id:"aioseo-schema-generator-main"},on:{"open-new-graph":t.openNewGraph,"sub-modal-toggle":s=>t.$emit("sub-modal-toggle",s)}})]},proxy:!0}])})},Gx=[],Fx=$(Bx,zx,Gx,!1,null,null,null,null);const Hx=Fx.exports;const Vx={mixins:[Qe],components:{ConfirmationModal:oo,CoreAlert:Pt,CoreSettingsRow:G,CoreTooltip:oe,SchemaGenerator:Hx,GraphCard:Pr},props:{parentComponentContext:String},data(){return{subModalOpen:!1,action:"",actionValue:null,confirmationModalOpen:!1,strings:{sidebarDescription:this.$t.__("Configure Schema Markup for your content. Search engines use structured data to display rich results in SERPs.",this.$td),noGraphs:this.$t.__("You have not added any schema yet. You can add any schema graphs you like via the Schema Generator below.",this.$td),schemaInUse:this.$t.__("Schema In Use",this.$tdPro),generateSchema:this.$t.__("Generate Schema",this.$td),validateSchema:this.$t.__("Validate Schema",this.$td),editSchema:this.$t.__("Edit Schema",this.$tdPro),deleteSchema:this.$t.__("Delete Schema",this.$tdPro),modal:{isDirtyClosing:{areYouSure:this.$t.__("Are you sure you want to close the Schema Generator?",this.$tdPro),actionCannotBeUndone:this.$t.__("Any changes you've made will be lost. This action cannot be undone.",this.$tdPro),confirmation:this.$t.__("Yes, I want to close the Schema Generator",this.$tdPro),noChangedMind:this.$t.__("No, I changed my mind",this.$tdPro)},graphDelete:{areYouSure:this.$t.__("Are you sure you want to delete this schema?",this.$tdPro),actionCannotBeUndone:this.$t.__("This action cannot be undone.",this.$tdPro),confirmation:this.$t.__("Yes, I want to delete this schema",this.$tdPro),noChangedMind:this.$t.__("No, I changed my mind",this.$tdPro)}}}}},computed:{...M(["currentPost","schema"]),isSidebar(){return this.$root._data.screenContext==="sidebar"},filteredGraphs(){let i=this.currentPost.schema.graphs;return i=JSON.parse(JSON.stringify(i)),i=i.reverse().map(t=>{var n;let e=!1,s=!1,r=0;if(i.forEach(o=>{if(o.id===t.id){e=!0;return}o.graphName===t.graphName&&(s=!0,e&&r++)}),(n=t==null?void 0:t.properties)!=null&&n.type&&t.properties.type!==t.graphName){const o=this.getChildGraphLabel(t.graphName,t.properties.type);o&&(t.label=t.label+" - "+o)}return(0<r||s)&&(t.label=t.label+" - "+(r+1)),t}),i.reverse()},modalStrings(){switch(this.action){case"setModalOpen":return this.strings.modal.isDirtyClosing;default:return this.strings.modal.graphDelete}}},methods:{..._t(["deleteCustomGraph","deleteDefaultGraph","deleteGraph","updateSchemaOutput"]),...E(["editCustomGraph","editDefaultGraph","editGraph","parseAndUpdateTemplates","resetSessionState","setModalOpen"]),getChildGraphLabel(i,t){return this.childGraphs[i]?this.childGraphs[i].find(e=>e.childGraphName===t).label:""},maybeDoAction(i,t){if(this.action=i,this.actionValue=t,this.action==="setModalOpen"&&!this.schema.isDirty){this.doAction();return}this.confirmationModalOpen=!0},doAction(){switch(this.action){case"deleteDefaultGraph":this.deleteDefaultGraph();break;case"deleteCustomGraph":this.deleteCustomGraph(this.actionValue);break;case"deleteGraph":this.deleteGraph(this.actionValue);break;case"setModalOpen":this.setModalOpen(this.actionValue);break}this.action="",this.actionValue="",this.confirmationModalOpen=!1}},created(){this.parseAndUpdateTemplates(this.$aioseo.internalOptions.internal.schema.templates)},mounted(){this.updateSchemaOutput()}};var Ux=function(){var t=this,e=t._self._c;return e("div",{staticClass:"aioseo-tab-content aioseo-post-schema",class:[{sidebar:t.isSidebar}]},[e("core-settings-row",{attrs:{id:"aioseo-post-schema",name:t.strings.schemaInUse},scopedSlots:t._u([{key:"content",fn:function(){return[e("div",{key:t.schema.graphCardsKey,staticClass:"graphs"},[t.isSidebar?e("div",{staticClass:"sidebar-description"},[e("p",{staticClass:"description"},[t._v(t._s(t.strings.sidebarDescription))]),e("p",{staticClass:"description",domProps:{innerHTML:t._s(t.$links.getDocLink(t.$constants.GLOBAL_STRINGS.learnMore,"schema",!0))}})]):t._e(),t.currentPost.schema.default.isEnabled&&t.currentPost.schema.default.graphName!=="none"?e("graph-card",{attrs:{defaultGraph:t.currentPost.schema.default.graphName},scopedSlots:t._u([{key:"buttons",fn:function(){return[e("core-tooltip",{attrs:{type:"action"},scopedSlots:t._u([{key:"tooltip",fn:function(){return[t._v(" "+t._s(t.strings.editSchema)+" ")]},proxy:!0}],null,!1,210492192)},[t.getParentGraphName(t.currentPost.schema.default.graphName)!=="WebPage"?e("base-button",{staticClass:"small",attrs:{type:"gray"},on:{click:function(s){t.editDefaultGraph({parentGraphName:t.getParentGraphName(t.currentPost.schema.default.graphName),isSidebar:t.isSidebar})}}},[e("svg-pencil")],1):t._e()],1),e("core-tooltip",{attrs:{type:"action",offset:t.isSidebar?"-25px,0":"0,0"},scopedSlots:t._u([{key:"tooltip",fn:function(){return[t._v(" "+t._s(t.strings.deleteSchema)+" ")]},proxy:!0}],null,!1,1146130213)},[e("base-button",{staticClass:"small",attrs:{type:"gray"},on:{click:function(s){return t.maybeDoAction("deleteDefaultGraph")}}},[e("svg-trash")],1)],1)]},proxy:!0}],null,!1,2300202960)}):t._e(),t._l(t.filteredGraphs,function(s,r){return e("graph-card",{key:s.id,attrs:{graph:s},scopedSlots:t._u([{key:"buttons",fn:function(){return[e("core-tooltip",{attrs:{type:"action"},scopedSlots:t._u([{key:"tooltip",fn:function(){return[t._v(" "+t._s(t.strings.editSchema)+" ")]},proxy:!0}],null,!0)},[e("base-button",{staticClass:"small",attrs:{type:"gray"},on:{click:function(n){return t.editGraph({graphIndex:r,isSidebar:t.isSidebar})}}},[e("svg-pencil")],1)],1),e("core-tooltip",{attrs:{type:"action",offset:t.isSidebar?"-25px,0":"0,0"},scopedSlots:t._u([{key:"tooltip",fn:function(){return[t._v(" "+t._s(t.strings.deleteSchema)+" ")]},proxy:!0}],null,!0)},[e("base-button",{staticClass:"small",attrs:{type:"gray"},on:{click:function(n){return t.maybeDoAction("deleteGraph",r)}}},[e("svg-trash")],1)],1)]},proxy:!0}],null,!0)})}),t._l(t.currentPost.schema.customGraphs,function(s,r){return e("graph-card",{key:s.id,attrs:{graph:s,customGraph:""},scopedSlots:t._u([{key:"buttons",fn:function(){return[e("core-tooltip",{attrs:{type:"action"},scopedSlots:t._u([{key:"tooltip",fn:function(){return[t._v(" "+t._s(t.strings.editSchema)+" ")]},proxy:!0}],null,!0)},[e("base-button",{staticClass:"small",attrs:{type:"gray"},on:{click:function(n){return t.editCustomGraph({customGraphIndex:r,isSidebar:t.isSidebar})}}},[e("svg-pencil")],1)],1),e("core-tooltip",{attrs:{type:"action",offset:t.isSidebar?"-25px,0":"0,0"},scopedSlots:t._u([{key:"tooltip",fn:function(){return[t._v(" "+t._s(t.strings.deleteSchema)+" ")]},proxy:!0}],null,!0)},[e("base-button",{staticClass:"small",attrs:{type:"gray"},on:{click:function(n){return t.maybeDoAction("deleteCustomGraph",r)}}},[e("svg-trash")],1)],1)]},proxy:!0}],null,!0)})})],2),e("div",{staticClass:"buttons",class:{"no-margin":!t.currentPost.schema.graphs.length&&!t.currentPost.schema.customGraphs.length&&!t.currentPost.schema.defaultGraph}},[!t.currentPost.schema.graphs.length&&!t.currentPost.schema.customGraphs.length&&!t.currentPost.schema.default.isEnabled?e("core-alert",{staticClass:"no-graphs",attrs:{type:"yellow"}},[t._v(" "+t._s(t.strings.noGraphs)+" ")]):t._e(),e("base-button",{staticClass:"medium",attrs:{type:"blue"},on:{click:function(s){return t.setModalOpen({isOpen:!0,initialTab:"schema-templates",isSidebar:t.isSidebar})}}},[t._v(" "+t._s(t.strings.generateSchema)+" ")]),e("base-button",{staticClass:"medium",attrs:{type:"gray"},on:{click:function(s){return t.setModalOpen({isOpen:!0,initialTab:"schema-validation",isSidebar:t.isSidebar})}}},[t._v(" "+t._s(t.strings.validateSchema)+" ")])],1),!t.isSidebar&&t.schema.modalOpenMetabox?e("schema-generator",{attrs:{"allow-modal-close":!t.confirmationModalOpen&&!t.subModalOpen},on:{close:function(s){return t.maybeDoAction("setModalOpen",{isOpen:!1,initialTab:"schema-templates",isSidebar:t.isSidebar})},"sub-modal-toggle":s=>t.subModalOpen=s}}):t._e(),t.isSidebar&&t.schema.modalOpenSidebar?e("schema-generator",{attrs:{"allow-modal-close":!t.confirmationModalOpen&&!t.subModalOpen},on:{close:function(s){return t.maybeDoAction("setModalOpen",{isOpen:!1,initialTab:"schema-templates",isSidebar:t.isSidebar})},"sub-modal-toggle":s=>t.subModalOpen=s}}):t._e(),t.confirmationModalOpen?e("confirmation-modal",{attrs:{strings:t.modalStrings},on:{doAction:t.doAction,closeModal:function(s){t.confirmationModalOpen=!1}}}):t._e()]},proxy:!0}])})],1)},Wx=[],Kx=$(Vx,Ux,Wx,!1,null,null,null,null);const qx=Kx.exports;const Jx={mixins:[Qe],components:{CoreBlur:qs,CoreMainTabs:re,CoreModalPortal:ne,CoreTooltip:oe,Cta:so,GraphCard:Pr,SvgCirclePlus:at},data(){return{strings:{schemaGenerator:this.$t.__("Schema Generator",this.$td),headerTooltip:this.$t.sprintf(this.$t.__("Use our powerful Schema Generator to configure Schema Markup for your content. Search Engines use structured data to better understand what your site is about as well as to display rich snippets in search results. %1$s",this.$td),this.$links.getDocLink(this.$constants.GLOBAL_STRINGS.learnMore,"schema",!0)),searchSchema:this.$t.__("Search Schema",this.$tdPro),ctaDescription:this.$t.__("Easily generate unlimited schema markup for your content to help you rank higher in search results. Our schema validator ensures your schema works out of the box.",this.$tdPro),ctaButtonText:this.$t.__("Upgrade to Pro and Unlock Schema Generator",this.$td),ctaHeader:this.$t.sprintf(this.$t.__("Schema Generator is only available for licensed %1$s %2$s users.",this.$td),"AIOSEO","Pro")},features:[this.$t.__("Unlimited Schema",this.$td),this.$t.__("Validate with Google",this.$td),this.$t.__("Increase Rankings",this.$td),this.$t.__("Additional Schema Types",this.$td)],tabs:[{slug:"schema-templates",icon:"svg-file",name:this.$t.__("Schema Templates",this.$td),component:"templates"},{slug:"custom-schema",icon:"svg-file-edit",name:this.$t.__("Custom Schema",this.$td),component:"custom"},{slug:"schema-validation",icon:"svg-terminal",name:this.$t.__("Schema Validation",this.$td),component:"validation"}],templatesTabs:[{slug:"schema-catalog",name:this.$t.__("Schema Catalog",this.$td)},{slug:"your-templates",name:this.$t.__("Your Templates",this.$td)}]}}};var jx=function(){var t=this,e=t._self._c;return e("core-modal-portal",{attrs:{classes:["aioseo-post-schema-modal-cta"]},on:{close:function(s){return t.$emit("close")}},scopedSlots:t._u([{key:"headerTitle",fn:function(){return[e("div",{staticClass:"title"},[t._v(t._s(t.strings.schemaGenerator))]),e("core-tooltip",{scopedSlots:t._u([{key:"tooltip",fn:function(){return[e("span",{domProps:{innerHTML:t._s(t.strings.headerTooltip)}})]},proxy:!0}])},[e("svg-circle-question-mark")],1)]},proxy:!0},{key:"body",fn:function(){return[e("core-blur",[e("core-main-tabs",{attrs:{tabs:t.tabs,active:"schema-templates",showSaveButton:!1},scopedSlots:t._u([{key:"md-tab-icon",fn:function({tab:s}){return[e(s.icon,{tag:"component"})]}}])}),e("div",{staticClass:"schema-templates"},[e("core-main-tabs",{attrs:{tabs:t.templatesTabs,active:"schema-catalog",showSaveButton:!1},scopedSlots:t._u([{key:"md-tab-icon",fn:function({tab:s}){return[e(s.icon,{tag:"component"})]}}])}),e("div",{staticClass:"main"},[e("base-input",{staticClass:"search",attrs:{size:"medium",prependIcon:"search",placeholder:t.strings.searchSchema}}),e("div",{staticClass:"schema-catalog"},[e("div",{staticClass:"graphs"},t._l(t.graphs,function(s,r){return e("graph-card",{key:s.graphName+r,attrs:{graph:s},scopedSlots:t._u([{key:"buttons",fn:function(){return[e("base-button",{staticClass:"small",attrs:{type:"gray"}},[e("svg-circle-plus")],1)]},proxy:!0}],null,!0)})}),1)])],1)],1)],1),e("cta",{attrs:{"cta-link":t.$links.getPricingUrl("schema-generator","schema-generator-upsell"),"button-text":t.strings.ctaButtonText,"learn-more-link":t.$links.getUpsellUrl("schema-generator",null,"home"),"feature-list":t.features},scopedSlots:t._u([{key:"header-text",fn:function(){return[t._v(" "+t._s(t.strings.ctaHeader)+" ")]},proxy:!0},{key:"description",fn:function(){return[t._v(" "+t._s(t.strings.ctaDescription)+" ")]},proxy:!0}])})]},proxy:!0}])})},Yx=[],Qx=$(Jx,jx,Yx,!1,null,null,null,null);const Xx=Qx.exports;const Zx={components:{CoreAlert:Pt,CoreSettingsRow:G,CoreTooltip:oe,CtaModal:Xx,GraphCard:Pr,SvgEye:Nd},props:{parentComponentContext:String},data(){return{modalOpenMetabox:!1,modalOpenSidebar:!1,strings:{sidebarDescription:this.$t.__("Configure Schema Markup for your content. Search engines use structured data to display rich results in SERPs.",this.$td),noGraphs:this.$t.__("You have not added any schema yet. You can add any schema graphs you like via the Schema Generator below.",this.$td),schemaInUse:this.$t.__("Schema In Use",this.$td),generateSchema:this.$t.__("Generate Schema",this.$td),validateSchema:this.$t.__("Validate Schema",this.$td),defaultGraphTooltip:this.$t.__("This is the default graph for this post type. All data for this graph will be automatically generated.",this.$td)}}},computed:{...M(["currentPost","schema"]),isSidebar(){return this.$root._data.screenContext==="sidebar"}}};var tS=function(){var t=this,e=t._self._c;return e("div",{staticClass:"aioseo-tab-content aioseo-post-schema",class:[{sidebar:t.isSidebar}]},[e("core-settings-row",{attrs:{name:t.strings.schemaInUse},scopedSlots:t._u([{key:"content",fn:function(){return[e("div",{staticClass:"graphs"},[t.isSidebar?e("div",{staticClass:"sidebar-description"},[e("p",{staticClass:"description"},[t._v(t._s(t.strings.sidebarDescription))]),e("p",{staticClass:"description",domProps:{innerHTML:t._s(t.$links.getDocLink(t.$constants.GLOBAL_STRINGS.learnMore,"schema",!0))}})]):t._e(),t.currentPost.schema.defaultGraph&&t.currentPost.schema.defaultGraph!=="none"?e("graph-card",{attrs:{defaultGraph:t.currentPost.schema.defaultGraph},scopedSlots:t._u([{key:"buttons",fn:function(){return[e("core-tooltip",{attrs:{offset:t.isSidebar?"-70px,0":"0,0"},scopedSlots:t._u([{key:"tooltip",fn:function(){return[e("span",{domProps:{innerHTML:t._s(t.strings.defaultGraphTooltip)}})]},proxy:!0}],null,!1,2088100193)},[e("base-button",{staticClass:"small no-hover",attrs:{type:"gray"}},[e("svg-eye")],1)],1)]},proxy:!0}],null,!1,1435612472)}):t._e()],1),e("div",{staticClass:"buttons"},[!t.currentPost.schema.defaultGraph||t.currentPost.schema.defaultGraph==="none"?e("core-alert",{staticClass:"no-graphs",attrs:{type:"yellow"}},[t._v(" "+t._s(t.strings.noGraphs)+" ")]):t._e(),e("base-button",{staticClass:"medium",attrs:{type:"blue"},on:{click:function(s){t.modalOpenMetabox=!0,t.modalOpenSidebar=!0}}},[t._v(" "+t._s(t.strings.generateSchema)+" ")]),e("base-button",{staticClass:"medium",attrs:{type:"gray"},on:{click:function(s){t.modalOpenMetabox=!0,t.modalOpenSidebar=!0}}},[t._v(" "+t._s(t.strings.validateSchema)+" ")])],1),!t.isSidebar&&t.modalOpenMetabox?e("cta-modal",{on:{close:function(s){t.modalOpenMetabox=!1}}}):t._e(),t.isSidebar&&t.modalOpenSidebar?e("cta-modal",{on:{close:function(s){t.modalOpenSidebar=!1}}}):t._e()]},proxy:!0}])})],1)},eS=[],sS=$(Zx,tS,eS,!1,null,null,null,null);const iS=sS.exports,rS={props:{parentComponentContext:String},components:{Schema:qx,SchemaLite:iS},computed:{...de(["isUnlicensed"])}};var nS=function(){var t=this,e=t._self._c;return e("div",{staticClass:"aioseo-post-schema-view"},[t.isUnlicensed?t._e():e("schema",{attrs:{parentComponentContext:t.parentComponentContext}}),t.isUnlicensed?e("schema-lite",{attrs:{parentComponentContext:t.parentComponentContext}}):t._e()],1)},oS=[],aS=$(rS,nS,oS,!1,null,null,null,null);const lS=aS.exports,cS={};var hS=function(){var t=this,e=t._self._c;return e("svg",{staticClass:"aioseo-circle-information-solid",attrs:{viewBox:"0 0 14 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M7.00016 0.833334C3.32016 0.833334 0.333496 3.82 0.333496 7.5C0.333496 11.18 3.32016 14.1667 7.00016 14.1667C10.6802 14.1667 13.6668 11.18 13.6668 7.5C13.6668 3.82 10.6802 0.833334 7.00016 0.833334ZM7.66683 10.8333H6.3335V9.5H7.66683V10.8333ZM7.66683 8.16667H6.3335V4.16667H7.66683V8.16667Z",fill:"currentColor"}})])},uS=[],dS=$(cS,hS,uS,!1,null,null,null,null);const pS=dS.exports,fS={};var mS=function(){var t=this,e=t._self._c;return e("svg",{staticClass:"aioseo-receipt",attrs:{viewBox:"0 0 12 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M11 1.83325L10 0.833252L9 1.83325L8 0.833252L7 1.83325L6 0.833252L5 1.83325L4 0.833252L3 1.83325L2 0.833252L1 1.83325L0 0.833252V14.1666L1 13.1666L2 14.1666L3 13.1666L4 14.1666L5 13.1666L6 14.1666L7 13.1666L8 14.1666L9 13.1666L10 14.1666L11 13.1666L12 14.1666V0.833252L11 1.83325ZM1.33333 12.2266V2.77328H10.6667V12.2266H1.33333ZM10 10.8333V9.49992H2V10.8333H10ZM10 6.83325V8.16659H2V6.83325H10ZM10 5.49992V4.16658H2V5.49992H10Z",fill:"currentColor"}})])},gS=[],_S=$(fS,mS,gS,!1,null,null,null,null);const yS=_S.exports,vS={};var bS=function(){var t=this,e=t._self._c;return e("svg",{staticClass:"aioseo-crossed-arrows",attrs:{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.26625 4.7737L1.73375 0.249954L0.5 1.4837L5.02375 6.00745L6.26625 4.7737ZM9.6875 0.249954L11.4725 2.03495L0.5 13.0162L1.73375 14.25L12.715 3.27745L14.5 5.06245V0.249954H9.6875ZM8.74251 9.71747L9.97626 8.48372L12.715 11.2225L14.5 9.43746V14.25H9.68751L11.4813 12.4562L8.74251 9.71747Z",fill:"currentColor"}})])},kS=[],$S=$(vS,bS,kS,!1,null,null,null,null);const xS=$S.exports;const SS={components:{Advanced:Jd,Alert:Kl,CoreMainTabs:re,CoreModalPortal:ne,General:Jl,LinkAssistant:hf,ModalContent:Rf,Redirects:rm,Schema:lS,Social:Yl,SvgBuild:Od,SvgCaret:Wn,SvgCircleInformationSolid:pS,SvgClose:qn,SvgLinkSuggestion:ur,SvgReceipt:yS,SvgRedirectCrossedArrows:xS,SvgSettings:Ul,SvgShare:Wl},data(){return{activeTab:"general",modal:!1,strings:{pageName:"General",modalTitle:this.$t.__("Preview Snippet Editor",this.$td)},sidebarFirstOpen:!1}},watch:{currentPost:{deep:!0,handler(){Fu(this.savePostState,250)}},"currentPost.modalOpen"(i){this.activeTab!=="general"&&this.maybeResetActiveTab(i)},"currentPost.linkAssistant.modalOpen"(i){this.maybeResetActiveTab(i)},"currentPost.redirects.modalOpen"(i){this.maybeResetActiveTab(i)}},computed:{...M(["currentPost","redirects"]),tabs(){var t,e;const i=[{slug:"general",icon:"svg-settings",name:"General"},{slug:"social",icon:"svg-share",name:"Social"},{slug:"schema",icon:"svg-receipt",name:"Schema"},{slug:"redirects",icon:"svg-redirect-crossed-arrows",name:"Redirects",warning:0<((e=(t=this==null?void 0:this.redirects)==null?void 0:t.rows)==null?void 0:e.filter(s=>!!s.enabled).length),permission:"aioseo_page_redirects_manage"},{slug:"advanced",icon:"svg-build",name:"Advanced"}];return!this.$aioseo.integration&&this.currentPost.context==="post"&&(!this.currentPost.linkAssistant||!this.currentPost.linkAssistant.isExcludedPost)&&i.splice(3,0,{slug:"linkAssistant",icon:"svg-link-suggestion",name:"Link Assistant"}),i},initTab(){return this.getTabs[0].slug},getTabs(){return this.currentPost.context==="term"||this.currentPost.isWooCommercePageWithoutSchema?this.tabs.filter(i=>i.slug!=="schema"&&this.$allowed(this.getTabPermission(i.slug),!0)):this.tabs.filter(i=>this.$allowed(this.getTabPermission(i.slug),!0)?!0:i.slug==="general"&&(this.$allowed("aioseo_page_analysis")||this.$allowed(this.getTabPermission(i.slug),!0)))}},methods:{...E(["toggleLinkAssistantModal","toggleRedirectsModal","changeTabSettings"]),..._t(["openModal","updateState","savePostState"]),processChangeTab(i){switch(this.activeTab=i,this.$root._data.screenContext){case"sidebar":document.querySelectorAll(".components-panel__header").forEach(t=>{const e=i===null?"sticky":"static";t.style.position=e});break;default:this.changeTabSettings({setting:"main",value:i});break}if(this.sidebarFirstOpen){this.sidebarFirstOpen=!1;return}if(this.$root._data.screenContext==="sidebar")switch(i){case"social":this.currentPost.modalOpen||(this.changeTabSettings({setting:"modal",value:"social"}),this.openModal(!0));break;case"linkAssistant":this.currentPost.linkAssistant&&!this.currentPost.linkAssistant.modalOpen&&this.toggleLinkAssistantModal();break;case"redirects":this.currentPost.redirects&&!this.currentPost.redirects.modalOpen&&this.toggleRedirectsModal();break}},maybeResetActiveTab(i){i||this.$root._data.screenContext==="sidebar"&&this.$nextTick(()=>{this.processChangeTab(null)})},closeModal(){this.openModal(!1)},getTabPermission(i){const t=this.tabs.find(e=>e.slug===i);return typeof t.permission<"u"?t.permission:`aioseo_page_${t.slug}_settings`},getTabName(i){const t=this.tabs.find(e=>e.slug===i);return t==null?void 0:t.name}},created(){switch(this.sidebarFirstOpen=!0,this.modal=Is()["aioseo-modaltab"]||this.modal,this.modal&&(this.changeTabSettings({setting:"modal",value:this.modal}),this.openModal(!0),setTimeout(()=>{tn("aioseo-modaltab")},500)),this.$bus.$on("open-post-settings",i=>{this.processChangeTab(i.tab)}),this.$bus.$on("standalone-update-post",i=>{Object.keys(i).forEach(t=>{this.$set(this.currentPost,t,i[t])})}),this.$root._data.screenContext){case"sidebar":this.activeTab=null;break;default:this.activeTab=Is()["aioseo-tab"]||this.initTab,this.changeTabSettings({setting:"main",value:this.activeTab}),setTimeout(()=>{tn("aioseo-tab")},500);break}},beforeMount(){const i=document.querySelector(".interface-complementary-area__pin-unpin-item");i&&i!==null&&(i.style.display="block")}};var wS=function(){var t=this,e=t._self._c;return e("div",{staticClass:"aioseo-app aioseo-post-settings"},[t.$root._data.screenContext!=="sidebar"?e("core-main-tabs",{attrs:{tabs:t.getTabs,showSaveButton:!1,active:t.activeTab,internal:"",disableMobile:""},on:{changed:s=>t.processChangeTab(s)},scopedSlots:t._u([{key:"md-tab-icon",fn:function({tab:s}){return[e(s.icon,{tag:"component",class:[{warning:s.data.warning}]})]}}],null,!1,1941963731)}):t._e(),e("transition",{attrs:{name:"route-fade",mode:"out-in"}},[t.$root._data.screenContext==="sidebar"&&t.activeTab===null?e("div",{staticClass:"aioseo-sidepanel"},t._l(t.getTabs,function(s,r){return e("a",{key:r,staticClass:"aioseo-sidepanel-button",attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),t.processChangeTab(s.slug)}}},[e(s.icon,{tag:"component",staticClass:"icon"}),e("div",{staticClass:"name"},[t._v(t._s(s.name))]),s.warning?e("svg-circle-information-solid",{attrs:{width:"15",height:"15"}}):t._e(),e("svg-caret")],1)}),0):t._e()]),e("transition",{attrs:{name:"route-fade",mode:"out-in"}},[t.activeTab?e("div",{key:t.activeTab,staticClass:"aioseo-tab",class:{"is-page-builder":!!t.$aioseo.integration}},[t.$root._data.screenContext==="sidebar"?e("div",{staticClass:"aioseo-tab-title"},[e("span",[t._v(t._s(t.getTabName(t.activeTab)))]),e("svg-close",{on:{click:function(s){return t.processChangeTab(null)}}})],1):t._e(),this.$root._data.screenContext==="sidebar"?e("alert"):t._e(),e(t.activeTab,{tag:"component",attrs:{parentComponentContext:"metabox"},on:{changeTab:s=>t.processChangeTab(s)}})],1):t._e()]),t.currentPost.modalOpen&&t.$root._data.screenContext==="sidebar"?e("core-modal-portal",{attrs:{classes:["aioseo-post-settings-modal"]},on:{close:t.closeModal}},[e("div",{attrs:{slot:"headerTitle"},slot:"headerTitle"},[t._v(" "+t._s(t.strings.modalTitle)+" ")]),e("div",{attrs:{slot:"body"},slot:"body"},[e("modal-content")],1)]):t._e()],1)},CS=[],PS=$(SS,wS,CS,!1,null,null,null,null);const TS=PS.exports;const AS={components:{Alert:Kl,MainView:TS},mixins:[vd],data(){return{scrollContainer:".interface-interface-skeleton__content",scrollTimeout:1e3,ScrollAndHighlightTimeout:2e3}},computed:{...M(["currentPost"])},async created(){const{internalOptions:i,options:t,dynamicOptions:e,settings:s,notifications:r,addons:n,license:o,currentPost:a,tags:l,linkAssistant:c,redirects:h,schema:u}=await Vu(this.$http);this.$set(this.$store.state,"internalOptions",zt({...this.$store.state.internalOptions},{...i})),this.$set(this.$store.state,"options",zt({...this.$store.state.options},{...t})),this.$set(this.$store.state,"dynamicOptions",zt({...this.$store.state.dynamicOptions},{...e})),this.$set(this.$store.state,"settings",zt({...this.$store.state.settings},{...s})),this.$set(this.$store.state,"notifications",zt({...this.$store.state.notifications},{...r})),this.$set(this.$store.state,"addons",zt([...this.$store.state.addons],[...n])),this.$set(this.$store.state,"license",zt({...this.$store.state.license},{...o})),this.$set(this.$store.state,"currentPost",zt({...this.$store.state.currentPost},{...a})),this.$set(this.$store.state,"tags",zt({...this.$store.state.tags},{...l})),this.$set(this.$store.state,"linkAssistant",zt({...this.$store.state.linkAssistant},{...c})),this.$set(this.$store.state,"redirects",zt({...this.$store.state.redirects},{...h})),this.$set(this.$store.state,"schema",zt({...this.$store.state.schema},{...u}))}};var DS=function(){var t=this,e=t._self._c;return e("div",[this.$root._data.screenContext!=="sidebar"?e("alert"):t._e(),t.currentPost.id?e("main-view"):t._e()],1)},MS=[],OS=$(AS,DS,MS,!1,null,null,null,null);const P1=OS.exports;export{P1 as A,Bd as g};

(()=>{var t={109:(t,e,i)=>{var n=i(9911),a=i(4184),s=i(7801),o=i(5522),l=i(159),r={cloud:i(2422),css:i(5694),dynamicImage:i(2774),general:i(9),inlineShortcodes:i(4319),sync:i(1156)},c={tcb_head_css_prefix:9};_.each(r,(function(t){TVE.addHooks(t,c)})),s.htmlChangeActions.forEach((function(t){return TVE.add_action(t,o.checkForDisplayTestimonialsSync)})),void 0===TVE.displayTestimonials&&(TVE.displayTestimonials={FLAGS:{IS_SYNCING:!1}}),t.exports={component:a,constants:s,content:o,editMode:l,utils:n}},4184:(t,e,i)=>{function n(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function a(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?n(Object(i),!0).forEach((function(e){s(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var o=i(9911),l=i(5522),r=i(159);t.exports=TVE.Views.Components.display_testimonials=TVE.Views.Components.post_list.extend({after_init:function(){var t=this;this.$noResultsMessageTextArea=this.$("#thrive-display-testimonials-no-results-message"),this.displayTypeTooltip||TVE.CONST.dismissed_tooltips.includes("displayTypeDisplayTestimonials")||(this.displayTypeTooltip=new TVE.Views.other.WarningTooltip({template:TVE.tpl("util/carousel-display-type-tooltip"),type:"displayTypeDisplayTestimonials",className:"tcb-tooltip-container tcb-display-type-tooltip",identifier:"".concat(TVE.identifier("display_testimonials")).concat(TVE.Models.CarouselManager.carouselSelector),control:this.controls.Type,afterApplyChange:function(){t.controls.Type.setActive(t.potentialDisplayType,!0)}}),this.$el.find('[data-view="Type"] .tve-btn-group').append(this.displayTypeTooltip.$el))},controls_init:function(t){TVE.Views.Components.post_list.prototype.controls_init.call(this,t),r.toggleListElements(!1,!0),t.NumberOfItems.input=TVE.$.noop,t.NumberOfItems.change=function(t,e){var i=a(a({},TVE.PostList.utils.readQueryFromElement()),{},{posts_per_page:e.value});o.applyQuery(i,t).then((function(e){o.applyQueryCallback(e,t)}))},t.NumberOfItems.update=function(t){this.setValue(l.countItems(t))},t.MessageColor.update=function(){this.setValue(TVE.ActiveElement.attr("data-no_posts_text_color"))},t.MessageColor.change=function(t){t=t?t.toString():"",TVE.ActiveElement.attr("data-no_posts_text_color",t).head_css({color:t},null,"::after")}},before_update:function(){this.$noResultsMessageTextArea.val(TVE.ActiveElement.attr("data-no_posts_text")||"")},after_update:function(){var t="carousel"===this.controls.Type.getValue(),e=TVE.Components.carousel.controls.Fade.getValue();this.controls.HorizontalSpace.$el.toggleClass("tcb-disabled",t&&e),this.controls.PaginationType.$el.toggleClass("tcb-disabled",t)},editMode:function(){r.enterEditMode(TVE.ActiveElement,this.getStates(),this.stateChange)},filterTestimonialsClicked:function(){this.filterTestimonials()},filterTestimonials:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=i(9193);void 0!==TVE.displayTestimonialsModal&&TVE.displayTestimonialsModal.destroy(),TVE.displayTestimonialsModal=new n({el:TVE.modal.get_element("display-testimonials"),cloudModalInstance:t,canSwitchToTemplates:e}),TVE.displayTestimonialsModal.open()},changeNoResultsMessage:function(t,e){TVE.ActiveElement.attr("data-no_posts_text",e.value)}})},7801:t=>{t.exports={IDENTIFIER:".thrive-display-testimonials",THRIVE_DISPLAY_TESTIMONIALS_SHORTCODE:"thrive_display_testimonials",THRIVE_DISPLAY_TESTIMONIALS_CLASS:"thrive-display-testimonials",THRIVE_DISPLAY_TESTIMONIALS_SHORTCODE_CLASS:"thrive-display-testimonials-shortcode",thrive_display_testimonial_image_label:"Testimonial Image",THRIVE_DISPLAY_TESTIMONIALS_TAGS_TAXONOMY:"tvo_tags",htmlChangeActions:["icon_element_changed","tcb.button_icon.change","tcb.button_icon_side.change","tcb.button_secondary_text.change","tcb.image.caption_change","tcb.image.style_change","tcb.image.style_cancel","tcb.image.overlay.change","tcb.image.open_full_size.changed","tcb.columns_wrap.change","tcb.contentbox_placeholder.render","tcb.button_style_change","tcb.button_style_cancel","tcb.divider_style.input","tcb.divider_style.cancel","tcb.change_decoration","tcb.responsive_visibility_changed","tcb_action_aspect_ratio_changed","tcb.columns_wrap.change","tcb.layout.alignment_changed","tcb.star_rating.changed"]}},5522:(t,e,i)=>{var n=i(7801),a={checkForDisplayTestimonialsSync:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=t.closest(TVE.identifier("article")),n=i.length>0&&!a.isSyncing();return n&&e&&(TVE.displayTestimonials.SYNC=!0,a.syncDisplayTestimonial(i),TVE.displayTestimonials.SYNC=!1),n},isSyncing:function(){return TVE.displayTestimonials.FLAGS.SYNC},syncArticle:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e.is(t)||i){var n=TVE.inner_$(t),s=e.clone(),o=parseInt(t.dataset.id);if(o){var l=TVE.displayTestimonials.testimonial_shortcodes[o];l&&a.syncDynamicImages(s,l.image),TVE.do_action("tcb.testimonial_list.before_article_sync",s,o)}s.find(".tve-element-overlay").removeClass("tve-element-overlay"),s.find(".edit_mode").removeClass("edit_mode"),s.find("style.tvo-display-testimonials-dynamic-variables").replaceWith(n.find("style.tvo-display-testimonials-dynamic-variables")),n.html(s.html()),TVE.Editor_Page.content_manager.cleanup_froala(n),s.remove()}},syncDisplayTestimonial:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:TVE.displayTestimonials.testimonial_shortcodes||[];t.find(".tve-dropped").removeClass("tve-dropped"),e||(e=t.parents(TVE.identifier("display_testimonials"))),TVE.froala.disable(t),i.length&&a.generateDisplayTestimonials(e,t,i),e.find(TVE.identifier("article")).each((function(e,n){a.syncArticle(n,t,!1,i)})),TVE.drag.editorActions(),TVE.do_action("tcb.display_testimonials_article.sync",e)},generateDisplayTestimonials:function(t,e,i){t.empty();var n=e.prop("tagName").toLowerCase();i.forEach((function(e){var i={id:"post-"+e.ID,"data-id":e.ID,class:"thrive-testimonial-wrapper post-wrapper thrv_wrapper","data-selector":".post-wrapper"};t.append(TVE.inner_$("<".concat(n,">"),i).append(TVE.inner_$(e.tvo_testimonial_dynamic_variables)))}))},parseMainShortcodes:function(t){t.find(TVE.identifier("display_testimonials")).each((function(e,i){var a=t.find(i),s=a.find(TVE.identifier("article")).first(),o=n.THRIVE_DISPLAY_TESTIMONIALS_SHORTCODE,l="[tvo_testimonial_dynamic_variables][/tvo_testimonial_dynamic_variables]",r="";TVE.PostList.content.parsePaginationShortcode(a,t),s.find("style.tvo-display-testimonials-dynamic-variables").remove(),TVE.PostList.dynamicImage.saveDynamicImageSources(s),a.find(".tcb-dynamic-field-source img").each((function(t,e){var i=TVE.inner_$(e),n=i.parent().parent(),a=' class="'.concat(e.getAttribute("class")||"",'" css="').concat(e.getAttribute("data-css")||"",'"');n.attr("data-tcb-events",i.attr("data-tcb-events")),e.outerHTML='[tvo_testimonial_image type="'.concat(e.getAttribute("data-d-f"),'"').concat(a,"]")})),a.attr("id")&&(r="id='".concat(a.attr("id"),"' "));var c=TVE.PostList.utils.elementAttributes(a,["data-shortcode","data-selector","data-class","data-id"],!0,!0),d=a.find(".tcb-carousel-container");d.length>0&&TVE.Models.CarouselManager.prepareForPostListSave(d,c),_.each(c,(function(t,e){t="number"==typeof t||t.includes('"')?"'".concat(t,"'"):'"'.concat(t,'"'),r+="".concat(e,"=").concat(t," ")}));var u=TVE.Editor_Page.getResponsiveClasses(a);if(r+=u?" class='".concat(u.join(" "),"' "):"",s.length){TVE.do_action("tcb.post_list.before_save",s),l+=s.html();var h=TVE.PostList.utils.elementAttributes(s,["data-id","data-selector"],!0,!0);_.each(h,(function(t,e){r+="article-".concat(e,"='").concat(t,"' ")}))}a.replaceWith("[".concat(o," ").concat(r,"]").concat(l,"[/").concat(o,"]"))}))},setElementClasses:function(t,e){var i=["".concat(e,".tve_evt_manager_listen"),".".concat(n.THRIVE_DISPLAY_TESTIMONIALS_CLASS,".tve_evt_manager_listen")];t.find(i.join(", ")).each((function(t,e){e.setAttribute("data-class",TVE.PostList.utils.getEventClasses(e.className)),e.getAttribute("data-tcb-events")&&e.setAttribute("data-tcb-events",e.getAttribute("data-tcb-events").replace(/\[/g,"|{|").replace(/\]/g,"|}|"))}))},syncDynamicImages:function(t,e){t.find("".concat(TVE.identifier("image"),"[data-dynamic]")).each((function(t,i){var n=TVE.inner_$(i),a=n.find(".tve_image"),s=n.attr("data-dynamic");a.attr({src:TVE.Components.image.controls.ImagePicker.picker.clean_url(e),"data-d-f":s})}))},countItems:function(t){return t.find(".thrive-testimonial-wrapper:not(.slick-cloned)").length},replaceShortcodeWithData:function(t,e,i){if(t&&i&&TVE.displayTestimonials.testimonial_shortcodes&&TVE.displayTestimonials.testimonial_shortcodes[i]&&TVE.displayTestimonials.testimonial_shortcodes[i][t]){var n=TVE.displayTestimonials.testimonial_shortcodes[i][t],a=TVE.inner_$(n);e.html(a.html()),a.remove()}}};t.exports=a},2368:t=>{t.exports=TVE.CloudTemplatesCategories.extend({$$type:"display_testimonials",categoryId:"display_testimonials_type",templateName:"display_testimonials",alter_wrapper_attributes:function(t,e){return{"data-ct-name":e.name,"data-ct":"".concat(e.type,"-").concat(e.id)}}})},5468:(t,e,i)=>{var n=i(9911);t.exports=TVE.renderers.baseModel.extend({getClassName:function(){return this.attributes.className||""},render_default:function(t){var e=TVE.inner_$({tvo_testimonial_title:"<h2></h2>",tvo_testimonial_content:'<div class="tcb-plain-text"></div>',tvo_testimonial_website:'<div class="thrv_wrapper thrv_text_element"></div><div class="tcb-plain-text"></div></div>',tvo_testimonial_role:'<div class="tcb-plain-text"></div>',tvo_testimonial_author:'<div class="tcb-plain-text"></div>',tvo_testimonial_image:'<div class="thrv_wrapper tve_image_caption tcb-dynamic-field-source tve-draggable tve-droppable" data-dynamic="featured"></div>'}[this.key]||"<p></p>"),i=n.getArticleID(t),a={"data-shortcode":this.key},s=TVE.displayTestimonials.testimonial_shortcodes[i][this.key];switch(this.key){case"tvo_testimonial_content":s=TVE.$(s).html();break;case"tvo_testimonial_title":case"tvo_testimonial_role":case"tvo_testimonial_author":s=TVE.$(s).text();break;case"tvo_testimonial_website":s=TVE.$(s).text(),a["data-attr-link"]=1;break;case"tvo_testimonial_image":var o=TVE.Components.image.controls.ImagePicker.picker.clean_url(TVE.displayTestimonials.testimonial_shortcodes[i].image);s='<span class="tve_image_frame"><img class="tve_image" src="'.concat(o,'" loading="lazy" data-d-f="featured" /></span>')}if("tvo_testimonial_image"===this.key)return e.html(s),TVE.ActiveElement=TVE.ClickedElement=e,e[0].outerHTML;if("tvo_testimonial_website"===this.key){var l=TVE.$('<span class="thrive-shortcode-content" contenteditable="false" data-extra_key="" data-option-inline="1"><a href="'.concat(s,'" class="tve-froala fr-basic" style="outline: none;">').concat(s,"</a></span>")).attr(a);e.html('<span class="thrive-inline-shortcode" contenteditable="false">'.concat(l[0].outerHTML,"</span>"))}else{var r=TVE.$('<span class="thrive-shortcode-content" contenteditable="false" data-extra_key="" data-option-inline="1">'.concat(s,"</span>")).attr(a);e.html('<span class="thrive-inline-shortcode" contenteditable="false">'.concat(r[0].outerHTML,"</span>"))}return'<div class="'.concat(this.getClassName(),' thrv_wrapper">').concat(e[0].outerHTML,"</div>")}})},159:(t,e,i)=>{var n=i(7801),a=TVE.$.extend(!0,{},TVE.PostList.EditMode,{identifier:".".concat(n.THRIVE_DISPLAY_TESTIMONIALS_CLASS),subElementCategory:"Ovation Elements",getExtraListElementsTags:function(){return["divider","icon","social","styledlist","rating"]},enterEditMode:function(t){this.beforeEditModeEnter(t),TVE.main.EditMode.enter(!1,{body_class:"edit-mode-active display-testimonials-edit-mode",blur:!0,element_selectable:!1,show_overlay:!0,show_default_message:!0,can_insert_elements:!0,states:[],callbacks:{before_exit:TVE.Views.Controls.DropPanel.close_all}}),this.afterEditModeEnter()},afterEditModeEnter:function(){var t=this;TVE.PostList.EditMode.afterEditModeEnter.call(this),TVE.main.sidebar_toggle_elements(_.map(_.filter(TVE.Elements,(function(e){return function(e){return e.is_sub_element&&e.category!==t.subElementCategory}(e)})),(function(t){return t.tag})),!1)},exitEditMode:function(t){this.beforeEditModeExit(t),setTimeout((function(){TVE.ElementEditIcons.show_icons(t)}),50)},isInternalDrag:function(){return void 0!==TVE.FLAGS.$dragged_element&&!TVE.FLAGS.$dragged_element.static_element},toggleOnlyListElements:function(t){}});t.exports=a},2422:(t,e,i)=>{function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var a={"tcb.cloud_templates_categories.second_step":function(t){"display_testimonials-templates"===t.collectionName&&(t.applyTo.attr("data-cloud-template",t.selected),TVE.Components.display_testimonials.filterTestimonials(t,!0))},tcb_after_cloud_template_css_inserted:function(t){if(t.is(TVE.identifier("display_testimonials"))){if("carousel"===t.attr("data-type")){var e=t.find(".tcb-carousel-container");e.attr("data-carousel-settings",decodeURI(e.attr("data-carousel-settings")))}TVE.PostList.layout.applyLayout(t)}}},s={"tcb.cloud_templates.change_main_wrapper_data_css":function(t){return[].concat(function(t){if(Array.isArray(t))return n(t)}(e=t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return n(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(t,e):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),["display_testimonials"]);var e},"tcb.modals.modals_with_categories":function(t){return t.find((function(t){return"display-testimonials"===t}))||t.push("display-testimonials"),t},"tcb.modals.modals_list":function(t){return t["display-testimonials"]=i(2368),t},"tve.cloud_templates.modal":function(t,e){return e.is(TVE.identifier("display_testimonials"))&&(t="display-testimonials"),t},"tcb.cloud_templates_categories.has_two_steps":function(t,e){return e.applyTo.hasClass("tcb-elem-placeholder")&&"display_testimonials-templates"===e.collectionName&&(t=!0),t}};t.exports={actions:a,filters:s}},5694:(t,e,i)=>{var n=i(5522),a=i(9911),s={"tcb.write_css":function(t){if(t=t.replace(TVE.PostList.utils.pseudoSelectorsRegex(),""),!TVE.FLAGS.drag&&t.includes(TVE.identifier("display_testimonials"))){var e=TVE.inner.$document.find(t),i=e.closest(TVE.identifier("article"));if(i.length){var a=TVE.state_manager.get_parent(),s=!1;a&&1===TVE.inner.$body.find('[data-css="'+a.attr("data-css")+'"]').length&&(s=!0),(s||1===TVE.inner.$body.find('[data-css="'+e.attr("data-css")+'"]').length)&&(e.is(i)||n.checkForDisplayTestimonialsSync(i))}}}},o={"tcb.css.fallback_value":function(t,e,i){if(!t&&TVE.state_manager.is_hover()&&i&&"background-image"===e){var n=i.includes(TVE.identifier("display_testimonials"))||i.includes(TVE.identifier("article"))&&a.isInsideTestimonialsList(),s=TVE.CONST.dynamic_background_url_prefix,o=TVE.inner_$(i).css("".concat(TVE.CONST.cssVarPrefix,"background-image"));n&&o&&o.includes(s)&&(t=o.replace("var$","var"))}return t},"tcb.post_list.prefix":function(t,e){return e.is(TVE.identifier("display_testimonials"))&&(t=".thrive-display-testimonials"),t},"tcb.head_css_new_id":function(t){var e=TVE.inner.$body.find('[data-css="'+t+'"]'),i=e.closest(TVE.identifier("article"));return 1===e.length&&i.length&&!TVE.FLAGS.drag&&n.checkForDisplayTestimonialsSync(i),t},hover_prefix_selector:function(t,e){var i=TVE.inner_$(e);if(i.hasClass("tve-content-box-background")){var n=i.parents(TVE.identifier("display_testimonials"));n.length&&(t=a.getDisplayTestimonialsSelector(n).trim())}return t},tcb_head_css_prefix:function(t,e){var i=e.parents(TVE.identifier("display_testimonials"));if(i.length){var n=a.getDisplayTestimonialsSelector(i),s=".thrv-content-box";-1!==(t=(t=-1!==t.indexOf(s)||e.is(".tve-cb")?t.replace(".thrv-content-box ","")+n+s+" ":(t=0===TVE.inner.$body.find(t+n).length?n+" "+t:t+" "+n).replace(/([ ]{2,})/g," ")).trimStart()).indexOf(TVE.PostList.baseSelector)&&(t=TVE.PostList.baseSelector+" "+t.replace(TVE.PostList.baseSelector,""))}else if(e.is(TVE.identifier("pagination_number_item"))){var o=TVE.CSS_Rule_Cache.uniq_id(e.closest(TVE.identifier("pagination")));t=t.trimStart()+'[data-css="'.concat(o,'"]').concat(TVE.identifier("pagination")," ")}return t},"tcb.css.save.whitelist_rule":function(t,e){return e.includes(TVE.identifier("display_testimonials"))&&e.includes(":nth-child")&&(e=(e=e.replace(/:not\((:nth-child\(.*\))\)/g,"")).replace(/(:nth-child\(.*\))/g,""),TVE.inner.$body.find(e).length&&(t=!0)),t},regenerate_css_id:function(t,e){var i=TVE.inner.$body.find('[data-css="'+e+'"]');if(i.length){var n=(1===i.length?i:i.first()).closest(TVE.identifier("article"));n.length&&1===n.find('[data-css="'+e+'"]').length&&(t=!1)}return t}};t.exports={actions:s,filters:o}},2774:(t,e,i)=>{var n=i(5522),a=i(159),s=i(9911),o=i(7801),l=function(t){var e=TVE.displayTestimonials.testimonial_shortcodes[s.getArticleID()];e&&(TVE.ActiveElement.attr({"data-dynamic":t}).find(".tve_image").attr({src:TVE.Components.image.controls.ImagePicker.picker.clean_url(e.image),"data-d-f":t}).removeAttr("srcset"),n.checkForDisplayTestimonialsSync(TVE.ActiveElement.closest(TVE.identifier("article"))))},r={"tcb.dynamic_image.change_url":function(t){return a.isInsideEditMode()&&(t="var(".concat(TVE.CONST.dynamic_background_url_prefix,"testimonial-image)")),t},"tcb.dynamic_image.show_tab":function(t){return a.isInsideEditMode()&&(t=!0),t},"tcb.image_picker.dynamic_source":function(t){if(a.isInsideEditMode()){var e=TVE.displayTestimonials.testimonial_shortcodes[s.getArticleID()];e&&(TVE.ActiveElement.attr({"data-dynamic":"featured"}),t.url=TVE.Components.image.controls.ImagePicker.picker.clean_url(e.image))}return t},"tcb.dynamic_image.options":function(t){return a.isInsideEditMode()&&(t.featured.label=o.thrive_display_testimonial_image_label),t},"tcb.dynamic_image_input.callback":function(t){return a.isInsideEditMode()&&(t=l),t},"tcb.custom-fields.main-dropdown-values":function(t,e){return a.isInsideEditMode()&&"image"===e&&((t=_.pick(t,["","featured"])).featured=o.thrive_display_testimonial_image_label),t},"tcb.dynamic_image.show_sizes_select":function(t){return a.isInsideEditMode()&&(t=!1),t}};t.exports={actions:{},filters:r}},9:(t,e,i)=>{var n=i(5522),a=i(159),s=i(7801),o=i(9911),l=i(5468),r={"tve.lazyload.done":function(t){TVE.displayTestimonials.testimonial_shortcodes=t.testimonial_shortcodes?t.testimonial_shortcodes:{},TVE.displayTestimonials.has_at_least_one_testimonial=t.has_at_least_one_testimonial,TVE.displayTestimonials.sets=t.sets},"tcb-ready":function(){_.each({display_testimonial_title:{key:"tvo_testimonial_title",class:"thrive-testimonial-title"},display_testimonial_content:{key:"tvo_testimonial_content",class:"thrive-testimonial-content"},display_testimonial_role:{key:"tvo_testimonial_role",class:"thrive-testimonial-role"},display_testimonial_author:{key:"tvo_testimonial_author",class:"thrive-testimonial-author"},display_testimonial_image:{key:"tvo_testimonial_image",class:"thrive-testimonial-image"},display_testimonial_website:{key:"tvo_testimonial_website",class:"thrive-testimonial-website"}},(function(t,e){TVE.renderers[e]=new l({key:t.key,className:t.class})}))},"tcb.after-insert":function(t){if(t.length>1&&(t=t.first()),TVE.Elements[TVE._type(t)]){var e=t.closest(TVE.identifier("article"));e.length&&n.checkForDisplayTestimonialsSync(e),TVE.PostList.layout.applyLayout(t),setTimeout((function(){TVE.PostList.layout.masonryRedo()}),100)}else console.warn("Corresponding element not found inside TVE.Elements for:",t)},"tcb.edit_mode.exit":function(t){t.is(TVE.identifier("display_testimonials"))&&a.exitEditMode(t)},"tcb.element.remove":function(t){var e=TVE.identifier("display_testimonials");if(TVE.displayTestimonials.$articleToSync&&(n.checkForDisplayTestimonialsSync(TVE.displayTestimonials.$articleToSync),delete TVE.displayTestimonials.$articleToSync),t.hasClass("thrv_symbol")){var i=t.find(e);t=i.length?i:t}t.is(e)&&TVE.PostList.utils.removeElementsWithPostList(t),TVE.PostList.layout.masonryRedo()},"tcb.insert_content_template":o.fetchExistingTestimonials,"tve.imported_content":o.fetchExistingTestimonials,"tcb.symbol_loaded":o.fetchExistingTestimonials,"theme.section.after_insert":function(t,e){o.fetchExistingTestimonials(t.$element)}},c={"tcb.lazyload.data":function(t){return t["testimonial-existing-ids"]=o.getTestimonialIdsFromContent(),t},tcb_filter_html_before_save:function(t,e,i){return e.is(TVE.identifier("contentbox"))||i.render_post_list||(n.setElementClasses(t,TVE.identifier("article")),n.parseMainShortcodes(t)),t},allow_remove:function(t,e){var i=e[0].closest(TVE.identifier("article")),n=e[0].closest(TVE.identifier("display_testimonials"));return i.length&&n&&(TVE.displayTestimonials.$articleToSync=i),t},"tcb.post_list.layout.getListIdentifier":function(t,e){return e&&e.closest(s.IDENTIFIER).length>0&&(t=s.IDENTIFIER),t},allow_dragenter:function(t,e){if(a.isInsideEditMode()&&TVE.main.EditMode.element()&&TVE.main.EditMode.element().is(TVE.identifier("display_testimonials")))if(e.is(TVE.identifier("article")))t=!1;else if(!TVE.FLAGS.$dragged_element.static_element){var i=TVE.FLAGS.$dragged_element.parents(TVE.identifier("article")).attr("id"),n=e.parents(TVE.identifier("article")).attr("id");t=t&&i===n}return t},"tcb.get_dropzone_target":function(t){return o.getDropzoneTarget(t)},"tcb.change_target":function(t){return o.getDropzoneTarget(t)},"tcb.carousel_manager.element_instance.display_testimonials":function(t,e){return new TVE.inner.window.TCB_Front.PostList(e,!0)},"tcb.post_list.article_identifier":function(t){return"".concat(t,":not(.thrive-testimonial-wrapper)")},"tcb.post_list.device_change_selectors":function(t){return"".concat(t,", ").concat(TVE.identifier("display_testimonials"))},"theme.post_list.identifier":function(t){return"".concat(t,", ").concat(TVE.identifier("display_testimonials"))}};t.exports={actions:r,filters:c}},4319:(t,e,i)=>{function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var a=i(5522),s=i(9911),o=i(159),l={"tcb.froala.before_shortcode_popup":function(t){t.find("#fr-dropdown-categories-list").find('option[value="Ovation"]').toggle(!!o.isInsideEditMode())},"tve.froala.inline.shortcodes.before.save":function(t){"tvo_testimonial_website"===t.getAttribute("data-shortcode")&&t.setAttribute("data-attr-css",jQuery(t).find("a").attr("data-css")||"")}},r={"tcb.inline_shortcodes.shortcode_group":function(t){return[].concat(function(t){if(Array.isArray(t))return n(t)}(e=t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return n(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(t,e):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),["Ovation"]);var e},"tcb.inline_shortcodes.insert":function(t){if(t.options.push({key:"inline",value:1}),t.extra_key)return t;var e=s.getShortcodeName(t);return e&&(t.name=e),t},"tcb.inline_shortcodes.shortcode_value":function(t,e){return e.key.includes("tvo_testimonial")&&e.configOptions[0]&&e.configOptions[0].value&&(TVE.inner_$(TVE.displayTestimonials.testimonial_shortcodes[s.getArticleID()][e.key])[0].innerText.length||(t=e.configOptions[0].value)),t},"tcb.inline_shortcodes.afterInsert":function(t,e){var i=e.key;if(i.includes("tvo_testimonial")){if("tvo_testimonial_website"===i){var n=t.find(".thrive-shortcode-content"),o=s.getArticleID(t),l=TVE.displayTestimonials.testimonial_shortcodes[o],r=TVE.inner_$(l[i]);r.length&&n.html('<a href="#">'.concat(r.text(),"</a>")),r.remove()}a.checkForDisplayTestimonialsSync(t.closest(TVE.identifier("article")))}return t},"tve.froala.shortcode.default_empty_value":function(t,e){var i=e.attr("data-shortcode");return i&&i.includes("tvo_testimonial")&&(t=""),t}};t.exports={actions:l,filters:r}},1156:(t,e,i)=>{var n=i(5522),a={"tcb.froala.blur":function(t,e){void 0!==TVE.ActiveElement&&TVE.ActiveElement.is(TVE.TEXT_ALL)&&n.checkForDisplayTestimonialsSync(e.$el)},"tcb.image.change":function(){return n.checkForDisplayTestimonialsSync(TVE.ActiveElement)},"tcb.testimonial_list.before_article_sync":function(t,e){t.find(".thrive-shortcode-content").each((function(t,i){var n=TVE.inner_$(i),a=n.attr("data-shortcode"),s=TVE.displayTestimonials.testimonial_shortcodes[e],o=s?s[a]:"",l=TVE.inner_$(o);if(l.length){var r=l.text();"tvo_testimonial_content"===n.attr("data-shortcode")&&(r=l.html()),0===r.length&&a.includes("testimonial")&&n.attr("data-attr-default")&&(r=n.attr("data-attr-default")),"tvo_testimonial_website"===n.attr("data-shortcode")?n.find("a").html(r).attr("href",r):n.html(r)}l.remove()}))},"tcb.display_testimonials_article.sync":function(t){["masonry","carousel"].includes(TVE.PostList.utils.readValue(t,"type"))&&setTimeout((function(){TVE.PostList.layout.applyLayout(t)}),100)},"tcb.element.focus":function(t){var e=t.closest(TVE.identifier("article"));if(e.length){var i=TVE.identifier(TVE._type(t)),n=e.find(i).index(t);-1!==n&&e.closest(TVE.identifier("display_testimonials")).find(TVE.identifier("article")).each((function(t,e){TVE.inner_$(e).find(i).eq(n).addClass(TVE.PostList.constants.SIMILAR_EDIT_CLASS)}))}if(t.is(".tve-inline-post-list-shortcode")){var a=t.find("a");TVE.froala.editor.$oel.find(".thrive-shortcode-content").trigger("mouseup"),a.length&&TVE.froala.force_focus(TVE.froala.editor.$oel.find("a"),!0),t.removeClass("tve-inline-post-list-shortcode")}},"tcb.focus.clear":function(){TVE.inner.$body.find(".".concat(TVE.PostList.constants.SIMILAR_EDIT_CLASS)).removeClass(TVE.PostList.constants.SIMILAR_EDIT_CLASS)}};t.exports={actions:a,filters:{}}},5373:t=>{t.exports={ITEMS_PER_PAGE:10}},3911:(t,e,i)=>{function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var a=i(9489),s={},o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i;return e=t,i=[{key:"getTestimonials",value:function(){var t,e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return i&&i.length?t=i.every((function(t){return void 0!==s[t]})):e=i&&i.length?JSON.stringify(i):"".concat(l,"-").concat(n,"-").concat(JSON.stringify(o)),new Promise((function(r){void 0!==t&&t?r(a.deepCopy({items:i.map((function(t){return s[t]}))})):void 0!==e&&void 0!==s[e]?r(a.deepCopy(s[e])):TVE.$.ajax({url:TVE.CONST.routes.base+"/display-testimonials/testimonials",data:{items_per_page:n,values:i,filters:o,page:l},headers:{"X-WP-Nonce":TVE.CONST.rest_nonce}}).done((function(t){s[e]=t,t.items&&t.items.length&&t.items.forEach((function(t){return s[t.ID]=t})),r(a.deepCopy(t))}))}))}},{key:"getTestimonialCount",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=JSON.stringify(t);return new Promise((function(i){void 0!==s[e]?i(s[e]):TVE.$.ajax({url:TVE.CONST.routes.base+"/display-testimonials/testimonials-count",data:{filters:t},headers:{"X-WP-Nonce":TVE.CONST.rest_nonce}}).done((function(t){s[e]=t,i(t)}))}))}},{key:"getTags",value:function(){return new Promise((function(t){void 0!==TVE.displayTestimonials.allTags?t(a.deepCopy(TVE.displayTestimonials.allTags)):TVE.$.ajax({url:TVE.CONST.routes.base+"/display-testimonials/tags",headers:{"X-WP-Nonce":TVE.CONST.rest_nonce}}).done((function(e){TVE.displayTestimonials.allTags=e,t(a.deepCopy(TVE.displayTestimonials.allTags))}))}))}},{key:"getSets",value:function(){return TVE.displayTestimonials.sets}},{key:"updateSetCache",value:function(t){TVE.displayTestimonials.sets=t}}],null&&n(e.prototype,null),i&&n(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.exports=o},797:t=>{t.exports=TVE.Views.Base.base_view.extend({template:"tve-display-testimonials/modal/tag-item",tagName:"li",tagCheckboxChanged:function(t){var e;"checkbox"===t.target.type?(e=t.target,this.model.set("selected",e.checked?1:0)):(e=t.target.closest("li").getElementsByTagName("input"))[0].click()}})},499:(t,e,i)=>{var n=i(797);t.exports=TVE.Views.Base.base_view.extend({beforeInitialize:function(t){this.collection=t.collection},afterRender:function(){var t=this;this.$el.empty(),this.collection.each((function(e){return t.$el.append(new n({model:e}).$el)}))}})},9706:(t,e,i)=>{var n=i(3911),a=i(499),s=Backbone.Collection.extend({model:Backbone.Model}),o=i(1090),l=i(4443),r=i(9489);t.exports=TVE.Views.Base.base_view.extend({template:"tve-display-testimonials/modal/pages/dynamic",beforeInitialize:function(t){this.dataModel=t.dataModel,this.setCollection=t.setCollection,this.dataModel.set("type","dynamic"),this.listenTo(this.dataModel,"change:set_status",this.render)},afterRender:function(){var t=this;this.collection=new s([]),this.listenTo(this.collection,"change:selected",(function(){t.dataModel.set("tags",t.getSelectedTagIds()),t.updateCounter()})),this.$tagList=this.$(".thrive-display-testimonials-tags-list"),r.toggleLoading(this.$tagList),n.getTags().then((function(e){if(e.length){var i=t.dataModel.getItemIds();i.length&&e.forEach((function(t){return t.selected=i.includes(parseInt(t.value))?1:0})),t.collection.reset(e),new a({el:t.$tagList[0],collection:t.collection}),t.updateCounter()}else t.$tagList.find(".no-tags-message").show();r.toggleLoading(t.$tagList,!1)})),this.initializeNav(),this.initializeOrderingOptions(),this.toggleActionButtonsAvailability()},updateCounter:function(){var t=this,e=this.dataModel.getItemIds();this.toggleListLoader(),n.getTestimonialCount({tags:e.toString()}).then((function(e){t.$(".dynamic-number").text(e),t.dataModel.set("dynamic-set-item-count",e),t.toggleListLoader(!1),t.toggleActionButtonsAvailability(0===e)}))},initializeNav:function(){var t=this;new o({el:this.$(".thrive-display-testimonials-set-selector.dynamic")[0],dataModel:this.dataModel,selectedValue:this.dataModel.getSetId()?this.dataModel.getSetId():"dynamic",selectCallback:function(){return t.clear()},setCollection:this.setCollection})},initializeOrderingOptions:function(){this.orderOptionsView&&this.orderOptionsView.remove(),this.orderOptionsView=new l({el:this.$(".dynamic-order")[0],dataModel:this.dataModel,typeList:[{label:"Date Published",value:"date"},{label:"Date Modified",value:"modified"},{label:"Title",value:"title"},{label:"Author",value:"author"},{label:"Random",value:"rand"}],placeholderText:"Arrange results"})},load:function(){this.isValid()&&this.dataModel.load()},goBackToSplash:function(){this.clear(),this.dataModel.setPage("splash")},clear:function(){this.dataModel.clearData(),this.remove(),this.orderOptionsView&&this.orderOptionsView.remove()},getSelectedTagIds:function(){return this.collection.filter((function(t){return 1===t.get("selected")})).map((function(t){return parseInt(t.get("value"))}))},isValid:function(){return this.dataModel.getItemIds().length>0},switchToEditMode:function(){this.dataModel.set("set_status","edit")},openSetPage:function(){this.isValid()&&(this.remove(),this.dataModel.setPage("set",this.dataModel.getSetId()))},updateSet:function(){var t=this;this.setCollection.get(this.dataModel.getSetId()).set("count",this.dataModel.get("dynamic-set-item-count")).setItems(this.getSelectedTagIds()).save(null,{wait:!0,success:function(){TVE.page_message("Testimonial set updated."),t.dataModel.set("set_status","view")},error:function(){return TVE.page_message("Error on updating the testimonial set.",!0)}})},toggleListLoader:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];r.toggleLoadingSpinner(this.$(".dynamic-counter-container"),".dynamic-counter","",t)},toggleActionButtonsAvailability:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.dataModel.getItemIds(),i=e&&0===e.length;this.$('[data-fn="openSetPage"], [data-fn="load"]').toggleClass("tcb-disabled",i||t),this.$(".dynamic-counter").toggle(!i)}})},9193:(t,e,i)=>{var n=i(1384),a=i(3911),s=i(9489),o=i(9911),l={splash:i(1369),static:i(4710),dynamic:i(9706),set:i(8593)},r=Backbone.Collection.extend({model:i(3921)});t.exports=TVE.modal.base.extend({beforeInitialize:function(t){var e=this;this.cloudModalInstance=t.cloudModalInstance,this.canSwitchToTemplates=t.canSwitchToTemplates,this.dataModel=new n,this.setCollection=new r,this.listenTo(this.dataModel,"change:page",(function(t){return e.renderPage(t.get("page"))})).listenTo(this.setCollection,"add remove change update",(function(){return a.updateSetCache(e.setCollection.toArray())})).listenTo(this.dataModel,"start-loading",(function(){return s.toggleLoading(e.$(".thrive-display-testimonials-inner"))})).listenTo(this.dataModel,"finish-loading",(function(){s.toggleLoading(e.$(".thrive-display-testimonials-inner"),!1),e.close()})),this.setCollection.reset(a.getSets())},backToTemplates:function(){this.close(),TVE.ActiveElement.attr("data-ct","display_testimonials-".concat(TVE.ActiveElement.attr("data-cloud-template"))),this.cloudModalInstance.open({element:TVE.ActiveElement})},afterInitialize:function(){this.$el.on("click",(function(t){TVE.do_action("tvo.display_testimonial.modal_clicked",t)}))},before_open:function(){var t=TVE.PostList.utils.readQueryFromElement(),e=t.set_id,i=void 0!==e;if(this.dataModel.setPage("splash"),i||void 0!==t.post__in||void 0!==t.tax_query)if(i){var n=this.setCollection.get(e);void 0!==n&&this.initializeExistingData(n.getType(),n.getItems(),n.getOrdering(),e)}else t=o.parseQuery(t),this.initializeExistingData(t.type,t.items,t.ordering);var a=TVE.ActiveElement.attr("data-cloud-template");a&&this.dataModel.set("template",a)},renderPage:function(){var t=this.dataModel.getPage();this.$("#thrive-display-testimonials").removeClass(["splash","static","dynamic","set"]).addClass(t).html(new l[t]({dataModel:this.dataModel,setCollection:this.setCollection,canSwitchToTemplates:this.canSwitchToTemplates}).$el.addClass("thrive-display-testimonials-inner"))},initializeExistingData:function(t,e,i,n){this.dataModel.initializeData(t,i,e).set("status","reorder",{silent:!0}),void 0!==n&&this.dataModel.set("set_status","view",{silent:!0}),this.dataModel.setPage(t,n)},destroy:function(){this.stopListening(),this.undelegateEvents(),this.$el.off()},handle_keyup:function(){}})},1384:(t,e,i)=>{var n=i(9489),a=i(9911);t.exports=Backbone.Model.extend({setPage:function(t,e){"static"===t&&void 0!==e&&this.set("status","reorder",{silent:!0}),this.set({set_id:e,page:t},{silent:!0}).trigger("change:page",this)},getPage:function(){return this.get("page")},viewSet:function(t){this.initializeSetData(t).set("set_status","view",{silent:!0}).setPage(t.getType(),t.get("id"))},editSet:function(t){this.initializeSetData(t).set("set_status","edit",{silent:!0}).setPage(t.getType(),t.get("id"))},initializeSetData:function(t){return this.initializeData(t.getType(),t.getOrdering(),t.getItems()),this},initializeData:function(t,e,i){return this.set({type:t,ordering:e},{silent:!0}).preselectItems(i),this},getSetId:function(){return this.get("set_id")},getStatus:function(){return this.get("status")},getSetStatus:function(){return this.get("set_status")},isSelectMode:function(){return"select"===this.getStatus()},isReorderMode:function(){return"reorder"===this.getStatus()},isViewMode:function(){return"view"===this.getSetStatus()},isEditMode:function(){return"edit"===this.getSetStatus()},getOrderingOptions:function(t){var e=this.get("ordering");return e||(e=n.getDefaultOrderingOptions(this.isStatic()),this.set("ordering",e,{silent:!0})),t?e[t]:e},setOrderingOption:function(t,e){var i=this.getOrderingOptions();i[t]=e,this.set("ordering",i,{silent:!0}).trigger("change:ordering",this)},getItemIds:function(){var t;if(this.isStatic()){var e=this.get("preselected_ids");if(void 0===e){var i=this.getSelectedCollection();t=i?i.map((function(t){return t.get("ID")})):[]}else t=e}else t=this.getSelectedTags();return t},preselectItems:function(t){this.set(this.isStatic()?"preselected_ids":"tags",t)},isStatic:function(){return"static"===this.get("type")},getSelectedCollection:function(){return this.get("selected_collection")},getSelectedTags:function(){return this.get("tags")?this.get("tags").map((function(t){return parseInt(t)})):[]},getCount:function(){return this.isStatic()?this.getItemIds().length:this.get("dynamic-set-item-count")},clearData:function(){var t=this.get("template");this.clear({silent:!0}).set("template",t)},load:function(){var t=this;this.trigger("start-loading");var e=a.computeQuery(this.getItemIds(),this.isStatic(),this.getOrderingOptions(),this.getSetId()),i=this.get("template");i?a.fetchCloudTemplate(i,e).then((function(){t.trigger("finish-loading"),t.set("template",null)})):a.applyQuery(e).then((function(e){a.applyQueryCallback(e),t.trigger("finish-loading")}))}})},3921:(t,e,i)=>{var n=i(9489);t.exports=Backbone.Model.extend({idAttribute:"id",urlRoot:TVE.CONST.routes.base+"/display-testimonials/sets",getType:function(){return this.get("type")},getItems:function(){var t=this.get(this.isStatic()?"testimonials":"tags");return t?t.map((function(t){return parseInt(t)})):[]},setItems:function(t){return this.set(this.isStatic()?"testimonials":"tags",t),this},getOrdering:function(){return this.get("ordering")?this.get("ordering"):n.getDefaultOrderingOptions(this.isStatic())},isStatic:function(){return"static"===this.getType()},getCount:function(){return this.get("count")?this.get("count"):0},sync:function(t,e,i){(i=i||{}).cache=!1;var n=i.beforeSend;return i.beforeSend=function(t){if(t.setRequestHeader("X-WP-Nonce",TVE.CONST.rest_nonce),"function"==typeof n)return n.apply(this,arguments)},Backbone.sync(t,e,i)}})},9353:(t,e,i)=>{t.exports=Backbone.Collection.extend({comparator:"order",model:i(4650)})},4650:t=>{t.exports=Backbone.Model.extend({idAttribute:"ID",urlRoot:"",defaults:{order:0}})},1090:(t,e,i)=>{function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var a=i(9357);t.exports=TVE.Views.Base.base_view.extend({afterInitialize:function(t){var e,i=this;this.selectedValue=t.selectedValue,this.dataModel=t.dataModel,this.selectCallback=t.selectCallback,this.setCollection=t.setCollection,new a({el:this.$el[0],model:new Backbone.Model({list:[{label:"Specific testimonials",value:"static"},{label:"Dynamic list",value:"dynamic"},{label:"Existing display set",value:"set",disabled:1}].concat((e=this.parseSetOptions(),function(t){if(Array.isArray(t))return n(t)}(e)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return n(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(t,e):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),selected:this.selectedValue}),onSelect:function(t){i.selectCallback(),isNaN(t)?i.dataModel.setPage(t):i.dataModel.viewSet(i.setCollection.get(t))}})},parseSetOptions:function(){return this.setCollection.map((function(t){return{value:t.get("id"),label:t.get("label"),type:t.getType(),beforeContent:'<span class="icon '.concat(t.getType(),'"></span>'),isSubOption:!0}}))}})},4443:(t,e,i)=>{var n=i(9357);t.exports=TVE.Views.Base.base_view.extend({template:"tve-display-testimonials/modal/order-options",beforeInitialize:function(t){var e=this;this.dataModel=t.dataModel,this.list=t.typeList,this.onTypeSelect=t.onTypeSelect,this.onDirectionSelect=t.onDirectionSelect,this.placeholderText=t.placeholderText,this.listenTo(this.dataModel,"change:ordering",(function(t){if(t.isStatic()){var i=t.getOrderingOptions("type");"manual"===i&&(e.typeSelect.setValue(i),e.onTypeSelect(i))}}))},afterRender:function(){var t=this;this.typeSelect=new n({el:this.$(".type-select"),model:new Backbone.Model({list:this.list,placeholderText:this.placeholderText?this.placeholderText:"",selected:this.dataModel.getOrderingOptions("type"),className:"no-search small"}),onSelect:function(e){t.dataModel.setOrderingOption("type",e),"function"==typeof t.onTypeSelect&&t.onTypeSelect(e)}}),new n({el:this.$(".direction-select"),model:new Backbone.Model({list:[{label:"Ascending",value:"ASC"},{label:"Descending",value:"DESC"}],placeholderText:"Sort",selected:this.dataModel.getOrderingOptions("direction"),className:"no-search small"}),onSelect:function(e){t.dataModel.setOrderingOption("direction",e),"function"==typeof t.onDirectionSelect&&t.onDirectionSelect(e)}});var e=TVE.ActiveElement.attr("data-pagination-type"),i=void 0!==e&&"none"!==e,a=this.$(".input-container.offset"),s=a.find(".starting-input");a.toggleClass("disabled-container",i),s.toggleClass("tcb-disabled",i),i?a.attr("data-tooltip","Not available while pagination is enabled"):a.removeAttr("data-tooltip")},onOrderInputChange:function(t){var e=t.target.dataset.type,i="offset"===e?0:1,n=parseFloat(t.target.value);(n<i||n>1e3||!Number.isInteger(n))&&(n=this.dataModel.getOrderingOptions("number_of_items"),TVE.$(t.target).val(parseInt(n))),this.dataModel.setOrderingOption(e,n)},toggleVisibility:function(t){this.$(".direction-select, .display-input, .starting-input, .order-text").toggleClass("tcb-hidden","manual"===t)}})},9357:t=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}t.exports=TVE.Views.Base.base_view.extend({template:"tve-display-testimonials/modal/select",beforeInitialize:function(t){var e=this;"function"==typeof t.onSelect&&(this.onSelect=t.onSelect.bind(this)),TVE.add_action("tvo.display_testimonial.modal_clicked",(function(t){0===e.$(t.target).length&&"toggleSetSelectorDropdown"!==t.target.getAttribute("data-fn")&&e.close()})),this.listenTo(this.model,"change:list",this.render)},afterRender:function(){this.$defaultValue=this.$(".default-value");var t=this.$("ul");_.each(this.model.get("list"),(function(e){var i="".concat(e.disabled?"disabled":"click").concat(e.isSubOption?" sub-option":"");t.append('<li class="'.concat(i,'" data-fn="setValue" data-value="').concat(e.value,'">').concat(e.beforeContent?e.beforeContent+" ":"").concat(e.label,"</li>"))}));var e=this.model.get("selected");void 0!==e&&e?this.setValue(e):this.model.get("placeholderText").length&&this.setPlaceholder()},setPlaceholder:function(){this.$el.addClass("is-placeholder"),this.$defaultValue.removeAttr("data-value").html(this.model.get("placeholderText"))},selectToggle:function(){this.isOpen()||this.$el.closest(".tcb-modal-content").find(".tvo-display-testimonials-select").removeClass("active"),this.$el.toggleClass("active")},setValue:function(t){this.$el.removeClass("is-placeholder");var i="";if("string"==typeof t||"number"==typeof t)i=t;else{var n=t.currentTarget;if(n.classList.contains("active"))return void this.close();i=n.dataset.value}var a=this.$("ul li").removeClass("active").filter('[data-value="'.concat(i,'"]')).addClass("active").text();this.$el.removeClass("active").find(".default-value").attr("data-value",i).html(a),"object"===e(t)&&this.onSelect(i,a,t)},getValue:function(){return this.$defaultValue.attr("data-value")},open:function(){this.$el.addClass("active")},close:function(){this.$el.removeClass("active")},isOpen:function(){return this.$el.hasClass("active")},onSelect:function(){},setList:function(t){this.model.set("list",t).trigger("change:list")}})},1217:t=>{var e=!1;t.exports=TVE.Views.Base.base_view.extend({template:"tve-display-testimonials/modal/set-item",tagName:"li",className:"set-item",beforeInitialize:function(t){this.dataModel=t.dataModel,this.listenTo(this.model,"destroy",this.remove),this.listenTo(this.model,"change:label",this.onLabelChange)},afterRender:function(){this.$el.attr({"data-id":this.model.get("id"),"data-type":this.model.getType()})},loadSet:function(){this.dataModel.initializeSetData(this.model).set("set_id",this.model.get("id"),{silent:!0}).load()},viewSet:function(){this.$el.parents("body").find(".tvd-material-tooltip").removeClass("show"),this.dataModel.viewSet(this.model)},editSet:function(){this.dataModel.editSet(this.model)},toggleDeleteSet:function(){this.$el.toggleClass("delete-overlay")},deleteSet:function(){this.model.destroy({success:function(){return TVE.page_message("Testimonial set deleted!")},error:function(){return TVE.page_message("Testimonial set deletion failed.",!0)}})},showRename:function(t,e){var i=TVE.$(e).siblings(".set-label"),n=i.parent(".set-name-container");0===i.find("input").length&&i.html('<input class="keydown blur" data-fn="renameSet" value="'.concat(this.model.get("label"),'">')).find("input").focus(),n.addClass("label-edit-mode")},renameSet:function(t){if("keydown"!==t.type||(e=27===t.keyCode,13===t.keyCode)){if(e)return e=!1,void this.onLabelChange();var i=this.$("input").val().trim();i!==this.model.get("label")&&i&&0!==i.length?this.model.set("label",i).save(null,{wait:!0,success:function(){return TVE.page_message("Testimonial set renamed.")},error:function(){return TVE.page_message("Error on renaming the testimonial set.",!0)}}):this.onLabelChange()}else 27===t.keyCode&&this.onLabelChange()},onLabelChange:function(){this.$(".set-label").html(this.model.get("label")),this.$(".label-edit-mode").removeClass("label-edit-mode")}})},594:(t,e,i)=>{var n=i(1217);t.exports=TVE.Views.Base.base_view.extend({beforeInitialize:function(t){this.collection=t.collection,this.dataModel=t.dataModel},afterRender:function(){var t=this;this.$el.empty(),this.collection.each((function(e){return t.$el.append(new n({model:e,dataModel:t.dataModel}).$el)}))}})},8593:(t,e,i)=>{function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var a=i(594),s=i(3921);t.exports=TVE.Views.Base.base_view.extend({template:"tve-display-testimonials/modal/pages/set",beforeInitialize:function(t){this.dataModel=t.dataModel,this.setCollection=t.setCollection},afterInitialize:function(){var t=0===this.setCollection.length;this.$(".descriptive-text.existing-sets").toggleClass("tcb-hidden",t),this.$(".thrive-display-testimonials-sets-container").toggleClass("empty",t),t||new a({el:this.$(".thrive-display-testimonials-set-list")[0],collection:this.setCollection,dataModel:this.dataModel})},onInputChange:function(t){var e=t.target.value;this.dataModel.set("label",e)},saveNewSet:function(){var t=this;new s(this.getDataToSave()).save(null,{wait:!0,success:function(e){e.unset("ids"),t.setCollection.add(e),t.clear(),TVE.page_message("Testimonial set added."),t.dataModel.viewSet(e)},error:function(){return TVE.page_message("Error on adding the testimonial set.",!0)}})},overwriteSet:function(t){var e=this,i=t.target.closest("li").dataset.id,n=this.setCollection.get(i),a=this.getDataToSave();a.label=n.get("label"),n.save(a,{wait:!0,success:function(){TVE.page_message("Testimonial set overwritten."),e.clear(),e.dataModel.viewSet(n)},error:function(){return TVE.page_message("Error on overwriting the testimonial set.",!0)}})},getDataToSave:function(){var t,e=this.dataModel.get("type"),i="static"===e;return n(t={label:this.dataModel.get("label"),type:e},i?"testimonials":"tags",this.dataModel.getItemIds()),n(t,"ordering",this.dataModel.getOrderingOptions()),t},goBack:function(){this.clear(),this.dataModel.set("preselected_ids",this.dataModel.getItemIds()).setPage(this.dataModel.get("type"),this.dataModel.getSetId())},clear:function(){this.dataModel.unset("label"),this.remove()}})},1369:(t,e,i)=>{var n=i(594);t.exports=TVE.Views.Base.base_view.extend({template:"tve-display-testimonials/modal/pages/splash",beforeInitialize:function(t){var e=this;this.dataModel=t.dataModel,this.setCollection=t.setCollection,this.canSwitchToTemplates=t.canSwitchToTemplates,this.listenTo(this.setCollection,"destroy",(function(){e.updateSetCounts()}))},afterRender:function(){TVE.displayTestimonials.has_at_least_one_testimonial?(this.updateSetCounts(),this.$(".thrive-display-testimonials-action-buttons").toggle(this.canSwitchToTemplates)):(this.$(".thrive-display-testimonials-content").hide(),this.$(".thrive-display-testimonials-no-testimonials").show())},openStaticList:function(){this.dataModel.setPage("static")},openDynamicList:function(){this.dataModel.setPage("dynamic")},openExistingSet:function(){this.$(".thrive-display-testimonials-splash-content").addClass("opened-set-container"),new n({el:this.$(".thrive-display-testimonials-set-list")[0],collection:this.setCollection,dataModel:this.dataModel})},updateSetCounts:function(){var t=this,e=0===this.setCollection.length;this.$(".descriptive-text.set-text").toggleClass("tcb-hidden",e),this.$(".thrive-display-testimonials-sets-container").toggleClass("empty",e),e||["static","dynamic"].forEach((function(e){return t.$(".".concat(e,"-count")).html(t.setCollection.where({type:e}).length).removeClass("loading small")}))}})},9312:(t,e,i)=>{var n=i(6205),a=i(9357);t.exports=TVE.Views.Base.base_view.extend({template:"tve-display-testimonials/modal/filters",search:_.debounce((function(t){this.model.set("search",t.target.value)}),200),afterInitialize:function(){var t=this;new a({el:this.$(".display-testimonials-select.title-filter")[0],model:new Backbone.Model({list:[{label:"With a title",value:1},{label:"Without a title",value:0},{label:"Any",value:""}],placeholderText:"Title filter",selected:this.model.get("title")}),onSelect:function(e){return t.model.set("title",e)}}),new a({el:this.$(".display-testimonials-select.image-filter")[0],model:new Backbone.Model({list:[{label:"With an image",value:1},{label:"Without an image",value:0},{label:"Any",value:""}],placeholderText:"Image filter",selected:this.model.get("image")}),onSelect:function(e){return t.model.set("image",e)}}),n.initSelect(this.$("select"),(function(e){return t.model.set("tags",e)}))},onSelect:function(t){this.model.set(t.target.dataset.type,t.target.value)},onCheckboxChange:function(t){var e=this.model.get("word_count")||{};e.enabled=t.target.checked?1:0,this.model.set("word_count",e,{silent:!0}),(e.from||e.to)&&this.model.trigger("change",this.model)},onInputChange:_.throttle((function(t){var e=t.target.dataset.type,i=this.model.get("word_count")||{},n=parseFloat(t.target.value);(n<0||n>1e3||!Number.isInteger(n))&&(n=0,TVE.$(t.target).val(parseInt(n))),i[e]=n,this.model.set("word_count",i,{silent:!0}),i.enabled&&this.model.trigger("change",this.model)}),1e3)})},2754:t=>{t.exports=TVE.Views.Base.base_view.extend({template:"tve-display-testimonials/modal/testimonial-item",tagName:"li",beforeInitialize:function(t){this.dataModel=t.dataModel,this.listenTo(this.model,"change:selected",this.render).listenTo(this.model,"remove",this.remove)},afterRender:function(){this.$el.toggleClass("is-selected",!!this.model.get("selected")&&this.dataModel.isSelectMode()).attr("data-id",this.model.get("ID"))},getTagList:function(){var t="";return this.model.get("tags").forEach((function(e){t+='<span class="testimonial-tag">'.concat(e,"</span>")})),t},checkboxChanged:function(t){this.model.set("selected",t.target.checked?1:0)},isSelectMode:function(){return this.dataModel.isSelectMode()},isReorderMode:function(){return this.dataModel.isReorderMode()}})},9092:(t,e,i)=>{var n=i(2754);t.exports=TVE.Views.Base.base_view.extend({beforeInitialize:function(t){this.displayedCollection=t.collection,this.dataModel=t.dataModel,this.listenTo(this.displayedCollection,"reset remove",this.render)},afterRender:function(){this.dataModel.isSelectMode()||this.displayedCollection.sort(),this.renderItems()},renderItems:function(){var t=this;this.$el.empty();var e=this.dataModel.isReorderMode();this.displayedCollection.each((function(i){e&&!i.get("selected")||t.$el.append(new n({model:i,dataModel:t.dataModel}).$el)})),e&&!this.dataModel.isViewMode()&&this.$el.sortable({axis:"y",handle:".action-col",start:function(t,e){e.item.addClass("is-dragged")},stop:function(t,e){e.item.removeClass("is-dragged")},update:function(){"manual"!==t.dataModel.getOrderingOptions("type")&&t.dataModel.setOrderingOption("type","manual"),t.sortItems(t.$el.sortable("toArray",{attribute:"data-id"}))}})},sortItems:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t){var i=this.dataModel.getSelectedCollection(),n=0;t.forEach((function(t){return i.get(t).set("order",n++)})),i.sort(),this.updateDisplayedCollection(),this.dataModel.set("maximum_order",n),e&&this.renderItems()}},removeFromSelection:function(t){this.removeItem(t.target.closest("li").dataset.id)},removeItem:function(t){var e=this.dataModel.getSelectedCollection();e.remove(e.get(t)),this.dataModel.trigger("change:selected_collection"),this.updateDisplayedCollection()},updateDisplayedCollection:function(){if(this.displayedCollection=this.dataModel.getSelectedCollection().clone(),this.dataModel.isReorderMode()&&0===this.displayedCollection.length){var t=this.$el.parents("#thrive-display-testimonials.static");this.$el.hide(),t.find(".deleted-testimonials").show(),t.find('button[data-fn="openSetPage"], button[data-fn="load"], button[data-fn="updateSet"]').tcbAddClass("tcb-disabled")}}})},4710:(t,e,i)=>{var n=i(3911),a=i(9489),s=i(9353),o=i(5373);t.exports=TVE.Views.Base.base_view.extend({template:"tve-display-testimonials/modal/pages/static",beforeInitialize:function(t){var e=this;this.dataModel=t.dataModel,this.setCollection=t.setCollection,this.fetchedData=0,this.itemsPerPage=o.ITEMS_PER_PAGE,this.dataModel.get("status")||this.dataModel.set("status","select");var i=new s([]);this.dataModel.set("selected_collection",i),this.setDisplayedCollection(i),this.listenTo(this.dataModel,"change:status change:set_status",this.render).listenTo(this.dataModel,"page-changed",(function(t){return e.fetchTestimonialPage(null,t)})).listenTo(this.dataModel,"items-per-page-changed",(function(t){e.itemsPerPage=t,e.fetchTestimonialPage((function(t){return e.initializePagination(t.total)}))})).listenTo(this.displayedCollection,"change:selected",(function(t,i){var n=e.dataModel.get("maximum_order");e.getSelectedCollection()[i?"add":"remove"](t,{silent:!0}),i&&n&&t.set("order",n),e.toggleOrderButtonAvailability(),e.dataModel.trigger("change:selected_collection")}))},afterRender:function(){var t=this;this.dataModel.set("type","static"),this.$listContainer=this.$(".thrive-display-testimonials-list-container"),this.$list=this.$listContainer.find(".thrive-display-testimonials-static-list"),this.$pagination=this.$(".testimonials-pagination-container"),this.initializeNav(),this.initializeOptions(),this.dataModel.isSelectMode()?this.initializeFilters():this.initializeOrderingOptions(),this.list=new(i(9092))({el:this.$list[0],collection:this.displayedCollection,dataModel:this.dataModel}),this.initializeCollection(),this.dataModel.isSelectMode()&&!this.dataModel.get("set_id")&&n.getTestimonialCount(this.filters).then((function(e){t.initializePagination(e),t.$pagination.toggleClass("tcb-hidden",!1)}))},initializeCollection:function(){var t=this,e=this.dataModel.get("preselected_ids");this.fetchedData?(0===this.displayedCollection.length&&this.showNoTestimonialsMessage(),this.toggleOrderButtonAvailability()):(this.fetchedData=1,this.toggleListLoader(),this.$pagination.toggleClass("tcb-hidden",!0),n.getTestimonials(e||[],this.itemsPerPage).then((function(i){var n=i.items;e&&n.forEach((function(t){return t.selected=1})),t.setDisplayedCollection(n),e&&t.dataModel.unset("preselected_ids").set("selected_collection",t.displayedCollection.clone()),t.dataModel.trigger("refresh-count"),t.toggleListLoader(!1),t.$pagination.toggleClass("tcb-hidden",!1),t.toggleOrderButtonAvailability(),0===n.length&&t.showNoTestimonialsMessage()})))},showNoTestimonialsMessage:function(){this.$('button[data-fn="load"], button[data-fn="openSetPage"], button[data-fn="updateSet"]').tcbAddClass("tcb-disabled"),this.$(".thrive-display-testimonials-static-list").hide(),this.$(".no-testimonials").show()},toggleOrderButtonAvailability:function(){var t=this.getSelectedCollection();this.$('[data-fn="switchToReorderingMode"]').toggleClass("tcb-disabled",t&&0===t.length)},initializeNav:function(){var t=this;this.nav&&this.nav.remove(),this.nav=new(i(1090))({el:this.$(".thrive-display-testimonials-set-selector.static")[0],dataModel:this.dataModel,selectedValue:this.dataModel.get("set_id")?this.dataModel.get("set_id"):"static",selectCallback:function(){return t.clear()},setCollection:this.setCollection})},initializeOptions:function(){var t=this;this.optionsView&&this.optionsView.remove(),this.optionsView=new(i(4173))({el:this.$(".thrive-display-testimonials-options")[0],dataModel:this.dataModel}),this.listenTo(this.dataModel,"change:selected_all",(function(e){var i=e.get("selected_all");t.displayedCollection.each((function(t){return t.set("selected",i)}))}))},initializePagination:function(t){this.paginationView&&this.paginationView.remove(),0!==t&&(this.paginationView=new(i(2635))({el:TVE.$('<span class="testimonials-pagination"></span>').appendTo(this.$pagination)[0],dataModel:this.dataModel,itemsPerPage:this.itemsPerPage,totalItems:t}))},initializeFilters:function(){var t=this;this.filtersView&&this.filtersView.remove();var e=new Backbone.Model;this.filters={},this.$filterContainer=this.$(".filter-container"),this.filtersView=new(i(9312))({el:this.$filterContainer[0],model:e}),this.listenTo(e,"change",(function(e){var i=t.$(".no-results"),n=t.$(".first-group");t.filters=e.toJSON(),t.fetchTestimonialPage((function(e){t.initializePagination(e.total),i.toggle(0===e.total),n.toggle(0!==e.total)}))}))},initializeOrderingOptions:function(){var t=this;this.orderOptionsView&&this.orderOptionsView.remove();var e=function(e){var i=a.deepCopy(t.dataModel.getItemIds());i.sort((function(t,i){return("ASC"===e?1:-1)*(t-i)})),t.list.sortItems(i,!0)};this.$orderContainer=this.$(".static-order-container"),this.orderOptionsView=new(i(4443))({el:this.$orderContainer[0],dataModel:this.dataModel,typeList:[{label:"Manual",value:"manual"},{label:"Date Published",value:"date"}],onTypeSelect:function(i){"date"===i&&e(t.dataModel.getOrderingOptions("direction")),t.orderOptionsView.toggleVisibility(i)},onDirectionSelect:e}),this.orderOptionsView.toggleVisibility(this.dataModel.getOrderingOptions("type"))},load:function(){this.isValid()&&this.dataModel.load()},switchToEditMode:function(){this.dataModel.set("set_status","edit")},switchToReorderingMode:function(){this.setDisplayedCollection(this.getSelectedCollection()),this.dataModel.set("status","reorder")},switchToSelectionMode:function(){var t=this;this.fetchTestimonialPage((function(){return t.dataModel.set("status","select")}))},goBackToSplash:function(){this.clear(),this.dataModel.setPage("splash")},clear:function(){this.dataModel.clearData(),this.optionsView.remove(),this.orderOptionsView&&this.orderOptionsView.remove(),this.remove()},openSetPage:function(){this.isValid()&&(this.remove(),this.dataModel.setPage("set",this.dataModel.getSetId()))},updateSet:function(){var t=this;this.setDisplayedCollection(this.getSelectedCollection());var e=this.setCollection.get(this.dataModel.get("set_id"));e.setItems(this.dataModel.getItemIds()).save(null,{wait:!0,success:function(i,n){e.set("count",n.count),TVE.page_message("Testimonial set updated."),t.dataModel.set("set_status","view")},error:function(){return TVE.page_message("Error on updating the testimonial set.",!0)}})},isValid:function(){return this.getSelectedCollection().length>0},getSelectedCollection:function(){return this.dataModel.getSelectedCollection()},fetchTestimonialPage:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.toggleListLoader(),n.getTestimonials([],this.itemsPerPage,this.filters,i).then((function(i){var n=t.dataModel.getItemIds(),a=i.items;a.forEach((function(t){return t.selected=n.includes(t.ID)?1:0})),t.setDisplayedCollection(a),t.toggleListLoader(!1),"function"==typeof e&&e(i)}))},setDisplayedCollection:function(t){this.displayedCollection||(this.displayedCollection=new s([])),this.displayedCollection.reset(t instanceof s?t.clone().models:t)},toggleListLoader:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];a.toggleLoadingSpinner(this.$listContainer,".first-group, .thrive-display-testimonials-inner-container",".no-results",t)},toggleFilters:function(){var t=!this.$filterContainer.hasClass("tcb-hidden"),e=this.$(".filter-toggler");this.$filterContainer.toggleClass("tcb-hidden",t),e.toggleClass("filled",!t)},toggleOrderOptions:function(){var t=!this.$orderContainer.hasClass("tcb-hidden"),e=this.$(".order-toggler");this.$orderContainer.toggleClass("tcb-hidden",t),e.toggleClass("filled",!t)},toggleSetSelectorDropdown:function(){this.nav.$el.find('[data-fn="selectToggle"]').trigger("click")}})},4173:t=>{t.exports=TVE.Views.Base.base_view.extend({template:"tve-display-testimonials/modal/static-options",beforeInitialize:function(t){this.dataModel=t.dataModel},afterInitialize:function(){this.listenTo(this.dataModel,"change:selected_collection refresh-count",this.render)},onSelectAllCheckboxChange:function(t){this.dataModel.set("selected_all",t.target.checked?1:0)}})},2635:(t,e,i)=>{var n=i(5373);t.exports=TVE.Views.Base.base_view.extend({template:"tve-display-testimonials/modal/pagination",beforeInitialize:function(t){this.currentPage=1,this.totalItems=t.totalItems,this.itemsPerPage=t.itemsPerPage,this.lastPage=Math.ceil(this.totalItems/this.itemsPerPage),this.dataModel=t.dataModel,this.listenTo(this.dataModel,"page-changed",this.render)},afterRender:function(){this.$('[data-fn="openPrevPage"]').toggle(this.currentPage>1),this.$('[data-fn="openNextPage"]').toggle(this.currentPage<this.lastPage),this.$('[data-fn="openFirstPage"]:not(.first-page-arrow)').toggle(this.currentPage>2),this.$('[data-fn="openLastPage"]:not(.last-page-arrow)').toggle(this.currentPage<this.lastPage-1),this.$(".pagination-left-dots").toggle(this.currentPage>3),this.$(".pagination-right-dots").toggle(this.currentPage<this.lastPage-2)},openPrevPage:function(){this.setPage(this.currentPage-1)},openNextPage:function(){this.setPage(this.currentPage+1)},openFirstPage:function(){this.setPage(1)},openLastPage:function(){this.setPage(this.lastPage)},setPage:function(t){return this.currentPage=t,this.triggerPageChange(t),this},triggerPageChange:function(t){this.dataModel.trigger("page-changed",t)},onInputChange:_.debounce((function(t){var e=parseFloat(t.target.value);(e<0||e>1e3||!Number.isInteger(e))&&(e=n.ITEMS_PER_PAGE,TVE.$(t.target).val(parseInt(e))),this.dataModel.trigger("items-per-page-changed",e)}),500)})},6205:t=>{function e(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function i(t){for(var i=1;i<arguments.length;i++){var a=null!=arguments[i]?arguments[i]:{};i%2?e(Object(a),!0).forEach((function(e){n(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):e(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var a=TVE.$.fn.select2.amd.require("select2/utils"),s=TVE.$.fn.select2.amd.require("select2/dropdown"),o=TVE.$.fn.select2.amd.require("select2/dropdown/search"),l=TVE.$.fn.select2.amd.require("select2/dropdown/attachBody"),r=a.Decorate(s,o),c=a.Decorate(r,l),d=TVE.Select2Utils,u={initSelect:function(t,e){var n=this;this.$select=t;var a=i({},d.getDefaultOptions({placeholder:"All tags",dropdownAdapter:c,onOpen:function(){TVE.$("body > .select2-container--open").addClass("tvo-tags-select").find("input").attr("placeholder","Search tags"),n.$select.parent().find(".select2-search__field").attr("disabled",1)}}));a.ajax=i(i({},a.ajax),{url:TVE.CONST.routes.base+"/display-testimonials/tags",data:function(t){return{search:t.term}},processResults:function(t){var e=[];return t.forEach((function(t){e.push({id:t.value,value:t.value,text:t.label})})),{results:e}}}),d.initSelect2(this.$select,a,(function(t){return n.selectCallback(t,e)}))},selectCallback:function(t,e){var i=TVE.$(t.target),n=i.val()?i.val().toString():"";u.refreshSelect2Visuals(n,TVE.$(t.target)),e(n)},refreshSelect2Visuals:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.$select,i=e.parent(),n=i.find(".select2-selection__rendered"),a=[];i.toggleClass("select-has-selection",t.length>0);var s=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return n.children(".select2-selection__choice".concat(t?":visible":""))},o=function(){return s(!0).toArray().map((function(t){return TVE.$(t).outerWidth(!0)})).reduce((function(t,e){return t+e}),0)};s().show();for(var l=n.width()-35-30;o()>l;){var r=s(!0).last();r.hide(),a.push(r.text().replace("",""))}a.length>0&&this.initializeTruncatedTooltip(a,n)},initializeTruncatedTooltip:function(t,e){e.find(".truncated-dot").remove(),TVE.$(".select2-truncated-values-tooltip").remove();var i=TVE.$('<li class="truncated-dot">+'.concat(t.length,"</li>")),n=TVE.$('<ul class="select2-truncated-values-tooltip"></ul>');e.append(i),i.on("mouseover",(function(){return n.css("visibility","visible")})).on("mouseleave",(function(){return n.css("visibility","hidden")})),t.forEach((function(t){return n.append("<li>".concat(t,"</li>"))})),TVE.$("body").append(n),n.css({top:i.offset().top+i.height()+15+"px",left:i.offset().left-90+"px",width:"150px"}),TVE.$("body")[0].style.setProperty("--custom-select-limit-dot-offset","".concat(98,"px"))},closeSelect2:function(){d.closeSelect2(this.$select)}};t.exports=u},9489:t=>{function e(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var i,n;return i=t,n=[{key:"toggleLoading",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.toggleClass("loading",e)}},{key:"toggleLoadingSpinner",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this[(n?"show":"hide")+"LoadingSpinner"](t,e,i)}},{key:"showLoadingSpinner",value:function(t,e,i){t.find(".loading-spinner-container").remove(),t.append(TVO_Front.tpl("loading-spinner")({text:"Looking for matching testimonials"})),i.length>0&&(e=e+", "+i),t.find(e).hide()}},{key:"hideLoadingSpinner",value:function(t,e){t.find(".loading-spinner-container").remove(),t.find(e).show()}},{key:"deepCopy",value:function(t){return JSON.parse(JSON.stringify(t))}},{key:"getDefaultOrderingOptions",value:function(t){return{type:t?"manual":"date",direction:"DESC",number_of_items:3,offset:0}}}],null&&e(i.prototype,null),n&&e(i,n),Object.defineProperty(i,"prototype",{writable:!1}),t}();t.exports=i},9911:(t,e,i)=>{var n=i(5522),a={applyQuery:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:TVE.ActiveElement;return new Promise((function(i){var n=e.attr("data-no_posts_text")||t.no_posts_text;e.addClass("tve-loading").attr("data-query",JSON.stringify(t).replace(/"/g,"'")).attr("data-no_posts_text",n),a.fetchTestimonials(t,e,(function(t){e.removeClass("tve-loading"),i(t)}))}))},fetchTestimonials:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:TVE.ActiveElement,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;TVE.$.ajax({url:TVE.CONST.routes.base+"/testimonials/html",headers:{"X-WP-Nonce":TVE.CONST.rest_nonce},method:"POST",data:{args:t,has_pagination:"none"===e.attr("data-pagination-type")?0:1},success:function(t){TVE.displayTestimonials.testimonial_shortcodes=Object.assign(TVE.displayTestimonials.testimonial_shortcodes,t.testimonials),"function"==typeof i&&i(t)},error:console.warn})},fetchExistingTestimonials:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:TVE.inner.$body;a.fetchTestimonials({post__in:a.getTestimonialIdsFromContent(t),posts_per_page:-1},t)},getTestimonialIdsFromContent:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:TVE.inner.$body;return _.uniq(t.find(".thrive-testimonial-wrapper").map((function(t,e){return parseInt(e.dataset.id)})))},applyQueryCallback:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:TVE.ActiveElement,i=[];_.each(t.testimonials,(function(t,e){i[parseInt(t.order)]=t})),e.toggleClass("empty-list",0===i.length),i.length&&(n.syncDisplayTestimonial(e.find(TVE.identifier("article")).first(),e,i),TVE.Components.display_testimonials.controls.NumberOfItems.update(e),TVE.Components.display_testimonials.$noResultsMessageTextArea.val(e.attr("data-no_posts_text")))},fetchCloudTemplate:function(t,e){return new Promise((function(i){TVE.ActiveElement.addClass("tve-loading"),TVE.$.ajax({url:"".concat(TVE.CONST.routes.base,"/testimonials/cloud"),headers:{"X-WP-Nonce":TVE.CONST.rest_nonce},method:"POST",data:{template:t,query:e},success:function(t){a.fetchExistingTestimonials(TVE.inner_$(t.content));var e=TVE.modal_open("display-testimonials","currentInstance");e.applyTo=TVE.ActiveElement,e.apply_cloud_template(t),i(t)},error:console.warn})}))},getShortcodeName:function(t){var e,i=TVE.ActiveElement,n=t.key,s=a.getArticleID(i),o=TVE.displayTestimonials.testimonial_shortcodes[s];if(!_.isEmpty(o)){var l=o[n],r=TVE.inner_$(l);r&&(e=r.text()),r.remove()}return e},getArticleID:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:TVE.ActiveElement;return parseInt(t.closest(TVE.identifier("article")).attr("data-id"))},computeQuery:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,a=TVE.PostList.utils.readQueryFromElement(),s=["post__in","tax_query","set_id","orderby","order","offset"],o=TVE.ActiveElement,l=o.attr("data-pagination-type")&&"none"!==o.attr("data-pagination-type");return l||s.push("posts_per_page"),s.forEach((function(t){delete a[t]})),void 0!==n?(a.set_id=n,a):(e?(a.post__in=t,a.orderby="manual"===i.type?"post__in":"date"):(a.tax_query=[{taxonomy:"tvo_tags",field:"term_id",terms:t}],a.orderby=i.type),a.order=i.direction,"manual"===i.type?l||(a.posts_per_page=a.post__in.length):(a.posts_per_page=i.number_of_items,l||(a.offset=i.offset)),a)},parseQuery:function(t){var e=t.post__in?"static":"dynamic",i="static"===e?t.post__in:t.tax_query[0].terms;return{type:e,ordering:{type:"post__in"===t.orderby?"manual":t.orderby,direction:t.order,number_of_items:t.posts_per_page,offset:t.offset?t.offset:0},items:i}},getDropzoneTarget:function(t){if(void 0!==TVE.FLAGS.$dragged_element)return t;if(TVE.main.EditMode.in_edit()&&TVE.main.EditMode.element()&&TVE.main.EditMode.element().is(TVE.identifier("display_testimonials"))){var e=TVE.main.EditMode.element().find(".thrive-testimonial-wrapper").first();t=e.length?e.children().last():t}return t},isInsideTestimonialsList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:TVE.ActiveElement;return t.closest(TVE.identifier("display_testimonials")).length>0},getDisplayTestimonialsSelector:function(t){var e=t.closest(TVE.identifier("display_testimonials"));return(e.attr("data-selector")?e.attr("data-selector"):'[data-css="'+TVE.CSS_Rule_Cache.uniq_id(e)+'"]'+TVE.identifier("display_testimonials"))+" "}};t.exports=a}},e={};function i(n){var a=e[n];if(void 0!==a)return a.exports;var s=e[n]={exports:{}};return t[n](s,s.exports,i),s.exports}(()=>{function t(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function e(e){for(var i=1;i<arguments.length;i++){var a=null!=arguments[i]?arguments[i]:{};i%2?t(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function a(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return s(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?s(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var o,l,r,c,d,u=window.TVE||{},h=!1;o=jQuery,l=["tvo_display","tvo_capture","tvo_capture_post","tvo_display_post"],r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.CONST.post.post_type;return l.includes(t)},c=function(t){var e=t.is(".thrv_lead_generation");if(e)try{var i,n=JSON.parse(t.attr("data-form-settings").replace(/__TCB_FORM__/g,""));e=void 0!==(null==n||null===(i=n.apis)||void 0===i?void 0:i.ovation)}catch(t){e=!1}return e},d=function(){u.main.sidebar_toggle_elements(Object.keys(u.Elements),!1),u.main.sidebar_toggle_elements(["text","image","button","columns","section","contentbox","logo","icon","divider"],!0)},o(window).on("tcb_main_ready",(function(){i(109),r()&&(h=!0,u.StorageManager.unset("tvo_block-"+u.CONST.post.ID)),u.add_filter("tve.allowed.empty.posts.type",(function(t){return[].concat(a(t),l)})),u.main.on("device_change",(function(){u.inner_$(".thrlider-slider").each((function(){u.inner_$(this).parents('[id*="thrlider"]').thrlider("redraw")}))})),o(u.main).on("tve-api-options-ovation.tcb",(function(t,e){var i,n,a=u.get_inputs_value(e.$container,".tve-api-extra");a.preventDelete=null===(i=u.ActiveElement)||void 0===i||null===(n=i.attr("data-ct"))||void 0===n?void 0:n.includes("capture_testimonials"),a.preventDeleteMessage="Thrive Ovation connection is mandatory for Ovation Capture forms",e.api.setConfig(a),e.api.set(a)})),u.add_filter("lg_hide_apis.lead_generation",(function(t,e){return"ovation"===e&&(t=!0),t})),u.main.on("tcb_auth_login",(function(t){TVO_Front.nonce=t.rest_nonce})),u.add_action("tve.save_post.success",(function(){u.StorageManager.set("tvo_block-"+u.CONST.post.ID,!0)})),u.add_filter("editor_loaded_callback",(function(){h&&(d(),u.Editor_Page.focus_element(u.Editor_Page.editor.children().first()))})),u.add_filter("tve.lg_fields.mapping_fields_api",(function(t,e){return"ovation"in e&&(t="ovation"),t})),u.add_filter("tve.lg_form.validated_apis",(function(t){return[].concat(a(t),["ovation"])})),u.add_filter("tve.cloud_templates.modal",(function(t,e){return c(e)&&(t="cloud-templates"),t}),11),u.add_filter("tve.cloud_templates.modal.options",(function(t){return c(t.element)&&(t.type="capture_testimonials_v2"),t})),u.add_filter("tcb.lg_api_model.ovation",(function(t){return t.splice(t.indexOf("ovation"),1)})),u.add_filter("tve.lg_field.set_type",(function(t,e){return t&&"question"===e&&u.ActiveElement&&c(u.ActiveElement)&&(t=!1),t})),u.add_filter("tve.lg_fields.default_field_name",(function(t,e,i){return"question"===e&&u.ActiveElement&&c(u.ActiveElement)&&(t="Testimonial ".concat(i>1?i:"").trim()),t})),u.add_filter("tcb.element_selected",(function(t){return t.is(u.identifier("capture_testimonials_v2"))&&t.attr("data-element-name","Capture testimonial"),t}),11),u.add_filter("tcb.lg_field.stripped_name",(function(t){return"question"===t&&u.ActiveElement&&c(u.ActiveElement)&&(t="textarea"),t})),u.add_filter("selectors_no_icons",(function(t){return r()&&(t+=",".concat(u.identifier("capture_testimonials_v2"),",").concat(u.identifier("display_testimonials"),",.tcb-elem-placeholder")),t})),u.add_filter("tcb.elem.type.info",(function(t,e){return e.is(u.identifier("capture_testimonials_v2"))&&(t="capture_testimonials_v2"),t})),u.add_filter("tcb.cloud_template_download_params",(function(t){var e;return"display_testimonials"===(null==t||null===(e=t.data)||void 0===e?void 0:e.type)&&(t.data.query=u.PostList.utils.readQueryFromElement()),t})),u.add_filter("tcb.cloud_templates.element_name",(function(t){var e;return null!==(e=u.ActiveElement)&&void 0!==e&&e.is(u.identifier("capture_testimonials_v2"))&&(t="Capture testimonial"),t})),u.add_filter("tcb.cloud_template.display_testimonials.allow_cache","__return_false"),u.add_action("tcb_after_cloud_template_css_inserted",(function(t){c(t)&&t.addClass(u.identifier("capture_testimonials_v2").replace(".",""))})),u.add_action("tcb.edit_mode.after_exit",(function(t){r()&&t.is("".concat(u.identifier("capture_testimonials_v2"),",").concat(u.identifier("display_testimonials")))&&d()})),u.add_filter("selectors_no_save",(function(t){return t+=",.thrv_tvo_capture_testimonials, .thrv_tvo_display_testimonials",r()&&(t+=",".concat(u.identifier("capture_testimonials_v2"),",").concat(u.identifier("display_testimonials"))),t})),u.add_filter("tcb.form.input.labels",(function(t){return e(e({},t),{role:"Role",website_url:"Website URL",title:"Title ",question:"Testimonial"})})),u.add_filter("should_have_width_on_float",(function(t){return t.push("thrv_tvo_capture_testimonials"),t})),u.TVO={captureSettingsModal:{},captureTemplateModal:{},displaySettingsModal:{},displayTemplateModal:{},defaults:{display:{template:"grid/default-template-grid",tags:[],testimonials:[],name:"",show_title:1,show_role:1,show_site:0,type:"display",max_testimonials:0},capture:{id:0,template:"default-template",type:"capture",name_label:"Full Name",title_label:"Testimonial Title",email_label:"Email",role_label:"Role",website_url_label:"Website URL",name_required:1,title_required:0,email_required:0,role_required:0,role_display:0,title_display:0,image_display:1,reCaptcha_option:0,on_success_option:"message",on_success:"Thanks for submitting your testimonial.",button_text:"Submit",questions:["What was your experience with our product like?"],placeholders:[""],questions_required:[1],tags:"",color_class:""}},config:{key:"__CONFIG_tvo_shortcode__",update:function(t,e,i){var n=this.get();n[e]=i,this.save(n)},save:function(t,e){if(t.hasClass("thrive-shortcode-config")||(t=t.find(".thrive-shortcode-config")),0===t.length)return!1;t.html(this.key+JSON.stringify(e).replace(/\\"/g,"_tve_quote_")+this.key)},get:function(t){if(t.hasClass("thrive-shortcode-config")||(t=t.find(".thrive-shortcode-config")),0===t.length)return!1;var e=new RegExp(this.key,"g");return JSON.parse(t.html().replace(/_tveutf8_/g,"\\u").replace(e,"").replace(/\\\'/g,"'").replace(/_tve_quote_/g,'\\"'))}},getWrapper:function(t,e){var i=t.find(e);return 0===i.length&&(i=o("<div>").attr("."===e[0]?"class":"id",e.substring(1)).appendTo(t)),i},ajaxRender:function(t,e){t.$el.addClass("loading");var i=this;o.ajax({headers:{"X-WP-Nonce":TVO_Front.nonce},cache:!1,data:{config:e},method:"POST",url:TVO_Front.routes.shortcodes+"/render"}).done((function(e){i.updateElement(u.ActiveElement,e,t),u.ActiveElement.find('[id*="thrlider"]').thrlider("redraw")})).fail((function(t){console.error(t)}))},updateElement:function(t,e,i){var n={};for(var a in t.attr("data-update-styles")&&(n=o.extend({},u.TVO.config.get(t.find(".thrive-shortcode-config")).custom_css),t.removeAttr("data-update-styles"),e.config.custom_css=n),t.removeClass("tcb-elem-placeholder"),t.empty(),u.TVO.config.save(u.TVO.getWrapper(t,".thrive-shortcode-config").hide(),e.config),u.TVO.getWrapper(t,".thrive-shortcode-html").html(e.html),n)t.find(a).attr("data-css",n[a]);t.data("config",e.config),setTimeout((function(){i.component&&i.component.update(),u.Editor_Page.reposition_icons()}),500),i.close(),i.$el.removeClass("loading"),u.Editor_Page.focus_element(t)}},u.Views.Components.ovation_capture=u.Views.Base.component.extend({controls_init:function(t){this.template_modal=new u.TVO.captureTemplateModal({el:u.modal.get_element("capture-testimonial-templates-lightbox")}),this.settings_modal=new u.TVO.captureSettingsModal({el:u.modal.get_element("capture-form-settings-lightbox")}),t.ButtonColor.getButtonStyle=function(){var t="";switch(u.ActiveElement.data("config").template){case"default-template":case"set1-template":t="background";break;case"set2-template":t="border-color"}return t},t.ButtonColor.update=function(){this.setValue(this.applyTo().css(this.getButtonStyle()))},t.ButtonColor.input=function(t){var e={},i=this.getButtonStyle(),n=u.ActiveElement.find(".thrive-shortcode-config"),a=u.TVO.config.get(n);e[i]=t+"!important","border-color"===i&&(e.color=t+"!important"),this.applyTo().head_css(e),a.custom_css=a.custom_css||{},a.custom_css[this.model.to]=this.applyTo().data("css"),u.TVO.config.save(n,a)}},placeholder_action:function(t){t.data("config",u.TVO.defaults.capture),this.template_modal.open({template:u.TVO.defaults.capture.template,component:this})},before_update:function(){var t=u.ActiveElement,e=u.TVO.config.get(t)||u.TVO.defaults.capture;t.data("config",e)},change_template:function(){var t=u.ActiveElement.data("config");this.template_modal.open({template:t.template,component:this})},form_settings:function(){var t=u.ActiveElement.data("config");this.settings_modal.open({config:t,component:this})}}),u.TVO.captureTemplateModal=u.modal.base.extend({before_open:function(t){t.template&&t.template.length>0&&this.$(".tvo-template").each((function(){this.dataset.value===t.template?this.classList.add("current"):this.classList.remove("current")})),this.component=t.component},save:function(){var t=u.ActiveElement.data("config");t.template=this.$(".tvo-template.current").data("value"),u.TVO.ajaxRender(this,t)},select:function(t,e){e.parentNode.childNodes.forEach((function(t){t.nodeType!==Node.TEXT_NODE&&t.classList.remove("current")})),e.classList.add("current")}}),u.TVO.captureSettingsModal=u.modal.base.extend({before_open:function(t){var e=t.config||{};this.applySettings(e),this.component=t.component},save:function(){u.TVO.ajaxRender(this,this.readSettings(u.ActiveElement.data("config")))},applySettings:function(t){this.$(".tvo_config_field").each((function(){"checkbox"===this.type?this.checked=1===parseInt(t[this.name]):this.value=t[this.name]})),this.$(".tvo-question").remove(),t.questions.forEach((function(e,i){o("<div>",{class:"tvo-row tvo-collapse tvo-question"+(0===i?" tvo-default-question":""),html:TVO_Front.tpl("new-question")({index:i,question:e,config:t})}).insertBefore(".tvo-add-question")})),this.$(".tvo-all-tags").val(t.tags).trigger("change")},readSettings:function(t){return this.$(".tvo_config_field").each((function(){t[this.name]="checkbox"===this.type?this.checked?1:0:this.value})),t.tags=this.$(".tvo-all-tags").val(),t.questions=[],t.placeholders=[],t.questions_required=[],this.$(".tvo-question").each((function(e){var i=o(this);t.questions[e]=i.find(".tvo-question-input").val(),t.placeholders[e]=i.find(".tvo-placeholder-input").val(),t.questions_required[e]=i.find(".tvo-required").is(":checked")?1:0})),t}}),u.Views.Components.ovation_display=u.Views.Base.component.extend({controls_init:function(t){var e=this;this.template_modal=new u.TVO.displayTemplateModal({el:u.modal.get_element("display-testimonial-templates-lightbox")}),this.settings_modal=new u.modal.base({el:u.modal.get_element("display-settings-lightbox")}),_.each(t,(function(t){t.update=function(){this.setValue(this.applyTo().css(t.model.config.style))},t.input=function(e){var i={},n=u.ActiveElement.find(".thrive-shortcode-config"),a=u.TVO.config.get(n);-1!==t.model.config.style.indexOf("border")&&(i.border="1px solid"),i[t.model.config.style]=e+"!important",this.applyTo().head_css(i,!1,"",!1,u.CONST.global_css_prefix+" "),a.custom_css=a.custom_css||{},a.custom_css[t.model.to]=this.applyTo().first().data("css"),u.TVO.config.save(n,a)}})),o(document).on("tvo.get.shortcode",(function(t,i){var n=u.ActiveElement.data("config");i.template=n.template,i.id&&delete i.id,u.TVO.ajaxRender(e.settings_modal,_.extend(n,i))})),o(document).on("tvo.save.shortcode",(function(t,i){var n=u.ActiveElement,a=n.data("config");a=_.extend(a,i),e.settings_modal.$el.addClass("loading"),o.ajax({headers:{"X-WP-Nonce":TVO_Front.nonce},cache:!1,url:TVO_Front.routes.shortcodes,type:"POST",data:{name:a.name,type:"display",config:a,content:"",html:1}}).done((function(t){u.TVO.updateElement(n,t,e.settings_modal)}))}))},placeholder_action:function(){u.ActiveElement.data("config",u.TVO.defaults.display),this.template_modal.open({init:!0,template:u.TVO.defaults.display.template,component:this})},after_update:function(){var t=u.ActiveElement,e=u.TVO.config.get(t)||u.TVO.defaults.display;TVO_Front.active_config=e,t.data("config",e),_.each(this.controls,(function(t){setTimeout((function(){0===t.applyTo().length?t.hide():t.show()}),10)}))},display_settings:function(t,e,i){this.settings_modal.open(),Backbone.history.stop(),Backbone.history.start(),i=i||"#pre-select",TVO_Front.router.navigate(i,{trigger:!0})},change_template:function(){var t=u.ActiveElement.data("config");this.template_modal.open({template:t.template,component:this})}}),u.TVO.displayTemplateModal=u.modal.base.extend({before_open:function(t){t.template&&t.template.length>0&&this.$(".tvo-template").each((function(){this.dataset.value===t.template?this.classList.add("current"):this.classList.remove("current")})),this.init=t&&t.init,this.component=t&&t.component},save:function(){var t=u.ActiveElement.data("config");t.custom_css&&(t.custom_css={}),t.template=this.$(".tvo-template.current").data("value"),this.init?(u.ActiveElement.data("config",t),this.close(),this.component.display_settings({},{},"#start")):u.TVO.ajaxRender(this,t)},select:function(t,e){e.parentNode.childNodes.forEach((function(t){t.nodeType!==Node.TEXT_NODE&&t.classList.remove("current")})),e.classList.add("current")}})}))})()})();
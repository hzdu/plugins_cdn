/**
 * WooCommerce Additional Variation Images And Swatches Pro - Addon 2
 *
 * This source file is subject to the GNU General Public License v3.0
 * that is bundled with this package in the file license.txt.
 * It is also available through the world-wide-web at this URL:
 * http://www.gnu.org/licenses/gpl-3.0.html
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to support@innovativewp.org so we can send you a copy immediately.
 *
 * @author    InnovativeWP
 * @copyright Copyright (c) 2021, InnovativeWP.
 * @license   http://www.gnu.org/licenses/gpl-3.0.html GNU General Public License v3.0
 */
!function(o){var e={};function a(i){if(e[i])return e[i].exports;var t=e[i]={i:i,l:!1,exports:{}};return o[i].call(t.exports,t,t.exports,a),t.l=!0,t.exports}a.m=o,a.c=e,a.d=function(o,e,i){a.o(o,e)||Object.defineProperty(o,e,{configurable:!1,enumerable:!0,get:i})},a.n=function(o){var e=o&&o.__esModule?function(){return o.default}:function(){return o};return a.d(e,"a",e),e},a.o=function(o,e){return Object.prototype.hasOwnProperty.call(o,e)},a.p="",a(a.s=9)}({10:function(o,e,a){jQuery(function(o){Promise.resolve().then(function(){return a(11)}).then(function(e){var a=e.VebVariationGalleryAdmin;a.COMPAdmin(),o("#woocommerce-product-data").on("woocommerce_variations_loaded",function(){a.ImageUploader(),a.Sortable()}),o("#variable_product_options").on("woocommerce_variations_added",function(){a.ImageUploader(),a.Sortable()}),o(".dokan-product-variation-wrapper").on("dokan_variations_loaded dokan_variations_added",function(){a.ImageUploader(),a.Sortable()}),o(document).trigger("veb_variation_gallery_admin_loaded")})})},11:function(o,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),a.d(e,"VebVariationGalleryAdmin",function(){return r});var i=function(){function o(o,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(o,i.key,i)}}return function(e,a,i){return a&&o(e.prototype,a),i&&o(e,i),e}}();var t,r=(t=jQuery,function(){function o(){!function(o,e){if(!(o instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o)}return i(o,null,[{key:"COMPAdmin",value:function(){t().comp_deactivate_popup&&t().comp_deactivate_popup("veb-variation-gallery")}},{key:"ImageUploader",value:function(){t(document).off("click",".add-veb-variation-gallery-image"),t(document).off("click",".remove-veb-variation-gallery-image"),t(document).on("click",".add-veb-variation-gallery-image",this.AddImage),t(document).on("click",".remove-veb-variation-gallery-image",this.RemoveImage),t(".woocommerce_variation").each(function(){var o=t(this).find(".options:first");t(this).find(".veb-variation-gallery-wrapper").insertBefore(o)}),t(document).trigger("veb_variation_gallery_admin_image_uploader_attached",this)}},{key:"AddImage",value:function(e){var a=this;e.preventDefault(),e.stopPropagation();var i=void 0,r=t(this).data("product_variation_id"),n=t(this).data("product_variation_loop");if("undefined"!=typeof wp&&wp.media&&wp.media.editor){if(i)return void i.open();(i=wp.media({title:veb_variation_gallery_admin.choose_image,button:{text:veb_variation_gallery_admin.add_image},library:{type:["image"]}})).on("select",function(){var e=i.state().get("selection").toJSON().map(function(o){if("image"===o.type){var e=o.id,a=o.sizes,i=(a=void 0===a?{}:a).thumbnail,t=a.full,l=i?i.url:t.url;return wp.template("veb-variation-gallery-image")({id:e,url:l,product_variation_id:r,loop:n})}}).join("");t(a).parent().prev().find(".veb-variation-gallery-images").append(e),o.Sortable(),o.VariationChanged(a),_.delay(function(){o.ProNotice(a)},5)}),i.open()}}},{key:"VariationChanged",value:function(o){t(o).closest(".woocommerce_variation").addClass("variation-needs-update"),t("button.cancel-variation-changes, button.save-variation-changes").removeAttr("disabled"),t("#variable_product_options").trigger("woocommerce_variations_input_changed"),t(o).closest(".dokan-product-variation-itmes").addClass("variation-needs-update"),t(".dokan-product-variation-wrapper").trigger("dokan_variations_input_changed"),t(document).trigger("veb_variation_gallery_admin_variation_changed",this)}},{key:"ProNotice",value:function(o){t(o).closest(".veb-variation-gallery-wrapper").find(".veb-variation-gallery-images > li").length,t(o).closest(".veb-variation-gallery-wrapper").find(".veb-variation-gallery-images > li").each(function(e,a){e>=2?(t(a).remove(),t(o).closest(".veb-variation-gallery-wrapper").find(".veb-variation-gallery-pro-button").show()):t(o).closest(".veb-variation-gallery-wrapper").find(".veb-variation-gallery-pro-button").hide()})}},{key:"RemoveImage",value:function(e){var a=this;e.preventDefault(),e.stopPropagation(),o.VariationChanged(this),_.delay(function(){o.ProNotice(a),t(a).parent().remove()},1)}},{key:"Sortable",value:function(){t(".veb-variation-gallery-images").sortable({items:"li.image",cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,forceHelperSize:!1,helper:"clone",opacity:.65,placeholder:"veb-variation-gallery-sortable-placeholder",start:function(o,e){e.item.css("background-color","#F6F6F6")},stop:function(o,e){e.item.removeAttr("style")},update:function(){o.VariationChanged(this)}})}}]),o}())},9:function(o,e,a){o.exports=a(10)}});
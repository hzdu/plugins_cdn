!function(){var e,o={573:function(e,o,a){"use strict";function t(e,o){for(var a=0;a<o.length;a++){var t=o[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}a.r(o),a.d(o,{VebVariationGalleryAdminPro:function(){return n}});var i,n=(i=jQuery,function(){function e(){!function(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this,e)}var o,a,n;return o=e,n=[{key:"ExtendMediaGrid",value:function(){wp.media,wp.media.view.Attachment.prototype.template=wp.template("iwp_media_attachment")}},{key:"HandleDiv",value:function(){i(document.body).on("click",".veb-variation-gallery-wrapper .handle-div",(function(){i(this).closest(".veb-variation-gallery-postbox").toggleClass("closed");var e=!i(this).closest(".veb-variation-gallery-postbox").hasClass("closed");i(this).attr("aria-expanded",e)}))}},{key:"DefaultProductGallery",value:function(){var e,o=i("#product_image_gallery"),a=i("#product_images_container").find("ul.product_images");i(".add_product_images").off("click","a").on("click","a",(function(t){var n=i(this);t.preventDefault(),e||(e=wp.media.frames.product_gallery=wp.media({title:n.data("choose"),button:{text:n.data("update")},states:[new wp.media.controller.Library({title:n.data("choose"),filterable:"all",multiple:!0})]})).on("select",(function(){var t=e.state().get("selection"),i=o.val();t.map((function(e){if((e=e.toJSON()).id){i=i?i+","+e.id:e.id;var o=e.sizes&&e.sizes.thumbnail?e.sizes.thumbnail.url:e.url,t="image";e.veb_variation_gallery_video&&(t+=" video"),a.append('<li class="'+t+'" data-attachment_id="'+e.id+'"><img src="'+o+'" /><ul class="actions"><li><a href="#" class="delete" title="'+n.data("delete")+'">'+n.data("text")+"</a></li></ul></li>")}})),o.val(i)})),e.open()}))}},{key:"ImageUploader",value:function(){i(document).off("click",".add-veb-variation-gallery-image"),i(document).off("click",".veb-variation-gallery-images > li.image"),i(document).off("click",".veb_variation_gallery_media_video_popup_link"),i(document).off("click",".remove-veb-variation-gallery-image"),i(document).on("click",".add-veb-variation-gallery-image",this.AddImage),i(document).on("click",".veb-variation-gallery-images > li.image",this.ChangeImage),i(document).on("click",".remove-veb-variation-gallery-image",this.RemoveImage),i(document).on("click",".veb_variation_gallery_media_video_popup_link",this.AttachmentVideoPopup),i(".woocommerce_variation").each((function(){var e=i(this).find(".options:first");i(this).find(".veb-variation-gallery-wrapper").insertBefore(e)})),i(document).trigger("veb_variation_gallery_admin_pro_image_uploader_attached",this)}},{key:"ChangeImage",value:function(o){var a,t=this;o.preventDefault(),o.stopPropagation();var n=i(this).closest(".veb-variation-gallery-wrapper").data("product_variation_id"),r=i(this).find("input.iwp_variation_id_input").val();if(i(this).index(),"undefined"!=typeof wp&&wp.media&&wp.media.editor){if(a)return void a.open();(a=wp.media({title:veb_variation_gallery_admin.choose_image,button:{text:veb_variation_gallery_admin.update_image},library:{type:["image"]}})).on("select",(function(){var o=a.state().get("selection").toJSON().map((function(e){if("image"===e.type){var o=e.id,a=e.veb_variation_gallery_video,t=e.sizes,i=(t=void 0===t?{}:t).thumbnail,r=t.full,l=i?i.url:r.url;return wp.template("veb-variation-gallery-image")({id:o,url:l,product_variation_id:n,veb_variation_gallery_video:a})}})).join("");i(t).after(o),_.delay((function(){i(t).remove()}),1),e.Sortable(),e.VariationChanged(t)})),a.on("open",(function(){var e=a.state().get("selection");if(r>0){var o=wp.media.attachment(r);o.fetch(),e.add(o?[o]:[])}})),a.open()}}},{key:"AddImage",value:function(o){var a,t=this;o.preventDefault(),o.stopPropagation();var n=i(this).closest(".veb-variation-gallery-wrapper").data("product_variation_id");if(i(this).find("input.iwp_variation_id_input").val(),"undefined"!=typeof wp&&wp.media&&wp.media.editor){if(a)return void a.open();(a=wp.media({title:veb_variation_gallery_admin.choose_image,button:{text:veb_variation_gallery_admin.add_image},library:{type:["image"]},multiple:"add"})).on("select",(function(){var o=a.state().get("selection").toJSON().map((function(e){if("image"===e.type){var o=e.id,a=e.veb_variation_gallery_video,t=e.sizes,i=(t=void 0===t?{}:t).thumbnail,r=t.full,l=i?i.url:r.url;return wp.template("veb-variation-gallery-image")({id:o,url:l,product_variation_id:n,veb_variation_gallery_video:a})}})).join("");i(t).closest(".veb-variation-gallery-wrapper").find(".veb-variation-gallery-images").append(o),_.delay((function(){i(t).is("li.image")&&i(t).remove()}),1),e.Sortable(),e.VariationChanged(t)})),a.open()}}},{key:"VariationChanged",value:function(e){i(e).closest(".woocommerce_variation").addClass("variation-needs-update"),i("button.cancel-variation-changes, button.save-variation-changes").removeAttr("disabled"),i("#variable_product_options").trigger("woocommerce_variations_input_changed"),i(e).closest(".dokan-product-variation-itmes").addClass("variation-needs-update"),i(".dokan-product-variation-wrapper").trigger("dokan_variations_input_changed"),i(document).trigger("veb_variation_gallery_admin_variation_changed",this)}},{key:"RemoveImage",value:function(o){var a=this;o.preventDefault(),o.stopPropagation(),e.VariationChanged(this),_.delay((function(){i(a).parent().remove()}),1)}},{key:"Sortable",value:function(){i(".veb-variation-gallery-images").sortable({items:"li.image",cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,forceHelperSize:!1,helper:"clone",opacity:.65,placeholder:"veb-variation-gallery-sortable-placeholder",start:function(e,o){o.item.css("background-color","#F6F6F6")},stop:function(e,o){o.item.removeAttr("style")},update:function(){e.VariationChanged(this)}})}},{key:"AttachmentVideoPopup",value:function(e){var o,a=this;if(e.preventDefault(),e.stopPropagation(),"undefined"!=typeof wp&&wp.media&&wp.media.editor){if(o)return void o.open();(o=wp.media({title:veb_variation_gallery_admin.choose_video,button:{text:veb_variation_gallery_admin.add_video},library:{type:["video"]},multiple:!1})).on("select",(function(){var e=o.state().get("selection").first().toJSON();"video"===e.type&&i(a).closest(".compat-attachment-fields").find(".compat-field-veb_variation_gallery_media_video input").val(e.url).change()})),o.on("open",(function(){o.$el.find(".media-frame-content").addClass("iwp-media-frame-modify")})),o.open()}}}],(a=null)&&t(o.prototype,a),n&&t(o,n),Object.defineProperty(o,"prototype",{writable:!1}),e}())},794:function(e,o,a){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function i(e){if("function"!=typeof WeakMap)return null;var o=new WeakMap,a=new WeakMap;return(i=function(e){return e?a:o})(e)}jQuery((function(e){Promise.resolve().then((function(){return function(e,o){if(!o&&e&&e.__esModule)return e;if(null===e||"object"!==t(e)&&"function"!=typeof e)return{default:e};var a=i(o);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var d=r?Object.getOwnPropertyDescriptor(e,l):null;d&&(d.get||d.set)?Object.defineProperty(n,l,d):n[l]=e[l]}return n.default=e,a&&a.set(e,n),n}(a(573))})).then((function(o){var a=o.VebVariationGalleryAdminPro;a.ExtendMediaGrid(),a.DefaultProductGallery(),a.ImageUploader(),a.HandleDiv(),e("#woocommerce-product-data").on("woocommerce_variations_loaded",(function(){a.ImageUploader(),a.Sortable()})),e("#variable_product_options").on("woocommerce_variations_added",(function(){a.ImageUploader(),a.Sortable()})),e(".dokan-product-variation-wrapper").on("dokan_variations_loaded dokan_variations_added",(function(){a.ImageUploader(),a.Sortable()})),e(document).trigger("veb_variation_gallery_pro_admin_loaded")}))}))},193:function(){}},a={};function t(e){var i=a[e];if(void 0!==i)return i.exports;var n=a[e]={exports:{}};return o[e](n,n.exports,t),n.exports}t.m=o,e=[],t.O=function(o,a,i,n){if(!a){var r=1/0;for(u=0;u<e.length;u++){a=e[u][0],i=e[u][1],n=e[u][2];for(var l=!0,d=0;d<a.length;d++)(!1&n||r>=n)&&Object.keys(t.O).every((function(e){return t.O[e](a[d])}))?a.splice(d--,1):(l=!1,n<r&&(r=n));if(l){e.splice(u--,1);var c=i();void 0!==c&&(o=c)}}return o}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[a,i,n]},t.d=function(e,o){for(var a in o)t.o(o,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:o[a]})},t.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e={801:0,438:0};t.O.j=function(o){return 0===e[o]};var o=function(o,a){var i,n,r=a[0],l=a[1],d=a[2],c=0;if(r.some((function(o){return 0!==e[o]}))){for(i in l)t.o(l,i)&&(t.m[i]=l[i]);if(d)var u=d(t)}for(o&&o(a);c<r.length;c++)n=r[c],t.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return t.O(u)},a=self.webpackChunkveb_variation_gallery_pro=self.webpackChunkveb_variation_gallery_pro||[];a.forEach(o.bind(null,0)),a.push=o.bind(null,a.push.bind(a))}(),t.O(void 0,[438],(function(){return t(794)}));var i=t.O(void 0,[438],(function(){return t(193)}));i=t.O(i)}();
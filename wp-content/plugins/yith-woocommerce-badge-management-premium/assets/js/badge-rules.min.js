jQuery(function(o){var e=o(".post-php.post-type-ywcbm-badge-rule .page-title-action,.edit-php.post-type-ywcbm-badge-rule .page-title-action, .edit-php.post-type-ywcbm-badge-rule .yith-plugin-fw__list-table-blank-state__cta"),t=function(){var e=o(this),t=e.closest(".yith-plugin-fw-metabox-field-row").find(".description"),i=e.is(":valid")?"":"#ea0034";e.css("border-color",i),t.css("color",i)};e.on("click",function(e){e.preventDefault(),yith.ui.modal({title:yithWcbmBadgeRules.addBadgeRuleModal.title,content:yithWcbmBadgeRules.addBadgeRuleModal.content,closeWhenClickingOnOverlay:!0,width:700})}),o(document).on("click",".yith-wcbm-add-association-rule",function(){var e=o(this),t=e.parent().find(".yith-wcbm-associations-badge-rules"),e=wp.template(e.parent().attr("id"));t.append(e({ruleID:Date.now()})),o(document).trigger("yith_fields_init")}),o(document).on("click",".yith-wcbm-remove-association-badge-rule",function(){o(this).parent().remove()}),o(document).on("change","#_schedule_dates_from",function(){o("#_schedule_dates_to").datepicker("option","minDate",o(this).val())}),o(document).on("click",".yith_wcbm_actions .yith-plugin-fw__action-button--delete-action a",function(e){e.preventDefault(),e.stopPropagation();var t=o(this).attr("href"),e=o(this).closest("tr").find("td.title a").html();yith.ui.confirm({title:yithWcbmBadgeRules.i18n.deleteBadgeRuleModal.title,message:yithWcbmBadgeRules.i18n.deleteBadgeRuleModal.message.replace("%s",e),confirmButtonType:"delete",confirmButton:yithWcbmBadgeRules.i18n.deleteBadgeRuleModal.confirmButton,closeAfterConfirm:!1,onConfirm:function(){window.location.href=t}})}),o(document).on("change",".column-yith_wcbm_actions .yith-wcbm-enable-badge-rule input",function(){var t=o(this),e=t.closest(".yith-plugin-fw-onoff-container"),i=e.data("badge-rule-id"),i={action:yithWcbmBadgeRules.actions.toggleRuleEnable,security:yithWcbmBadgeRules.security,rule_id:i,rule_enabled:t.prop("checked")?"yes":"no"};e.block({message:"",overlayCSS:{backgroundColor:"#FFFFFF",opacity:.8,cursor:"wait"}}),o.ajax({type:"POST",dataType:"json",data:i,url:yithWcbmBadgeRules.ajaxurl,success:function(e){e.success||t.prop("checked",!t.prop("checked"))},complete:function(){e.unblock()}})}),o(document).on("change keyup","#yith-wcbm-title",t),o("#yith-wcbm-title").on("invalid",t),e=o("#title"),t=o("#yith-wcbm-title"),e&&t&&t.val(e.val()),o(".wc-enhanced-select").selectWoo()});
!function(){"use strict";var e,t={n:function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,{a:a}),a},d:function(e,a){for(var r in a)t.o(a,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:a[r]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},a=jQuery,r=t.n(a);function n(e,t,a){return r().ajax({url:rankMath.ajaxurl,type:a||"POST",dataType:"json",data:r().extend(!0,{action:"rank_math_"+e,security:rankMath.security},t)})}function i(e,t,a,n){t=t||"error",n=n||!1;var i=r()('<div class="notice notice-'+t+' is-dismissible"><p>'+e+"</p></div>").hide();a.next(".notice").remove(),a.after(i),i.slideDown(),r()(document).trigger("wp-updates-notice-added"),n&&setTimeout((function(){i.fadeOut((function(){i.remove()}))}),n)}(e=r())((function(){({init:function(){var t,a,n=this;a=t||".rank-math-box-tabs",r()(a).children().on("click",(function(e){e.preventDefault();var t=r()(this),a=t.attr("href").substr(1);t.addClass("active-tab").siblings().removeClass("active-tab"),r()("#"+a).addClass("active-tab").siblings().removeClass("active-tab")})),e(document.body).on("click",".rank-math-action",(function(t){var a=e(t.currentTarget).data("action");a in n&&n[a](t)})),this.importConfirm()},importConfirm:function(){var t=e("#import-me");t.on("change",(function(){t.removeClass("invalid")})),e("#rank-math-import-form").on("submit",(function(e){if(!t.get(0).files.length)return t.addClass("invalid"),void e.preventDefault();window.confirm(rankMath.importSettingsConfirm)||e.preventDefault()}))},createBackup:function(t){var a=e(t.currentTarget);a.prop("disabled",!0),n("create_backup").always((function(){a.prop("disabled",!1)})).done((function(t){if(t.success){var r=a.parent().find("tbody"),n=r.find("tr:first").clone();n.removeClass("hidden").find("th").html(t.backup),n.find("[data-action]").attr("data-key",t.key),r.prepend(n),e("#rank-math-no-backup-message").addClass("hidden"),i(t.message,"success",e(".wp-header-end"),2e3)}else i(t.error,"error",e(".wp-header-end"),2e3)}))},restoreBackup:function(t){if(window.confirm(rankMath.restoreConfirm)){var a=e(t.currentTarget);a.prop("disabled",!0),n("restore_backup",{key:a.attr("data-key")}).always((function(){a.prop("disabled",!1)})).done((function(t){t.success?i(t.message,"success",e(".wp-header-end"),2e3):i(t.error,"error",e(".wp-header-end"),2e3)}))}},deleteBackup:function(t){if(window.confirm(rankMath.deleteBackupConfirm)){var a=e(t.currentTarget);a.prop("disabled",!0),n("delete_backup",{key:a.data("key")}).always((function(){a.prop("disabled",!1)})).done((function(t){if(t.success){var r=a.closest("table");a.closest("tr").fadeOut((function(){e(this).remove(),1>r.find("tr").length&&e("#rank-math-no-backup-message").show()})),i(t.message,"success",e(".wp-header-end"),2e3)}else i(t.error,"error",e(".wp-header-end"),2e3)}))}},getAllActions:function(){var t=e.map(e(".import-plugins .active-tab").find(".choices").find("input:checkbox:checked"),(function(e){return e.value}));if(-1!==t.indexOf("recalculate")){var a=(t=t.filter((function(e){return"recalculate"!==e}))).indexOf("postmeta");-1!==a?t.splice(a+1,0,"recalculate"):t.unshift("recalculate")}return t},importPlugin:function(t){var a=e(t.currentTarget),r=a.closest("form").find(".rank-math-box-tabs > .active-tab").text().trim();if(window.confirm(rankMath.importPluginConfirm.replace("%s",r))){var n=this.getAllActions();if(1>n.length)i(rankMath.importPluginSelectAction,"error",e(".wp-header-end"),5e3);else{a.prop("disabled",!0),a.data("active")&&n.push("deactivate");var o=e('<textarea id="import-progress-area" class="import-progress-area large-text" disabled="disabled" rows="8" style="margin: 20px 0;background: #eee;"></textarea>');e("#import-progress-area").remove(),a.parents(".active-tab").find("table").after(o),this.addLog("Import started...",o),this.ajaxImport(a.data("slug"),n,o,null,(function(){a.prop("disabled",!1),setTimeout((function(){o.fadeOut((function(){o.remove()}))}),1e4)}))}}},ajaxImport:function(e,t,a,r,i){var o=this;if(0===t.length){var s="Import finished.";return-1!==this.getAllActions().indexOf("recalculate")&&(s="Import finished. You can continue while we recalculate your SEO scores."),this.addLog(s,a),void i()}var c=t.shift(),u="deactivate"===c?"Deactivating plugin":"Importing "+c;if(r=r||1,"recalculate"===c)return this.addLog("Starting SEO Score Recalculation...",a),this.startRecalculation(a,i),void this.ajaxImport(e,t,a,null,i);this.addLog(u,a),n("import_plugin",{perform:c,pluginSlug:e,paged:r}).done((function(n){r=1,n&&n.page&&n.page<n.total_pages&&(r=n.page+1,t.unshift(c)),o.addLog(n.success?n.message:n.error,a),o.ajaxImport(e,t,a,r,i)})).fail((function(r){this.addLog(r.statusText,a),this.ajaxImport(e,t,a,null,i)}))},addLog:function(e,t){var a=new Date,r=t.val()+"["+(10>a.getHours()?"0":"")+a.getHours()+":"+(10>a.getMinutes()?"0":"")+a.getMinutes()+":"+(10>a.getSeconds()?"0":"")+a.getSeconds()+"] "+e+"\n";t.text(r).scrollTop(t[0].scrollHeight-t.height()-20)},cleanPlugin:function(t){var a=e(t.currentTarget),r=a.closest("form").find(".rank-math-box-tabs > .active-tab").text().trim();window.confirm(rankMath.cleanPluginConfirm.replace("%s",r))&&(a.prop("disabled",!0),n("clean_plugin",{pluginSlug:a.data("slug")}).always((function(){a.prop("disabled",!1),e("html, body").animate({scrollTop:0},"fast")})).done((function(t){t.success&&a.closest("tr").fadeOut((function(){e(this).remove()})),i(t.success?t.message:t.error,t.success?"success":"error",e(".wp-header-end"),5e3)})))},startRecalculation:function(t,a){null===window.open(rankMath.recalculateURL,"rank-math-recalculation","width=530,height=300")&&(e('input[value="recalculate"]').prop("checked",!1).next("label").find("a").removeClass("hidden"),this.addLog("The SEO Score Recalculation could not be started because the popup was blocked. Try again with the above link, or run it from Rank Math > Status & Tools > Database Tools.",t),a())}}).init()}))}();
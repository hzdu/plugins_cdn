!function(e){var t={};function a(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=71)}({71:function(e,t,a){e.exports=a(72)},72:function(e,t){var a;(a=jQuery)((function(){(new(Backbone.View.extend({el:".cs-content",events:{"click .tvd-toggle-input":"switchToggle","click .add-new-page":"createNewPage","click .enable-state":function(e){this.enableState(e.target.getAttribute("data-enable")),e.target.classList.contains("remove-page")&&(this.activateComingSoon(0),a(".page-source-select").val(null).trigger("change"))}},initialize:function(){0!==parseInt(TVD_CS_CONST.is_coming_soon_enabled)&&this.enableState("view")},initializeDropdown:function(){var e=this;a(".page-source-select").select2({ajax:{url:TVD_CS_CONST.baseUrl,dataType:"json",delay:250,data:function(e){return{search:e.term,status:"publish",type:"page"}},processResults:function(e){return{results:e}}},placeholder:"Search an existing page",templateResult:function(e){return e.loading?e.text:e.title?a(TVE_Dash.tpl("coming-soon-views-dropdown-result",{pageTitle:e.title.rendered})):void 0},templateSelection:function(e){return e.text||e.title.rendered},multiple:!0,minimumInputLength:3,language:{inputTooShort:function(){return""}}}).on("select2:select",(function(t){e.initializePageVariables(t.params.data),e.enableState("inactive"),e.enableLoader(),e.activateComingSoon(t.params.data.id)}))},createNewPage:function(){var e=this,t=a("#new-page-title").val();t?(this.enableLoader(),a.ajax({method:"POST",url:TVD_CS_CONST.baseUrl,data:{title:t,type:"page",status:"publish"},beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",TVD_CS_CONST.nonce)},success:function(t){e.initializePageVariables(t),e.activateComingSoon(t.id)}})):TVE_Dash.err("Please add the page title!")},activateComingSoon:function(e){var t=this;a.ajax({url:ajaxurl,dataType:"json",type:"POST",data:{_wpnonce:TVE_Dash_Const.nonce,action:TVE_Dash_Const.actions.backend_ajax,route:TVE_Dash_Const.routes.settings,field:"tvd_coming_soon_page_id",value:e}}).done((function(n){0!==e&&t.enableState("view"),a("#wp-admin-bar-coming-soon").toggle(0!==e),TVE_Dash.page_loader&&TVE_Dash.page_loader.close(),TVE_Dash.success("Changes saved successfully")}))},switchToggle:function(){this.$(".tvd-toggle-input")[0].checked?this.enableState("search"):(this.activateComingSoon(0),this.enableState("inactive"))},enableState:function(e){if("inactive"!==e){var t={pageName:TVD_CS_CONST.page_name,editUrl:TVD_CS_CONST.edit_url,previewUrl:TVD_CS_CONST.preview_url};this.$el.find(".tvd-cs-page-selector").html(TVE_Dash.tpl("coming-soon-views-".concat(e),"view"===e?t:{})),"search"===e&&this.initializeDropdown()}else this.$el.find(".tvd-cs-page-selector").empty()},initializePageVariables:function(e){TVD_CS_CONST.page_name=e.title.rendered,TVD_CS_CONST.preview_url=e.link;var t=new URL(TVD_CS_CONST.base_url+"post.php");t.searchParams.append("post",e.id),t.searchParams.append("action","architect"),t.searchParams.append("tve","true"),TVD_CS_CONST.edit_url=t},enableLoader:function(){TVE_Dash.page_loader=new TVE_Dash.views.PageLoader,TVE_Dash.page_loader.render(),TVE_Dash.page_loader.open()}}))).render()}))}});
!function(){var t={60248:function(t){var e,a;e=ThriveGlobal.$j,a=TCB_Front,t.exports=class{constructor(t){this.gallery=t,this.$gallery=t.$element,this.imageCount=this.$gallery.find(".tve_image_caption").length,this.animating=!1,this.isOpen=!1,this.render()}render(){this.$overlay=e(`\n\t\t\t\t<div class="tcb-gallery-overlay">\n\t\t\t\t\t<div class="tcb-gallery-wrapper"></div>\n\t\t\t\t\t<div class="tcb-g-count tcb-gl-ctrl-mob">\n\t\t\t\t\t\t<div class="tcb-gl-ctrl-wrp">\n\t\t\t\t\t\t\t<span class="tcb-mob-text"></span>\n\t\t\t\t\t\t\t<span class="tcb-img-count"></span>\n\t\t\t\t\t\t\t<span class="tcb-cap-txt"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<button class="tcb-nav-prev tcb-gl-ctrl">${a.icons.get("arrow-left")}</button>\n\t\t\t\t\t<button class="tcb-nav-next tcb-gl-ctrl">${a.icons.get("arrow-right")}</button>\n\t\t\t\t\t<button class="tcb-nav-close tcb-gl-ctrl-mob">${a.icons.get("cross")}</button>\n\t\t\t\t</div>\n\t\t\t`).appendTo(e("body")),this.$wrapper=this.$overlay.find(".tcb-gallery-wrapper"),this.$wrapper.css({width:"100%"})}init(){this.currentImageIndex=0,this.$gallery.find(".tve_image_caption").each(((t,a)=>{const i=e(a).find(".tve_image_frame");e(a).find("a").removeClass("tve-jump-scroll"),i&&i.off("click.lightbox").on("click.lightbox",(t=>{this.shouldClick()&&(this.isOpen=!0,this.$overlay.show(0).addClass("g-v"),this.showImage(parseInt(a.dataset.index),!1),t.preventDefault())})),this.createGalleryItem(a)})),this.$overlay.find(".tcb-nav-prev").on("click",this.showPrev.bind(this)),this.$overlay.find(".tcb-nav-next").on("click",this.showNext.bind(this)),this.$overlay.find(".tcb-nav-close").on("click",this.close.bind(this)),this.$wrapper.on("click",(t=>{"IMG"!==t.target.tagName&&this.close()})),this.$wrapper.length&&this.$wrapper.swipe({swipeLeft:this.showNext.bind(this),swipeRight:this.showPrev.bind(this),swipeUp:()=>{this.isOpen=!1,this.$overlay.removeClass("g-v").hide()},swipeDown:()=>!1}),e("html").off("keydown.gallery").on("keydown.gallery",(t=>{if(this.isOpen)switch(t.keyCode){case 37:this.showPrev();break;case 39:this.showNext();break;case 27:this.close()}}))}shouldClick(){let t=!0;if("carousel"===this.$gallery.attr("data-type")){const e=this.$gallery.find(".tcb-image-gallery-container")[0].slick;t=!e||!1===e.dragging&&!1!==e.shouldClick}return t}close(){this.isOpen=!1,this.$gallery.addClass(this.getAnimationsClasses()),this.$overlay.removeClass("g-v").hide()}createGalleryItem(t){if(!t.classList.contains("gallery-clicker")){const i=t.querySelector("img");e(`<div class="tve-g-image-wrapper">\n\t\t\t\t\t\t<div class="tcb-caption-wrapper tcb-loading">\n\t\t\t\t\t\t\t<button class="tcb-nav-close">${a.icons.get("cross")}</button>\n\t\t\t\t\t\t\t<img \n\t\t\t\t\t\t\t\t\tloading="lazy"\n\t\t\t\t\t\t\t\t\tdata-pos="${t.getAttribute("data-position")}" \n\t\t\t\t\t\t\t\t\tdata-caption="${t.getAttribute("data-caption")}" \n\t\t\t\t\t\t\t\t\tdata-index="${t.getAttribute("data-index")}" \n\t\t\t\t\t\t\t\t\tdata-src="${i.dataset.src}" alt=""/>\n\t\t\t\t\t\t\t<div class="tcb-caption"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="tcb-image-loader">${TCB_Front.icons.get("spinner9")}</div>\n\t\t\t\t\t</div>`).appendTo(this.$wrapper)}}showImage(t,e){this.$gallery.removeClass(this.getAnimationsClasses()),this.$wrapper.toggleClass("g-n-a",!e);const a=this.$wrapper.find(`img[data-index=${t}]`),i="true"===this.$gallery.attr("data-caption-lightbox"),s=a.attr("data-caption")||"",n=a.attr("data-pos"),r=TCB_Front.isRTL?this.imageCount-1-t:t;a.parent().hasClass("tcb-loading")&&a.on("load",(()=>{a.parent().removeClass("tcb-loading")})),a.attr("src",a.attr("data-src")),this.$wrapper.css({transform:`translate(-${100*r}%, 0)`}),this.currentImageIndex=t,this.$overlay.find(".tcb-img-count").text(n),this.$overlay.find(".tcb-caption").text(i&&s.length?s:""),this.$overlay.find(".tcb-mob-text").text(s)}showNext(){this.animating||(this.currentImageIndex<this.imageCount-1?this.showImage(this.currentImageIndex+1,!0):(this.$wrapper.addClass("g-n-a").css({transform:"translate(100%, 0)"}),this.animating=!0,setTimeout((()=>{this.showImage(0,!0),this.animating=!1}),20)))}showPrev(){this.animating||(this.currentImageIndex>0?this.showImage(this.currentImageIndex-1,!0):(this.$wrapper.addClass("g-n-a").css({transform:`translate(-100 * ${this.imageCount}%, 0)`}),this.animating=!0,setTimeout((()=>{this.showImage(this.imageCount-1,!0),this.animating=!1}),20)))}getAnimationsClasses(){const t=[];if(this.$gallery.hasClass("tve_evt_manager_listen")){t.push("tve_evt_manager_listen","tve_ea_thrive_animation");const e=this.$gallery[0].className.match(/tve_et_\S*|tve_ea_\S*|tve_anim_\S*/g);null!==e&&(t.push(...e),t.includes("tve_ea_thrive_tooltip")&&t.splice(t.indexOf("tve_ea_thrive_animation"),1))}return[...new Set(t)].join(" ")}}}},e={};function a(i){var s=e[i];if(void 0!==s)return s.exports;var n=e[i]={exports:{}};return t[i](n,n.exports,a),n.exports}void 0===TCB_Front.js_modules["image-gallery"]&&TCB_Front.setModuleLoadedStatus("image-gallery",!1),function(t,e){if(TCB_Front.isModuleLoaded("image-gallery"))return;const i=a(60248),s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:TCB_Front.$body;e.find(".tcb-image-gallery:visible").each(((e,a)=>new n(t(a),!!tve_frontend_options.is_editor_page)))};t(window).on("tve_after_content_toggle",((t,e)=>{s(e)})),t(window).on("tcb_after_dom_ready",(()=>{s()}));class n{constructor(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t(),i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.$element=a,this.isEditor=i,i||(this.isHorizontalMasonry()&&this.initHorizontalMasonry(),this.hasLightbox()&&this.initLightbox(),this.isVerticalMasonry()&&this.initVerticalMasonry()),this.isCarousel()){this.carousel=new TCB_Front.Carousel(this),this.carousel.initCarousel();const t=this.onResize.bind(this);e.addResizeCallback(t)}}static imageSelector(){return".thrv_wrapper.tve_image_caption"}static captionSelector(){return".wp-caption-text.thrv-inline-text"}onResize(){const t=this.$element.find(".tcb-image-gallery-container"),a=e.Utils.jsonParse(t,"data-carousel-settings").tcbDots;setTimeout((()=>{TCB_Front.Carousel.setDots(this.$element.find("ul.tcb-carousel-dots"),a)}),500)}setImages(t){return this.images=t,this}getImages(){return this.images}readImagesFromElement(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const a=[],i=this.isCarousel()?".tcb-image-gallery-container .tve_image_caption.slick-slide:not(.slick-cloned) img":".tcb-image-gallery-container img";return this.$element.find(i).each(((e,i)=>{const s=t(i),n=s.parents(".tve_image_caption");a.push({id:n.attr("data-id"),caption:n.attr("data-caption"),title:s.attr("title"),alt:s.attr("alt"),width:s.attr("width"),height:s.attr("height"),url:s.attr("src"),sizes:s.tcbJsonData("sizes"),styleClass:n[0].className.match(/(^|\s)img_style_\S+/g)||["no_style"].join(" ")})})),e&&(this.images=a),a}isHorizontalMasonry(){return"horizontalMasonry"===this.$element.attr("data-type")}initHorizontalMasonry(){this.$element.find(".tcb-image-gallery-container").justifiedGallery({selector:".tve_image_caption.thrv_wrapper",rowHeight:parseInt(e.inlineCssVariable(this.$element,"--tve-gallery-column-height")),lastRow:"nojustify",margins:parseInt(e.inlineCssVariable(this.$element,"--tve-gallery-gutter"))})}isVerticalMasonry(){return"verticalMasonry"===this.$element.attr("data-type")}initVerticalMasonry(){this.$element.find(".tcb-image-gallery-container").data("masonry",!1).masonry({itemSelector:".thrv_wrapper.tve_image_caption",gutter:0,transitionDuration:0})}render(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.isEditor){this.$element=TVE.ActiveElement;const e=this.$element.find(TVE.identifier("image")),a=this.$element.find(TVE.identifier("image_caption")),i=e.find(".tve-image-overlay").first(),s={},n={},r={};let l,o,c,h,d,g,m;if(e.length&&(t&&this.readImagesFromElement(),l=this.getAnimationsClasses(e),o=this.getAnimationsClasses(e.find("img")),c=e.find("img").attr("data-tcb-events"),h=this.getAnimationsClasses(a),d=a.attr("data-tcb-events"),g=(e.find(".tve_image_frame")[0].className.match(/(^|\s)img_style_\S+/g)||["no_style"]).join(" "),m=TVE.Editor_Page.getResponsiveClasses(a)),this.oldImageSize=this.getImageSize(),a.each(((t,e)=>{const a=TVE.inner_$(e),i=a.find("a"),s=a.parents(".tve_image_caption"),r=s.attr("data-id");n[r]={text:s.attr("data-caption")||"",hasLink:i.length>0,href:i.attr("href"),target:i.attr("target"),rel:i.attr("rel")}})),e.each(((t,e)=>{const a=TVE.inner_$(e),i=a.find(".tve_image_frame a"),s=a.attr("data-id");r[s]={hasLink:i.length>0,href:i.attr("href"),target:i.attr("target"),rel:i.attr("rel"),linkClass:i.attr("tve-dynamic-link"),shortcodeId:i.attr("data-shortcode-id"),dynamicLink:i.attr("data-dynamic-link")}})),this.$element.hasClass("tcb-elem-placeholder"))this.$element.html('<div class="tcb-image-gallery-container tve-prevent-content-edit"></div>').removeClass("tcb-elem-placeholder tcb-gallery-placeholder");else{const t=this.$element.find(".tcb-image-gallery-container");this.isCarousel()&&void 0!==t[0].slick&&t.slick("unslick"),t.html("")}a.length&&a.attr("data-position")&&(s.position={attr:`data-position=${a.attr("data-position")}`,classes:`tve-image-caption-${a.attr("data-position")}`},"inside"===a.attr("data-position")&&a.attr("data-alignment")&&(s.alignment={attr:`data-alignment=${a.attr("data-alignment")}`,classes:`tve-image-caption-inside tcb-caption-${a.attr("data-alignment")}`})),this.$element.attr("data-css",TVE.CSS_Rule_Cache.uniq_id(this.$element)),this.getImages().forEach(((t,e)=>this.renderOneImage(t,e,s,n,r)));const p=this.$element.find(TVE.identifier("image")),v=this.$element.find(".wp-caption-text");i.length&&i.insertAfter(p.find("img")),l&&(p.addClass(l),this.$element.find("img").addClass(o).attr("data-tcb-events",c)),h&&v.addClass(h).attr("data-tcb-events",d),g&&p.find(".tve_image_frame").addClass(g),v.each(((t,e)=>{const a=e.innerText;a&&!a.trim().length&&e.classList.add("tcb-permanently-hidden")})),m&&v.addClass(m),this.updateDataSelectors()}}renderOneImage(t,a,i,s,n){this.$element.find(".tcb-image-gallery-container").append(TVE.tpl("elements/gallery-image")({image:t,index:a,imageObj:this,captionSettings:i,tcb:e,captionLinks:s,imageLinks:n})),this.$element.find(".tcb-image-gallery-container img:last").tcbJsonData("sizes",t.sizes)}updateDataSelectors(){const t=this.$element.attr("data-css");this.$element.find(n.imageSelector()).each(((e,a)=>{a.setAttribute("data-selector",`[data-css="${t}"] ${n.imageSelector()}`)})),this.$element.find(n.captionSelector()).each(((e,a)=>{a.setAttribute("data-selector",`[data-css="${t}"] ${n.captionSelector()}`)}))}hasCaptions(){return"true"===this.$element.attr("data-caption")}getImageSize(){let t=this.$element.attr("data-thumbnail-size")||"auto";return"auto"===t&&(t=this.getBestImageSize()),t}getFullwidthSize(){return this.$element.attr("data-fullscreen-size")||"large"}hasLightbox(){let t="fullscreen"===this.$element.attr("data-click-behavior");return!this.$element.hasClass("tcb-update-fullscreen")&&this.isCarousel()&&(t=!1),t}getImagePosition(t){const e=this.getImages();return e.findIndex((e=>e.id===t.id))+1+"/"+e.length}initLightbox(){this.$element.data("lightbox-loaded")||(this.lightbox=new i(this),this.lightbox.init(),this.$element.data("lightbox-loaded",!0))}getBestImageSize(){const t=this.getNumberOfColumns(),a=parseInt(e.inlineCssVariable(this.$element,"--tve-gallery-horizontal-space")),i=t||Math.min(this.images.length,4),s=(TVE.ActiveElement.outerWidth()-(i-1)*a)/i;let n="large";if(s<=300){const t=TVE.ActiveElement.find("img");t.length&&s<t.width()||(n="medium")}return n}getNumberOfColumns(){let t;if(this.isCarousel())try{t=e.Utils.jsonParse(this.$element.find(".tcb-image-gallery-container"),"data-carousel-settings").slidesToShow}catch(e){t=3}else t=e.inlineCssVariable(this.$element,"--tve-gallery-columns");return t}getAnimationsClasses(t){const e=[],a=t.length?t[0].className.match(/tve_et_\S*|tve_ea_\S*|tve_anim_\S*|tve_evt_\S*/g):null;return null!==a&&(e.push(...a),e.includes("tve_ea_thrive_tooltip")&&e.splice(e.indexOf("tve_ea_thrive_animation"),1)),[...new Set(e)].join(" ")}isCarousel(){return"carousel"===this.$element.attr("data-type")}}window.TCB_Front.ImageGallery=n,TCB_Front.setModuleLoadedStatus("image-gallery",!0)}(ThriveGlobal.$j,TCB_Front)}();
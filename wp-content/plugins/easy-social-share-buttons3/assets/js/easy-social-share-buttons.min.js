jQuery(document).ready(function(e){"use strict";essb_settings.essb3_plugin_url,essb_settings.essb3_facebook_total;var s=essb_settings.essb3_admin_ajax,t=essb_settings.essb3_internal_counter,n=essb_settings.essb3_counter_button_min,i=void 0!==essb_settings.essb3_no_counter_mailprint&&essb_settings.essb3_no_counter_mailprint,a=void 0!==essb_settings.essb3_single_ajax&&essb_settings.essb3_single_ajax,o=void 0!==essb_settings.twitter_counter?essb_settings.twitter_counter:"",r=void 0!==essb_settings.google_counter?essb_settings.google_counter:"";""==o&&(o="api"),""==r&&(r="api");var c=function(e){"number"!=typeof e&&(e=Number(e));var s,t,n=e<0?"-":"",i=["k","M","G","T","P","E","Z","Y"],a=Math.pow(10,3*i.length+3);if((e=Math.abs(Math.round(e)))<1e3)return n+e;if(e>=1e100)return n+"many";if(e>=a)return(n+e).replace(/(\.\d*)?e\+?/i,"e");do{if(e=Math.floor(e),s=i.shift(),t=e%1e6,!((e/=1e3)>=1e3))return e>=10&&e<1e3||e<10&&t%1e3<100?n+Math.floor(e)+s:(n+e).replace(/(\.\d).*/,"$1")+s}while(i.length);return n+"many"};jQuery.fn.essb_get_counters=function(){return this.each(function(){if("undefined"!=typeof essb_settings){var _=e(this).attr("data-essb-counter-pos")||"",b=e(this).attr("data-essb-postid")||"",u=e(this).attr("data-essb-url")||"",d=e(this).attr("data-essb-twitter-url")||"",l=e(this).attr("data-essb-instance")||"",p=essb_settings.ajax_url;"light"==essb_settings.ajax_type&&(p=essb_settings.blog_url);for(var h=s?p+"?action=essb_counts&nonce="+essb_settings.essb3_nonce+"&":essb_settings.essb3_plugin_url+"/public/get-noapi-counts.php?",f=p+"?action=essb_counts&nonce="+essb_settings.essb3_nonce+"&",g="twitter,linkedin,facebook,pinterest,google,stumbleupon,vk,reddit,buffer,love,ok,mwp,xing,pocket,mail,print,comments,yummly".split(","),m="del,digg,weibo,flattr,tumblr,whatsapp,meneame,blogger,amazon,yahoomail,gmail,aol,newsvine,hackernews,evernote,myspace,mailru,viadeo,line,flipboard,sms,viber,telegram".split(","),k=[],v=[],w=[],y=0;y<g.length;y++)if(e(this).find(".essb_link_"+g[y]).length)switch(g[y]){case"stumbleupon":case"vk":case"reddit":case"ok":case"mwp":case"xing":case"pocket":case"linkedin":s?w.push(g[y]):v.push(g[y]);break;case"love":case"comments":w.push(g[y]);break;case"mail":case"print":i||w.push(g[y]);break;case"twitter":"api"==o||"newsc"==o?k.push(g[y]):"self"==o&&w.push(g[y]);break;case"google":"self"==r?w.push(g[y]):v.push(g[y]);break;default:k.push(g[y])}if(t)for(y=0;y<m.length;y++)e(this).find(".essb_link_"+m[y]).length&&w.push(m[y]);var j={};for(y=0;y<k.length;y++){var $=k[y];switch(j[$+""+l]=e(this).find(".essb_link_"+$),j[$+"_inside"+l]=j[$+l].find(".essb_network_name"),$){case"facebook":var x="https://graph.facebook.com/?id="+u+"&fields=og_object{engagement}";e.getJSON(x).done(function(e){z(_,j["facebook"+l],j["facebook_inside"+l],e.og_object.og_object.engagement.count||0)});break;case"twitter":var N=d;d="https://cdn.api.twitter.com/1/urls/count.json?url="+d+"&callback=?";"newsc"==o&&(d="https://public.newsharecounts.com/count.json?url="+N),e.getJSON(d).done(function(e){console.log(e),z(_,j["twitter"+l],j["twitter_inside"+l],e.count)});break;case"linkedin":var J="https://www.linkedin.com/countserv/count/share?format=jsonp&url="+u+"&callback=?";console.log(J),e.getJSON(J).done(function(e){z(_,j["linkedin"+l],j["linkedin_inside"+l],e.count)});break;case"pinterest":var O="https://api.pinterest.com/v1/urls/count.json?callback=?&url="+u;e.getJSON(O).done(function(e){z(_,j["pinterest"+l],j["pinterest_inside"+l],e.count)});break;case"buffer":var S="https://api.bufferapp.com/1/links/shares.json?url="+u+"&callback=?";e.getJSON(S).done(function(e){z(_,j["buffer"+l],j["buffer_inside"+l],e.shares)});break;case"yummly":var I="https://www.yummly.com/services/yum-count?callback=?&url="+u;e.getJSON(I).done(function(e){z(_,j["yummly"+l],j["yummly_inside"+l],e.count)})}}for(y=0;y<v.length;y++){$=v[y];j[$+l]=e(this).find(".essb_link_"+$),j[$+"_inside"+l]=j[$+l].find(".essb_network_name");var M=h+"nw="+$+"&url="+u+"&instance="+l;e.getJSON(M).done(function(e){e.network,e.url;z(_,j[e.network+e.instance],j[e.network+"_inside"+e.instance],e.count)})}var Q=[];for(y=0;y<w.length;y++){$=w[y];if(Q.push($),j[$+l]=e(this).find(".essb_link_"+$),j[$+"_inside"+l]=j[$+l].find(".essb_network_name"),!a){M=f+"nw="+$+"&url="+u+"&instance="+l+"&post="+b;e.getJSON(M).done(function(e){var s=e[e.network]||"0";z(_,j[e.network+e.instance],j[e.network+"_inside"+e.instance],s)})}}if(Q.length>0&&a){M=f+"nw="+Q.join(",")+"&url="+u+"&instance="+l+"&post="+b;e.getJSON(M).done(function(e){for(var s=0;s<Q.length;s++){var t=Q[s],n=e[t]||"0";z(_,j[t+e.instance],j[t+"_inside"+e.instance],n)}})}var z=function(e,s,t,i){if($css_hidden_negative="",""!=n&&parseInt(n)>parseInt(i)&&($css_hidden_negative=' style="display: none;"'),"right"==e)s.append('<span class="essb_counter_right" cnt="'+i+'"'+$css_hidden_negative+">"+c(i)+"</span>");else if("inside"==e)t.html('<span class="essb_counter_inside" cnt="'+i+'"'+$css_hidden_negative+">"+c(i)+"</span>");else if("insidename"==e)t.append('<span class="essb_counter_insidename" cnt="'+i+'"'+$css_hidden_negative+">"+c(i)+"</span>");else if("insidehover"==e){t.closest("a").append('<span class="essb_counter_insidehover" cnt="'+i+'"'+$css_hidden_negative+">"+c(i)+"</span>");var a=t.closest("a").find(".essb_network_name").innerWidth();t.closest("a").find(".essb_counter_insidehover").width(a)}else"insidebeforename"==e?t.prepend('<span class="essb_counter_insidebeforename" cnt="'+i+'"'+$css_hidden_negative+">"+c(i)+"</span>"):"bottom"==e?t.html('<span class="essb_counter_bottom" cnt="'+i+'"'+$css_hidden_negative+">"+c(i)+"</span>"):"hidden"==e?s.append('<span class="essb_counter_hidden" cnt="'+i+'"'+$css_hidden_negative+"></span>"):"topn"==e?s.find("a").prepend('<span class="essb_counter_topn" cnt="'+i+'"'+$css_hidden_negative+">"+c(i)+"</span>"):s.prepend('<span class="essb_counter" cnt="'+i+'"'+$css_hidden_negative+">"+c(i)+"</span>")}}})},jQuery.fn.essb_update_counters=function(){return this.each(function(){var s=e(this).find(".essb_links_list"),t=e(this).attr("data-essb-counter-pos")||"",n=s.find(".essb_totalcount"),i=n.find(".essb_t_nb"),a=s.find(".essb_totalcount_item"),o=a.attr("data-essb-hide-till")||"",r=n.attr("title")||"",_=n.attr("title_after")||"",b=n.attr("data-shares-text")||"";void 0===r&&(r=""),void 0===_&&(_=""),""!=r&&n.prepend('<span class="essb_total_text">'+r+"</span>"),setInterval(function(){var n=0,r=t,_=a.attr("data-counter-pos")||"";""!=_&&(r=_);var u="";switch(r){case"rightm":case"right":u=".essb_counter_right";break;case"inside":u=".essb_counter_inside";break;case"bottom":u=".essb_counter_bottom";break;case"insidename":u=".essb_counter_insidename";break;case"insidebeforename":u=".essb_counter_insidebeforename";break;case"insidehover":u=".essb_counter_insidehover";break;case"hidden":u=".essb_counter_hidden";break;case"topn":u=".essb_counter_topn";break;default:u=".essb_counter"}s.find(u).each(function(){n+=parseInt(e(this).attr("cnt"));var s=parseInt(e(this).attr("cnt"));i||(s=c(s),e(this).text(s))}),""!=b?i.html(c(n)+'<span class="essb_t_nb_after">'+b+"</span>"):i.text(c(n)),""!=o&&parseInt(o)<=n&&a.show()},1200)})},e(".essb_links.essb_counters").essb_get_counters(),e(".essb_links.essb_counters").essb_update_counters()});
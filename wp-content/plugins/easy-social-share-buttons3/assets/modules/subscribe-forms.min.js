!function(e){"use strict";window.essb_ajax_subscribe=function s(t,i){i.preventDefault();var o=e(".essb-subscribe-form-"+t+" #essb-subscribe-from-content-form-mailchimp"),r=e(".essb-subscribe-form-"+t+" .essb-subscribe-form-content"),n=e(r).attr("data-position")||"",c=e(r).attr("data-design")||"";if(o.length){if(e(o).find(".essb-subscribe-confirm").length&&!e(o).find(".essb-subscribe-confirm").is(":checked")){i.preventDefault(),essb_settings.subscribe_terms_error?alert(essb_settings.subscribe_terms_error):alert("You need to confirm that you agree with our terms");return}if(e(o).find(".essb-subscribe-form-content-name-field").length&&essb_settings.subscribe_validate_name&&""==e(o).find(".essb-subscribe-form-content-name-field").val()){essb_settings.subscribe_validate_name_error?alert(essb_settings.subscribe_validate_name_error):alert("You need to fill name field too");return}var a=e(o).find(".essb-subscribe-form-content-email-field").val(),b=e(o).find(".essb-subscribe-form-content-name-field").length?e(o).find(".essb-subscribe-form-content-name-field").val():"";e(o).find(".submit").prop("disabled",!0),e(o).hide(),e(".essb-subscribe-form-"+t).find(".essb-subscribe-loader").show();for(var l=o.attr("action")+"&mailchimp_email="+a+"&mailchimp_name="+b+"&position="+n+"&design="+c+"&title="+encodeURIComponent(document.title),f=document.querySelectorAll(".essb-subscribe-form-"+t+" #essb-subscribe-from-content-form-mailchimp .essb-subscribe-custom"),u=!1,d=0;d<f.length;d++){if(""==f[d].value&&f[d].classList.contains("essb-subscribe-required")){u=!0,alert("You need to fill "+(f[d].getAttribute("placeholder")||""));break}var m=f[d].getAttribute("data-field")||"";""!=m&&(l+="&mailchimp_"+m+"="+f[d].value)}if(u)return;if(window.location.href.indexOf("https://")>-1&&-1==l.indexOf("https://")&&(l=l.replace("http://","https://")),e(".essb-subscribe-captcha").length){var h=e("#g-recaptcha-response").val();e('input[name="cf-turnstile-response"]').length&&(h=e('input[name="cf-turnstile-response"]').val()),l+="&validate_recaptcha=true&recaptcha="+h}e.post(l,{mailchimp_email1:a,mailchimp_name1:b},function(s){if(s){if(console.log(s),"1"==s.code)e(".essb-subscribe-form-"+t).find(".essb-subscribe-form-content-success").show(),e(".essb-subscribe-form-"+t).find(".essb-subscribe-form-content-error").hide(),e(o).hide(),"undefined"!=typeof essb_subscribe_tracking&&essb_subscribe_tracking(n),"undefined"!=typeof essbSubscribeProLog&&essbSubscribeProLog("subscribe_conversion_success",n,c),s.redirect&&setTimeout(function(){s.redirect_new?window.open(s.redirect,"_blank").focus():window.location.href=s.redirect},200),window.pendingUnlockOnSubscribe&&essb_optin_locker_unlock(),essb.trigger("subscribe_success",{design:c,position:n,email:a,name:b});else{"undefined"!=typeof essbSubscribeProLog&&essbSubscribeProLog("subscribe_conversion_fail",n,c);var i=e(".essb-subscribe-form-"+t).find(".essb-subscribe-form-content-error").attr("data-message")||"";""==i&&e(".essb-subscribe-form-"+t).find(".essb-subscribe-form-content-error").attr("data-message",e(".essb-subscribe-form-"+t).find(".essb-subscribe-form-content-error").text()),90==s.code?e(".essb-subscribe-form-"+t).find(".essb-subscribe-form-content-error").text(s.message):e(".essb-subscribe-form-"+t).find(".essb-subscribe-form-content-error").text(i),e(".essb-subscribe-form-"+t).find(".essb-subscribe-form-content-error").show(),e(".essb-subscribe-form-"+t).find(".essb-subscribe-from-content-form").show(),e(o).find(".submit").prop("disabled",!1)}e(".essb-subscribe-form-"+t).find(".essb-subscribe-loader").hide()}},"json")}},e(document).ready(function(){var s=!1,t=0,i=0,o=window.essb_manualform_show=function(){r("manual"),s=!1},r=function(t){if(!s){var i=".essb-optinbooster-"+t,o=".essb-optinbooster-overlay-"+t;if(e(i).length){var r=e(i).attr("data-single")||"",n=e(i).attr("data-single-days")||"";if("1"==r){var c="essbOptinBooster";if("yes"==l(c))return;n=""!=n&&Number(n)?Number(n):14,b(c,"yes",n)}jQuery.fn.extend({center:function(){return this.each(function(){var e=(jQuery(window).height()-jQuery(this).outerHeight())/2,s=(jQuery(window).width()-jQuery(this).outerWidth())/2;jQuery(this).css({position:"fixed",margin:0,top:(e>0?e:0)+"px",left:(s>0?s:0)+"px"})})}});var a=jQuery(window).width();jQuery("document").height();var f=700;if(a<f&&(f=a-60),e(i).css({width:f+"px"}),e(i).center(),e(i).fadeIn(400),e(o).fadeIn(200),e(i).addClass("active-booster"),e(o).addClass("active-booster-overlay"),s=!0,"undefined"!=typeof essbSubscribeProLog){var u=e(i+" .essb-subscribe-form-content").data("position")||"",d=e(i+" .essb-subscribe-form-content").data("design")||"";essbSubscribeProLog("subscribe_conversion_loaded",u,d)}}}},n=function(){e(".active-booster").fadeOut(200),e(".active-booster").removeClass("active-booster"),e(".active-booster-overlay").fadeOut(400),e(".active-booster-overlay").removeClass("active-booster-overlay")};e(".essb-optinbooster-exit")&&jQuery(document).on("mouseleave",function(e){e.clientY<0&&r("exit")});var c=function(){if(!s){var e=jQuery(window).scrollTop(),i=jQuery(document).height()-jQuery(window).height();e/i*100>t&&t>0&&r("scroll")}};if(e(".essb-optinbooster-scroll")&&(t=parseFloat(t=e(".essb-optinbooster-scroll").attr("data-scroll")||""),e(window).on("scroll",c)),e(".essb-optinbooster-time")&&(i=parseFloat(i=e(".essb-optinbooster-time").attr("data-delay")||""),setTimeout(function(){r("time")},i*=1e3)),e(".essb-optinbooster-manual").length){var a=e(".essb-optinbooster-manual").data("manual-selector")||"";""!=a&&e(a).length&&e(a).on("click",function(e){e.preventDefault(),o()})}function b(e,s,t){var i=new Date;i.setTime(i.getTime()+864e5*t);var o="expires="+i.toGMTString();document.cookie=e+"="+s+"; "+o+"; path=/"}function l(e){for(var s=e+"=",t=document.cookie.split(";"),i=0;i<t.length;i++){var o=t[i].trim();if(0==o.indexOf(s))return o.substring(s.length,o.length)}return""}e(".essb-optinbooster-overlay").each(function(){e(this).on("click",function(e){e.preventDefault(),n()})}),e(".essb-optinbooster-close").each(function(){e(this).on("click",function(e){e.preventDefault(),n()})});var f=!1,u=0,d=0,m=function(s){if(!f){var t=".essb-optinflyout-"+s;if(e(t).length){if("1"==(e(t).attr("data-single")||"")){var i="essbOptinFlyout";if("yes"==l(i))return;b(i,"yes",14)}jQuery.fn.extend({center:function(){return this.each(function(){var e=(jQuery(window).height()-jQuery(this).outerHeight())/2,s=(jQuery(window).width()-jQuery(this).outerWidth())/2;jQuery(this).css({position:"fixed",margin:0,top:(e>0?e:0)+"px",left:(s>0?s:0)+"px"})})}});var o=jQuery(window).width();jQuery("document").height();var r=500;if(o<r&&(r=o-60),e(t).css({width:r+"px"}),e(t).slideDown(400),e(t).addClass("active-flyout"),f=!0,"undefined"!=typeof essbSubscribeProLog){var n=e(t+" .essb-subscribe-form-content").data("position")||"",c=e(t+" .essb-subscribe-form-content").data("design")||"";essbSubscribeProLog("subscribe_conversion_loaded",n,c)}}}},h=function(){e(".active-flyout").fadeOut(200),e(".active-flyout").removeClass("active-flyout")},p=function(){var e=window.event;if(e){var s=e.relatedTarget||e.toElement;s&&"HTML"!==s.nodeName||m("exit")}};e(".essb-optinflyout-exit")&&e(document).mouseout(p);var v=function(){if(!f){var e=jQuery(window).scrollTop(),s=jQuery(document).height()-jQuery(window).height();e/s*100>u&&u>0&&m("scroll")}};e(".essb-optinflyout-scroll")&&(u=parseFloat(u=e(".essb-optinflyout-scroll").attr("data-scroll")||""),e(window).on("scroll",v)),e(".essb-optinflyout-time")&&(d=parseFloat(d=e(".essb-optinflyout-time").attr("data-delay")||""),setTimeout(function(){m("time")},d*=1e3)),e(".essb-optinflyout-overlay").each(function(){e(this).on("click",function(e){e.preventDefault(),h()})}),e(".essb-optinflyout-close").each(function(){e(this).on("click",function(e){e.preventDefault(),h()})});var $=!1,g=0,y=0,k="essb_optin_locker_unlocked";window.pendingUnlockOnSubscribe=!1,window.essb_optin_locker_unlock=function(){_();var s=e(".essb-optinlocker").data("unlock")||"";Number(s)||(s=90),b(k,"yes",s)};var x=function(s){if(!$){var t=".essb-optinlocker-"+s,i=".essb-optinlocker-overlay-"+s;if(e(t).length&&"yes"!=l(k)){jQuery.fn.extend({center:function(){return this.each(function(){var e=(jQuery(window).height()-jQuery(this).outerHeight())/2,s=(jQuery(window).width()-jQuery(this).outerWidth())/2;jQuery(this).css({position:"fixed",margin:0,top:(e>0?e:0)+"px",left:(s>0?s:0)+"px"})})}});var o=jQuery(window).width();jQuery("document").height();var r=700;if(o<r&&(r=o-60),e(t).css({width:r+"px"}),e(t).center(),e(t).fadeIn(400),e(i).fadeIn(200),e(t).addClass("active-locker"),e(i).addClass("active-locker-overlay"),e("body").addClass("removeScroll"),$=!0,window.pendingUnlockOnSubscribe=!0,"undefined"!=typeof essbSubscribeProLog){var n=e(t+" .essb-subscribe-form-content").data("position")||"",c=e(t+" .essb-subscribe-form-content").data("design")||"";essbSubscribeProLog("subscribe_conversion_loaded",n,c)}}}},_=function(){e(".active-locker").fadeOut(200),e(".active-locker").removeClass("active-locker"),e(".active-locker-overlay").fadeOut(400),e(".active-locker-overlay").removeClass("active-locker-overlay"),e("body").removeClass("removeScroll")},w=function(){if(!$){var e=jQuery(window).scrollTop(),s=jQuery(document).height()-jQuery(window).height();e/s*100>g&&g>0&&x("scroll")}};e(".essb-optinlocker-scroll")&&(g=parseFloat(g=e(".essb-optinlocker-scroll").attr("data-scroll")||""),e(window).on("scroll",w)),e(".essb-optinlocker-time")&&(y=parseFloat(y=e(".essb-optinlocker-time").attr("data-delay")||""),setTimeout(function(){x("time")},y=1e3*i)),e(".essb-optinlocker-close").each(function(){e(this).on("click",function(e){e.preventDefault(),_()})}),e(".essb-subscribe-captcha").length&&e(".essb-subscribe-captcha").each(function(){var s=e(this).attr("id")||"";""!=s&&"undefined"!=typeof essb_subscribe_recaptcha&&essb_subscribe_recaptcha&&essb_subscribe_recaptcha.recaptchaSitekey&&setTimeout(function(){grecaptcha.render(essb_subscribe_recaptcha.turnstile?"#"+s:s,{sitekey:essb_subscribe_recaptcha.recaptchaSitekey})},500)})})}(jQuery);
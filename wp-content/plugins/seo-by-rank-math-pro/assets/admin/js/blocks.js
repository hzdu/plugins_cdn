(()=>{"use strict";const e=lodash,t=wp.i18n,o=wp.hooks,a=wp.components,n=wp.blocks,r=wp.element,l=wp.data,s=wp.blockEditor;function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function p(e,t,o){return(t=c(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var o=0;o<t.length;o++){var a=t[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,c(a.key),a)}}function c(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var a=o.call(e,t||"default");if("object"!==i(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:String(t)}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,a=y(e);if(t){var n=y(this).constructor;o=Reflect.construct(a,arguments,n)}else o=a.apply(this,arguments);return d(this,o)}}function d(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var f=function(o){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(c,o);var n,r,l,i=_(c);function c(){var e;return u(this,c),(e=i.apply(this,arguments)).getAdditionalSettings=e.getAdditionalSettings.bind(b(e)),e.getMapSettings=e.getMapSettings.bind(b(e)),e}return n=c,(r=[{key:"render",value:function(){var e=this,o=this.props,n=o.className,r=o.setAttributes,l=o.attributes,i=o.locationsData,p=o.termsData;return wp.element.createElement("div",{id:"rank-math-local",className:"rank-math-block "+n},wp.element.createElement(s.InspectorControls,{key:"inspector"},wp.element.createElement(a.PanelBody,{title:(0,t.__)("Settings","rank-math-pro"),initialOpen:"true"},wp.element.createElement(a.SelectControl,{label:(0,t.__)("Type","rank-math-pro"),value:l.type,options:[{value:"address",label:(0,t.__)("Address","rank-math-pro")},{value:"opening-hours",label:(0,t.__)("Opening Hours","rank-math-pro")},{value:"map",label:(0,t.__)("Map","rank-math-pro")},{value:"store-locator",label:(0,t.__)("Store Locator","rank-math-pro")}],onChange:function(e){return r({type:e})}}),"store-locator"!==l.type&&wp.element.createElement(a.SelectControl,{label:(0,t.__)("Locations","rank-math-pro"),value:l.locations,options:i,onChange:function(e){return r({locations:e})}}),"store-locator"!==l.type&&wp.element.createElement(a.SelectControl,{label:(0,t.__)("Location Categories","rank-math-pro"),multiple:!0,value:l.terms,options:p,onChange:function(e){return r({terms:e})}}),wp.element.createElement(a.TextControl,{type:"number",label:(0,t.__)("Maximum number of locations to show","rank-math-pro"),value:l.limit,onChange:function(t){return e.props.setAttributes({limit:t})}}),"address"===l.type&&this.getAddressSettings(),"opening-hours"===l.type&&this.getHoursSettings(),"map"===l.type&&this.getMapSettings(),"store-locator"===l.type&&this.getStoreLocatorSettings()),"address"===l.type&&this.getAdditionalSettings("getHoursSettings"),("map"===l.type||"store-locator"===l.type)&&this.getAdditionalSettings("getAddressSettings"),"store-locator"===l.type&&this.getAdditionalSettings("getMapSettings")),this.getBlockContent(l))}},{key:"getBlockContent",value:function(e){return"map"===e.type?wp.element.createElement("img",{src:rankMath.previewImage,alt:(0,t.__)("Preview Image","rank-math-pro")}):wp.element.createElement(a.ServerSideRender,{block:"rank-math/local-business",attributes:e})}},{key:"getAdditionalSettings",value:function(e){var o=(0,t.__)("Address Settings","rank-math-pro");return"getHoursSettings"===e?o=(0,t.__)("Opening Hours Settings","rank-math-pro"):"getMapSettings"===e&&(o=(0,t.__)("Map Settings","rank-math-pro")),wp.element.createElement(a.PanelBody,{title:o},this[e]())}},{key:"getFieldsData",value:function(t){var o=this,n=[];return(0,e.forEach)(t,(function(e,t){"boolean"===e.type&&n.push(wp.element.createElement(a.ToggleControl,{label:e.label,checked:o.props.attributes[t],onChange:function(e){return o.props.setAttributes(p({},t,e))}})),"string"===e.type&&n.push(wp.element.createElement(a.TextControl,{label:e.label,value:o.props.attributes[t],onChange:function(e){return o.props.setAttributes(p({},t,e))}})),"select"===e.type&&n.push(wp.element.createElement(a.SelectControl,{label:e.label,value:o.props.attributes[t],options:e.options,onChange:function(e){return o.props.setAttributes(p({},t,e))}})),"range"===e.type&&n.push(wp.element.createElement(a.RangeControl,{label:e.label,value:o.props.attributes[t],onChange:function(e){return o.props.setAttributes(p({},t,e))},min:e.min,max:e.max}))})),n}},{key:"getMapSettings",value:function(){var e=this,o=[],n="store-locator"===this.props.attributes.type;if(n&&o.push(wp.element.createElement(a.ToggleControl,{label:(0,t.__)("Show Map","rank-math-pro"),checked:this.props.attributes.show_map,onChange:function(t){return e.props.setAttributes({show_map:t})}})),n&&!this.props.attributes.show_map)return o;var r={map_style:{label:(0,t.__)("Map Type","rank-math-pro"),type:"select",options:[{value:"roadmap",label:(0,t.__)("Roadmap","rank-math-pro")},{value:"hybrid",label:(0,t.__)("Hybrid","rank-math-pro")},{value:"satellite",label:(0,t.__)("Satellite","rank-math-pro")},{value:"terrain",label:(0,t.__)("Terrain","rank-math-pro")}]},map_width:{label:(0,t.__)("Map Width","rank-math-pro"),type:"string"},map_height:{label:(0,t.__)("Map Height","rank-math-pro"),type:"string"},show_category_filter:{label:(0,t.__)("Show Category filter","rank-math-pro"),type:"boolean"},zoom_level:{label:(0,t.__)("Zoom Level","rank-math-pro"),type:"range",min:-1,max:19},allow_zoom:{label:(0,t.__)("Allow Zoom","rank-math-pro"),type:"boolean"},allow_scrolling:{label:(0,t.__)("Allow Zoom by scroll","rank-math-pro"),type:"boolean"},allow_dragging:{label:(0,t.__)("Allow Dragging","rank-math-pro"),type:"boolean"},show_marker_clustering:{label:(0,t.__)("Show Marker Clustering","rank-math-pro"),type:"boolean"},show_infowindow:{label:(0,t.__)("Show InfoWindow","rank-math-pro"),type:"boolean"},show_route_planner:{label:(0,t.__)("Show Route Planner","rank-math-pro"),type:"boolean"},route_label:{label:(0,t.__)("Route Label","rank-math-pro"),type:"string"}};return n||(delete r.show_route_planner,delete r.route_label),o.concat(this.getFieldsData(r))}},{key:"getStoreLocatorSettings",value:function(){var e={show_radius:{label:(0,t.__)("Show radius","rank-math-pro"),type:"boolean"},search_radius:{label:(0,t.__)("Search Locations within the radius","rank-math-pro"),type:"range",min:5,max:1e3},show_category_filter:{label:(0,t.__)("Add dropdown to filter results by category","rank-math-pro"),type:"boolean"},show_nearest_location:{label:(0,t.__)("Show nearest location if none is found within radius","rank-math-pro"),type:"boolean"}};return this.getFieldsData(e)}},{key:"getAddressSettings",value:function(){var e={show_company_name:{label:(0,t.__)("Show Company Name","rank-math-pro"),type:"boolean"},show_company_address:{label:(0,t.__)("Show Company Address","rank-math-pro"),type:"boolean"},show_on_one_line:{label:(0,t.__)("Show address on one line","rank-math-pro"),type:"boolean"},show_state:{label:(0,t.__)("Show State","rank-math-pro"),type:"boolean"},show_country:{label:(0,t.__)("Show Country","rank-math-pro"),type:"boolean"},show_telephone:{label:(0,t.__)("Show Primary number","rank-math-pro"),type:"boolean"},show_secondary_number:{label:(0,t.__)("Show Secondary number","rank-math-pro"),type:"boolean"},show_fax:{label:(0,t.__)("Show FAX number","rank-math-pro"),type:"boolean"},show_email:{label:(0,t.__)("Show Email","rank-math-pro"),type:"boolean"},show_url:{label:(0,t.__)("Show Business URL","rank-math-pro"),type:"boolean"},show_logo:{label:(0,t.__)("Show Logo","rank-math-pro"),type:"boolean"},show_vat_id:{label:(0,t.__)("Show VAT number","rank-math-pro"),type:"boolean"},show_tax_id:{label:(0,t.__)("Show TAX ID","rank-math-pro"),type:"boolean"},show_coc_id:{label:(0,t.__)("Show COC number","rank-math-pro"),type:"boolean"},show_priceRange:{label:(0,t.__)("Show Price Indication","rank-math-pro"),type:"boolean"}};return"address"===this.props.attributes.type&&delete e.show_company_address,this.getFieldsData(e)}},{key:"getHoursSettings",value:function(){var o=this,n=[],r=this.props.attributes.type;if("address"===r&&n.push(wp.element.createElement(a.ToggleControl,{label:(0,t.__)("Show Opening Hours","rank-math-pro"),checked:this.props.attributes.show_opening_hours,onChange:function(e){return o.props.setAttributes({show_opening_hours:e})}})),"opening-hours"===r||this.props.attributes.show_opening_hours){var l=this.props.attributes.show_days.split(",");(0,e.forEach)(["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],(function(e){n.push(wp.element.createElement(a.ToggleControl,{label:(0,t.sprintf)((0,t.__)("Show %s","rank-math-pro"),e),checked:l.includes(e),onChange:function(){var t=l.indexOf(e);t>-1?l.splice(t,1):l.push(e),o.props.setAttributes({show_days:l.toString()})}}))})),n.push(wp.element.createElement(a.ToggleControl,{label:(0,t.__)("Hide Closed Days","rank-math-pro"),checked:this.props.attributes.hide_closed_days,onChange:function(e){return o.props.setAttributes({hide_closed_days:e})}})),n.push(wp.element.createElement(a.ToggleControl,{label:(0,t.__)("Show open now label after opening hour for current day","rank-math-pro"),checked:this.props.attributes.show_opening_now_label,onChange:function(e){return o.props.setAttributes({show_opening_now_label:e})}})),this.props.attributes.show_opening_now_label&&n.push(wp.element.createElement(a.TextControl,{label:(0,t.__)("Show open now label after opening hour for current day","rank-math-pro"),value:this.props.attributes.opening_hours_note,onChange:function(e){return o.props.setAttributes({opening_hours_note:e})}}))}return n}}])&&h(n.prototype,r),l&&h(n,l),Object.defineProperty(n,"prototype",{writable:!1}),c}(r.Component);const g=(0,l.withSelect)((function(e){var o=e("core").getEntityRecords("postType","rank_math_locations",{per_page:-1}),a=[];o&&(a.push({value:0,label:(0,t.__)("All Locations","rank-math-pro")}),o.forEach((function(e){a.push({value:e.id,label:e.title.rendered})})));var n=e("core").getEntityRecords("taxonomy","rank_math_location_category",{per_page:-1}),r=[];return n&&n.forEach((function(e){r.push({value:e.id,label:e.name})})),{locationsData:a,termsData:r}}))(f);function w(e){return function(e){if(Array.isArray(e))return k(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return k(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,a=new Array(t);o<t;o++)a[o]=e[o];return a}var v,S;"undefined"==typeof rankMath||(0,e.isUndefined)(rankMath.limitLocations)||(v=[(0,t.__)("Local Business","rank-math-pro"),(0,t.__)("Rank Math","rank-math-pro"),(0,t.__)("Contact","rank-math-pro")],S={type:{type:"string",default:"address"},locations:{type:"string",default:""},terms:{type:"array",default:[]},limit:{type:"string",default:rankMath.limitLocations},show_company_name:{type:"boolean",default:!0},show_company_address:{type:"boolean",default:!0},show_on_one_line:{type:"boolean",default:!1},show_state:{type:"boolean",default:!0},show_country:{type:"boolean",default:!0},show_telephone:{type:"boolean",default:!0},show_secondary_number:{type:"boolean",default:!0},show_fax:{type:"boolean",default:!1},show_email:{type:"boolean",default:!0},show_url:{type:"boolean",default:!0},show_logo:{type:"boolean",default:!0},show_vat_id:{type:"boolean",default:!1},show_tax_id:{type:"boolean",default:!1},show_coc_id:{type:"boolean",default:!1},show_priceRange:{type:"boolean",default:!1},show_opening_hours:{type:"boolean",default:!1},show_days:{type:"string",default:"Monday,Tuesday,Wednesday,Thursday,Friday,Saturday,Sunday"},hide_closed_days:{type:"boolean",default:!1},show_opening_now_label:{type:"boolean",default:!1},opening_hours_note:{type:"string",default:"Open Now"},show_map:{type:"boolean",default:!1},map_style:{type:"string",default:rankMath.mapStyle},map_width:{type:"string",default:"100%"},map_height:{type:"string",default:"300px"},zoom_level:{type:"integer",default:-1},allow_zoom:{type:"boolean",default:!0},allow_scrolling:{type:"boolean",default:!0},allow_dragging:{type:"boolean",default:!0},show_route_planner:{type:"boolean",default:!0},route_label:{type:"string",default:""},show_category_filter:{type:"boolean",default:!1},show_marker_clustering:{type:"boolean",default:!0},show_infowindow:{type:"boolean",default:!0},show_radius:{type:"boolean",default:!0},show_nearest_location:{type:"boolean",default:!0},search_radius:{type:"string",default:10}},(0,n.registerBlockType)("rank-math/local-business",{title:(0,t.__)("Local Business by Rank Math","rank-math-pro"),description:(0,t.__)("Rank Math's Local Business block","rank-math-pro"),category:"rank-math-blocks",icon:"editor-ul",label:(0,t.__)("Local Business by Rank Math","rank-math-pro"),keywords:v,attributes:S,edit:g,save:function(){return null}})),(0,o.addFilter)("rank_math_block_howto_attributes","rank-math-pro",(function(e){return e.estimatedCost={type:"string",default:""},e.estimatedCostCurrency={type:"string",default:"USD"},e.supply={type:"string",default:""},e.tools={type:"string",default:""},e.material={type:"string",default:""},e})),(0,o.addFilter)("rank_math_block_howto_data","rank-math-pro",(function(e,o){var n=o.attributes,r=o.setAttributes;return wp.element.createElement(React.Fragment,null,n.hasOwnProperty("estimatedCost")&&wp.element.createElement("div",{className:"rank-math-howto-estimated-cost"},wp.element.createElement(a.TextControl,{label:(0,t.__)("Estimated Cost","rank-math-pro"),className:"rank-math-block-text",value:n.estimatedCostCurrency,placeholder:(0,t.__)("USD","rank-math-pro"),onChange:function(e){r({estimatedCostCurrency:e})}}),wp.element.createElement(a.TextControl,{type:"number",className:"rank-math-block-text",value:n.estimatedCost,placeholder:(0,t.__)("Estimated Cost","rank-math-pro"),onChange:function(e){r({estimatedCost:e})}})),n.hasOwnProperty("supply")&&wp.element.createElement(a.TextareaControl,{label:(0,t.__)("Supply","rank-math-pro"),className:"rank-math-block-textarea",help:(0,t.__)("Add one supply element per line.","rank-math-pro"),value:n.supply,onChange:function(e){r({supply:e})}}),n.hasOwnProperty("tools")&&wp.element.createElement(a.TextareaControl,{label:(0,t.__)("Tools","rank-math-pro"),className:"rank-math-block-textarea",help:(0,t.__)("Add one tool per line.","rank-math-pro"),value:n.tools,onChange:function(e){r({tools:e})}}),n.hasOwnProperty("material")&&wp.element.createElement(a.TextareaControl,{label:(0,t.__)("Material","rank-math-pro"),className:"rank-math-block-textarea",value:n.material,onChange:function(e){r({material:e})}}))}));var C=function(e,t){return function(){var o=t.setAttributes,a=t.index,n=w(t.questions);1===e&&a<n.length-1&&(n[a]=t.questions[a+e],n[a+e]=t.questions[a],o({questions:n})),-1===e&&a>0&&(n[a]=t.questions[a+e],n[a+e]=t.questions[a],o({questions:n}))}};(0,o.addFilter)("rank_math_block_faq_actions","rank-math-pro",(function(e,o){var n=o.questions,r=o.index;if(!(n.length<2))return wp.element.createElement(React.Fragment,null,wp.element.createElement(a.Button,{icon:"arrow-up",className:0===r?"rank-math-item-move move-up rank-math-item-disabled":"rank-math-item-move move-up",title:(0,t.__)("Move up","rank-math-pro"),onClick:C(-1,o)}),wp.element.createElement(a.Button,{icon:"arrow-down",className:r===n.length-1?"rank-math-item-move move-down rank-math-item-disabled ":"rank-math-item-move move-down",onClick:C(1,o),title:(0,t.__)("Move down","rank-math-pro")}))})),(0,o.addFilter)("rank_math_block_schema_attributes","rank-math-pro",(function(e){return e.id={type:"string",default:""},e}))})();
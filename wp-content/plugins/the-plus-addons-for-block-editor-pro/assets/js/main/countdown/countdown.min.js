var loopTime,updatedtime="";document.addEventListener("DOMContentLoaded",function(){tpcountDown(document)});function tpcountDown(a){var b=a.querySelectorAll(".tp-countdown");b&&b.forEach(a=>{var b=JSON.parse(a.dataset.countdata);b&&b.type&&"normal"===b.type?(b.style&&"style-1"===b.style&&WidgetCountDownHandler(b.blockId),b.style&&"style-2"===b.style&&styleFlipdown(b.blockId),b.style&&"style-3"===b.style&&styleProgressbar(b.blockId)):b&&b.type&&"scarcity"===b.type?b.style&&"style-1"===b.style?tpgb_scarcity_1(b.blockId):b.style&&"style-2"===b.style?tpgb_scarcity_2(b.blockId):b.style&&"style-3"===b.style&&tpgb_scarcity_3(b.blockId):b&&b.type&&"numbers"===b.type&&tpgb_fakenumber_countdown(b.blockId)})}function WidgetCountDownHandler(a){var b=document.querySelectorAll("."+a+".tp-countdown");if(0<b.length){function c(){b.forEach(b=>{var c=b.querySelector(".tpgb-countdown-counter");if(c){var d=b,e=c.dataset.time,f=d.dataset.offset,g=d.dataset.day,h=d.dataset.hour,i=d.dataset.min,j=d.dataset.sec;e&&""!=e&&downCount(d,{date:e,offset:f,text_day:g,text_hour:h,text_minute:i,text_second:j},function(){countdownExpiry(a)})}})}c(),b.forEach(a=>{a.addEventListener("change",function(){c()})})}}function styleFlipdown(a){var b=document.querySelector("."+a+" .flipdown")?document.querySelector("."+a+" .flipdown").dataset.time:"",c=document.querySelector("."+a),d=c.dataset.offset,e=c.dataset.day,f=c.dataset.hour,g=c.dataset.min,h=c.dataset.sec,i=c.dataset.filptheme;e=null==e?"":e,f=null==f?"":f,g=null==g?"":g,h=null==h?"":h,b&&null!=b&&(b-=3600*d,new FlipDown(b,a,{theme:i,headings:[e,f,g,h]}).start().ifEnded(function(){countdownExpiry(a)}))}function styleProgressbar(a){var b=document.getElementById("s"+a),c=document.getElementById("m"+a),d=document.getElementById("h"+a),e=document.getElementById("d"+a),f={duration:200,color:"#000000",trailColor:"#ddd",strokeWidth:5,trailWidth:3};if(null!=b){var g=new ProgressBar.Circle(b,f),h=new ProgressBar.Circle(c,f),i=new ProgressBar.Circle(d,f),j=new ProgressBar.Circle(e,f),k=document.querySelector("."+a),l=k.querySelector(".tpgb-countdown-counter").dataset.time,m=k.dataset.day,n=k.dataset.hour,o=k.dataset.min,p=k.dataset.sec;m=null==m?"":m,n=null==n?"":n,o=null==o?"":o,p=null==p?"":p;var q=setInterval(function(){var b=new Date,c=new Date(l),d=c-b,e=Math.floor(1*(d/86400000));j.animate(e/(e+5),function(){j.setText("<span class=\"number\">"+e+"</span><span class=\"label\">"+m+"</span>")});var f=Math.floor(1*(d%86400000/3600000));i.animate(f/24,function(){i.setText("<span class=\"number\">"+f+"</span><span class=\"label\">"+n+"</span>")});var k=Math.floor(1*(d%86400000%3600000/60000));h.animate(k/60,function(){h.setText("<span class=\"number\">"+k+"</span><span class=\"label\">"+o+"</span>")});var r=Math.floor(1*(d%86400000%3600000%60000/1e3));g.animate(r/60,function(){g.setText("<span class=\"number\">"+r+"</span><span class=\"label\">"+p+"</span>")}),0==e+f+k+r&&(countdownExpiry(a),clearInterval(q))},1e3)}}function tpgb_scarcity_1(a){var b=document.querySelectorAll("."+a+".tp-countdown");if(0<b.length){var c=b[0],d=JSON.parse(c.dataset.countdata),e=c.querySelectorAll(".tpgb-countdown-counter"),f=new Date().getTime()+6e4*d.sctimeli;if(d&&d.storetype&&"cookie"==d.storetype)var g="tpgb-"+d.type+"-"+d.style+"-"+a+"-"+d.sctimeli;if(0<e.length)if("cookie"==d.storetype){localStorage.getItem(g)||localStorage.setItem(g,+new Date(f)),updatedtime=+localStorage.getItem(g),loopTime=updatedtime+6e4*d.delayminit;var h=c.s1Interval=setInterval(function(){var b=Math.floor((updatedtime-new Date)/6e4);if(0<b+1){var e=new Date,f=updatedtime-e,i=Math.floor(f/86400000),j=Math.floor(f%86400000/3600000),k=Math.floor(f%3600000/60000),l=Math.floor(f%60000/1e3);0<c.querySelectorAll(".days").length&&(c.querySelector(".days").innerHTML=i),0<c.querySelectorAll(".hours").length&&(c.querySelector(".hours").innerHTML=j),0<c.querySelectorAll(".minutes").length&&(c.querySelector(".minutes").innerHTML=k),0<c.querySelectorAll(".seconds").length&&(c.querySelector(".seconds").innerHTML=l)}else countdownExpiry(a,g),"no"==d.fakeloop&&clearInterval(h)},1e3)}else if("normal"==d.storetype)var h=setInterval(function(){var a=+new Date(f),b=new Date,d=a-b,e=Math.floor(d/86400000),g=Math.floor(d%86400000/3600000),i=Math.floor(d%3600000/60000),j=Math.floor(d%60000/1e3);0<=e+g+i+j?(0<c.querySelectorAll(".days").length&&(c.querySelector(".days").innerHTML=e),0<c.querySelectorAll(".hours").length&&(c.querySelector(".hours").innerHTML=g),0<c.querySelectorAll(".minutes").length&&(c.querySelector(".minutes").innerHTML=i),0<c.querySelectorAll(".seconds").length&&(c.querySelector(".seconds").innerHTML=j)):clearInterval(h)},1e3)}}function tpgb_scarcity_2(a){var b=document.querySelector("."+a);if(b){var c=JSON.parse(b.dataset.countdata),d=document.querySelector("."+a+" .flipdown"),e=b.dataset.day,f=b.dataset.hour,g=b.dataset.min,h=b.dataset.sec,i=b.dataset.filptheme,j="tpgb-"+c.type+"-"+c.style+"-"+a+"-"+c.sctimeli;if(e=null==e?"":e,f=null==f?"":f,g=null==g?"":g,h=null==h?"":h,b.classList.contains("countdown-style-2"))if(b.insertAdjacentHTML("afterbegin","<div id ="+a+" class=\"flipdown tpgb-countdown-counter\"></div>"),"cookie"==c.storetype){var k=new Date().getTime()+6e4*c.sctimeli;localStorage.getItem(j)||localStorage.setItem(j,+new Date(k));var l=+localStorage.getItem(j),m=new Date(l).getTime()/1e3,n=Math.floor((l-new Date)/6e4);loopTime=l+60000*c.delayminit,0<=n?new FlipDown(m,a,{theme:i,headings:[e,f,g,h]}).start().ifEnded(function(){countdownExpiry(a,j)}):countdownExpiry(a,j)}else if("normal"==c.storetype){var k=new Date().getTime()+6e4*c.sctimeli,l=+new Date(k),m=new Date(l).getTime()/1e3;new FlipDown(m,a,{theme:i,headings:[e,f,g,h]}).start().ifEnded(function(){})}}}function tpgb_scarcity_3(a){var b=document.querySelector("."+a+".countdown-style-3");if(b){var c=JSON.parse(b.dataset.countdata),d="tpgb-"+c.type+"-"+c.style+"-"+a+"-"+c.sctimeli,e=new Date().getTime()+6e4*c.sctimeli;tpgb_progressbar_sethtml(a,b);var f=document.getElementById("s"+a),g=document.getElementById("m"+a),h=document.getElementById("h"+a),i=document.getElementById("d"+a),j={duration:200,color:"#000000",trailColor:"#ddd",strokeWidth:5,trailWidth:3},k=new ProgressBar.Circle(f,j),l=new ProgressBar.Circle(g,j),m=new ProgressBar.Circle(h,j),n=new ProgressBar.Circle(i,j),o=document.querySelector("."+a),p=o.dataset.day,q=o.dataset.hour,r=o.dataset.min,s=o.dataset.sec;if(p=null==p?"":p,q=null==q?"":q,r=null==r?"":r,s=null==s?"":s,"cookie"==c.storetype){if(localStorage.getItem(d)||localStorage.setItem(d,+new Date(e)),f){var t=+localStorage.getItem(d),u=Math.floor((t-new Date)/6e4);loopTime=t+6e4*c.delayminit;var v=new Date(t).getTime();if(0<u+1)var w=setInterval(function(){var b=new Date,c=new Date(v),d=c-b,e=Math.floor(1*(d/86400000));n.animate(e/(e+5),function(){n.setText("<span class = \"number\">"+e+"</span><span class=\"label\">"+p+"</span>")});var f=Math.floor(1*(d%86400000/3600000));m.animate(f/24,function(){m.setText("<span class=\"number\">"+f+"</span><span class=\"label\">"+q+"</span>")});var g=Math.floor(1*(d%86400000%3600000/60000));l.animate(g/60,function(){l.setText("<span class = \"number\">"+g+"</span><span class = \"label\">"+r+"</span>")});var h=Math.floor(1*(d%86400000%3600000%60000/1e3));k.animate(h/60,function(){k.setText("<span class = \"number\">"+h+"</span><span class = \"label\">"+s+"</span>")}),0==e+f+g+h&&(countdownExpiry(a),clearInterval(w))},1e3);else countdownExpiry(a,d)}}else if("normal"==c.storetype&&null!=f)var t=+new Date(e),v=new Date(t).getTime(),w=setInterval(function(){var b=new Date,c=new Date(v),e=c-b,f=Math.floor(1*(e/86400000));n.animate(f/(f+5),function(){n.setText("<span class = \"number\">"+f+"</span><span class=\"label\">"+p+"</span>")});var g=Math.floor(1*(e%86400000/3600000));m.animate(g/24,function(){m.setText("<span class=\"number\">"+g+"</span><span class=\"label\">"+q+"</span>")});var h=Math.floor(1*(e%86400000%3600000/60000));l.animate(h/60,function(){l.setText("<span class = \"number\">"+h+"</span><span class = \"label\">"+r+"</span>")});var i=Math.floor(1*(e%86400000%3600000%60000/1e3));k.animate(i/60,function(){k.setText("<span class = \"number\">"+i+"</span><span class = \"label\">"+s+"</span>")}),0==f+g+h+i&&(countdownExpiry(a,d),clearInterval(w))},1e3)}}function tpgb_fakenumber_countdown(a){let b=document.querySelector("."+a),c=JSON.parse(b.getAttribute("data-countdata"));if(c&&c.storetype&&"cookie"===c.storetype)var d="tpgb-"+c.type+"-"+a+"-"+c.initNum;let e,f=b.querySelector(".tpgb-number-count"),g=c.initNum,h=c.endNum,i=c.numRange,j=c.changeInterval,k=c.fenaLoop,l=c.massage;if(f.innerHTML="",f.innerHTML="<span class=\"tpgb-fake-text\">"+l.replace("{visible_counter}","<span class=\"tpgb-fake-visiblecounter\">"+g+"</span>")+"</span>",+g>=+h){let a,b;"normal"==c.storetype?a=g:"cookie"==c.storetype&&!localStorage.getItem(d)&&tpgb_fakereset(d,g),e=setInterval(function(){let j=1<+i?Math.round(Math.random()*+i):1;"normal"==c.storetype?b=g-=j:"cookie"==c.storetype&&(b=g=localStorage.getItem(d)-j,tpgb_fakereset(d,g)),+b>=+h?tpgb_fake_addtext(l,b,f):c.fenaLoop&&"yes"==c.fenaLoop?"normal"==c.storetype?g=a:"cookie"==c.storetype&&tpgb_fakereset(d,g):clearInterval(e)},1e3*j)}if(g<=h){let a,b;"normal"==c.storetype?a=g:"cookie"==c.storetype&&(a=g),e=setInterval(function(){let j=1<+i?Math.round(Math.random()*i):1;"normal"==c.storetype?b=g=+g+ +j:"cookie"==c.storetype&&(b=g=+localStorage.getItem(d)+ +j,tpgb_fakereset(d,g)),+b<=+h?tpgb_fake_addtext(l,b,f):c.fenaLoop&&"yes"==c.fenaLoop?"normal"==c.storetype?g=a:"cookie"==c.storetype&&tpgb_fakereset(d,a):clearInterval(e)},1e3*j)}}function tpgb_fakereset(a,b){localStorage.setItem(a,b)}function tpgb_fake_addtext(a,b,c){let d="<span class=\"tpgb-fake-text\">"+a.replace("{visible_counter}","<span class=\"tpgb-fake-visiblecounter\">"+Math.floor(b)+"</span>")+"</span>";c.innerText="",d?c.insertAdjacentHTML("afterbegin",d):c.insertAdjacentHTML("afterbegin",Math.floor(b))}function countdownExpiry(a,b){var c=document.querySelector("."+a+".tp-countdown"),d=JSON.parse(c.getAttribute("data-countdata"));if(d.fakeloop&&"yes"==d.fakeloop&&"none"==d.expiry&&"scarcity"==d.type)if("style-1"==d.style){let c=Math.floor((loopTime-new Date)/6e4),e=new Date().getTime()+6e4*d.sctimeli;0>c&&(localStorage.removeItem(b),updatedtime=localStorage.setItem(b,+new Date(e)),tpgb_scarcity_1(a))}else if("style-2"==d.style){let d=setInterval(function(){let e=Math.floor((loopTime-new Date)/6e4);c.innerHTML="",0>e&&(localStorage.removeItem(b),clearInterval(d),tpgb_scarcity_2(a))},1e3)}else if("style-3"==d.style){let d=setInterval(function(){let e=Math.floor((loopTime-new Date)/6e4);c.innerHTML="",0>e&&(localStorage.removeItem(b),clearInterval(d),tpgb_scarcity_3(a))},1e3)}if("none"!=d.expiry){let e=d?d.expiry:"",f=Math.floor((loopTime-new Date)/6e4),g=new Date().getTime()+6e4*d.sctimeli;if("redirect"==e){if("scarcity"!=d.type)"normal"==d.type&&(window.location.href=decodeURIComponent(d.redirect));else if("style-1"==d.style)d.fakeloop&&"yes"==d.fakeloop?0>f?(localStorage.removeItem(b),updatedtime=localStorage.setItem(b+new Date(g)),tpgb_scarcity_1(a)):window.location.href=decodeURIComponent(d.redirect):window.location.href=decodeURIComponent(d.redirect);else if("style-2"==d.style){if(d.fakeloop&&"yes"==d.fakeloop){let c=setInterval(function(){let e=Math.floor((loopTime-new Date)/6e4);0>e?(localStorage.removeItem(b),clearInterval(c),tpgb_scarcity_2(a)):window.location.href=decodeURIComponent(d.redirect)},1e3)}else window.location.href=decodeURIComponent(d.redirect);}else if("style-3"==d.style){let e=c.querySelectorAll(".tpgb-countdown-counter");if(0<e.length&&e[0].remove(),d.fakeloop&&"yes"==d.fakeloop){let c=setInterval(function(){let e=Math.floor((loopTime-new Date)/6e4);0>e?(localStorage.removeItem(b),clearInterval(c),tpgb_scarcity_3(a)):window.location.href=decodeURIComponent(d.redirect)},1e3)}else window.location.href=decodeURIComponent(d.redirect)}}else if("showmsg"==e){if("scarcity"!=d.type)"normal"==d.type&&(c.innerHTML="",c.innerHTML="<div class=\"tpgb-countdown-expiry\">"+d.expiryMsg+"</div>");else if("style-1"==d.style){let e=c.querySelectorAll(".tpgb-countdown-expiry"),h=c.querySelectorAll(".tpgb-countdown-counter");0>f?(localStorage.removeItem(b),updatedtime=localStorage.setItem(b,+new Date(g)),0<e.length&&e[0].remove(),h[0].style.display="block",tpgb_scarcity_1(a)):0==e.length&&(h[0].style.display="none",c.insertAdjacentHTML("afterbegin","<div class=\"tpgb-countdown-expiry\">"+d.expiryMsg+"</div>"))}else if("style-2"==d.style){if(d.fakeloop&&"yes"==d.fakeloop){let e=setInterval(function(){let f=Math.floor((loopTime-new Date)/6e4);c.innerHTML="",0>f?(localStorage.removeItem(b),clearInterval(e),tpgb_scarcity_2(a)):c.innerHTML="<div class=\"tpgb-countdown-expiry\">"+d.expiryMsg+"</div>"},1e3)}else c.innerHTML="",c.innerHTML="<div class=\"tpgb-countdown-expiry\">"+d.expiryMsg+"</div>";}else if("style-3"==d.style)if(d.fakeloop&&"yes"==d.fakeloop){let e=setInterval(function(){let f=Math.floor((loopTime-new Date)/6e4);0>f?(localStorage.removeItem(b),c.innerHTML="",clearInterval(e),tpgb_scarcity_3(a)):(c.innerHTML="",c.innerHTML="<div class=\"tpgb-countdown-expiry\">"+d.expiryMsg+"</div>")},1e3)}else c.innerHTML="",c.innerHTML="<div class=\"tpgb-countdown-expiry\">"+d.expiryMsg+"</div>";}else if("showtemp"==d.expiry){let e=c.querySelectorAll(".tpgb-countdown-expiry");if("scarcity"==d.type){if("style-1"==d.style){let d=c.querySelectorAll(".tpgb-countdown-counter");0>f?(localStorage.removeItem(b),updatedtime=localStorage.setItem(b,+new Date(g)),0<d.length&&d[0].classList.contains("tpgb-hide")&&d[0].classList.remove("tpgb-hide"),0<e.length&&e[0].classList.add("tpgb-hide"),tpgb_scarcity_1(a)):(d[0].classList.add("tpgb-hide"),0<e.length&&e[0].classList.contains("tpgb-hide")&&e[0].classList.remove("tpgb-hide"),tpgb_resize_ele())}else if("style-2"==d.style){let f=c.querySelectorAll(".flipdown.tpgb-countdown-counter");if(0<f.length&&f[0].remove(),e&&e[0]&&e[0].classList.contains("tpgb-hide")&&(e[0].classList.remove("tpgb-hide"),e[0].classList.add("tpgb-show"),tpgb_resize_ele()),d.fakeloop&&"yes"==d.fakeloop){let c=setInterval(function(){let d=Math.floor((loopTime-new Date)/6e4);0>d&&(localStorage.removeItem(b),e&&e[0]&&e[0].classList.contains("tpgb-show")&&e[0].classList.remove("tpgb-show"),e&&e[0]&&!e[0].classList.contains("tpgb-hide")&&e[0].classList.add("tpgb-hide"),clearInterval(c),tpgb_scarcity_2(a))},1e3)}}else if("style-3"==d.style){let f=c.querySelectorAll(".tpgb-countdown-counter");if(0<f.length&&f[0].remove(),e[0].classList.contains("tpgb-hide")&&(e[0].classList.remove("tpgb-hide"),e[0].classList.add("tpgb-show"),tpgb_resize_ele()),d.fakeloop&&"yes"==d.fakeloop){let c=setInterval(function(){let d=Math.floor((loopTime-new Date)/6e4);0>d&&(localStorage.removeItem(b),e[0].classList.contains("tpgb-show")&&e[0].classList.remove("tpgb-show"),!e[0].classList.contains("tpgb-hide")&&e[0].classList.add("tpgb-hide"),clearInterval(c),tpgb_scarcity_3(a))},1e3)}}}else if("normal"==d.type){let a=c.querySelectorAll(".tpgb-countdown-expiry"),b=c.querySelectorAll(".tpgb-countdown-counter");0<b.length&&b[0].remove(),a[0].classList.contains("tpgb-hide")&&(a[0].classList.remove("tpgb-hide"),a[0].classList.add("tpgb-show"),tpgb_resize_ele())}}}}function tpgb_progressbar_sethtml(a,b){if(a){b.insertAdjacentHTML("afterbegin","<div class=\"tpgb-countdown-counter\"><div class=\"counter-part\" id=\"d"+a+"\"></div><div class=\"counter-part\" id=\"h"+a+"\"></div><div class=\"counter-part\" id=\"m"+a+"\"></div><div class=\"counter-part\" id=\"s"+a+"\"></div></div>")}}function tpgb_resize_ele(){let a=document.querySelectorAll(".tpgb-isotope");a.length&&tppoMaso(document);let b=document.querySelectorAll(".tpgb-carousel");b.forEach(function(a){var b=slideStore.get(a);b.refresh()});let c=document.querySelectorAll(".tpgb-metro");c.length&&null!=c&&tppoMetro(document)}
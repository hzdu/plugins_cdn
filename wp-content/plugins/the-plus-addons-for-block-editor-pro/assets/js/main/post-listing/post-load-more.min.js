function tppoLoad(c){var t=c.querySelectorAll(".post-load-more");t.length&&(c.querySelector(".tpgb-isotope")||c.querySelector(".tpgb-metro"))&&t.forEach(function(t){t.addEventListener("click",function(t){t.preventDefault();var r,p=this,i=JSON.parse(p.dataset.dypost),t=p.dataset.postOption,l=p.textContent;p.textContent=i.loadingtxt,void 0!==i.offset_posts&&""!==i.offset_posts||(i.offset_posts=0),i.total_page>=i.page?(i.offset=parseInt(i.page-1)*parseInt(i.load_more)+parseInt(i.display_post)+parseInt(i.offset_posts),(r=new XMLHttpRequest).open("POST",tpgb_config&&tpgb_config.ajax_url?tpgb_config.ajax_url:tpgb_load.ajaxUrl,!0),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded;"),r.onload=function(){if(200===r.status&&r.status<400){var t=r.responseText;if(p.textContent=l,""===t)p.classList.add("hide");else{var e,o,n=document.getElementById(i.load_class),a=n.querySelector(".post-loop-inner");if("grid"!==i.layout&&"masonry"!==i.layout||n.classList.contains("tpgb-isotope")&&(e=new Isotope(a,{itemSelector:".grid-item",resizable:!0,sortBy:"original-order",layoutMode:"masonry"==i.layout?"masonry":"fitRows",transitionDuration:i.disableAnim?0:"0.4s"}),(o=document.createElement("div")).innerHTML=t,e.insert(o.querySelectorAll(".grid-item")),e.layout(),e.reloadItems()),n.classList.contains("tpgb-metro")&&(a.insertAdjacentHTML("beforeend",t),"function"==typeof tppoMetro&&tppoMetro(c)),"function"==typeof tppostList&&tppostList(c),0<n.querySelectorAll(".tpgb-category-filter").length&&(n.querySelectorAll(" .tpgb-filter-data .tpgb-categories > .tpgb-filter-list > a").forEach(function(t){var e=t.dataset.filter,o=0;void 0!==e&&""!==e&&(o=("*"===e?n.querySelectorAll(".post-loop-inner .grid-item"):n.querySelectorAll(" .post-loop-inner .grid-item"+e)).length),0<o&&null!=t.querySelector(".tpgb-category-count")&&(t.querySelector(".tpgb-category-count").innerHTML=o)}),"function"==typeof tpFilter&&tpFilter(n)),n.classList.contains("tpgb-equal-height")&&"function"==typeof tpeqHeight&&(s=document.getElementById(i.load_class),tpeqHeight(s)),0<n.querySelectorAll(".tpgb-messagebox").length&&"function"==typeof tpmsgBox&&tpmsgBox(n),0<n.querySelectorAll(".tpgb-fancy-popup").length){let t=n.querySelectorAll(".tpgb-fancy-popup");t.forEach(function(t){tpgb_fancy_popup(t)})}0<n.querySelectorAll(".tpgb-accordion").length&&"function"==typeof accordionJS&&accordionJS(n)}i.page++,i.page===i.total_page?(p.classList.add("hide"),i.page=i.page,p.parentNode.insertAdjacentHTML("beforeend",'<div class="tpgb-post-loaded">'+i.loaded_posts+"</div>")):(i.page=i.page,p.setAttribute("data-page",i.page));var s=JSON.stringify(i);p.dataset.dypost=s}},r.send("action=tpgb_post_load&option="+encodeURIComponent(t)+"&dyOpt="+encodeURIComponent(JSON.stringify(i)))):p.classList.add("hide")})})}document.addEventListener("DOMContentLoaded",function(){tppoLoad(document)});
function wcpr_resize_masonry_items(e=!1){e?jQuery(".wcpr-grid-item.wcpr-grid-item-init").removeClass("wcpr-grid-item-init"):jQuery(".wcpr-grid-item .reviews-videos").length&&setTimeout(function(){wcpr_resize_masonry_items(!0)},150),jQuery(".wcpr-grid-loadmore .wcpr-grid-item:not(.wcpr-grid-item-init)").each(function(){if(!jQuery(this).is(":visible"))return!1;wcpr_resize_masonry_item(jQuery(this))})}function wcpr_resize_masonry_item(e){e=jQuery(e);let i,t=0,r,n=parseInt(jQuery(".wcpr-grid").data("wcpr_columns")||3);if(e.find(".reviews-images-wrap-right .reviews-images").length&&0===(t=(i=e.find(".reviews-images-wrap-right .reviews-images")).outerHeight())){r=e.find(".wcpr-content").outerWidth();let s=parseFloat(i.attr("width")||0),a=parseFloat(i.attr("height")||0);0===r&&(r=((jQuery(".wcpr-grid").outerWidth()?jQuery(".wcpr-grid").outerWidth():jQuery("#reviews").outerWidth()?jQuery("#reviews").outerWidth():jQuery(".woocommerce-Tabs-panel").outerWidth()?jQuery(".woocommerce-Tabs-panel").outerWidth():200)-(n-1)*20)/n),t=0!==a?Math.round(r/s*a):r}let o=e.find(".wcpr-content").outerHeight(),c=e.find(".review-content-container").outerHeight();if(0===c){r||0!==(r=e.find(".wcpr-content").outerWidth())||(r=((jQuery(".wcpr-grid").outerWidth()?jQuery(".wcpr-grid").outerWidth():jQuery("#reviews").outerWidth()?jQuery("#reviews").outerWidth():jQuery(".woocommerce-Tabs-panel").outerWidth()?jQuery(".woocommerce-Tabs-panel").outerWidth():200)-(n-1)*20)/n),jQuery("body").append('<div class="review-content-container-temp" style="width: '+r+'px; visibility: hidden; ">'+e.find(".review-content-container").html()+"</div>");let l=jQuery(".review-content-container-temp");l.find(".wcpr-review-content-full").remove(),c=l.outerHeight(),l.remove()}o<c+t&&(o=c+t);let d=Math.ceil((o+20)/21);e.addClass("wcpr-grid-item-init").css("grid-row-end","span "+d)}jQuery(document).ready(function(e){"use strict";let i=!1;/iPad/i.test(navigator.userAgent)||/Safari/i.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)&&!/Mobi|Android/i.test(navigator.userAgent)?i=!0:e(".wcpr-enable-box-shadow").addClass("wcpr-fix-box-shadow");let t=-1,r,n=0;function s(){let i=parseInt(e("html").css("top"));e("html").removeClass("wcpr-noscroll"),window.scrollTo({top:-i,behavior:"instant"})}function a(i){n=0,t=i,i>=r.length&&(t=0),i<0&&(t=r.length-1);let s=e("#reviews-content-left-modal"),a=e("#reviews-content-left-main"),o;if(o=r.eq(t),s.html(""),a.html(""),0===o.find(".reviews-images-container").length)e(".wcpr-modal-light-box").addClass("wcpr-no-images");else{s.html(o.find(".reviews-images-wrap-left").html());let c=o.find(".reviews-images-wrap-right").html();c&&(e(".wcpr-modal-light-box").removeClass("wcpr-no-images"),a.html(c)),s.find(".reviews-images").map(function(){let i=e(this).data("src");i&&e(this).attr("src",i)}),s.find(".reviews-images").closest("a").on("click",function(){n=e(this).data("image_index");let i=e(this).attr("href"),t="";return jQuery(this).hasClass("reviews-iframe")||jQuery(this).find(".reviews-iframe").length?t=jQuery(`<iframe class="reviews-images reviews-iframe" data-original_src="${i}" src="${i}" frameborder="0" allowfullscreen></iframe>`):jQuery(this).hasClass("reviews-videos")||jQuery(this).find(".reviews-videos").length?t=jQuery(`<video class="reviews-images reviews-videos" data-original_src="${i}" src="${i}" controls></video>`):(t=jQuery(`<img class="reviews-images" data-original_src="${i}" src="${i}">`)).attr("title",a.find(".reviews-images").attr("title")),t.attr({width:a.find(".reviews-images").attr("width"),height:a.find(".reviews-images").attr("width")}),a.find(".reviews-images").replaceWith(t),a.find("source").attr("srcset",i),a.find(".wcpr-review-image-caption").html(e(this).data("image_caption")),!1})}e("#reviews-content-right .reviews-content-right-meta").html(o.find(".review-content-container").html()),e(".wcpr-modal-light-box").fadeIn(200)}switch(woocommerce_photo_reviews_params.masonry_popup){case"review":r=e(".wcpr-grid-item"),e(".wcpr-close").on("click",function(){s(),e(".wcpr-modal-light-box").fadeOut(200),t=-1}),e(".wcpr-modal-light-box .wcpr-overlay").on("click",function(){s(),e(".wcpr-modal-light-box").fadeOut(200),t=-1}),e("#reviews-content-left-main").on("click",".reviews-images",function(){let i=e(this),t=[];e("#reviews-content-left-modal").find("a").map(function(){let i=e(this).find(".reviews-images"),r=e(this).data("image_src")?e(this).data("image_src"):i.attr("src"),n=e(this).data("image_caption")?e(this).data("image_caption"):parseInt(e(this).data("image_index"))+1+"/"+e("#reviews-content-left-modal").find("a").length;t.push({href:r,title:n})}),0==t.length&&t.push({href:i.data("original_src")?i.data("original_src"):i.attr("src"),title:i.parent().find(".wcpr-review-image-caption").html()}),e.swipebox(t,{hideBarsDelay:1e5,initialIndexOnArray:n})}),e(document).keydown(function(i){!e.swipebox.isOpen&&"none"!=e(".wcpr-modal-light-box").css("display")&&(27==i.keyCode&&(s(),e(".wcpr-modal-light-box").fadeOut(200),t=-1),-1!=t&&(37==i.keyCode&&a(t-=1),39==i.keyCode&&a(t+=1)))}),e(document).on("click",".wcpr-grid-item",function(){let i;(i=(r=e(".wcpr-grid-item")).index(e(this)))>=0&&(a(i),function i(){if(e(document).height()>e(window).height()){let t=e("html").scrollTop()?e("html").scrollTop():e("body").scrollTop();e("html").addClass("wcpr-noscroll").css("top",-t)}}())}),e(".wcpr-next").on("click",function(){a(t+=1)}),e(".wcpr-prev").on("click",function(){a(t-=1)});break;case"image":e(document).on("click",".wcpr-grid-item .reviews-images",function(i){let t=e(this);i.stopPropagation();let r=t.closest(".reviews-images-container"),n=[];r.find(".reviews-images-wrap-left").find("a").map(function(){let i=e(this).find(".reviews-images"),t=e(this).data("image_src")?e(this).data("image_src"):i.attr("src"),s=e(this).data("image_caption")?e(this).data("image_caption"):parseInt(e(this).data("image_index"))+1+"/"+r.find(".reviews-images-wrap-left").find("a").length;n.push({href:t,title:s})}),0==n.length&&n.push({href:t.data("original_src")?t.data("original_src"):t.attr("src"),title:t.parent().find(".wcpr-review-image-caption").html()}),console.log(n),e.swipebox(n,{hideBarsDelay:1e5,initialIndexOnArray:0})})}return jQuery(document.body).on("wcpr_ajax_load_more_reviews_end wcpr_ajax_pagination_end",function(){setTimeout(function(){wcpr_resize_masonry_items()},200)}),e(document).on("scroll",function(e){setTimeout(function(){wcpr_resize_masonry_items()},200)}),e(document).on("click","a",function(e){setTimeout(function(){wcpr_resize_masonry_items()},200)}),e(document).on("skeleton-loaded",function(){wcpr_resize_masonry_items(!0)}),e(document).on("tabactivate",function(e,i){wcpr_resize_masonry_items(!0)}),jQuery(document.body).on("click",".wcpr-read-more",function(i){i.stopPropagation();let t=e(this).closest(".wcpr-review-content"),r=t.find(".wcpr-review-content-full").html();r&&t.html(r),t.closest(".wcpr-grid-item").removeClass("wcpr-grid-item-init"),wcpr_resize_masonry_items(!0)}),!1}),jQuery(window).on("load",function(){"use strict";setTimeout(function(){wcpr_resize_masonry_items()},100)}).on("resize",function(){"use strict";wcpr_resize_masonry_items(!0)});
function wcpr_pagination_basic(e,r){e=jQuery(e),r=jQuery(r);let o=!1;jQuery(document).on("click",".woocommerce-pagination a",(function(t){if(o)return!1;t.preventDefault(),t.stopPropagation();let a="1"===woocommerce_photo_reviews_params.display?e.find(".wcpr-grid"):e.find(woocommerce_photo_reviews_params.container),i=parseInt(a.offset().top)-200;window.scrollTo({top:i,behavior:"smooth"}),o=!0;let n=jQuery(this).attr("href");a.find(".wcpr-grid-overlay").length||a.append('<div class="wcpr-grid-overlay wcpr-hidden"></div>');let c=a.find(".wcpr-grid-overlay");c.removeClass("wcpr-hidden"),jQuery.ajax({url:n,type:"get",success:function(e){if(e){let o=jQuery(e);"1"===woocommerce_photo_reviews_params.display?a.html(o.find(".wcpr-grid").html()):a.html(o.find(woocommerce_photo_reviews_params.container).html()),o.find(".woocommerce-pagination").length&&r.html(o.find(".woocommerce-pagination").html()),jQuery(document.body).trigger("wcpr_ajax_pagination_end")}c.addClass("wcpr-hidden"),o=!1},error:function(e){o=!1,c.addClass("wcpr-hidden")}})}));let t=e.find(".wcpr-filter-container");if(!t.length)return!1;jQuery(".et_divi_theme").length?jQuery("a.wcpr-filter-button").on("click",(function(a){a.preventDefault(),a.stopPropagation();let i=jQuery(this);if(o||0===parseInt(i.find(".wcpr-filter-button-count").html())&&!i.hasClass("wcpr-active"))return!1;o=!0,a.preventDefault();let n=jQuery(this).attr("href"),c="1"===woocommerce_photo_reviews_params.display?e.find(".wcpr-grid"):e.find(woocommerce_photo_reviews_params.container);if(0===c.length){if("1"===woocommerce_photo_reviews_params.display)e.append('<div class="'+woocommerce_photo_reviews_params.grid_class+'"><div class="wcpr-grid-overlay"></div></div>'),c=e.find(".wcpr-grid");else{"."===woocommerce_photo_reviews_params.container.substr(0,1)?e.append('<ol class="'+woocommerce_photo_reviews_params.container.substr(1)+'"></ol>'):e.append('<ol id="'+woocommerce_photo_reviews_params.container.substr(1)+'"></ol>'),c=e.find(woocommerce_photo_reviews_params.container)}e.find(".woocommerce-noreviews").hide()}c.find(".wcpr-grid-overlay").length||c.append('<div class="wcpr-grid-overlay wcpr-hidden"></div>');let s=c.find(".wcpr-grid-overlay");s.removeClass("wcpr-hidden"),t.addClass("wcpr-filter-loading"),jQuery.ajax({url:n,type:"get",data:{wcpr_is_ajax:1},success:function(o){if(o){let a,i;o=o.replace(/(\r\n\t|\n|\r\t)/gm,"");let n=jQuery(o);"1"===woocommerce_photo_reviews_params.display?c.html(n.find(".wcpr-grid").html()):c.html(n.find(woocommerce_photo_reviews_params.container).html()),n.find(".woocommerce-pagination").length?r&&r.length?r.html(n.find(".woocommerce-pagination").html()):(e.append('<nav class="woocommerce-pagination">'+n.find(".woocommerce-pagination").html()+"</nav>"),r=e.find(".woocommerce-pagination")):r&&r.length>0&&(r.remove(),r=null),a=/<div class="wcpr-filter-container" style="display: none;">([^]+?)<\/div>/gm,i=a.exec(o),null!=i&&t.html(i[1]),jQuery(document.body).trigger("wcpr_ajax_pagination_end")}},error:function(e){console.log(e)},complete:function(){o=!1,s.addClass("wcpr-hidden"),t.removeClass("wcpr-filter-loading")}})})):jQuery(document).on("click","a.wcpr-filter-button",(function(a){a.preventDefault(),a.stopPropagation();let i=jQuery(this);if(o||0===parseInt(i.find(".wcpr-filter-button-count").html())&&!i.hasClass("wcpr-active"))return!1;o=!0,a.preventDefault();let n=jQuery(this).attr("href"),c="1"===woocommerce_photo_reviews_params.display?e.find(".wcpr-grid"):e.find(woocommerce_photo_reviews_params.container);if(0===c.length){if("1"===woocommerce_photo_reviews_params.display)e.append('<div class="'+woocommerce_photo_reviews_params.grid_class+'"><div class="wcpr-grid-overlay"></div></div>'),c=e.find(".wcpr-grid");else{"."===woocommerce_photo_reviews_params.container.substr(0,1)?e.append('<ol class="'+woocommerce_photo_reviews_params.container.substr(1)+'"></ol>'):e.append('<ol id="'+woocommerce_photo_reviews_params.container.substr(1)+'"></ol>'),c=e.find(woocommerce_photo_reviews_params.container)}e.find(".woocommerce-noreviews").hide()}c.find(".wcpr-grid-overlay").length||c.append('<div class="wcpr-grid-overlay wcpr-hidden"></div>');let s=c.find(".wcpr-grid-overlay");s.removeClass("wcpr-hidden"),t.addClass("wcpr-filter-loading"),jQuery.ajax({url:n,type:"get",data:{wcpr_is_ajax:1},success:function(o){if(o){let a,i;o=o.replace(/(\r\n\t|\n|\r\t)/gm,"");let n=jQuery(o);"1"===woocommerce_photo_reviews_params.display?c.html(n.find(".wcpr-grid").html()):c.html(n.find(woocommerce_photo_reviews_params.container).html()),n.find(".woocommerce-pagination").length?r&&r.length?r.html(n.find(".woocommerce-pagination").html()):(e.append('<nav class="woocommerce-pagination">'+n.find(".woocommerce-pagination").html()+"</nav>"),r=e.find(".woocommerce-pagination")):r&&r.length>0&&(r.remove(),r=null),a=/<div class="wcpr-filter-container" style="display: none;">([^]+?)<\/div>/gm,i=a.exec(o),null!=i&&t.html(i[1]),jQuery(document.body).trigger("wcpr_ajax_pagination_end")}},error:function(e){console.log(e)},complete:function(){o=!1,s.addClass("wcpr-hidden"),t.removeClass("wcpr-filter-loading")}})}))}function wcpr_pagination_loadmore(e,r){e=jQuery(e),r=jQuery(r);let o=e.find(".wcpr-filter-container"),t=jQuery(".wcpr-load-more-reviews-cpage").val(),a=jQuery(".wcpr-load-more-reviews-cpage").data("max_page"),i=jQuery(".wcpr-load-more-reviews-product-id").val(),n=jQuery(".wcpr-load-more-reviews-rating").val(),c=jQuery(".wcpr-load-more-reviews-verified").val(),s=jQuery(".wcpr-load-more-reviews-image").val(),p=e.find(".woocommerce-noreviews"),m="1"===woocommerce_photo_reviews_params.display?e.find(".wcpr-grid"):e.find(woocommerce_photo_reviews_params.container);if(t&&i){jQuery(document).on("click",".wcpr-load-more-reviews-button:not(.shortcode-wcpr-load-more-reviews-button):not(.wcpr-loading)",(function(){let e=jQuery(this);return e.parent().hasClass("wcpr-hidden")||t>-1&&jQuery.ajax({url:woocommerce_photo_reviews_params.ajaxurl,data:{action:"wcpr_ajax_load_more_reviews",nonce:woocommerce_photo_reviews_params.nonce,post_id:i,cpage:t,rating:n,verified:c,image:s,is_shortcode:"",frontend_style:woocommerce_photo_reviews_params.display},type:"POST",beforeSend:function(r){e.addClass("wcpr-loading")},success:function(r){r.html?(m.append(r.html),"oldest"===woocommerce_photo_reviews_params.default_comments_page?t<a?t++:e.parent().addClass("wcpr-hidden"):t>1?t--:e.parent().addClass("wcpr-hidden")):e.parent().addClass("wcpr-hidden"),jQuery(document.body).trigger("wcpr_ajax_load_more_reviews_end")},complete:function(){e.removeClass("wcpr-loading")}}),!1}));let l=!1;if(o.length){let d=o.find(".wcpr-filter-button-ul");jQuery(document).on("click","a.wcpr-filter-button",(function(w){let _=jQuery(this);if(l||0===parseInt(_.find(".wcpr-filter-button-count").html())&&!_.hasClass("wcpr-active"))return!1;t="oldest"===woocommerce_photo_reviews_params.default_comments_page?1:"";let u=_.data("filter_type");switch(u){case"all":if(_.hasClass("wcpr-active"))return!1;n="";break;case"image":s=_.hasClass("wcpr-active")?"":1;break;case"verified":c=_.hasClass("wcpr-active")?"":1;break;default:if(_.hasClass("wcpr-active"))return!1;n=parseInt(u)}l=!0,w.preventDefault(),o.addClass("wcpr-filter-loading"),jQuery.ajax({url:woocommerce_photo_reviews_params.ajaxurl,type:"POST",data:{action:"wcpr_ajax_load_more_reviews",post_id:i,cpage:t,rating:n,verified:c,image:s,filter_type:u,is_shortcode:"",frontend_style:woocommerce_photo_reviews_params.display},success:function(i){i.html&&(p.hide(),function(){if(0===m.length){let r="1"===woocommerce_photo_reviews_params.display?".":woocommerce_photo_reviews_params.container.substr(0,1);m="."===r?"1"===woocommerce_photo_reviews_params.display?jQuery('<div class="'+woocommerce_photo_reviews_params.grid_class+'"></div>'):jQuery('<ol class="'+woocommerce_photo_reviews_params.container.substr(1)+'"></ol>'):jQuery('<ol id="'+woocommerce_photo_reviews_params.container.substr(1)+'"></ol>'),e.append(m)}}()),m.html(i.html),0===r.length&&(e.append('<nav class="woocommerce-pagination"></nav>'),r=e.find(".woocommerce-pagination")),a=parseInt(i.max_page),a!=t&&("oldest"===woocommerce_photo_reviews_params.default_comments_page?t++:t--,r.find(".wcpr-load-more-reviews-button").parent().removeClass("wcpr-hidden"));let n=i.update_count;if(n)for(let e in n)n.hasOwnProperty(e)&&o.find('.wcpr-filter-button[data-filter_type="'+e+'"]').find(".wcpr-filter-button-count").html(n[e]);switch(o.find(".wcpr-filter-rating-placeholder .wcpr-filter-button-count").html(n.all),u){case"all":default:d.find(".wcpr-filter-button").removeClass("wcpr-active"),_.addClass("wcpr-active"),o.find(".wcpr-filter-rating-placeholder").html(_.html());break;case"image":case"verified":_.hasClass("wcpr-active")?_.removeClass("wcpr-active"):_.addClass("wcpr-active")}jQuery(document.body).trigger("wcpr_ajax_load_more_reviews_end")},error:function(e){console.log(e)},complete:function(){l=!1,o.removeClass("wcpr-filter-loading")}})}))}}}function viwcpr_flexslider(){"use strict";if(!jQuery(".woocommerce-photo-reviews-shortcode, .wcpr-review-title").length)return setTimeout((function(){viwcpr_flexslider()}),100),!1;jQuery(".woocommerce-photo-reviews-shortcode:not(.woocommerce-photo-reviews-slide)").each((function(){if(jQuery(this).addClass("woocommerce-photo-reviews-slide"),!jQuery(this).data("wcpr_slide"))return jQuery(this).addClass("woocommerce-photo-reviews-slide-none"),!0;let r=!1,o=Date.now(),t=jQuery(this).data("reviews_shortcode"),a=".shortcode-wcpr-grid .shortcode-wcpr-grid-item";if(jQuery(this).find(".shortcode-wcpr-reviews").length&&(a=".commentlist li"),!jQuery(this).find(".viwcpr-slide-wrap").length){jQuery(this).append('<div class="viwcpr-slide-wrap viwcpr-slide-wrap-'+o+'" data-id_css="viwcpr-slide-wrap-'+o+'"></div>');let e=jQuery(a).parent().clone();jQuery(a).parent().remove(),jQuery(this).find(".viwcpr-slide-wrap").css({width:"100%",position:"relative"}).append(e)}jQuery(this).closest(".rtl").length&&(r=!0),console.log("rtl"),console.log(r);let n=jQuery(this).find(".viwcpr-slide-wrap"),c=n.innerWidth()?jQuery(this).parent().width():0,s=parseInt(t.cols_gap||20),p=parseInt(t.cols||4),m=parseInt(t.cols_mobile||1);c<600&&c>=480&&(p=p>3?3:p),c<480&&(p=m),jQuery(this).addClass("woocommerce-photo-reviews-slide-init");let l=c?(c-s*p)/p:200;n.addClass("viwcpr-slide-wrap-init").removeData("flexslider").viwcaio_flexslider({namespace:"villatheme-slider-",selector:a,animation:"slide",animationLoop:1,itemWidth:l,itemMargin:s,controlNav:!1,maxItems:p,reverse:!1,rtl:r,move:p,touch:!0,slideshow:!1,start:function(r){r.count===r.move&&e(r,1,t,a).then((function(){r.setProps(0)}));let o=r.data("id_css"),i=`.${o} .viwse-suggestion-product-wrap{width: ${l}px !important;}`,n=0;for(let e=0;e<r.move;e++)n<r.find(a).eq(e).innerHeight()&&(n=r.find(a).eq(e).innerHeight()),r.find(a).eq(e).find(".shortcode-reviews-images-wrap-right img").length&&r.find(a).eq(e).find(".shortcode-reviews-images-wrap-right img").on("load",(function(){if(jQuery("#"+o).length||jQuery("head").append(`<style id="${o}"></style>`),jQuery(this).closest(a+":visible").length&&jQuery(this).closest(a).innerHeight()&&r.data("current_height")){let t=r.find(a).eq(e).innerHeight()+30;if(jQuery(this).closest(a).innerHeight()>parseFloat(r.data("current_height"))){let e=`.${o} .viwse-suggestion-product-wrap{width: ${l}px !important;}`;e+=`.${o} .villatheme-slider-viewport{height: ${t}px !important;}`,jQuery("#"+o).html(e),r.data("current_height",t)}}}));n&&(n+=30,i+=`.${o} .villatheme-slider-viewport{height: ${n}px !important;}`),jQuery("#"+o).length||jQuery("head").append(`<style id="${o}"></style>`),jQuery("#"+o).html(i),r.data("current_height",n)},before:function(e){e.removeClass("viwcpr-slide-wrap-init")},after:function(e){if(e.hasClass("viwcpr-slide-wrap-init"))return!0;e.addClass("viwcpr-slide-wrap-init");let r=e.data("id_css"),o=`.${r} .viwse-suggestion-product-wrap{width: ${l}px !important;}`,t=e.currentSlide*e.move,n=(e.currentSlide+1)*e.move,c=0;if(e.find(a).css({"margin-bottom":"0","margin-top":"0",width:`${l}px !important;`}),t===n)c=e.find(a).eq(t).innerHeight(),e.find(a).eq(t).find(".shortcode-reviews-images-wrap-right img").length&&e.find(a).eq(t).find(".shortcode-reviews-images-wrap-right img").on("load",(function(){if(jQuery("#"+r).length||jQuery("head").append(`<style id="${r}"></style>`),jQuery(this).closest(a+":visible").length&&jQuery(this).closest(a).innerHeight()&&e.data("current_height")){let o=e.find(a).eq(i).innerHeight()+30;if(jQuery(this).closest(a).innerHeight()>parseFloat(e.data("current_height"))){let t=`.${r} .viwse-suggestion-product-wrap{width: ${l}px !important;}`;t+=`.${r} .villatheme-slider-viewport{height: ${o}px !important;}`,jQuery("#"+r).html(t),e.data("current_height",o)}}}));else for(let o=t;o<n;o++)c<e.find(a).eq(o).innerHeight()&&(c=e.find(a).eq(o).innerHeight()),e.find(a).eq(o).find(".shortcode-reviews-images-wrap-right img").length&&e.find(a).eq(o).find(".shortcode-reviews-images-wrap-right img").on("load",(function(){if(jQuery("#"+r).length||jQuery("head").append(`<style id="${r}"></style>`),jQuery(this).closest(a+":visible").length&&jQuery(this).closest(a).innerHeight()&&e.data("current_height")){let t=e.find(a).eq(o).innerHeight()+30;if(jQuery(this).closest(a).innerHeight()>parseFloat(e.data("current_height"))){let o=`.${r} .viwse-suggestion-product-wrap{width: ${l}px !important;}`;o+=`.${r} .villatheme-slider-viewport{height: ${t}px !important;}`,jQuery("#"+r).html(o),e.data("current_height",t)}}}));c&&(c+=30,o+=`.${r} .villatheme-slider-viewport{height: ${c}px !important;}`,e.data("current_height",c)),jQuery("#"+r).length||jQuery("head").append(`<style id="${r}"></style>`),jQuery("#"+r).html(o)},end:function(r){let o=parseInt(r.find(".wcpr-reviews-total-pages").html()||r.closest(".woocommerce-photo-reviews-shortcode").find(".wcpr-reviews-total-pages").html()),i=Math.ceil(r.find(a).length/parseInt(t.comments_per_page||1));if(o>i){let o=r.limit;e(r,i,t,a).then((function(){r.setProps(o)}))}}})}));let e=async function(e,r,o,t){await new Promise((function(a){jQuery.ajax({url:woocommerce_photo_reviews_params.ajaxurl,type:"get",data:{action:"woocommerce_photo_reviews_shortcode_ajax_get_reviews",nonce:woocommerce_photo_reviews_params.nonce,reviews_shortcode:JSON.stringify(o),wcpr_page:r+1,wcpr_image:e.data("wcpr_image"),wcpr_verified:e.data("wcpr_verified"),wcpr_rating:e.data("wcpr_rating")},beforeSend:function(){e.closest(".woocommerce-photo-reviews-shortcode").addClass("woocommerce-photo-reviews-shortcode-loading")},success:function(r){let o=jQuery("<div></div>");o.append(r.html),o.find(t).each((function(r,o){e.addSlide(jQuery(o))})),e.closest(".woocommerce-photo-reviews-shortcode").removeClass("woocommerce-photo-reviews-shortcode-loading"),a(e)},error:function(r){a(e),e.closest(".woocommerce-photo-reviews-shortcode").removeClass("woocommerce-photo-reviews-shortcode-loading")}})}))};jQuery(".wcpr-grid .wcpr-grid-item").last().css("display","inline-block"),jQuery(".shortcode-wcpr-grid .shortcode-wcpr-grid-item").last().css("display","inline-block"),jQuery("#wcpr_thank_you_message").length&&setTimeout((function(){jQuery(".reviews_tab a").trigger("click"),setTimeout((function(){window.scrollTo({top:jQuery("#review_form").offset().top-450})}))}),100)}function wcpr_helpful_button(){"use strict";jQuery(document).on("click",[".wcpr-single-product-summary .single_add_to_cart_button:not(.vicatna-single-atc-button):not(.vi-wcaio-product-bt-atc-loading)",".shortcode-wcpr-single-product-summary .single_add_to_cart_button:not(.vicatna-single-atc-button):not(.vi-wcaio-product-bt-atc-loading)"].join(","),(function(e){if(!woocommerce_photo_reviews_params.ajax_atc)return!0;e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();let r=jQuery(this),o=jQuery(this).closest("form.cart");if(r.addClass("vi-wcaio-product-bt-atc-loading"),!o.length||r.hasClass("disabled"))return r.removeClass("vi-wcaio-product-bt-atc-loading"),!1;if(o.hasClass(".variations_form")){let e=parseInt(o.find("input[name=variation_id]").val());if(!e||e<=0)return r.removeClass("vi-wcaio-product-bt-atc-loading"),!1}let t=o.find("input[name=product_id]").val();if(t||(t=o.find("[name=add-to-cart]").val()),!t||o.find('[name="woopb-add-to-cart"]').length)return r.attr("type","submit").trigger("click"),!1;let a={};o.find("select, textarea, input").each((function(){if(jQuery(this).prop("disabled"))return!0;if(["checkbox","radio"].indexOf(jQuery(this).attr("type"))>-1&&!jQuery(this).prop("checked"))return!0;let e=jQuery(this).attr("name");e&&(a[e]=jQuery(this).val())})),a["add-to-cart"]||(a["add-to-cart"]=o.find("[name=add-to-cart]").val()),jQuery(document.body).trigger("adding_to_cart",[r,a]),woocommerce_photo_reviews_params.ajax_atc_event||(woocommerce_photo_reviews_params.ajax_atc_event=[]),woocommerce_photo_reviews_params.ajax_atc_event.push({type:"post",url:woocommerce_photo_reviews_params.wc_ajax_url.toString().replace("%%endpoint%%","viwcpr_add_to_cart"),data:a,beforeSend:function(){r.removeClass("added").addClass("loading")},success:function(e){return e.error?(location.href=window.location.href,!1):"yes"===woocommerce_photo_reviews_params.cart_redirect_after_add&&woocommerce_photo_reviews_params.cart_url?(window.location=woocommerce_photo_reviews_params.cart_url,!1):(jQuery(document.body).trigger("added_to_cart",[e.fragments,e.cart_hash,r]),woocommerce_photo_reviews_params.woocommerce_enable_ajax_add_to_cart||jQuery(document.body).trigger("wc_fragment_refresh"),jQuery(document.body).trigger("viwcpr_added_to_cart",[e.fragments,e.cart_hash,r]),woocommerce_photo_reviews_params.ajax_atc_event.shift(),void(woocommerce_photo_reviews_params.ajax_atc_event.length>0&&jQuery.ajax(woocommerce_photo_reviews_params.ajax_atc_event[0])))},complete:function(e){r.removeClass("loading vi-wcaio-product-bt-atc-loading").addClass("added")}}),1===woocommerce_photo_reviews_params.ajax_atc_event.length&&jQuery.ajax(woocommerce_photo_reviews_params.ajax_atc_event[0])})),jQuery(document).on("click",".wcpr-comment-helpful-button",(function(e){e.stopPropagation();let r=jQuery(this),o=r.hasClass("wcpr-comment-helpful-button-up-vote")?"up":"down",t=r.closest(".wcpr-comment-helpful-button-container"),a=t.data("comment_id");"up"===o&&t.hasClass("wcpr-comment-helpful-button-voted-up")||"down"===o&&t.hasClass("wcpr-comment-helpful-button-voted-down")||t.hasClass("wcpr-comment-helpful-button-voting")||(t.addClass("wcpr-comment-helpful-button-voting"),jQuery.ajax({url:woocommerce_photo_reviews_params.ajaxurl,data:{action:"wcpr_helpful_button_handle",vote:o,comment_id:a,nonce:woocommerce_photo_reviews_params.nonce},type:"POST",success:function(e){if("success"===e.status&&(t.find(".wcpr-comment-helpful-button-up-vote-count").html(parseInt(e.up)),t.find(".wcpr-comment-helpful-button-down-vote-count").html(parseInt(e.down)),"up"===o?t.removeClass("wcpr-comment-helpful-button-voted-down").addClass("wcpr-comment-helpful-button-voted-up"):t.removeClass("wcpr-comment-helpful-button-voted-up").addClass("wcpr-comment-helpful-button-voted-down"),t.parent().hasClass("reviews-content-right-meta")||t.parent().hasClass("shortcode-reviews-content-right-meta"))){let r=jQuery('.wcpr-comment-helpful-button-container[data-comment_id="'+a+'"]');r.find(".wcpr-comment-helpful-button-up-vote-count").html(parseInt(e.up)),r.find(".wcpr-comment-helpful-button-down-vote-count").html(parseInt(e.down)),"up"===o?r.removeClass("wcpr-comment-helpful-button-voted-down").addClass("wcpr-comment-helpful-button-voted-up"):r.removeClass("wcpr-comment-helpful-button-voted-up").addClass("wcpr-comment-helpful-button-voted-down")}},error:function(){},complete:function(){t.removeClass("wcpr-comment-helpful-button-voting")}}))}))}function viSwipeDetect(e,r){var o,t,a,i,n,c,s=e,p=r||function(e){};s.addEventListener("touchstart",(function(e){var r=e.changedTouches[0];o="none",t=r.pageX,a=r.pageY,c=(new Date).getTime()}),!1),s.addEventListener("touchmove",(function(e){e.preventDefault()}),!1),s.addEventListener("touchend",(function(e){var r=e.changedTouches[0];i=r.pageX-t,n=r.pageY-a,(new Date).getTime()-c<=300&&(Math.abs(i)>=150&&Math.abs(n)<=100?o=i<0?"left":"right":Math.abs(n)>=150&&Math.abs(i)<=100&&(o=n<0?"up":"down")),p(o)}),!1)}jQuery(window).on("elementor/frontend/init",(()=>{"use strict";elementorFrontend.hooks.addAction("frontend/element_ready/woocommerce-photo-reviews.default",(function(e){window.elementor&&(wcpr_helpful_button(),viwcpr_flexslider())}))})),jQuery(document).ready((function(e){"use strict";let r=1==woocommerce_photo_reviews_params.image_caption_enable,o=woocommerce_photo_reviews_params.i18n_image_caption;function t(e,t,a=""){let i,n=`<img title="${t}" src="${e}" class="wcpr-selected-image-preview">`;return e.indexOf("data:video/")>-1&&(n=`<video class="wcpr-selected-image-preview" height="100%" width="100%" src="${e}" controls >${t}</video>`),i=a?`<div class="wcpr-selected-image">${n}<div class="wcpr-selected-image-info"><div class="wcpr-selected-image-name wcpr-comment-form-error" >${a}</div></div></div>`:r?`<div class="wcpr-selected-image">${n}<div class="wcpr-selected-image-info"><div class="wcpr-selected-image-name" title="${t}">${t}</div><input class="wcpr-selected-image-caption" type="text" name="wcpr_image_caption[]" placeholder="${o}"></div></div>`:`<div class="wcpr-selected-image">${n}<div class="wcpr-selected-image-info"><div class="wcpr-selected-image-name" title="${t}">${t}</div></div></div>`,i}wcpr_helpful_button(),viwcpr_flexslider();let a=woocommerce_photo_reviews_params.max_files;e("#commentform").on("change",".wcpr_image_upload",(function(r){if(e(this).parent().find(".wcpr-selected-image-container").html(""),this.files.length>a)return jQuery(".wcpr-comment-form-error-wraps").removeClass("wcpr-hidden").html(woocommerce_photo_reviews_params.warning_max_files),e(this).val(""),!1;this.files.length>0&&(jQuery(".wcpr-comment-form-error-wraps").addClass("wcpr-hidden"),function(r){let o=1024*parseFloat(woocommerce_photo_reviews_params.max_file_size);for(let i=0;i<r.files.length;i++){var a=new FileReader;a.onload=function(a){let n="";r.files[i].size>o?n=woocommerce_photo_reviews_params.warning_max_file_size.replace("%file_name%",r.files[i].name):-1===woocommerce_photo_reviews_params.upload_allow.indexOf(r.files[i].type)&&(n=woocommerce_photo_reviews_params.warning_upload_allow.replace("%file_name%",r.files[i].name)),e(r).parent().find(".wcpr-selected-image-container").append(t(a.target.result,r.files[i].name,n))},a.readAsDataURL(r.files[i])}}(this))})),jQuery(document).on("click",".wcpr_image_upload_button",(function(e){e.preventDefault(),e.stopPropagation(),jQuery(this).parent().find(".wcpr_image_upload").trigger("click")})),e("#commentform").find('input[type="submit"]').on("click",(function(r){let o=e(this);if(o.hasClass("viwcpr_form_checked")||!e("#wcpr_image_upload_nonce").length)return!0;let t=o.closest("form"),i=t.find('textarea[id="comment"]')||t.find('textarea[name="comment"]'),n=t.find('input[name="author"]'),c=t.find('input[name="email"]');jQuery(".wcpr-comment-form-error-wraps").addClass("wcpr-hidden"),jQuery(".wcpr-comment-form-notify-wraps").addClass("wcpr-hidden");let s=t.find("#rating"),p=s.val();if(s.length>0&&!p&&"yes"===woocommerce_photo_reviews_params.review_rating_required)return jQuery(".wcpr-comment-form-error-wraps").removeClass("wcpr-hidden").html(woocommerce_photo_reviews_params.i18n_required_rating_text),r.preventDefault(),!1;if(i.length>0){let e=i.val();if(!e&&1!=woocommerce_photo_reviews_params.allow_empty_comment)return jQuery(".wcpr-comment-form-error-wraps").removeClass("wcpr-hidden").html(woocommerce_photo_reviews_params.i18n_required_comment_text),r.preventDefault(),i.focus(),!1;let o=parseInt(woocommerce_photo_reviews_params.minimum_comment_length);if(o&&o>e.length)return jQuery(".wcpr-comment-form-error-wraps").removeClass("wcpr-hidden").html(woocommerce_photo_reviews_params.i18n_minimum_comment_text),r.preventDefault(),i.focus(),!1}if(n.length>0&&n.attr("required")&&!n.val())return jQuery(".wcpr-comment-form-error-wraps").removeClass("wcpr-hidden").html(woocommerce_photo_reviews_params.i18n_required_name_text),r.preventDefault(),n.focus(),!1;if(c.length>0&&c.attr("required")&&!c.val())return jQuery(".wcpr-comment-form-error-wraps").removeClass("wcpr-hidden").html(woocommerce_photo_reviews_params.i18n_required_email_text),r.preventDefault(),c.focus(),!1;if(!1===t.find('input[name="wcpr_gdpr_checkbox"]').prop("checked"))return jQuery(".wcpr-comment-form-error-wraps").removeClass("wcpr-hidden").html(woocommerce_photo_reviews_params.warning_gdpr),r.preventDefault(),!1;if("on"===woocommerce_photo_reviews_params.enable_photo){t.attr("enctype")&&"multipart/form-data"===t.attr("enctype")||t.attr("enctype","multipart/form-data");let e=t.find(".wcpr_image_upload");if(e.length>0){let o=e.get(0).files,t=parseInt(o.length);if("on"===woocommerce_photo_reviews_params.required_image&&0===t)return jQuery(".wcpr-comment-form-error-wraps").removeClass("wcpr-hidden").html(woocommerce_photo_reviews_params.warning_required_image),r.preventDefault(),!1;if(t>a)return jQuery(".wcpr-comment-form-error-wraps").removeClass("wcpr-hidden").html(woocommerce_photo_reviews_params.warning_max_files),r.preventDefault(),!1;let i=[],n=1024*parseFloat(woocommerce_photo_reviews_params.max_file_size);if(jQuery.each(o,(function(e,r){if(r.size>n)return i.push("<p>"+woocommerce_photo_reviews_params.warning_max_file_size.replace("%file_name%",r.name)+"</p>"),!0;-1===woocommerce_photo_reviews_params.upload_allow.indexOf(r.type)&&i.push("<p>"+woocommerce_photo_reviews_params.warning_upload_allow.replace("%file_name%",r.name)+"</p>")})),i.length)return jQuery(".wcpr-comment-form-error-wraps").removeClass("wcpr-hidden").html(i.join("")),r.preventDefault(),!1}else if("on"===woocommerce_photo_reviews_params.required_image)return jQuery(".wcpr-comment-form-error-wraps").removeClass("wcpr-hidden").html(woocommerce_photo_reviews_params.warning_required_image),r.preventDefault(),!1}if(jQuery(".wcpr-comment-form-notify-wraps").removeClass("wcpr-hidden"),woocommerce_photo_reviews_params.restrict_number_of_reviews){o.attr("type","button"),async function(){let r="",o=new FormData(t[0]);return i.val()&&!t.find('textarea[name="comment"]').val()&&o.set("comment",i.val()),await new Promise((function(a){e.ajax({type:"post",url:woocommerce_photo_reviews_params.wc_ajax_url.toString().replace("%%endpoint%%","viwcpr_restrict_number_of_reviews"),processData:!1,cache:!1,contentType:!1,data:o,success:function(e){e.error?r=e.error:(e.remove_upload_file&&t.find(".wcpr_image_upload").val(""),e.img_id&&t.append(`<input type="hidden" name="wcpr_image_upload_id" value="${e.img_id}">`)),a(r)},error:function(e){r="-1"===e.responseText?e.statusText:e.responseText,a(r)}})})),r}().then((function(e){if(o.attr("type","submit"),e)return jQuery(".wcpr-comment-form-notify-wraps").addClass("wcpr-hidden"),jQuery(".wcpr-comment-form-error-wraps").removeClass("wcpr-hidden").html(e),r.preventDefault(),!1;o.addClass("viwcpr_form_checked").trigger("click")}))}}));let i=woocommerce_photo_reviews_params.hasOwnProperty("comments_container_id")?woocommerce_photo_reviews_params.comments_container_id:"comments",n=e("#"+i);function c(){if(woocommerce_photo_reviews_params.pagination_ajax&&n.length){let e=n.find(".woocommerce-pagination");woocommerce_photo_reviews_params.loadmore_button?(e.html(jQuery(".wcpr-load-more-reviews-button-modal").html()),wcpr_pagination_loadmore(n,n.find(".woocommerce-pagination"))):wcpr_pagination_basic(n,n.find(".woocommerce-pagination"))}else jQuery(".et_divi_theme").length&&jQuery("a.wcpr-filter-button").on("click",(function(){location.href=jQuery(this).attr("href")}))}function s(){n.prepend(e(".wcpr-filter-container")).prepend(e(".wcpr-overall-rating-and-rating-count")).prepend(e(".woocommerce-Reviews-title").eq(0))}n.length>0?(s(),c()):e(document).on("skeleton-loaded",(function(){n=e("#"+i),s(),c()})),e(document).on("click",".reviews_tab",(function(){n=e("#"+i),s()}))}));
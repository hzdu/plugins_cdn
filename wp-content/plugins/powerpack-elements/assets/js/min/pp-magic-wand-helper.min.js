"use strict";window.XdUtils=window.XdUtils||{extend:function(e,n){var t,i=n||{};for(t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);return i}},window.xdLocalStorage=window.xdLocalStorage||function(){var a,o="cross-domain-local-message",t={iframeId:"cross-domain-iframe",iframeUrl:void 0,initCallback:function(){}},d=-1,r={},n=!1,i=!0;function c(e){var n;try{n=JSON.parse(e.data)}catch(e){}n&&n.namespace===o&&("iframe-ready"===n.id?(i=!0,t.initCallback()):r[(n=n).id]&&(r[n.id](n),delete r[n.id]))}function l(e,n,t,i){r[++d]=i;t={namespace:o,id:d,action:e,key:n,value:t};a.contentWindow.postMessage(JSON.stringify(t),"*")}function u(e){t=XdUtils.extend(e,t);e=document.createElement("div");window.addEventListener?window.addEventListener("message",c,!1):window.attachEvent("onmessage",c),e.innerHTML='<iframe id="'+t.iframeId+'" src='+t.iframeUrl+' style="display: none;"></iframe>',document.body.appendChild(e),a=document.getElementById(t.iframeId)}function s(){return n&&i}function f(){return"complete"===document.readyState}return{init:function(e){if(!e.iframeUrl)throw"Please specify the iframe URL";n||(n=!0,f()?u(e):document.addEventListener?document.addEventListener("readystatechange",function(){f()&&u(e)}):document.attachEvent("readystatechange",function(){f()&&u(e)}))},setItem:function(e,n,t){s()&&l("set",e,n,t)},getItem:function(e,n){s()&&l("get",e,null,n)},removeItem:function(e,n){s()&&l("remove",e,null,n)},key:function(e,n){s()&&l("key",e,null,n)},getSize:function(e){s()&&l("size",null,null,e)},getLength:function(e){s()&&l("length",null,null,e)},clear:function(e){s()&&l("clear",null,null,e)},wasInit:function(){return n}}}();
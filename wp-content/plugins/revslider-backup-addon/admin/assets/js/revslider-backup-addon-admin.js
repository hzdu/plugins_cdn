!function(a){var s={},i="revslider-backup-addon",e=revslider_backup_addon.bricks;RVS.LIB.ADDONS=void 0===RVS.LIB.ADDONS?{}:RVS.LIB.ADDONS,RVS.LIB.ADDONS[i]=void 0===RVS.LIB.ADDONS[i]?{}:RVS.LIB.ADDONS[i],RVS.LIB.ADDONS[i].enable=l(revslider_backup_addon.enabled);var d={getBackups:function(){RVS.F.ajaxRequest("fetch_slide_backups",{slideID:RVS.S.slideId},(function(a){if(void 0!==a.data&&a.data.length>0){var i="";for(var d in a.data)a.data.hasOwnProperty(d)&&(i+='<div class="rs-backup-data-holder" data-backup="'+a.data[d].id+'" data-slide_id="'+RVS.S.slideId+'"><div class="rs-backup-data-inner"><span class="rs-backup-time"><i class="material-icons">date_range</i><span class="rs-backup-date">'+a.data[d].created+'</span></span><div class="rs-load-backup basic_action_button rs-addon-backup-btn">'+e.load_backup+"</div></div></div>");s.forms.container.html(i)}else s.forms.container.html('<div class="nobackups">'+e.no_backups+"</div>");RVS.F.RSDialog.create({modalid:"rbm_addon_backups",bgopacity:.5}),s.scrollInit?s.forms.inner.RSScroll("update"):(s.scrollInit=!0,s.forms.inner.RSScroll({wheelPropagation:!0,suppressScrollX:!0,minScrollbarLength:100}))}))},saveSlide:function(s,i){i.session_id=a("#rs-session-id").val()},closeModal:function(){RVS.F.RSDialog.close()},loadBackup:function(){var s=a(this).closest(".rs-backup-data-holder");confirm(e.restore+": "+s.find(".rs-backup-date").text()+"?")&&(d.closeModal(),RVS.F.ajaxRequest("restore_slide_backup",{id:s.data("backup"),slide_id:s.data("slide_id"),session_id:a("#rs-session-id").val()},(function(a){a.success&&window.location.reload(!0)})))},showPreview:function(){}};function n(){var n;RVS.F.addOnContainer.create({slug:i,icon:"backup",title:e.backup,alias:e.backup,slide:!0}),s.forms={slidegeneral:a("#form_slidegeneral_"+i)},n="",n+='<div class="form_inner_header"><i class="material-icons">backup</i>'+e.backup_addon+"</div>",n+="<br>",n+='<div class="collapsable" style="display:block !important">',n+='<div class="fullbutton callEventButton basic_action_button" data-evt="addonbackupsfetch">'+e.show_backups+'<i class="material-icons" style="margin-left: 10px">open_in_new</i></div>',n+='<input type="hidden" id="rs-session-id" value="'+revslider_backup_addon.md5+'" />',n+="</div>",s.forms.slidegeneral.append(n),n='<div class="rb-modal-wrapper" data-modal="rbm_addon_backups">',n+='    <div class="rb-modal-inner">',n+='        <div class="rb-modal-content">',n+='            <div id="rbm_addon_backups" class="rb_modal form_inner">',n+='                <div class="rbm_header"><i class="rbm_symbol material-icons">backup</i><span class="rbm_title">Slide Backups</span><i class="rbm_close material-icons">close</i></div>',n+='    \t\t\t   <div class="rbm_content">',n+='\t\t   \t\t       <div id="rs-backup-wrap">',n+='            \t\t       <div id="rs-backup-inner"><div id="rs-backup-container"></div></div>',n+="        \t\t       </div>",n+="    \t\t       </div>",n+="\t\t       </div>",n+="        </div>",n+="    </div>",n+="</div>",a("body").append(n),s.forms.inner=a("#rs-backup-inner"),s.forms.container=a("#rs-backup-container"),RVS.DOC.on("addonbackupsfetch",d.getBackups).on("rs_save_slide_params",d.saveSlide).on("backupsaddonload",d.loadBackup).on("backupsaddonpreview",d.showPreview),a("body").on("click","#rbm_addon_backups .rbm_close",d.closeModal).on("click",".rs-load-backup",d.loadBackup),s.initialised=!0}function l(a){return"false"===a||!1===a||"off"===a||void 0===a||0===a||-1===a||"0"===a?a=!1:"true"!==a&&!0!==a&&"on"!==a&&1!==a&&"1"!==a||(a=!0),a}RVS.DOC.on(i+"_init",(function(){(s.initialised||n(),revslider_backup_addon.enabled=l(RVS.LIB.ADDONS[i].enable),revslider_backup_addon.enabled)?punchgs.TweenLite.set("#gst_slide_"+i,{display:"inline-block"}):s.initialised&&(a("#gst_slide_"+i).hasClass("selected")&&(a("#gst_slide_"+i).removeClass("selected"),a("#gst_slide_1").click()),punchgs.TweenLite.set("#gst_slide_"+i,{display:"none"}),a("#form_slide_revslider-backup-addon").hide())})),setTimeout((function a(){void 0===RVS.S.slideId?setTimeout(a,500):RVS&&RVS.C&&void 0!==RVS.C.theRightToolbar&&RVS.DOC.trigger(i+"_init")}),500)}(jQuery);
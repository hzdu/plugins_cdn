jQuery(document).ready((function(a){"use strict";if(a("#tmpl-ywcmap-avatar-modal-content").length&&a("#yith-wcmap-avatar").length&&void 0!==wp?.template){(new function(){const t=this;let e=a("#yith-wcmap-avatar"),n=e.find(".avatar-modal-overlay"),o=e.find(".avatar-modal"),c=wp.template("ywcmap-avatar-modal-content"),l=!1,r=!1;t.centerModal=function(){let t=a(window).width(),e=a(window).height(),n=t-40>450?e/8+"px":"0",c=t-40>450?"450px":"auto";o.css({"margin-top":n,"margin-bottom":n,width:c})},t.openModal=function(){if(l)return!1;l=!0,o.append(c({})),e.show(),n.fadeIn(500),o.fadeIn(500,(function(){t.initActions()}))},t.closeModal=function(){l&&(n.fadeOut(500),o.fadeOut(500,(function(){o.find(".avatar-modal-content").remove(),e.hide(),t.clearTempAvatar(),r=!1,l=!1})))},t.resetModalContent=function(a){a.preventDefault(),o.find(".avatar-modal-content").replaceWith(c({})).fadeIn(),t.clearTempAvatar()},t.ajaxRequest=function(t,e,n){return null==e&&(e=new FormData),e.append("action",t),e.append("security",yith_wcmap.actionNonce),e.append("context","frontend"),a.ajax({url:yith_wcmap.ajaxUrl,data:e,contentType:!1,processData:!1,dataType:"json",type:"POST",beforeSend:function(){n&&o.block({message:null,overlayCSS:{background:"#fff no-repeat center",opacity:.5,cursor:"none"}})},complete:function(){n&&o.unblock()}}).fail((a=>{console.log(a)}))},t.uploadAvatar=function(e){e.preventDefault();let n=a(this).closest("form"),c=new FormData;a.each(a(this),(function(t,e){a.each(a(e)[0].files,(function(a,t){c.append(e.name,t)}))})),t.ajaxRequest("upload_avatar",c,!0).done((a=>{a?.success?(r=!0,n.replaceWith(a.data.html),o.find(".avatar-modal-content").addClass("avatar-uploaded")):window.location.reload()}))},t.setAvatar=function(){t.ajaxRequest("set_avatar",null,!0).done((a=>{window.location.reload()}))},t.clearTempAvatar=function(){r&&t.ajaxRequest("clear_temp_avatar",null,!1).done((a=>{r=!1}))},t.resetAvatar=function(a){a.preventDefault(),t.ajaxRequest("reset_avatar",null,!0).done((a=>{a?.success&&window.location.reload()}))},t.initActions=function(){e.on("change","#ywcmap_custom_avatar",t.uploadAvatar),e.on("click",".avatar-modal-close",t.closeModal),e.on("click",".reset-avatar a.cancel",t.resetModalContent),e.on("click",".reset-avatar a.reset",t.resetAvatar),e.on("click",".set-avatar button",t.setAvatar)},t.init=function(){t.centerModal(),a(document).on("click",".yith-wcmap .user-avatar",t.openModal),a(window).on("resize",t.centerModal)}}).init()}ywcmap.ajaxNavigation&&ywcmap.contentSelector.length&&a(document).on("click","li.has-ajax-navigation a, table.woocommerce-orders-table a.view, .woocommerce-Addresses a.edit",(function(t){t.preventDefault();var e=a(this).attr("href");a.ajax({url:e,data:{},method:"GET",dataType:"html",beforeSend:function(){a(ywcmap.contentSelector).addClass("ywcmap-loading").block({message:null,overlayCSS:{background:"url("+ywcmap.ajaxLoader+") #fff no-repeat center",opacity:.7,cursor:"none"}})},error:function(t,n,o){404==t.status&&(window.location=e),console.log(t,n,o),a(ywcmap.contentSelector).unblock()},success:function(t){a(ywcmap.contentSelector).replaceWith(a(t).find(ywcmap.contentSelector)),window.location.pathname!==e&&(window.history.replaceState({url:""+e},"Title",e),document.title=a(t).filter("title").text()),ywcmap.ajaxNavigationScroll&&window.scrollTo({top:a(ywcmap.contentSelector).offset().top,behavior:"smooth"}),a(document).trigger("yith-wcmap-myaccount-section-loaded")}})})),a(document).on("click",".group-opener",(function(t){t.preventDefault();var e=a(this).closest("li");e.hasClass("is-tab")&&a(window).width()>=480?e.toggleClass("is-hover"):(a(this).find("span.item-opener i").toggleClass("fa-chevron-down").toggleClass("fa-chevron-up"),a(this).next(".myaccount-submenu").slideToggle())}))}));
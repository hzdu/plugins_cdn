/**
 * lc_range-n-num.js - HTML5 ranges + numerical input for uber UIs
 * Version: 1.0.1
 * Author: Luca Montanari (LCweb)
 * Website: https://lcweb.it
 * Licensed under the MIT license
 */

var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(f){return f.raw=f};$jscomp.createTemplateTagFirstArgWithRaw=function(f,h){f.raw=h;return f};$jscomp.arrayIteratorImpl=function(f){var h=0;return function(){return h<f.length?{done:!1,value:f[h++]}:{done:!0}}};$jscomp.arrayIterator=function(f){return{next:$jscomp.arrayIteratorImpl(f)}};$jscomp.makeIterator=function(f){var h="undefined"!=typeof Symbol&&Symbol.iterator&&f[Symbol.iterator];return h?h.call(f):$jscomp.arrayIterator(f)};
(function(){var f=[],h=null,l={num_width:"auto",unit_width:"auto",unit:"",respect_limits:!0,on_change:null};window.lc_range_n_num=function(k,c){c=void 0===c?{}:c;this.attachTo=k;if(!this.attachTo)return console.error("You must provide a valid selector as first argument");if("object"!=typeof c)return console.error("Options must be an object");c=Object.assign({},l,c);this.init=function(){var a=this;h||(this.generate_style(),h=!0);n(k).forEach(function(b){if("INPUT"!=b.tagName||"number"==b.getAttribute("type"))b.parentNode.classList.length&&
b.parentNode.classList.contains("lcrnn-el-wrap")||a.wrap_element(b)})};this.wrap_element=function(a){var b=this,e=a.getAttribute("name"),d="lcrnn-"+e,g=document.createElement("div");g.classList.add("lcrnn-el-wrap");g.innerHTML=a.outerHTML.replace('type="number"','type="range"').replace("type='number'","type='range'")+'<span class="lcrnn_spacer"></span>';a.parentNode.insertBefore(g,a);g.appendChild(a);g.querySelector("input[type=range]").setAttribute("name",d);d="";c.unit&&(d=c.unit);a.hasAttribute("data-unit")&&
(d=a.getAttribute("data-unit").trim());g.innerHTML+='<span class="lcrnn_unit" data-for="'+e+'">'+d+"</span>";a=g.querySelector("input[type=number]");if("none"!=c.num_width){if("auto"!=c.num_width&&parseInt(c.num_width,10))var m=parseInt(c.num_width,10);else m=24+10*Math.max(a.getAttribute("max").length,a.getAttribute("step").length),m=m+parseInt(getComputedStyle(a).paddingLeft,10)+parseInt(getComputedStyle(a).paddingRight,10)+parseInt(getComputedStyle(a).borderLeftWidth,10)+parseInt(getComputedStyle(a).borderRightWidth,
10);50>m&&(m=50);a.style.width=m+"px"}e=0;d&&(e=g.querySelector(".lcrnn_unit"),e="auto"==c.unit_width?e.getBoundingClientRect().width:parseInt(c.unit_width,10)+parseInt(getComputedStyle(e).paddingLeft,10)+parseInt(getComputedStyle(e).paddingRight,10)+parseInt(getComputedStyle(e).borderLeftWidth,10)+parseInt(getComputedStyle(e).borderRightWidth,10));g.style.gridTemplateColumns="auto "+getComputedStyle(g.querySelector(".lcrnn_spacer")).width+" "+(m?m:Math.ceil(a.getBoundingClientRect().width))+"px "+
e+"px";g.querySelector("input[type=range]").addEventListener("input",function(p){b.range_to_num_sync(g,p.target.value)});g.querySelector("input[type=number]").addEventListener("change",function(p){b.num_to_range_sync(p)});g.querySelector("input[type=number]").addEventListener("keyup",function(p){b.debounce("num_to_range_sync",650,"num_to_range_sync",p)})};this.num_to_range_sync=function(a){a=a.target;var b=parseFloat(a.getAttribute("min")),e=parseFloat(a.getAttribute("max")),d="float"==(-1!==a.getAttribute("step").indexOf(".")||
-1!==a.getAttribute("min").indexOf(".")||-1!==a.getAttribute("max").indexOf(".")?"float":"int")?parseFloat(a.value):parseInt(a.value,10);d.toString().length||(d=b);a.hasAttribute("data-respect-limits")?parseInt(a.getAttribute("data-respect-limits"),10)&&(d<b&&(d=b),d>e&&(d=e)):c.respect_limits&&(d<b&&(d=b),d>e&&(d=e));a.value=d;a.parentNode.querySelector("input[type=range]").value=d;"function"==typeof c.on_change&&c.on_change.call(this,d,a)};this.range_to_num_sync=function(a,b){a.querySelector("input[type=number]").value=
b;"function"==typeof c.on_change&&c.on_change.call(this,b,a.querySelector("input[type=number]"))};this.debounce=function(a,b,e,d){"undefined"!=typeof f[a]&&f[a]&&clearTimeout(f[a]);var g=this;f[a]=setTimeout(function(){g[e].call(g,d)},b)};this.generate_style=function(){document.head.insertAdjacentHTML("beforeend","<style>\n.lcrnn-el-wrap,\n.lcrnn-el-wrap * {\n    box-sizing: border-box;\n}\n.lcrnn-el-wrap {\n\tdisplay: grid;\n\tgrid-column-gap: 0;\n\tgrid-template-columns: auto 20px auto auto;\n    align-items: center;\n}\n.lcrnn-el-wrap > * {\n    margin: 0;\n    min-width: 0;\n    max-width: none;\n}\n.lcrnn-el-wrap input[type=number] {\n    text-align: center;\n}\n.lcrnn_spacer {\n    width: 20px;\n\tdisplay: inline-block;\n}\n.lcrnn_unit:not(:empty) {\n    padding-left: 7px;\n}\n.lcrnn-el-wrap input[type=range] {\n    -webkit-appearance: none;\n    height: 6px;\n    padding: 0;\n    margin: 0;\n    background: #d5d5d5;\n    outline: none;\n    border: none;\n}\n.lcrnn-el-wrap input[type=range]::-webkit-slider-thumb {\n    -webkit-appearance: none;\n    appearance: none;\n    width: 17px;\n    height: 17px;\n    background: #888;\n    cursor: pointer;\n    border-radius: 50%;\n    border: 1px solid #aaa;\n    box-shadow: 0 0 0 5px #fff inset, 0 0 2px rgba(0,0,0,.15);\n}\n.lcrnn-el-wrap input[type=range]::-moz-range-thumb {\n    width: 15px;\n    height: 15px;\n    background: #888;\n    cursor: pointer;\n    border-radius: 50%;\n    border: 1px solid #aaa;\n    box-shadow: 0 0 0 5px #fff inset, 0 0 2px rgba(0,0,0,.15);\n}\n</style>")};
this.init()};var n=function(k){if("string"!=typeof k){if(k instanceof Element)return[k];for(var c=[],a=$jscomp.makeIterator(k),b=a.next();!b.done;b=a.next())b=b.value,b instanceof Element&&c.push(b);return c}(k.match(/(#[0-9][^\s:,]*)/g)||[]).forEach(function(e){k=k.replace(e,'[id="'+e.replace("#","")+'"]')});return document.querySelectorAll(k)}})();
window.lcrnn_update=function(f){document.querySelectorAll(attachTo).forEach(function(h){if("INPUT"!=h.tagName||"number"==h.getAttribute("type")){var l=h.parentNode;if(l.classList.contains("lcrnn-el-wrap")){var n=l.querySelector("input[type=number]"),k=l.querySelector("input[type=range]");h.hasAttribute("data-unit")&&(unit=h.getAttribute("data-unit").trim(),l.querySelector(".lcrnn_unit").length?unit?l.querySelector(".lcrnn_unit").innerHTML=unit:l.querySelector(".lcrnn_unit").remove():unit&&(l.innerHTML+=
'<span class="lcrnn_unit" data-for="'+n.getAttribute("name")+'">'+unit+"</span>"));k.setAttribute("min",n.getAttribute("min"));k.setAttribute("max",n.getAttribute("max"));k.setAttribute("step",n.getAttribute("step"));k.value=n.value}}})};
jQuery(function(i){var e=i("#yith-wcpsc-metabox-table"),c=e.find("tr").length-1,n=e.find("th").length-1,a=i("#yith-wcpsc-table-hidden"),s=function(){var t=[];e.find("tbody tr").each(function(){var c=[];i(this).find("td").each(function(){if(!i(this).is(".yith-wcpsc-table-button-container")){var t=i(this).find("input").val();c.push(t)}}),t.push(c)}),a.val(JSON.stringify(t))};e.on("click",".yith-wcpsc-add-row",function(){var t=i(this).closest("td").closest("tr");c++,t.after(function(){for(var t="<tr>",c=0;c<n;c++)t+='<td><input class="yith-wcpsc-input-table" type="text" /></td>';return t+='<td class="yith-wcpsc-table-button-container"><input type="button" class="yith-wcpsc-add-row yith-wcpsc-table-button yith-wcpsc-table-button-add" value="+" /><input type="button" class="yith-wcpsc-del-row yith-wcpsc-table-button yith-wcpsc-table-button-del" value="-" /></td>',t+="</tr>"}()),s()}).on("click",".yith-wcpsc-del-row",function(){if(!(c<2)){var t=i(this).closest("td").closest("tr");c--,t.remove(),s()}}).on("click",".yith-wcpsc-add-col",function(){var t,c=i(this).closest("th").index();n++,t=c,e.find("thead tr").find("th:eq("+t+")").after('<th><input type="button" class="yith-wcpsc-add-col yith-wcpsc-table-button yith-wcpsc-table-button-add" value="+" /><input type="button" class="yith-wcpsc-del-col yith-wcpsc-table-button yith-wcpsc-table-button-del" value="-" /></th>'),e.find("tbody tr").each(function(){i(this).find("td:eq("+t+")").after('<td><input class="yith-wcpsc-input-table" type="text" /></td>')}),s()}).on("click",".yith-wcpsc-del-col",function(){if(!(n<2)){var t,c=i(this).closest("th").index();n--,t=c,e.find("thead tr").find("th:eq("+t+")").remove(),e.find("tbody tr").each(function(){i(this).find("td:eq("+t+")").remove()}),s()}}).on("keyup","input",function(t){var c=i(t.target),e=c.val();(0<=e.search(/<[^>]+>/gi)||0<=e.search("<>")||0<=e.search("“"))&&c.val(e.replace(/<[^>]+>/gi,"").replace("<>","").replace("“",'"')),s()});var t=i("#display_as"),o=i("#title_of_desc_tab-container").parent(),h=i("#button_text-container").parent(),d=i("#tab_priority-container").parent(),l=i("#tab_title-container").parent();t.on("change",function(){var t=i(this).find(":selected").val();"tabbed_popup"==t?o.show():o.hide(),"tab"==t?(d.show(),h.hide()):(d.hide(),h.show()),"tab"===t||"tabbed_popup"===t?l.show():l.hide()}),t.trigger("change")});
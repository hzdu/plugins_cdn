(function($){const fcfConditions=(window.fcf_conditions)
const fcfShippingConditions=(window.fcf_shipping_conditions)
let conditionValueChanged=!1;function hasConditionValueChanged(){return!!conditionValueChanged}
function fieldExists(field){return $(field).length>0}
function hideField(field_to_hide){$(field_to_hide).hide();$(field_to_hide).removeClass('validate-required');$(field_to_hide).find('input,textarea,select').attr('disabled',!0);$(field_to_hide).addClass('fcf-hidden')}
function displayField(field_to_hide){$(field_to_hide).show();$(field_to_hide).find('input,textarea,select').attr('disabled',!1);$(field_to_hide).removeClass('fcf-hidden')}
var is_manual_event_disabled=!1;function fcf_fields_conditions(is_manual_event=!1){if(is_manual_event_disabled){is_manual_event=!1}
conditionValueChanged=!1;$.each(fcfConditions,function(condition,conditionDefinition){let field_to_hide=$('#'+condition+'_field');if(!fieldExists(field_to_hide)){return}
let user_chosen_shipping_method='';let conditional_logic_logic_shipping_fields_action='';let fcf_selected_shipping_method='';let fcf_selected_shipping_method_no_zone='';let conditional_logic_shipping_fields='';$.each(fcfShippingConditions,function(_,shippingConditionDefinition){conditional_logic_shipping_fields=shippingConditionDefinition.conditional_logic_shipping_fields;conditional_logic_logic_shipping_fields_action=shippingConditionDefinition.conditional_logic_shipping_fields_action;var fcf_shipping_rules=shippingConditionDefinition.conditional_logic_shipping_fields_rules;if(fcf_shipping_rules.length!==0){$.each(fcf_shipping_rules,function(_,value_rule){fcf_selected_shipping_method=value_rule.value;fcf_selected_shipping_method_no_zone=value_rule.no_zone_value;$.each($('input[name^="shipping_method"]:checked'),function(){user_chosen_shipping_method=$(this).val()});if(user_chosen_shipping_method.toLowerCase().indexOf(':fallback')>=0){user_chosen_shipping_method=user_chosen_shipping_method.split(':fallback')[0]}})}});let conditionFulfilled=!1;if(conditionDefinition.conditional_logic_fields_operator==='and'){conditionFulfilled=!0}
$.each(conditionDefinition.conditional_logic_fields_rules,function(_,conditionRule){conditionFulfilled=isConditionFulfilled(conditionFulfilled,conditionRule,conditionDefinition.conditional_logic_fields_operator)});var hidden=conditional_logic_fields_show_or_hide(user_chosen_shipping_method,fcf_selected_shipping_method,conditional_logic_logic_shipping_fields_action,conditionDefinition,conditionFulfilled);function fieldRequiresChange(field){return $(field).is(':hidden')!==hidden}
if(fieldRequiresChange(field_to_hide)){if(hidden){hideField(field_to_hide)}else{displayField(field_to_hide)}
$(field_to_hide).trigger('change');conditionValueChanged=!0}});if(is_manual_event&&hasConditionValueChanged()){$('body').trigger('update_checkout')}}
function conditional_logic_fields_operator_value(operator,match,field_matched){if(field_matched===!0&&operator==='or'){return!0}
if(field_matched!==!0&&operator==='and'){return!1}
return match=match||!1}
function isConditionFulfilled(initial,conditionRule,operator){let match=initial;let field_value=fcf_field_value(conditionRule.field);if(conditionRule.condition==='is'){if(field_value===conditionRule.value){match=conditional_logic_fields_operator_value(operator,match,!0)}else{match=conditional_logic_fields_operator_value(operator,match,!1)}}
return match}
function conditional_logic_fields_show_or_hide(user_chosen_shipping_method,fcf_selected_shipping_method,conditional_logic_logic_shipping_fields_action,conditionDefinition,conditionFulfilled){let hidden=!0;if(user_chosen_shipping_method.match(fcf_selected_shipping_method)&&conditional_logic_logic_shipping_fields_action==='hide'){if(conditionDefinition.conditional_logic_fields_action==='hide'){hidden=conditionFulfilled}}
if(user_chosen_shipping_method.match(fcf_selected_shipping_method)&&conditional_logic_logic_shipping_fields_action==='show'){if(conditionDefinition.conditional_logic_fields_action==='show'){hidden=!conditionFulfilled}}
if(conditionDefinition.conditional_logic_fields_action==='hide'){hidden=conditionFulfilled}
if(conditionDefinition.conditional_logic_fields_action==='show'){hidden=!conditionFulfilled}
return hidden}
$(document).on('change','input',function(e){fcf_fields_conditions(!0)});$(document).on('change','select',function(){fcf_fields_conditions(!0)});$('body').on('update_checkout',function(){is_manual_event_disabled=!0});$('body').on('updated_checkout',function(){fcf_fields_conditions();is_manual_event_disabled=!1});fcf_fields_conditions(!0)})(jQuery);function fcf_field_value(field_name){let field_value='';let input_field=jQuery('input[name='+field_name+']');let select_field=jQuery('select[name='+field_name+']');if(jQuery(input_field).attr('type')==='radio'){field_value=jQuery('input[name='+field_name+']:checked').val()}else if(jQuery(input_field).attr('type')==='checkbox'){field_value='unchecked';if(jQuery(input_field).is(':checked')){field_value='checked'}}else{field_value=jQuery(input_field).val();if(typeof field_value==='undefined'){field_value=jQuery(select_field).val()}}
return field_value}
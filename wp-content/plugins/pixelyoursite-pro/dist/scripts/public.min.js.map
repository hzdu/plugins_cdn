{"version":3,"file":"dist/scripts/public.min.js","mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,qCAAqC;AACrC;AACA,mCAAmC;AACnC;AACA,qCAAqC;AACrC;AACA;AACA;AACA,aAAa;AACb;AACA,+CAA+C;AAC/C;AACA,8CAA8C;AAC9C;AACA,8CAA8C;AAC9C;AACA,+CAA+C;AAC/C;AACA,6CAA6C;AAC7C;AACA,iDAAiD;AACjD;AACA;AACA;AACA,iEAAiE;AACjE;AACA,wGAAwG;AACxG;AACA,kEAAkE;AAClE;AACA,yDAAyD;AACzD;AACA,iDAAiD;AACjD;AACA,oFAAoF;AACpF;AACA,wDAAwD;AACxD;AACA,6CAA6C;AAC7C;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,qCAAqC;AACrC;AACA,mCAAmC;AACnC;AACA,qCAAqC;AACrC;AACA;AACA;AACA,aAAa;AACb;AACA,+CAA+C;AAC/C;AACA,8CAA8C;AAC9C;AACA,8CAA8C;AAC9C;AACA,+CAA+C;AAC/C;AACA,6CAA6C;AAC7C;AACA,iDAAiD;AACjD;AACA;AACA,iEAAiE;AACjE;AACA,wGAAwG;AACxG;AACA,kEAAkE;AAClE;AACA,yDAAyD;AACzD;AACA,iDAAiD;AACjD;AACA,oFAAoF;AACpF;AACA,wDAAwD;AACxD,6CAA6C;AAC7C;AACA;AACA,aAAa;AACb;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,mBAAmB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8EAA8E;AAC9E;AACA,0BAA0B,cAAc;AACxC;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4FAA4F;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2EAA2E;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,mBAAmB;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,mBAAmB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA,0BAA0B,cAAc;AACxC;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,mBAAmB;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,mBAAmB;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uFAAuF,2CAA2C;AAClI;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,2CAA2C,yBAAyB,gCAAgC,IAAI,QAAQ,IAAI,QAAQ,IAAI,QAAQ,IAAI,iCAAiC,GAAG;AAChL;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB,kBAAkB;AAClB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,SAAS;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,4BAA4B;AACrE;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,gCAAgC;AACrF;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,oBAAoB;AAC7D;AACA,qEAAqE;AACrE;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,4BAA4B;AAChE;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,wCAAwC;AACpG,4DAA4D,0BAA0B;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,yEAAyE,2CAA2C;AACpH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAmE,4CAA4C;AAC/G;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kFAAkF,2CAA2C;AAC7H;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE,2CAA2C;AAChH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kFAAkF,2CAA2C;AAC7H,kCAAkC;AAClC;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,kFAAkF,2CAA2C;AAC7H,kCAAkC;AAClC;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uFAAuF,2CAA2C;AAClI;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0EAA0E,2CAA2C;AACrH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uFAAuF,2CAA2C;AAClI,kCAAkC;AAClC;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,uFAAuF,2CAA2C;AAClI,kCAAkC;AAClC;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,yBAAyB;AACzB;AACA;AACA,yBAAyB;AACzB;AACA;AACA,yBAAyB;AACzB;AACA,kBAAkB;AAClB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE;AACtE;AACA,kBAAkB;AAClB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC,6BAA6B;AAC7B;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC,iCAAiC;AACjC,6BAA6B;AAC7B;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA,kBAAkB;AAClB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,6CAA6C;AACvG,0BAA0B;AAC1B;AACA;AACA,sBAAsB;AACtB,sDAAsD,6CAA6C;AACnG;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB,iFAAiF,sBAAsB;AACvG;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,6DAA6D;AAC7D,mEAAmE;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,oDAAoD;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,kBAAkB;AAClB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA,sBAAsB;AACtB;AACA,sBAAsB;AACtB;AACA,sBAAsB;AACtB;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;AACA,qCAAqC,wBAAwB;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA,8BAA8B;AAC9B;AACA,8BAA8B;AAC9B;AACA,8BAA8B;AAC9B;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,wBAAwB;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,uDAAuD,0CAA0C;AACjG,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,qFAAqF,wCAAwC;AAC7H,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA,aAAa;AACb;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,oCAAoC,2BAA2B;AAC/D;AACA;AACA;AACA,4CAA4C,2BAA2B;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB,2DAA2D;AAC3D;AACA;AACA;AACA;AACA,wCAAwC;AACxC,8BAA8B;AAC9B;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,4BAA4B;AAC5B,kBAAkB;AAClB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,gCAAgC,oCAAoC;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,gBAAgB;AAC1E,wCAAwC,qBAAqB;AAC7D;AACA,qDAAqD,4BAA4B,qBAAqB,sCAAsC;AAC5I,mDAAmD,0DAA0D,iBAAiB,8CAA8C,sCAAsC,iBAAiB,uCAAuC,kEAAkE,iDAAiD;AAC7X;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA,qBAAqB;AACrB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,qEAAqE,yBAAyB;AAC9F,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA,0EAA0E,0BAA0B;AACpG;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,0DAA0D,2CAA2C;AACrG;AACA;AACA;AACA,0DAA0D,2CAA2C;AACrG;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,wDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iEAAiE,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,mCAAmC;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,yDAAyD;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,oCAAoC,8CAA8C;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,mCAAmC;AAC9F;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA,iCAAiC;AACjC;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD;AACxD,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oFAAoF,sBAAsB;AAC1G;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,yDAAyD,wBAAwB;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,oCAAoC,8CAA8C;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iEAAiE,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,uBAAuB;AAC5E;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,oCAAoC;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,uBAAuB;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA,iCAAiC;AACjC;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD;AACxD,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oFAAoF,sBAAsB;AAC1G;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,mBAAmB;AACnE;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE;AACpE;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA,iEAAiE;AACjE;AACA;AACA,gDAAgD;AAChD;AACA;AACA;AACA,kGAAkG;AAClG;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD;AACpD,qBAAqB;AACrB;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,gBAAgB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA,oDAAoD;AACpD,qBAAqB;AACrB,kBAAkB;AAClB;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,gBAAgB;AAClD;AACA;AACA,qDAAqD;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,gBAAgB;AAClD;AACA;AACA,qDAAqD;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,mBAAmB;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,gBAAgB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mGAAmG;AACnG;AACA,8BAA8B,gBAAgB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,gBAAgB;AAClD;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,gBAAgB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,gBAAgB;AAC1D;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA,0CAA0C,gBAAgB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6EAA6E,sBAAsB;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6EAA6E,sBAAsB;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA,sBAAsB;AACtB;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,cAAc;AACd;AACA;AACA;AACA;AACA,6EAA6E,sBAAsB;AACnG,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,sBAAsB;AACnF,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,uBAAuB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4FAA4F,sBAAsB;AAClH;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE;AACxE,gEAAgE;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA,yBAAyB;AACzB;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,mBAAmB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,mBAAmB;AAC3D;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,4BAA4B,kCAAkC;AAC9D;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B,sBAAsB;AACtB,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B,sBAAsB;AACtB,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B,sBAAsB;AACtB,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B,sBAAsB;AACtB,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B,sBAAsB;AACtB,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B,sBAAsB;AACtB,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,mCAAmC;AACnC,sCAAsC;AACtC,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B,sBAAsB;AACtB,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B,sBAAsB;AACtB,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,6BAA6B,0BAA0B;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV,2CAA2C,iCAAiC;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,sBAAsB;AACtB;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,mBAAmB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,mBAAmB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,sBAAsB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC,kCAAkC;AAClC,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,0BAA0B;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,YAAY;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,oCAAoC,6CAA6C;AACjF;AACA;AACA,YAAY,eAAe;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,kDAAkD;AAClD;AACA;AACA;AACA","sources":["webpack://pixelyoursite-pro/./dist/scripts/public.js"],"sourcesContent":["/* global pysOptions */\r\n\r\n// https://bitbucket.org/pixelyoursite/pys_pro_7/issues/7/possible-ie-11-error\r\n// https://tc39.github.io/ecma262/#sec-array.prototype.includes\r\nif (!Array.prototype.includes) {\r\n    Object.defineProperty(Array.prototype, 'includes', {\r\n        value: function (searchElement, fromIndex) {\r\n\r\n            if (this == null) {\r\n                throw new TypeError('\"this\" is null or not defined');\r\n            }\r\n\r\n            // 1. Let O be ? ToObject(this value).\r\n            var o = Object(this);\r\n\r\n            // 2. Let len be ? ToLength(? Get(O, \"length\")).\r\n            var len = o.length >>> 0;\r\n\r\n            // 3. If len is 0, return false.\r\n            if (len === 0) {\r\n                return false;\r\n            }\r\n\r\n            // 4. Let n be ? ToInteger(fromIndex).\r\n            //    (If fromIndex is undefined, this step produces the value 0.)\r\n            var n = fromIndex | 0;\r\n\r\n            // 5. If n â‰¥ 0, then\r\n            //  a. Let k be n.\r\n            // 6. Else n < 0,\r\n            //  a. Let k be len + n.\r\n            //  b. If k < 0, let k be 0.\r\n            var k = Math.max(n >= 0 ? n : len - Math.abs(n), 0);\r\n\r\n            function sameValueZero(x, y) {\r\n                return x === y || (typeof x === 'number' && typeof y === 'number' && isNaN(x) && isNaN(y));\r\n            }\r\n\r\n            // 7. Repeat, while k < len\r\n            while (k < len) {\r\n                // a. Let elementK be the result of ? Get(O, ! ToString(k)).\r\n                // b. If SameValueZero(searchElement, elementK) is true, return true.\r\n                if (sameValueZero(o[k], searchElement)) {\r\n                    return true;\r\n                }\r\n                // c. Increase k by 1.\r\n                k++;\r\n            }\r\n\r\n            // 8. Return false\r\n            return false;\r\n        }\r\n    });\r\n}\r\n\r\nif (!String.prototype.startsWith) {\r\n    Object.defineProperty(String.prototype, 'startsWith', {\r\n        enumerable: false,\r\n        configurable: false,\r\n        writable: false,\r\n        value: function (searchString, position) {\r\n            position = position || 0;\r\n            return this.indexOf(searchString, position) === position;\r\n        }\r\n    });\r\n}\r\n\r\nif (!String.prototype.trim) {\r\n    (function () {\r\n        String.prototype.trim = function () {\r\n            return this.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\r\n        };\r\n    })();\r\n}\r\n\r\n! function ($, options) {\r\n    if (options.debug) {\r\n        console.log('PYS:', options);\r\n    }\r\n\r\n    var uniqueId = {};\r\n\r\n    var firstVisit = false;\r\n\r\n    var isTrackEventForGA = [];\r\n\r\n    var isAdsLoad = false;\r\n\r\n    let gtm_variables = {};\r\n    let gtm_datalayername = \"dynamicVariable\";\r\n    var domain = '';\r\n    if(options.hasOwnProperty(\"track_cookie_for_subdomains\") && options.track_cookie_for_subdomains) {\r\n        domain = getRootDomain(true);\r\n    }\r\n\r\n\r\n\r\n    var loadTags = [];\r\n\r\n    var dummyPinterest = function () {\r\n\r\n        /**\r\n         * Public API\r\n         */\r\n        return {\r\n            tag: function() {\r\n                return \"pinterest\";\r\n            },\r\n            isEnabled: function () {},\r\n\r\n            disable: function () {},\r\n\r\n            loadPixel: function () {},\r\n\r\n            fireEvent: function (name, data) {\r\n                return false;\r\n            },\r\n\r\n            onAdSenseEvent: function (event) {},\r\n\r\n            onClickEvent: function (params) {},\r\n\r\n            onWatchVideo: function (params) {},\r\n\r\n            onCommentEvent: function (event) {},\r\n\r\n            onFormEvent: function (params) {},\r\n\r\n            onDownloadEvent: function (params) {},\r\n\r\n\r\n\r\n            onWooAddToCartOnButtonEvent: function (product_id) {},\r\n\r\n            onWooAddToCartOnSingleEvent: function (product_id, qty, product_type, is_external, $form) {},\r\n\r\n            onWooRemoveFromCartEvent: function (cart_item_hash) {},\r\n\r\n            onWooAffiliateEvent: function (product_id) {},\r\n\r\n            onWooPayPalEvent: function (event) {},\r\n\r\n            onEddAddToCartOnButtonEvent: function (download_id, price_index, qty) {},\r\n\r\n            onEddRemoveFromCartEvent: function (item) {},\r\n\r\n            onPageScroll: function (event) {},\r\n            onTime: function (event) {\r\n\r\n            },\r\n\r\n        }\r\n\r\n    }();\r\n\r\n    var dummyBing = function () {\r\n\r\n        /**\r\n         * Public API\r\n         */\r\n        return {\r\n            tag: function() {\r\n                return \"bing\";\r\n            },\r\n            isEnabled: function () {},\r\n\r\n            disable: function () {},\r\n\r\n            loadPixel: function () {},\r\n\r\n            fireEvent: function (name, data) {\r\n                return false;\r\n            },\r\n\r\n            onAdSenseEvent: function (event) {},\r\n\r\n            onClickEvent: function (params) {},\r\n\r\n            onWatchVideo: function (params) {},\r\n\r\n            onCommentEvent: function (event) {},\r\n\r\n            onFormEvent: function (params) {},\r\n\r\n            onDownloadEvent: function (params) {},\r\n\r\n\r\n            onWooAddToCartOnButtonEvent: function (product_id) {},\r\n\r\n            onWooAddToCartOnSingleEvent: function (product_id, qty, product_type, is_external, $form) {},\r\n\r\n            onWooRemoveFromCartEvent: function (cart_item_hash) {},\r\n\r\n            onWooAffiliateEvent: function (product_id) {},\r\n\r\n            onWooPayPalEvent: function (event) {},\r\n\r\n            onEddAddToCartOnButtonEvent: function (download_id, price_index, qty) {},\r\n\r\n            onEddRemoveFromCartEvent: function (item) {},\r\n            onPageScroll: function (event) {},\r\n            onTime: function (event) {\r\n\r\n            },\r\n        }\r\n\r\n    }();\r\n\r\n    var Utils = function (options) {\r\n\r\n\r\n        var Pinterest = dummyPinterest;\r\n\r\n        var Bing = dummyBing;\r\n\r\n        var gtag_loaded = false;\r\n\r\n        var gtm_loaded = false;\r\n\r\n        let isNewSession = checkSession();\r\n\r\n        let dataLayerName = 'dataLayerPYS';\r\n\r\n        let GTMdataLayerName = 'dataLayer';\r\n\r\n\r\n        function loadPixels() {\r\n\r\n            if (!options.gdpr.all_disabled_by_api) {\r\n                if (!options.gdpr.tiktok_disabled_by_api) {\r\n                    TikTok.loadPixel();\r\n                }\r\n\r\n                if (!options.gdpr.facebook_disabled_by_api) {\r\n                    Facebook.loadPixel();\r\n                }\r\n\r\n                if (!options.gdpr.analytics_disabled_by_api) {\r\n                    Analytics.loadPixel();\r\n                }\r\n\r\n                if (!options.gdpr.google_ads_disabled_by_api) {\r\n                    GAds.loadPixel();\r\n                }\r\n\r\n                if (!options.gdpr.analytics_disabled_by_api) {\r\n                    GTM.loadPixel();\r\n                }\r\n\r\n                if (!options.gdpr.pinterest_disabled_by_api) {\r\n                    Pinterest.loadPixel();\r\n                }\r\n\r\n                if (!options.gdpr.bing_disabled_by_api) {\r\n                    Bing.loadPixel();\r\n                }\r\n\r\n            }\r\n            if (options.gdpr.consent_magic_integration_enabled && typeof CS_Data !== \"undefined\") {\r\n                if (typeof CS_Data.cs_google_analytics_consent_mode !== \"undefined\" && CS_Data.cs_google_analytics_consent_mode == 1) {\r\n                    Analytics.loadPixel();\r\n                }\r\n                if (typeof CS_Data.cs_google_ads_consent_mode !== \"undefined\" && CS_Data.cs_google_ads_consent_mode == 1 ) {\r\n                    GAds.loadPixel();\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * WATCHVIDEO UTILS\r\n         */\r\n\r\n        function isJSApiAttrEnabled(url) {\r\n            return url.indexOf('enablejsapi') > -1;\r\n        }\r\n\r\n        function isOriginAttrEnabled(url) {\r\n            return url.indexOf('origin') > -1;\r\n        }\r\n\r\n        // Returns key/value pairs of percentages: number of seconds to achieve\r\n        function getVideoCompletionMarks(duration) {\r\n\r\n            var marks = {};\r\n            var points = [0, 10, 50, 90, 100];\r\n\r\n            for (var i = 0; i < points.length; i++) {\r\n\r\n                var _point = points[i];\r\n                var _mark = _point + '%';\r\n                var _time = duration * _point / 100;\r\n\r\n                if (_point === 100) {\r\n                    _time = _time - 1;\r\n                }\r\n\r\n                // 10% => 123\r\n                marks[_mark] = Math.floor(_time);\r\n\r\n            }\r\n\r\n            return marks;\r\n\r\n        }\r\n\r\n        // Determine if the element is a YouTube video or not\r\n        function tagIsYouTubeVideo(tag) {\r\n            var src = tag.src || '';\r\n            return src.indexOf('youtube.com/embed/') > -1 || src.indexOf('youtube.com/v/') > -1;\r\n        }\r\n\r\n        function tagIsYouTubeAsyncVideo(tag) {\r\n            if(tag.src && tag.src.indexOf(\"data:image\") !== -1) return false; // video is loaded\r\n            var keys = Object.keys(tag.dataset);\r\n            for(var i = 0;i<keys.length;i++) {\r\n                if(keys[i].toLowerCase().indexOf(\"src\") > -1) {\r\n                    var src = tag.dataset[keys[i]];\r\n                    return src.indexOf('youtube.com/embed/') > -1 || src.indexOf('youtube.com/v/') > -1;\r\n                }\r\n            }\r\n            return false; //not find src\r\n        }\r\n\r\n        // Turn embed objects into iframe objects and ensure they have the right parameters\r\n        function normalizeYouTubeIframe(tag) {\r\n\r\n            var loc = window.location;\r\n            var a = document.createElement('a');\r\n            a.href = tag.src;\r\n            a.hostname = 'www.youtube.com';\r\n            a.protocol = loc.protocol;\r\n            var tmpPathname = a.pathname.charAt(0) === '/' ? a.pathname : '/' + a.pathname; // IE10 shim\r\n\r\n            if (!isJSApiAttrEnabled(a.search)) {\r\n                a.search = (a.search.length > 0 ? a.search + '&' : '') + 'enablejsapi=1';\r\n            }\r\n\r\n            // for security reasons, YouTube wants an origin parameter set that matches our hostname\r\n            if (!isOriginAttrEnabled(a.search) && loc.hostname.indexOf('localhost') === -1) {\r\n\r\n                var port = loc.port ? ':' + loc.port : '';\r\n                var origin = loc.protocol + '%2F%2F' + loc.hostname + port;\r\n\r\n                a.search = a.search + '&origin=' + origin;\r\n\r\n            }\r\n\r\n            if (tag.type === 'application/x-shockwave-flash') {\r\n\r\n                var newIframe = document.createElement('iframe');\r\n                newIframe.height = tag.height;\r\n                newIframe.width = tag.width;\r\n                tmpPathname = tmpPathname.replace('/v/', '/embed/');\r\n\r\n                tag.parentNode.parentNode.replaceChild(newIframe, tag.parentNode);\r\n\r\n                tag = newIframe;\r\n\r\n            }\r\n\r\n            a.pathname = tmpPathname;\r\n\r\n            if (tag.src !== a.href + a.hash) {\r\n                tag.src = a.href + a.hash;\r\n            }\r\n\r\n            return tag;\r\n\r\n        }\r\n\r\n        // Add event handlers for events emitted by the YouTube API\r\n        function addYouTubeEvents(iframe) {\r\n\r\n            var player = YT.get(iframe.id);\r\n            if (!player) {\r\n                player = new YT.Player(iframe, {});\r\n            }\r\n\r\n            if (typeof iframe.pauseFlag === 'undefined') {\r\n\r\n                iframe.pauseFlag = false;\r\n                player.addEventListener('onStateChange', function (evt) {\r\n                    onYouTubePlayerStateChange(evt, iframe);\r\n                });\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function addDynYouTubeVideos(el) {\r\n            // We only bind to iFrames with a YouTube URL with the enablejsapi=1 and\r\n            // origin=<<hostname>> parameters\r\n            if (el.tagName === 'IFRAME'\r\n                && tagIsYouTubeVideo(el)\r\n                && isJSApiAttrEnabled(el.src)\r\n                && isOriginAttrEnabled(el.src))\r\n            {\r\n                addYouTubeEvents(el);\r\n            }\r\n        }\r\n\r\n        // Event handler for events emitted from the YouTube API\r\n        function onYouTubePlayerStateChange(evt, iframe) {\r\n\r\n            var stateIndex = evt.data;\r\n            var player = evt.target;\r\n            var targetVideoUrl = player.getVideoUrl();\r\n            var targetVideoId = targetVideoUrl.match(/[?&]v=([^&#]*)/)[1]; // Extract the ID\r\n            var playerState = player.getPlayerState();\r\n            var marks = getVideoCompletionMarks(player.getDuration());\r\n\r\n            iframe.playTracker = iframe.playTracker || {};\r\n\r\n            if (playerState === YT.PlayerState.PLAYING && !iframe.timer) {\r\n\r\n                clearInterval(iframe.timer);\r\n\r\n                // check every second to see if we've hit any of our percentage viewed marks\r\n                iframe.timer = setInterval(function () {\r\n                    checkYouTubeCompletion(player, marks, iframe.videoId);\r\n                }, 1000);\r\n\r\n            } else {\r\n\r\n                clearInterval(iframe.timer);\r\n                iframe.timer = false;\r\n\r\n            }\r\n\r\n            // playlist edge-case handler\r\n            if (stateIndex === YT.PlayerState.PLAYING) {\r\n                iframe.playTracker[targetVideoId] = true;\r\n                iframe.videoId = targetVideoId;\r\n                iframe.pauseFlag = false;\r\n            }\r\n\r\n            if (!iframe.playTracker[iframe.videoId]) {\r\n                return false; // this video hasn't started yet, so this is spam\r\n            }\r\n\r\n            if (stateIndex === YT.PlayerState.PAUSED) {\r\n\r\n                if (!iframe.pauseFlag) {\r\n                    iframe.pauseFlag = true;\r\n                } else {\r\n                    return false; // we don't want to fire consecutive pause events\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // Trigger event if YouTube video mark was reached\r\n        function checkYouTubeCompletion(player, marks, videoId) {\r\n\r\n            var currentTime = player.getCurrentTime();\r\n\r\n            player[videoId] = player[videoId] || {};\r\n\r\n            for (var key in marks) {\r\n\r\n                if (marks[key] <= currentTime && !player[videoId][key]) {\r\n                    player[videoId][key] = true;\r\n\r\n                    var data = player.getVideoData();\r\n\r\n                    if (key === '0%') {\r\n                        key = 'play';\r\n                    }\r\n\r\n                    var params = {\r\n                        video_type: 'youtube',\r\n                        video_id: videoId,\r\n                        video_title: data.title,\r\n                    };\r\n\r\n                    let disable_watch_video = [];\r\n\r\n                    //Custom\r\n                    if ( options.triggerEventTypes.hasOwnProperty( \"video_view\" ) ) {\r\n                        Object.entries( options.triggerEventTypes.video_view ).forEach( function ( [ trigger_id, triggers ] ) {\r\n                            triggers.forEach( function ( trigger ) {\r\n                                if ( trigger.type === 'youtube' && trigger.rule === videoId ) {\r\n\r\n                                    let pixels = Object.keys( options.triggerEvents[ trigger_id ] );\r\n                                    for ( let i = 0; i < pixels.length; i++ ) {\r\n                                        let event = Utils.clone( options.triggerEvents[ trigger_id ][ pixels[ i ] ] );\r\n\r\n                                        if ( trigger.disable_watch_video ) {\r\n                                            disable_watch_video.push( pixels[ i ] );\r\n                                        }\r\n\r\n                                        if ( currentTime >= marks[ trigger.value ] ) {\r\n                                            event.params[ \"progress\" ] = key;\r\n                                            Utils.copyProperties( params, event.params );\r\n\r\n                                            if ( event.fired !== true ) {\r\n                                                if ( Utils.isEventInTimeWindow( event.name, event, 'dyn_' + pixels[ i ] + '_' + trigger_id ) ) {\r\n                                                    event = Utils.getFormFilledData( event );\r\n                                                    getPixelBySlag( pixels[ i ] ).fireEvent( event.name, event );\r\n                                                    options.triggerEvents[ trigger_id ][ pixels[ i ] ].fired = true;\r\n                                                }\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                }\r\n                            } )\r\n                        } )\r\n                    }\r\n\r\n                    // Auto\r\n                    if( options.automatic.enable_video\r\n                        && options.automatic.enable_youtube\r\n                        && options.dynamicEvents.hasOwnProperty(\"automatic_event_video\")\r\n                    ) {\r\n                        var pixels = Object.keys(options.dynamicEvents.automatic_event_video);\r\n\r\n                        for (var i = 0; i < pixels.length; i++) {\r\n                            if ( disable_watch_video.includes( pixels[ i ] ) ) {\r\n                                continue;\r\n                            }\r\n                            var event = Utils.clone(options.dynamicEvents.automatic_event_video[pixels[i]]);\r\n                            event.params[\"progress\"] = key\r\n                            Utils.copyProperties(params, event.params)\r\n                            if ( pixels[i] === 'tiktok' ) {\r\n                                var time_trigger = event.automatic_event_video_trigger;\r\n                                if ( currentTime >= marks[time_trigger] && event.fired !== true ) {\r\n                                    getPixelBySlag(pixels[i]).onWatchVideo(event);\r\n\r\n                                    //tiktok watch video fire once\r\n                                    options.dynamicEvents.automatic_event_video[pixels[i]].fired = true;\r\n                                }\r\n                            } else {\r\n                                Utils.copyProperties(Utils.getRequestParams(), event.params);\r\n                                getPixelBySlag(pixels[i]).onWatchVideo(event);\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    if(key == \"play\") {\r\n\r\n                        $.each(options.triggerEventTypes, function (triggerType, events) {\r\n                            $.each(events, function (eventId, triggers) {\r\n                                switch (triggerType) {\r\n                                    case 'video_play':\r\n                                        Utils.fireTriggerEvent(eventId);\r\n                                        break;\r\n                                }\r\n\r\n                            });\r\n                        });\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // Determine if the element is a Vimeo video or not\r\n        function tagIsVimeoVideo(tag) {\r\n            var src = tag.src || '';\r\n            return src.indexOf('player.vimeo.com/video/') > -1;\r\n        }\r\n\r\n        function tagIsAsincVimeoVideo(tag) {\r\n            if(tag.src) return false; // video is loaded\r\n            var keys = Object.keys(tag.dataset);\r\n            for(var i = 0;i<keys.length;i++) {\r\n                if(keys[i].toLowerCase().indexOf(\"src\") > -1) {\r\n                    var src = tag.dataset[keys[i]];\r\n                    return src.indexOf('player.vimeo.com/video/') > -1;\r\n                }\r\n            }\r\n            return false; //not find src\r\n        }\r\n\r\n        function attachVimeoPlayerToTag(tag) {\r\n            var player = new Vimeo.Player(tag);\r\n\r\n            player.getDuration().then(function (pl,seconds) {\r\n                pl.pysMarks = getVideoCompletionMarks(seconds);\r\n            }.bind(null,player));\r\n\r\n            player.getVideoTitle().then(function (pl,title) {\r\n                pl.pysVideoTitle = title;\r\n            }.bind(null,player));\r\n\r\n            player.getVideoId().then(function (pl,id) {\r\n                pl.pysVideoId = id;\r\n            }.bind(null,player));\r\n\r\n            player.pysCompletedMarks = {};\r\n\r\n            player.on('play', function () {\r\n\r\n                if (this.pysTimer) {\r\n                    return;\r\n                }\r\n\r\n                clearInterval(this.pysTimer);\r\n\r\n                var player = this;\r\n\r\n                this.pysTimer = setInterval(function () {\r\n                    checkVimeoCompletion(player);\r\n                }, 1000);\r\n\r\n            });\r\n\r\n            player.on('pause', function () {\r\n                clearInterval(this.pysTimer);\r\n                this.pysTimer = false;\r\n            });\r\n\r\n            player.on('ended', function () {\r\n                clearInterval(this.pysTimer);\r\n                this.pysTimer = false;\r\n            });\r\n        }\r\n\r\n        // Trigger event if Vimeo video mark was reached\r\n        function checkVimeoCompletion(player) {\r\n\r\n            player.getCurrentTime().then(function (seconds) {\r\n\r\n                for (var key in player.pysMarks) {\r\n\r\n                    if (player.pysMarks[key] <= seconds && !player.pysCompletedMarks[key]) {\r\n\r\n                        player.pysCompletedMarks[key] = true;\r\n\r\n                        if (key === '0%') {\r\n                            key = 'play';\r\n                        }\r\n\r\n                        var params = {\r\n                            video_type: 'vimeo',\r\n                            video_id: player.pysVideoId,\r\n                            video_title: player.pysVideoTitle,\r\n                        };\r\n\r\n                        let disable_watch_video = [];\r\n\r\n                        //Custom\r\n                        if ( options.triggerEventTypes.hasOwnProperty( \"video_view\" ) ) {\r\n                            Object.entries( options.triggerEventTypes.video_view ).forEach( function ( [ trigger_id, triggers ] ) {\r\n                                triggers.forEach( function ( trigger ) {\r\n                                    if ( trigger.type === 'vimeo' && trigger.rule == player.pysVideoId ) {\r\n                                        let pixels = Object.keys( options.triggerEvents[ trigger_id ] );\r\n                                        for ( let i = 0; i < pixels.length; i++ ) {\r\n                                            let event = Utils.clone( options.triggerEvents[ trigger_id ][ pixels[ i ] ] );\r\n\r\n                                            if ( trigger.disable_watch_video ) {\r\n                                                disable_watch_video.push( pixels[ i ] );\r\n                                            }\r\n\r\n                                            if ( seconds >= player.pysMarks[ trigger.value ] ) {\r\n                                                event.params[ \"progress\" ] = key;\r\n                                                Utils.copyProperties( params, event.params );\r\n\r\n                                                if ( event.fired !== true ) {\r\n                                                    if ( Utils.isEventInTimeWindow( event.name, event, 'dyn_' + pixels[ i ] + '_' + trigger_id ) ) {\r\n                                                        event = Utils.getFormFilledData( event );\r\n                                                        getPixelBySlag( pixels[ i ] ).fireEvent( event.name, event );\r\n                                                        options.triggerEvents[ trigger_id ][ pixels[ i ] ].fired = true;\r\n                                                    }\r\n                                                }\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                } )\r\n                            } )\r\n                        }\r\n\r\n                        // Auto\r\n                        if(options.automatic.enable_video\r\n                            && options.automatic.enable_vimeo\r\n                            && options.dynamicEvents.hasOwnProperty(\"automatic_event_video\")\r\n                        ) {\r\n                            var pixels = Object.keys(options.dynamicEvents.automatic_event_video);\r\n\r\n                            for (var i = 0; i < pixels.length; i++) {\r\n                                if ( disable_watch_video.includes( pixels[ i ] ) ) {\r\n                                    continue;\r\n                                }\r\n\r\n                                var event = Utils.clone(options.dynamicEvents.automatic_event_video[pixels[i]]);\r\n                                event.params[\"progress\"] = key\r\n                                Utils.copyProperties(params, event.params);\r\n\r\n                                if ( pixels[i] === 'tiktok' ) {\r\n                                    var time_trigger = event.automatic_event_video_trigger;\r\n                                    if ( seconds >= player.pysMarks[time_trigger] && event.fired !== true ) {\r\n                                        getPixelBySlag(pixels[i]).onWatchVideo(event);\r\n\r\n                                        //tiktok watch video fire once\r\n                                        options.dynamicEvents.automatic_event_video[pixels[i]].fired = true;\r\n                                    }\r\n                                } else {\r\n                                    Utils.copyProperties(Utils.getRequestParams(), event.params);\r\n                                    getPixelBySlag(pixels[i]).onWatchVideo(event);\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                        if(key == \"play\") {\r\n                            $.each(options.triggerEventTypes, function (triggerType, events) {\r\n                                $.each(events, function (eventId, triggers) {\r\n                                    switch (triggerType) {\r\n                                        case 'video_play':\r\n                                            Utils.fireTriggerEvent(eventId);\r\n                                            break;\r\n                                    }\r\n\r\n                                });\r\n                            });\r\n                        }\r\n                    }\r\n\r\n                }\r\n\r\n            });\r\n\r\n        }\r\n\r\n        /**\r\n         * COOKIES UTILS\r\n         */\r\n\r\n        var utmTerms = ['utm_source', 'utm_medium', 'utm_campaign', 'utm_content' ,'utm_term'];\r\n        var utmId = ['fbadid', 'gadid', 'padid', 'bingid'];\r\n        var requestParams = [];\r\n\r\n\r\n        function getDomain(url) {\r\n\r\n            url = url.replace(/(https?:\\/\\/)?(www.)?/i, '');\r\n\r\n            if (url.indexOf('/') !== -1) {\r\n                return url.split('/')[0];\r\n            }\r\n\r\n            return url;\r\n        }\r\n\r\n        function checkSession() {\r\n\r\n            if( Cookies.get('pys_start_session') === undefined ||\r\n                Cookies.get('pys_session_limit') === undefined) {\r\n                firstVisit = true;\r\n                return true\r\n            }\r\n            return false\r\n\r\n        }\r\n\r\n        function getTrafficSource() {\r\n\r\n            try {\r\n\r\n                let referrer = document.referrer.toString(),\r\n                    source;\r\n\r\n                let direct = referrer.length === 0;\r\n                let internal = direct ? false : referrer.indexOf(options.siteUrl) === 0;\r\n                let external = !direct && !internal;\r\n\r\n                if (external === false) {\r\n                    source = 'direct';\r\n                } else {\r\n                    source = referrer;\r\n                }\r\n\r\n                if (source !== 'direct') {\r\n                    // leave only domain (Issue #70)\r\n                    return getDomain(source);\r\n                } else {\r\n                    return source;\r\n                }\r\n\r\n            } catch (e) {\r\n                console.error(e);\r\n                return 'direct';\r\n            }\r\n\r\n        }\r\n\r\n        /**\r\n         * Return query variables object with where property name is query variable\r\n         * and property value is query variable value.\r\n         */\r\n        function getQueryVars() {\r\n\r\n            try {\r\n\r\n                var result = {},\r\n                    tmp = [];\r\n\r\n                window.location.search\r\n                    .substr(1)\r\n                    .split(\"&\")\r\n                    .forEach(function (item) {\r\n\r\n                        tmp = item.split('=');\r\n\r\n                        if (tmp.length > 1) {\r\n                            result[tmp[0]] = tmp[1];\r\n                        }\r\n\r\n                    });\r\n\r\n                return result;\r\n\r\n            } catch (e) {\r\n                console.error(e);\r\n                return {};\r\n            }\r\n\r\n        }\r\n\r\n        function getLandingPageValue() {\r\n            let name = \"pys_landing_page\"\r\n            if(options.visit_data_model === \"last_visit\") {\r\n                name = \"last_pys_landing_page\"\r\n            }\r\n            if(Cookies.get(name) && Cookies.get(name) !== \"undefined\") {\r\n                return Cookies.get(name);\r\n            }\r\n            else if(options.hasOwnProperty(\"tracking_analytics\") && options.tracking_analytics.TrafficLanding){\r\n                return options.tracking_analytics.TrafficLanding;\r\n            } else{\r\n                return \"\";\r\n            }\r\n        }\r\n        function getTrafficSourceValue() {\r\n            let name = \"pysTrafficSource\"\r\n            if(options.visit_data_model === \"last_visit\") {\r\n                name = \"last_pysTrafficSource\"\r\n            }\r\n            if(Cookies.get(name) && Cookies.get(name) !== \"undefined\") {\r\n                return Cookies.get(name);\r\n            }\r\n            else if(options.hasOwnProperty(\"tracking_analytics\") && options.tracking_analytics.TrafficSource){\r\n                return options.tracking_analytics.TrafficSource;\r\n            } else{\r\n                return \"\";\r\n            }\r\n        }\r\n\r\n        function getUTMId(useLast = false) {\r\n            try {\r\n                let cookiePrefix = 'pys_'\r\n                let terms = [];\r\n                if (useLast) {\r\n                    cookiePrefix = 'last_pys_'\r\n                }\r\n                $.each(utmId, function (index, name) {\r\n                    if (Cookies.get(cookiePrefix + name)) {\r\n                        terms[name] = Cookies.get(cookiePrefix + name)\r\n                    }\r\n                    else if(options.hasOwnProperty(\"tracking_analytics\") && options.tracking_analytics.TrafficUtmsId[name]) {\r\n                        terms[name] = filterEmails(options.tracking_analytics.TrafficUtmsId[name])\r\n                    }\r\n                });\r\n                return terms;\r\n            } catch (e) {\r\n                console.error(e);\r\n                return [];\r\n            }\r\n        }\r\n        /**\r\n         * Return UTM terms from request query variables or from cookies.\r\n         */\r\n        function getUTMs(useLast = false) {\r\n\r\n            try {\r\n                let cookiePrefix = 'pys_'\r\n                if(useLast) {\r\n                    cookiePrefix = 'last_pys_'\r\n                }\r\n                let terms = [];\r\n                $.each(utmTerms, function (index, name) {\r\n                    if (Cookies.get(cookiePrefix + name)) {\r\n                        let value = Cookies.get(cookiePrefix + name);\r\n                        terms[name] = filterEmails(value); // do not allow email in request params (Issue #70)\r\n                    }\r\n                    else if(options.hasOwnProperty(\"tracking_analytics\") && options.tracking_analytics.TrafficUtms[name]) {\r\n                        terms[name] = filterEmails(options.tracking_analytics.TrafficUtms[name])\r\n                    }\r\n                });\r\n\r\n                return terms;\r\n\r\n            } catch (e) {\r\n                console.error(e);\r\n                return [];\r\n            }\r\n\r\n        }\r\n\r\n        function getDateTime() {\r\n            var dateTime = new Array();\r\n            var date = new Date(),\r\n                days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\r\n                months = ['January', 'February', 'March', 'April', 'May', 'June',\r\n                    'July', 'August', 'September', 'October', 'November', 'December'\r\n                ],\r\n                hours = ['00-01', '01-02', '02-03', '03-04', '04-05', '05-06', '06-07', '07-08',\r\n                    '08-09', '09-10', '10-11', '11-12', '12-13', '13-14', '14-15', '15-16', '16-17',\r\n                    '17-18', '18-19', '19-20', '20-21', '21-22', '22-23', '23-24'\r\n                ];\r\n            dateTime.push(hours[date.getHours()]);\r\n            dateTime.push(days[date.getDay()]);\r\n            dateTime.push(months[date.getMonth()]);\r\n            return dateTime;\r\n        }\r\n\r\n        function filterEmails(value) {\r\n            return Utils.validateEmail(value) ? undefined : value;\r\n        }\r\n\r\n        /**\r\n         * PUBLIC API\r\n         */\r\n        return {\r\n\r\n            PRODUCT_SIMPLE : 0,\r\n            PRODUCT_VARIABLE : 1,\r\n            PRODUCT_BUNDLE : 2,\r\n            PRODUCT_GROUPED : 3,\r\n            utmTerms : utmTerms,\r\n            utmId : utmId,\r\n            isNewSession: checkSession(),\r\n            setHidePixelCookie: function(){\r\n                let refresh_after_consent = false;\r\n                if ( !firstVisit && options.gdpr.consent_magic_integration_enabled && window.CS_Data !== undefined && window.CS_Data.cs_refresh_after_consent) {\r\n                    refresh_after_consent = true;\r\n                }\r\n                if( !refresh_after_consent && !firstVisit) return false;\r\n\r\n                const url_parts = window.location.href;\r\n                const url_params = new URLSearchParams(window.location.search);\r\n                const matchingPixels = [\"facebook\", \"ga\", \"gtm\", \"google_ads\", \"bing\", \"pinterest\", \"tiktok\"];\r\n                $.each(matchingPixels, function (index, slug) {\r\n                    var module = getPixelBySlag(slug);\r\n                    if (module && module.isEnabled()) {\r\n                        const fullUrl = window.location.href;\r\n                        $.each(module.getHidePixel(), function (index, hide_info) {\r\n                            for (const item of hide_info.hide_tag_contain) {\r\n                                if (item && fullUrl.includes(item)) {\r\n                                    let hideTagTimeInMilliseconds = hide_info.hide_tag_time * 60 * 60 * 1000;\r\n                                    let expiresTime = new Date().getTime() + hideTagTimeInMilliseconds;\r\n                                    Cookies.set('hide_tag_' + hide_info.pixel, true, { expires: new Date(expiresTime), path: '/' });\r\n                                    break;\r\n                                }\r\n                            }\r\n                        });\r\n                    }\r\n\r\n                });\r\n            },\r\n            hideMatchingPixel: function(pixelValue, slug) {\r\n                if(Cookies.get('hide_tag_'+pixelValue))\r\n                {\r\n                    return true;\r\n                }\r\n                return false;\r\n            },\r\n            validateEmail: function (email) {\r\n                var re = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n                return re.test(email);\r\n            },\r\n            fireEventForAllPixel:function(functionName,events){\r\n                if (events.hasOwnProperty(Facebook.tag()))\r\n                    Facebook[functionName](events[Facebook.tag()]);\r\n                if (events.hasOwnProperty(Analytics.tag()))\r\n                    Analytics[functionName](events[Analytics.tag()]);\r\n                if (events.hasOwnProperty(GAds.tag()))\r\n                    GAds[functionName](events[GAds.tag()]);\r\n                if (events.hasOwnProperty(Pinterest.tag()))\r\n                    Pinterest[functionName](events[Pinterest.tag()]);\r\n                if (events.hasOwnProperty(Bing.tag()))\r\n                    Bing[functionName](events[Bing.tag()]);\r\n                if (events.hasOwnProperty(TikTok.tag()))\r\n                    TikTok[functionName](events[TikTok.tag()]);\r\n\r\n                if (events.hasOwnProperty(GTM.tag()))\r\n                    GTM[functionName](events[GTM.tag()]);\r\n            },\r\n\r\n            getQueryValue:function (name){\r\n                return getQueryVars()[name];\r\n            },\r\n\r\n            filterEmails: function (value) {\r\n                return filterEmails(value);\r\n            },\r\n\r\n            setupPinterestObject: function () {\r\n                Pinterest = window.pys.Pinterest || Pinterest;\r\n                return Pinterest;\r\n            },\r\n\r\n            setupBingObject: function () {\r\n                Bing = window.pys.Bing || Bing;\r\n                return Bing;\r\n            },\r\n\r\n            // Clone all object members to another and return it\r\n            copyProperties: function (from, to) {\r\n                for (var key in from) {\r\n                    if(\"function\" == typeof from[key]) {\r\n                        continue;\r\n                    }\r\n                    to[key] = from[key];\r\n                }\r\n                return to;\r\n            },\r\n\r\n            /**\r\n             * Generate unique ID\r\n             */\r\n            generateUniqueId : function (event) {\r\n                if(event.eventID.length == 0 || (event.type == \"static\" && options.ajaxForServerStaticEvent)) {\r\n                    let idKey = event.hasOwnProperty('custom_event_post_id') ? event.custom_event_post_id : event.e_id;\r\n                    if (!uniqueId.hasOwnProperty(idKey)) {\r\n                        uniqueId[idKey] = pys_generate_token();\r\n                    }\r\n                    return uniqueId[idKey];\r\n                }\r\n                else if(event.eventID.length !== 0)\r\n                {\r\n                    return event.eventID;\r\n                }\r\n            },\r\n\r\n            sendServerAjaxRequest: function ( url, data ) {\r\n                jQuery.ajax( {\r\n                    type: 'POST',\r\n                    url: url,\r\n                    data: data,\r\n                    headers: {\r\n                        'Cache-Control': 'no-cache'\r\n                    },\r\n                    success: function () {\r\n                    },\r\n                } );\r\n            },\r\n\r\n            clone: function(obj) {\r\n                var copy;\r\n\r\n                // Handle the 3 simple types, and null or undefined\r\n                if (null == obj || \"object\" != typeof obj) return obj;\r\n\r\n                // Handle Date\r\n                if (obj instanceof Date) {\r\n                    copy = new Date();\r\n                    copy.setTime(obj.getTime());\r\n                    return copy;\r\n                }\r\n\r\n                // Handle Array\r\n                if (obj instanceof Array) {\r\n                    copy = [];\r\n                    for (var i = 0, len = obj.length; i < len; i++) {\r\n                        if(\"function\" == typeof obj[i]) {\r\n                            continue;\r\n                        }\r\n                        copy[i] = Utils.clone(obj[i]);\r\n                    }\r\n                    return copy;\r\n                }\r\n\r\n                // Handle Object\r\n                if (obj instanceof Object) {\r\n                    copy = {};\r\n                    for (var attr in obj) {\r\n                        if (obj.hasOwnProperty(attr)) {\r\n                            if(\"function\" == typeof obj[attr]) {\r\n                                continue;\r\n                            }\r\n                            copy[attr] = Utils.clone(obj[attr]);\r\n                        }\r\n                    }\r\n                    return copy;\r\n                }\r\n\r\n                return obj;\r\n            },\r\n\r\n            // Returns array of elements with given tag name\r\n            getTagsAsArray: function (tag) {\r\n                return [].slice.call(document.getElementsByTagName(tag));\r\n            },\r\n\r\n\r\n            initializeVideoAPIs: function (options) {\r\n                let trigger_has_video_YT, trigger_has_video_Vimeo = false;\r\n                if (options.hasOwnProperty('automatic') && options.automatic.enable_video) {\r\n                    if ( options.triggerEventTypes.hasOwnProperty( \"video_view\" ) ) {\r\n                        Object.entries( options.triggerEventTypes.video_view ).forEach( function ( [ trigger_id, triggers ] ) {\r\n                            triggers.forEach( function ( trigger ) {\r\n                                if (trigger.type === 'youtube') {\r\n                                    trigger_has_video_YT = true;\r\n                                }\r\n                                if(trigger.type === 'vimeo'){\r\n                                    trigger_has_video_Vimeo = true;\r\n                                }\r\n                            });\r\n                        });\r\n                    }\r\n                    if(options.automatic.enable_youtube || trigger_has_video_YT){\r\n                        Utils.initYouTubeAPI();\r\n                    }\r\n                    if(options.automatic.enable_vimeo || trigger_has_video_Vimeo){\r\n                        Utils.initVimeoAPI();\r\n                    }\r\n                }\r\n            },\r\n            /**\r\n             * Load and initialize YouTube API\r\n             *\r\n             * @link: https://developers.google.com/youtube/iframe_api_reference\r\n             */\r\n            initYouTubeAPI: function () {\r\n\r\n                // maybe load YouTube JS API\r\n                if (typeof window.YT === 'undefined') {\r\n                    var tag = document.createElement('script');\r\n                    tag.src = '//www.youtube.com/iframe_api';\r\n                    var firstScriptTag = document.getElementsByTagName('script')[0];\r\n                    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\r\n                }\r\n\r\n                // initialize when API is ready\r\n                if ( typeof window.onYouTubeIframeAPIReady !== 'function' ) {\r\n\r\n                    window.onYouTubeIframeAPIReady = function () {\r\n\r\n                        // collect all possible YouTube tags\r\n                        var potentialVideos = Utils.getTagsAsArray( 'iframe' ).concat( Utils.getTagsAsArray( 'embed' ) );\r\n\r\n                        // turn videos into trackable videos with events\r\n                        for ( var i = 0; i < potentialVideos.length; i++ ) {\r\n                            var video = potentialVideos[ i ];\r\n                            if ( tagIsYouTubeVideo( video ) ) {\r\n                                var iframe = normalizeYouTubeIframe( video );\r\n                                addYouTubeEvents( iframe );\r\n                            } else if ( tagIsYouTubeAsyncVideo( video ) ){\r\n                                video.addEventListener( \"load\", function ( evt ) {\r\n                                    var iframe = normalizeYouTubeIframe( evt.currentTarget );\r\n                                    addYouTubeEvents( iframe );\r\n                                } );\r\n                            }\r\n                        }\r\n\r\n                        var targets = document.querySelectorAll( '.elementor-widget-video .elementor-wrapper' );\r\n\r\n                        const config = {\r\n                            attributes: false,\r\n                            childList: true,\r\n                            subtree: true\r\n                        };\r\n\r\n                        const callback = function ( mutationsList, observer ) {\r\n                            for ( let mutation of mutationsList ) {\r\n                                if ( mutation.type === 'childList' ) {\r\n                                    for ( var m = 0; m < mutation.addedNodes.length; m++ ) {\r\n                                        addDynYouTubeVideos( mutation.addedNodes[ m ] );\r\n                                    }\r\n                                }\r\n                            }\r\n                        };\r\n                        // observe elementator widget-video and add event when it add iframe\r\n                        for ( var i = 0; i < targets.length; i++ ) {\r\n                            const observer = new MutationObserver( callback );\r\n                            observer.observe( targets[ i ], config );//maybe remove before add\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Load and initialize Vimeo API\r\n             *\r\n             * @link: https://github.com/vimeo/player.js\r\n             */\r\n            initVimeoAPI: function () {\r\n\r\n\r\n                $(document).ready(function () {\r\n\r\n                    var potentialVideos = Utils.getTagsAsArray('iframe').concat(Utils.getTagsAsArray('embed'));\r\n\r\n                    for (var i = 0; i < potentialVideos.length; i++) {\r\n                        var tag = potentialVideos[i];\r\n                        if (tagIsVimeoVideo(tag)) {\r\n                            var nextElementHasClass = $(tag).closest('.elementor-widget-video').find('.elementor-custom-embed-image-overlay');\r\n                            if(nextElementHasClass.length > 0) {\r\n                                tag.addEventListener(\"load\", function() {\r\n                                    attachVimeoPlayerToTag(this);\r\n                                });\r\n                            }\r\n                            else {\r\n                                attachVimeoPlayerToTag(tag);\r\n                            }\r\n\r\n\r\n                        } else {\r\n                            if (tagIsAsincVimeoVideo(tag)) {\r\n                                tag.addEventListener(\"load\", function(evt) {\r\n                                    attachVimeoPlayerToTag(evt.currentTarget);\r\n                                });\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                });\r\n\r\n            },\r\n\r\n            manageCookies: function () {\r\n                if (options.gdpr.cookiebot_integration_enabled && typeof Cookiebot !== 'undefined') {\r\n                    if (Cookiebot.consented === false && !Cookiebot.consent['marketing'] && !Cookiebot.consent['statistics']) {\r\n                        return;\r\n                    }\r\n                }\r\n\r\n                let cm_consent_not_expressed = false;\r\n                if ( options.gdpr.consent_magic_integration_enabled && window.CS_Data !== undefined && window.CS_Data.cs_refresh_after_consent == 1 ) {\r\n                    if ( Cookies.get( 'cs_viewed_cookie_policy' ) === undefined ) {\r\n                        cm_consent_not_expressed = true;\r\n                    }\r\n                }\r\n\r\n                if( !cm_consent_not_expressed && isNewSession && !options.cookie.disabled_all_cookie && !options.cookie.disabled_start_session_cookie) {\r\n                    let duration = options.last_visit_duration * 60000\r\n                    var now = new Date();\r\n                    now.setTime(now.getTime() + duration);\r\n                    Cookies.set('pys_session_limit', true,{ expires: now, path: '/',domain: domain })\r\n                    Cookies.set('pys_start_session', true,{ path: '/',domain: domain });\r\n                    Utils.setHidePixelCookie();\r\n                }\r\n                if (options.gdpr.ajax_enabled && !options.gdpr.consent_magic_integration_enabled) {\r\n\r\n                    // retrieves actual PYS GDPR filters values which allow to avoid cache issues\r\n                    $.get({\r\n                        url: options.ajaxUrl,\r\n                        dataType: 'json',\r\n                        data: {\r\n                            action: 'pys_get_gdpr_filters_values'\r\n                        },\r\n                        success: function (res) {\r\n\r\n                            if (res.success) {\r\n\r\n                                options.gdpr.all_disabled_by_api = res.data.all_disabled_by_api;\r\n                                options.gdpr.facebook_disabled_by_api = res.data.facebook_disabled_by_api;\r\n                                options.gdpr.tiktok_disabled_by_api = res.data.tiktok_disabled_by_api;\r\n                                options.gdpr.analytics_disabled_by_api = res.data.analytics_disabled_by_api;\r\n                                options.gdpr.google_ads_disabled_by_api = res.data.google_ads_disabled_by_api;\r\n                                options.gdpr.pinterest_disabled_by_api = res.data.pinterest_disabled_by_api;\r\n                                options.gdpr.bing_disabled_by_api = res.data.bing_disabled_by_api;\r\n\r\n                                options.cookie.externalID_disabled_by_api = res.data.externalID_disabled_by_api;\r\n                                options.cookie.disabled_all_cookie = res.data.disabled_all_cookie;\r\n                                options.cookie.disabled_advanced_form_data_cookie = res.data.disabled_advanced_form_data_cookie;\r\n                                options.cookie.disabled_landing_page_cookie = res.data.disabled_landing_page_cookie;\r\n                                options.cookie.disabled_first_visit_cookie = res.data.disabled_first_visit_cookie;\r\n                                options.cookie.disabled_trafficsource_cookie = res.data.disabled_trafficsource_cookie;\r\n                                options.cookie.disabled_utmTerms_cookie = res.data.disabled_utmTerms_cookie;\r\n                                options.cookie.disabled_utmId_cookie = res.data.disabled_utmId_cookie;\r\n\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n                if (!Cookies.get('pbid') && Facebook.isEnabled() && options.ajaxForServerEvent) {\r\n                    jQuery.ajax({\r\n                        url: options.ajaxUrl,\r\n                        dataType: 'json',\r\n                        data: {\r\n                            action: 'pys_get_pbid'\r\n                        },\r\n                        success: function (res) {\r\n                            if (res.data && res.data.pbid != false && options.send_external_id) {\r\n                                if(!(options.cookie.disabled_all_cookie || options.cookie.externalID_disabled_by_api)){\r\n                                    var expires = parseInt(options.external_id_expire || 180);\r\n                                    Cookies.set('pbid', res.data.pbid, { expires: expires,path: '/',domain: domain });\r\n                                }\r\n\r\n                                if(options.hasOwnProperty('facebook')) {\r\n                                    options.facebook.advancedMatching = {\r\n                                        ...options.facebook.advancedMatching,  // Ñ€Ð°ÑÐ¿Ñ‹Ð»ÑÐµÐ¼ Ñ‚ÐµÐºÑƒÑ‰Ð¸Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ advancedMatching\r\n                                        external_id: res.data.pbid\r\n                                    };\r\n                                }\r\n                            }\r\n                        }\r\n                    });\r\n                } else if (Cookies.get('pbid') && Facebook.isEnabled()){\r\n                    if(options.hasOwnProperty('facebook')) {\r\n                        options.facebook.advancedMatching = {\r\n                            ...options.facebook.advancedMatching,\r\n                            external_id: Cookies.get('pbid')\r\n                        };\r\n                    }\r\n                }\r\n                let expires = parseInt(options.cookie_duration); //  days\r\n                let queryVars = getQueryVars();\r\n                let landing = window.location.href.split('?')[0];\r\n                try {\r\n                    // save data for first visit\r\n                    if(Cookies.get('pys_first_visit') === undefined && (!options.cookie.disabled_all_cookie)) {\r\n\r\n                        if(!options.cookie.disabled_first_visit_cookie)\r\n                        {\r\n                            Cookies.set('pys_first_visit', true, { expires: expires, path: '/',domain: domain });\r\n                        }\r\n                        else {\r\n                            Cookies.remove('pys_first_visit')\r\n                        }\r\n\r\n                        if(!options.cookie.disabled_trafficsource_cookie)\r\n                        {\r\n                            Cookies.set('pysTrafficSource', getTrafficSource(), { expires: expires,path: '/',domain: domain });\r\n                        }\r\n                        else {\r\n                            Cookies.remove('pysTrafficSource')\r\n                        }\r\n\r\n                        if(!options.cookie.disabled_landing_page_cookie)\r\n                        {\r\n                            Cookies.set('pys_landing_page',landing,{ expires: expires,path: '/',domain: domain });\r\n                        }\r\n                        else {\r\n                            Cookies.remove('pys_landing_page')\r\n                        }\r\n\r\n                        if(!options.cookie.disabled_utmTerms_cookie)\r\n                        {\r\n                            $.each(utmTerms, function (index, name) {\r\n                                if (queryVars.hasOwnProperty(name)) {\r\n                                    Cookies.set('pys_' + name, queryVars[name], { expires: expires,path: '/',domain: domain });\r\n                                } else {\r\n                                    Cookies.remove('pys_' + name)\r\n                                }\r\n                            });\r\n                        }\r\n                        else {\r\n                            $.each(utmTerms, function (index, name) {\r\n                                Cookies.remove('pys_' + name)\r\n                            });\r\n                        }\r\n\r\n                        if(!options.cookie.disabled_utmId_cookie)\r\n                        {\r\n                            $.each(utmId,function(index,name) {\r\n                                if (queryVars.hasOwnProperty(name)) {\r\n                                    Cookies.set('pys_' + name, queryVars[name], { expires: expires,path: '/',domain: domain });\r\n                                } else {\r\n                                    Cookies.remove('pys_' + name)\r\n                                }\r\n                            })\r\n                        }\r\n                        else {\r\n                            $.each(utmId, function (index, name) {\r\n                                Cookies.remove('pys_' + name)\r\n                            });\r\n                        }\r\n\r\n                    }\r\n\r\n                    // save data for last visit if it new session\r\n                    if(isNewSession && (!options.cookie.disabled_all_cookie)) {\r\n                        if(!options.cookie.disabled_trafficsource_cookie)\r\n                        {\r\n                            Cookies.set('last_pysTrafficSource', getTrafficSource(), { expires: expires,path: '/',domain: domain });\r\n                        }\r\n                        else {\r\n                            Cookies.remove('last_pysTrafficSource')\r\n                        }\r\n\r\n                        if(!options.cookie.disabled_landing_page_cookie)\r\n                        {\r\n                            Cookies.set('last_pys_landing_page',landing,{ expires: expires,path: '/',domain: domain });\r\n                        }\r\n                        else {\r\n                            Cookies.remove('last_pys_landing_page')\r\n                        }\r\n\r\n                        if(!options.cookie.disabled_utmTerms_cookie)\r\n                        {\r\n                            $.each(utmTerms, function (index, name) {\r\n                                if (queryVars.hasOwnProperty(name)) {\r\n                                    Cookies.set('last_pys_' + name, queryVars[name], { expires: expires,path: '/',domain: domain });\r\n                                } else {\r\n                                    Cookies.remove('last_pys_' + name)\r\n                                }\r\n                            });\r\n                        }\r\n                        else {\r\n                            $.each(utmTerms, function (index, name) {\r\n                                Cookies.remove('last_pys_' + name)\r\n                            });\r\n                        }\r\n\r\n                        if(!options.cookie.disabled_utmId_cookie)\r\n                        {\r\n                            $.each(utmId,function(index,name) {\r\n                                if (queryVars.hasOwnProperty(name)) {\r\n                                    Cookies.set('last_pys_' + name, queryVars[name], { expires: expires,path: '/',domain: domain });\r\n                                } else {\r\n                                    Cookies.remove('last_pys_' + name)\r\n                                }\r\n                            })\r\n                        }\r\n                        else {\r\n                            $.each(utmId, function (index, name) {\r\n                                Cookies.remove('last_pys_' + name)\r\n                            });\r\n                        }\r\n\r\n                    }\r\n                    if(options.cookie.disabled_start_session_cookie) {\r\n                        Cookies.remove('pys_start_session')\r\n                        Cookies.remove('pys_session_limit')\r\n                    }\r\n                    if(options.cookie.disabled_all_cookie)\r\n                    {\r\n                        Cookies.remove('pys_first_visit')\r\n                        Cookies.remove('pysTrafficSource')\r\n                        Cookies.remove('pys_landing_page')\r\n                        Cookies.remove('last_pys_landing_page')\r\n                        Cookies.remove('last_pysTrafficSource')\r\n                        Cookies.remove('pys_start_session')\r\n                        Cookies.remove('pys_session_limit')\r\n                        $.each(Utils.utmTerms, function (index, name) {\r\n                            Cookies.remove('pys_' + name)\r\n                        });\r\n                        $.each(Utils.utmId,function(index,name) {\r\n                            Cookies.remove('pys_' + name)\r\n                        })\r\n                        $.each(Utils.utmTerms, function (index, name) {\r\n                            Cookies.remove('last_pys_' + name)\r\n                        });\r\n                        $.each(Utils.utmId,function(index,name) {\r\n                            Cookies.remove('last_pys_' + name)\r\n                        });\r\n                    }\r\n                } catch (e) {\r\n                    console.error(e);\r\n                }\r\n            },\r\n\r\n            initializeRequestParams: function () {\r\n\r\n                if (options.trackTrafficSource) {\r\n                    requestParams.traffic_source = getTrafficSourceValue();\r\n                }\r\n\r\n                if (options.trackUTMs) {\r\n\r\n                    var utms = getUTMs(options.visit_data_model === \"last_visit\");\r\n\r\n                    $.each(utmTerms, function (index, term) {\r\n                        if (term in utms) {\r\n                            requestParams[term] = utms[term];\r\n                        }\r\n                    });\r\n\r\n                }\r\n\r\n\r\n                var dateTime = getDateTime();\r\n                if(options.enable_event_time_param) {\r\n                    requestParams.event_hour = dateTime[0];\r\n                }\r\n\r\n                if(options.enable_event_day_param) {\r\n                    requestParams.event_day = dateTime[1];\r\n                }\r\n                if(options.enable_event_month_param) {\r\n                    requestParams.event_month = dateTime[2];\r\n                }\r\n\r\n                if(options.enable_lading_page_param){\r\n                    requestParams.landing_page = getLandingPageValue();\r\n                }\r\n            },\r\n\r\n            getRequestParams: function () {\r\n                return requestParams;\r\n            },\r\n\r\n            /**\r\n             * DOWNLOAD DOCS\r\n             */\r\n\r\n            getLinkExtension: function (link) {\r\n\r\n                // Remove anchor, query string and everything before last slash\r\n                link = link.substring(0, (link.indexOf(\"#\") === -1) ? link.length : link.indexOf(\"#\"));\r\n                link = link.substring(0, (link.indexOf(\"?\") === -1) ? link.length : link.indexOf(\"?\"));\r\n                link = link.substring(link.lastIndexOf(\"/\") + 1, link.length);\r\n\r\n                // If there's a period left in the URL, then there's a extension\r\n                if (link.length > 0 && link.indexOf('.') !== -1) {\r\n                    link = link.substring(link.lastIndexOf(\".\") + 1); // Remove everything but what's after the first period\r\n                    return link;\r\n                } else {\r\n                    return \"\";\r\n                }\r\n            },\r\n\r\n            getLinkFilename: function (link) {\r\n\r\n                // Remove anchor, query string and everything before last slash\r\n                link = link.substring(0, (link.indexOf(\"#\") === -1) ? link.length : link.indexOf(\"#\"));\r\n                link = link.substring(0, (link.indexOf(\"?\") === -1) ? link.length : link.indexOf(\"?\"));\r\n                link = link.substring(link.lastIndexOf(\"/\") + 1, link.length);\r\n\r\n                // If there's a period left in the URL, then there's a extension\r\n                if (link.length > 0 && link.indexOf('.') !== -1) {\r\n                    return link;\r\n                } else {\r\n                    return \"\";\r\n                }\r\n            },\r\n\r\n            /**\r\n             * CUSTOM EVENTS\r\n             */\r\n\r\n            setupMouseOverClickEvents: function (eventId, triggers) {\r\n\r\n                // Non-default binding used to avoid situations when some code in external js\r\n                // stopping events propagation, eg. returns false, and our handler will never called\r\n                document.addEventListener('mouseover', function(event) {\r\n                    var matchedElements = Array.from(document.querySelectorAll(triggers));\r\n                    var clickedElement = event.target;\r\n                    var closestMatch = clickedElement.closest(triggers);\r\n                    if (matchedElements.includes(clickedElement) || closestMatch){\r\n                        if (event.target.classList.contains('pys-mouse-over-' + eventId)) {\r\n                            return true;\r\n                        } else {\r\n                            event.target.classList.add('pys-mouse-over-' + eventId);\r\n                        }\r\n\r\n                        Utils.fireTriggerEvent(eventId);\r\n                    }\r\n                });\r\n\r\n\r\n            },\r\n\r\n            setupCSSClickEvents: function (eventId, triggers) {\r\n                // Non-default binding used to avoid situations when some code in external js\r\n                // stopping events propagation, eg. returns false, and our handler will never called\r\n                // add event to document to support dyn class\r\n                document.addEventListener('click', function(event) {\r\n                    let matchedElements = Array.from(document.querySelectorAll(triggers)),\r\n                        clickedElement = event.target,\r\n                        closestMatch = clickedElement.closest(triggers);\r\n\r\n                    if (matchedElements.includes(clickedElement) || closestMatch){\r\n                        Utils.fireTriggerEvent(eventId);\r\n                    }\r\n                }, true);\r\n            },\r\n\r\n            setupURLClickEvents: function () {\r\n\r\n                if( !options.triggerEventTypes.hasOwnProperty('url_click') ) {\r\n                    return;\r\n                }\r\n                // Non-default binding used to avoid situations when some code in external js\r\n                // stopping events propagation, eg. returns false, and our handler will never called\r\n                document.addEventListener('click', function(event) {\r\n                    let anchor = event.target.closest('a');\r\n\r\n                    if (anchor) {\r\n                        var url = anchor.getAttribute('href');\r\n                        if (url) {\r\n                            Object.entries(options.triggerEventTypes.url_click).forEach(function ([eventId, triggers]) {\r\n                                triggers.forEach(function (trigger) {\r\n                                    if (Utils.compareUrl(url, trigger.value, trigger.rule)) {\r\n                                        Utils.fireTriggerEvent(eventId);\r\n                                    }\r\n                                });\r\n                            });\r\n                        }\r\n                    }\r\n                }, true);\r\n\r\n            },\r\n\r\n            removeUrlDomain(url) {\r\n                if(url.indexOf(\"/#\") > -1) {\r\n                    url = url.substring(0, url.indexOf(\"/#\"));\r\n                }\r\n                return url.replace('http://','')\r\n                    .replace('https://','')\r\n                    .replace('www.','')\r\n                    .trim()\r\n                    .replace(/^\\/+/g, '')\r\n\r\n            },\r\n\r\n            compareUrl: function(base,url,rule){\r\n\r\n                if(url == \"*\" || url == '') return true;\r\n\r\n                base = Utils.removeUrlDomain(base)\r\n                url = Utils.removeUrlDomain(url)\r\n\r\n                if(rule == 'match') {\r\n                    return url == base;\r\n                } else {\r\n                    return base.indexOf(url) !== -1\r\n                }\r\n\r\n            },\r\n\r\n            setupScrollPosEvents: function (eventId, triggers) {\r\n\r\n                var scrollPosThresholds = {},\r\n                    docHeight = $(document).height() - $(window).height();\r\n\r\n                // convert % to absolute positions\r\n                $.each(triggers, function (index, scrollPos) {\r\n\r\n                    // convert % to pixels\r\n                    scrollPos = docHeight * scrollPos / 100;\r\n                    scrollPos = Math.round(scrollPos);\r\n\r\n                    scrollPosThresholds[scrollPos] = eventId;\r\n\r\n                });\r\n\r\n                $(document).on(\"scroll\",function () {\r\n\r\n                    var scrollPos = $(window).scrollTop();\r\n\r\n                    $.each(scrollPosThresholds, function (threshold, eventId) {\r\n\r\n                        // position has not reached yes\r\n                        if (scrollPos <= threshold) {\r\n                            return true;\r\n                        }\r\n\r\n                        // fire event only once\r\n                        if (eventId === null) {\r\n                            return true;\r\n                        } else {\r\n                            scrollPosThresholds[threshold] = null;\r\n                        }\r\n\r\n                        Utils.fireTriggerEvent(eventId);\r\n\r\n                    });\r\n\r\n                });\r\n\r\n            },\r\n            setupCommentEvents : function (eventId,triggers) {\r\n                $('form.comment-form').on(\"submit\",function () {\r\n                    Utils.fireTriggerEvent(eventId);\r\n                });\r\n            },\r\n\r\n            setupEmailLinkEvents: function ( events ) {\r\n\r\n                $( document ).on( 'click', 'a', function ( event ) {\r\n                    let anchor = event.target.closest('a');\r\n\r\n                    if (anchor) {\r\n                        let url = anchor.getAttribute('href');\r\n                        if (url && (url.startsWith('mailto:') || url.startsWith('tel:'))) {\r\n\r\n                            let sendEventIds = [],\r\n                                disabled_for_pixels = [],\r\n                                disabled_email_action = false;\r\n\r\n                            $.each(events, function (eventId, trigger_group) {\r\n                                url = url.replace('mailto:', '').replace('tel:', '');\r\n                                trigger_group.forEach(function (triggers) {\r\n                                    triggers.rules.forEach(function (trigger) {\r\n                                        if (Utils.compareUrl(url, trigger.value, trigger.rule)) {\r\n                                            sendEventIds.push(eventId);\r\n                                            if (triggers.hasOwnProperty('disabled_email_link') && triggers.disabled_email_link) {\r\n                                                disabled_email_action = true;\r\n                                                if (options.triggerEvents.hasOwnProperty(eventId)) {\r\n                                                    disabled_for_pixels.push(...Object.keys(options.triggerEvents[eventId]));\r\n                                                }\r\n                                            }\r\n                                        }\r\n                                    });\r\n                                })\r\n                            })\r\n\r\n                            if (sendEventIds.length > 0) {\r\n                                sendEventIds.forEach(function (sendEventId) {\r\n                                    Utils.fireTriggerEvent(sendEventId);\r\n                                })\r\n                            }\r\n                            setupEmailLinks(disabled_for_pixels);\r\n                        }\r\n                    }\r\n                } )\r\n            },\r\n\r\n            /**\r\n             * Events\r\n             */\r\n\r\n            isEventInTimeWindow: function (eventName, event, prefix) {\r\n\r\n                if(event.hasOwnProperty(\"hasTimeWindow\") && event.hasTimeWindow) {\r\n                    var cookieName = prefix+\"_\"+eventName;\r\n                    var now = new Date().getTime();\r\n\r\n                    if(Cookies.get(cookieName) !== undefined) {\r\n\r\n                        var lastTimeFire = Cookies.get(cookieName);\r\n                        var fireTime = event.timeWindow * 60*60*1000;\r\n\r\n                        if( now - lastTimeFire > fireTime) {\r\n                            Cookies.set(cookieName,now, { expires: event.timeWindow / 24.0, path: '/'} );\r\n                        } else {\r\n                            return false;\r\n                        }\r\n                    } else {\r\n                        Cookies.set(cookieName,now, { expires: event.timeWindow / 24.0, path: '/'} );\r\n                    }\r\n                }\r\n                return true\r\n            },\r\n\r\n            fireTriggerEvent: function (eventId) {\r\n\r\n                if (!options.triggerEvents.hasOwnProperty(eventId)) {\r\n                    return;\r\n                }\r\n\r\n                var event = {};\r\n                var events = options.triggerEvents[eventId];\r\n\r\n                if (events.hasOwnProperty('facebook')) {\r\n                    event = events.facebook;\r\n                    if(Utils.isEventInTimeWindow(event.name,event,\"dyn_facebook_\"+eventId)) {\r\n                        event = Utils.getFormFilledData(event);\r\n                        Facebook.fireEvent(event.name, event);\r\n                    }\r\n                }\r\n\r\n                if (events.hasOwnProperty('ga')) {\r\n                    event = events.ga;\r\n                    if(Utils.isEventInTimeWindow(event.name,event,\"dyn_ga_\"+eventId)) {\r\n                        event = Utils.getFormFilledData(event);\r\n                        Analytics.fireEvent(event.name, event);\r\n                    }\r\n                }\r\n\r\n                if (events.hasOwnProperty('google_ads')) {\r\n                    event = events.google_ads;\r\n                    if(Utils.isEventInTimeWindow(event.name,event,\"dyn_google_ads_\"+eventId)) {\r\n                        event = Utils.getFormFilledData(event);\r\n                        GAds.fireEvent(event.name, event);\r\n                    }\r\n                }\r\n\r\n                if (events.hasOwnProperty('pinterest')) {\r\n                    event = events.pinterest;\r\n                    if(Utils.isEventInTimeWindow(event.name,event,\"dyn_pinterest_\"+eventId)) {\r\n                        event = Utils.getFormFilledData(event);\r\n                        Pinterest.fireEvent(event.name, event);;\r\n                    }\r\n                }\r\n\r\n                if (events.hasOwnProperty('bing')) {\r\n                    event = events.bing;\r\n                    if(Utils.isEventInTimeWindow(event.name,event,\"dyn_bing_\"+eventId)) {\r\n                        event = Utils.getFormFilledData(event);\r\n                        Bing.fireEvent(event.name, event);;\r\n                    }\r\n                }\r\n                if (events.hasOwnProperty('tiktok')) {\r\n                    event = events.tiktok;\r\n                    if(Utils.isEventInTimeWindow(event.name,event,\"dyn_tiktok_\"+eventId)) {\r\n                        event = Utils.getFormFilledData(event);\r\n                        TikTok.fireEvent(event.name, event);\r\n                    }\r\n                }\r\n\r\n                if (events.hasOwnProperty('gtm')) {\r\n                    event = events.gtm;\r\n                    if(Utils.isEventInTimeWindow(event.name,event,\"dyn_gtm_\"+eventId)) {\r\n                        event = Utils.getFormFilledData(event);\r\n                        GTM.fireEvent(event.name, event);\r\n                    }\r\n                }\r\n\r\n\r\n            },\r\n\r\n            isFirstPurchaseFire: function ($eventName,orderId,pixel) {\r\n\r\n                if(Cookies.get(\"pys_\"+$eventName+\"_order_id_\"+pixel) == orderId) {\r\n                    return false;\r\n                } else {\r\n                    Cookies.set(\"pys_\"+$eventName+\"_order_id_\"+pixel, orderId, { expires: 1,path: '/' });\r\n                }\r\n                return true;\r\n            },\r\n\r\n            fireStaticEvents: function (pixel, timeout = 0) {\r\n\r\n                if (options.staticEvents.hasOwnProperty(pixel)) {\r\n\r\n                    $.each(options.staticEvents[pixel], function (eventId, events) {\r\n\r\n                        //skip purchase event if this order was fired\r\n                        if( options.woo.hasOwnProperty('woo_purchase_on_transaction') &&\r\n                            options.woo.woo_purchase_on_transaction &&\r\n                            (eventId === \"woo_purchase\" || eventId === \"woo_purchase_category\") ) {\r\n                            if(!Utils.isFirstPurchaseFire(eventId,events[0].woo_order,pixel)) {\r\n                                return;\r\n                            }\r\n                        }\r\n\r\n                        if( options.edd.hasOwnProperty('edd_purchase_on_transaction') &&\r\n                            options.edd.edd_purchase_on_transaction &&\r\n                            (eventId === \"edd_purchase\" || eventId === \"edd_purchase_category\") ) {\r\n                            if(!Utils.isFirstPurchaseFire(eventId,events[0].edd_order,pixel)) {\r\n                                return;\r\n                            }\r\n                        }\r\n\r\n\r\n                        $.each(events, function (index, event) {\r\n\r\n                            event.fired = event.fired || false;\r\n\r\n                            if (!event.fired && Utils.isEventInTimeWindow(event.name,event,'static_' + pixel+\"_\")) {\r\n                                event = Utils.getFormFilledData(event);\r\n\r\n                                var fired = false;\r\n\r\n                                // fire event\r\n                                if ( pixel === 'tiktok' ) {\r\n                                    setTimeout(function() {\r\n                                        getPixelBySlag(pixel).fireEvent(event.name, event);\r\n                                    }, timeout * 500);\r\n                                    timeout++;\r\n                                } else {\r\n                                    getPixelBySlag(pixel).fireEvent(event.name, event);\r\n                                }\r\n\r\n                                // prevent event double event firing\r\n                                event.fired = fired;\r\n                            }\r\n                        });\r\n                    });\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Load tag's JS\r\n             *\r\n             * @link: https://developers.google.com/analytics/devguides/collection/gtagjs/\r\n             * @link: https://developers.google.com/analytics/devguides/collection/gtagjs/custom-dims-mets\r\n             */\r\n            loadGoogleTag: function (id) {\r\n\r\n                if (!gtag_loaded) {\r\n                    let dataLayerName = this.dataLayerName;\r\n                    if(options.hasOwnProperty('GATags')){\r\n                        switch (options.GATags.ga_datalayer_type) {\r\n                            case 'default':\r\n                                dataLayerName = 'dataLayerPYS';\r\n                                break;\r\n                            case 'custom':\r\n                                dataLayerName = options.GATags.ga_datalayer_name;\r\n                                break;\r\n                            default:\r\n                                dataLayerName = 'dataLayer';\r\n                        }\r\n                    }\r\n                    this.dataLayerName = dataLayerName;\r\n                    (function (window, document, src) {\r\n                        var a = document.createElement('script'),\r\n                            m = document.getElementsByTagName('script')[0];\r\n                        a.async = 1;\r\n                        a.src = src;\r\n                        m.parentNode.insertBefore(a, m);\r\n                    })(window, document, '//www.googletagmanager.com/gtag/js?id=' + id+'&l='+this.dataLayerName);\r\n\r\n                    window[dataLayerName] = window[dataLayerName] || [];\r\n                    window.gtag = window.gtag || function gtag() {\r\n                        window[dataLayerName].push(arguments);\r\n                    };\r\n\r\n                    if ( options.google_consent_mode ) {\r\n                        let data = {};\r\n                        data[ 'analytics_storage' ] = options.gdpr.analytics_storage.enabled ? options.gdpr.analytics_storage.value : 'granted';\r\n                        data[ 'ad_storage' ] = options.gdpr.ad_storage.enabled ? options.gdpr.ad_storage.value : 'granted';\r\n                        data[ 'ad_user_data' ] = options.gdpr.ad_user_data.enabled ? options.gdpr.ad_user_data.value : 'granted';\r\n                        data[ 'ad_personalization' ] = options.gdpr.ad_personalization.enabled ? options.gdpr.ad_personalization.value : 'granted';\r\n\r\n                        this.loadDefaultConsent( 'consent', 'default', data );\r\n                    }\r\n\r\n                    gtag('js', new Date());\r\n                    gtag_loaded = true;\r\n\r\n                }\r\n\r\n            },\r\n\r\n            loadDefaultConsent: function() {\r\n                window[ this.dataLayerName ].push( arguments );\r\n            },\r\n\r\n            loadGTMScript: function (id) {\r\n                const domain = options.gtm.gtm_container_domain ?? 'www.googletagmanager.com';\r\n                const loader = options.gtm.gtm_container_identifier ?? 'gtm';\r\n                const gtm_auth = options.gtm.gtm_auth ?? ''; // Set this if needed\r\n                const gtm_preview = options.gtm.gtm_preview ?? ''; // Set this if needed\r\n                const datalayer_name = options.gtm.gtm_dataLayer_name ?? 'dataLayer';\r\n\r\n                window[ datalayer_name ] = window[ datalayer_name ] || [];\r\n                window.gtag = window.gtag || function gtag() {\r\n                    window[ datalayer_name ].push( arguments );\r\n                };\r\n\r\n                if ( options.google_consent_mode ) {\r\n                    let data = {};\r\n                    data[ 'analytics_storage' ] = options.gdpr.analytics_storage.enabled ? options.gdpr.analytics_storage.value : 'granted';\r\n                    data[ 'ad_storage' ] = options.gdpr.ad_storage.enabled ? options.gdpr.ad_storage.value : 'granted';\r\n                    data[ 'ad_user_data' ] = options.gdpr.ad_user_data.enabled ? options.gdpr.ad_user_data.value : 'granted';\r\n                    data[ 'ad_personalization' ] = options.gdpr.ad_personalization.enabled ? options.gdpr.ad_personalization.value : 'granted';\r\n\r\n                    this.GTMdataLayerName = datalayer_name;\r\n                    this.loadDefaultGTMConsent( 'consent', 'default', data );\r\n                }\r\n\r\n                (function(w, d, s, l, i) {\r\n                    w[l] = w[l] || [];\r\n                    w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });\r\n                    const f = d.getElementsByTagName(s)[0];\r\n                    const j = d.createElement(s);\r\n                    const dl = l !== 'dataLayer' ? '&l=' + l : '';\r\n                    j.async = true;\r\n                    j.src = 'https://' + domain + '/' + loader + '.js?id=' + i + dl;\r\n                    if (gtm_auth && gtm_preview) {\r\n                        j.src += '&gtm_auth=' + gtm_auth + '&gtm_preview=' + gtm_preview + '&gtm_cookies_win=x';\r\n                    }\r\n                    f.parentNode.insertBefore(j, f);\r\n                })(window, document, 'script', datalayer_name, id);\r\n\r\n            },\r\n\r\n            loadDefaultGTMConsent: function() {\r\n                window[ this.GTMdataLayerName ].push( arguments );\r\n            },\r\n\r\n            /**\r\n             * GDPR\r\n             */\r\n\r\n            loadPixels: function () {\r\n\r\n                if (options.gdpr.ajax_enabled && !options.gdpr.consent_magic_integration_enabled) {\r\n\r\n                    // retrieves actual PYS GDPR filters values which allow to avoid cache issues\r\n                    $.get({\r\n                        url: options.ajaxUrl,\r\n                        dataType: 'json',\r\n                        data: {\r\n                            action: 'pys_get_gdpr_filters_values'\r\n                        },\r\n                        success: function (res) {\r\n\r\n                            if (res.success) {\r\n\r\n                                options.gdpr.all_disabled_by_api = res.data.all_disabled_by_api;\r\n                                options.gdpr.facebook_disabled_by_api = res.data.facebook_disabled_by_api;\r\n                                options.gdpr.tiktok_disabled_by_api = res.data.tiktok_disabled_by_api;\r\n                                options.gdpr.analytics_disabled_by_api = res.data.analytics_disabled_by_api;\r\n                                options.gdpr.google_ads_disabled_by_api = res.data.google_ads_disabled_by_api;\r\n                                options.gdpr.pinterest_disabled_by_api = res.data.pinterest_disabled_by_api;\r\n                                options.gdpr.bing_disabled_by_api = res.data.bing_disabled_by_api;\r\n\r\n                                options.cookie.externalID_disabled_by_api = res.data.externalID_disabled_by_api;\r\n                                options.cookie.disabled_all_cookie = res.data.disabled_all_cookie;\r\n                                options.cookie.disabled_advanced_form_data_cookie = res.data.disabled_advanced_form_data_cookie;\r\n                                options.cookie.disabled_landing_page_cookie = res.data.disabled_landing_page_cookie;\r\n                                options.cookie.disabled_first_visit_cookie = res.data.disabled_first_visit_cookie;\r\n                                options.cookie.disabled_trafficsource_cookie = res.data.disabled_trafficsource_cookie;\r\n                                options.cookie.disabled_utmTerms_cookie = res.data.disabled_utmTerms_cookie;\r\n                                options.cookie.disabled_utmId_cookie = res.data.disabled_utmId_cookie;\r\n                            }\r\n                            loadPixels();\r\n\r\n                        }\r\n                    });\r\n\r\n                } else {\r\n                    loadPixels();\r\n                }\r\n\r\n            },\r\n\r\n            consentGiven: function (pixel) {\r\n\r\n                /**\r\n                 * Cookiebot\r\n                 */\r\n                if (options.gdpr.cookiebot_integration_enabled && typeof Cookiebot !== 'undefined') {\r\n\r\n                    var cookiebot_consent_category = options.gdpr['cookiebot_' + pixel + '_consent_category'];\r\n\r\n                    if (options.gdpr[pixel + '_prior_consent_enabled']) {\r\n                        if (Cookiebot.consented === true || Cookiebot.consent[cookiebot_consent_category]) {\r\n                            return true;\r\n                        }\r\n                    } else {\r\n                        if (Cookiebot.consent[cookiebot_consent_category]) {\r\n                            return true;\r\n                        }\r\n                    }\r\n                    return false;\r\n\r\n                }\r\n\r\n                /**\r\n                 * Cookie Notice\r\n                 */\r\n                if (options.gdpr.cookie_notice_integration_enabled && typeof cnArgs !== 'undefined') {\r\n\r\n                    var cn_cookie = Cookies.get(cnArgs.cookieName);\r\n\r\n                    if (options.gdpr[pixel + '_prior_consent_enabled']) {\r\n                        if (typeof cn_cookie === 'undefined' || cn_cookie === 'true') {\r\n                            return true;\r\n                        }\r\n                    } else {\r\n                        if (cn_cookie === 'true') {\r\n                            return true;\r\n                        }\r\n                    }\r\n\r\n                    return false;\r\n\r\n                }\r\n\r\n                /**\r\n                 * Cookie Law Info\r\n                 */\r\n\r\n                if (options.gdpr.cookie_law_info_integration_enabled) {\r\n                    var cli_cookie = Cookies.get('cookieyes-consent') ?? Cookies.get('viewed_cookie_policy');\r\n                    if (options.gdpr[pixel + '_prior_consent_enabled']) {\r\n                        if (typeof cli_cookie === 'undefined') return true;\r\n                        if (cli_cookie && cli_cookie === Cookies.get('cookieyes-consent')) {\r\n                            if (getCookieYes('analytics') === 'yes') {\r\n                                return true;\r\n                            }\r\n                        } else if (cli_cookie && cli_cookie === Cookies.get('viewed_cookie_policy')) {\r\n                            if (Cookies.get('viewed_cookie_policy') === 'yes') {\r\n                                return true;\r\n                            }\r\n                        }\r\n                    } else {\r\n                        if (cli_cookie && cli_cookie === Cookies.get('cookieyes-consent')) {\r\n                            if (getCookieYes('analytics') === 'yes') {\r\n                                return true;\r\n                            }\r\n                        } else if (cli_cookie && cli_cookie === Cookies.get('viewed_cookie_policy')) {\r\n                            if (Cookies.get('viewed_cookie_policy') === 'yes') {\r\n                                return true;\r\n                            }\r\n                        }\r\n                    }\r\n                    return false;\r\n                }\r\n\r\n                /**\r\n                 * ConsentMagic\r\n                 */\r\n                if (options.gdpr.consent_magic_integration_enabled && typeof CS_Data !== \"undefined\" ) {\r\n\r\n                    let test_prefix = CS_Data.test_prefix;\r\n                    if (\r\n                        ( ( typeof CS_Data.cs_google_consent_mode_enabled !== \"undefined\" && CS_Data.cs_google_consent_mode_enabled == 1 ) && ( pixel == 'analytics' || pixel == 'google_ads' ) )\r\n                        || ( typeof CS_Data.cs_meta_ldu_mode !== \"undefined\" && CS_Data.cs_meta_ldu_mode && pixel == 'facebook' )\r\n                    ) {\r\n                        if ( CS_Data.cs_cache_enabled == 0 || ( CS_Data.cs_cache_enabled == 1 && window.CS_Cache && window.CS_Cache.check_status ) ) {\r\n                            return true;\r\n                        } else {\r\n                            return false;\r\n                        }\r\n                    }\r\n\r\n                    if( pixel == 'facebook' && ( CS_Data.cs_script_cat.facebook == 0 || CS_Data.cs_script_cat.facebook == CS_Data.cs_necessary_cat_id ) ) {\r\n                        return true;\r\n                    } else if( pixel == 'bing' && ( CS_Data.cs_script_cat.bing == 0 || CS_Data.cs_script_cat.bing == CS_Data.cs_necessary_cat_id ) ) {\r\n                        return true;\r\n                    } else if( pixel == 'analytics' && ( CS_Data.cs_script_cat.analytics == 0 || CS_Data.cs_script_cat.analytics == CS_Data.cs_necessary_cat_id ) ) {\r\n                        return true;\r\n                    } else if( pixel == 'google_ads' && ( CS_Data.cs_script_cat.gads == 0 || CS_Data.cs_script_cat.gads == CS_Data.cs_necessary_cat_id ) ) {\r\n                        return true;\r\n                    } else if( pixel == 'pinterest' && ( CS_Data.cs_script_cat.pinterest == 0 || CS_Data.cs_script_cat.pinterest == CS_Data.cs_necessary_cat_id ) ) {\r\n                        return true;\r\n                    } else if( pixel == 'tiktok' && ( CS_Data.cs_script_cat.tiktok == 0 || CS_Data.cs_script_cat.tiktok == CS_Data.cs_necessary_cat_id ) ) {\r\n                        return true;\r\n                    }\r\n\r\n                    let substring = \"cs_enabled_cookie_term\",\r\n                        theCookies = document.cookie.split( ';' );\r\n\r\n                    for ( let i = 1; i <= theCookies.length; i++ ) {\r\n                        if ( theCookies[ i - 1 ].indexOf( substring ) !== -1 ) {\r\n                            let categoryCookie = theCookies[ i - 1 ].replace( 'cs_enabled_cookie_term' + test_prefix + '_', '' );\r\n                            categoryCookie = Number( categoryCookie.replace( /\\D+/g, \"\" ) );\r\n                            let cs_cookie_val = Cookies.get( 'cs_enabled_cookie_term' + test_prefix + '_' + categoryCookie );\r\n\r\n                            if ( categoryCookie === CS_Data.cs_script_cat.facebook && pixel == 'facebook' ) {\r\n                                return cs_cookie_val == 'yes';\r\n                            } else if ( categoryCookie === CS_Data.cs_script_cat.bing && pixel == 'bing' ) {\r\n                                return cs_cookie_val == 'yes';\r\n                            } else if ( categoryCookie === CS_Data.cs_script_cat.analytics && pixel == 'analytics' ) {\r\n                                return cs_cookie_val == 'yes';\r\n                            } else if ( categoryCookie === CS_Data.cs_script_cat.gads && pixel == 'google_ads' ) {\r\n                                return cs_cookie_val == 'yes';\r\n                            } else if ( categoryCookie === CS_Data.cs_script_cat.pinterest && pixel == 'pinterest' ) {\r\n                                return cs_cookie_val == 'yes';\r\n                            } else if ( categoryCookie === CS_Data.cs_script_cat.tiktok && pixel == 'tiktok' ) {\r\n                                return cs_cookie_val == 'yes';\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    return false;\r\n                }\r\n\r\n\r\n                /**\r\n                 * Real Cookie Banner\r\n                 */\r\n                if (options.gdpr.real_cookie_banner_integration_enabled) {\r\n                    var consentApi = window.consentApi;\r\n                    if (consentApi) {\r\n                        switch (pixel) {\r\n                            case \"analytics\":\r\n                                return consentApi.consentSync(\"http\", \"_ga\", \"*\").cookieOptIn;\r\n                            case \"facebook\":\r\n                                return consentApi.consentSync(\"http\", \"_fbp\", \"*\").cookieOptIn;\r\n                            case \"pinterest\":\r\n                                return consentApi.consentSync(\"http\", \"_pinterest_sess\", \".pinterest.com\").cookieOptIn;\r\n                            case \"bing\":\r\n                                return consentApi.consentSync(\"http\", \"_uetsid\", \"*\").cookieOptIn;\r\n                            case \"google_ads\":\r\n                                return consentApi.consentSync(\"http\", \"1P_JAR\", \".google.com\").cookieOptIn;\r\n                            case 'tiktok':\r\n                                return consentApi.consentSync(\"http\", \"tt_webid_v2\", \".tiktok.com\").cookieOptIn;\r\n                            default:\r\n                                return true;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                return true;\r\n\r\n            },\r\n\r\n            setupGdprCallbacks: function () {\r\n\r\n                let isConcent = false;\r\n\r\n                /**\r\n                 * Cookiebot\r\n                 */\r\n                if ( options.gdpr.cookiebot_integration_enabled && typeof Cookiebot !== 'undefined' ) {\r\n                    isConcent = true;\r\n                    window.addEventListener( \"CookiebotOnConsentReady\", function () {\r\n\r\n                        let consent = {\r\n                            facebook: true,\r\n                            ga: true,\r\n                            google_ads: true,\r\n                            tiktok: true,\r\n                            bing: true,\r\n                            pinterest: true,\r\n                            gtm: true,\r\n                        };\r\n                        Utils.initializeVideoAPIs( options );\r\n\r\n                        Utils.manageCookies();\r\n                        if ( Cookiebot.consent.marketing ) {\r\n                            Facebook.loadPixel();\r\n                            Bing.loadPixel();\r\n                            Pinterest.loadPixel();\r\n                            GAds.loadPixel();\r\n                            TikTok.loadPixel();\r\n\r\n                            consent.facebook = true;\r\n                            consent.bing = true;\r\n                            consent.google_ads = true;\r\n                            consent.pinterest = true;\r\n                            consent.tiktok = true;\r\n                        }\r\n                        if ( Cookiebot.consent.statistics ) {\r\n                            Analytics.loadPixel();\r\n\r\n                            consent.ga = true;\r\n                            consent.gtm = true;\r\n                        }\r\n                        if ( !Cookiebot.consent.marketing ) {\r\n                            Facebook.disable();\r\n                            Pinterest.disable();\r\n                            Bing.disable()\r\n                            GAds.disable();\r\n                            TikTok.disable();\r\n\r\n                            consent.facebook = false;\r\n                            consent.bing = false;\r\n                            consent.google_ads = false;\r\n                            consent.pinterest = false;\r\n                            consent.tiktok = false;\r\n                        }\r\n                        if ( !Cookiebot.consent.statistics ) {\r\n                            Analytics.disable();\r\n\r\n                            consent.ga = false;\r\n                            consent.gtm = false;\r\n                        }\r\n\r\n                        Utils.setupGDPRData( consent );\r\n                    } );\r\n                }\r\n\r\n                /**\r\n                 * Cookie Notice\r\n                 */\r\n                if ( options.gdpr.cookie_notice_integration_enabled ) {\r\n                    isConcent = true;\r\n                    $( document ).onFirst( 'click', '.cn-set-cookie', function () {\r\n\r\n                        let consent = {};\r\n\r\n                        if ( $( this ).data( 'cookie-set' ) === 'accept' ) {\r\n\r\n                            Utils.initializeVideoAPIs( options );\r\n\r\n                            Facebook.loadPixel();\r\n                            Analytics.loadPixel();\r\n                            GAds.loadPixel();\r\n                            Pinterest.loadPixel();\r\n                            Bing.loadPixel();\r\n                            TikTok.loadPixel();\r\n\r\n                            consent = {\r\n                                facebook: true,\r\n                                ga: true,\r\n                                google_ads: true,\r\n                                tiktok: true,\r\n                                bing: true,\r\n                                pinterest: true,\r\n                                gtm: true,\r\n                            };\r\n                        } else {\r\n                            Facebook.disable();\r\n                            Analytics.disable();\r\n                            GAds.disable();\r\n                            Pinterest.disable();\r\n                            Bing.disable();\r\n                            TikTok.disable();\r\n\r\n                            consent = {\r\n                                facebook: false,\r\n                                ga: false,\r\n                                google_ads: false,\r\n                                tiktok: false,\r\n                                bing: false,\r\n                                pinterest: false,\r\n                                gtm: false,\r\n                            };\r\n                        }\r\n                        Utils.setupGDPRData( consent );\r\n\r\n                    } );\r\n\r\n                    $( document ).onFirst( 'click', '.cn-revoke-cookie', function () {\r\n                        Facebook.disable();\r\n                        Analytics.disable();\r\n                        GAds.disable();\r\n                        Pinterest.disable();\r\n                        Bing.disable();\r\n                        TikTok.disable();\r\n\r\n                        let consent = {\r\n                            facebook: false,\r\n                            ga: false,\r\n                            google_ads: false,\r\n                            tiktok: false,\r\n                            bing: false,\r\n                            pinterest: false,\r\n                            gtm: false,\r\n                        };\r\n                        Utils.setupGDPRData( consent );\r\n\r\n                    } );\r\n                }\r\n\r\n                /**\r\n                 * Cookie Law Info\r\n                 */\r\n                if ( options.gdpr.cookie_law_info_integration_enabled ) {\r\n                    isConcent = true;\r\n                    $( document ).onFirst( 'click', '#wt-cli-accept-all-btn,#cookie_action_close_header, .cky-btn-accept', function () {\r\n                        Utils.initializeVideoAPIs( options );\r\n                        setTimeout( function () {\r\n                            let cli_cookie = Cookies.get( 'cookieyes-consent' ) ?? Cookies.get( 'viewed_cookie_policy' );\r\n                            if ( typeof cli_cookie !== 'undefined' ) {\r\n                                if ( cli_cookie === Cookies.get( 'cookieyes-consent' ) && getCookieYes( 'analytics' ) == 'yes' ) {\r\n                                    Utils.manageCookies();\r\n                                } else if ( cli_cookie === Cookies.get( 'viewed_cookie_policy' ) && cli_cookie == 'yes' ) {\r\n                                    Utils.manageCookies();\r\n                                }\r\n                            }\r\n                        }, 1000 )\r\n                        Facebook.loadPixel();\r\n                        Analytics.loadPixel();\r\n                        GAds.loadPixel();\r\n                        Pinterest.loadPixel();\r\n                        Bing.loadPixel();\r\n                        TikTok.loadPixel();\r\n\r\n                        let consent = {\r\n                            facebook: true,\r\n                            ga: true,\r\n                            google_ads: true,\r\n                            tiktok: true,\r\n                            bing: true,\r\n                            pinterest: true,\r\n                            gtm: true,\r\n                        };\r\n                        Utils.setupGDPRData( consent );\r\n                    } );\r\n\r\n                    $( document ).onFirst( 'click', '#cookie_action_close_header_reject, .cky-btn-reject', function () {\r\n                        Facebook.disable();\r\n                        Analytics.disable();\r\n                        GAds.disable();\r\n                        Pinterest.disable();\r\n                        Bing.disable();\r\n                        TikTok.disable();\r\n\r\n                        let consent = {\r\n                            facebook: false,\r\n                            ga: false,\r\n                            google_ads: false,\r\n                            tiktok: false,\r\n                            bing: false,\r\n                            pinterest: false,\r\n                            gtm: false,\r\n                        };\r\n                        Utils.setupGDPRData( consent );\r\n                    } );\r\n                }\r\n\r\n                /**\r\n                 * ConsentMagic\r\n                 */\r\n                if ( options.gdpr.consent_magic_integration_enabled && typeof CS_Data !== \"undefined\" ) {\r\n                    isConcent = true;\r\n                    let test_prefix = CS_Data.test_prefix,\r\n                        cs_refresh_after_consent = false,\r\n                        substring = \"cs_enabled_cookie_term\";\r\n\r\n                    if ( CS_Data.cs_refresh_after_consent == 1 ) {\r\n                        cs_refresh_after_consent = CS_Data.cs_refresh_after_consent;\r\n                    }\r\n\r\n                    let consent_actions = function () {\r\n                        let theCookies = document.cookie.split( ';' );\r\n\r\n                        let consent = {\r\n                            facebook: true,\r\n                            ga: true,\r\n                            google_ads: true,\r\n                            tiktok: true,\r\n                            bing: true,\r\n                            pinterest: true,\r\n                            gtm: true,\r\n                        };\r\n\r\n                        for ( let i = 1; i <= theCookies.length; i++ ) {\r\n                            if ( theCookies[ i - 1 ].indexOf( substring ) !== -1 ) {\r\n                                let categoryCookie = theCookies[ i - 1 ].replace( 'cs_enabled_cookie_term' + test_prefix + '_', '' );\r\n                                categoryCookie = Number( categoryCookie.replace( /\\D+/g, \"\" ) );\r\n                                let cs_cookie_val = Cookies.get( 'cs_enabled_cookie_term' + test_prefix + '_' + categoryCookie );\r\n                                if ( cs_cookie_val == 'yes' ) {\r\n\r\n                                    Utils.initializeVideoAPIs( options );\r\n\r\n                                    if ( ( categoryCookie === CS_Data.cs_script_cat.facebook ) || ( typeof CS_Data.cs_meta_ldu_mode !== \"undefined\" && CS_Data.cs_meta_ldu_mode ) ) {\r\n                                        Facebook.loadPixel();\r\n                                    }\r\n\r\n                                    if ( categoryCookie === CS_Data.cs_script_cat.bing ) {\r\n                                        Bing.loadPixel();\r\n                                    }\r\n\r\n                                    if ( categoryCookie === CS_Data.cs_script_cat.analytics || ( typeof CS_Data.cs_google_analytics_consent_mode !== \"undefined\" && CS_Data.cs_google_analytics_consent_mode == 1 ) ) {\r\n                                        Analytics.loadPixel();\r\n                                    }\r\n                                    if ( categoryCookie === CS_Data.cs_script_cat.gads || ( typeof CS_Data.cs_google_ads_consent_mode !== \"undefined\" && CS_Data.cs_google_ads_consent_mode == 1 ) ) {\r\n                                        GAds.loadPixel();\r\n                                    }\r\n\r\n                                    if ( categoryCookie === CS_Data.cs_script_cat.pinterest ) {\r\n                                        Pinterest.loadPixel();\r\n                                    }\r\n\r\n                                    if ( categoryCookie === CS_Data.cs_script_cat.tiktok ) {\r\n                                        TikTok.loadPixel();\r\n                                    }\r\n                                } else {\r\n                                    if ( ( categoryCookie === CS_Data.cs_script_cat.facebook ) && ( typeof CS_Data.cs_meta_ldu_mode == \"undefined\" || !CS_Data.cs_meta_ldu_mode ) ) {\r\n                                        Facebook.disable();\r\n                                        consent.facebook = false;\r\n                                    }\r\n\r\n                                    if ( categoryCookie === CS_Data.cs_script_cat.bing ) {\r\n                                        Bing.disable();\r\n                                        consent.bing = false;\r\n                                    }\r\n\r\n                                    if ( categoryCookie === CS_Data.cs_script_cat.analytics && ( typeof CS_Data.cs_google_analytics_consent_mode == \"undefined\" || CS_Data.cs_google_analytics_consent_mode == 0 ) ) {\r\n                                        Analytics.disable();\r\n                                        consent.ga = false;\r\n                                        consent.gtm = false;\r\n                                    }\r\n\r\n                                    if ( categoryCookie === CS_Data.cs_script_cat.gads && ( typeof CS_Data.cs_google_ads_consent_mode == \"undefined\" || CS_Data.cs_google_ads_consent_mode == 0 ) ) {\r\n                                        GAds.disable();\r\n                                        consent.google_ads = false;\r\n                                    }\r\n\r\n                                    if ( categoryCookie === CS_Data.cs_script_cat.pinterest ) {\r\n                                        Pinterest.disable();\r\n                                        consent.pinterest = false;\r\n                                    }\r\n\r\n                                    if ( categoryCookie === CS_Data.cs_script_cat.tiktok ) {\r\n                                        TikTok.disable();\r\n                                        consent.tiktok = false;\r\n                                    }\r\n                                }\r\n                                if ( Cookies.get( 'cs_enabled_advanced_matching' ) == 'yes' ) {\r\n                                    Facebook.loadPixel();\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                        Utils.setupGDPRData( consent );\r\n                    }\r\n\r\n                    if ( !cs_refresh_after_consent ) {\r\n                        consent_actions();\r\n\r\n                        $( document ).on( 'click', '.cs_action_btn', function ( e ) {\r\n                            e.preventDefault();\r\n\r\n                            let consent = {\r\n                                facebook: true,\r\n                                ga: true,\r\n                                google_ads: true,\r\n                                tiktok: true,\r\n                                bing: true,\r\n                                pinterest: true,\r\n                                gtm: true,\r\n                            };\r\n\r\n                            let elm = $( this ),\r\n                                button_action = elm.attr( 'data-cs_action' );\r\n\r\n                            if ( button_action === 'allow_all' ) {\r\n\r\n                                Utils.initializeVideoAPIs( options );\r\n\r\n                                Facebook.loadPixel();\r\n                                Bing.loadPixel();\r\n                                Analytics.loadPixel();\r\n                                GAds.loadPixel();\r\n                                Pinterest.loadPixel();\r\n                                TikTok.loadPixel();\r\n\r\n                                consent.facebook = true;\r\n                                consent.bing = true;\r\n                                consent.ga = true;\r\n                                consent.google_ads = true;\r\n                                consent.pinterest = true;\r\n                                consent.tiktok = true;\r\n                                consent.gtm = true;\r\n\r\n                                Utils.setupGDPRData( consent );\r\n\r\n                            } else if ( button_action === 'disable_all' ) {\r\n\r\n                                Facebook.disable();\r\n                                Bing.disable();\r\n                                if ( CS_Data.cs_google_analytics_consent_mode == 0 || typeof CS_Data.cs_google_analytics_consent_mode == \"undefined\" ) {\r\n                                    Analytics.disable();\r\n                                    consent.ga = false;\r\n                                    consent.gtm = false;\r\n                                }\r\n\r\n                                if ( CS_Data.cs_google_ads_consent_mode == 0 || typeof CS_Data.cs_google_ads_consent_mode == \"undefined\" ) {\r\n                                    GAds.disable();\r\n                                    consent.google_ads = false;\r\n                                }\r\n                                Pinterest.disable();\r\n                                TikTok.disable();\r\n\r\n                                consent.facebook = false;\r\n                                consent.bing = false;\r\n                                consent.pinterest = false;\r\n                                consent.tiktok = false;\r\n\r\n                                Utils.setupGDPRData( consent );\r\n                            } else if ( button_action === 'cs_confirm' ) {\r\n                                consent_actions();\r\n                            }\r\n                        } );\r\n                    }\r\n                }\r\n\r\n                /**\r\n                 * Real Cookie Banner\r\n                 */\r\n                if ( options.gdpr.real_cookie_banner_integration_enabled ) {\r\n                    isConcent = true;\r\n                    let consentApi = window.consentApi;\r\n                    if ( consentApi ) {\r\n                        consentApi.consent( \"http\", \"_ga\", \"*\" )\r\n                            .then( Analytics.loadPixel.bind( Analytics ), Analytics.disable.bind( Analytics ) );\r\n                        consentApi.consent( \"http\", \"1P_JAR\", \".google.com\" )\r\n                            .then( GAds.loadPixel.bind( GAds ), GAds.disable.bind( GAds ) );\r\n                        consentApi.consent( \"http\", \"_fbp\", \"*\" )\r\n                            .then( Facebook.loadPixel.bind( Facebook ), Facebook.disable.bind( Facebook ) );\r\n                        consentApi.consent( \"http\", \"_pinterest_sess\", \".pinterest.com\" )\r\n                            .then( Pinterest.loadPixel.bind( Pinterest ), Pinterest.disable.bind( Pinterest ) );\r\n                        consentApi.consent( \"http\", \"_uetsid\", \"*\" )\r\n                            .then( Bing.loadPixel.bind( Bing ), Bing.disable.bind( Bing ) );\r\n                        consentApi.consent( \"http\", \"tt_webid_v2\", \".tiktok.com\" )\r\n                            .then( TikTok.loadPixel.bind( TikTok ), TikTok.disable.bind( TikTok ) );\r\n\r\n                        let consent = {\r\n                            facebook: true,\r\n                            ga: true,\r\n                            google_ads: true,\r\n                            tiktok: true,\r\n                            bing: true,\r\n                            pinterest: true,\r\n                            gtm: true,\r\n                        };\r\n\r\n                        if (!consentApi.consentSync(\"http\", \"_ga\", \"*\").cookieOptIn) {\r\n                            consent.ga = false;\r\n                            consent.gtm = false;\r\n                        }\r\n                        if (!consentApi.consentSync(\"http\", \"_fbp\", \"*\").cookieOptIn) {\r\n                            consent.facebook = false;\r\n                        }\r\n                        if (!consentApi.consentSync(\"http\", \"_pinterest_sess\", \".pinterest.com\").cookieOptIn) {\r\n                            consent.pinterest = false;\r\n                        }\r\n                        if (!consentApi.consentSync(\"http\", \"_uetsid\", \"*\").cookieOptIn) {\r\n                            consent.bing = false;\r\n                        }\r\n                        if (!consentApi.consentSync(\"http\", \"1P_JAR\", \".google.com\").cookieOptIn) {\r\n                            consent.google_ads = false;\r\n                        }\r\n                        if (!consentApi.consentSync(\"http\", \"tt_webid_v2\", \".tiktok.com\").cookieOptIn) {\r\n                            consent.tiktok = false;\r\n                        }\r\n                        Utils.setupGDPRData( consent );\r\n\r\n                        // load WatchVideo event APIs for Auto\r\n                        /**\r\n                         * Real Cookie Banner.\r\n                         */\r\n                        if ( options.hasOwnProperty( 'automatic' ) && options.automatic.enable_video && options.automatic.enable_youtube ) {\r\n                            consentApi.consent( \"http\", \"CONSENT\", \".youtube.com\" ).then( Utils.initYouTubeAPI );\r\n                        }\r\n\r\n                        if ( options.hasOwnProperty( 'automatic' ) && options.automatic.enable_video && options.automatic.enable_vimeo ) {\r\n                            consentApi.consent( \"http\", \"player\", \".vimeo.com\" ).then( Utils.initVimeoAPI );\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if ( !isConcent ) {\r\n                    Utils.initializeVideoAPIs( options );\r\n                }\r\n            },\r\n\r\n            setupGDPRData: function ( consent ) {\r\n                consent = window.btoa( JSON.stringify( consent ) );\r\n                Cookies.set( 'pys_consent', consent, { expires: 365, path: '/', domain: domain } );\r\n            },\r\n\r\n            /**\r\n             * Enrich\r\n             */\r\n            isCheckoutPage: function () {\r\n                return $('body').hasClass('woocommerce-checkout') || document.querySelector('.woocommerce-checkout') ||\r\n                    $('body').hasClass('edd-checkout');\r\n            },\r\n            addCheckoutFields : function() {\r\n                var utm = \"\";\r\n                var utms = getUTMs()\r\n                $.each(utmTerms, function (index, name) {\r\n                    if(index > 0) {\r\n                        utm+=\"|\";\r\n                    }\r\n                    utm+=name+\":\"+utms[name];\r\n                });\r\n                var utmIdList = \"\";\r\n                var utmsIds = getUTMId()\r\n                $.each(utmId, function (index, name) {\r\n                    if(index > 0) {\r\n                        utmIdList+=\"|\";\r\n                    }\r\n                    utmIdList+=name+\":\"+utmsIds[name];\r\n                });\r\n                var utmIdListLast = \"\";\r\n                var utmsIdsLast = getUTMId(true)\r\n                $.each(utmId, function (index, name) {\r\n                    if(index > 0) {\r\n                        utmIdListLast+=\"|\";\r\n                    }\r\n                    utmIdListLast+=name+\":\"+utmsIdsLast[name];\r\n                });\r\n\r\n\r\n                var utmLast = \"\";\r\n                var utmsLast = getUTMs(true)\r\n                $.each(utmTerms, function (index, name) {\r\n                    if(index > 0) {\r\n                        utmLast+=\"|\";\r\n                    }\r\n                    utmLast+=name+\":\"+utmsLast[name];\r\n                });\r\n\r\n                var dateTime = getDateTime();\r\n                var landing = Cookies.get('pys_landing_page');\r\n                var lastLanding = Cookies.get('last_pys_landing_page');\r\n                var trafic = Cookies.get('pysTrafficSource');\r\n                var lastTrafic = Cookies.get('last_pysTrafficSource');\r\n\r\n                var $form = null;\r\n                if($('body').hasClass('woocommerce-checkout')) {\r\n                    $form = $(\"form.woocommerce-checkout\");\r\n                } else {\r\n                    $form = $(\"#edd_purchase_form\");\r\n                }\r\n                var inputs = {'pys_utm':utm,\r\n                    'pys_utm_id':utmIdList,\r\n                    'pys_browser_time':dateTime.join(\"|\"),\r\n                    'pys_landing':landing,\r\n                    'pys_source':trafic,\r\n                    'pys_order_type': $(\".wcf-optin-form\").length > 0 ? \"wcf-optin\" : \"normal\",\r\n\r\n                    'last_pys_landing':lastLanding,\r\n                    'last_pys_source':lastTrafic,\r\n                    'last_pys_utm':utmLast,\r\n                    'last_pys_utm_id':utmIdListLast,\r\n                }\r\n\r\n                Object.keys(inputs).forEach(function(key,index) {\r\n                    $form.append(\"<input type='hidden' name='\"+key+\"' value='\"+inputs[key]+\"' /> \");\r\n                });\r\n\r\n\r\n            },\r\n\r\n            /**\r\n             * Advanced From Data\r\n             */\r\n            saveAdvancedFormData: function ( email, phone, firstName, lastName, override = true ) {\r\n\r\n                if ( !options.cookie.disabled_advanced_form_data_cookie ) {\r\n                    let data = Utils.getAdvancedFormData();\r\n                    // Ensure data[\"address\"] is an object\r\n\r\n                    if ( email != null ) {\r\n                        if ( !override ) {\r\n                            if ( typeof data[ \"email\" ] === 'undefined' || !data[ \"email\" ] ) {\r\n                                data[ \"email\" ] = email;\r\n                            }\r\n                        } else {\r\n                            data[ \"email\" ] = email;\r\n                        }\r\n\r\n                        if ( typeof data[ \"emails\" ] === 'object' ) {\r\n                            if ( override ) {\r\n                                data[ \"emails\" ] = [ email, ...Object.values( data[ \"emails\" ] ) ];\r\n                            } else {\r\n                                data[ \"emails\" ] = [ ...Object.values( data[ \"emails\" ] ), email ];\r\n                            }\r\n                        } else {\r\n                            data[ \"emails\" ] = [ email ];\r\n                        }\r\n                        data[ \"emails\" ] = [ ...new Set( data[ \"emails\" ] ) ];\r\n                        data[ \"emails\" ] = data[ \"emails\" ].slice( 0, 3 );\r\n                    }\r\n\r\n                    if ( phone != null ) {\r\n                        if ( !override ) {\r\n                            if ( typeof data[ \"phone\" ] === 'undefined' || !data[ \"phone\" ] ) {\r\n                                data[ \"phone\" ] = phone;\r\n                            }\r\n                        } else {\r\n                            data[ \"phone\" ] = phone;\r\n                        }\r\n\r\n                        if ( typeof data[ \"phones\" ] === 'object' ) {\r\n                            if ( override ) {\r\n                                data[ \"phones\" ] = [ phone, ...Object.values( data[ \"phones\" ] ) ];\r\n                            } else {\r\n                                data[ \"phones\" ] = [ ...Object.values( data[ \"phones\" ] ), phone ];\r\n                            }\r\n                        } else {\r\n                            data[ \"phones\" ] = [ phone ];\r\n                        }\r\n                        data[ \"phones\" ] = [ ...new Set( data[ \"phones\" ] ) ];\r\n                        data[ \"phones\" ] = data[ \"phones\" ].slice( 0, 3 );\r\n                    }\r\n\r\n                    if ( firstName != null ) {\r\n                        if ( !override ) {\r\n                            if ( typeof data[ \"first_name\" ] === 'undefined' || !data[ \"first_name\" ] ) {\r\n                                data[ \"first_name\" ] = firstName;\r\n                            }\r\n                        } else {\r\n                            data[ \"first_name\" ] = firstName;\r\n                        }\r\n\r\n                        if ( typeof data[ \"fns\" ] === 'object' ) {\r\n                            if ( override ) {\r\n                                data[ \"fns\" ] = [ firstName, ...Object.values( data[ \"fns\" ] ) ];\r\n                            } else {\r\n                                data[ \"fns\" ] = [ ...Object.values( data[ \"fns\" ] ), firstName ];\r\n                            }\r\n                        } else {\r\n                            data[ \"fns\" ] = [ firstName ];\r\n                        }\r\n                        data[ \"fns\" ] = [ ...new Set( data[ \"fns\" ] ) ];\r\n                        data[ \"fns\" ] = data[ \"fns\" ].slice( 0, 2 );\r\n                    }\r\n\r\n                    if ( lastName != null ) {\r\n                        if ( !override ) {\r\n                            if ( typeof data[ \"last_name\" ] === 'undefined' || !data[ \"last_name\" ] ) {\r\n                                data[ \"last_name\" ] = lastName;\r\n                            }\r\n                        } else {\r\n                            data[ \"last_name\" ] = lastName;\r\n                        }\r\n\r\n                        if ( typeof data[ \"lns\" ] === 'object' ) {\r\n                            if ( override ) {\r\n                                data[ \"lns\" ] = [ lastName, ...Object.values( data[ \"lns\" ] ) ];\r\n                            } else {\r\n                                data[ \"lns\" ] = [ ...Object.values( data[ \"fns\" ] ), lastName ];\r\n                            }\r\n                        } else {\r\n                            data[ \"lns\" ] = [ lastName ];\r\n                        }\r\n                        data[ \"lns\" ] = [ ...new Set( data[ \"lns\" ] ) ];\r\n                        data[ \"lns\" ] = data[ \"lns\" ].slice( 0, 2 );\r\n                    }\r\n\r\n                    Cookies.set( 'pys_advanced_form_data', JSON.stringify( data ), { expires: 300,path: '/',domain: domain } );\r\n                } else {\r\n                    Cookies.remove( 'pys_advanced_form_data' )\r\n                }\r\n                if(GTM.isEnabled()){\r\n                    GTM.updateEnhancedConversionData();\r\n                }\r\n                if(Analytics.isEnabled()){\r\n                    Analytics.updateEnhancedConversionData();\r\n                } else if ( GAds.isEnabled() ) {\r\n                    GAds.updateEnhancedConversionData();\r\n                }\r\n            },\r\n            getAdvancedMergeFormData: function (allways_provided_data = false) {\r\n                const advanced = Utils.getAdvancedFormData();\r\n                let mergedData = {},\r\n                    limit = options.tracking_analytics.use_multiple_provided_data || allways_provided_data ? 3 : 1,\r\n                    address_limit = options.tracking_analytics.use_multiple_provided_data || allways_provided_data ? 2 : 1;\r\n\r\n                if ( options.tracking_analytics.use_encoding_provided_data || allways_provided_data) {\r\n                    mergedData.sha256_email_address = [];\r\n                    mergedData.sha256_phone_number = [];\r\n                    mergedData.address = [];\r\n                    if ( options.tracking_analytics.hasOwnProperty( \"userData\" ) ) {\r\n                        if ( options.tracking_analytics.userData.hasOwnProperty( \"emails\" ) && Object.keys( options.tracking_analytics.userData.emails ).length > 0 ) {\r\n                            Object.keys( options.tracking_analytics.userData.emails ).forEach( ( key ) => {\r\n                                mergedData.sha256_email_address.push( sha256( options.tracking_analytics.userData.emails[ key ] ) );\r\n                            } )\r\n                        }\r\n                        if ( options.tracking_analytics.userData.hasOwnProperty( \"phones\" ) && Object.keys( options.tracking_analytics.userData.phones ).length > 0 ) {\r\n                            Object.keys( options.tracking_analytics.userData.phones ).forEach( ( key ) => {\r\n                                mergedData.sha256_phone_number.push( sha256( options.tracking_analytics.userData.phones[ key ] ) );\r\n                            } )\r\n                        }\r\n                        if ( options.tracking_analytics.userData.hasOwnProperty( \"addresses\" ) && Object.keys( options.tracking_analytics.userData.addresses ).length > 0 ) {\r\n                            Object.keys( options.tracking_analytics.userData.addresses ).forEach( ( key ) => {\r\n                                let address = Object.assign( {}, options.tracking_analytics.userData.addresses[ key ] );\r\n\r\n                                if ( address.first_name ) {\r\n                                    address.sha256_first_name = address.first_name !== '' ? sha256( address.first_name ) : '';\r\n                                    delete address.first_name;\r\n                                }\r\n                                if ( address.last_name ) {\r\n                                    address.sha256_last_name = address.last_name !== '' ? sha256( address.last_name ) : '';\r\n                                    delete address.last_name;\r\n                                }\r\n                                mergedData.address.push( address );\r\n                            } )\r\n                        }\r\n                    }\r\n\r\n                    let data_persistency = options.data_persistency;\r\n\r\n                    //emails\r\n                    if ( advanced.emails && Object.keys( advanced.emails ).length > 0 ) {\r\n                        Object.keys( advanced.emails ).forEach( ( key ) => {\r\n                            if ( data_persistency === 'recent_data' ) {\r\n                                mergedData.sha256_email_address.push( sha256( advanced.emails[ key ] ) );\r\n                            } else {\r\n                                mergedData.sha256_email_address.unshift( sha256( advanced.emails[ key ] ) );\r\n                            }\r\n                        } )\r\n                    }\r\n                    if ( advanced.email && advanced.email !== '' ) {\r\n                        if ( data_persistency === 'recent_data' ) {\r\n                            mergedData.sha256_email_address.push( sha256( advanced.email ) );\r\n                        } else {\r\n                            mergedData.sha256_email_address.unshift( sha256( advanced.email ) );\r\n                        }\r\n                    }\r\n                    mergedData.sha256_email_address = [ ...new Set( mergedData.sha256_email_address ) ];\r\n                    mergedData.sha256_email_address = mergedData.sha256_email_address.slice( 0, limit );\r\n\r\n                    //phones\r\n                    if ( advanced.phones && Object.keys( advanced.phones ).length > 0 ) {\r\n                        Object.keys( advanced.phones ).forEach( ( key ) => {\r\n                            if ( data_persistency === 'recent_data' ) {\r\n                                mergedData.sha256_phone_number.push( sha256( advanced.phones[ key ] ) );\r\n                            } else {\r\n                                mergedData.sha256_phone_number.unshift( sha256( advanced.phones[ key ] ) );\r\n                            }\r\n                        } )\r\n                    }\r\n                    if ( advanced.phone && advanced.phone !== '' ) {\r\n                        if ( data_persistency === 'recent_data' ) {\r\n                            mergedData.sha256_phone_number.push( sha256( advanced.phone ) );\r\n                        } else {\r\n                            mergedData.sha256_phone_number.unshift( sha256( advanced.phone ) );\r\n                        }\r\n                    }\r\n                    mergedData.sha256_phone_number = [ ...new Set( mergedData.sha256_phone_number ) ];\r\n                    mergedData.sha256_phone_number = mergedData.sha256_phone_number.slice( 0, limit );\r\n\r\n                    //first and last names\r\n                    if ( advanced.fns && Object.keys( advanced.fns ).length > 0 ) {\r\n                        Object.entries( advanced.fns ).forEach( ( item ) => {\r\n                            if ( mergedData.address.length < address_limit ) {\r\n                                let first_name = item[ 1 ];\r\n                                let last_name = ( advanced.lns && Object.keys( advanced.lns ).length > 0 ) ? ( advanced.lns[ item[ 0 ] ] ? advanced.lns[ item[ 0 ] ] : advanced.lns[ 0 ] ) : '';\r\n                                let address = {\r\n                                    sha256_first_name: first_name !== '' ? sha256( first_name ) : '',\r\n                                    sha256_last_name: last_name !== '' ? sha256( last_name ) : '',\r\n                                    // Add other address properties here if they exist in advanced\r\n                                };\r\n                                mergedData.address.push( address );\r\n                            }\r\n                        } )\r\n                    }\r\n\r\n                    if ( advanced.first_name || advanced.last_name ) {\r\n                        if ( mergedData.address.length < address_limit ) {\r\n                            let address = {\r\n                                sha256_first_name: advanced.first_name !== '' ? sha256( advanced.first_name ) : '',\r\n                                sha256_last_name: advanced.last_name !== '' ? sha256( advanced.last_name ) : '',\r\n                                // Add other address properties here if they exist in advanced\r\n                            };\r\n                            mergedData.address.push( address );\r\n                        }\r\n                    }\r\n                } else {\r\n                    mergedData.email = [];\r\n                    mergedData.phone_number = [];\r\n                    mergedData.address = [];\r\n                    if ( options.tracking_analytics.hasOwnProperty( \"userData\" ) ) {\r\n                        if ( options.tracking_analytics.userData.hasOwnProperty( \"emails\" ) && Object.keys( options.tracking_analytics.userData.emails ).length > 0 ) {\r\n                            Object.keys( options.tracking_analytics.userData.emails ).forEach( ( key ) => {\r\n                                mergedData.email.push( options.tracking_analytics.userData.emails[ key ] );\r\n                            } )\r\n                        }\r\n                        if ( options.tracking_analytics.userData.hasOwnProperty( \"phones\" ) && Object.keys( options.tracking_analytics.userData.phones ).length > 0 ) {\r\n                            Object.keys( options.tracking_analytics.userData.phones ).forEach( ( key ) => {\r\n                                mergedData.phone_number.push( options.tracking_analytics.userData.phones[ key ] );\r\n                            } )\r\n                        }\r\n                        if ( options.tracking_analytics.userData.hasOwnProperty( \"addresses\" ) && Object.keys( options.tracking_analytics.userData.addresses ).length > 0 ) {\r\n                            Object.keys( options.tracking_analytics.userData.addresses ).forEach( ( key ) => {\r\n                                mergedData.address.push( options.tracking_analytics.userData.addresses[ key ] );\r\n                            } )\r\n                        }\r\n                    }\r\n\r\n                    let data_persistency = options.data_persistency;\r\n\r\n                    //emails\r\n                    if ( advanced.emails && Object.keys( advanced.emails ).length > 0 ) {\r\n                        Object.keys( advanced.emails ).forEach( ( key ) => {\r\n                            if ( data_persistency === 'recent_data' ) {\r\n                                mergedData.email.push( advanced.emails[ key ] );\r\n                            } else {\r\n                                mergedData.email.unshift( advanced.emails[ key ] );\r\n                            }\r\n                        } )\r\n                    }\r\n                    if ( advanced.email && advanced.email !== '' ) {\r\n                        if ( data_persistency === 'recent_data' ) {\r\n                            mergedData.email.push( advanced.email );\r\n                        } else {\r\n                            mergedData.email.unshift( advanced.email );\r\n                        }\r\n                    }\r\n                    mergedData.email = [ ...new Set( mergedData.email ) ];\r\n                    mergedData.email = mergedData.email.slice( 0, limit );\r\n\r\n                    //phones\r\n                    if ( advanced.phones && Object.keys( advanced.phones ).length > 0 ) {\r\n                        Object.keys( advanced.phones ).forEach( ( key ) => {\r\n                            if ( data_persistency === 'recent_data' ) {\r\n                                mergedData.phone_number.push( advanced.phones[ key ] );\r\n                            } else {\r\n                                mergedData.phone_number.unshift( advanced.phones[ key ] );\r\n                            }\r\n                        } )\r\n                    }\r\n                    if ( advanced.phone && advanced.phone !== '' ) {\r\n                        if ( data_persistency === 'recent_data' ) {\r\n                            mergedData.phone_number.push( advanced.phone );\r\n                        } else {\r\n                            mergedData.phone_number.unshift( advanced.phone );\r\n                        }\r\n                    }\r\n                    mergedData.phone_number = [ ...new Set( mergedData.phone_number ) ];\r\n                    mergedData.phone_number = mergedData.phone_number.slice( 0, limit );\r\n\r\n                    //first and last names\r\n                    if ( advanced.fns && Object.keys( advanced.fns ).length > 0 ) {\r\n                        Object.entries( advanced.fns ).forEach( ( item ) => {\r\n                            if ( mergedData.address.length < address_limit ) {\r\n                                let first_name = item[ 1 ];\r\n                                let last_name = ( advanced.lns && Object.keys( advanced.lns ).length > 0 ) ? ( advanced.lns[ item[ 0 ] ] ? advanced.lns[ item[ 0 ] ] : advanced.lns[ 0 ] ) : '';\r\n                                let address = {\r\n                                    first_name: first_name || '',\r\n                                    last_name: last_name || '',\r\n                                    // Add other address properties here if they exist in advanced\r\n                                };\r\n                                mergedData.address.push( address );\r\n                            }\r\n                        } )\r\n                    }\r\n\r\n                    if ( advanced.first_name || advanced.last_name ) {\r\n                        if ( mergedData.address.length < address_limit ) {\r\n                            let address = {\r\n                                first_name: advanced.first_name || '',\r\n                                last_name: advanced.last_name || '',\r\n                                // Add other address properties here if they exist in advanced\r\n                            };\r\n                            mergedData.address.push( address );\r\n                        }\r\n                    }\r\n                }\r\n\r\n                Utils.removeEmptyProperties( mergedData );\r\n                return mergedData;\r\n            },\r\n            removeEmptyProperties : function(obj) {\r\n\r\n                if (obj.hasOwnProperty('address')) {\r\n                    // ÐŸÑ€Ð¾Ñ…Ð¾Ð´Ð¸Ð¼ Ð¿Ð¾ ÐºÐ°Ð¶Ð´Ð¾Ð¼Ñƒ Ð¼Ð°ÑÑÐ¸Ð²Ñƒ Ð² 'address'\r\n                    for (let i = 0; i < obj['address'].length; i++) {\r\n                        let address1 = obj['address'][i];\r\n\r\n                        // Ð¡Ñ€Ð°Ð²Ð½Ð¸Ð²Ð°ÐµÐ¼ Ñ ÐºÐ°Ð¶Ð´Ñ‹Ð¼ Ð´Ñ€ÑƒÐ³Ð¸Ð¼ Ð¼Ð°ÑÑÐ¸Ð²Ð¾Ð¼ Ð² 'address'\r\n                        for (let j = i + 1; j < obj['address'].length; j++) {\r\n                            let address2 = obj['address'][j];\r\n\r\n                            // Ð•ÑÐ»Ð¸ Ð½Ð°Ñ…Ð¾Ð´Ð¸Ð¼ Ð´ÑƒÐ±Ð»Ð¸Ñ€ÑƒÑŽÑ‰Ð¸ÐµÑÑ ÑÐ²Ð¾Ð¹ÑÑ‚Ð²Ð°, ÑƒÐ´Ð°Ð»ÑÐµÐ¼ Ð¸Ñ… Ð¸Ð· address2\r\n                            for (let prop in address1) {\r\n                                if (address1[prop] === address2[prop]) {\r\n                                    delete address2[prop];\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n                for (let key in obj) {\r\n                    if (obj[key] === null || obj[key] === undefined || obj[key] === '') {\r\n                        delete obj[key];\r\n                    } else if (Array.isArray(obj[key])) {\r\n                        obj[key] = [...new Set(obj[key])]; // Ð£Ð´Ð°Ð»ÐµÐ½Ð¸Ðµ Ð´ÑƒÐ±Ð»Ð¸ÐºÐ°Ñ‚Ð¾Ð² Ð¸Ð· Ð¼Ð°ÑÑÐ¸Ð²Ð°\r\n                        obj[key] = obj[key].filter(item => item !== null && item !== undefined && item !== '');\r\n                        // ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ð¾Ð±ÑŠÐµÐºÑ‚Ð¾Ð² Ð²Ð½ÑƒÑ‚Ñ€Ð¸ Ð¼Ð°ÑÑÐ¸Ð²Ð¾Ð²\r\n                        obj[key] = obj[key].map(item => {\r\n                            if (item === null) {\r\n                                return; // ÐŸÑ€Ð¾Ð¿ÑƒÑÐºÐ°ÐµÐ¼ null ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹\r\n                            } else if (Array.isArray(item)) {\r\n                                return this.removeEmptyProperties(item);\r\n                            } else if (typeof item === 'object') {\r\n                                let cleanedItem = this.removeEmptyProperties(item);\r\n                                if (Object.keys(cleanedItem).length > 0) {\r\n                                    return cleanedItem;\r\n                                }\r\n                            } else {\r\n                                return item;\r\n                            }\r\n                        });\r\n                        // Ð£Ð´Ð°Ð»ÑÐµÐ¼ Ð¿ÑƒÑÑ‚Ñ‹Ðµ Ð¾Ð±ÑŠÐµÐºÑ‚Ñ‹ Ð¸ null Ð¸Ð· Ð¼Ð°ÑÑÐ¸Ð²Ð°\r\n                        obj[key] = obj[key].filter(item => item !== undefined && !(typeof item === 'object' && Object.keys(item).length === 0));\r\n                        if (obj[key].length === 0) {\r\n                            delete obj[key];\r\n                        }\r\n                    } else if (typeof obj[key] === 'object') {\r\n                        this.removeEmptyProperties(obj[key]);\r\n                        if (Object.keys(obj[key]).length === 0) {\r\n                            delete obj[key];\r\n                        }\r\n                    }\r\n                }\r\n                return obj;\r\n            },\r\n            getAdvancedFormData: function () {\r\n                let dataStr = Cookies.get(\"pys_advanced_form_data\");\r\n                if(dataStr === undefined) {\r\n                    return {'first_name':\"\",'last_name':\"\",'email':\"\",'phone':\"\",'fns':[],'lns':[],'emails':[],'phones':[]};\r\n                } else {\r\n                    return JSON.parse(dataStr);\r\n                }\r\n            },\r\n\r\n            getFormFilledData: function ( event ) {\r\n                if ( Object.keys(options.track_dynamic_fields).length > 0 && Object.keys(event.params).length > 0 ) {\r\n                    Object.entries(event.params).forEach((item) => {\r\n\r\n                        if ( options.track_dynamic_fields.hasOwnProperty(item[0]) ) {\r\n                            let fieldData = Cookies.get('pys_dyn_field_' + item[1] );\r\n\r\n                            if(fieldData !== undefined && fieldData !== '') {\r\n                                event.params[item[0]] = fieldData;\r\n                            } else {\r\n                                delete event.params[item[0]];\r\n                            }\r\n                        }\r\n                    })\r\n                }\r\n                return event;\r\n            }\r\n\r\n        };\r\n\r\n    }(options);\r\n\r\n    var TikTok = function (options) {\r\n\r\n        var initialized = false;\r\n\r\n        function fireEvent(name, event) {\r\n\r\n            if(typeof window.pys_event_data_filter === \"function\" && window.pys_disable_event_filter(name,'tiktok')) {\r\n                return;\r\n            }\r\n\r\n            var data = event.params;\r\n\r\n            var ids = event.pixelIds.filter(function (pixelId) {\r\n                return !Utils.hideMatchingPixel(pixelId, 'tiktok');\r\n            })\r\n            var params = {};\r\n            Utils.copyProperties(data, params);\r\n\r\n            params.eventID = Utils.generateUniqueId(event);\r\n\r\n            if(ids.length > 0){\r\n                TikTok.fireEventAPI(name, event, params);\r\n            }\r\n            ids.forEach(function(pixelId){\r\n                if (options.debug) {\r\n                    console.log('[TikTok] ' + name, params,\"pixel_id\",pixelId);\r\n                }\r\n\r\n                ttq.instance(pixelId).track(name,params)\r\n\r\n            });\r\n\r\n            var customEvent = new CustomEvent('tiktok_event_sent', {\r\n                detail: {\r\n                    eventName: name,\r\n                    params: params,\r\n                    pixel_ids: ids\r\n                }\r\n            });\r\n            window.dispatchEvent(customEvent);\r\n        }\r\n\r\n        return {\r\n            tag: function() {\r\n                return \"tiktok\";\r\n            },\r\n            isEnabled: function () {\r\n                return options.hasOwnProperty('tiktok');\r\n            },\r\n            getHidePixel: function(){\r\n                if(this.isEnabled() && options.tiktok.hasOwnProperty('hide_pixels'))\r\n                {\r\n                    return options.tiktok.hide_pixels;\r\n                }\r\n                return [];\r\n            },\r\n            disable: function () {\r\n                initialized = false;\r\n            },\r\n\r\n            loadPixel:function () {\r\n                if (initialized || !this.isEnabled() || !Utils.consentGiven('tiktok')) {\r\n                    return;\r\n                }\r\n                for (var i = 0; i < options.tiktok.pixelIds.length; i++) {\r\n                    var trackingId = options.tiktok.pixelIds[i];\r\n                    if (!Utils.hideMatchingPixel(trackingId, 'tiktok')) {\r\n                        !function (w, d, t) {\r\n                            w.TiktokAnalyticsObject=t;\r\n                            var ttq=w[t]=w[t]||[];\r\n                            ttq.methods=[\"page\",\"track\",\"identify\",\"instances\",\"debug\",\"on\",\"off\",\"once\",\"ready\",\"alias\",\"group\",\"enableCookie\",\"disableCookie\"];\r\n                            ttq.setAndDefer=function(t,e){t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}};\r\n                            for(var i=0;i<ttq.methods.length;i++)\r\n                                ttq.setAndDefer(ttq,ttq.methods[i]);\r\n                            ttq.instance=function(t){for(var e=ttq._i[t]||[],n=0;n<ttq.methods.length;n++)ttq.setAndDefer(e,ttq.methods[n]);return e};\r\n                            ttq.load=function(e,n){var i=\"https://analytics.tiktok.com/i18n/pixel/events.js\";ttq._i=ttq._i||{},ttq._i[e]=[],ttq._i[e]._u=i,ttq._t=ttq._t||{},ttq._t[e]=+new Date,ttq._o=ttq._o||{},ttq._o[e]=n||{};var o=document.createElement(\"script\");o.type=\"text/javascript\",o.async=!0,o.src=i+\"?sdkid=\"+e+\"&lib=\"+t;var a=document.getElementsByTagName(\"script\")[0];a.parentNode.insertBefore(o,a)};\r\n\r\n                            //ttq.load('C60QSCQRVDG9JAKNPK2G');\r\n                            //ttq.page();\r\n                        }(window, document, 'ttq');\r\n                        break;\r\n                    }\r\n                }\r\n\r\n\r\n                var ids = options.tiktok.pixelIds.filter(function (pixelId) {\r\n                    return !Utils.hideMatchingPixel(pixelId, 'tiktok');\r\n                })\r\n                ids.forEach(function (pixelId) {\r\n\r\n                    ttq.load(pixelId);\r\n                    ttq.page();\r\n                    let advancedMatching = {};\r\n                    if(options.tiktok.hasOwnProperty('advanced_matching')\r\n                        && Object.keys(options.tiktok.advanced_matching).length > 0) {\r\n                        advancedMatching = options.tiktok.advanced_matching;\r\n                        if(!advancedMatching.hasOwnProperty(\"external_id\")){\r\n                            if (Cookies.get('pbid')) {\r\n                                advancedMatching[\"external_id\"] = Cookies.get('pbid');\r\n                            }\r\n                        }\r\n                        else if(advancedMatching.hasOwnProperty(\"external_id\") && advancedMatching.external_id != Cookies.get('pbid'))\r\n                        {\r\n                            advancedMatching[\"external_id\"] = Cookies.get('pbid') ? Cookies.get('pbid') : advancedMatching.external_id;\r\n                        }\r\n\r\n                        ttq.instance(pixelId).identify(advancedMatching)\r\n                    }\r\n                });\r\n                initialized = true;\r\n\r\n                if (options.staticEvents.hasOwnProperty('tiktok')) {\r\n                    var timeout = 1;\r\n                    setTimeout(function (timeout) {\r\n                        Utils.fireStaticEvents('tiktok', timeout);\r\n                    }, 1500, timeout)\r\n                }\r\n            },\r\n\r\n            fireEvent: function (name, data) {\r\n                if (!initialized || !this.isEnabled()) {\r\n                    return false;\r\n                }\r\n                data.delay = data.delay || 0;\r\n\r\n                if (data.delay === 0) {\r\n                    fireEvent(name, data);\r\n                } else {\r\n                    setTimeout(function (name, params) {\r\n                        fireEvent(name, params);\r\n                    }, data.delay * 1000, name, data);\r\n                }\r\n                return true;\r\n            },\r\n\r\n            fireEventAPI: function (name, event, params) {\r\n\r\n                var ids = event.pixelIds.filter(function (pixelId) {\r\n                    return !Utils.hideMatchingPixel(pixelId, 'tiktok');\r\n                })\r\n                var notCachedEventsIds = new Array();\r\n                var isAddToCartFromJs =  options.woo.hasOwnProperty(\"addToCartCatchMethod\")\r\n                    && options.woo.addToCartCatchMethod === \"add_cart_js\";\r\n                if(!isAddToCartFromJs) {\r\n                    notCachedEventsIds.push('woo_add_to_cart_on_button_click')\r\n                }\r\n\r\n                if(options.tiktok.serverApiEnabled) {\r\n                    if(!notCachedEventsIds.includes(event.e_id)) {\r\n\r\n                        var isApiDisabled = options.gdpr.all_disabled_by_api ||\r\n                            options.gdpr.tiktok_disabled_by_api ||\r\n                            options.gdpr.cookiebot_integration_enabled ||\r\n                            options.gdpr.cookie_notice_integration_enabled ||\r\n                            options.gdpr.consent_magic_integration_enabled ||\r\n                            options.gdpr.cookie_law_info_integration_enabled;\r\n                        // Update eventID\r\n\r\n                        // send event from server if they were block by gdpr or need send with delay\r\n                        if( options.ajaxForServerEvent || isApiDisabled || event.delay > 0 || event.type !== \"static\" ){\r\n\r\n                            var json = {\r\n                                action: 'pys_tiktok_api_event',\r\n                                pixel: TikTok.tag(),\r\n                                event: name,\r\n                                ids: ids,\r\n                                data:params,\r\n                                url:window.location.href,\r\n                                event_id:params.eventID,\r\n                                ajax_event:options.ajax_event\r\n                            };\r\n\r\n                            let delay = 0;\r\n                            try {\r\n                                if (sessionStorage) {\r\n                                    Object.keys(sessionStorage)\r\n                                        .filter(key => key.startsWith('wc_fragments_'))\r\n                                        .forEach((key) => {\r\n                                            let value = sessionStorage.getItem(key);\r\n                                            if (event.e_id === 'woo_add_to_cart_on_button_click') {\r\n                                                delay = 2000;\r\n                                            }\r\n                                        });\r\n                                }\r\n                            } catch (error) {\r\n                                console.error('sessionStorage is not accessible:', error);\r\n                            }\r\n\r\n\r\n                            if(event.hasOwnProperty('woo_order')) {\r\n                                json['woo_order'] = event.woo_order;\r\n                            }\r\n\r\n                            if(event.hasOwnProperty('edd_order')) {\r\n                                json['edd_order'] = event.edd_order;\r\n                            }\r\n                            if(event.e_id === \"automatic_event_internal_link\"\r\n                                || event.e_id === \"automatic_event_outbound_link\"\r\n                                || name == 'PageView'\r\n                            ) {\r\n                                setTimeout(function(){\r\n                                    delay = delay === 0 ? 500 : delay;\r\n                                    Utils.sendServerAjaxRequest(options.ajaxUrl, json)\r\n                                },delay)\r\n                            } else {\r\n                                setTimeout( () => Utils.sendServerAjaxRequest( options.ajaxUrl, json ), delay );\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n\r\n            onClickEvent: function (event) {\r\n                this.fireEvent(event.name, event);\r\n            },\r\n\r\n            onWooAddToCartOnSingleEvent: function (product_id, qty, product_type, is_external, $form) {\r\n\r\n                window.pysWooProductData = window.pysWooProductData || [];\r\n                if (!options.dynamicEvents.woo_add_to_cart_on_button_click.hasOwnProperty(this.tag()))\r\n                    return;\r\n\r\n                if (window.pysWooProductData.hasOwnProperty(product_id)) {\r\n                    if (window.pysWooProductData[product_id].hasOwnProperty(this.tag())) {\r\n\r\n                        var event = Utils.clone(options.dynamicEvents.woo_add_to_cart_on_button_click[this.tag()]);\r\n\r\n                        Utils.copyProperties(window.pysWooProductData[product_id][this.tag()]['params'], event.params);\r\n\r\n                        // maybe customize value option\r\n                        if (options.woo.addToCartOnButtonValueEnabled && options.woo.addToCartOnButtonValueOption !== 'global') {\r\n\r\n                            if (product_type === Utils.PRODUCT_BUNDLE) {\r\n                                var data = $(\".bundle_form .bundle_data\").data(\"bundle_form_data\");\r\n                                var items_sum = getBundlePriceOnSingleProduct(data);\r\n                                event.params.value = (parseFloat(data.base_price) + items_sum) * qty;\r\n                            } else {\r\n                                event.params.value = event.params.value * qty;\r\n                            }\r\n                        }\r\n\r\n                        event.params.quantity = qty;\r\n\r\n                        this.fireEvent(event.name, event);\r\n\r\n                    }\r\n                }\r\n            },\r\n\r\n            onWooAddToCartOnButtonEvent: function (product_id) {\r\n                if(!options.dynamicEvents.woo_add_to_cart_on_button_click.hasOwnProperty(this.tag()))\r\n                    return;\r\n\r\n                if (window.pysWooProductData.hasOwnProperty(product_id)) {\r\n                    if (window.pysWooProductData[product_id].hasOwnProperty(this.tag())) {\r\n                        var productData = window.pysWooProductData[product_id][this.tag()]\r\n                        var event = Utils.clone(options.dynamicEvents.woo_add_to_cart_on_button_click[this.tag()])\r\n\r\n                        Utils.copyProperties(productData['params'], event.params)\r\n                        event.pixelIds = productData['pixelIds'];\r\n                        this.fireEvent(event.name, event);\r\n                    }\r\n                }\r\n            },\r\n\r\n            onEddAddToCartOnButtonEvent : function (download_id, price_index, qty) {\r\n                if(!options.dynamicEvents.edd_add_to_cart_on_button_click.hasOwnProperty(this.tag()))\r\n                    return;\r\n                var event = Utils.clone(options.dynamicEvents.edd_add_to_cart_on_button_click[this.tag()]);\r\n\r\n\r\n                if (window.pysEddProductData.hasOwnProperty(download_id)) {\r\n\r\n                    var index;\r\n\r\n                    if (price_index) {\r\n                        index = download_id + '_' + price_index;\r\n                    } else {\r\n                        index = download_id;\r\n                    }\r\n\r\n                    if (window.pysEddProductData[download_id].hasOwnProperty(index)) {\r\n                        if (window.pysEddProductData[download_id][index].hasOwnProperty(this.tag())) {\r\n\r\n                            Utils.copyProperties(window.pysEddProductData[download_id][index][this.tag()].params, event.params);\r\n                            this.fireEvent(event.name,event);\r\n\r\n                        }\r\n                    }\r\n\r\n                }\r\n            },\r\n\r\n            onPageScroll: function (event) {\r\n                if (initialized && this.isEnabled()) {\r\n                    this.fireEvent(event.name, event);\r\n                }\r\n            },\r\n\r\n            onWatchVideo: function (event) {\r\n                if (initialized && this.isEnabled() && !event.fired) {\r\n                    this.fireEvent(event.name, event);\r\n                }\r\n            },\r\n\r\n            onCommentEvent: function (event) {\r\n                if (initialized && this.isEnabled()) {\r\n                    this.fireEvent(event.name, event);\r\n                }\r\n            },\r\n\r\n            onAdSenseEvent: function (event) {\r\n                if (initialized && this.isEnabled()) {\r\n                    this.fireEvent(event.name, event);\r\n                }\r\n            },\r\n\r\n            onTime: function (event) {\r\n                if (initialized && this.isEnabled()) {\r\n                    this.fireEvent(event.name, event);\r\n                }\r\n            },\r\n        }\r\n    }(options);\r\n\r\n    var Facebook = function (options) {\r\n\r\n        var defaultEventTypes = [\r\n            'PageView',\r\n            'ViewContent',\r\n            'Search',\r\n            'AddToCart',\r\n            'AddToWishlist',\r\n            'InitiateCheckout',\r\n            'AddPaymentInfo',\r\n            'Purchase',\r\n            'Lead',\r\n\r\n            'Subscribe',\r\n            'CustomizeProduct',\r\n            'FindLocation',\r\n            'StartTrial',\r\n            'SubmitApplication',\r\n            'Schedule',\r\n            'Contact',\r\n            'Donate'\r\n        ];\r\n\r\n        var notCachedEventsIds = new Array();\r\n        var isAddToCartFromJs =  options.woo.hasOwnProperty(\"addToCartCatchMethod\")\r\n            && options.woo.addToCartCatchMethod === \"add_cart_js\";\r\n        if(!isAddToCartFromJs) {\r\n            notCachedEventsIds.push('woo_add_to_cart_on_button_click')\r\n        }\r\n\r\n        var initialized = false;\r\n\r\n        var genereateFbp = function (){\r\n            return !Cookies.get('_fbp') ? 'fb.1.'+Date.now()+'.'+Math.floor(1000000000 + Math.random() * 9000000000) : Cookies.get('_fbp');\r\n        };\r\n        var genereateFbc = function (){\r\n            return getUrlParameter('fbclid') ? 'fb.1.'+Date.now()+'.'+getUrlParameter('fbclid') : ''\r\n        };\r\n\r\n        var configuredPixels = new Array();\r\n        function fireEvent(name, event) {\r\n\r\n\r\n            if(typeof window.pys_event_data_filter === \"function\" && window.pys_disable_event_filter(name,'facebook')) {\r\n                return;\r\n            }\r\n\r\n            var data = event.params;\r\n            var ids = event.pixelIds.filter(function (pixelId) {\r\n                return !Utils.hideMatchingPixel(pixelId, 'facebook');\r\n            });\r\n\r\n            var actionType = defaultEventTypes.includes(name) ? 'trackSingle' : 'trackSingleCustom';\r\n\r\n            var params = {};\r\n\r\n            Utils.copyProperties(data, params);\r\n            Utils.copyProperties(Utils.getRequestParams(), params);\r\n            Utils.copyProperties(Utils.getRequestParams(), data);\r\n\r\n            params = Facebook.filterParams(params);\r\n\r\n\r\n            if(options.facebook.serverApiEnabled) {\r\n                if(event.e_id === \"woo_remove_from_cart\" ) {\r\n                    Facebook.updateEventId(event.name);\r\n                    event.eventID = Facebook.getEventId(event.name);\r\n                } else if(!notCachedEventsIds.includes(event.e_id)) {\r\n                    var isApiDisabled = options.gdpr.all_disabled_by_api ||\r\n                        options.gdpr.facebook_disabled_by_api ||\r\n                        options.gdpr.cookiebot_integration_enabled ||\r\n                        options.gdpr.cookie_notice_integration_enabled ||\r\n                        options.gdpr.consent_magic_integration_enabled ||\r\n                        options.gdpr.cookie_law_info_integration_enabled;\r\n                    // Update eventID\r\n\r\n                    event.eventID = Utils.generateUniqueId(event);\r\n\r\n                    if(Cookies.get('_fbp')){\r\n                        params._fbp = Cookies.get('_fbp');\r\n                    }\r\n                    if(Cookies.get('_fbc')){\r\n                        params._fbc = Cookies.get('_fbc');\r\n                    }\r\n                    // send event from server if they was bloc by gdpr or need send with delay\r\n                    if( options.ajaxForServerEvent || isApiDisabled ){\r\n\r\n                        var json = {\r\n                            action: 'pys_api_event',\r\n                            pixel: 'facebook',\r\n                            event: name,\r\n                            ids: ids,\r\n                            data:params,\r\n                            url:window.location.href,\r\n                            eventID:event.eventID,\r\n                            ajax_event:options.ajax_event\r\n                        };\r\n\r\n                        if(event.hasOwnProperty('woo_order')) {\r\n                            json['woo_order'] = event.woo_order;\r\n                        }\r\n\r\n                        if(event.hasOwnProperty('edd_order')) {\r\n                            json['edd_order'] = event.edd_order;\r\n                        }\r\n\r\n                        let delay = 0;\r\n                        try {\r\n                            if (sessionStorage) {\r\n                                Object.keys(sessionStorage)\r\n                                    .filter(key => key.startsWith('wc_fragments_'))\r\n                                    .forEach((key) => {\r\n                                        let value = sessionStorage.getItem(key);\r\n                                        if (event.e_id === 'woo_add_to_cart_on_button_click') {\r\n                                            delay = 2000;\r\n                                        }\r\n                                    });\r\n                            }\r\n                        } catch (error) {\r\n                            console.error('sessionStorage is not accessible:', error);\r\n                        }\r\n\r\n                        if (event.e_id === \"automatic_event_internal_link\" || event.e_id === \"automatic_event_outbound_link\") {\r\n                            delay = delay === 0 ? 500 : delay;\r\n                            setTimeout(() => Utils.sendServerAjaxRequest(options.ajaxUrl, json), delay);\r\n                        } else if (event.type != 'static') {\r\n                            setTimeout(() => Utils.sendServerAjaxRequest(options.ajaxUrl, json), delay);\r\n                        }\r\n\r\n                        if ( ( event.type == 'static' && options.ajaxForServerStaticEvent ) || ( event.hasOwnProperty( 'ajaxFire' ) && event.ajaxFire ) ) {\r\n                            setTimeout( () => Utils.sendServerAjaxRequest( options.ajaxUrl, json ), delay );\r\n                        }\r\n                    }\r\n\r\n                    if( event.e_id !== \"automatic_event_signup\" && name == \"CompleteRegistration\" && options.facebook.wooCRSendFromServer ) {\r\n                        return;\r\n                    }\r\n                }\r\n\r\n            }\r\n            delete params._fbp;\r\n            delete params._fbc;\r\n            if (options.debug) {\r\n                console.log('[Facebook] ' + name, params,\"pixel_ids\",ids,\"eventID\",event.eventID);\r\n            }\r\n            // fire event for each pixel id\r\n            ids.forEach(function (pixelId) {\r\n                // add eventID for deduplicate events @see https://developers.facebook.com/docs/marketing-api/conversions-api/deduplicate-pixel-and-server-events/\r\n                var args = {};\r\n                if(options.facebook.serverApiEnabled && event.hasOwnProperty('eventID')) {\r\n                    args.eventID = event.eventID;\r\n                }\r\n                Facebook.maybeInitPixel(pixelId);\r\n                fbq(actionType,pixelId, name, params,args);\r\n            });\r\n            var customEvent = new CustomEvent('facebook_event_sent', {\r\n                detail: {\r\n                    eventName: name,\r\n                    params: params,\r\n                    pixel_ids: ids\r\n                }\r\n            });\r\n            window.dispatchEvent(customEvent);\r\n        }\r\n\r\n        /**\r\n         * Public API\r\n         */\r\n        return {\r\n            tag: function() {\r\n                return \"facebook\";\r\n            },\r\n            isEnabled: function () {\r\n                return options.hasOwnProperty('facebook');\r\n            },\r\n            getHidePixel: function(){\r\n                if(this.isEnabled() && options.facebook.hasOwnProperty('hide_pixels'))\r\n                {\r\n                    return options.facebook.hide_pixels;\r\n                }\r\n                return [];\r\n            },\r\n            initEventIdCookies: function (key) {\r\n                var ids = {};\r\n                ids[key] = pys_generate_token(36)\r\n                Cookies.set('pys_fb_event_id', JSON.stringify(ids), {path: '/',domain: domain});\r\n            },\r\n\r\n            updateEventId:function(key) {\r\n                var cooData = Cookies.get(\"pys_fb_event_id\")\r\n                if(cooData === undefined) {\r\n                    this.initEventIdCookies(key);\r\n                } else {\r\n                    var data = JSON.parse(cooData);\r\n                    data[key] = pys_generate_token(36);\r\n                    Cookies.set('pys_fb_event_id', JSON.stringify(data), {path: '/',domain: domain} );\r\n                }\r\n            },\r\n\r\n            getEventId:function (key) {\r\n                var data = Cookies.get(\"pys_fb_event_id\");\r\n                if(data === undefined) {\r\n                    this.initEventIdCookies(key);\r\n                    data = Cookies.get(\"pys_fb_event_id\");\r\n                }\r\n                return JSON.parse(data)[key];\r\n            },\r\n\r\n            disable: function () {\r\n                initialized = false;\r\n            },\r\n\r\n            filterParams: function (params) {\r\n                var filteredParams = {};\r\n\r\n                if (options.facebook.hasOwnProperty('enabled_medical') && options.facebook.enabled_medical && options.facebook.hasOwnProperty('do_not_track_medical_param')) {\r\n                    // Remove empty strings from the array\r\n                    options.facebook.do_not_track_medical_param = options.facebook.do_not_track_medical_param.filter(Boolean);\r\n                    for (const key in params) {\r\n                        if (Array.isArray(options.facebook.do_not_track_medical_param)) {\r\n                            if (!options.facebook.do_not_track_medical_param.includes(key)) {\r\n                                filteredParams[key] = params[key];\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    Utils.copyProperties(params, filteredParams);\r\n                }\r\n                return filteredParams;\r\n            },\r\n\r\n            /**\r\n             * Load pixel's JS\r\n             */\r\n            loadPixel: function () {\r\n                if (initialized || !this.isEnabled() || !Utils.consentGiven('facebook')) {\r\n                    return;\r\n                }\r\n\r\n                ! function (f, b, e, v, n, t, s) {\r\n                    if (f.fbq) return;\r\n                    n = f.fbq = function () {\r\n                        n.callMethod ?\r\n                            n.callMethod.apply(n, arguments) : n.queue.push(arguments)\r\n                    };\r\n                    if (!f._fbq) f._fbq = n;\r\n                    n.push = n;\r\n                    n.loaded = !0;\r\n                    n.version = '2.0';\r\n                    n.agent = 'dvpixelyoursite';\r\n                    n.queue = [];\r\n                    t = b.createElement(e);\r\n                    t.async = !0;\r\n                    t.src = v;\r\n                    s = b.getElementsByTagName(e)[0];\r\n                    s.parentNode.insertBefore(t, s)\r\n                }(window,\r\n                    document, 'script', 'https://connect.facebook.net/en_US/fbevents.js');\r\n                let expires = parseInt(options.cookie_duration);\r\n                if(!Cookies.get('_fbp')) {\r\n                    Cookies.set('_fbp',genereateFbp(),  { expires: expires,path: '/',domain: domain });\r\n                }\r\n\r\n                if(getUrlParameter('fbclid')) {\r\n                    Cookies.set('_fbc',genereateFbc(),  { expires: expires,path: '/',domain: domain });\r\n                }\r\n                var ids = options.facebook.pixelIds.filter(function (pixelId) {\r\n                    return !Utils.hideMatchingPixel(pixelId, 'facebook');\r\n                });\r\n                // initialize default pixel\r\n                ids.forEach(function (pixelId) {\r\n                    Facebook.maybeInitPixel(pixelId);\r\n                });\r\n                initialized = true;\r\n\r\n                Utils.fireStaticEvents('facebook');\r\n\r\n            },\r\n            advancedMatching: function () {\r\n                if(options.facebook.advancedMatchingEnabled) {\r\n                    let advancedMatchingForm = Utils.getAdvancedFormData();\r\n                    let advancedMatching = {};\r\n                    if(Object.keys(options.facebook.advancedMatching).length > 0) {\r\n                        advancedMatching = options.facebook.advancedMatching;\r\n                    }\r\n\r\n                    if(!advancedMatching.hasOwnProperty(\"em\")\r\n                        && advancedMatchingForm.hasOwnProperty(\"email\") && advancedMatchingForm[\"email\"].length > 0) {\r\n                        advancedMatching[\"em\"] = advancedMatchingForm[\"email\"];\r\n                    }\r\n                    if(!advancedMatching.hasOwnProperty(\"ph\")\r\n                        && advancedMatchingForm.hasOwnProperty(\"phone\") && advancedMatchingForm[\"phone\"].length > 0) {\r\n                        advancedMatching[\"ph\"] = advancedMatchingForm[\"phone\"];\r\n                    }\r\n                    if(!advancedMatching.hasOwnProperty(\"fn\")\r\n                        && advancedMatchingForm.hasOwnProperty(\"first_name\") && advancedMatchingForm[\"first_name\"].length > 0) {\r\n                        advancedMatching[\"fn\"] = advancedMatchingForm[\"first_name\"];\r\n                    }\r\n                    if(!advancedMatching.hasOwnProperty(\"ln\")\r\n                        && advancedMatchingForm.hasOwnProperty(\"last_name\") && advancedMatchingForm[\"last_name\"].length > 0) {\r\n                        advancedMatching[\"ln\"] = advancedMatchingForm[\"last_name\"];\r\n                    }\r\n                    if(!advancedMatching.hasOwnProperty(\"external_id\")){\r\n                        if (Cookies.get('pbid')) {\r\n                            advancedMatching[\"external_id\"] = Cookies.get('pbid');\r\n                        }\r\n                    }\r\n                    else if(advancedMatching.hasOwnProperty(\"external_id\") && advancedMatching.external_id != Cookies.get('pbid'))\r\n                    {\r\n                        advancedMatching[\"external_id\"] = Cookies.get('pbid') ? Cookies.get('pbid') : advancedMatching.external_id;\r\n                    }\r\n\r\n                    if(Object.keys(advancedMatching).length > 0) {\r\n                        return advancedMatching;\r\n                    }\r\n                }\r\n                return false\r\n            },\r\n            maybeInitPixel: function(pixelId) {\r\n\r\n                if(configuredPixels.includes(pixelId)) return;\r\n\r\n                if (options.facebook.removeMetadata || Utils.hideMatchingPixel(pixelId, this.tag())) {\r\n                    fbq('set', 'autoConfig', false, pixelId);\r\n                }\r\n                let advancedMatching = Facebook.advancedMatching();\r\n\r\n                if ( +options.facebook.meta_ldu === 1  ) {\r\n                    fbq( 'dataProcessingOptions', [ 'LDU' ], 0, 0 );\r\n                }\r\n\r\n                if (options.gdpr.consent_magic_integration_enabled && typeof CS_Data !== \"undefined\") {\r\n                    if(!advancedMatching) {\r\n                        fbq('init', pixelId);\r\n                    } else {\r\n                        var test_prefix = CS_Data.test_prefix;\r\n                        var cs_advanced_matching = Cookies.get('cs_enabled_advanced_matching'+test_prefix);\r\n                        if (jQuery('#cs_enabled_advanced_matching'+test_prefix).length > 0) {\r\n                            if (cs_advanced_matching == 'yes') {\r\n                                fbq('init', pixelId, advancedMatching);\r\n                            } else {\r\n                                fbq('init', pixelId);\r\n                            }\r\n                        } else {\r\n                            fbq('init', pixelId, advancedMatching);\r\n                        }\r\n                    }\r\n                } else {\r\n                    if(!advancedMatching) {\r\n                        fbq('init', pixelId);\r\n                    }  else {\r\n                        fbq('init', pixelId, advancedMatching);\r\n                    }\r\n                }\r\n                configuredPixels.push(pixelId);\r\n            },\r\n\r\n            fireEvent: function (name, data) {\r\n\r\n                if (!initialized || !this.isEnabled()) {\r\n                    return false;\r\n                }\r\n\r\n                data.delay = data.delay || 0;\r\n                data.params = data.params || {};\r\n\r\n                if (data.delay === 0) {\r\n\r\n                    fireEvent(name, data);\r\n\r\n                } else {\r\n\r\n                    setTimeout(function (name, params) {\r\n                        fireEvent(name, params);\r\n                    }, data.delay * 1000, name, data);\r\n\r\n                }\r\n\r\n                return true;\r\n\r\n            },\r\n\r\n            onAdSenseEvent: function (event) {\r\n                this.fireEvent(event.name, event);\r\n            },\r\n\r\n            onClickEvent: function (event) {\r\n                this.fireEvent(event.name, event);\r\n            },\r\n\r\n            onWatchVideo: function (event) {\r\n                this.fireEvent(event.name, event);\r\n            },\r\n\r\n            onCommentEvent: function (event) {\r\n                this.fireEvent(event.name, event);\r\n            },\r\n\r\n            onFormEvent: function (event) {\r\n                this.fireEvent(event.name, event);\r\n            },\r\n\r\n            onDownloadEvent: function (event) {\r\n                this.fireEvent(event.name, event);\r\n\r\n            },\r\n\r\n\r\n            onWooAddToCartOnButtonEvent: function (product_id) {\r\n\r\n                window.pysWooProductData = window.pysWooProductData || [];\r\n                if(!options.dynamicEvents.woo_add_to_cart_on_button_click.hasOwnProperty(this.tag()))\r\n                    return;\r\n\r\n                if (window.pysWooProductData.hasOwnProperty(product_id)) {\r\n                    if (window.pysWooProductData[product_id].hasOwnProperty('facebook')) {\r\n\r\n                        var event = Utils.clone(options.dynamicEvents.woo_add_to_cart_on_button_click[this.tag()])\r\n\r\n                        Utils.copyProperties(window.pysWooProductData[product_id]['facebook']['params'], event.params)\r\n                        event.pixelIds = window.pysWooProductData[product_id]['facebook']['pixelIds'];\r\n                        this.fireEvent(event.name, event);\r\n                    }\r\n                }\r\n            },\r\n\r\n            onWooAddToCartOnSingleEvent: function (product_id, qty, product_type, is_external, $form) {\r\n\r\n                window.pysWooProductData = window.pysWooProductData || [];\r\n                if(!options.dynamicEvents.woo_add_to_cart_on_button_click.hasOwnProperty(this.tag()))\r\n                    return;\r\n\r\n                if (product_type === Utils.PRODUCT_VARIABLE && !options.facebook.wooVariableAsSimple) {\r\n                    product_id = parseInt($form.find('input[name=\"variation_id\"]').val());\r\n                }\r\n\r\n                if (window.pysWooProductData.hasOwnProperty(product_id)) {\r\n                    if (window.pysWooProductData[product_id].hasOwnProperty('facebook')) {\r\n\r\n                        var event = Utils.clone(options.dynamicEvents.woo_add_to_cart_on_button_click.facebook);\r\n\r\n\r\n                        Utils.copyProperties(window.pysWooProductData[product_id]['facebook']['params'], event.params);\r\n\r\n                        var groupValue = 0;\r\n                        if(product_type === Utils.PRODUCT_GROUPED ) {\r\n                            $form.find(\".woocommerce-grouped-product-list .qty\").each(function(index){\r\n                                var childId = $(this).attr('name').replaceAll(\"quantity[\",\"\").replaceAll(\"]\",\"\");\r\n                                var quantity = parseInt($(this).val());\r\n                                if(isNaN(quantity)) {\r\n                                    quantity = 0;\r\n                                }\r\n                                var childItem = window.pysWooProductData[product_id]['facebook'].grouped[childId];\r\n\r\n                                if(quantity == 0) {\r\n                                    event.params.content_ids.forEach(function(el,index,array) {\r\n                                        if(el == childItem.content_id) {\r\n                                            array.splice(index, 1);\r\n                                        }\r\n                                    });\r\n                                }\r\n\r\n                                if(event.params.hasOwnProperty('contents')) {\r\n                                    event.params.contents.forEach(function(el,index,array) {\r\n                                        if(el.id == childItem.content_id) {\r\n                                            if(quantity > 0){\r\n                                                el.quantity = quantity;\r\n                                            } else {\r\n                                                array.splice(index, 1);\r\n                                            }\r\n                                        }\r\n                                    });\r\n                                }\r\n\r\n\r\n                                groupValue += childItem.price * quantity;\r\n                            });\r\n                            if(groupValue == 0) return; // skip if no items selected\r\n                        }\r\n\r\n\r\n\r\n                        // maybe customize value option\r\n                        if (options.woo.addToCartOnButtonValueEnabled && options.woo.addToCartOnButtonValueOption !== 'global') {\r\n\r\n                            if(product_type === Utils.PRODUCT_GROUPED) {\r\n                                event.params.value = groupValue;\r\n                            } else if(product_type === Utils.PRODUCT_BUNDLE) {\r\n                                var data = $(\".bundle_form .bundle_data\").data(\"bundle_form_data\");\r\n                                var items_sum = getBundlePriceOnSingleProduct(data);\r\n                                event.params.value = (parseFloat(data.base_price) + items_sum )* qty;\r\n                            } else {\r\n                                event.params.value = event.params.value * qty;\r\n                            }\r\n                        }\r\n\r\n                        // only when non Facebook for WooCommerce logic used\r\n                        if (event.params.hasOwnProperty('contents') && product_type !== Utils.PRODUCT_GROUPED) {\r\n                            event.params.contents[0].quantity = qty;\r\n\r\n                        }\r\n\r\n                        var event_name = is_external ? options.woo.affiliateEventName : event.name;\r\n\r\n                        this.fireEvent(event_name, event);\r\n\r\n                    }\r\n                }\r\n\r\n            },\r\n\r\n            onWooRemoveFromCartEvent: function (event) {\r\n                this.fireEvent(event.name, event);\r\n            },\r\n\r\n            onWooAffiliateEvent: function (product_id) {\r\n                if(!options.dynamicEvents.woo_affiliate.hasOwnProperty(this.tag()))\r\n                    return;\r\n                var event = Utils.clone(options.dynamicEvents.woo_affiliate[this.tag()]);\r\n\r\n\r\n                if (window.pysWooProductData.hasOwnProperty(product_id)) {\r\n                    if (window.pysWooProductData[product_id].hasOwnProperty('facebook')) {\r\n\r\n                        Utils.copyProperties(window.pysWooProductData[product_id][this.tag()].params, event.params)\r\n                        this.fireEvent(options.woo.affiliateEventName, event);\r\n\r\n                    }\r\n                }\r\n\r\n            },\r\n\r\n            onWooPayPalEvent: function (event) {\r\n                this.fireEvent(event.name, event);\r\n            },\r\n\r\n            onEddAddToCartOnButtonEvent: function (download_id, price_index, qty) {\r\n                if(!options.dynamicEvents.edd_add_to_cart_on_button_click.hasOwnProperty(this.tag()))\r\n                    return;\r\n                var event = Utils.clone(options.dynamicEvents.edd_add_to_cart_on_button_click[this.tag()]);\r\n\r\n                if (window.pysEddProductData.hasOwnProperty(download_id)) {\r\n\r\n                    var index;\r\n\r\n                    if (price_index) {\r\n                        index = download_id + '_' + price_index;\r\n                    } else {\r\n                        index = download_id;\r\n                    }\r\n\r\n                    if (window.pysEddProductData[download_id].hasOwnProperty(index)) {\r\n                        if (window.pysEddProductData[download_id][index].hasOwnProperty('facebook')) {\r\n\r\n                            Utils.copyProperties(window.pysEddProductData[download_id][index]['facebook'][\"params\"], event.params)\r\n\r\n                            // maybe customize value option\r\n                            if (options.edd.addToCartOnButtonValueEnabled && options.edd.addToCartOnButtonValueOption !== 'global') {\r\n                                event.params.value = event.params.value * qty;\r\n                            }\r\n\r\n                            // update contents qty param\r\n                            var contents = event.params.contents;\r\n                            contents[0].quantity = qty;\r\n                            event.params.contents = contents;\r\n\r\n                            this.fireEvent(event.name,event);\r\n\r\n                        }\r\n                    }\r\n\r\n                }\r\n\r\n            },\r\n\r\n            onEddRemoveFromCartEvent: function (event) {\r\n                this.fireEvent(event.name, event);\r\n            },\r\n            onPageScroll: function (event) {\r\n                this.fireEvent(event.name, event);\r\n            },\r\n            onTime: function (event) {\r\n                this.fireEvent(event.name, event);\r\n            },\r\n        };\r\n\r\n    }(options);\r\n\r\n    var Analytics = function (options) {\r\n\r\n        var initialized = false;\r\n        var isAllowEnhancedConversions = false;\r\n        /**\r\n         * Fires event\r\n         *\r\n         * @link: https://developers.google.com/analytics/devguides/collection/gtagjs/sending-data\r\n         * @link: https://developers.google.com/analytics/devguides/collection/gtagjs/events\r\n         * @link: https://developers.google.com/gtagjs/reference/event\r\n         * @link: https://developers.google.com/gtagjs/reference/parameter\r\n         *\r\n         * @link: https://developers.google.com/analytics/devguides/collection/gtagjs/custom-dims-mets\r\n         *\r\n         * @param name\r\n         * @param data\r\n         */\r\n        function fireEvent(name, event) {\r\n            if(typeof window.pys_event_data_filter === \"function\" && window.pys_disable_event_filter(name,'ga')) {\r\n                return;\r\n            }\r\n\r\n            var eventParams = event.params;\r\n            var valuesArray = Object.values(event.trackingIds);\r\n            var ids = valuesArray.filter(function (pixelId) {\r\n                return loadTags.some(loadTag => pixelId.startsWith(loadTag)) && !Utils.hideMatchingPixel(pixelId, 'ga') && !Utils.hideMatchingPixel(pixelId, 'google_ads');\r\n            })\r\n\r\n            Utils.copyProperties(Utils.getRequestParams(), eventParams);\r\n            var _fireEvent = function (tracking_ids,name,params) {\r\n\r\n                params['send_to'] = tracking_ids;\r\n                if (options.debug) {\r\n                    console.log('[Google Analytics #' + tracking_ids + '] ' + name, params);\r\n                }\r\n\r\n                gtag('event', name, params);\r\n\r\n                var customEvent = new CustomEvent('gtag_event_sent', {\r\n                    detail: {\r\n                        eventName: name,\r\n                        params: params,\r\n                        pixel_ids: tracking_ids\r\n                    }\r\n                });\r\n                window.dispatchEvent(customEvent);\r\n\r\n            };\r\n\r\n            var copyParams = Utils.copyProperties(eventParams, {}); // copy params because mapParamsTov4 can modify it\r\n\r\n            var params = mapParamsTov4(ids,name,copyParams)\r\n\r\n            params.event_id = Utils.generateUniqueId(event);\r\n\r\n\r\n            delete params.analytics_storage;\r\n            delete params.ad_storage;\r\n            delete params.ad_user_data;\r\n            delete params.ad_personalization;\r\n\r\n            _fireEvent(ids, name, params);\r\n            isTrackEventForGA.push(name);\r\n\r\n\r\n\r\n        }\r\n\r\n        function normalizeEventName(eventName) {\r\n\r\n            var matches = {\r\n                ViewContent: 'view_item',\r\n                AddToCart: 'add_to_cart',\r\n                AddToWishList: 'add_to_wishlist',\r\n                InitiateCheckout: 'begin_checkout',\r\n                Purchase: 'purchase',\r\n                Lead: 'generate_lead',\r\n                CompleteRegistration: 'sign_up',\r\n                AddPaymentInfo: 'set_checkout_option'\r\n            };\r\n\r\n            return matches.hasOwnProperty(eventName) ? matches[eventName] : eventName;\r\n\r\n        }\r\n\r\n        function mapParamsTov4(tag,name,param) {\r\n            //GA4 automatically collects a number of parameters for all events\r\n            var hasGA4Tag = false;\r\n\r\n            // end\r\n            if (Array.isArray(tag)) {\r\n                hasGA4Tag = tag.some(function (element) {\r\n                    return isv4(element);\r\n                });\r\n            } else if(isv4(tag)) {\r\n                // tag ÑÐ²Ð»ÑÐµÑ‚ÑÑ ÑÑ‚Ñ€Ð¾ÐºÐ¾Ð¹ Ð¸ ÑÐ¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²ÑƒÐµÑ‚ GA4\r\n                hasGA4Tag = true;\r\n            }\r\n            if(hasGA4Tag) {\r\n                delete param.event_category;\r\n                delete param.event_label;\r\n                delete param.ecomm_prodid;\r\n                delete param.ecomm_pagetype;\r\n                delete param.ecomm_totalvalue;\r\n                if(name === 'search') {\r\n                    param['search'] = param.search_term;\r\n                    delete param.search_term;\r\n                    delete param.dynx_itemid;\r\n                    delete param.dynx_pagetype;\r\n                    delete param.dynx_totalvalue;\r\n                }\r\n            }\r\n            return param;\r\n        }\r\n\r\n        function isv4(tag) {\r\n            return tag.indexOf('G') === 0;\r\n        }\r\n\r\n        /**\r\n         * Public API\r\n         */\r\n        return {\r\n            tag: function() {\r\n                return \"ga\";\r\n            },\r\n            isEnabled: function () {\r\n                return options.hasOwnProperty('ga');\r\n            },\r\n            getHidePixel: function(){\r\n                if(this.isEnabled() && options.ga.hasOwnProperty('hide_pixels'))\r\n                {\r\n                    return options.ga.hide_pixels;\r\n                }\r\n                return [];\r\n            },\r\n            disable: function () {\r\n                initialized = false;\r\n            },\r\n            updateEnhancedConversionData : function () {\r\n                if (!initialized || !this.isEnabled()) {\r\n                    return;\r\n                }\r\n                if(options.hasOwnProperty(\"tracking_analytics\") && options.tracking_analytics.hasOwnProperty(\"userDataEnable\") && options.tracking_analytics.userDataEnable) {\r\n                    var advanced = Utils.getAdvancedMergeFormData();\r\n                    if (Object.keys(advanced).length > 0) {\r\n                        gtag('set', 'user_data', advanced);\r\n                    }\r\n                }\r\n            },\r\n            loadPixel: function () {\r\n                if (initialized || !this.isEnabled() || !Utils.consentGiven('analytics')) {\r\n                    return;\r\n                }\r\n\r\n\r\n                for (var i = 0; i < options.ga.trackingIds.length; i++) {\r\n                    var trackingId = options.ga.trackingIds[i];\r\n                    if (!Utils.hideMatchingPixel(trackingId, 'ga')) {\r\n                        Utils.loadGoogleTag(trackingId);\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                var cd = {\r\n                    'dimension1': 'event_hour',\r\n                    'dimension2': 'event_day',\r\n                    'dimension3': 'event_month'\r\n                };\r\n\r\n                // configure Dynamic Remarketing CDs\r\n                if (options.ga.retargetingLogic === 'ecomm') {\r\n                    cd.dimension4 = 'ecomm_prodid';\r\n                    cd.dimension5 = 'ecomm_pagetype';\r\n                    cd.dimension6 = 'ecomm_totalvalue';\r\n                } else {\r\n                    cd.dimension4 = 'dynx_itemid';\r\n                    cd.dimension5 = 'dynx_pagetype';\r\n                    cd.dimension6 = 'dynx_totalvalue';\r\n                }\r\n\r\n                if(options.hasOwnProperty(\"tracking_analytics\") && options.tracking_analytics.hasOwnProperty(\"userDataEnable\") && options.tracking_analytics.userDataEnable){\r\n                    var advanced = Utils.getAdvancedMergeFormData();\r\n                    if(Object.keys(advanced).length > 0){\r\n                        gtag('set', 'user_data', advanced);\r\n                    }\r\n                }\r\n\r\n                var config = {\r\n                    'custom_map': cd\r\n                };\r\n\r\n                if(options.user_id && options.user_id != 0) {\r\n                    config.user_id = options.user_id;\r\n                }\r\n                config.url_passthrough = options.ga.url_passthrough;\r\n                // Cross-Domain tracking\r\n                if (options.ga.crossDomainEnabled) {\r\n                    config.linker = {\r\n                        accept_incoming: options.ga.crossDomainAcceptIncoming,\r\n                        domains: options.ga.crossDomainDomains\r\n                    };\r\n                }\r\n\r\n                var ids = options.ga.trackingIds.filter(function (pixelId) {\r\n                    return !Utils.hideMatchingPixel(pixelId, 'ga');\r\n                });\r\n                loadTags.push(...ids);\r\n                ids.forEach(function (trackingId,index) {\r\n\r\n                    var obj = options.ga.isDebugEnabled;\r\n                    var searchValue = \"index_\"+index;\r\n                    var config_for_tag = Object.assign({}, config);\r\n                    config_for_tag.debug_mode = false;\r\n                    config_for_tag.send_page_view = !options.ga.custom_page_view_event;\r\n                    for (var key in obj) {\r\n                        if (obj[key] === searchValue) {\r\n                            config_for_tag.debug_mode = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                    if(!config_for_tag.debug_mode)\r\n                    {\r\n                        delete config_for_tag.debug_mode;\r\n                    }\r\n\r\n                    if(isv4(trackingId)) {\r\n                        if(options.ga.disableAdvertisingPersonalization) {\r\n                            config_for_tag.allow_ad_personalization_signals = false\r\n                        }\r\n                    }\r\n                    if(options.ga.hasOwnProperty('additionalConfig')){\r\n                        if(options.ga.additionalConfig.hasOwnProperty(trackingId) && options.ga.additionalConfig[trackingId]){\r\n                            config_for_tag.first_party_collection = options.ga.additionalConfig[trackingId].first_party_collection;\r\n                        }\r\n\r\n                    }\r\n                    if(options.ga.hasOwnProperty('serverContainerUrls')){\r\n                        if(options.ga.serverContainerUrls.hasOwnProperty(trackingId) && options.ga.serverContainerUrls[trackingId].enable_server_container != false){\r\n                            if(options.ga.serverContainerUrls[trackingId].server_container_url != ''){\r\n                                config_for_tag.server_container_url = options.ga.serverContainerUrls[trackingId].server_container_url;\r\n                            }\r\n                            if(options.ga.serverContainerUrls[trackingId].transport_url != ''){\r\n                                config_for_tag.transport_url = options.ga.serverContainerUrls[trackingId].transport_url;\r\n                            }\r\n                        }\r\n                    }\r\n                    if (options.gdpr.cookiebot_integration_enabled && typeof Cookiebot !== 'undefined') {\r\n                        var cookiebot_consent_category = options.gdpr['cookiebot_analytics_consent_category'];\r\n                        if (options.gdpr['analytics_prior_consent_enabled']) {\r\n                            if (Cookiebot.consented === true && Cookiebot.consent[cookiebot_consent_category]) {\r\n                                gtag('config', trackingId, config_for_tag);\r\n                            }\r\n                        } else {\r\n                            if (Cookiebot.consent[cookiebot_consent_category]) {\r\n                                gtag('config', trackingId, config_for_tag);\r\n                            }\r\n                        }\r\n                    }\r\n                    else\r\n                    {\r\n                        gtag('config', trackingId, config_for_tag);\r\n                    }\r\n                });\r\n                if(!isAdsLoad && GAds.isEnabled() && options.google_ads.conversion_ids.length > 0 && Utils.consentGiven('google_ads')) {\r\n                    for (var i = 0; i < options.google_ads.conversion_ids.length; i++) {\r\n                        var trackingId = options.google_ads.conversion_ids[i];\r\n                        if (!Utils.hideMatchingPixel(trackingId, 'google_ads')) {\r\n                            Utils.loadGoogleTag(trackingId);\r\n                            break;\r\n                        }\r\n                    }\r\n                    var ids = options.google_ads.conversion_ids.filter(function (pixelId) {\r\n                        return !Utils.hideMatchingPixel(pixelId, 'google_ads');\r\n                    });\r\n                    loadTags.push(...ids);\r\n                    // configure conversion ids\r\n                    ids.forEach(function (conversion_id,index) {\r\n\r\n                        gtag('config', conversion_id);\r\n\r\n                        if(options.google_ads.enhanced_conversion.includes(\"index_\"+index)) {\r\n                            isAllowEnhancedConversions = true\r\n                            gtag('config', conversion_id,{ 'allow_enhanced_conversions':true });\r\n                        }\r\n\r\n                    });\r\n                    isAdsLoad = true;\r\n                }\r\n\r\n\r\n                initialized = true;\r\n\r\n                Utils.fireStaticEvents('ga');\r\n                $( document).trigger( \"analytics_initialized\")\r\n            },\r\n\r\n            fireEvent: function (name, data) {\r\n\r\n                if (!initialized || !this.isEnabled()) {\r\n                    return false;\r\n                }\r\n\r\n                data.delay = data.delay || 0;\r\n                data.params = data.params || {};\r\n\r\n                if (data.delay === 0) {\r\n\r\n                    fireEvent(name, data);\r\n\r\n                } else {\r\n\r\n                    setTimeout(function (name, params) {\r\n                        fireEvent(name, params);\r\n                    }, data.delay * 1000, name, data);\r\n\r\n                }\r\n\r\n                return true;\r\n\r\n            },\r\n\r\n            onAdSenseEvent: function (event) {\r\n                this.fireEvent(event.name, event);\r\n            },\r\n\r\n            onClickEvent: function (event) {\r\n                this.fireEvent(event.name, event);\r\n            },\r\n\r\n            onWatchVideo: function (event) {\r\n                if(!event.hasOwnProperty(\"youtube_disabled\")\r\n                    || !event.youtube_disabled\r\n                    || event.params.video_type !== \"youtube\") {\r\n                    this.fireEvent(event.name, event);\r\n                }\r\n            },\r\n\r\n            onCommentEvent: function (event) {\r\n\r\n                this.fireEvent(event.name, event);\r\n\r\n            },\r\n\r\n            onFormEvent: function (event) {\r\n\r\n                this.fireEvent(event.name, event);\r\n\r\n            },\r\n\r\n            onDownloadEvent: function (event) {\r\n\r\n                this.fireEvent(event.name, event);\r\n\r\n            },\r\n\r\n            onWooAddToCartOnButtonEvent: function (product_id, prod_info = null) {\r\n                if(!options.dynamicEvents.woo_add_to_cart_on_button_click.hasOwnProperty(this.tag()))\r\n                    return;\r\n\r\n                if (window.pysWooProductData.hasOwnProperty(product_id)) {\r\n                    if (window.pysWooProductData[product_id].hasOwnProperty('ga')) {\r\n                        var event = Utils.clone(options.dynamicEvents.woo_add_to_cart_on_button_click[this.tag()]);\r\n                        Utils.copyProperties(window.pysWooProductData[product_id]['ga'].params, event.params)\r\n                        event.trackingIds = window.pysWooProductData[product_id]['ga']['trackingIds'];\r\n                        if(prod_info)\r\n                        {\r\n                            if(prod_info['pys_list_name_productlist_id'])\r\n                            {\r\n                                event.params.items[0]['item_list_id'] = prod_info['pys_list_name_productlist_id']\r\n                            }\r\n                            if(prod_info['pys_list_name_productlist_name'])\r\n                            {\r\n                                event.params.items[0]['item_list_name'] =prod_info['pys_list_name_productlist_name']\r\n                            }\r\n                        }\r\n                        this.fireEvent(event.name, event);\r\n                    }\r\n                }\r\n\r\n            },\r\n\r\n            onWooAddToCartOnSingleEvent: function (product_id, qty, product_type, is_external, $form, prod_info) {\r\n\r\n                window.pysWooProductData = window.pysWooProductData || [];\r\n\r\n                if(!options.dynamicEvents.woo_add_to_cart_on_button_click.hasOwnProperty(this.tag()))\r\n                    return;\r\n                var event = Utils.clone(options.dynamicEvents.woo_add_to_cart_on_button_click[this.tag()]);\r\n\r\n                if (product_type === Utils.PRODUCT_VARIABLE && !options.ga.wooVariableAsSimple) {\r\n                    product_id = parseInt($form.find('input[name=\"variation_id\"]').val());\r\n                }\r\n\r\n                if (window.pysWooProductData.hasOwnProperty(product_id)) {\r\n                    if (window.pysWooProductData[product_id].hasOwnProperty('ga')) {\r\n\r\n                        Utils.copyProperties(window.pysWooProductData[product_id]['ga'].params, event.params);\r\n\r\n\r\n                        if(product_type === Utils.PRODUCT_GROUPED ) {\r\n                            var groupValue = 0;\r\n                            $form.find(\".woocommerce-grouped-product-list .qty\").each(function(index){\r\n                                var childId = $(this).attr('name').replaceAll(\"quantity[\",\"\").replaceAll(\"]\",\"\");\r\n                                var quantity = parseInt($(this).val());\r\n                                if(isNaN(quantity)) {\r\n                                    quantity = 0;\r\n                                }\r\n                                var childItem = window.pysWooProductData[product_id]['ga'].grouped[childId];\r\n                                event.params.items.forEach(function(el,index,array) {\r\n                                    if(el.id == childItem.content_id) {\r\n                                        if(quantity > 0){\r\n                                            el.quantity = quantity;\r\n                                            el.price = childItem.price;\r\n                                        } else {\r\n                                            array.splice(index, 1);\r\n                                        }\r\n                                    }\r\n                                });\r\n                                groupValue += childItem.price * quantity;\r\n                            });\r\n\r\n                            if(options.woo.addToCartOnButtonValueEnabled &&\r\n                                options.woo.addToCartOnButtonValueOption !== 'global' &&\r\n                                event.params.hasOwnProperty('value')) {\r\n                                event.params.value = groupValue;\r\n                            }\r\n\r\n                            if(groupValue == 0) return; // skip if no items selected\r\n                        } else {\r\n                            // update items qty param\r\n                            event.params.items[0].quantity = qty;\r\n                        }\r\n\r\n                        // maybe customize value option\r\n                        if (options.woo.addToCartOnButtonValueEnabled &&\r\n                            options.woo.addToCartOnButtonValueOption !== 'global' &&\r\n                            product_type !== Utils.PRODUCT_GROUPED)\r\n                        {\r\n                            if(event.params.hasOwnProperty('value')) {\r\n                                event.params.value = event.params.items[0].price * qty;\r\n                            }\r\n                        }\r\n\r\n                        if(prod_info)\r\n                        {\r\n                            if(prod_info['pys_list_name_productlist_id'])\r\n                            {\r\n                                event.params.items[0]['item_list_id'] = prod_info['pys_list_name_productlist_id']\r\n                            }\r\n                            if(prod_info['pys_list_name_productlist_name'])\r\n                            {\r\n                                event.params.items[0]['item_list_name'] =prod_info['pys_list_name_productlist_name']\r\n                            }\r\n                        }\r\n\r\n                        var eventName = is_external ? options.woo.affiliateEventName : event.name;\r\n                        eventName = normalizeEventName(eventName);\r\n\r\n                        this.fireEvent(eventName, event);\r\n\r\n                    }\r\n                }\r\n\r\n            },\r\n\r\n            onWooCheckoutProgressStep: function (event) {\r\n                this.fireEvent(event.name, event);\r\n            },\r\n\r\n            onWooSelectContent: function (event) {\r\n                const select_prod_list = {};\r\n\r\n                if (event.params.items[0].item_list_name !== undefined) {\r\n                    select_prod_list.list_name = event.params.items[0].item_list_name;\r\n                }\r\n\r\n                if (event.params.items[0].item_list_id !== undefined) {\r\n                    select_prod_list.list_id = event.params.items[0].item_list_id;\r\n                }\r\n                const url = new URL(window.location.href);\r\n                select_prod_list.url = url.origin + url.pathname;\r\n                Cookies.set('select_prod_list', JSON.stringify(select_prod_list), { expires: 1,path: '/' });\r\n                this.fireEvent(event.name, event);\r\n            },\r\n\r\n            onWooRemoveFromCartEvent: function (event) {\r\n                this.fireEvent(event.name, event);\r\n            },\r\n\r\n            onWooAffiliateEvent: function (product_id) {\r\n                if(!options.dynamicEvents.woo_affiliate.hasOwnProperty(this.tag()))\r\n                    return;\r\n                var event = options.dynamicEvents.woo_affiliate[this.tag()];\r\n\r\n                if (window.pysWooProductData.hasOwnProperty(product_id)) {\r\n                    if (window.pysWooProductData[product_id].hasOwnProperty('ga')) {\r\n\r\n                        event = Utils.clone(event );\r\n                        Utils.copyProperties(window.pysWooProductData[product_id][this.tag()], event.params)\r\n                        this.fireEvent(normalizeEventName(options.woo.affiliateEventName), event);\r\n\r\n                    }\r\n                }\r\n\r\n            },\r\n\r\n            onWooPayPalEvent: function (event) {\r\n                this.fireEvent(event.name, event);\r\n            },\r\n\r\n            onEddAddToCartOnButtonEvent: function (download_id, price_index, qty) {\r\n                if(!options.dynamicEvents.edd_add_to_cart_on_button_click.hasOwnProperty(this.tag()))\r\n                    return;\r\n                var event = Utils.clone(options.dynamicEvents.edd_add_to_cart_on_button_click[this.tag()]);\r\n\r\n\r\n                if (window.pysEddProductData.hasOwnProperty(download_id)) {\r\n\r\n                    var index;\r\n\r\n                    if (price_index) {\r\n                        index = download_id + '_' + price_index;\r\n                    } else {\r\n                        index = download_id;\r\n                    }\r\n\r\n                    if (window.pysEddProductData[download_id].hasOwnProperty(index)) {\r\n                        if (window.pysEddProductData[download_id][index].hasOwnProperty('ga')) {\r\n\r\n                            Utils.copyProperties(window.pysEddProductData[download_id][index]['ga'].params, event.params);\r\n\r\n                            // update items qty param\r\n                            event.params.items[0].quantity = qty;\r\n\r\n                            this.fireEvent(event.name,event);\r\n\r\n                        }\r\n                    }\r\n\r\n                }\r\n\r\n            },\r\n\r\n            onEddRemoveFromCartEvent: function (event) {\r\n                this.fireEvent(event.name, event);\r\n            },\r\n\r\n            onPageScroll: function (event) {\r\n                if (initialized && this.isEnabled()) {\r\n                    this.fireEvent(event.name, event);\r\n                }\r\n            },\r\n            onTime: function (event) {\r\n                if (initialized && this.isEnabled()) {\r\n                    this.fireEvent(event.name, event);\r\n                }\r\n            },\r\n        };\r\n\r\n    }(options);\r\n\r\n    var GAds = function (options) {\r\n\r\n        var initialized = false;\r\n        var isAllowEnhancedConversions = false\r\n        /**\r\n         * Fires event\r\n         *\r\n         * @link: https://developers.google.com/analytics/devguides/collection/gtagjs/sending-data\r\n         * @link: https://developers.google.com/analytics/devguides/collection/gtagjs/events\r\n         * @link: https://developers.google.com/gtagjs/reference/event\r\n         * @link: https://developers.google.com/gtagjs/reference/parameter\r\n         */\r\n        function fireEvent(name, data) {\r\n            if(typeof window.pys_event_data_filter === \"function\" && window.pys_disable_event_filter(event_name,'google_ads')) {\r\n                return;\r\n            }\r\n            var _params = Utils.copyProperties(data.params,{});\r\n\r\n            _params.event_id = Utils.generateUniqueId(data);\r\n\r\n            var ids = data.ids.filter(function (pixelId) {\r\n                return !Utils.hideMatchingPixel(pixelId, 'google_ads');\r\n            });\r\n\r\n            var conversionIds = data.hasOwnProperty('conversion_ids') ? data.conversion_ids.filter(function (conversion_id) {\r\n                return !Utils.hideMatchingPixel(conversion_id, 'google_ads');\r\n            }) : [];\r\n            var conversion_labels = data.hasOwnProperty('conversion_labels') ? data.conversion_labels.filter(function (conversion_label) {\r\n                conversion_id = conversion_label.split('/')[0];\r\n                return !Utils.hideMatchingPixel(conversion_id, 'google_ads');\r\n            }) : [];\r\n\r\n            Utils.copyProperties(Utils.getRequestParams(), _params);\r\n            var _fireEvent = function (conversion_id,event_name) {\r\n\r\n                params = Utils.copyProperties(_params, { send_to: conversion_id });\r\n\r\n                if(\"conversion\" === event_name) {\r\n                    delete params.items;\r\n                    delete params.ecomm_pagetype;\r\n                    delete params.ecomm_prodid;\r\n                    delete params.ecomm_totalvalue;\r\n                }\r\n\r\n                if (options.debug) {\r\n                    console.log('[Google Ads #' + conversion_id + '] ' + event_name, params);\r\n                }\r\n                gtag('event', event_name, params);\r\n                var customEvent = new CustomEvent('gtag_event_sent', {\r\n                    detail: {\r\n                        eventName: event_name,\r\n                        params: params,\r\n                        pixel_ids: conversion_id\r\n                    }\r\n                });\r\n                window.dispatchEvent(customEvent);\r\n\r\n            };\r\n\r\n\r\n            if ( conversion_labels.length > 0 ) {\r\n                ids = conversion_labels;\r\n                if ( !isTrackEventForGA.includes( name ) ) {\r\n                    _fireEvent( ids, name );\r\n                }\r\n            } else {\r\n                var conversion_event_name = data.e_id;\r\n                switch ( conversion_event_name ) {\r\n                    case \"woo_add_to_cart_on_cart_page\":\r\n                    case \"woo_add_to_cart_on_checkout_page\":\r\n                    case \"woo_add_to_cart_on_button_click\":\r\n                        conversion_event_name = 'woo_add_to_cart';\r\n                        break;\r\n                    case \"edd_add_to_cart_on_cart_page\":\r\n                    case \"edd_add_to_cart_on_checkout_page\":\r\n                    case \"edd_add_to_cart_on_button_click\":\r\n                        conversion_event_name = 'edd_add_to_cart';\r\n                        break;\r\n                    case \"automatic_event_adsense\":\r\n                    case \"automatic_event_comment\":\r\n                    case \"automatic_event_download\":\r\n                    case \"automatic_event_email_link\":\r\n                    case \"automatic_event_form\":\r\n                    case \"automatic_event_internal_link\":\r\n                    case \"automatic_event_outbound_link\":\r\n                    case \"automatic_event_scroll\":\r\n                    case \"automatic_event_tel_link\":\r\n                    case \"automatic_event_time_on_page\":\r\n                    case \"automatic_event_video\":\r\n                        conversion_event_name = 'automatic_event';\r\n                        break;\r\n                }\r\n\r\n                if ( ids.length ) {\r\n                    if ( conversion_event_name !== 'automatic_event' && options.google_ads[ conversion_event_name + '_conversion_track' ] ) {\r\n                        const conversionTrack = options.google_ads[ conversion_event_name + '_conversion_track' ];\r\n\r\n                        if ( conversionTrack === 'conversion' ) {\r\n                            _fireEvent( ids, \"conversion\" );\r\n                        }\r\n                    }\r\n\r\n                } else {\r\n                    ids = conversionIds;\r\n                }\r\n\r\n                if ( !isTrackEventForGA.includes( name ) ) {\r\n                    _fireEvent( ids, name );\r\n                }\r\n            }\r\n        }\r\n\r\n        function normalizeEventName(eventName) {\r\n\r\n            var matches = {\r\n                ViewContent: 'view_item',\r\n                AddToCart: 'add_to_cart',\r\n                AddToWishList: 'add_to_wishlist',\r\n                InitiateCheckout: 'begin_checkout',\r\n                Purchase: 'purchase',\r\n                Lead: 'generate_lead',\r\n                CompleteRegistration: 'sign_up',\r\n                AddPaymentInfo: 'set_checkout_option'\r\n            };\r\n\r\n            return matches.hasOwnProperty(eventName) ? matches[eventName] : eventName;\r\n\r\n        }\r\n\r\n        /**\r\n         * Public API\r\n         */\r\n        return {\r\n            tag: function() {\r\n                return \"google_ads\";\r\n            },\r\n            isEnabled: function () {\r\n                return options.hasOwnProperty('google_ads');\r\n            },\r\n            getHidePixel: function(){\r\n                if(this.isEnabled() && options.google_ads.hasOwnProperty('hide_pixels'))\r\n                {\r\n                    return options.google_ads.hide_pixels;\r\n                }\r\n                return [];\r\n            },\r\n            disable: function () {\r\n                initialized = false;\r\n            },\r\n\r\n            updateEnhancedConversionData : function () {\r\n\r\n                if(options.hasOwnProperty(\"tracking_analytics\") && options.tracking_analytics.hasOwnProperty(\"userDataEnable\") && options.tracking_analytics.userDataEnable){\r\n                    var advanced = Utils.getAdvancedMergeFormData()\r\n                    gtag('set', 'user_data', advanced);\r\n                }\r\n            },\r\n\r\n            loadPixel: function () {\r\n\r\n                if (initialized || !this.isEnabled() || !Utils.consentGiven('google_ads')) {\r\n                    return;\r\n                }\r\n                var ids = options.google_ads.conversion_ids.filter(function (pixelId) {\r\n                    return !Utils.hideMatchingPixel(pixelId, 'google_ads');\r\n                });\r\n                loadTags.push(...ids);\r\n                if(!isAdsLoad && options.google_ads.conversion_ids.length > 0){\r\n                    for (var i = 0; i < options.google_ads.conversion_ids.length; i++) {\r\n                        var trackingId = options.google_ads.conversion_ids[i];\r\n                        if (!Utils.hideMatchingPixel(trackingId, 'google_ads')) {\r\n                            Utils.loadGoogleTag(trackingId);\r\n                            break;\r\n                        }\r\n                    }\r\n\r\n                    // configure conversion ids\r\n                    ids.forEach(function (conversion_id,index) {\r\n\r\n                        let config = {};\r\n\r\n                        if(options.google_ads.enhanced_conversion.includes(\"index_\"+index)) {\r\n                            isAllowEnhancedConversions = true;\r\n                            config.allow_enhanced_conversions = true\r\n                        }\r\n\r\n                        // Cross-Domain tracking\r\n                        if (options.google_ads.crossDomainEnabled) {\r\n                            config.linker = {\r\n                                accept_incoming: options.google_ads.crossDomainAcceptIncoming,\r\n                                domains: options.google_ads.crossDomainDomains\r\n                            };\r\n                        }\r\n\r\n                        gtag('config', conversion_id, config );\r\n\r\n                        if(options.hasOwnProperty(\"tracking_analytics\") && options.tracking_analytics.hasOwnProperty(\"userDataEnable\") && options.tracking_analytics.userDataEnableuserDataEnable){\r\n                            var advanced = Utils.getAdvancedMergeFormData()\r\n                            gtag('set', 'user_data', advanced);\r\n                        }\r\n\r\n                    });\r\n                    isAdsLoad = true;\r\n                }\r\n\r\n                initialized = true;\r\n\r\n                Utils.fireStaticEvents('google_ads');\r\n\r\n            },\r\n\r\n            fireEvent: function (name, data) {\r\n\r\n                if (!initialized || !this.isEnabled()) {\r\n                    return false;\r\n                }\r\n\r\n                data.delay = data.delay || 0;\r\n                data.params = data.params || {};\r\n                data.ids = data.ids || [];\r\n                data.conversion_labels = data.conversion_labels || [];\r\n\r\n                if (data.delay === 0) {\r\n                    fireEvent(name, data);\r\n                } else {\r\n                    setTimeout(function (name, data) {\r\n                        fireEvent(name, data);\r\n                    }, data.delay * 1000, name, data);\r\n                }\r\n\r\n                return true;\r\n\r\n            },\r\n\r\n            onAdSenseEvent: function (event) {\r\n                this.fireEvent(event.name, event);\r\n            },\r\n\r\n            onClickEvent: function (action, params) {\r\n                //disabled\r\n            },\r\n\r\n            onWatchVideo: function (event) {\r\n                this.fireEvent(event.name, event);\r\n            },\r\n\r\n            onCommentEvent: function (event) {\r\n                this.fireEvent(event.name, event);\r\n            },\r\n\r\n            onFormEvent: function (event) {\r\n                this.fireEvent(event.name, event);\r\n            },\r\n\r\n            onDownloadEvent: function (event) {\r\n                this.fireEvent(event.name, event);\r\n            },\r\n\r\n\r\n\r\n\r\n            onWooAddToCartOnButtonEvent: function (product_id) {\r\n\r\n                if(!options.dynamicEvents.woo_add_to_cart_on_button_click.hasOwnProperty(this.tag()))\r\n                    return;\r\n\r\n                if (window.pysWooProductData.hasOwnProperty(product_id)) {\r\n                    if (window.pysWooProductData[product_id].hasOwnProperty('google_ads')) {\r\n\r\n                        var event = Utils.clone(options.dynamicEvents.woo_add_to_cart_on_button_click[this.tag()])\r\n                        Utils.copyProperties(window.pysWooProductData[product_id]['google_ads']['params'].params, event.params)\r\n                        event[\"ids\"] = window.pysWooProductData[product_id]['google_ads']['ids']\r\n                        event[\"conversion_labels\"] = window.pysWooProductData[product_id]['google_ads']['conversion_labels']\r\n                        this.fireEvent(event.name, event);\r\n                    }\r\n                }\r\n\r\n            },\r\n\r\n            onWooAddToCartOnSingleEvent: function (product_id, qty, product_type, is_external, $form) {\r\n\r\n                window.pysWooProductData = window.pysWooProductData || [];\r\n                if(!options.dynamicEvents.woo_add_to_cart_on_button_click.hasOwnProperty(this.tag()))\r\n                    return;\r\n                var event = Utils.clone(options.dynamicEvents.woo_add_to_cart_on_button_click[this.tag()]);\r\n\r\n                if (product_type === Utils.PRODUCT_VARIABLE && !options.google_ads.wooVariableAsSimple) {\r\n                    product_id = parseInt($form.find('input[name=\"variation_id\"]').val());\r\n                }\r\n\r\n                if (window.pysWooProductData.hasOwnProperty(product_id)) {\r\n                    if (window.pysWooProductData[product_id].hasOwnProperty('google_ads')) {\r\n\r\n                        Utils.copyProperties(window.pysWooProductData[product_id]['google_ads'][\"params\"], event.params);\r\n                        event[\"ids\"] = window.pysWooProductData[product_id]['google_ads']['ids']\r\n                        event[\"conversion_labels\"] = window.pysWooProductData[product_id]['google_ads']['conversion_labels']\r\n\r\n                        var groupValue = 0;\r\n                        if(product_type === Utils.PRODUCT_GROUPED ) {\r\n                            $form.find(\".woocommerce-grouped-product-list .qty\").each(function(index){\r\n                                var childId = $(this).attr('name').replaceAll(\"quantity[\",\"\").replaceAll(\"]\",\"\");\r\n                                var quantity = parseInt($(this).val());\r\n                                if(isNaN(quantity)) {\r\n                                    quantity = 0;\r\n                                }\r\n\r\n                                var childItem = window.pysWooProductData[product_id]['google_ads'].grouped[childId];\r\n\r\n                                if(options.woo.addToCartOnButtonValueEnabled &&\r\n                                    options.woo.addToCartOnButtonValueOption !== 'global') {\r\n\r\n                                    event.params.items.forEach(function(el,index,array) {\r\n                                        if(el.id == childItem.content_id) {\r\n                                            if(quantity > 0){\r\n                                                el.quantity = quantity;\r\n                                                el.price = childItem.price;\r\n                                            } else {\r\n                                                array.splice(index, 1);\r\n                                            }\r\n                                        }\r\n                                    });\r\n                                }\r\n                                groupValue += childItem.price * quantity;\r\n                            });\r\n                            if(groupValue == 0) return;\r\n                            event.params.value = groupValue;\r\n                        } else {\r\n                            // update items qty param\r\n                            event.params.items[0].quantity = qty;\r\n                        }\r\n\r\n\r\n\r\n                        // maybe customize value option\r\n                        if (options.woo.addToCartOnButtonValueEnabled &&\r\n                            options.woo.addToCartOnButtonValueOption !== 'global' &&\r\n                            product_type !== Utils.PRODUCT_GROUPED) {\r\n                            event.params.value =  event.params.value * qty;\r\n                        }\r\n\r\n\r\n\r\n                        var eventName = is_external ? options.woo.affiliateEventName : event.name;\r\n                        eventName = normalizeEventName(eventName);\r\n\r\n                        this.fireEvent(eventName, event);\r\n\r\n                    }\r\n                }\r\n\r\n            },\r\n\r\n            onWooRemoveFromCartEvent: function (event) {\r\n                this.fireEvent(event.name, event);\r\n            },\r\n\r\n            onWooAffiliateEvent: function (product_id) {\r\n                if(!options.dynamicEvents.woo_affiliate.hasOwnProperty(this.tag()))\r\n                    return;\r\n                var event = options.dynamicEvents.woo_affiliate[this.tag()];\r\n\r\n                if (window.pysWooProductData.hasOwnProperty(product_id)) {\r\n                    if (window.pysWooProductData[product_id].hasOwnProperty('google_ads')) {\r\n\r\n                        event = Utils.clone(event)\r\n                        Utils.copyProperties(window.pysWooProductData[product_id][this.tag()], event.params)\r\n                        this.fireEvent(normalizeEventName(options.woo.affiliateEventName), event);\r\n\r\n                    }\r\n                }\r\n\r\n            },\r\n\r\n            onWooPayPalEvent: function (event) {\r\n                this.fireEvent(event.name, event);\r\n            },\r\n\r\n            onEddAddToCartOnButtonEvent: function (download_id, price_index, qty) {\r\n                if(!options.dynamicEvents.edd_add_to_cart_on_button_click.hasOwnProperty(this.tag()))\r\n                    return;\r\n                var event = options.dynamicEvents.edd_add_to_cart_on_button_click[this.tag()];\r\n\r\n\r\n                if (window.pysEddProductData.hasOwnProperty(download_id)) {\r\n\r\n                    var index;\r\n\r\n                    if (price_index) {\r\n                        index = download_id + '_' + price_index;\r\n                    } else {\r\n                        index = download_id;\r\n                    }\r\n\r\n                    if (window.pysEddProductData[download_id].hasOwnProperty(index)) {\r\n                        if (window.pysEddProductData[download_id][index].hasOwnProperty('google_ads')) {\r\n\r\n                            event = Utils.clone(event)\r\n                            Utils.copyProperties(window.pysEddProductData[download_id][index]['google_ads']['params'], event.params);\r\n                            event.ids = window.pysEddProductData[download_id][index]['google_ads']['ids']\r\n                            // update items qty param\r\n                            //params.items[0].quantity = qty;\r\n\r\n                            this.fireEvent(event.name, event);\r\n\r\n                        }\r\n                    }\r\n\r\n                }\r\n\r\n            },\r\n\r\n            onEddRemoveFromCartEvent: function (event) {\r\n                this.fireEvent(event.name, event);\r\n            },\r\n            onPageScroll: function (event) {\r\n                if (initialized && this.isEnabled()) {\r\n                    this.fireEvent(event.name, event);\r\n                }\r\n            },\r\n            onTime: function (event) {\r\n                if (initialized && this.isEnabled()) {\r\n                    this.fireEvent(event.name, event);\r\n                }\r\n            },\r\n\r\n        };\r\n\r\n    }(options);\r\n\r\n    var GTM = function (options) {\r\n\r\n        var initialized = false;\r\n\r\n        var datalayer_name = 'dataLayer';\r\n        /*\r\n         * @param name\r\n         * @param data\r\n         */\r\n        function fireEvent(name, event) {\r\n            if(typeof window.pys_event_data_filter === \"function\" && window.pys_disable_event_filter(name,'gtm')) {\r\n                return;\r\n            }\r\n\r\n\r\n            var eventParams = event.params;\r\n            var data = event.params;\r\n            var valuesArray = Object.values(event.trackingIds);\r\n            var ids = valuesArray.filter(function (pixelId) {\r\n                return !Utils.hideMatchingPixel(pixelId, 'gtm');\r\n            })\r\n            Utils.copyProperties(Utils.getRequestParams(), eventParams);\r\n            var _fireEvent = function (tracking_id,name,params, event=null) {\r\n\r\n                var eventData = {};\r\n                var ContainerCodeHasTag = !options.gtm.gtm_just_data_layer && tracking_id.length > 0;\r\n                if(ContainerCodeHasTag) {\r\n                    params['send_to'] = tracking_id;\r\n                }\r\n                else if(!options.gtm.gtm_just_data_layer){\r\n                    return\r\n                }\r\n\r\n                if (params.hasOwnProperty('ecommerce')) {\r\n                    eventData.ecommerce = params.ecommerce;\r\n                    delete params.ecommerce;\r\n                }\r\n\r\n                var automatedParams = { ...params };\r\n                [params['manualName'], 'manualName', 'triggerType'].forEach(key => delete automatedParams[key]);\r\n                if(event && (!event.hasOwnProperty('hasAutoParam') || (event.hasOwnProperty('hasAutoParam') && event.hasAutoParam))) {\r\n                    eventData.automatedParameters = automatedParams;\r\n                }\r\n\r\n// Move custom parameters to eventData\r\n\r\n                if (params.hasOwnProperty(params['manualName'])) {\r\n                    eventData[params['manualName']] = params[params['manualName']];\r\n                    delete params[params['manualName']];\r\n                }\r\n\r\n                ['manualName','triggerType'].forEach(key => {\r\n                    if (params.hasOwnProperty(key)) {\r\n                        eventData[key] = params[key];\r\n                        delete params[key];\r\n                    }\r\n                });\r\n\r\n                eventData.manualDataLayer = options.gtm.gtm_dataLayer_name ?? 'dataLayer';\r\n\r\n                eventData.event = name;\r\n\r\n                if (options.debug) {\r\n                    if (ContainerCodeHasTag){\r\n                        console.log('[Google GTM #' + tracking_id + '] ' + name, eventData);\r\n                    }\r\n                    else {\r\n                        console.log('[Google GTM push to \"'+datalayer_name+'\"] ' + name, eventData);\r\n                    }\r\n                }\r\n                window[datalayer_name].push(eventData);\r\n\r\n                var customEvent = new CustomEvent('gtm_event_sent', {\r\n                    detail: {\r\n                        eventName: name,\r\n                        params: eventData,\r\n                        pixel_ids: tracking_id\r\n                    }\r\n                });\r\n                window.dispatchEvent(customEvent);\r\n\r\n            };\r\n\r\n            var copyParams = Utils.copyProperties(eventParams, {}); // copy params because mapParamsToGTM can modify it\r\n\r\n            var params = mapParamsToGTM(ids,name,copyParams)\r\n\r\n            params.event_id = Utils.generateUniqueId(event);\r\n\r\n            _fireEvent(ids, name, params, event);\r\n        }\r\n\r\n        function normalizeEventName(eventName) {\r\n\r\n            var matches = {\r\n                ViewContent: 'view_item',\r\n                AddToCart: 'add_to_cart',\r\n                AddToWishList: 'add_to_wishlist',\r\n                InitiateCheckout: 'begin_checkout',\r\n                Purchase: 'purchase',\r\n                Lead: 'generate_lead',\r\n                CompleteRegistration: 'sign_up',\r\n                AddPaymentInfo: 'set_checkout_option'\r\n            };\r\n\r\n            return matches.hasOwnProperty(eventName) ? matches[eventName] : eventName;\r\n\r\n        }\r\n\r\n        function mapParamsToGTM(tag,name,param) {\r\n            var hasGTM = false;\r\n\r\n            // end\r\n            if (Array.isArray(tag)) {\r\n                hasGTM = tag.some(function (element) {\r\n                    return isGTM(element);\r\n                });\r\n            } else if(isGTM(tag)) {\r\n                hasGTM = true;\r\n            }\r\n            if(hasGTM) {\r\n                delete param.event_category;\r\n                delete param.event_label;\r\n\r\n                delete param.analytics_storage;\r\n                delete param.ad_storage;\r\n                delete param.ad_user_data;\r\n                delete param.ad_personalization;\r\n\r\n                if(name === 'search') {\r\n                    param['search'] = param.search_term;\r\n                    delete param.search_term;\r\n                    delete param.dynx_itemid;\r\n                    delete param.dynx_pagetype;\r\n                    delete param.dynx_totalvalue;\r\n                }\r\n            }\r\n            return param;\r\n        }\r\n\r\n        function isGTM(tag) {\r\n            return tag.indexOf('GTM') === 0;\r\n        }\r\n        /**\r\n         * Public API\r\n         */\r\n        return {\r\n            tag: function() {\r\n                return \"gtm\";\r\n            },\r\n            isEnabled: function () {\r\n                return options.hasOwnProperty('gtm');\r\n            },\r\n            getHidePixel: function(){\r\n                if(this.isEnabled() && options.gtm.hasOwnProperty('hide_pixels'))\r\n                {\r\n                    return options.gtm.hide_pixels;\r\n                }\r\n                return [];\r\n            },\r\n            disable: function () {\r\n                initialized = false;\r\n            },\r\n            updateEnhancedConversionData : function () {\r\n                if (!initialized || !this.isEnabled()) {\r\n                    return;\r\n                }\r\n                if(options.hasOwnProperty(\"tracking_analytics\") && options.tracking_analytics.hasOwnProperty(\"userDataEnable\") && options.tracking_analytics.userDataEnable) {\r\n                    var advanced = Utils.getAdvancedMergeFormData(true);\r\n                    if (Object.keys(advanced).length > 0) {\r\n                        window[datalayer_name].push({'user_data' : advanced});\r\n                    }\r\n                }\r\n            },\r\n            loadPixel: function () {\r\n\r\n                if (initialized || !this.isEnabled() || !Utils.consentGiven('analytics')) {\r\n                    return;\r\n                }\r\n                datalayer_name = options.gtm.gtm_dataLayer_name ?? 'dataLayer';\r\n\r\n                for (var i = 0; i < options.gtm.trackingIds.length; i++) {\r\n                    var trackingId = options.gtm.trackingIds[i];\r\n                    if (!Utils.hideMatchingPixel(trackingId, 'gtm') && !options.gtm.gtm_just_data_layer) {\r\n                        console.log('[PYS] Google Tag Manager container code loaded');\r\n                        Utils.loadGTMScript(trackingId);\r\n                        break;\r\n                    }\r\n                }\r\n                if(options.gtm.gtm_just_data_layer) {\r\n                    console.warn && console.warn(\"[PYS] Google Tag Manager container code placement set to OFF !!!\");\r\n                    console.warn && console.warn(\"[PYS] Data layer codes are active but GTM container must be loaded using custom coding !!!\");\r\n                }\r\n\r\n                if(options.hasOwnProperty(\"tracking_analytics\") && options.tracking_analytics.hasOwnProperty(\"userDataEnable\") && options.tracking_analytics.userDataEnable){\r\n                    var advanced = Utils.getAdvancedMergeFormData(true);\r\n                    if(Object.keys(advanced).length > 0){\r\n                        window[datalayer_name].push({'user_data' : advanced});\r\n                    }\r\n                }\r\n\r\n\r\n                var config = {};\r\n\r\n                if(options.user_id && options.user_id != 0) {\r\n                    config.user_id = options.user_id;\r\n                }\r\n\r\n                // Cross-Domain tracking\r\n\r\n                var ids = options.gtm.trackingIds.filter(function (pixelId) {\r\n                    return !Utils.hideMatchingPixel(pixelId, 'gtm');\r\n                });\r\n\r\n\r\n                initialized = true;\r\n\r\n                Utils.fireStaticEvents('gtm');\r\n            },\r\n\r\n            fireEvent: function (name, data) {\r\n\r\n                if (!initialized || !this.isEnabled()) {\r\n                    return false;\r\n                }\r\n\r\n                data.delay = data.delay || 0;\r\n                data.params = data.params || {};\r\n\r\n                if (data.delay === 0) {\r\n\r\n                    fireEvent(name, data);\r\n\r\n                } else {\r\n\r\n                    setTimeout(function (name, params) {\r\n                        fireEvent(name, params);\r\n                    }, data.delay * 1000, name, data);\r\n\r\n                }\r\n\r\n                return true;\r\n\r\n            },\r\n\r\n            onAdSenseEvent: function (event) {\r\n                this.fireEvent(event.name, event);\r\n            },\r\n\r\n            onClickEvent: function (event) {\r\n                this.fireEvent(event.name, event);\r\n            },\r\n\r\n            onWatchVideo: function (event) {\r\n                if(!event.hasOwnProperty(\"youtube_disabled\")\r\n                    || !event.youtube_disabled\r\n                    || event.params.video_type !== \"youtube\") {\r\n                    this.fireEvent(event.name, event);\r\n                }\r\n            },\r\n\r\n            onCommentEvent: function (event) {\r\n\r\n                this.fireEvent(event.name, event);\r\n\r\n            },\r\n\r\n            onFormEvent: function (event) {\r\n\r\n                this.fireEvent(event.name, event);\r\n\r\n            },\r\n\r\n            onDownloadEvent: function (event) {\r\n\r\n                this.fireEvent(event.name, event);\r\n\r\n            },\r\n\r\n            onWooAddToCartOnButtonEvent: function (product_id, prod_info = null) {\r\n                if(!options.dynamicEvents.woo_add_to_cart_on_button_click.hasOwnProperty(this.tag()))\r\n                    return;\r\n                if (window.pysWooProductData.hasOwnProperty(product_id)) {\r\n                    if (window.pysWooProductData[product_id].hasOwnProperty('gtm')) {\r\n                        var event = Utils.clone(options.dynamicEvents.woo_add_to_cart_on_button_click[this.tag()]);\r\n                        Utils.copyProperties(window.pysWooProductData[product_id]['gtm'].params, event.params)\r\n                        event.trackingIds = window.pysWooProductData[product_id]['gtm']['trackingIds'];\r\n\r\n\r\n                        if(prod_info)\r\n                        {\r\n                            item = event.params.hasOwnProperty('ecommerce') ? event.params.ecommerce.items[0] : event.params.items[0];\r\n\r\n                            if(prod_info['pys_list_name_productlist_id'])\r\n                            {\r\n                                item['item_list_id'] = prod_info['pys_list_name_productlist_id']\r\n                            }\r\n                            if(prod_info['pys_list_name_productlist_name'])\r\n                            {\r\n                                item['item_list_name'] =prod_info['pys_list_name_productlist_name']\r\n                            }\r\n                        }\r\n                        this.fireEvent(event.name, event);\r\n                    }\r\n                }\r\n\r\n            },\r\n\r\n            onWooAddToCartOnSingleEvent: function (product_id, qty, product_type, is_external, $form, prod_info) {\r\n                window.pysWooProductData = window.pysWooProductData || [];\r\n\r\n                if(!options.dynamicEvents.woo_add_to_cart_on_button_click.hasOwnProperty(this.tag()))\r\n                    return;\r\n                var event = Utils.clone(options.dynamicEvents.woo_add_to_cart_on_button_click[this.tag()]);\r\n\r\n                if (product_type === Utils.PRODUCT_VARIABLE && !options.gtm.wooVariableAsSimple) {\r\n                    product_id = parseInt($form.find('input[name=\"variation_id\"]').val());\r\n                }\r\n\r\n                if (window.pysWooProductData.hasOwnProperty(product_id)) {\r\n                    if (window.pysWooProductData[product_id].hasOwnProperty('gtm')) {\r\n\r\n                        Utils.copyProperties(window.pysWooProductData[product_id]['gtm'].params, event.params);\r\n\r\n                        params = event.params.hasOwnProperty('ecommerce') ? event.params.ecommerce : event.params;\r\n\r\n                        if(product_type === Utils.PRODUCT_GROUPED ) {\r\n                            var groupValue = 0;\r\n                            $form.find(\".woocommerce-grouped-product-list .qty\").each(function(index){\r\n                                var childId = $(this).attr('name').replaceAll(\"quantity[\",\"\").replaceAll(\"]\",\"\");\r\n                                var quantity = parseInt($(this).val());\r\n                                if(isNaN(quantity)) {\r\n                                    quantity = 0;\r\n                                }\r\n                                var childItem = window.pysWooProductData[product_id]['gtm'].grouped[childId];\r\n\r\n                                params.items.forEach(function(el,index,array) {\r\n                                    if(el.id == childItem.content_id) {\r\n                                        if(quantity > 0){\r\n                                            el.quantity = quantity;\r\n                                            el.price = childItem.price;\r\n                                        } else {\r\n                                            array.splice(index, 1);\r\n                                        }\r\n                                    }\r\n                                });\r\n                                groupValue += childItem.price * quantity;\r\n                            });\r\n\r\n\r\n\r\n                            if(options.woo.addToCartOnButtonValueEnabled &&\r\n                                options.woo.addToCartOnButtonValueOption !== 'global' &&\r\n                                params.hasOwnProperty('value')) {\r\n                                params.value = groupValue;\r\n                            }\r\n\r\n                            if(groupValue == 0) return; // skip if no items selected\r\n                        } else {\r\n                            // update items qty param\r\n                            params.items[0].quantity = qty;\r\n                        }\r\n\r\n                        // maybe customize value option\r\n                        if (options.woo.addToCartOnButtonValueEnabled &&\r\n                            options.woo.addToCartOnButtonValueOption !== 'global' &&\r\n                            product_type !== Utils.PRODUCT_GROUPED)\r\n                        {\r\n                            if(params.hasOwnProperty('value')) {\r\n                                params.value = params.items[0].price * qty;\r\n                            }\r\n                        }\r\n\r\n                        if(prod_info)\r\n                        {\r\n                            if(prod_info['pys_list_name_productlist_id'])\r\n                            {\r\n                                params.items[0]['item_list_id'] = prod_info['pys_list_name_productlist_id']\r\n                            }\r\n                            if(prod_info['pys_list_name_productlist_name'])\r\n                            {\r\n                                params.items[0]['item_list_name'] =prod_info['pys_list_name_productlist_name']\r\n                            }\r\n                        }\r\n\r\n                        var eventName = is_external ? options.woo.affiliateEventName : event.name;\r\n                        eventName = normalizeEventName(eventName);\r\n\r\n                        this.fireEvent(eventName, event);\r\n\r\n                    }\r\n                }\r\n\r\n            },\r\n\r\n            onWooCheckoutProgressStep: function (event) {\r\n                this.fireEvent(event.name, event);\r\n            },\r\n\r\n            onWooSelectContent: function (event) {\r\n                const select_prod_list = {};\r\n\r\n                if (event.params.items[0].item_list_name !== undefined) {\r\n                    select_prod_list.list_name = event.params.items[0].item_list_name;\r\n                }\r\n\r\n                if (event.params.items[0].item_list_id !== undefined) {\r\n                    select_prod_list.list_id = event.params.items[0].item_list_id;\r\n                }\r\n                const url = new URL(window.location.href);\r\n                select_prod_list.url = url.origin + url.pathname;\r\n                Cookies.set('select_prod_list', JSON.stringify(select_prod_list), { expires: 1,path: '/' });\r\n                this.fireEvent(event.name, event);\r\n            },\r\n\r\n            onWooRemoveFromCartEvent: function (event) {\r\n                this.fireEvent(event.name, event);\r\n            },\r\n\r\n            onWooAffiliateEvent: function (product_id) {\r\n                if(!options.dynamicEvents.woo_affiliate.hasOwnProperty(this.tag()))\r\n                    return;\r\n                var event = options.dynamicEvents.woo_affiliate[this.tag()];\r\n\r\n                if (window.pysWooProductData.hasOwnProperty(product_id)) {\r\n                    if (window.pysWooProductData[product_id].hasOwnProperty('gtm')) {\r\n\r\n                        event = Utils.clone(event );\r\n                        Utils.copyProperties(window.pysWooProductData[product_id][this.tag()], event.params)\r\n                        this.fireEvent(normalizeEventName(options.woo.affiliateEventName), event);\r\n\r\n                    }\r\n                }\r\n\r\n            },\r\n\r\n            onWooPayPalEvent: function (event) {\r\n                this.fireEvent(event.name, event);\r\n            },\r\n\r\n            onEddAddToCartOnButtonEvent: function (download_id, price_index, qty) {\r\n                if(!options.dynamicEvents.edd_add_to_cart_on_button_click.hasOwnProperty(this.tag()))\r\n                    return;\r\n                var event = Utils.clone(options.dynamicEvents.edd_add_to_cart_on_button_click[this.tag()]);\r\n\r\n\r\n                if (window.pysEddProductData.hasOwnProperty(download_id)) {\r\n\r\n                    var index;\r\n\r\n                    if (price_index) {\r\n                        index = download_id + '_' + price_index;\r\n                    } else {\r\n                        index = download_id;\r\n                    }\r\n\r\n                    if (window.pysEddProductData[download_id].hasOwnProperty(index)) {\r\n                        if (window.pysEddProductData[download_id][index].hasOwnProperty('gtm')) {\r\n\r\n                            Utils.copyProperties(window.pysEddProductData[download_id][index]['gtm'].params, event.params);\r\n                            item = event.params.hasOwnProperty('ecommerce') ? event.params.ecommerce.items[0] : event.params.items[0];\r\n                            // update items qty param\r\n                            item.quantity = qty;\r\n\r\n                            this.fireEvent(event.name,event);\r\n\r\n                        }\r\n                    }\r\n\r\n                }\r\n\r\n            },\r\n\r\n            onEddRemoveFromCartEvent: function (event) {\r\n                this.fireEvent(event.name, event);\r\n            },\r\n\r\n            onPageScroll: function (event) {\r\n                if (initialized && this.isEnabled()) {\r\n                    this.fireEvent(event.name, event);\r\n                }\r\n            },\r\n            onTime: function (event) {\r\n                if (initialized && this.isEnabled()) {\r\n                    this.fireEvent(event.name, event);\r\n                }\r\n            },\r\n        };\r\n\r\n    }(options);\r\n\r\n    window.pys = window.pys || {};\r\n    window.pys.Facebook = Facebook;\r\n    window.pys.Analytics = Analytics;\r\n    window.pys.GAds = GAds;\r\n    window.pys.GTM = GTM;\r\n    window.pys.Utils = Utils;\r\n    window.pys.TikTok = TikTok;\r\n\r\n\r\n\r\n    $(document).ready(function () {\r\n\r\n        if(Cookies.get('form_track'))\r\n        {\r\n            Cookies.remove('form_track')\r\n        }\r\n\r\n        if($(\"#pys_late_event\").length > 0) {\r\n            var events =  JSON.parse($(\"#pys_late_event\").attr(\"dir\"));\r\n            for (var platform in events) {\r\n                if (events.hasOwnProperty(platform)) {\r\n                    var platformEvents = events[platform];\r\n                    platformEvents.forEach(function(event) {\r\n                        var eventData = {};\r\n                        eventData[event.e_id] = [event];\r\n                        if (options.staticEvents.hasOwnProperty(platform)) {\r\n                            Object.assign(options.staticEvents[platform], eventData);\r\n                        } else {\r\n                            options.staticEvents[platform] = eventData;\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        }\r\n\r\n        var Pinterest = Utils.setupPinterestObject();\r\n        var Bing = Utils.setupBingObject();\r\n        if(options.hasOwnProperty('cookie'))\r\n        {\r\n            if(options.cookie.externalID_disabled_by_api || options.cookie.disabled_all_cookie)\r\n            {\r\n                Cookies.remove('pbid')\r\n            }\r\n            if(options.cookie.disabled_advanced_form_data_cookie || options.cookie.disabled_all_cookie)\r\n            {\r\n                Cookies.remove('pys_advanced_form_data')\r\n            }\r\n            if(options.cookie.disabled_landing_page_cookie || options.cookie.disabled_all_cookie)\r\n            {\r\n                Cookies.remove('pys_landing_page')\r\n                Cookies.remove('last_pys_landing_page')\r\n            }\r\n            if(options.cookie.disabled_trafficsource_cookie || options.cookie.disabled_all_cookie)\r\n            {\r\n                Cookies.remove('pysTrafficSource')\r\n                Cookies.remove('last_pysTrafficSource')\r\n            }\r\n            if(options.cookie.disabled_first_visit_cookie || options.cookie.disabled_all_cookie)\r\n            {\r\n                Cookies.remove('pys_first_visit')\r\n\r\n            }\r\n            if(options.cookie.disabled_utmTerms_cookie || options.cookie.disabled_all_cookie)\r\n            {\r\n                $.each(Utils.utmTerms, function (index, name) {\r\n                    Cookies.remove('pys_' + name)\r\n                });\r\n                $.each(Utils.utmTerms, function (index, name) {\r\n                    Cookies.remove('last_pys_' + name)\r\n                });\r\n            }\r\n            if(options.cookie.disabled_utmId_cookie || options.cookie.disabled_all_cookie)\r\n            {\r\n                $.each(Utils.utmId,function(index,name) {\r\n                    Cookies.remove('pys_' + name)\r\n                })\r\n                $.each(Utils.utmId,function(index,name) {\r\n                    Cookies.remove('last_pys_' + name)\r\n                });\r\n            }\r\n        }\r\n\r\n        if (options.gdpr.cookie_law_info_integration_enabled) {\r\n            var cli_cookie = Cookies.get('cookieyes-consent') ?? Cookies.get('viewed_cookie_policy');\r\n\r\n            if (typeof cli_cookie !== 'undefined') {\r\n                if (cli_cookie === Cookies.get('cookieyes-consent') && getCookieYes('analytics') == 'yes') {\r\n                    Utils.manageCookies();\r\n                } else if (cli_cookie === Cookies.get('viewed_cookie_policy') && cli_cookie == 'yes') {\r\n                    Utils.manageCookies();\r\n                }\r\n            }\r\n        }\r\n\r\n        if ( options.gdpr.consent_magic_integration_enabled && typeof CS_Data !== \"undefined\" ) {\r\n            if ( CS_Data.cs_script_cat.pys == CS_Data.cs_necessary_cat_id || CS_Data.cs_script_cat.pys == 0 ) {\r\n                Utils.manageCookies();\r\n            } else if ( Cookies.get( 'cs_enabled_cookie_term' + CS_Data.test_prefix + '_' + CS_Data.cs_script_cat.pys ) == 'yes' ) {\r\n                Utils.manageCookies();\r\n            }\r\n        } else {\r\n            Utils.manageCookies();\r\n        }\r\n\r\n        Utils.initializeRequestParams();\r\n        Utils.setupGdprCallbacks();\r\n\r\n        if ( options.enable_auto_save_advance_matching ) {\r\n            let override = options.data_persistency == 'recent_data';\r\n\r\n            //Setup Advanced Form Data\r\n            if ( options.advance_matching_form.enable_advance_matching_forms ) {\r\n                $( document ).on( \"blur\", \"input[type='email']\", function () {\r\n                    let email = $( this ).val().trim().toLowerCase();\r\n                    if ( Utils.validateEmail( email ) ) {\r\n                        Utils.saveAdvancedFormData( email, null, null, null, override );\r\n                    }\r\n                } )\r\n                $( document ).on( \"blur\", \"input[type='tel']\", function () {\r\n                    let phone = $( this ).val().trim().replace( /\\D/g, \"\" );\r\n                    if ( phone.length > 5 ) {\r\n                        Utils.saveAdvancedFormData( null, phone, null, null, override );\r\n                    }\r\n                } )\r\n                $( document ).on( \"blur\", \"input[type='text']\", function () {\r\n                    let name;\r\n                    if ( $( this ).attr( \"name\" ) && $( this ).attr( \"name\" ) != '' ) {\r\n                        name = $( this ).attr( \"name\" ).trim()\r\n                    }\r\n                    if ( name && options.advance_matching_form.advance_matching_fn_names.includes( name ) ) {\r\n                        let value = $( this ).val().trim();\r\n                        if ( value.length > 0 ) {\r\n                            Utils.saveAdvancedFormData( null, null, value, null, override );\r\n                        }\r\n                    }\r\n                    if ( name && options.advance_matching_form.advance_matching_ln_names.includes( name ) ) {\r\n                        let value = $( this ).val().trim();\r\n                        if ( value.length > 0 ) {\r\n                            Utils.saveAdvancedFormData( null, null, null, value, override );\r\n                        }\r\n                    }\r\n                    if ( name && options.advance_matching_form.advance_matching_tel_names.includes( name ) ) {\r\n                        let value = $( this ).val().trim();\r\n                        if ( value.length > 0 ) {\r\n                            Utils.saveAdvancedFormData( null, value, null, null, override );\r\n                        }\r\n                    }\r\n                    if ( name && options.advance_matching_form.advance_matching_em_names.includes( name ) ) {\r\n                        let email = $( this ).val().trim().toLowerCase();\r\n\r\n                        if ( Utils.validateEmail( email ) ) {\r\n                            Utils.saveAdvancedFormData( email, null, null, null, false );\r\n                        }\r\n                    }\r\n                } )\r\n            }\r\n\r\n            //Setup Advanced Url Data\r\n            if ( Object.keys( options.advance_matching_url ).length > 0 && options.advance_matching_url.enable_advance_matching_url ) {\r\n                const url_params = new URLSearchParams( window.location.search );\r\n                url_params.forEach( ( value, key ) => {\r\n                    if ( options.advance_matching_url.advance_matching_fn_names.includes( key ) ) {\r\n                        Utils.saveAdvancedFormData( null, null, value.trim(), null, override );\r\n                    }\r\n\r\n                    if ( options.advance_matching_url.advance_matching_ln_names.includes( key ) ) {\r\n                        Utils.saveAdvancedFormData( null, null, null, value.trim(), override );\r\n                    }\r\n\r\n                    if ( options.advance_matching_url.advance_matching_tel_names.includes( key ) ) {\r\n                        Utils.saveAdvancedFormData( null, value.trim(), null, null, override );\r\n                    }\r\n\r\n                    if ( options.advance_matching_url.advance_matching_em_names.includes( key ) ) {\r\n                        let email = value.trim().toLowerCase()\r\n                        if ( Utils.validateEmail( email ) ) {\r\n                            Utils.saveAdvancedFormData( email, null, null, null, override );\r\n                        }\r\n                    }\r\n                } );\r\n            }\r\n        }\r\n\r\n        // setup Click Event\r\n        if (\r\n            options.dynamicEvents.hasOwnProperty(\"automatic_event_internal_link\") ||\r\n            options.dynamicEvents.hasOwnProperty(\"automatic_event_outbound_link\") ||\r\n            options.dynamicEvents.hasOwnProperty(\"automatic_event_tel_link\") ||\r\n            options.dynamicEvents.hasOwnProperty(\"automatic_event_email_link\") ||\r\n            options.dynamicEvents.hasOwnProperty(\"automatic_event_download\")\r\n        ) {\r\n\r\n            $(document).onFirst('click', 'a, button, input[type=\"button\"], input[type=\"submit\"]', function (e) {\r\n\r\n                var $elem = $(this);\r\n\r\n\r\n                // Download\r\n                if(options.dynamicEvents.hasOwnProperty(\"automatic_event_download\")) {\r\n                    var isFired = false;\r\n                    if ($elem.is('a')) {\r\n                        var href = $elem.attr('href');\r\n                        if (typeof href !== \"string\") {\r\n                            return;\r\n                        }\r\n                        href = href.trim();\r\n                        var extension = Utils.getLinkExtension(href);\r\n                        var track_download = false;\r\n\r\n                        if (extension.length > 0) {\r\n\r\n                            if(options.dynamicEvents.hasOwnProperty(\"automatic_event_download\") ) {\r\n                                var pixels = Object.keys(options.dynamicEvents.automatic_event_download);\r\n                                for (var i = 0; i < pixels.length; i++) {\r\n                                    var event = Utils.clone(options.dynamicEvents.automatic_event_download[pixels[i]]);\r\n                                    var extensions = event.extensions;\r\n                                    if (extensions.includes(extension)) {\r\n\r\n                                        if(pixels[i] == \"tiktok\") {\r\n                                            getPixelBySlag(pixels[i]).fireEvent(event.name, event);\r\n                                        } else {\r\n                                            if (options.enable_remove_download_url_param) {\r\n                                                href = href.split('?')[0];\r\n                                            }\r\n                                            event.params.download_url = href;\r\n                                            event.params.download_type = extension;\r\n                                            event.params.download_name = Utils.getLinkFilename(href);\r\n                                            getPixelBySlag(pixels[i]).onDownloadEvent(event);\r\n                                        }\r\n\r\n                                        isFired = true;\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    if(isFired) { // prevent duplicate events on the same element\r\n                        return;\r\n                    }\r\n                }\r\n\r\n\r\n                if (!e.hasOwnProperty('originalEvent')) {\r\n                    return;\r\n                }\r\n                if($elem.hasClass(\"add_to_cart_button\") ||\r\n                    $elem.hasClass(\"single_add_to_cart_button\") ) { // add_to_cart_button fire in woo\r\n                    return;\r\n                }\r\n\r\n                if(options.dynamicEvents.hasOwnProperty(\"wcf_add_to_cart_on_next_step_click\")\r\n                    && $elem.hasClass(\"wcf-next-step-link\")) {\r\n                    return;// add_to_cart_button fire in woo cf\r\n                }\r\n                if(options.dynamicEvents.hasOwnProperty(\"wcf_add_to_cart_on_bump_click\")\r\n                    && $elem.hasClass(\"wcf-bump-order-cb\")) {\r\n                    return;// add_to_cart_button fire in woo cf\r\n                }\r\n\r\n                if($elem.hasClass(\"remove_from_cart_button\") ) { // cancel remove from cart\r\n                    return;\r\n                }\r\n                if($elem.hasClass(\"remove\") ) { // cancel remove from cart\r\n                    if($elem.parents('.cart_item').length || $elem.parents('.mini_cart_item').length)\r\n                        return;\r\n                }\r\n                if($elem.attr(\"name\") == \"update_cart\" || $elem.attr(\"name\") == \"apply_coupon\") { // cancel update  cart or coupon button\r\n                    return;\r\n                }\r\n\r\n\r\n                if ($elem.hasClass('pys_block')) {\r\n                    return; // avoiding fake double clicks from Affiliate event\r\n                }\r\n                var text = \"\";\r\n                var target_url = \"\";\r\n                var linkType = \"Internal Click\";\r\n\r\n                if ($elem.is('a')) {\r\n                    var href = $elem.attr('href');\r\n\r\n                    // fixes #112\r\n                    if (typeof href !== \"string\") {\r\n                        return;\r\n                    }\r\n                    href = href.trim();\r\n\r\n                    text = $elem.contents().filter(function() {\r\n                        return this.nodeType === 3; // Ð¤Ð¸Ð»ÑŒÑ‚Ñ€ÑƒÐµÐ¼ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ‚ÐµÐºÑÑ‚Ð¾Ð²Ñ‹Ðµ ÑƒÐ·Ð»Ñ‹\r\n                    }).text().trim();\r\n                    if(options.enable_remove_target_url_param) {\r\n                        target_url = href.split('?')[0];\r\n                    } else {\r\n                        target_url = href\r\n                    }\r\n\r\n\r\n                    //Email Event\r\n                    if ( href.startsWith( 'mailto:' ) ) {\r\n                        if ( options.triggerEventTypes.hasOwnProperty( \"email_link\" ) ) {\r\n                            return;\r\n                        } else {\r\n                            setupEmailLinks();\r\n                        }\r\n\r\n                        return; // not fire next\r\n                    }\r\n\r\n                    // Phone\r\n                    if (href.startsWith('tel:')) {\r\n                        if(options.dynamicEvents.hasOwnProperty(\"automatic_event_tel_link\")) {\r\n                            var pixels = Object.keys(options.dynamicEvents.automatic_event_tel_link);\r\n                            for(var i = 0;i<pixels.length;i++) {\r\n                                var event = Utils.clone(options.dynamicEvents.automatic_event_tel_link[pixels[i]]);\r\n                                if ( pixels[i] !== 'tiktok') {\r\n                                    Utils.copyProperties(Utils.getRequestParams(), event.params);\r\n                                }\r\n                                getPixelBySlag(pixels[i]).fireEvent(event.name, event);\r\n                            }\r\n                        }\r\n                        return; // not fire next\r\n                    }\r\n\r\n                    if (href.startsWith('http')) {\r\n                        // link type\r\n                        var host = $elem.context != undefined ? $elem.context.host : $elem[0].host;\r\n                        if (document.location.host != host) {\r\n                            linkType = 'External Click';\r\n                        }\r\n                    }\r\n                } else if ($elem.is('button')) {\r\n                    if( $elem.hasClass(\"forminator-button-submit\")) {\r\n                        //disable duplicate events\r\n                        return;\r\n                    }\r\n                    text = $elem.contents().filter(function() {\r\n                        return this.nodeType === 3; // Ð¤Ð¸Ð»ÑŒÑ‚Ñ€ÑƒÐµÐ¼ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ‚ÐµÐºÑÑ‚Ð¾Ð²Ñ‹Ðµ ÑƒÐ·Ð»Ñ‹\r\n                    }).text().trim();\r\n                } else if ($elem.is('input[type=\"button\"]')) {\r\n                    text = $elem.val();\r\n                } else if ($elem.is('input[type=\"submit\"]')) {\r\n                    if ( $elem.parents(\"form.comment-form\")) {\r\n                        //disable duplicate events\r\n                        return;\r\n                    }\r\n                    if ($elem.parents(\"form\")) {\r\n                        //disable duplicate events\r\n                        return;\r\n                    }\r\n                    text = $elem.val();\r\n                } else {\r\n                    return;\r\n                }\r\n\r\n\r\n\r\n                text = Utils.filterEmails(text);\r\n\r\n\r\n                if( linkType === \"Internal Click\"\r\n                    && options.dynamicEvents.hasOwnProperty(\"automatic_event_internal_link\")\r\n                ) {\r\n                    var pixels = Object.keys(options.dynamicEvents.automatic_event_internal_link);\r\n\r\n                    for(var i = 0;i<pixels.length;i++) {\r\n                        var event = Utils.clone(options.dynamicEvents.automatic_event_internal_link[pixels[i]]);\r\n\r\n                        if(pixels[i] !== \"tiktok\") { // TT doesn't support custom parameters\r\n                            event.params[\"text\"] = text;\r\n                            if(target_url){\r\n                                event.params[\"target_url\"] = target_url;\r\n                            }\r\n                            Utils.copyProperties(Utils.getRequestParams(), event.params);\r\n                        }\r\n\r\n\r\n                        getPixelBySlag(pixels[i]).fireEvent(event.name, event);\r\n                    }\r\n                }\r\n\r\n                if( linkType === \"External Click\"\r\n                    && options.dynamicEvents.hasOwnProperty(\"automatic_event_outbound_link\")\r\n                ) {\r\n                    var pixels = Object.keys(options.dynamicEvents.automatic_event_outbound_link);\r\n\r\n                    for(var i = 0;i<pixels.length;i++) {\r\n                        var event = Utils.clone(options.dynamicEvents.automatic_event_outbound_link[pixels[i]]);\r\n\r\n                        if(pixels[i] !== \"tiktok\") { // TT doesn't support custom parameters\r\n                            event.params[\"text\"] = text;\r\n                            if(target_url){\r\n                                event.params[\"target_url\"] = target_url;\r\n                            }\r\n                            Utils.copyProperties(Utils.getRequestParams(), event.params);\r\n                        }\r\n\r\n\r\n                        getPixelBySlag(pixels[i]).fireEvent(event.name, event);\r\n                    }\r\n                }\r\n\r\n\r\n\r\n\r\n            });\r\n\r\n        }\r\n\r\n        // setup AdSense Event\r\n        if (options.dynamicEvents.hasOwnProperty(\"automatic_event_adsense\")) {\r\n\r\n            var isOverGoogleAd = false;\r\n\r\n            $(document)\r\n                .on('mouseover', 'ins iframe', function () { //class adsbygoogle adsbygoogle-noablate ??\r\n                    isOverGoogleAd = true;\r\n                })\r\n                .on('mouseout', 'iframe', function () {\r\n                    isOverGoogleAd = false;\r\n                });\r\n\r\n            $(window)\r\n                .on( \"blur\",function () {\r\n                    if (isOverGoogleAd) {\r\n                        console.log('automatic_event_adsense')\r\n                        if(options.dynamicEvents.hasOwnProperty(\"automatic_event_adsense\")) {\r\n                            var pixels = Object.keys(options.dynamicEvents.automatic_event_adsense);\r\n                            for (var i = 0; i < pixels.length; i++) {\r\n                                var event = Utils.clone(options.dynamicEvents.automatic_event_adsense[pixels[i]]);\r\n                                if ( pixels[i] !== 'tiktok') {\r\n                                    Utils.copyProperties(Utils.getRequestParams(), event.params);\r\n                                }\r\n                                getPixelBySlag(pixels[i]).onAdSenseEvent(event);\r\n                            }\r\n                        }\r\n\r\n                        $.each(options.triggerEventTypes, function (triggerType, events) {\r\n                            $.each(events, function (eventId, triggers) {\r\n                                switch (triggerType) {\r\n                                    case 'ad_sense_click':\r\n                                        Utils.fireTriggerEvent(eventId);\r\n                                        break;\r\n                                }\r\n                            });\r\n                        });\r\n                    }\r\n                })\r\n                .trigger(\"focus\");\r\n\r\n        }\r\n\r\n        //setup adsense for custom events\r\n        var dynamicAdsenseEventsTriggers = 0\r\n        $.each(options.triggerEventTypes, function (triggerType, events) {\r\n            if(triggerType == \"ad_sense_click\") {\r\n                dynamicAdsenseEventsTriggers++;\r\n            }\r\n        });\r\n        if (dynamicAdsenseEventsTriggers > 0) {\r\n\r\n            var isOverGoogleAd = false;\r\n\r\n            $(document)\r\n                .on('mouseover', 'ins > ins > iframe', function () {\r\n                    isOverGoogleAd = true;\r\n                })\r\n                .on('mouseout', 'iframe', function () {\r\n                    isOverGoogleAd = false;\r\n                });\r\n\r\n            $(window)\r\n                .on( \"blur\",function () {\r\n                    if (isOverGoogleAd) {\r\n\r\n                        $.each(options.triggerEventTypes, function (triggerType, events) {\r\n                            $.each(events, function (eventId, triggers) {\r\n                                switch (triggerType) {\r\n                                    case 'ad_sense_click':\r\n                                        Utils.fireTriggerEvent(eventId);\r\n                                        break;\r\n                                }\r\n                            });\r\n                        });\r\n                    }\r\n                })\r\n                .trigger(\"focus\");\r\n\r\n        }\r\n\r\n\r\n        // page scroll event\r\n        if (options.dynamicEvents.hasOwnProperty(\"automatic_event_scroll\")\r\n        ) {\r\n\r\n            var singlePageScroll = function () {\r\n\r\n\r\n                var docHeight = $(document).height() - $(window).height();\r\n                var isFired = false;\r\n\r\n                if (options.dynamicEvents.hasOwnProperty(\"automatic_event_scroll\")) {\r\n                    var pixels = Object.keys(options.dynamicEvents.automatic_event_scroll);\r\n                    for(var i = 0;i<pixels.length;i++) {\r\n                        var event = Utils.clone(options.dynamicEvents.automatic_event_scroll[pixels[i]]);\r\n                        var scroll = Math.round(docHeight * event.scroll_percent / 100)// convert % to absolute positions\r\n\r\n                        if(scroll < $(window).scrollTop()) {\r\n                            if ( pixels[i] !== 'tiktok') {\r\n                                Utils.copyProperties(Utils.getRequestParams(), event.params);\r\n                            }\r\n                            getPixelBySlag(pixels[i]).onPageScroll(event);\r\n                            isFired = true\r\n                        }\r\n                    }\r\n                }\r\n                if(isFired) {\r\n                    $(document).off(\"scroll\",singlePageScroll);\r\n                }\r\n            }\r\n            $(document).on(\"scroll\",singlePageScroll);\r\n        }\r\n\r\n\r\n        if (options.dynamicEvents.hasOwnProperty(\"automatic_event_time_on_page\")) {\r\n            var pixels = Object.keys(options.dynamicEvents.automatic_event_time_on_page);\r\n            var time = options.dynamicEvents.automatic_event_time_on_page[pixels[0]].time_on_page; // the same for all pixel\r\n            setTimeout(function(){\r\n                for(var i = 0;i<pixels.length;i++) {\r\n                    var event = Utils.clone(options.dynamicEvents.automatic_event_time_on_page[pixels[i]]);\r\n                    if ( pixels[i] !== 'tiktok') {\r\n                        Utils.copyProperties(Utils.getRequestParams(), event.params);\r\n                    }\r\n                    getPixelBySlag(pixels[i]).onTime(event);\r\n                }\r\n            },time*1000);\r\n        }\r\n\r\n        // setup Dynamic events\r\n\r\n        $.each(options.triggerEventTypes, function (triggerType, events) {\r\n\r\n            $.each(events, function (eventId, triggers) {\r\n                switch (triggerType) {\r\n                    case 'url_click':\r\n                        //@see: Utils.setupURLClickEvents()\r\n                        break;\r\n\r\n                    case 'css_click':\r\n                        Utils.setupCSSClickEvents(eventId, triggers);\r\n                        break;\r\n\r\n                    case 'css_mouseover':\r\n                        Utils.setupMouseOverClickEvents(eventId, triggers);\r\n                        break;\r\n\r\n                    case 'scroll_pos':\r\n                        Utils.setupScrollPosEvents(eventId, triggers);\r\n                        break;\r\n                    case 'comment':\r\n                        Utils.setupCommentEvents(eventId, triggers);\r\n                        break;\r\n                    case 'video_view':\r\n                        //@see: Utils.checkYouTubeCompletion() and Utils.addYouTubeEvents()\r\n                        break;\r\n                }\r\n\r\n            });\r\n\r\n            if ( triggerType == \"email_link\" ) {\r\n                Utils.setupEmailLinkEvents( events )\r\n            }\r\n\r\n        });\r\n\r\n        // setup WooCommerce events\r\n        if (options.woo.enabled) {\r\n\r\n            // Woo CartFlow AddToCart\r\n            if (options.dynamicEvents.hasOwnProperty(\"wcf_add_to_cart_on_next_step_click\")) {\r\n                $(\"body\").on(\"click\",'.wcf-next-step-link',function () {\r\n                    var pixels = Object.keys(options.dynamicEvents.wcf_add_to_cart_on_next_step_click);\r\n                    for(var i = 0;i<pixels.length;i++) {\r\n                        var event = Utils.clone(options.dynamicEvents.wcf_add_to_cart_on_next_step_click[pixels[i]])\r\n                        getPixelBySlag(pixels[i]).fireEvent(event.name, event);\r\n                    }\r\n                });\r\n            }\r\n            // Woo CartFlow Bump AddToCart\r\n            if(options.dynamicEvents.hasOwnProperty(\"wcf_add_to_cart_on_bump_click\") ||\r\n                options.dynamicEvents.hasOwnProperty(\"wcf_bump\")) {\r\n                $(\"body\").on('change','.wcf-bump-order-cb',function () {\r\n\r\n                    if(this.checked) {\r\n                        if(options.dynamicEvents.hasOwnProperty(\"wcf_add_to_cart_on_bump_click\")) {\r\n                            var pixels = Object.keys(options.dynamicEvents.wcf_add_to_cart_on_bump_click);\r\n                            for(var i = 0;i<pixels.length;i++) {\r\n                                var event = Utils.clone(options.dynamicEvents.wcf_add_to_cart_on_bump_click[pixels[i]]);\r\n                                getPixelBySlag(pixels[i]).fireEvent(event.name, event);\r\n                            }\r\n                        }\r\n\r\n\r\n                        if(options.dynamicEvents.hasOwnProperty(\"wcf_bump\")) {\r\n                            var pixels = Object.keys(options.dynamicEvents.wcf_bump);\r\n                            for(var i = 0;i<pixels.length;i++) {\r\n                                var event = Utils.clone(options.dynamicEvents.wcf_bump[pixels[i]]);\r\n                                getPixelBySlag(pixels[i]).fireEvent(event.name, event);\r\n                            }\r\n                        }\r\n\r\n                    } else {\r\n                        if(options.dynamicEvents.hasOwnProperty(\"wcf_remove_from_cart_on_bump_click\")) {\r\n                            var pixels = Object.keys(options.dynamicEvents.wcf_remove_from_cart_on_bump_click);\r\n                            for(var i = 0;i<pixels.length;i++) {\r\n                                var event = Utils.clone(options.dynamicEvents.wcf_remove_from_cart_on_bump_click[pixels[i]]);\r\n                                getPixelBySlag(pixels[i]).fireEvent(event.name, event);\r\n                            }\r\n                        }\r\n\r\n                    }\r\n\r\n\r\n                });\r\n            }\r\n\r\n\r\n            // WooCommerce AddToCart\r\n            if (options.dynamicEvents.hasOwnProperty(\"woo_add_to_cart_on_button_click\")\r\n                && options.woo.hasOwnProperty(\"addToCartCatchMethod\")\r\n                && options.woo.addToCartCatchMethod === \"add_cart_js\"\r\n            ) {\r\n                // Loop, any kind of \"simple\" product, except external\r\n                $('.add_to_cart_button:not(.product_type_variable,.product_type_bundle,.single_add_to_cart_button)').on(\"click\",function (e) {\r\n\r\n                    var $button = $(this);\r\n                    var $prod_info = $button.siblings('.pys_list_name_productdata').data();\r\n                    var product_id = $(this).data('product_id');\r\n                    Cookies.set('productlist', JSON.stringify($prod_info), { expires: 1,path: '/' })\r\n                    var product_id = $(this).data('product_id');\r\n                    if (typeof product_id !== 'undefined') {\r\n\r\n                        if(options.dynamicEvents.hasOwnProperty(\"woo_add_to_cart_on_button_click\")){\r\n                            var tmpEventID = pys_generate_token();\r\n                            $.each(options.dynamicEvents.woo_add_to_cart_on_button_click, function (i, tag) {\r\n                                tag.eventID = tmpEventID;\r\n                            });\r\n                        }\r\n\r\n                        Facebook.onWooAddToCartOnButtonEvent(product_id,$(this));\r\n                        Analytics.onWooAddToCartOnButtonEvent(product_id, $prod_info);\r\n                        GTM.onWooAddToCartOnButtonEvent(product_id, $prod_info);\r\n                        GAds.onWooAddToCartOnButtonEvent(product_id);\r\n                        Pinterest.onWooAddToCartOnButtonEvent(product_id);\r\n                        Bing.onWooAddToCartOnButtonEvent(product_id);\r\n                        TikTok.onWooAddToCartOnButtonEvent(product_id);\r\n                    }\r\n\r\n                });\r\n\r\n                // Single Product\r\n                // tap try to https://stackoverflow.com/questions/30990967/on-tap-click-event-firing-twice-how-to-avoid-it\r\n                //  $(document) not work\r\n                $('body').onFirst('click','button.single_add_to_cart_button,.single_add_to_cart_button',function (e) {\r\n\r\n                    var $button = $(this);\r\n                    var $prod_info = $button.siblings('.pys_list_name_productdata').data();\r\n                    var product_id = $(this).data('product_id');\r\n                    Cookies.set('productlist', JSON.stringify($prod_info), { expires: 1,path: '/' })\r\n                    if ($button.hasClass('disabled')) {\r\n                        return;\r\n                    }\r\n\r\n                    var $form = $button.closest('form');\r\n\r\n                    var product_type = Utils.PRODUCT_SIMPLE;\r\n                    var is_external = false;\r\n\r\n                    if ($form.length === 0) {\r\n                        is_external = true;\r\n                    } else if ($form.hasClass('variations_form')) {\r\n                        product_type = Utils.PRODUCT_VARIABLE;\r\n                    } else if($form.hasClass('bundle_form')) {\r\n                        product_type = Utils.PRODUCT_BUNDLE;\r\n                    } else if($form.hasClass('grouped_form')) {\r\n                        product_type = Utils.PRODUCT_GROUPED;\r\n                    }\r\n\r\n\r\n\r\n                    var product_id;\r\n                    var qty;\r\n                    if (product_type === Utils.PRODUCT_GROUPED) {\r\n                        qty = 1;\r\n                        product_id = parseInt($form.find('*[name=\"add-to-cart\"]').val());\r\n                    } else if (product_type === Utils.PRODUCT_VARIABLE) {\r\n                        product_id = parseInt($form.find('*[name=\"add-to-cart\"]').val());\r\n                        var qtyTag = $form.find('input[name=\"quantity\"]');\r\n                        if(qtyTag.length <= 0) {\r\n                            qtyTag = $form.find('select[name=\"quantity\"]');\r\n                        }\r\n                        qty = parseInt(qtyTag.val());\r\n                    } else if (is_external) {\r\n                        product_id = options.woo.singleProductId;\r\n                        qty = 1;\r\n                    } else {\r\n                        product_id = parseInt($form.find('*[name=\"add-to-cart\"]').val());\r\n                        var qtyTag = $form.find('input[name=\"quantity\"]');\r\n                        if(qtyTag.length <= 0) {\r\n                            qtyTag = $form.find('select[name=\"quantity\"]');\r\n                        }\r\n                        qty = parseInt(qtyTag.val());\r\n                    }\r\n\r\n                    //\r\n                    if(options.dynamicEvents.hasOwnProperty(\"woo_add_to_cart_on_button_click\")){\r\n                        var tmpEventID = pys_generate_token();\r\n                        $.each(options.dynamicEvents.woo_add_to_cart_on_button_click, function (i, tag) {\r\n                            tag.eventID = tmpEventID;\r\n                        });\r\n                    }\r\n\r\n                    Facebook.onWooAddToCartOnSingleEvent(product_id, qty, product_type, is_external, $form);\r\n                    Analytics.onWooAddToCartOnSingleEvent(product_id, qty, product_type, is_external, $form, $prod_info);\r\n                    GTM.onWooAddToCartOnSingleEvent(product_id, qty, product_type, is_external, $form, $prod_info);\r\n                    GAds.onWooAddToCartOnSingleEvent(product_id, qty, product_type, is_external, $form);\r\n                    Pinterest.onWooAddToCartOnSingleEvent(product_id, qty, product_type, is_external, $form);\r\n                    Bing.onWooAddToCartOnSingleEvent(product_id, qty, product_type, is_external, $form);\r\n                    TikTok.onWooAddToCartOnSingleEvent(product_id, qty, product_type, is_external, $form);\r\n                });\r\n\r\n            } else {\r\n                $('.add_to_cart_button:not(.product_type_variable,.product_type_bundle,.single_add_to_cart_button)').on(\"click\",function (e) {\r\n                    var $button = $(this);\r\n                    var $prod_info = $button.siblings('.pys_list_name_productdata').data();\r\n                    var product_id = $(this).data('product_id');\r\n                    Cookies.set('productlist', JSON.stringify($prod_info), { expires: 1,path: '/' })\r\n                });\r\n\r\n                // Single Product\r\n                // tap try to https://stackoverflow.com/questions/30990967/on-tap-click-event-firing-twice-how-to-avoid-it\r\n                //  $(document) not work\r\n                $('body').onFirst('click','button.single_add_to_cart_button,.single_add_to_cart_button',function (e) {\r\n\r\n                    var $button = $(this);\r\n                    var $prod_info = $button.siblings('.pys_list_name_productdata').data();\r\n                    Cookies.set('productlist', $prod_info, { expires: 1,path: '/' })\r\n                });\r\n            }\r\n\r\n            // WooCommerce Affiliate\r\n            if (options.dynamicEvents.hasOwnProperty(\"woo_affiliate\")) {\r\n\r\n                // Loop, external\r\n                $('.product_type_external').on(\"click\",function (e) {\r\n\r\n                    var product_id = $(this).data('product_id');\r\n\r\n                    if (typeof product_id !== 'undefined') {\r\n                        Facebook.onWooAffiliateEvent(product_id);\r\n                        Analytics.onWooAffiliateEvent(product_id);\r\n                        GTM.onWooAffiliateEvent(product_id);\r\n                        GAds.onWooAffiliateEvent(product_id);\r\n                        Pinterest.onWooAffiliateEvent(product_id);\r\n                        Bing.onWooAffiliateEvent(product_id);\r\n                    }\r\n\r\n                });\r\n\r\n            }\r\n\r\n            // WooCommerce RemoveFromCart\r\n            if (options.dynamicEvents.hasOwnProperty(\"woo_remove_from_cart\")) {\r\n\r\n                $('body').on('click', options.woo.removeFromCartSelector, function (e) {\r\n\r\n                    var $a = $(e.currentTarget),\r\n                        href = $a.attr('href');\r\n\r\n                    // extract cart item hash from remove button URL\r\n                    var regex = new RegExp(\"[\\\\?&]remove_item=([^&#]*)\"),\r\n                        results = regex.exec(href);\r\n\r\n                    if (results !== null) {\r\n\r\n                        var item_hash = results[1];\r\n\r\n                        if (options.dynamicEvents[\"woo_remove_from_cart\"].hasOwnProperty(item_hash)) {\r\n                            var events = options.dynamicEvents[\"woo_remove_from_cart\"][item_hash];\r\n                            Utils.fireEventForAllPixel(\"onWooRemoveFromCartEvent\",events)\r\n                        }\r\n\r\n                    }\r\n\r\n                });\r\n\r\n            }\r\n\r\n            // WooCommerce PayPal\r\n            if (options.dynamicEvents.hasOwnProperty(\"woo_paypal\")) {\r\n\r\n                // Non-default binding used to avoid situations when some code in external js\r\n                // stopping events propagation, eg. returns false, and our handler will never called\r\n                $(document).onFirst('submit click', '#place_order', function (e) {\r\n\r\n                    var method = $('form[name=\"checkout\"] input[name=\"payment_method\"]:checked').val();\r\n\r\n                    if (method !== 'paypal') {\r\n                        return;\r\n                    }\r\n                    var events = options.dynamicEvents.woo_paypal;\r\n                    Utils.fireEventForAllPixel(\"onWooPayPalEvent\",events)\r\n\r\n                });\r\n\r\n            }\r\n\r\n            // WooCommerce checkout progress\r\n            if(options.dynamicEvents.hasOwnProperty(\"woo_initiate_checkout_progress_f\") ) {\r\n\r\n                $(document).on(\"change\",\".woocommerce-validated #billing_first_name\",function () {\r\n                    Analytics.onWooCheckoutProgressStep(options.dynamicEvents.woo_initiate_checkout_progress_f[Analytics.tag()]);\r\n                });\r\n            }\r\n            if(options.dynamicEvents.hasOwnProperty(\"woo_initiate_checkout_progress_l\")) {\r\n\r\n                $(document).on(\"change\",\".woocommerce-validated #billing_last_name\",function () {\r\n                    Analytics.onWooCheckoutProgressStep(options.dynamicEvents.woo_initiate_checkout_progress_l[Analytics.tag()]);\r\n                });\r\n            }\r\n\r\n            if(options.dynamicEvents.hasOwnProperty(\"woo_initiate_checkout_progress_e\")) {\r\n\r\n                $(document).on(\"change\",\".woocommerce-validated #billing_email\",function () {\r\n                    Analytics.onWooCheckoutProgressStep(options.dynamicEvents.woo_initiate_checkout_progress_e[Analytics.tag()]);\r\n                });\r\n            }\r\n            if(options.dynamicEvents.hasOwnProperty(\"woo_initiate_checkout_progress_o\")) {\r\n                $(document).onFirst('submit click', '#place_order', function () {\r\n                    Analytics.onWooCheckoutProgressStep(options.dynamicEvents.woo_initiate_checkout_progress_o[Analytics.tag()]);\r\n                });\r\n            }\r\n\r\n\r\n            // WooCommerce\r\n\r\n            $('.product.type-product a.woocommerce-loop-product__link').onFirst('click', function (evt) {\r\n                var productId = $(this).closest('.product').find(\".add_to_cart_button\").attr(\"data-product_id\");\r\n                var eventTypes = [\"woo_select_content_search\", \"woo_select_content_shop\", \"woo_select_content_tag\", \"woo_select_content_single\", \"woo_select_content_category\"];\r\n                var isEventFired = false;\r\n\r\n                for (var i = 0; i < eventTypes.length; i++) {\r\n                    var eventType = eventTypes[i];\r\n                    if (options.dynamicEvents.hasOwnProperty(eventType) && options.dynamicEvents[eventType].hasOwnProperty(productId)) {\r\n                        if(Analytics.isEnabled()){\r\n                            Analytics.onWooSelectContent(options.dynamicEvents[eventType][productId][Analytics.tag()]);\r\n                        }\r\n                        if(GTM.isEnabled()){\r\n                            GTM.onWooSelectContent(options.dynamicEvents[eventType][productId][GTM.tag()]);\r\n                        }\r\n                        isEventFired = true;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                if (!isEventFired) {\r\n                    let prod_info = $(this).parent().find('.pys_list_name_productdata').data();\r\n                    if (prod_info) {\r\n                        const select_prod_list = {};\r\n                        if (prod_info['pys_list_name_productlist_name']) {\r\n                            select_prod_list.list_name = prod_info['pys_list_name_productlist_name']\r\n                        }\r\n                        if (prod_info['pys_list_name_productlist_id']) {\r\n                            select_prod_list.list_id = prod_info['pys_list_name_productlist_id']\r\n                        }\r\n                        const url = new URL(window.location.href);\r\n                        select_prod_list.url = url.origin + url.pathname;\r\n                        Cookies.set('select_prod_list', JSON.stringify(select_prod_list), { expires: 1,path: '/' });\r\n                    }\r\n                }\r\n            });\r\n\r\n        }\r\n\r\n        // setup EDD events\r\n        if (options.edd.enabled) {\r\n\r\n            // EDD AddToCart\r\n            if (options.dynamicEvents.hasOwnProperty(\"edd_add_to_cart_on_button_click\")) {\r\n\r\n                $('form.edd_download_purchase_form .edd-add-to-cart').on(\"click\",function (e) {\r\n\r\n                    var $button = $(this);\r\n                    var $form = $button.closest('form');\r\n                    var variable_price = $button.data('variablePrice'); // yes/no\r\n                    var price_mode = $button.data('priceMode'); // single/multi\r\n                    var ids = [];\r\n                    var quantities = [];\r\n                    var qty;\r\n                    var id;\r\n\r\n                    if (variable_price === 'yes' && price_mode === 'multi') {\r\n\r\n                        id = $form.find('input[name=\"download_id\"]').val();\r\n\r\n                        // get selected variants\r\n                        $.each($form.find('input[name=\"edd_options[price_id][]\"]:checked'), function (i, el) {\r\n                            ids.push(id + '_' + $(el).val());\r\n                        });\r\n\r\n                        // get qty for selected variants\r\n                        $.each(ids, function (i, variant_id) {\r\n\r\n                            var variant_index = variant_id.split('_', 2);\r\n                            qty = $form.find('input[name=\"edd_download_quantity_' + variant_index[1] + '\"]').val();\r\n\r\n                            if (typeof qty !== 'undefined') {\r\n                                quantities.push(qty);\r\n                            } else {\r\n                                quantities.push(1);\r\n                            }\r\n\r\n                        });\r\n\r\n                    } else if (variable_price === 'yes' && price_mode === 'single') {\r\n\r\n                        id = $form.find('input[name=\"download_id\"]').val();\r\n                        ids.push(id + '_' + $form.find('input[name=\"edd_options[price_id][]\"]:checked').val());\r\n\r\n                        qty = $form.find('input[name=\"edd_download_quantity\"]').val();\r\n\r\n                        if (typeof qty !== 'undefined') {\r\n                            quantities.push(qty);\r\n                        } else {\r\n                            quantities.push(1);\r\n                        }\r\n\r\n                    } else {\r\n\r\n                        ids.push($button.data('downloadId'));\r\n\r\n                        qty = $form.find('input[name=\"edd_download_quantity\"]').val();\r\n\r\n                        if (typeof qty !== 'undefined') {\r\n                            quantities.push(qty);\r\n                        } else {\r\n                            quantities.push(1);\r\n                        }\r\n                    }\r\n\r\n                    // fire event for each download/variant\r\n                    $.each(ids, function (i, download_id) {\r\n\r\n                        var q = parseInt(quantities[i]);\r\n                        var variant_index = download_id.toString().split('_', 2);\r\n                        var price_index;\r\n\r\n                        if (variant_index.length === 2) {\r\n                            download_id = variant_index[0];\r\n                            price_index = variant_index[1];\r\n                        }\r\n\r\n                        Facebook.onEddAddToCartOnButtonEvent(download_id, price_index, q);\r\n                        Analytics.onEddAddToCartOnButtonEvent(download_id, price_index, q);\r\n                        GTM.onEddAddToCartOnButtonEvent(download_id, price_index, q);\r\n                        GAds.onEddAddToCartOnButtonEvent(download_id, price_index, q);\r\n                        Pinterest.onEddAddToCartOnButtonEvent(download_id, price_index, q);\r\n                        Bing.onEddAddToCartOnButtonEvent(download_id, price_index, q);\r\n                        TikTok.onEddAddToCartOnButtonEvent(download_id, price_index, q);\r\n\r\n                    });\r\n\r\n                });\r\n\r\n            }\r\n\r\n            // EDD RemoveFromCart\r\n            if (options.dynamicEvents.hasOwnProperty(\"edd_remove_from_cart\") ) {\r\n\r\n                $('form#edd_checkout_cart_form .edd_cart_remove_item_btn').on(\"click\",function (e) {\r\n\r\n                    var href = $(this).attr('href');\r\n                    var key = href.substring(href.indexOf('=') + 1).charAt(0);\r\n\r\n                    if (options.dynamicEvents.edd_remove_from_cart.hasOwnProperty(key)) {\r\n                        var events = options.dynamicEvents.edd_remove_from_cart[key];\r\n                        Utils.fireEventForAllPixel(\"onEddRemoveFromCartEvent\",events)\r\n                    }\r\n\r\n                });\r\n\r\n            }\r\n\r\n        }\r\n\r\n        Utils.setupURLClickEvents();\r\n\r\n        // setup Comment Event\r\n        if (options.dynamicEvents.hasOwnProperty(\"automatic_event_comment\")\r\n        ) {\r\n\r\n            $('form.comment-form').on(\"submit\",function () {\r\n                if (options.dynamicEvents.hasOwnProperty(\"automatic_event_comment\")) {\r\n                    var pixels = Object.keys(options.dynamicEvents.automatic_event_comment);\r\n                    for (var i = 0; i < pixels.length; i++) {\r\n                        var event = Utils.clone(options.dynamicEvents.automatic_event_comment[pixels[i]]);\r\n                        if ( pixels[i] !== 'tiktok') {\r\n                            Utils.copyProperties(Utils.getRequestParams(), event.params);\r\n                        }\r\n                        getPixelBySlag(pixels[i]).onCommentEvent(event);\r\n                    }\r\n                }\r\n            });\r\n\r\n        }\r\n\r\n        // setup Form Event\r\n        if ( options.dynamicEvents.hasOwnProperty(\"automatic_event_form\")) {\r\n\r\n            $(document).onFirst('submit', 'form', function (e) {\r\n\r\n                var $form = $(this);\r\n\r\n                // exclude WP forms\r\n                if ($form.hasClass('comment-form') || $form.hasClass('search-form') || $form.attr('id') === 'adminbarsearch') {\r\n                    return;\r\n                }\r\n\r\n                // exclude Woo forms\r\n                if ($form.hasClass('woocommerce-product-search') || $form.hasClass('cart') || $form.hasClass('woocommerce-cart-form') ||\r\n                    $form.hasClass('woocommerce-shipping-calculator') || $form.hasClass('checkout') || $form.hasClass('checkout_coupon')) {\r\n                    return;\r\n                }\r\n\r\n                // exclude EDD forms\r\n                if ($form.hasClass('edd_form') || $form.hasClass('edd_download_purchase_form')) {\r\n                    return;\r\n                }\r\n                // exclude CF7 forms\r\n                if ($form.hasClass('wpcf7-form')) {\r\n                    return;\r\n                }\r\n                // exclude Gravity forms\r\n                if ($form.attr('id') && $form.attr('id').includes('gform')) {\r\n                    var target = $form.attr('target');\r\n                    if (target && target.indexOf('gform_ajax_frame') !== -1) {\r\n                        return;\r\n                    }\r\n                }\r\n                // exclude Forminator forms\r\n                if ($form.hasClass('forminator-custom-form') || $form.hasClass('forminator_ajax')) {\r\n                    return;\r\n                }\r\n                // exclude WPforms forms\r\n                if ($form.hasClass('wpforms-form') || $form.hasClass('wpforms-ajax-form')) {\r\n                    return;\r\n                }\r\n                // exclude Formidable forms\r\n                /*if ($form.hasClass('frm-show-form')) {\r\n                    return;\r\n                }*/\r\n                // exclude Ninja Forms forms\r\n                if ($form.parent().hasClass('nf-form-layout')) {\r\n                    return;\r\n                }\r\n                // exclude Fluent forms\r\n                if ($form.hasClass('frm-fluent-form')) {\r\n                    return;\r\n                }\r\n\r\n                // exclude WS form forms\r\n                if ($form.hasClass('wsf-form') ) {\r\n                    return;\r\n                }\r\n\r\n                // exclude WS form forms\r\n                if ( $form.hasClass( 'elementor-form' ) ) {\r\n                    return;\r\n                }\r\n\r\n                if(!options.enable_success_send_form) {\r\n                    var params = {\r\n                        form_id: $form.attr('id'),\r\n                        form_class: $form.attr('class') ? $form.attr('class') : $form.attr('id'),\r\n                        text: $form.find('[type=\"submit\"]').is('input') ?\r\n                            $form.find('[type=\"submit\"]').val() : $form.find('[type=\"submit\"]').text()\r\n                    };\r\n\r\n                    if (options.dynamicEvents.hasOwnProperty(\"automatic_event_form\")) {\r\n                        var pixels = Object.keys(options.dynamicEvents.automatic_event_form);\r\n                        for (var i = 0; i < pixels.length; i++) {\r\n                            var event = Utils.clone(options.dynamicEvents.automatic_event_form[pixels[i]]);\r\n\r\n                            if (pixels[i] === \"tiktok\") {\r\n                                getPixelBySlag(pixels[i]).fireEvent(event.name, event);\r\n                            } else {\r\n                                Utils.copyProperties(params, event.params,)\r\n                                Utils.copyProperties(Utils.getRequestParams(), event.params);\r\n                                getPixelBySlag(pixels[i]).onFormEvent(event);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n\r\n\r\n        }\r\n\r\n        jQuery(document).on('elementor/popup/show', function(event) {\r\n            for (var i = 0; i < jQuery(\".wpcf7-form\").length; i++) {\r\n                wpcf7.init(jQuery(\".wpcf7-form\")[i]);\r\n            }\r\n        });\r\n\r\n        document.addEventListener( 'wpcf7mailsent', function ( event ) {\r\n            let form_id = event.detail.contactFormId,\r\n                sendEventId = null,\r\n                disabled_form_action = false;\r\n            if ( options.triggerEventTypes.hasOwnProperty( 'CF7' ) ) {\r\n                $.each( options.triggerEventTypes.CF7, function ( eventId, triggers ) {\r\n                    $.each( triggers, function ( index, trigger ) {\r\n                        $.each( trigger.forms, function ( i, value ) {\r\n                            if ( value == form_id ) {\r\n                                sendEventId = eventId;\r\n                                disabled_form_action = trigger.disabled_form_action;\r\n                            }\r\n                        } )\r\n                    } );\r\n                } );\r\n            }\r\n            if ( sendEventId != null ) {\r\n                Utils.fireTriggerEvent( sendEventId );\r\n            }\r\n            sendFormAction( $( event.target ), form_id, sendEventId, disabled_form_action );\r\n\r\n        }, false );\r\n\r\n        //GravityForm\r\n        jQuery( document ).on( 'gform_confirmation_loaded', function ( event, formId ) {\r\n            let form_id = formId,\r\n                sendEventId = null,\r\n                disabled_form_action = false;\r\n            if ( options.triggerEventTypes.hasOwnProperty( 'gravity' ) ) {\r\n                $.each( options.triggerEventTypes.gravity, function ( eventId, triggers ) {\r\n                    $.each( triggers, function ( index, trigger ) {\r\n                        $.each( trigger.forms, function ( i, value ) {\r\n                            if ( value == form_id ) {\r\n                                disabled_form_action = trigger.disabled_form_action;\r\n                                sendEventId = eventId;\r\n                            }\r\n                        } )\r\n                    } );\r\n                } );\r\n            }\r\n\r\n            if ( sendEventId != null ) {\r\n                Utils.fireTriggerEvent( sendEventId );\r\n            }\r\n            sendFormAction( $( event.target ), form_id, sendEventId, disabled_form_action );\r\n            jQuery( document ).off( 'gform_confirmation_loaded' );\r\n        } );\r\n        //Forminator\r\n        $( document ).on( 'forminator:form:submit:success', function ( event ) {\r\n\r\n            let form_id = $( event.target ).find( 'input[name=\"form_id\"]' ).val(),\r\n                sendEventId = null,\r\n                disabled_form_action = false;\r\n            if ( options.triggerEventTypes.hasOwnProperty( 'forminator' ) ) {\r\n                $.each( options.triggerEventTypes.forminator, function ( eventId, triggers ) {\r\n                    $.each( triggers, function ( index, trigger ) {\r\n                        $.each( trigger.forms, function ( i, value ) {\r\n                            if ( value == form_id ) {\r\n                                disabled_form_action = trigger.disabled_form_action;\r\n                                sendEventId = eventId;\r\n                            }\r\n                        } )\r\n                    } );\r\n                } );\r\n            }\r\n            if ( sendEventId != null ) {\r\n                Utils.fireTriggerEvent( sendEventId );\r\n            }\r\n            sendFormAction( $( event.target ), form_id, sendEventId, disabled_form_action );\r\n        } );\r\n\r\n        //WPForm\r\n        $( 'form.wpforms-form' ).on( 'wpformsAjaxSubmitSuccess', ( event ) => {\r\n\r\n            let form_id = $( event.target ).attr( 'data-formid' ),\r\n                sendEventId = null,\r\n                disabled_form_action = false;\r\n\r\n            if ( options.triggerEventTypes.hasOwnProperty( 'wpforms' ) ) {\r\n                $.each( options.triggerEventTypes.wpforms, function ( eventId, triggers ) {\r\n                    $.each( triggers, function ( index, trigger ) {\r\n                        $.each( trigger.forms, function ( i, value ) {\r\n                            if ( value == form_id ) {\r\n                                sendEventId = eventId;\r\n                                disabled_form_action = trigger.disabled_form_action;\r\n                            }\r\n                        } )\r\n                    } );\r\n                } );\r\n            }\r\n            if ( sendEventId != null ) {\r\n                Utils.fireTriggerEvent( sendEventId );\r\n            }\r\n            sendFormAction( $( event.target ), form_id, sendEventId, disabled_form_action );\r\n        } )\r\n\r\n        $( document ).on( 'frmFormComplete', function ( event, form, response ) {\r\n            const form_id = $( form ).find( 'input[name=\"form_id\"]' ).val();\r\n            let sendEventId = null,\r\n                disabled_form_action = false;\r\n            if ( options.triggerEventTypes.hasOwnProperty( 'formidable' ) ) {\r\n                $.each( options.triggerEventTypes.formidable, function ( eventId, triggers ) {\r\n                    $.each( triggers, function ( index, trigger ) {\r\n                        $.each( trigger.forms, function ( i, value ) {\r\n                            if ( value == form_id ) {\r\n                                disabled_form_action = trigger.disabled_form_action;\r\n                                sendEventId = eventId;\r\n                            }\r\n                        } )\r\n                    } );\r\n                } );\r\n            }\r\n            if ( sendEventId != null ) {\r\n                Utils.fireTriggerEvent( sendEventId );\r\n            }\r\n            sendFormAction( $( event.target ), form_id, sendEventId, disabled_form_action );\r\n\r\n        } );\r\n\r\n        // Ninja Forms\r\n        $( document ).onFirst( 'nfFormSubmitResponse', function ( event, data ) {\r\n            const form_id = data.response.data.form_id;\r\n            let sendEventId = null,\r\n                disabled_form_action = false;\r\n            if ( options.triggerEventTypes.hasOwnProperty( 'ninjaform' ) ) {\r\n                $.each( options.triggerEventTypes.ninjaform, function ( eventId, triggers ) {\r\n                    $.each( triggers, function ( index, trigger ) {\r\n                        $.each( trigger.forms, function ( i, value ) {\r\n                            if ( value == form_id ) {\r\n                                disabled_form_action = trigger.disabled_form_action;\r\n                                sendEventId = eventId;\r\n                            }\r\n                        } )\r\n                    } );\r\n                } );\r\n            }\r\n            if ( sendEventId != null ) {\r\n                Utils.fireTriggerEvent( sendEventId );\r\n            }\r\n            sendFormAction( $( event.target ), form_id, sendEventId, disabled_form_action );\r\n        } );\r\n\r\n\r\n        $(document).on('fluentform_submission_success', function ( event, data ) {\r\n            let $form = data.form; // Submitted form\r\n            let config = data.config; // Form configuration\r\n            let response = data.response; // Server response\r\n\r\n\r\n            let $formItem = $form;\r\n            let form_id = config.id;\r\n            let sendEventId = null,\r\n                disabled_form_action = false;\r\n            if ( options.triggerEventTypes.hasOwnProperty( 'fluentform' ) ) {\r\n                $.each( options.triggerEventTypes.fluentform, function ( eventId, triggers ) {\r\n                    $.each( triggers, function ( index, trigger ) {\r\n                        $.each( trigger.forms, function ( i, value ) {\r\n                            if ( value == form_id ) {\r\n                                disabled_form_action = trigger.disabled_form_action;\r\n                                sendEventId = eventId;\r\n                            }\r\n                        } )\r\n                    } );\r\n                } );\r\n            }\r\n\r\n            if ( sendEventId != null ) {\r\n                Utils.fireTriggerEvent( sendEventId );\r\n            }\r\n            sendFormAction( $( event.target ), form_id, sendEventId, disabled_form_action );\r\n        } );\r\n\r\n        //WSForm\r\n        $( document ).on( 'wsf-submit-complete', ( event, form_object, form_id ) => {\r\n            let sendEventId = null,\r\n                disabled_form_action = false;\r\n            if ( options.triggerEventTypes.hasOwnProperty( 'wsform' ) ) {\r\n                $.each( options.triggerEventTypes.wsform, function ( eventId, triggers ) {\r\n                    $.each( triggers, function ( index, trigger ) {\r\n                        $.each( trigger.forms, function ( i, value ) {\r\n                            if ( value == form_id ) {\r\n                                disabled_form_action = trigger.disabled_form_action;\r\n                                sendEventId = eventId;\r\n                            }\r\n                        } )\r\n                    } );\r\n                } );\r\n            }\r\n\r\n            if ( sendEventId != null ) {\r\n                Utils.fireTriggerEvent( sendEventId );\r\n            }\r\n            sendFormAction( $( event.target ), form_id, sendEventId, disabled_form_action );\r\n        } )\r\n\r\n        // Elementor Forms\r\n        let forms = document.querySelectorAll( '.elementor-form' );\r\n        // Apply the observer to each form\r\n        forms.forEach( function ( form ) {\r\n            observeElementorForm( form );\r\n        } );\r\n\r\n        // watching Elementor Popup forms\r\n        let observer = new MutationObserver( function ( mutationsList, observer ) {\r\n            for ( let i = 0; i < mutationsList.length; i++ ) {\r\n                let popupForm = document.querySelector( '[class*=\"elementor-popup\"] form' );\r\n                if ( popupForm ) {\r\n                    observeElementorForm( popupForm );\r\n                    observer.disconnect();\r\n                    break;\r\n                }\r\n            }\r\n        } );\r\n        observer.observe( document.body, { childList: true, subtree: true } );\r\n\r\n        // load pixel APIs\r\n        Utils.loadPixels();\r\n\r\n        // setup Enrich content\r\n        if(Utils.isCheckoutPage()) {\r\n            Utils.addCheckoutFields();\r\n        }\r\n        if(options.woo.hasOwnProperty('woo_view_content_variation_is_selected') && options.woo.woo_view_content_variation_is_selected) {\r\n            handleWooViewContentVariation()\r\n        }\r\n\r\n    });\r\n\r\n\r\n    function handleWooViewContentVariation() {\r\n        var form = $('form.variations_form');\r\n\r\n        form.on('change', 'select', function() {\r\n            var selectedAttributes = {};\r\n            form.find('select').each(function() {\r\n                var attributeName = $(this).data('attribute_name') || $(this).attr('name');\r\n                var attributeValue = $(this).val();\r\n                if (attributeValue) {\r\n                    selectedAttributes[attributeName] = attributeValue;\r\n                }\r\n            });\r\n\r\n            $.ajax({\r\n                url: options.ajaxUrl,\r\n                type: 'POST',\r\n                data: {\r\n                    action: 'get_variation_info',\r\n                    product_id: form.data('product_id'), // ÐŸÐµÑ€ÐµÐ´Ð°ÐµÐ¼ ID Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð³Ð¾ Ñ‚Ð¾Ð²Ð°Ñ€Ð°\r\n                    attributes: selectedAttributes\r\n                },\r\n                success: function(response) {\r\n                    if (response.success) {\r\n                        $.each(response.data, function(slug) {\r\n                            $.each(response.data[slug], function(index, event) {\r\n                                getPixelBySlag(slug).fireEvent(event.name, event);\r\n                            });\r\n                        });\r\n                    } else {\r\n                        console.log('Error retrieving data:', response.data);\r\n                    }\r\n                }\r\n            });\r\n        });\r\n    }\r\n    var sendFormAction = function (form_target, formId, customEventId = null, disabled = false){\r\n        var params = {\r\n            form_id: formId,\r\n            text: form_target.find('[type=\"submit\"]').is('input') ? form_target.find('[type=\"submit\"]').val() :\r\n                form_target.find('.forminator-button-submit').text() != '' ? form_target.find('.forminator-button-submit').text() :\r\n                    form_target.find('[type=\"submit\"]').text()\r\n        };\r\n\r\n        if (options.dynamicEvents.hasOwnProperty(\"automatic_event_form\")) {\r\n            var pixels = Object.keys(options.dynamicEvents.automatic_event_form);\r\n            for (var i = 0; i < pixels.length; i++) {\r\n\r\n                if ( disabled && customEventId && typeof options.triggerEvents[customEventId][pixels[i]] !== 'undefined') {\r\n                    continue;\r\n                }\r\n                var event = options.dynamicEvents.automatic_event_form[pixels[i]];\r\n                if (pixels[i] === \"tiktok\") {\r\n                    getPixelBySlag(pixels[i]).fireEvent(event.name, event);\r\n                } else {\r\n                    Utils.copyProperties(params, event.params)\r\n                    Utils.copyProperties(Utils.getRequestParams(), event.params);\r\n                    getPixelBySlag(pixels[i]).onFormEvent(event);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    var setupEmailLinks = function ( disabled_for_pixels = [] ) {\r\n        if ( options.dynamicEvents.hasOwnProperty( \"automatic_event_email_link\" ) ) {\r\n            var pixels = Object.keys( options.dynamicEvents.automatic_event_email_link );\r\n            for ( var i = 0; i < pixels.length; i++ ) {\r\n                if ( disabled_for_pixels.indexOf(pixels[ i ]) === -1 ) {\r\n                    var event = Utils.clone( options.dynamicEvents.automatic_event_email_link[ pixels[ i ] ] );\r\n                    if ( pixels[ i ] !== 'tiktok' ) {\r\n                        Utils.copyProperties( Utils.getRequestParams(), event.params );\r\n                    }\r\n                    getPixelBySlag( pixels[ i ] ).fireEvent( event.name, event );\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    //Elementor Forms Observer\r\n    var observeElementorForm = function ( form ) {\r\n        let observer = new MutationObserver( function ( mutations ) {\r\n\r\n            for ( let i = 0; i < mutations.length; i++ ) {\r\n                let mutation = mutations[ i ];\r\n\r\n                if ( mutation.type === 'childList' || mutation.type === 'attributes' ) {\r\n                    if ( $( form ).find( '.elementor-message-success' ).length > 0 ) {\r\n\r\n                        let form_id = $( form ).attr( 'id' );\r\n                        if ( !form_id ) {\r\n                            form_id = $( form ).find( 'input[name=\"form_id\"]' ).val();\r\n                        }\r\n\r\n                        let sendEventId = null,\r\n                            disabled_form_action = false;\r\n                        if ( options.triggerEventTypes.hasOwnProperty( 'elementor_form' ) ) {\r\n                            $.each( options.triggerEventTypes.elementor_form, function ( eventId, triggers ) {\r\n                                $.each( triggers, function ( index, trigger ) {\r\n                                    $.each( trigger.forms, function ( i, value ) {\r\n                                        if ( value == form_id ) {\r\n                                            disabled_form_action = trigger.disabled_form_action;\r\n                                            sendEventId = eventId;\r\n                                        }\r\n                                    })\r\n                                } );\r\n                            } );\r\n                        }\r\n                        if ( sendEventId != null ) {\r\n                            Utils.fireTriggerEvent( sendEventId );\r\n                        }\r\n                        sendFormAction( $( event.target ), form_id, sendEventId, disabled_form_action );\r\n\r\n                        observer.disconnect();\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        } );\r\n\r\n        // Start observing the form for changes\r\n        observer.observe( form, {\r\n            attributes: true,\r\n            childList: true,\r\n            subtree: true\r\n        } );\r\n    }\r\n\r\n}(jQuery, pysOptions);\r\n\r\nfunction pys_generate_token() {\r\n    return ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, c =>\r\n        (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)\r\n    );\r\n}\r\nfunction getBundlePriceOnSingleProduct(data) {\r\n    var items_sum = 0;\r\n    jQuery(\".bundle_form .bundled_product\").each(function(index){\r\n        var id = jQuery(this).find(\".cart\").data(\"bundled_item_id\");\r\n        var item_price = data.prices[id];\r\n        var item_quantity = jQuery(this).find(\".bundled_qty\").val();\r\n        if(!jQuery(this).hasClass(\"bundled_item_optional\") ||\r\n            jQuery(this).find(\".bundled_product_optional_checkbox input\").prop('checked')) {\r\n            items_sum += item_price*item_quantity;\r\n        }\r\n    });\r\n    return items_sum;\r\n}\r\n\r\nfunction getPixelBySlag(slug) {\r\n    switch (slug) {\r\n        case \"facebook\": return window.pys.Facebook;\r\n        case \"ga\": return window.pys.Analytics;\r\n        case \"gtm\": return window.pys.GTM;\r\n        case \"google_ads\": return window.pys.GAds;\r\n        case \"bing\": return window.pys.Bing;\r\n        case \"pinterest\": return window.pys.Pinterest;\r\n        case \"tiktok\": return window.pys.TikTok;\r\n    }\r\n}\r\nfunction getUrlParameter(sParam) {\r\n    var sPageURL = window.location.search.substring(1),\r\n        sURLVariables = sPageURL.split('&'),\r\n        sParameterName,\r\n        i;\r\n\r\n    for (i = 0; i < sURLVariables.length; i++) {\r\n        sParameterName = sURLVariables[i].split('=');\r\n\r\n        if (sParameterName[0] === sParam) {\r\n            return sParameterName[1] === undefined ? true : decodeURIComponent(sParameterName[1]);\r\n        }\r\n    }\r\n    return false;\r\n};\r\nfunction inArray(needle, haystack) {\r\n    var length = haystack.length;\r\n    for(var i = 0; i < length; i++) {\r\n        if(haystack[i] == needle) return true;\r\n    }\r\n    return false;\r\n}\r\n\r\nfunction getCookieYes(key) {\r\n    const cookies = document.cookie\r\n        .split(\";\")\r\n        .reduce(\r\n            (ac, cv, i) =>\r\n                Object.assign(ac, { [cv.split(\"=\")[0].trim()]: cv.split(\"=\")[1] }),\r\n            {}\r\n        )[\"cookieyes-consent\"];\r\n    const { [key]: value } = cookies\r\n        .split(\",\")\r\n        .reduce(\r\n            (obj, pair) => (\r\n                (pair = pair.split(\":\")), (obj[pair[0]] = pair[1]), obj\r\n            ),\r\n            {}\r\n        );\r\n    return value;\r\n}\r\n\r\nfunction getRootDomain(useSubdomain = false) {\r\n    const hostname = window.location.hostname; // Get the current hostname\r\n    // Check if tldjs is defined before using it\r\n    if (typeof tldjs === \"undefined\") {\r\n        console.warn(\"tldjs is not defined\");\r\n        return hostname; // Return hostname as a fallback\r\n    }\r\n\r\n    const rootDomain = tldjs.getDomain(hostname); // Use tldjs to extract the root domain\r\n\r\n    // Return the root domain with or without a leading dot based on useSubdomain\r\n    return rootDomain ? (useSubdomain ? '.' + rootDomain : rootDomain) : hostname;\r\n}\r\n"],"names":[],"sourceRoot":""}